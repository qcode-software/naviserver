From: David Osborne <david@qcode.co.uk>
Date: Fri, 16 Oct 2015 14:10:28 +0100
Subject: fix test on invalid result

---
 nsd/sock.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/nsd/sock.c b/nsd/sock.c
index 1edf337..24a1eaf 100644
--- a/nsd/sock.c
+++ b/nsd/sock.c
@@ -653,7 +653,7 @@ Ns_SockTimedConnect2(const char *host, int port, const char *lhost, int lport,
         switch (err) {
         case NS_OK:
             len = (socklen_t)sizeof(err);
-            if (getsockopt(sock, SOL_SOCKET, SO_ERROR, (char *)&err, &len) == -1) {
+            if (getsockopt(sock, SOL_SOCKET, SO_ERROR, (char *)&err, &len) != -1) {
                 return sock;
             }
             break;
