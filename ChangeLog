2020-01-06 07:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a4dc30fc9db [tip])

	* .hgtags:
	Added tag naviserver-4.99.19 for changeset 8bea1c622f34

2020-01-06 07:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8bea1c622f34 [naviserver-4.99.19])

	* NEWS, README, configure.ac:
	release work

2020-01-05 19:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (624c3bb331dd)

	* nsd/driver.c:
	improved comments, improved naming of a static function, removed
	redundant condition

2020-01-02 23:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90a712d54345)

	* nsd/tclcrypto.c:
	fix broken error message; reduce verbosity

2020-01-01 07:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbb3bbdd1397)

	* nsd/queue.c:
	strengthen request canceling, when filter closed connection

2019-12-30 20:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e596d5f12d11)

	* tests/testserver/modules/ns_filter.tcl: new file.
	* tests/testserver/modules/ns_filter.tcl:
	add regression test to previous change

2019-12-30 20:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2003bff5398c)

	* nsd/queue.c, tests/ns_server.test:
	fix for the bug reported by wolfgang winkler.

	If - for what-ever reason - a filter has closed the connection,
	treat the filter result as NS_FILTER_RETURN. Other replies to this
	connection can not work anymore.

2019-12-29 14:27 +0100  Zoran Vasiljevic  <zv@archiware.com>  (80eb2bb7987f)

	* tcl/ns_crypto.tcl:
	Fixed [ns_md] and [ns_hmac] when fed with paths with embedded
	blanks.

2019-12-26 23:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d6a59eef5a6)

	* Makefile.win32, include/Makefile.win32:
	Manually transfer changes from Andrew Piskorski's Windows nmake
	changes (Fix Windows 64-bit build, and use ActiveTcl 8.6)

2019-12-26 23:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5a8f2f5ff9b)

	* nslog/doc/mann/ns_accesslog.man:
	added example for separate log files of a single server

2019-12-26 23:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4bcd7375b7c9)

	* include/Makefile.global.in:
	improved handling of posix thread library of OpenBSD

2019-12-26 23:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b71bb58d31d2)

	* doc/src/naviserver/ns_server.man:
	improved documentation of map specs

2019-12-26 23:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72413148069a)

	* doc/src/manual/admin-tuning.man:
	improved documentation of map specs

2019-12-26 23:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0cafc142bdfb)

	* doc/src/man.css:
	improve styling of man pages a litle

2019-12-26 23:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81fa447cc6d5)

	* NEWS:
	improved spelling

2019-12-26 23:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a7ade399380)

	* Makefile:
	updated clang-tidy call

2019-12-25 21:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a3c8903860b5)

	* nsd/nsopenssl.h, nsd/tclcrypto.c, nsssl/nsssl.c:
	more fine-tuning for compiling with LibreSSL 2.7 (OpenBSD 6.3)

2019-12-25 19:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (87a71c7ed00c)

	* nsssl/nsssl.c:
	added compatibility function for LibreSSL < 3.0

2019-12-25 18:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (495b5bb0a9c5)

	* nsd/tclhttp.c:
	merge

2019-12-24 15:58 +0100  Zoran Vasiljevic  <zv@archiware.com>  (719caea2803b)

	* nsd/tclhttp.c:
	Fixed crash on [ns_http cleanup] when garbage-collecting channels.

2019-12-18 11:01 +0100  Zoran Vasiljevic  <zv@archiware.com>  (827af8e3e4b2)

	* nsd/sock.c:
	Added EPROTOTYPE bugfix for Darwin.

2019-12-25 18:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc6cd6215930)

	* nsd/tclhttp.c:
	use the more safe call "snprintf" instead of "sprintf"

2019-12-25 18:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7137684051b)

	* include/nscheck.h:
	gcc on OpenBSD has so far no support for "__thread" (thread local
	storage)

2019-12-25 15:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (568494a6971c)

	* nsd/conn.c, nsd/driver.c:
	silence static checker

2019-12-18 09:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd42a3debfd7)

	* nsd/driver.c, tests/ns_writer.test:
	add test for "ns_writer submitfiles" with file chunks larger than
	writerbufsize

2019-12-17 19:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65a0cab61234)

	* nsd/driver.c:
	fix error segment switching

2019-12-17 18:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40c5b77fe6f8)

	* nsd/driver.c:
	avoid potential read buffer overflow in new code: limit read length
	to max.

2019-12-16 19:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a33536f098ac)

	* nsd/driver.c:
	improve cleanness of compilation with older versions of gcc

2019-12-16 13:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8131e6683ad)

	* include/ns.h, include/nsconfig.h.in, nsd/sched.c:
	- handling of external Ns_LogAccessDebug: switch back to the
	solution provided by Andrew Piskorski to handle external symbol
	under windows. If someone has a better version, please let me know.

	- align function prototypes

2019-12-16 12:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (912bd521c66a)

	* doc/src/naviserver/ns_writer.man, nsd/connio.c, nsd/driver.c,
	nsd/nsd.h, nsd/return.c, nslog/nslog.c, tests/ns_writer.test:
	- new Tcl API call:

	 ns_writer sendfiles /list of filespecs/

	 every filespec is a dict which must contain a "filename" element
	and can contain additionally an "-offset" and/or a "-size" element.

	 ns_writer submitfiles {{filename /tmp/f1} {filename /tmp/f2 -offset
	10}}

	 This function is e.g. useful for video streaming applications,
	where multiple video file chunks should be transferred (sometimes)
	concatenated in a single chunk. Therefore, this function avoids the
	necessity to concatenate these files in advance (causing increased
	latency and disk usage).

	- extend nsd-internal function NsWriterQueue() by two arguments for
	keeping an optional Ns_FileVec with its length

	- extend regression test

	- despaghetti code: factor out WriterSetupStreamingMode (although
	being called just once) to improve readability of NsWriterQueue()

2019-12-16 12:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a02a7d1261c)

	* doc/src/naviserver/ns_crypto.man:
	improve spelling

2019-12-16 11:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a08454036866)

	* nsd/connchan.c:
	avoid shadowing of (unused) function argument

2019-12-16 10:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4994cae156e4)

	* nsd/connchan.c:
	handle potential problem, where call to Tcl*Eval* might clean
	structures used in the callback handler

2019-12-16 09:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38f7d8dad349)

	* include/ns.h, nsd/tclobjv.c:
	provide Ns_TclGetMemUnitFromObj as library function (was static
	before)

2019-12-15 12:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bdd1377c91e4)

	* nsd/sockcallback.c:
	improve comment

2019-12-13 14:09 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b6517c7a1c07)

	* nsd/tclthread.c:
	Fixed broken [ns_critsec eval] command.

2019-12-09 13:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42dde64cf4a0)

	* nslog/nslog.c:
	add "NS_EXTERN" declaration to global variable (shows up with
	-Wmissing-variable-declarations)

2019-12-09 13:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (500af4c192aa)

	* merge

2019-12-09 13:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81d5094321b0)

	* nsd/connchan.c:
	ease debugging in async cases

2019-12-07 18:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4237cfcf49c7)

	* include/ns.h, nslog/nslog.c:
	address visibility problem of Ns_LogAccessDebug in nslog.c under
	windows

2019-12-07 17:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5e4628a6de8)

	* nsd/dns.c:
	address compilation issue under windows (see
	https://openacs.org/forums/message-view?message_id=5439000)

2019-12-09 13:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d8107e1eb2f)

	* doc/src/naviserver/ns_crypto.man:
	improve documentation

2019-12-06 23:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e8b02b6e901)

	* include/nscheck.h, include/nsthread.h, nsd/log.c:
	use native thread_local storage when available (experimental)

2019-12-06 16:46 +0100  Zoran Vasiljevic  <zv@archiware.com>  (e6068701ed47)

	* nsd/tclhttp.c:
	HttpConnect() properly initializes sock element avoiding false
	releases during exception processing.

2019-12-05 21:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d398cd7c0ca5)

	* doc/src/naviserver/ns_crypto.man, nsd/tclcrypto.c:
	ns_crypto: add passphrase handling to all command working on .pem
	files.

	In principle, every .pem file can be protected by a passphrase,
	which can now be passed via argument "-passphrase"

2019-12-04 21:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (540387ce4025)

	* nsd/tclcrypto.c:
	make no assumption about the size of the signature.

2019-11-30 12:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7258d7f6c4f)

	* doc/src/naviserver/ns_writer.man, nsd/driver.c,
	tests/ns_writer.test:
	provide same interface to "ns_writer streaming" as for "ns_writer
	size"

	 ns_writer streaming ?-driver drv? ?bool?

	The change is backwards compatible, the old interface is still
	supported but deprecated.

	In addition, documentation was updated and test cases were added.

2019-11-29 21:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63b4d396f7fa)

	* nsd/tclobjv.c:
	return error messages, when required parameters for non-positional
	arguments are missing

2019-11-29 21:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (60e81ba2a5cf)

	* doc/src/naviserver/ns_writer.man:
	document the new interface of "ns_writer size"

2019-11-29 21:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7e1bb783f7e)

	* nsd/driver.c:
	provide for "ns_writer size" an interface, where per-default, the
	driver of the current connection threads is used

	 ns_writer size ?-driver drv? ?size?

	the new interface supports as well the previous interface based on
	two positional arguments. The old interface is deprecated.

	still to do:
	- documentation updates
	- "ns_writer streaming"

2019-11-27 11:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2562d669f45f)

	* merge

2019-11-27 11:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3799426f5e2b)

	* doc/src/naviserver/ns_adp_parse.man:
	add cross reference to man page

2019-11-27 11:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07ffa1734aa9)

	* NEWS:
	fix typo

2019-11-26 14:21 +0100  Zoran Vasiljevic  <zv@archiware.com>  (75f35a7747ea)

	* nsd/dns.c:
	Unified handling for dns error on EAI_NONAME cases.

2019-11-26 14:13 +0100  Zoran Vasiljevic  <zv@archiware.com>  (40721feab1c8)

	* nsd/dns.c:
	Improved logs during dns lookup errors.

2019-11-23 19:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e1f4d33439d)

	* nsd/sockfile.c:
	remove one level on indentation

2019-11-23 12:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6df0199261bd)

	* nslog/nslog.c:
	add request line to debug output

2019-11-23 12:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3ee48718195)

	* nslog/nslog.c:
	add debug line for access log filtering

2019-11-23 12:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (84a93500fb3b)

	* doc/src/naviserver/ns_crypt.man, doc/src/naviserver/ns_md5.man,
	doc/src/naviserver/ns_sha1.man, doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man:
	advertise ns_base64* stronger than ns_uu{en,de}decode, since the
	former is the more common name

2019-11-22 14:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f1b6b013ad72)

	* doc/src/man.css:
	improve readability of commands in doc pages

	previously, the commands listed in the synopsis were listed
	underlined, which and it hat to read for subcommands, whether the
	subcommand was joined via space or blank.

2019-11-22 14:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (552c5a3cbfdc)

	* doc/src/naviserver/ns_crypto.man:
	remove trailing space messing up doc generation

2019-11-22 14:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (681dad3dab69)

	* nsdb/doc/mann/ns_buildsqldate.man, nsdb/doc/mann/ns_db.man,
	nsdb/doc/mann/ns_dbquotevalue.man:
	prefer allcaps spelling for "sql"

2019-11-22 13:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d028214548dd)

	* nslog/doc/mann/ns_accesslog.man, nslog/nslog.c:
	new feature: allow separate access logs for requests sent via
	different drivers.

	The nslog module accepts now an additional parameter named "driver".
	This option can be used to produce different access logs for
	requests submitted via different drivers to sort out e.g. local
	server talk. Per default, every request is logged. When a value is
	provided for this parameter, only requests are logged in this log
	file when these come from a driver matching the provided glob
	pattern.

	 # # Configure extra nssock driver for loopback traffic # ns_section
	"ns/modules" { ns_param loopback ${bindir}/nssock }

	ns_section ns/module/loopback { ns_param defaultserver $server
	ns_param address 127.0.0.1 ns_param port 8888 }

	# # Load nslog modules twice with different names # ns_section
	ns/server/${server}/modules { ns_param nslog ${bindir}/nslog
	ns_param nslog2 ${bindir}/nslog }

	# # configure driver patterns (default "*") # ns_section
	ns/server/${server}/module/nslog2 { ns_param file ${logroot}/access-
	loopback.log ns_param driver "loopback" } ns_section
	ns/server/${server}/module/nslog { ns_param file
	${logroot}/access.log ns_param driver "ns*" }

2019-11-22 13:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (391c8e98c730)

	* nslog/doc/mann/ns_accesslog.man:
	order configuration options alphabetically

2019-11-22 13:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e508a0e3f060)

	* doc/src/naviserver/ns_limits.man-retracted:
	fix typo

2019-11-14 12:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ae2b325f4eb)

	* tests/testserver/etc/myprivate.pem: new file.
	* doc/src/naviserver/ns_crypto.man, nsd/request.c, nsd/tclcrypto.c,
	tests/ns_crypto.test, tests/testserver/etc/myprivate.pem:
	::ns_crypto::md: add signature validation

	In addition to the previously supported signature generation (using
	option "-sign"), the new options "-verify" and -signature" can be
	used to verify the signature.

	Example:

	% set sig [::ns_crypto::md string \
		     -digest sha1 \
		     -encoding binary \
		     -sign /usr/local/src/naviserver/myprivate.pem \
	"abcdefghijklmnopqrstuxvwxyz\n"]

	% set vfy [::ns_crypto::md string \
		     -digest sha1 \
		     -verify /usr/local/src/naviserver/myprivate.pem \
		     -signature $sig \ "abcdefghijklmnopqrstuxvwxyz\n"]

2019-11-14 10:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (988790889ed1)

	* nsd/uuencode.c:
	capitalize name properly

2019-11-13 19:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23d87364ebed)

	* tcl/aolserver-openacs.tcl:
	provide a warning message in case loading of NSF/XOTcl 2 fails

2019-11-13 19:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f82a260f1e00)

	* nsd/tclcrypto.c:
	avoid double free in EVP_MD_CTX_free(), since EVP_DigestSignFinal()
	seems to free the md-context

2019-11-06 12:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1fa3d90e55d2)

	* nsd/queue.c:
	Clear sockPtr members after copying these to connPtr to avoid hard
	to track effects (with flag values)

2019-11-06 12:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (804f1b4b00e4)

	* nsd/connio.c:
	make log messages more consistent

2019-11-06 12:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c60262f8309f)

	* include/ns.h:
	make spelling in comments more consistent

2019-10-30 13:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16c7ea242912)

	* nsd/driver.c:
	Reduced number of returns before end of function; removed needless
	assert.

2019-10-29 09:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5176741d8d1e)

	* doc/src/naviserver/ns_writer.man, nsd/driver.c, nsd/tclobjv.c:
	use memory units for to following tcl commands ns_writer submitfile
	(for -offset and -size) ns_writer size vale (for value)

	one can now write ns_writer size nssock 150KB instead of ns_writer
	size nssock [expr 150*1024]

2019-10-29 08:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b0365536f36)

	* nsd/fd.c:
	add debugging and assertion to tmp file management

2019-10-29 08:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5a66b0d9184)

	* nsd/driver.c:
	Fix leaking tmp file, when writerstraming is activated and streaming
	HTML output is used. This bug could appear, when "writerstreaming"
	is turned on in the config file (default off).

	see also: https://sourceforge.net/p/naviserver/mailman/naviserver-
	devel/thread/dd508519-1262-bd91-288a-fa30a7634224%40digital-
	concepts.com/#msg36794472

2019-10-25 18:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc1937bc4137)

	* include/Makefile.global.in:
	provide release-style compile flags also during development, e.g.
	before the release (since some old compilers might not accept all
	these)

2019-10-20 14:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (91b5b3dea686)

	* nsd/cookies.c, nsd/urlencode.c:
	Make table used for enumeration values for Ns_ObjvIndex static.

	Background: http://cvs.openacs.org/changelog/OpenACS?cs=oacs-5-10%3A
	gustafn%3A20191020125252

2019-10-20 11:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c6eb02f150a)

	* nsd/driver.c:
	silence compiler warnings when compiling with Tcl 8.5

2019-10-20 11:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c3f5048d7a94)

	* include/nsthread.h, nsd/tclcrypto.c, nsd/unix.c, nsthread/thread.h:
	reduce compiler warnings when compiling with tcl 8.5

2019-10-19 18:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (729062626afc)

	* nsd/tclhttp.c:
	tclhttp: fix write to freed memory when NS_SOCK_DONE is called

2019-10-19 14:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7cfee992b2ee)

	* merge

2019-10-19 14:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aeda73bcc547)

	* nsperm/init.tcl:
	provide better variable name

2019-10-19 14:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (66f0ebe12b93)

	* nsd/cache.c:
	provide a better name for static function

2019-10-19 14:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f0c2b0f0ffd9)

	* nsd/driver.c:
	improve comment

2019-10-18 13:59 +0200  Zoran Vasiljevic  <zv@archiware.com>  (64c1782f0741)

	* include/nscheck.h:
	Undef _STRICT_STDC that gets defined by <limits.h> on Solaris. This
	makes trouble with <signal.h>

2019-10-19 14:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1fafcd3603b)

	* nsd/tclhttp.c:
	avoid potential crash, when HTTP task fails before the real task has
	been created

2019-10-17 18:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c30b9aafc0b)

	* nsd/server.c:
	output warning, when naviserver was compiled without zlib support,
	but the config file request compression.

	Before, the compress enable request was silently ignored

2019-10-12 11:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (473420296124)

	* nsd/driver.c:
	omit poolrate output, when poolrate is 0

2019-10-11 21:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c90729ea09b1)

	* doc/README, nsd/sched.c, nsd/tcltime.c:
	improve spelling

2019-10-11 21:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4c8b7ee6c216)

	* nsd/driver.c:
	new debug flag: Debug(writer)

2019-10-11 21:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7125578472c)

	* nsd/tclvar.c:
	fix broken nsv_bucket (objv parser was off by one)

2019-10-07 21:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a4ab8a10db6d)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/server.c:
	new API function NsPoolName() to make output of default pool name
	(empty) more consistent

2019-10-07 12:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aba6584f8a0a)

	* include/ns.h, nscgi/nscgi.c, nsd/op.c, nsd/queue.c,
	nsd/returnresp.c, nsd/tclrequest.c:
	New API call Ns_ConnTryReturnInternalError() to notice internal
	errors (500) in cases, the connection is already closed.

	Before this change, the server could crash in some desperate error
	situations.

2019-10-05 14:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2d46e5fb65c)

	* doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_tmpnam.man, doc/src/naviserver/ns_totp.man,
	nsd/init.tcl, nsd/queue.c, nsd/sock.c, nsd/str.c, nsd/tclcache.c,
	nsd/tclinit.c, tcl/nstrace.tcl, tests/ns_adp_compress.test:
	make comma setting more consistent

	see: https://onlinewritingtraining.com.au/however-therefore-
	furthermore/

2019-10-05 12:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef8eb30220c0)

	* nsssl/nsssl.c:
	remove debugging output

2019-10-05 12:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d07172ee39f)

	* nsd/connchan.c, nsd/tls.c, nsssl/nsssl.c:
	Fix a bug caused be the low-level refactoring leading to incomplete
	https transfers with connchan.

	The problem was that due to the refactoring since the last release,
	the low-level https operations were made strictly non-blocking,
	where before these operations might have blocked in some situations
	(partial writes). Partial writes were already working before this
	patch, but in certain situations, we experienced a 0 byte partial
	operation, followed by an error like

	 Error: spool: POSIX {unknown error} Success, channel conn451 send
	operation failed: Success

	It turned out that was caused by an OpenSSL error
	"ssl3_write_pending:bad write retry", which is issued, when an
	operation ending in an SSL_ERROR_WANT_WRITE was executed with a
	different buffer pointer (the resubmission of partial written data
	happens via Tcl). The issue was addressed via the OpenSSL mode flag
	SSL_MODE_ACCEPT_MOVING_WRITE_BUFFER. See the comments in the source
	code for more details and alternate approaches.

2019-10-05 12:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (999b44298272)

	* tests/ns_info.test, tests/ns_proxy.test, tests/ns_server.test:
	Don't abbreviate Tcl's subcommand names

2019-10-05 11:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (73f1626dc076)

	* nsd/driver.c, nsd/tclvar.c:
	improve spelling

2019-10-05 11:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c61810db749f)

	* nsd/sock.c:
	improve variable names and comments

2019-10-04 23:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d61d39c0c21d)

	* doc/src/naviserver/ns_connchan.man:
	improve man page

2019-10-04 23:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17c89623f13b)

	* nsd/queue.c:
	fix dynamic setting of poolratelimit and connectionratelimit

2019-10-03 10:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f075e258caca)

	* nsd/tclhttp.c:
	add missing semicolon

2019-10-01 22:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3baba02281c0)

	* nsd/tclhttp.c:
	make clear via assertion, when double HttpClose operations will
	happen

2019-10-01 22:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3221e12893da)

	* nsd/index.c:
	improve expressiveness of code: no need to use += operator when lhs
	is zero

2019-10-01 21:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72f2ad72931d)

	* nsd/tclhttp.c:
	Avoid calls to HttpTaskSend() when there is nothing to send.

	We sow in some error cases such calls, leading to a assertion
	violation.

2019-10-01 21:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d61e6941e15c)

	* nsd/connchan.c:
	add comment about strange error messages appearing occoasionally

2019-09-26 08:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5602e8027831)

	* nsd/driver.c:
	fix typo in var name

2019-09-26 08:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c113de8738b6)

	* nsd/tclhttp.c:
	don't pass NULL after the last typed argument to a variadic function

2019-09-18 10:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (083eec3e3548)

	* nsd/tclimg.c:
	Silence some compilers that do not see that all enumeration values
	are covered by switch statement

2019-09-18 10:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fca4749a87f5)

	* doc/src/naviserver/ns_crypto.man, nsd/tclcrypto.c,
	tests/ns_crypto.test:
	Added "-binary" option for input processing to the following
	functions:

	ns_crypto::hmac new (for "key") ns_crypto::hmac add (for "message")
	ns_crypto::hmac string (for "key", "message") ns_crypto::md add (for
	"message") ns_crypto::md string (for "message") ns_crypto::md
	vapidsign (for "message") ns_crypto::md hkdf (for "-salt" "-secret"
	"-info") ns_crypto::scrypt (for "-salt" "-secret") ns_crypto::eckey
	import ("-string") ns_crypto::eckey sharedsecret ("pubkey")
	ns_crypto::aead::encrypt string (for "-key", "-aad", "-iv", "input")
	ns_crypto::aead::decrypt string (for "-key", "-aad", "-iv", "input")

2019-09-18 10:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f27c7c91916)

	* nsd/adpcmds.c, nsd/nsmain.c, nsd/urlspace.c:
	Silence some compilers that do not see that all enumeration values
	are covered by switch statement

2019-09-11 20:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (477a12eb8a5d)

	* tests/ns_urlencode.test:
	adjust test cases

2019-09-11 20:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec8006230251)

	* doc/src/naviserver/ns_base64.man, doc/src/naviserver/ns_md5.man,
	doc/src/naviserver/ns_sha1.man, doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man, nsd/tclmisc.c,
	tests/ns_base64.test, tests/ns_md5.test, tests/ns_sha1.test,
	tests/ns_uuencode.test:
	add a "-binary" option for input processing to the following
	functions: ns_base64encode ns_base64urlencode ns_uudecode
	ns_uuencode ns_md5 ns_sha1

2019-09-11 20:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7368101e33d9)

	* nsd/tclobjv.c:
	Argument parser: skip processing of optional arguments when the
	number of provided arguments is equal to the number of required
	parameters.

	Background: This change allows a fully backward compatible version
	of e.g. "ns_md5 $foo", no matter what the value of "$foo" is,
	although the new version of "ns_md5" has now a "-binary" option.

2019-09-10 09:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b0d911364c07)

	* nsperm/hosts.allow:
	fix typo

2019-09-09 11:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (298026c175c6)

	* nsd/driver.c, nssock/doc/mann/nssock.man:
	driver rate limit: align code with documentation

2019-08-31 14:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5a053869cf8)

	* nsd/sockfile.c:
	initialize variables in all cases

2019-08-31 14:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41b294462064)

	* include/Makefile.global.in:
	add POSIX thread library to load options on FreeBSD

2019-08-31 13:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8f1cacf7c8b)

	* Makefile.win32:
	improve spelling

2019-08-31 13:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8028516f1576)

	* doc/src/naviserver/returnstatus-cmds.man:
	improve spelling

2019-08-31 13:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54578f5b2255)

	* tests/ns_base64.test, tests/ns_crypto.test:
	support more test cases also when not nsf is available

2019-08-23 19:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1de9efb4dfae)

	* nsd/driver.c, nsd/info.c, nsd/sched.c, nsssl/nsssl.c,
	nsthread/nsthreadtest.c:
	get rid auf all warnings about bad-function-cast

2019-08-23 19:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (969647ac9e83)

	* nsthread/pthread.c:
	reduce warnings about bad-function-cast

2019-08-23 18:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e1182c033735)

	* nsd/binder.c:
	improve alignment issues

2019-08-23 11:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dbe58545e6b2)

	* nsd/conn.c, nsd/sockaddr.c, nsd/urlspace.c:
	make sure, variables are always initialized (also in non-reachable
	branches)

2019-08-23 11:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d4186ea92d75)

	* include/ns.h, nsd/tclcallbacks.c:
	fix alignment issues

2019-08-22 20:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c46b5298e5e0)

	* nsd/driver.c:
	simplify logic of function

2019-08-22 19:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8673cc892986)

	* nscgi/nscgi.c, nscp/nscp.c, nsdb/nsdb.c, nsdbtest/nsdbtest.c,
	nsperm/nsperm.c, nsproxy/nsproxymod.c, nssock/nssock.c,
	nsssl/nsssl.c:
	adding missing "extern" declarations

2019-08-22 19:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40c3eb9108a4)

	* nsthread/tls.c:
	add "static" declaration

2019-08-22 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (75e0bf4986e0)

	* nsd/driver.c, nsd/nsmain.c:
	removed unreachable "break" statements

2019-08-22 19:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2afb4c55b440)

	* include/ns.h, include/nsthread.h, nsd/nsd.h, nsd/nsmain.c,
	nsd/unix.c, nsthread/nsthreadtest.c, nsthread/thread.h:
	added NS_GNUC_NORETURN declarations

2019-08-22 19:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b413c5f2f887)

	* nsd/compress.c, nsd/sock.c, nsd/tclcrypto.c:
	removed empty statements

2019-08-22 19:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eeb3e69238d8)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c, nsd/driver.c,
	nsd/nsmain.c, nsd/op.c, nsd/queue.c, nsd/tclcrypto.c, nsd/tclimg.c,
	nsd/tclrequest.c, nsd/urlspace.c, nsdb/dbdrv.c:
	remove "default" from switch statements having all enumeration
	values covered.

2019-08-22 18:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b075aba6f964)

	* nslog/doc/mann/ns_accesslog.man, nslog/nslog.c:
	use the term "response" instead of "reply", since RFC 2068ff use
	"request" and "response"

2019-08-21 11:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4e1edca3fd60)

	* include/ns.h, nsd/str.c, nsd/tclcrypto.c, nsd/tclmisc.c:
	add "foreBinary" argument to Ns_GetBinaryString() (currently not
	used)

2019-08-21 11:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac67fb0ff57a)

	* nsd/tclmisc.c:
	fix alignment issues

2019-08-21 10:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (952883b69be6)

	* doc/src/naviserver/ns_locationproc.man, doc/src/naviserver
	/returnstatus-cmds.man, nssock/doc/mann/nssock.man:
	- improve documentation, how locations in redirects are
	handled/configured

2019-08-21 10:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54b98394e1a2)

	* nsproxy/nsproxylib.c:
	- fix different alignment requirements of char* and Req * (or Res
	*).
	- add missing static declarations
	- make sure, data is always initialized

2019-08-20 21:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bbce14aad719)

	* include/ns.h, nslog/doc/mann/ns_accesslog.man, nslog/nslog.c,
	openacs-config.tcl:
	new feature: provide access to request AND reply header fields via
	"exteheaders" specification.

	It is now optionally possible to specify the header fields with a
	tag "request:" or "reply:" to denote request and reply header
	fields. In case, no tag is provided, field names are interpreted as
	request header fields. The change is fully backwards compatible,

2019-08-20 21:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29843a95e643)

	* nsssl/README.md:
	improve spelling

2019-08-20 11:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dac63e88c721)

	* nsthread/nsthreadtest.c:
	add static declarations to variables, remove unreachable break

2019-08-20 11:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf9accd30632)

	* nsd/nsconf.c, nsd/nsd.h, nsd/stamp.c:
	add missing EXTERN declarations

2019-08-20 11:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43eb07e202ce)

	* nsd/tclhttp.c:
	fix type mismatch

2019-08-20 11:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3be3464dc11b)

	* nslog/nslog.c:
	Debug(access): avoid trailing newline in system log

2019-08-20 11:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fdcb3e093a45)

	* doc/src/naviserver/ns_log.man:
	list predefined severities

2019-08-20 10:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8f64d4e879f)

	* include/ns.h, nsd/driver.c, nslog/nslog.c:
	Additional severity Debug(access): when activated, entries of the
	access log are mirrored in the system log (error.log)

	This feature eases debugging for setups with no sophisticated log
	analysis infrastructure (such as e.g. elastic stack)

2019-08-20 10:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aae79dfe18ba)

	* nsthread/mutex.c:
	Removed unused macro definition

2019-08-17 19:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bebb757c7064)

	* tests/ns_crypto.test:
	omit test in versions before tcl8.6

2019-08-17 18:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5bdbf181a1b)

	* nsd/connchan.c:
	fix typo

2019-08-17 18:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aedae2df4919)

	* nslog/nslog.c:
	- reduce variable scopes
	- reduce return before end of function

2019-08-17 18:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b726d0acaa50)

	* include/ns.h:
	improve structure packing

2019-08-17 18:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9655cf0e36a3)

	* nssock/nssock.c:
	remove unneeded cast

2019-08-17 18:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45733723c8a6)

	* nsssl/nsssl.c:
	remove unused macro and unneeded casts

2019-08-17 18:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57f1a6cd3aa4)

	* nsd/tclmisc.c:
	use default encoding

2019-08-17 18:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1565101ac549)

	* nsd/tclhttp.c:
	on logging, write the full request, not only until the first NULL
	character

2019-08-16 11:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (274021ba368b)

	* doc/src/naviserver/ns_base64.man, nsd/tclmisc.c:
	ns_base64decode, ns_base64urldecode: added documentation for option
	"-binary"

2019-08-15 18:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c91509ee9555)

	* tests/ns_base64.test, tests/ns_crypto.test, tests/ns_nsv.test,
	tests/ns_uuencode.test:
	Add option "-binary" to ns_base64decode

2019-08-15 18:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (423290dcf8fa)

	* nsd/tclmisc.c:
	improve comment

2019-08-15 17:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f2148aee93ed)

	* include/nsthread.h, nsd/pathname.c:
	remove redundant declarations

2019-08-15 14:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df63c366dc2d)

	* doc/src/manual/admin-maintenance.man:
	adjust sample service file to current naming conventions of TCmalloc

2019-08-15 14:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f7b7b1ed3bc)

	* doc/src/naviserver/ns_hmac.man, doc/src/naviserver/ns_md.man:
	documentation for ns_hmac: make clear that "new" requires always a
	key.

2019-08-15 13:15 +0200  Zoran Vasiljevic  <zv@archiware.com>  (9669ca242d21)

	* doc/src/naviserver/ns_hmac.man, doc/src/naviserver/ns_md.man,
	tcl/ns_crypto.tcl:
	Added -encoding and multiple files to "file" method

2019-08-14 20:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9fe991a0c187)

	* doc/src/naviserver/ns_hmac.man, doc/src/naviserver/ns_md.man:
	update documentation of "ns_md" and "ns_hmac": add documentation of
	"encoding"

2019-08-13 23:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a50897868543)

	* nsd/tclmisc.c, tests/ns_base64.test:
	return result of ns_base64decode as bytearray to avoid loss of
	binary data.

2019-08-13 22:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9dcab5db9449)

	* NEWS:
	add example to NEWS file

2019-08-10 15:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (60e58a20dac9)

	* NEWS, include/nsconfig.h.in, nsproxy/doc/mann/ns_proxy.man, sample-
	config.tcl.in, tests/testserver/modules/testhttp.tcl:
	improve spelling

2019-08-10 15:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf56975518fa)

	* doc/src/naviserver/ns_asynclogfile.man,
	doc/src/naviserver/ns_http.man:
	fix man pages

2019-08-10 14:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b3e60635535)

	* tcl/ns_crypto.tcl:
	support "-encoding" option for "ns_hmac|ns_md get"

2019-08-09 22:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (afdea87373e4)

	* NEWS, tcl/sendmail.tcl:
	improve spelling

2019-08-09 21:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c5b566afc2e5)

	* doc/src/manual/admin-tuning.man, doc/src/manual/tcl-lib-file.man,
	doc/src/manual/tcl-libraries.man, doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_base64.man, doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_filestat.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_return.man, doc/src/naviserver/ns_writer.man,
	doc/src/naviserver/returnstatus-cmds.man, include/ns.h,
	nsd/adpeval.c, nsd/binder.c, nsd/cls.c, nsd/conn.c, nsd/dstring.c,
	nsd/fastpath.c, nsd/fd.c, nsd/index.c, nsd/info.c, nsd/lisp.c,
	nsd/nsmain.c, nsd/progress.c, nsd/request.c, nsd/return.c,
	nsd/sls.c, nsd/sockaddr.c, nsd/sockcallback.c, nsd/str.c,
	nsd/tclcache.c, nsd/tclcmds.c, nsd/tclfile.c, nsd/tclhttp.c,
	nsd/tcltime.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/unix.c,
	nsdb/dbinit.c, nslog/doc/mann/ns_accesslog.man, nslog/nslog.c,
	nsproxy/nsproxylib.c, nsthread/sema.c, nsthread/tls.c,
	tcl/config.tcl, tests/http.test, tests/ns_urlspace.test:
	improve spelling

2019-08-09 14:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d386c7358f4d)

	* include/nsthread.h, nsd/str.c, nsd/tclobj.c, nsd/tclobjv.c,
	tests/ns_base64.test, tests/ns_crypto.test:
	Fix nasty bug with pure byte arrays in versions of Tcl before 8.7.
	Extended regression test.

2019-08-08 18:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6ffb67a7c48)

	* tests/ns_crypto.test:
	adjust syntax respnose in test

2019-08-08 18:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e37603993606)

	* nsd/tclcrypto.c:
	add "--" to make sure the parsing is not confused with values
	looking like flags

2019-08-08 18:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7698b5bfa819)

	* tcl/ns_crypto.tcl:
	support "-encoding interface" for ns_md and ns_hmac

2019-08-08 13:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a947f4b520b)

	* tests/ns_base64.test:
	further extend test cases (e.g. binary content from files)

2019-08-08 13:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c0889d764cd)

	* doc/src/naviserver/ns_crypto.man:
	make documentation more precise

2019-08-08 09:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (900aa1bf35d0)

	* tests/testserver/pages/utf-8-chars: new file.
	* tests/ns_base64.test, tests/testserver/pages/utf-8-chars:
	add additional test for bytearray conversions

2019-08-07 21:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ddb748b6756)

	* nsd/driver.c, nsd/tclcrypto.c:
	Brought output of hexprint of binary crypto commands under the
	control of ns_logctl:

	% ns_logctl severity Debug on 0

	% ns_md string ü
	[07/Aug/2019:21:15:54][5989.70000e0ac000][-command-] Debug: md (len
	2): c3 bc
	607474ca475a9724d7360aba71a56d5df77e61350e3f724cfa1f46e857e2d85f

	% ns_hmac string ä ü
	[07/Aug/2019:21:16:59][5989.70000e0ac000][-command-] Debug: hmac key
	(len 2): c3 a4 [07/Aug/2019:21:16:59][5989.70000e0ac000][-command-]
	Debug: hmac message (len 2): c3 bc

2019-08-07 12:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26fa4b5b73f2)

	* nsd/tclvar.c, tests/ns_nsv.test:
	fix bug in "nsv_set -default" overwriting pre-existing values;
	extended regression test

2019-08-07 12:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (223a47609091)

	* nsd/init.tcl:
	improve hint from config file

2019-08-07 12:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8643af9c723c)

	* NEWS, nsd/set.c, nsd/tclcrypto.c:
	typographic changes

2019-08-02 14:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (edb90f3e3853)

	* nsd/tclhttp.c:
	improve spelling

2019-08-02 14:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e03ee1a342f)

	* nsd/str.c, nsd/tclmisc.c, tests/ns_base64.test:
	Do not require the user to convert UTF-8 characters manually to byte
	arrays on the Tcl level. In the last tow releases (4.99.17 and
	4.99.18) the NaviServer behavior went towards Tcl, but this lead to
	compatibility problems and puts a burden to the user on the Tcl
	level.

	See below for some background and consequences.

	 /*
	     * Obtain the binary data from an obj. If the Tcl_Obj is not a bytecode
	     * obj, produce it on the fly to avoid putting the burden to the user.
	     *
	     * Tcl requires the user to convert UTF-8 characters into bytearrays
	on
	     * the scripting level, as the following example illustrates. The UTF-8
	     * character "ü" requires 2 bytes:
	     *
	     * % binary encode hex ü
	     * fc
	     * % binary encode hex [encoding convertto utf-8 ü]
	     * c3bc
	     *
	     * When doing a base64 encoding, the casual user expect the same
	behavior
	     * as in a shell, e.g. for transforming "ü" into a based64 encoded
	string:
	     *
	     * $ echo -n "ü" |base64
	     * w7w=
	     *
	     * % ns_base64encode ü
	     * w7w=
	     *
	     * But Tcl requires this interaction "manually":
	     *
	     * % binary encode base64 ü
	     * /A==
	     *
	     * % binary encode base64 [encoding convertto utf-8 ü]
	     * w7w=
	     *
	     * The same principle should as well apply for the crypto commands,
	where
	     * the NaviServer user should not have to care for converting chars to
	     * bytestrings manually.
	     *
	     * $ echo -n "ü" |openssl sha1
	     * (stdin)= 94a759fd37735430753c7b6b80684306d80ea16e
	     *
	     * % ns_sha1 "ü"
	     * 94A759FD37735430753C7B6B80684306D80EA16E
	     *
	     * % ns_md string -digest sha1 ü
	     * 94a759fd37735430753c7b6b80684306d80ea16e
	     *
	     * The same should hold as well for 3-byte UTF-8 characters
	     *
	     * $ echo -n "☀" |openssl sha1
	     * (stdin)= d5b6c20ee0b3f6dafa632a63eafe3fd0db26752d
	     *
	     * % ns_sha1 ☀
	     * D5B6C20EE0B3F6DAFA632A63EAFE3FD0DB26752D
	     *
	     * % ns_md string -digest sha1 ☀
	     * d5b6c20ee0b3f6dafa632a63eafe3fd0db26752d
	     *
	     */

2019-08-02 13:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a789ba209e22)

	* openacs-config.tcl:
	use lowercase parameter names

2019-08-02 12:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (599128efdf4a)

	* tests/http.test:
	omit questionable tests with binary content via non-binary mimetype
	for versions before Tcl 8.7

2019-08-02 11:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5857cf3e22c)

	* tests/misc.test:
	make test more robust for different time zones

2019-08-02 11:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aad12e97a8e5)

	* nsd/tclhttp.c, tests/http.test:
	pass the character data in the "binary" cases explicitly as
	bytearrays. This fixes the formerly "broken" cases in the regression
	test

2019-07-30 11:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e1f4e3699ed0)

	* nsd/tclhttp.c:
	improve spelling

2019-07-30 11:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b4585d85ef1f)

	* nsd/nsd.h:
	merge

2019-07-30 10:58 +0200  Zoran Vasiljevic  <zv@archiware.com>  (e1a94470b2e1)

	* doc/src/naviserver/ns_http.man, nsd/nsd.h, nsd/tclhttp.c:
	Added request/reply body byte counters for [ns_http stats].

2019-07-30 11:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ca18e7cd817)

	* doc/src/naviserver/ns_asynclogfile.man: new file.
	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_asynclogfile.man,
	doc/src/naviserver/ns_log.man, include/ns.h, nsd-config.tcl,
	nsd/driver.c, nsd/dstring.c, nsd/log.c, nsd/nsd.h, nsd/nsmain.c,
	nsdb/dbinit.c, openacs-config.tcl, sample-config.tcl.in:
	Make log-file sanitizer better configurable: instead of just turning
	the sanitizer on/off as implemented by https://bitbucket.org/naviser
	ver/naviserver/commits/e08c3449bfc592ab1451bd7e232e97436e7181ff a
	third value was added for a human readable sanitized log-file
	format, that still addresses security concerns (make it impossible
	to confuse logged content with log entries). The new option
	preserves new-line characters but prefixes continuation lines.

2019-07-30 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (64d065676817)

	* tests/http_byteranges.test:
	Reduce verbosity

2019-07-27 13:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43cb3097a0e3)

	* nsd/tclhttp.c:
	Clarify bitwise expression with parentheses Make sure, sockstate is
	always initialized.

2019-07-25 18:49 +0200  Zoran Vasiljevic  <zv@archiware.com>  (60f5931db243)

	* nsd/tclhttp.c:
	Remove transfer-encoding header from reply because we parse it now
	clean.

2019-07-25 15:03 +0200  Zoran Vasiljevic  <zv@archiware.com>  (05ea1d605972)

	* nsd/tclhttp.c:
	Decision to end read state during chunked encoding is now
	strengthened.

2019-07-25 12:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (756024b2058c)

	* nsd/tclhttp.c:
	merge and remove dead code

2019-07-24 18:25 +0200  Zoran Vasiljevic  <zv@archiware.com>  (d36cf93bf045)

	* nsd/nsd.h, nsd/tclhttp.c:
	Make sure we never read mpre than necessary from the socket. For
	non-chunked replies, stop on Content-Length. For chunked replies,
	stop on end-frame (last CRLF).

2019-07-24 15:38 +0200  Zoran Vasiljevic  <zv@archiware.com>  (39fc980061e6)

	* nsd/tclhttp.c:
	Re-merged.

2019-07-24 15:37 +0200  Zoran Vasiljevic  <zv@archiware.com>  (d4a2edeb7a7d)

	* nsd/tclhttp.c:
	Make sure not to append more data than specified by Content-Length

2019-07-24 21:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (abea154149c0)

	* openacs-config.tcl:
	add shutdown timeout to openacs config file

2019-07-23 12:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (51d1d7f2b9b4)

	* tests/ns_urlspace.test:
	extend urspace tests

2019-07-22 19:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b57269b44c3)

	* nsd/sock.c:
	fix print statement

2019-07-22 19:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (710917c4d50e)

	* include/nsthread.h:
	fix compilation for windows (MSG_DONTWAIT not defined). Many thanks
	to Maurizio Martignano!

2019-07-22 19:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9b4e8421d940)

	* nsd/tclhttp.c:
	make the failing test more clear

2019-07-22 18:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (de85ddf184e6)

	* tests/http_byteranges.test:
	increase debugging output

2019-07-22 18:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5111a5562d60)

	* tests/tclresp.test:
	reduce debugging putput

2019-07-22 18:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e41a1d4460aa)

	* nsd/tcltime.c, tests/misc.test:
	merge + fix of ns_fmttime + extended regression test

2019-07-22 17:53 +0200  Zoran Vasiljevic  <zv@archiware.com>  (27432e2062df)

	* nsd/tclhttp.c:
	Fixed chunked-encoding parse machine to recognize low-data correctly.

2019-07-22 17:52 +0200  Zoran Vasiljevic  <zv@archiware.com>  (a083cb826ac1)

	* nsd/sock.c:
	Fixed Ns_SockTimedWait() to correctly check connection state.

2019-07-22 16:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab500ffe316a)

	* m4/tcl.m4:
	improve alignment with Tcl's current .m4 file to get rid of
	"-prebind" deprecated message under macOS

2019-07-22 16:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eeae01e5170c)

	* tests/testserver/modules/testhttps.tcl:
	align loopback address with client address in test cases

2019-07-22 12:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c9bda8712eec)

	* nsd/queue.c:
	strt counting allocated slots from 0, fix loop variable

2019-07-22 12:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d298fd0c09aa)

	* nsd/driver.c:
	include totalPoolRate in debug messages

2019-07-22 12:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17ef4021385e)

	* tests/test.nscfg:
	use square bracket notation only for IPv6

2019-07-21 13:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eaf749042e79)

	* nsd/tclhttp.c:
	remove compiler warning when printing function pointer

2019-07-21 13:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (792505d86384)

	* nsd/sock.c:
	make asynchronous nature of functions programmatically explicit

2019-07-21 12:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d43196c3abab)

	* nsd/sock.c:
	generalize the usage of SO_NOSIGPIPE since this is relevant for all
	*BSD* like unixes

2019-07-20 05:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (89a5b5dbec46)

	* nsd/sock.c:
	use MSG_NOSIGNAL also in SockSend()

2019-07-20 04:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fac09d5d008b)

	* include/nsthread.h, nsd/sock.c:
	use MSG_NOSIGNAL on sendmsg() to avoid potentials SIGPIPE signals

2019-07-19 21:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dd888b8b8a89)

	* nsd/tclhttp.c, tests/tclresp.test:
	add debugging hooks to ease debugging for tclresp-12.4

2019-07-19 21:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c1cad37718a)

	* doc/src/manual/admin-tuning.man, doc/src/naviserver/ns_server.man,
	nsd-config.tcl, nsd/queue.c, nsd/server.c, openacs-config.tcl,
	sample-config.tcl.in, tests/ns_server.test:
	- add commands to manage connection rate limit and pool rate limit
	dynamically. ns_server ?-server s? ?-pool p? connectionratelimit
	?value? ns_server ?-server s? ?-pool p? poolratelimit ?value?
	- name config parameters exactly like above.

2019-07-19 17:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c3d2ecc4b2d9)

	* nsd/tclhttp.c:
	merge and fix compilation issues

2019-07-19 14:20 +0200  Zoran Vasiljevic  <zv@archiware.com>  (dd441b5aeb5f)

	* nsd/nsd.h, nsd/tclhttp.c:
	Added chunked-encoding parser to ns_http

2019-07-19 13:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (094ba8dbf49d)

	* nsd/nsopenssl.h, nsd/tclcrypto.c:
	silence compiler

2019-07-19 13:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ae36c111a3b)

	* nsd/tclcrypto.c:
	add usual comment block per function

2019-07-19 13:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e06b59e2238a)

	* tests/ns_set.test:
	adjust test case

2019-07-19 13:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f27052fce9c)

	* Makefile:
	newer versions of OpenSSL refuse to work with rsa keys of size 1024

2019-07-18 23:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc51d2d99f4c)

	* doc/src/naviserver/ns_crypto.man, nsd/nsd.h, nsd/nsopenssl.h,
	nsd/tclcmds.c, nsd/tclcrypto.c:
	New feature: scrypt Password-Based Key Derivation Function (RFC
	7914)

	The scrypt function is a modern replacement for crypt and bcrypt and
	derives secret keys from a secret string. It is based on memory-
	hard functions, which offer added protection against attacks using
	custom hardware and GPU arrays. The functions requires the
	compilation of NaviServer against OpenSSL 3.0 or newer.

	Example from RFC 7914: ::ns_crypto::scrypt -secret "password" -salt
	NaCl -n 1024 -r 8 -p 16

	fdbabe1c9d3472007856e7190d01e9fe7c6ad7cbc8237830e77376634b373162
	2eaf30d92e22a3886ff109279d9830dac727afb94a83ee6d8360cbdfa2cc0640

2019-07-18 21:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (965cc1b1b535)

	* doc/src/naviserver/ns_set.man, doc/src/naviserver/ns_urlspace.man,
	doc/src/naviserver/nsv.man, nsd/tclset.c, tests/ns_set.test:
	new subcommand "ns_set iupdate": this command completes the case
	insenstive counterpart of other commands extend regression test
	update man pages

2019-07-18 21:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c0140edec0e)

	* nsd/connchan.c:
	make debug messages more easy to follow

2019-07-18 21:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (251eb0d0b266)

	* nsd/urlspace.c:
	reduce variable scopes

2019-07-18 18:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72940d10c060)

	* tests/testserver/pages/binary: new file.
	* tests/http.test, tests/testserver/pages/binary:
	add binary testfile fix some tests for binary PUT

2019-07-17 23:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76742ad9933d)

	* tests/http.test:
	add test cases, where binary data is sent via ns_http

2019-07-17 22:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f1f692c82206)

	* tests/http.test:
	add string and content length to expected results make explicit,
	that broken test case 5.2.0 (no content type) is actually equivalent
	to a binary mime type

2019-07-17 12:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c5c9cc147d8)

	* tests/http.test:
	extend regression test and make differences more clear add
	testConstraints binaryMismatch and broken for problematic cases

2019-07-16 21:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12dd7aa19237)

	* doc/src/naviserver/ns_crypto.man, doc/src/naviserver/ns_rand.man:
	improve man pages

2019-07-16 21:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f68e23fe789)

	* include/nscheck.h, nsd/sock.c:
	added macro NS_INLINE to achieve higher portability with (older?)
	Microsoft compilers

2019-07-16 21:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a9bf851a911)

	* include/ns.h:
	add missing NS_EXTERM (as noted by Andrew Piskorski )

2019-07-16 21:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c0ae54843c98)

	* nsd/sockaddr.c:
	fix typo (as reported by Andrew Piskorski)

2019-07-16 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e08c3449bfc5)

	* nsd-config.tcl, nsd/driver.c, nsd/log.c, nsd/nsd.h, nsd/nsmain.c,
	openacs-config.tcl, sample-config.tcl.in:
	new global parameter "sanitizelogfiles", per default turned on

	If data entered into a log file containing special characters (e.g.
	end line characters), these could alter the appearance of content
	within the log file. Single entries may appear as multiple entries.
	Attackers may leverage log forging to insert fake entries to that
	obfuscate malicious acts, or these can confuse log-file analyzers to
	avoid analysis.

	New flag "-sanitize true|false" for "ns_asynclogfile write". The
	global parameter sanitizelogfiles is used as default sanitize.

2019-07-16 19:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc02989983ec)

	* nsd/tclobjv.c:
	improve comment

2019-07-16 08:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ed9bfdacba25)

	* nsd/mimetypes.c:
	in include *xml* and *json* in non-binary MIME types

2019-07-16 06:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc4a94384a6f)

	* tests/http.test:
	Make the regression tests pass by a) removing the explicit testcase
	showing the difference between the ns_http regression test
	infrastructure and the old one (http-3.3new), and b) by using for
	test case http-5.5 as well the old test case infrastructure (use
	nstest::http-0.9 instead of nstest::http). This difference shows
	only up under Linux, but not on macOS

2019-07-16 06:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65a47eea3818)

	* include/ns.h, nsd/cache.c, nsd/driver.c, nsd/index.c, nsd/limits.c,
	nsd/log.c, nsd/nsd.h, nsd/op.c, nsd/queue.c, nsd/sockaddr.c,
	nsd/url2file.c, nsd/urlspace.c, nsperm/nsperm.c,
	tests/ns_server.test, tests/ns_urlspace.test:
	- New feature: context filter for urlspace

	 NaviServer's urlspace a trie data structure used for various
	purposes such as registering methods/URL pairs for procs or for
	mapping of requests to connection thread pools. The classical trie
	mapping for e.g. "GET /foo/bar/*.html" is based on method + path +
	string match pattern, where the last part "*.html" is used as a
	"filter". The new version of NaviServer allows in addition to the
	string based glob pattern so-called "context filter", which include
	the IP-address or header fields in the matching process. The context
	filters are applied after the classical URLspace processing, such
	that the behavior is fully backwards compatible. The context filters
	are kept in a stable order (IP before header based filters, specific
	before less specific) such that the behavior is not order dependent.

	 The new feature can be used map e.g. bots or certain IP ranges to
	the specified connection pools. When connection pools named "bots"
	and "local" are defined, one can use the following mapping commands
	to map incoming requests to the specified pools.

	 ns_server -pool bots map "GET /* {user-agent *bot*}" ns_server
	-pool bots map "GET /* {user-agent *crawl*}" ns_server -pool bots
	map "GET /* {user-agent *baidu*}" ns_server -pool bots map "GET /*
	{X-NS-ip 2a03:2880::/29}" ns_server -pool local map "GET /* {X-NS-ip
	127.0.0.1}" ns_server -pool local map "GET /* {X-NS-ip
	137.208.1.0/16}"

	 Note that arbitrary header fields can be used for the mapping,
	containing potentially some glob style match characters. The special
	header field "X-NS-ip" denotes IP based filters, which can be
	provided fully qualified or in CIDR notation (denoting significant
	bits) for IPv4 and IPv6.

	 Current limitations: only for inherited patters, no "exact"
	feature, no deletion of a single filter via "ns_urlspace unset"
	(only "-allfiters"), only one constraint per rule, documentation not
	updated.

	- Defined typedef for free-procs "Ns_FreeProc" (more self
	explanatory than the previous usage of "Ns_Callback")

	- Use existing types "Ns_IndexCmpProc" and "Ns_IndexKeyCmpProc"
	consistently

	- Defined debug option "Debug(urlspace)" for urlspace debugging

	- Include "default" for the default pool name in the thread name
	(this eases the analysis of log files)

	- New API functionNs_SockaddrMaskedMatch() to check, whether an IPv4
	or IPv6 address matches a provided masked address.

	- Extended regression test

2019-07-15 12:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c83ad37312c5)

	* doc/src/naviserver/ns_server.man:
	improve man page

2019-07-13 14:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b0e226cef4cb)

	* nsd/sockaddr.c, nsperm/nsperm.c:
	new function Ns_SockaddrParseIPMask: factored out code from nsperm
	module to make it reusable

2019-07-12 14:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (52bb027b53c4)

	* nsdb/dbinit.c:
	remove debug line

2019-07-09 21:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26eb09ce6111)

	* nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/return.c:
	add bytes sent to the dict of the per-pool statistics "ns_server
	.... stats"

2019-07-08 13:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (606a5b4fa2f4)

	* nsd/driver.c:
	refine bandwidth adjustment heuristics: never reduce bandwidth by
	more than 50% in one step

2019-07-08 12:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9162a68f9354)

	* nsd/driver.c:
	allow full rate per thread for a idle pool

2019-07-08 12:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f6bd082319a)

	* nsd/driver.c:
	don't use first write to tcp buffer as real write, require more than
	a buffer written to start metering

2019-07-08 12:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1dc74a6eee5c)

	* nsd/driver.c:
	improve log entry

2019-07-08 11:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (893b244a7ccf)

	* nsd/driver.c:
	improve log entry

2019-07-08 11:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb3d793c1b70)

	* nsd/driver.c:
	improve log entry

2019-07-07 12:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db5c958a440f)

	* tests/ns_conn_host.test, tests/ns_pagepath.test,
	tests/ns_serverpath.test, tests/testserver/modules/testhttps.tcl:
	use ns_http as well for test cases with explicit specification of
	the host header field

2019-07-07 12:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9af4d2e3e9dc)

	* tests/encoding.test, tests/http.test, tests/http_byteranges.test,
	tests/http_chunked.test, tests/http_keep.test, tests/https.test,
	tests/ns_adp_compress.test, tests/ns_conn_host.test,
	tests/ns_pagepath.test, tests/ns_serverpath.test,
	tests/ns_urlencode.test, tests/tclconnio.test, tests/tclresp.test,
	tests/testserver/modules/testhttp.tcl,
	tests/testserver/modules/testhttps.tcl:
	move most of test setup from low-level socket I/O to "ns_http".

	Cases, where "ns_http" cannot be used yet are still using the old
	interface named now "nstest::http-0.9". These test cases contain
	- invalid requests and HTTP/0.9 requests (hence the name)
	- test cases passing the "Host:" header field
	- test cases which specify the encoding
	- some chunked cases

2019-07-07 12:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c1d5a3ef300a)

	* nsd/sock.c:
	reduce verbosity

2019-07-07 00:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7a729aa4275b)

	* tests/ns_driver.test:
	adjust tests due to different testserver config setup

2019-07-07 00:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df67a8592cba)

	* tests/https.test, tests/testserver/etc/openssl.cnf,
	tests/testserver/modules/testhttps.tcl: new file.
	* Makefile, tests/https.test, tests/test.nscfg,
	tests/testserver/etc/openssl.cnf,
	tests/testserver/modules/testhttps.tcl:
	integrate https tests with other tests in the main test directory

2019-07-07 00:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (029b7a1679b0)

	* nsd/urlspace.c:
	break overlong lines

2019-07-06 16:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1dffc2a3cdb3)

	* tests/http.test:
	replace deprecated calls to "ns_http wait" with result and status
	variables

2019-07-06 15:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d461fb5d6d0)

	* nsd/dlist.c: new file.
	* NEWS, doc/src/manual/admin-tuning.man,
	doc/src/naviserver/commandlist.man, doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_crypt.man, doc/src/naviserver/ns_hmac.man,
	doc/src/naviserver/ns_hotp.man, doc/src/naviserver/ns_md.man,
	doc/src/naviserver/ns_md5.man,
	doc/src/naviserver/ns_parsefieldvalue.man,
	doc/src/naviserver/ns_server.man, doc/src/naviserver/ns_sha1.man,
	doc/src/naviserver/ns_totp.man, doc/src/naviserver/ns_writer.man,
	nsd-config.tcl, nsd/Makefile, nsd/dlist.c, nsd/driver.c, nsd/nsd.h,
	nsd/queue.c, nsd/server.c, nsdb/doc/mann/ns_db.man,
	nsproxy/doc/mann/ns_proxy.man, openacs-config.tcl, sample-
	config.tcl.in:
	- New feature: download bandwidth management per connection pool
	(specified as kilobytes per second)

	 Similar to the recently introduced per-connection bandwidth
	management, one can now as well bandwidth management per connection
	pool. By using this features the total bandwidth of all currently
	running connections can be limited to some maximum value. The rate
	limitation is only active, when writer threads are used. Per
	default, the pool rate limitation is turned off (value 0).

	 New configuration option for connection pools ns_param
	poolratelimit ....

	- The command "ns_writer list" returns now the current transfer rate
	and the rate limit per writer job.

	- new API infrastructure: Ns_DList The Ns_DList is similar to
	Tcl_DString, but operates on pointers instead of characters. Like
	Tcl_DString, Ns_DList pre-allocates some data and extends it when
	necessary. Ns_DList structures are especially useful alternative to
	linked lists, when usually data is added to the end. Since the data
	is kept as a dense (potentially growing) array, the memory locality
	is much better than linked list, resulting in better CPU cache hit
	rates. This is actually a port of the structure, using since many
	years in the NSF framework.

2019-07-04 11:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf7e29e2cebd)

	* nsd/sock.c:
	WSASend receives as 5th argument flags, but not a pointer to flags.

2019-07-04 10:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a97670cb105)

	* nsd/sock.c:
	Define Retry as pure inline function

	Defining Retry as an inline function rathen than a macro to avoids
	potentially multiple calls to GetLastError(), which is used for
	"ns_sockerrno" under windows

2019-07-04 10:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fea588813e15)

	* nsd/sock.c:
	fix confusing variable name

2019-07-03 13:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af5e232cf1bd)

	* nsd/driver.c:
	cleanup for gcc8

2019-07-03 13:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d71baac93cc0)

	* doc/src/naviserver/ns_conn.man, nsd/driver.c:
	merge

2019-07-03 13:04 +0200  Zoran Vasiljevic  <zv@archiware.com>  (9dc50c279365)

	* doc/src/naviserver/ns_conn.man:
	Make ns_conn copy doc more precise.

2019-07-03 12:17 +0200  Zoran Vasiljevic  <zv@archiware.com>  (2a5f191ddedb)

	* nsd/sock.c:
	Fixed SockSend() et al. to uniformly handle retry cases.

2019-07-03 12:16 +0200  Zoran Vasiljevic  <zv@archiware.com>  (dd3a1e7ada93)

	* nsd/nswin32.c:
	ns_poll checks SOCKET_ERROR explicitly.

2019-07-03 12:15 +0200  Zoran Vasiljevic  <zv@archiware.com>  (2fd68e4cf8e2)

	* nsd/driver.c:
	Improve comments w.r.t zero return value for retries.

2019-07-03 13:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5dbb4da2fd2b)

	* doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/naviserver/ns_conn.man, nsd/conn.c,
	nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/server.c,
	nssock/doc/mann/nssock.man, openacs-config.tcl, sample-
	config.tcl.in, tests/ns_conn.test:
	New feature: limit download rate to a maximum (specified as
	kilobytes per second)

	On servers with relative bad internet connections, it is possible
	that a few eager downloaders use up all available bandwidth.
	NaviServer allows now admins and developers to specify the maximum
	outgoing bandwidth per connection. The rate limit can be specified
	per connection (highest weight) or per connection thread pool
	(second highest weight) or per network driver. The rate limitation
	is only active, when writer threads are used. Per default, the rate
	limitation is turned off (value 0).

	Note that when a rate limit is specified per connection pool, it
	defines the default for every connection in this pool and not the
	total bandwidth for this pool.

	New option for ns_conn: ns_conn ratelimit ?limit? New configuration
	option for connection pools ns_param ratelimit ... New configuration
	option for network drivers ns_param writerratelimit ...

2019-07-01 20:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8bdb38645c16)

	* nsd/sockfile.c:
	add missing NS_GNUC_NONNULL

2019-06-30 11:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59e1599b678b)

	* include/ns.h, nsd/driver.c, nsd/sockfile.c, nssock/nssock.c:
	let the driver decide via flag NS_DRIVER_CAN_USE_SENDFILE whether or
	not plain sendfile() can be used

2019-06-30 11:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97b4cf656f31)

	* Makefile, include/Makefile.global.in:
	make adding of tests of nsssl conditional depending on the
	availability of OpenSSL

2019-06-29 12:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ef9c64da9c1)

	* nsssl/tests/modules/testhttps.tcl, nsssl/tests/nsssl.test:
	modernize tests to reduce deprecated messages

2019-06-29 12:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d189d9ded842)

	* Makefile:
	add nsssl to the default test target

2019-06-29 12:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bbda6afb10ed)

	* nsd/sockfile.c, nsssl/tests/nsssl.test:
	fix bug for small file requests (below writersize) via nsssl

2019-06-29 12:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (88092aadb4e8)

	* tests/ns_cache.test:
	fix typo in test

2019-06-29 11:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9bae451cc8a0)

	* nsssl/tests/nsssl.test:
	reflow overlong lines

2019-06-29 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b23d0d86af36)

	* nsssl/tests/config.tcl:
	use recommended configuration for testing

2019-06-25 12:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a32e9efdae7)

	* m4/tcl.m4:
	added -DSYSTEM_MALLOC to default compile flags

2019-06-24 19:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (086620cf6e34)

	* include/ns.h, nsd/sock.c, nsd/tclobjv.c, nsd/tls.c, nsssl/nsssl.c:
	HTTPS driver cleanup:
	- Added API call Ns_SockInErrorState() since SSL_shutdown() must not
	be called if a previous fatal error has occurred on a connection
	i.e. if SSL_get_error() has returned SSL_ERROR_SYSCALL or
	SSL_ERROR_SSL.

	- provided local buffers for OpenSSL ERR_error_string handling to
	avoid potential race conditions (OpenSSL keeps otherwise error
	messages in static memory)

	- made naming conf variable of type SSLContext consistent.

2019-06-23 13:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6f41e9532f7)

	* nsd/tclhttp.c:
	improve spelling

2019-06-23 13:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d6877e07d1a6)

	* nsd/driver.c, nsd/tclcrypto.c:
	improve spelling

2019-06-23 13:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a5348c7e9e9)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	Driver cleanup

	- Improved code locality in driver.c to avoid potential confusion
	between SockState (as used in driver.c) and Ns_SockState (as used
	e.g. sock.c, task.c and tclhttp.c)
	- Provided human readable stock SockStates

2019-06-23 12:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb6c7025425f)

	* nsd/conn.c:
	allow useless case (write with length 0) to provide backward
	compatibility

2019-06-20 20:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (13e108e0879b)

	* merge

2019-06-19 14:52 +0200  Zoran Vasiljevic  <zv@archiware.com>  (d513559481b0)

	* nsd/tclfile.c:
	Fixed parsing ns_roll command.

2019-06-19 11:59 +0200  Zoran Vasiljevic  <zv@archiware.com>  (ca5751d47ab4)

	* Merge Ns_SockListenCallback API change

2019-06-19 11:58 +0200  Zoran Vasiljevic  <zv@archiware.com>  (7f5ffc246e1e)

	* nsd/tclhttp.c:
	Fixed edge cases for body uploaders when files get truncated while
	we send them, or somebody passes wrongly positioned channels.

2019-06-18 18:26 +0200  Zoran Vasiljevic  <zv@archiware.com>  (f8720512ec33)

	* nsd/tclhttp.c:
	Fixed broken handling of body payloads > 16K and payloads from
	truncated files or channels positioned on the wrong byte w.r.t
	passed bodySize.

2019-06-18 18:24 +0200  Zoran Vasiljevic  <zv@archiware.com>  (00dd4c677445)

	* nsd/tls.c:
	Better handle/log SSL_ERROR_SYSCALL cases.

2019-06-20 20:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20f5f7dc0acc)

	* doc/src/naviserver/ns_parsefieldvalue.man, nsd/tclparsefieldvalue.c,
	tests/ns_parsefieldvalue.test: new file.
	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_parsefieldvalue.man,
	doc/src/naviserver/ns_parseheader.man,
	doc/src/naviserver/ns_parseurl.man, nsd/Makefile, nsd/nsd.h,
	nsd/tclcmds.c, nsd/tclparsefieldvalue.c,
	tests/ns_parsefieldvalue.test:
	New command: ns_parsefieldvalue

	This function parses the provided field value (from an HTTP request
	or reply header field) into its parts and returns these in the form
	of a list of Tcl dicts or a single Tcl dict depending on parameters
	The syntax of the contents of these header fields is specified in
	RFC 7230 section 3.2.6.

	 Forwarded: for="_gazonk" Forwarded: For="[2001:db8:cafe::17]:4711"
	Forwarded: for=192.0.2.60;proto=http;by=203.0.113.43 Forwarded:
	for=192.0.2.43, for=198.51.100.17

2019-06-20 18:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c2c21aafbe6)

	* tests/misc.test: new file.
	* tests/misc.test:
	add regression test for ns_rand

2019-06-20 18:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (196a3922bfe7)

	* nsd/random.c:
	ns_rand: fix index value of Ns_ParseObjv()

2019-06-18 20:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (70b001549448)

	* include/ns.h:
	fix prototype of Ns_SockListenCallbackin ns.h (many thanks to
	Maurizio Martignano)

2019-06-18 12:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8849ddcce196)

	* openacs-config.tcl, sample-config.tcl.in:
	document usage of connection pools in config files

2019-06-15 22:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (698f51f8cac3)

	* nsd/conn.c, nsd/driver.c, nsd/nsmain.c, nsd/queue.c, nsd/tclhttp.c,
	nsd/tclobjv.c, nsd/tclset.c, nsd/tcltime.c, nsd/tclvar.c,
	tests/http_byteranges.test, tests/ns_hashpath.test,
	tests/ns_server.test:
	add range-checks for Long and WideInt and improve error messages

2019-06-15 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6bb738643e89)

	* nsd/tclobjv.c:
	Add Range checking in the style of Ns_ObjvInt to Ns_ObjvLong and
	Ns_ObjvWideInt.

	Next steps: check usages if these functions (and
	Tcl_GetLongFromObj() and Tcl_GetWideintFromObj()) to add range
	checks if necessary.

2019-06-15 19:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc33338a32ce)

	* doc/src/naviserver/ns_conn.man, nsd/adpcmds.c, nsd/conn.c,
	nsd/log.c, nsd/pathname.c, nsd/random.c, nsd/tclsched.c,
	nsd/tclset.c, nsd/tclvar.c, tests/adp.test, tests/ns_hashpath.test,
	tests/ns_schedule.test:
	fix all cases, where Tcl_GetIntFromObj() was used without a range
	check. Switch to Ns_ParseObjv() on more occasions.

2019-06-15 16:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b6c43deeb11)

	* include/ns.h, nsd/adpcmds.c, nsd/conn.c, nsd/driver.c, nsd/limits.c,
	nsd/queue.c, nsd/tclcrypto.c, nsd/tclfile.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclresp.c, nsd/tclsched.c,
	nsd/urlspace.c, nsdb/dbtcl.c, tests/http.test, tests/ns_limits.test,
	tests/ns_reflow_text.test, tests/ns_schedule.test,
	tests/ns_server.test, tests/ns_urlspace.test, tests/tclresp.test:
	new feature for Ns_ParseObjv: optional range checking for Ns_ObjvInt

	It is now possible to provide a range for positional and non-
	positional arguments of type Ns_ObjvInt, which is checked already
	during Ns_ParseObjv. This leads to uniform behavior, more thorough
	checking, and uniform error messages.

	By this changeset various potential crashes were fixed, when e.g.
	passed-in values are used as array-indices (crash on negative
	numbers) or where the values were casted to unsigned types (very
	high unsigned values, potential memory alloc problems).

2019-06-15 15:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7b7a9d8a8100)

	* nsd/tclhttp.c:
	improve spelling

2019-06-14 10:46 +0200  Zoran Vasiljevic  <zv@archiware.com>  (ce0b643dc4fe)

	* doc/src/naviserver/ns_http.man, nsd/tclhttp.c:
	Make -body_size optional for seekable channels. Updated docs with
	some hints about passing Tcl channels.

2019-06-12 11:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (52f10cf8fd12)

	* nsd/tclhttp.c:
	bug-fix: initialize always optional parameters

2019-06-12 11:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c15e1bb687f)

	* nsd/nsd.h, nsd/task.c:
	improve spelling

2019-06-12 11:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c1d80b5613ac)

	* nsd/tclhttp.c:
	improve spelling, reduce variable scope

2019-06-12 11:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b05ecb1a38bf)

	* doc/src/naviserver/ns_http.man:
	improve spelling

2019-06-12 10:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3093771fc208)

	* include/ns.h, nsd/nsd.h, nsd/unix.c, tests/http.test:
	merge

2019-06-11 10:57 +0200  Zoran Vasiljevic  <zv@archiware.com>  (aae06ab12b3e)

	* doc/src/naviserver/ns_http.man:
	Fixed typos

2019-06-10 16:09 +0200  Zoran Vasiljevic  <zv@archiware.com>  (11c85e2c6155)

	* doc/src/naviserver/ns_http.man, nsd/tclhttp.c, tests/http.test:
	Finished ns_http rewrite. Added some docs, tests.

2019-06-09 14:54 +0200  Zoran Vasiljevic  <zv@archiware.com>  (c5400ecf723f)

	* nsd/tclhttp.c:
	Fixed internal comments

2019-06-09 14:36 +0200  Zoran Vasiljevic  <zv@archiware.com>  (ed2c463ed247)

	* doc/src/naviserver/ns_http.man, nsd/sock.c, nsd/task.c,
	nsd/tclhttp.c, nsd/tls.c, nsssl/nsssl.c:
	Merged to the tip. Fixed various conflicts. Fixed ns_http post with
	body as file/channel. Updated ns_http man page (work still in
	progress).

2019-06-09 11:00 +0200  Zoran Vasiljevic  <zv@archiware.com>  (e66e3d3af987)

	* include/ns.h, nsd/nsd.h, nsd/sock.c, nsd/sockfile.c, nsd/task.c,
	nsd/tclhttp.c, nsd/tls.c:
	Merge 5832 head.

2019-06-09 10:54 +0200  Zoran Vasiljevic  <zv@archiware.com>  (f9e737414afa)

	* nsd/task.c, nsd/tclhttp.c:
	Added refCount based Task reservation and cleanup.

2019-06-09 10:54 +0200  Zoran Vasiljevic  <zv@archiware.com>  (38e3a910223b)

	* include/ns.h:
	Moved Ns_TaslProc signature back to (void) return value

2019-06-07 18:46 +0200  Zoran Vasiljevic  <zv@archiware.com>  (8a121a88ad7c)

	* doc/src/naviserver/ns_http.man, include/ns.h, nsd/task.c,
	nsd/tclhttp.c:
	First updates for ns_http man page (still pending). Changed API for
	Ns_TaskProc from void to int as to be able to check whether the proc
	garbage-colltected the taskPtr.

2019-06-07 10:31 +0200  Zoran Vasiljevic  <zv@archiware.com>  (3099d0f7204b)

	* nsd/nsd.h:
	Updated NsHttpTask elements - added recvSpoolMode.

2019-06-04 18:20 +0200  Zoran Vasiljevic  <zv@archiware.com>  (4d729c8b85f6)

	* nsd/sock.c, nsd/task.c, nsd/tclhttp.c, nsd/tls.c:
	Revamp of ns_http and related supportive code. Fixed some descriptor
	leaks, memory leaks, double-frees improved comments, simplified
	code, unified debug logs and added tons of other minor and major
	style fixes.

2019-06-04 18:17 +0200  Zoran Vasiljevic  <zv@archiware.com>  (cd920ccbb6c1)

	* nsd/nsd.h:
	Improved comments for some NsHttpTask elements.

2019-05-31 13:32 +0200  Zoran Vasiljevic  <zv@archiware.com>  (76671a9c29be)

	* nsd/sockfile.c:
	Move NS_EWOULDBLOCK to EWOULDBLOCK for Unix-only code.

2019-05-31 13:31 +0200  Zoran Vasiljevic  <zv@archiware.com>  (270d31f9a7dc)

	* nsd/unix.c:
	Move NS_EWOULDBLOCK to EWOULDBLOCK as we are on unix anyways.

2019-05-31 13:30 +0200  Zoran Vasiljevic  <zv@archiware.com>  (734bd42afbc2)

	* nsd/nsd.h:
	Added Ns_HttpTask as NsHttpTask.

2019-05-31 13:30 +0200  Zoran Vasiljevic  <zv@archiware.com>  (bc47d9dd045a)

	* include/ns.h:
	Moved Ns_HttpTask to nsd/nsd.h into NsHttpTask as this one is never
	used elsewhere and the whole API is used just from the Tcl wrappers.

2019-05-31 13:28 +0200  Zoran Vasiljevic  <zv@archiware.com>  (16602459da33)

	* include/nsthread.h:
	Added NS_EAGAIN as WSAEWOULDBLOCK/EAGAIN for Win/Unix.

2019-05-31 13:27 +0200  Zoran Vasiljevic  <zv@archiware.com>  (627a531ad126)

	* nsd/task.c:
	Cleanup, document, enforce right column, reorganize.

2019-05-31 13:22 +0200  Zoran Vasiljevic  <zv@archiware.com>  (52dc1a4fa959)

	* nsd/connio.c:
	Whitespace fix.

2019-06-12 09:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1743043d9e70)

	* nsd/driver.c, nsd/nsd.h, nsd/tclcmds.c:
	new command ns_asynclogfile: facility for writing log files of
	various kinds, using the AsyncWriterThread.

	Usage example: set fd [ns_asynclogfile open /tmp/test.log]
	ns_asynclogfile write $fd hello\n ns_asynclogfile close $fd

2019-06-12 09:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d2a4e57f2d8)

	* tests/http.test:
	add instrumentation to ease debugging

2019-06-12 09:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (11e89ceaf18b)

	* nsd/tclmisc.c:
	whitespace change

2019-06-12 09:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a1d3bb5f4e6)

	* Makefile:
	improve configurability of clang-tidy

2019-06-10 13:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08c36221094c)

	* include/ns.h, nscgi/nscgi.c, nsd/adprequest.c, nsd/binder.c,
	nsd/conn.c, nsd/connchan.c, nsd/queue.c, nsd/unix.c,
	nsproxy/nsproxylib.c:
	minor code cleanup: improve padding, remove redundant casts and
	const declarations for unused arguments

2019-06-07 10:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ace921a0f86)

	* nsd/nsmain.c:
	memory allocated by Tcl has to be returned by Tcl

2019-06-06 12:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e86610648ae)

	* doc/src/naviserver/ns_crypto.man,
	doc/src/naviserver/ns_register.man:
	improve documentation

2019-06-05 12:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61dd3e300449)

	* nsd/nsopenssl.h, nsd/tclcrypto.c:
	provide compatibility with LibreSSL 2.9 (tested with LibreSSL 2.9.2)

2019-06-04 22:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1bdbcc4b3c01)

	* nsd/connchan.c:
	fix potential invalid reads in cases, where LogConnchanDebug is
	enabled and the callback is deleted during a Tcl_Eval().

2019-06-02 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc5038a4e02d)

	* nsd/tclhttp.c:
	avoid potential double free of tasks

2019-06-02 19:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0f2e6517ab91)

	* nsd/task.c:
	add debug lines for Ns_TaskDone and Ns_TaskFree

2019-06-02 15:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd03e16b9d8b)

	* include/ns.h, nsd/tcljob.c:
	add additional PURE flags

2019-06-02 15:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (11bb4be6606e)

	* nsd/driver.c:
	remove debug output

2019-06-02 15:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c268339f8a81)

	* include/Makefile.global.in:
	add additional warning flags for tidy checks

2019-06-02 15:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44b20d4219fc)

	* nsdb/dbutil.c, nsperm/nsperm.c:
	avoid potential string truncations (without terminating NULL)

2019-06-02 14:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (173f4f0c3a05)

	* nsd/tclhttp.c:
	make sure to initialize sockState for error cases

2019-06-02 14:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4c380a2d69a8)

	* include/nscheck.h, nsd/adpeval.c, nsd/auth.c, nsd/conn.c,
	nsd/driver.c, nsd/info.c, nsd/log.c, nsd/op.c, nsd/queue.c,
	nsd/sock.c, nsd/tclcrypto.c, nsd/tclset.c, nsd/tclthread.c,
	nsd/tclvar.c, nsd/tls.c, nsdb/dbtcl.c, nsdb/dbutil.c,
	nsthread/winthread.c:
	silence gcc 7+ on FC29: use attribute based approach for denoting
	fall through in case statements

2019-06-02 13:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9000d320be8a)

	* nsd/tclhttp.c:
	sock is already properly initialized with NS_INVALID_SOCKET for fail
	cases

2019-06-02 13:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (99e5ecaa62fa)

	* nsd/sockfile.c:
	removed dead store

2019-06-02 13:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f10d2e26e92d)

	* nsd/driver.c:
	remove tautological assert

2019-06-01 12:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a7a4bb520b4b)

	* include/ns.h, nsd/driver.c, nsd/nsd.h, nsd/sock.c, nsd/tclhttp.c,
	nsd/tls.c, nssock/nssock.c, nsssl/nsssl.c:
	Sock receive/send reform (part 2): Provide low-level interface
	(NS_SOCKET, SSL) with common result semantics, used in drivers,
	nssock and task interface.

	Ns_SockSendBufs2() called by sock.c (Ns_SockRecvBufs, sendProc),
	tclhttp.c Ns_SSLSendBufs2() called by nsssl.c (sendProc), tclhttp.c

	Ns_SockRecvBufs2() called by sock.c (Ns_SockRecvBufs, recvProc),
	tclhttp.c Ns_SSLRecvBufs2() called by nsssl.c (recvProc), tclhttp.c

2019-06-01 12:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f4e8c38301c5)

	* nsd/connchan.c:
	reduce variable scope

2019-05-29 17:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c3782aa27c6d)

	* include/ns.h, nsd/driver.c, nsd/nsd.h:
	- improve receive timeout handling (reduce setup cost)
	- use abstracted state instead of receive-value/errno guessing in the
	driver (important for OpenSSL)

2019-05-29 00:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a3a05f0fdb4e)

	* include/ns.h, nsd/connchan.c, nsd/driver.c, nsd/nsd.h, nsd/sock.c,
	nsd/tclhttp.c, nssock/nssock.c, nsssl/nsssl.c:
	Sock receive reform (part 1):
	- New function NsDriverRecv() similar to NsDriverSend()
	- Use NsDriverRecv() by nsconnchan instead of a local function.
	- Align interfaces of Ns_SockSendBufs() and Ns_SockRecvBufs(); both
	calls receive now Ns_Sock * structures.
	- report Ns_SockState back from Ns_SockRecvBufs() (potential values
	NS_SOCK_READ, NS_SOCK_DONE, NS_SOCK_AGAIN, NS_SOCK_EXCEPTION,
	NS_SOCK_TIMEOUT) and keep it in the Sock structure
	- Missing:
	  * using explicit Ns_SockState instead of trying to guess states from
	return length and error codes.
	  * using NsDriverRecv as well in http tasks.
	  * handling of default timeouts in driver
	  * timeout handling for nsssl recv?

2019-05-29 00:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (89bf1ca3d0da)

	* nsd/sockfile.c:
	prefer NS_EWOULDBLOCK over EWOULDBLOCK for better windows
	compatibility

2019-05-27 00:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1496d29fee34)

	* nsd/modload.c:
	make NaviServer fully clean in respect to conversions from function
	pointers to object pointers (which is forbidden by ISO C).

2019-05-26 19:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9ce81610cae9)

	* nsd/proc.c:
	compute size of function pointer hash entry precisely

2019-05-26 12:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (940aba7f06b6)

	* nsd/proc.c:
	make proc.c now fully clean in respect of handling with function
	pointers

2019-05-26 12:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ce5d0d01627)

	* nsd/proc.c:
	create a hash type for function pointers, since ANSI C forbids
	casting/comparison of data and function pointers. The functions are
	similar to these in NSF.

2019-05-26 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (459a65fe9d97)

	* nsd/tclsched.c:
	improve naming

2019-05-26 11:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3bb981f95746)

	* nsd/conn.c:
	make testing for existing request structure precise

2019-05-24 15:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b88c1fcd155)

	* nsd/conn.c:
	make clear that request is always initialized in OK cases.

2019-05-24 15:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c2d0081b55e)

	* nsd/tclcrypto.c, sample-config.tcl.in,
	tests/testserver/modules/testhttp.tcl:
	improve spelling

2019-05-22 15:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8fa2d701c195)

	* include/ns.h, nsd/pathname.c, nsd/request.c, nsperm/nsperm.c:
	distinguish between Ns_NormalizePath and Ns_NormalizeUrl

2019-05-16 08:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (52e4d179e955)

	* merge branches

2019-05-06 17:27 +0200  Zoran Vasiljevic  <zv@archiware.com>  (12c13ee144a6)

	* nsd/connio.c:
	Removed unreferenced variable.

2019-05-06 19:16 +0200  Zoran Vasiljevic  <zv@archiware.com>  (3f3470c0db4b)

	* nsd/connio.c:
	Re-added lost changes w.r.t Ns_ConnSendFileVec that was returning
	NS_ERROR all the time.

2019-05-16 08:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b5c5944a198)

	* nscp/doc/mann/nscp.man:
	improve formatting of man page

2019-05-16 08:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0bed0cda4859)

	* nsssl/doc/mann/nsssl.man:
	modernize sample command to generated self-signed certificates

	Background: some browser complain already when SHA1 is used

2019-05-06 12:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (85e77c560326)

	* include/ns.h, nsd/log.c, nsd/modload.c, nsd/sched.c, nsd/tclsched.c,
	nsdb/dbinit.c, nslog/nslog.c:
	further cleanup of function pointer conversions

2019-05-06 10:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac91cd3ec258)

	* nsdb/nsdb.h, nsdbtest/nsdbtest.c:
	use ns_funcptr_t to silence type conversion warning in newer gccs
	(e.g. gcc9)

2019-05-05 22:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (204dd9e000ea)

	* nsd/connio.c:
	merged changes

2019-05-05 22:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29d0ff8715bf)

	* nsd/conn.c, nsd/cookies.c, nsd/driver.c, nsd/nsd.h, nsd/tclfile.c,
	nsd/tclinit.c, nsd/tclresp.c, tests/ns_conn.test:
	NsConnRequire reform
	- add additional argument to NsConnRequire() to specify detailed
	requirements (NS_CONN_REQUIRE_CONNECTED, NS_CONN_REQUIRE_OPEN,
	NS_CONN_REQUIRE_CONFIGURED, NS_CONN_REQUIRE_ALL)
	- this makes it possible to query information about connections also
	when these are "closed" (e.g. detached)
	- extended regression tests to cover such cases

2019-05-05 15:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7f5a15acc7f7)

	* nsd/connio.c, nsproxy/nsproxylib.c:
	improve variable names

2019-05-05 15:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e559ed2cd9be)

	* include/ns.h:
	merge changes

2019-05-05 15:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c68da7e73318)

	* tests/ns_conn.test:
	extend regression test for ns_connchan to cover more cases, where
	someone tries to write to detached connection

2019-05-05 15:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2fe4d3f6af11)

	* nsd/queue.c:
	delete code, which was commented out

2019-05-05 15:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d83ce5333a0)

	* nsd/uuencode.c:
	fix indentation of comments

2019-05-05 15:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6b2d92b6e9c)

	* nsd/conn.c:
	improve comments

2019-05-05 15:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ffd14321a32)

	* nsd/conn.c:
	prefer more precise error message from NsConnRequire()

2019-05-03 18:02 +0200  Zoran Vasiljevic  <zv@archiware.com>  (70aaa5cfbd47)

	* include/ns.h:
	Added Ns_ConnIsClosed() macro.

2019-05-03 12:24 +0200  Zoran Vasiljevic  <zv@archiware.com>  (a1a577b94cdb)

	* nsd/connio.c:
	Fixed Ns_ConnSendFileVec that was returning NS_ERROR always.

2019-05-03 11:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0633a3f5630c)

	* nsd/connchan.c:
	chonnchan: handle the fact that a sock is detached via connchan
	command the same way as for writer threads (detectable via "ns_conn
	isconnected", avoid potential crashes)

2019-05-02 22:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08f01223cbf6)

	* nsd/queue.c, nsthread/thread.c:
	improve regularity of output of [ns_info threads] return always the
	same number of arguments

2019-05-02 12:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dad3774b6c38)

	* merged sockfile-rewrite branch into main branch ("default")

2019-05-02 12:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (da757be261c4 <sockfile-rewrite>)

	* nsd/queue.c:
	minor cleanup

2019-05-02 11:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (412936bf981c <sockfile-rewrite>)

	* include/ns.h, nsd/conn.c, nsd/log.c, nsd/nsd.h, nsd/pathname.c,
	nsd/tclcallbacks.c, nsd/tclinit.c, nsd/tclrequest.c, nsd/tclsched.c,
	nsd/url2file.c:
	Remove warnings about conversions of incompatible function types for
	Ns_TclNewCallback() when compiling with gcc8 und gcc9;

	Cleanup of argument passing for *ConnLocationProc*:

	-NS_EXTERN Ns_ReturnCode Ns_SetConnLocationProc(Ns_ConnLocationProc
	*proc, void *arg) NS_GNUC_NONNULL(1) NS_GNUC_NONNULL(2); +NS_EXTERN
	Ns_ReturnCode Ns_SetConnLocationProc(Ns_ConnLocationProc *proc,
	Ns_TclCallback *cbPtr) NS_GNUC_NONNULL(1) NS_GNUC_NONNULL(2);

	 typedef char* (Ns_ConnLocationProc)
	-    (Ns_Conn *conn, Ns_DString *dest, const void *arg); + (Ns_Conn
	*conn, Ns_DString *dest, const Ns_TclCallback *cbPtr);

2019-05-02 10:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (749c5677b546 <sockfile-rewrite>)

	* include/ns.h, nscp/nscp.c, nsd/callbacks.c, nsd/connchan.c,
	nsd/filter.c, nsd/info.c, nsd/op.c, nsd/proc.c, nsd/sched.c,
	nsd/sockcallback.c, nsd/tclcallbacks.c, nsd/tclinit.c,
	nsd/tclrequest.c, nsd/url2file.c, nsdb/dbinit.c, nsdb/nsdb.c,
	nslog/nslog.c, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c:
	Remove warnings about conversions of incompatible function types for
	Ns_RegisterProcInfo() and Ns_GetProcInfo() when compiling with gcc8
	und gcc9; to address the problem, a (new) generic function pointer
	type "ns_funcptr_t" was defined.

2019-05-02 09:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b187ab488f63 <sockfile-rewrite>)

	* nsd/connchan.c:
	cleanup of Ns_Log statement

2019-05-01 23:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (645062767ad7 <sockfile-rewrite>)

	* doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockselect.man, include/ns.h:
	the preferred spelling of writable is "writable"

2019-05-01 23:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a4a184ba203 <sockfile-rewrite>)

	* nsd/conn.c:
	the preferred spelling of writable is "writable"

2019-05-01 23:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f9636261c8c0 <sockfile-rewrite>)

	* nsd/connchan.c:
	connchan: handle cases, where sendProc returns 0

2019-05-01 21:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (063577175edf <sockfile-rewrite>)

	* include/ns.h:
	mark compatibility wrappers Ns_SetThreadServer() and
	Ns_SetThreadServer() explicitly as deprecated. Use
	Ns_ThreadSetName() and Ns_ThreadGetName() instead.

2019-05-01 21:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (224c5e342afb <sockfile-rewrite>)

	* include/ns.h, nsd/log.c:
	make var arg processing more uniform

2019-05-01 20:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dbf6bc1811bc <sockfile-rewrite>)

	* include/nsthread.h, nscp/nscp.c, nsd/nsthread.c, nsd/sched.c,
	nsd/tclthread.c, nsthread/nsthreadtest.c, nsthread/thread.c:
	Let the C compiler check the arguments of printf like function
	Ns_ThreadSetName()

2019-05-01 20:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e510a43c9fa9 <sockfile-rewrite>)

	* nsd/queue.c, nsd/tclinit.c:
	rename name of main thread back to original value after server-
	specific initializations

2019-05-01 14:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9dae2d8dd9b1 <sockfile-rewrite>)

	* nsd/driver.c, nsd/sockcallback.c, nsd/tclhttp.c,
	tests/http_byteranges.test:
	improve variable names

2019-05-01 14:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c85f8ddf202 <sockfile-rewrite>)

	* nsd/connio.c:
	reduce magic constants

2019-05-01 14:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c996ff55e52f <sockfile-rewrite>)

	* nsd/binder.c:
	no need to close INVALID_SOCKET

2019-04-30 20:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5dcb321544d7 <sockfile-rewrite>)

	* nsd/conn.c, nsd/connio.c, nsd/driver.c, nsd/tclrequest.c,
	nsd/tclresp.c, tests/ns_conn.test:
	handle cases better, where writer thread delivers data, but
	connection thread wants still to write on it. This might have
	happened especially in erroneous application code, issuing e.g. two
	ns_return immediately in a row. From the client side, "ns_conn
	close" is returned, when the connection thread can't write to the
	connection anymore.

2019-04-30 13:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a7e591c64a8 <sockfile-rewrite>)

	* nsd/sockfile.c:
	merge

2019-04-30 13:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29fd908df6ed <sockfile-rewrite>)

	* nsd/connchan.c, nsd/driver.c, nsd/nsd.h, nsd/sockfile.c:
	Pass NULL to ignored timeout argument (which should be dropped)

2019-04-30 13:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6990a23b1ff6 <sockfile-rewrite>)

	* nsd/tclresp.c:
	reduce variable scopes

2019-04-30 12:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (01d7cbc132e0 <sockfile-rewrite>)

	* nsd/connio.c:
	re-establish dropped NULL test for writer thread cases

2019-04-30 11:09 +0200  Zoran Vasiljevic  <zv@archiware.com>  (887dcb52c629 <sockfile-rewrite>)

	* m4/sendfile.m4: new file.
	* m4/sendfile.m4:
	Added M4 macro file for checking sendfile version/type

2019-04-30 11:05 +0200  Zoran Vasiljevic  <zv@archiware.com>  (50b0d18da3e1 <sockfile-rewrite>)

	* configure.ac, include/nsconfig.h.in, nsd/sockfile.c:
	Added BSD/Darwin sendfile support.

2019-04-29 12:59 +0200  Zoran Vasiljevic  <zv@archiware.com>  (7b8560750629 <sockfile-rewrite>)

	* nsd/tclvar.c, tests/ns_nsv.test:
	Fixed "nsv_set a b" when no key nor array exist. Added some tests.

2019-04-29 11:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (36d02fc639fd <sockfile-rewrite>)

	* nsd/driver.c:
	silence compiler under linux

2019-04-29 09:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40653690ad8b <sockfile-rewrite>)

	* nsd/driver.c:
	perform lookup of virtual hosts in lower case

2019-04-28 13:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a3184abf4fc6 <sockfile-rewrite>)

	* nsd/binder.c, nsd/connchan.c, nsd/log.c, nsd/tclset.c:
	prevent potential null dereferences

2019-04-28 13:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb023d4b11f5 <sockfile-rewrite>)

	* nsd/info.c:
	prevent premature nil termation argument

2019-04-28 13:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bea92656430a <sockfile-rewrite>)

	* nsd/driver.c:
	don't shadow outer symbols

2019-04-28 13:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9b3cec8fd90b <sockfile-rewrite>)

	* nsdb/dbutil.c:
	try to reduce false positives in gcc (about unmarked fall through
	cases)

2019-04-28 13:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7ee370b64691 <sockfile-rewrite>)

	* include/ns.h:
	align names of arguments in prototype with function definition

2019-04-28 12:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1467ce3ac014 <sockfile-rewrite>)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/config.c, nsd/conn.c, nsd/connchan.c, nsd/dns.c, nsd/driver.c,
	nsd/event.c, nsd/exec.c, nsd/fastpath.c, nsd/log.c, nsd/proc.c,
	nsd/queue.c, nsd/random.c, nsd/returnresp.c, nsd/rollfile.c,
	nsd/server.c, nsd/sockcallback.c, nsd/task.c, nsd/tclcrypto.c,
	nsd/tclmisc.c, nsd/tclobjv.c, nsd/tcltime.c, nsd/tclxkeylist.c,
	nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/nsdb.h, nsperm/nsperm.c,
	nsproxy/nsproxylib.c:
	use consistently NS_EMPTY_STRING

2019-04-28 12:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c311b82fd94c <sockfile-rewrite>)

	* nsd/connchan.c, nsd/info.c, nsd/queue.c, nsd/tclcache.c,
	nsd/tclconf.c, nsd/tclhttp.c, nsd/tcljob.c, nsd/tclset.c,
	nsd/tclsock.c, nsd/urlspace.c, nsdb/dbinit.c:
	reduce potential dangling pointer dereferences

2019-04-27 20:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f9fc0a1fda9a <sockfile-rewrite>)

	* nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/nsdb.h:
	reduce potential NULL dereferences

2019-04-27 19:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ced0a1261d9e <sockfile-rewrite>)

	* nsd/config.c, nsd/nsd.h, nsd/nsmain.c, nsd/returnresp.c,
	nsd/tclcrypto.c, nsd/tclfile.c, nsd/tclmisc.c, nsd/tclresp.c,
	nsd/urlencode.c, nsd/urlspace.c, nsdb/db.h, nsdb/dbdrv.c,
	nsperm/nsperm.c:
	reduce potential NULL dereferences

2019-04-27 15:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (343e4f117ec6 <sockfile-rewrite>)

	* nsd/adpcmds.c, nsd/binder.c, nsd/connchan.c, nsd/exec.c,
	nsd/httptime.c, nsd/tclfile.c, nsd/tclmisc.c, nsd/tclobjv.c,
	nsd/tclresp.c, nsd/tclsched.c, nsd/tclsock.c, nsproxy/nsproxylib.c:
	ease life of static checker by initializing variables, which are set
	via output variables of functions

2019-04-27 15:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97dedc3d8fec <sockfile-rewrite>)

	* nslog/nslog.c:
	address dstring always via pointer

2019-04-27 14:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f476e3531232 <sockfile-rewrite>)

	* nsd/connio.c, nsd/driver.c, nsd/return.c, nsd/sockfile.c,
	nssock/nssock.c:
	reduce variable scopes and dead stores

2019-04-27 13:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (157e97996065 <sockfile-rewrite>)

	* nsd/driver.c:
	reflect additional non-null definition in functionals in prototype

2019-04-26 18:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ca8e99670b5 <sockfile-rewrite>)

	* nsd/connio.c, nsd/sock.c:
	remove two asserts to let regression tests run through with
	assertions enabled

2019-04-26 17:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7202a1852bd <sockfile-rewrite>)

	* nsd/sock.c:
	fix compilation when assertions are enabled

2019-04-26 12:29 +0200  Zoran Vasiljevic  <zv@archiware.com>  (afe1b4bbaf01 <sockfile-rewrite>)

	* include/ns.h, nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/return.c,
	nsd/sock.c, nsd/sockfile.c, nssock/nssock.c, nsssl/nsssl.c:
	Rewritten socketfile handling. Make sure driver procs never block.

2019-04-26 10:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df6660720b52)

	* nsd/range.c:
	don't silently ignore invalid syntax of range requests

2019-04-26 10:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00bd17cdfd9b)

	* nsd/returnresp.c:
	reduce variable scopes

2019-04-26 01:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a9d87d5489ff)

	* nsd/range.c, nsd/return.c, tests/http_byteranges.test,
	tests/test.nscfg:
	fix cases, where range deliveries are performed via writer threads.
	Improve source code documentation and extend regression test.

2019-04-26 00:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (53c479fa5c94)

	* nsd/fastpath.c:
	remove debugging line

2019-04-24 20:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b82e564ca63e)

	* include/nscheck.h:
	fix management of __GLIBC__ macros

2019-04-24 19:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c849af2e61c7)

	* include/nscheck.h:
	fix missing parens

2019-04-24 19:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65af5deea216)

	* nsd/range.c, nsd/return.c, tests/http_byteranges.test:
	fix problem with (too) many non-continguous byte ranges

2019-04-23 13:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (263700dbfa3b)

	* nsd/returnresp.c:
	in principle, NsGetServer() can return NULL

2019-04-23 11:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90a6c5132e36)

	* nsd/tclvar.c:
	GetArray() and LockArray() can return NULL

2019-04-23 11:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff8805802fc1)

	* nsd/adpcmds.c, nsd/tclvar.c:
	add nonnull return declarations and reduce null tests after
	dereference

2019-04-23 10:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (634c8e3fb6ba)

	* nsd/set.c:
	whitespace change

2019-04-23 10:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7826ad90b4c4)

	* nsd/tcljob.c:
	improve wording

2019-04-23 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd698b7e1eee)

	* nsd/driver.c:
	add missing prototype

2019-04-23 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6538846b48be)

	* nsd/connio.c:
	add missing nunnull asserts

2019-04-20 21:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0f43d6b36517)

	* doc/src/naviserver/ns_return.man, doc/src/naviserver/returnstatus-
	cmds.man:
	improve documentation

2019-04-20 21:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7f74855d15f8)

	* openacs-config.tcl:
	remove useless config parameter

2019-04-18 21:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (238da5e0af54)

	* nsd/queue.c, nsd/tclinit.c, nsdb/dbinit.c:
	Added server name in log entries to make it easier to distinguish
	messages per-server during bootup

2019-04-17 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c230f994a349)

	* nsd/range.c, nsthread/pthread.c:
	avoid potential dangerous call to alloca()

2019-04-17 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (52691f5867e7)

	* nsd/init.tcl:
	don't warn about missing folders of modules, but about a missing Tcl
	folder for the whole initialization

2019-04-16 20:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f52d3e367a9e)

	* nsd/driver.c:
	simplify reference chains

2019-04-16 20:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (01727d366e42)

	* nsd/set.c:
	relax non-null constraint

2019-04-16 19:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f47ad78cfc3)

	* nsd/set.c:
	use typefefs for commonly used functions

2019-04-15 23:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (93d48b7bc7cf)

	* nsd/driver.c:
	simplify dereference chains, add asserts for more candidates

2019-04-15 22:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f73038d49660)

	* nsd/driver.c, nsd/return.c:
	reduce variable scopes

2019-04-15 21:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (daee00a6282c)

	* nsd/driver.c, nsd/nsd.h:
	decouple thread re-animation from virtual hosts mapping table; make
	also default virtual server mapping member of the driver; make sure
	that virtual host mapping works as well for multiple driver threads

2019-04-15 13:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ce284ceb245)

	* nsd/driver.c, nsd/nsd.h:
	bugfix: make virtual host mapping driver-specific

	before, "/servers" entry foo.org led always to the same location,
	when added on two different drivers (e.g. nssock and nsssl)

2019-04-14 18:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (14cd1afa0184)

	* include/nsthread.h:
	update _MSC_VER version numbers to include Visual Studio 2019

2019-04-12 23:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a6726fd83af9)

	* nssock/doc/mann/nssock.man:
	add more examples how to configure network drivers

2019-04-12 12:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45f90be2b7d5)

	* doc/src/naviserver/ns_driver.man, include/ns.h, nsd-config.tcl,
	nsd/config.c, nsd/driver.c, nsd/nsd.h, nsd/return.c, nsd/server.c,
	nsd/set.c, nsd/tclset.c, openacs-config.tcl, sample-config.tcl.in:
	new feature: added per-server extraheaders the extra headers are
	merged with the following precedence (the earlier ones have more
	weight) 1) application specific headers 2) per-server extra headers
	3) per-driver extra headers This makes it possible to provide in the
	config files defaults, which can be overwritten by certain pages in
	the applications

	- user global network drivers in "nsd-config.tcl" This makes it
	easier to users to extend this file by adding own virtual servers.

	- improve behavior and error messages for erroneous configurations.
	Previously, it was quite easy to crash the server without error
	message (during startup)

	- updated sample config files

2019-04-12 11:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (484133fbcfd2)

	* tests/ns_hostbyaddr.test:
	improve spelling

2019-04-11 11:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf2bfe0917fa)

	* doc/src/naviserver/ns_set.man, include/ns.h, nsd/set.c,
	nsd/tclset.c, tests/ns_set.test:
	new function "ns_set imerge": this is the case insignificant version
	of "ns_set merge"

	useful especially for working with header fields

2019-04-11 11:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff4e5cbf10d1)

	* openacs-config.tcl:
	Add a commented line for the OpenACS variant of directorylisting

2019-04-11 11:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f0acf528eb7f)

	* nsd/request.c:
	remove debug line

2019-04-11 10:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (96d3993486e1)

	* nscgi/nscgi.c:
	for backward compatibility: accept 'maxinput' to be 0 (for arbitrary
	large values)

2019-04-11 09:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10e0842212be)

	* nscgi/nscgi.c:
	cgi: support memory units for config value "maxinput"

2019-04-11 09:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d87377b8859)

	* nscgi/nscgi.c:
	no need to include files already included by <ns.h>

2019-04-11 00:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f42929773ae)

	* nsd/driver.c:
	educe verbosity

2019-04-10 12:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d27403215bd9)

	* nsd/driver.c:
	Added handling of partial correct address lists, removed hard coded
	default addresses (obtain these from the drivers)

2019-04-10 11:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8617eae8a005)

	* tests/ns_nsv.test:
	fix error message in test

2019-04-10 11:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf837efbb29c)

	* doc/src/naviserver/nsv.man:
	improve spelling

2019-04-10 10:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b46ec2851c7)

	* doc/src/naviserver/nsv.man:
	update man page with missing options

2019-04-10 10:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bbd0c9c27890)

	* nsd/tclvar.c:
	align naming with man page and Tcl's documentation of "incr"

2019-04-09 14:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be465db768f0)

	* openacs-config.tcl:
	simplify sample config file by using multiple IP addresses per
	driver

2019-04-09 13:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b6968cb9860)

	* doc/src/manual/admin-install.man, doc/src/manual/admin-
	maintenance.man, doc/src/manual/tcl-lib-file.man, doc/src/manual
	/tcl-overview.man, doc/src/naviserver/ns_driver.man,
	doc/src/naviserver/ns_return.man, doc/src/naviserver/ns_server.man,
	nscp/doc/mann/nscp.man, nsd-config.tcl,
	nslog/doc/mann/ns_accesslog.man, nsproxy/doc/mann/ns_proxy.man,
	nssock/doc/mann/nssock.man, nsssl/doc/mann/nsssl.man, sample-
	config.tcl.in, simple-config.tcl:
	improve documentation

	tough part was to get links from the configure section of "admin-
	install" to the "nssock" and "nssl" sections.

2019-04-09 13:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6790faaa3a25)

	* nslog/nslog.c:
	abort in error situation with an error message instead of crashing

2019-04-09 13:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5aec1ab47e93)

	* nsd/driver.c:
	improve spelling

2019-04-09 13:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5dabcb5ba8c6)

	* nsd/driver.c:
	minor cleanup and improved error message

2019-04-08 20:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (35135591e99c)

	* nsd/driver.c, nsd/nsd.h:
	New feature: Allow a single driver to listen on multiple ip addresses

	This feature greatly simplifies setups, where a single server is
	listening on multiple IP addresses (e.g. IPv4 and IPv6). Previously,
	it was necessary to define separate drivers for these, which need
	different names but which are typically configured identically.
	Furthermore, when the address is omitted, the server performs a
	lookup from the nostname to determine the IP address. Previously, it
	used the first one, now it can work with all returned addresses.

	To use this feature, simply specify the configure values of
	"address" as a Tcl list containing multiple IP addresses,

	The change backward compatible, old configure files will continue to
	work.

2019-04-08 20:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4494be83e698)

	* nsd-config.tcl:
	don't force listening on the same port as the main server.

	For default configuration, it is sufficient to listen just on the
	loopback port, which is actually the default

2019-04-08 15:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7f6d18fafc0)

	* openacs-config.tcl:
	Change driver installation to global in sample configuration firle

	This change makes it easier for site admins to add further servers
	(e.g. for virtual hosting).

2019-04-07 16:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ebce26d884fa)

	* include/nscheck.h, nsdb/dbutil.c:
	remove clang-tidy smell: use CLOEXEC mode on fopen() when available

2019-04-06 20:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ac5d0f78730)

	* include/nsthread.h:
	remove clang-tidy smell: prefer fcntl(fd, F_DUPFD_CLOEXEC) over
	dup()

2019-04-06 19:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (74f036e154d3)

	* nsd/init.tcl:
	add warning of a probable misconfiguration of the tcllib

2019-04-05 11:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54e0d93aebb2)

	* nsd/driver.c:
	improve error messages for badly configured virtual hosting

2019-04-05 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eac605a009fe)

	* nsd/sockfile.c:
	add retry on EAGAIN in Ns_SockSendFileBufs() implementation variant
	without sendfile() support like in the other case.

2019-03-31 11:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33effa241662)

	* doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_register.man,
	nsproxy/nsproxylib.c:
	improve spelling

2019-03-31 11:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (596616450e47)

	* nsd/driver.c:
	improve spelling

2019-03-31 10:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cdc362fb8639)

	* nsd/tclsock.c:
	code smell reduction: reduce variable scope and make sure the
	variable is always initialized

2019-03-31 10:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (106afb13bf3d)

	* nsd/binder.c:
	string passed as prebind (command line flag "-b"): when prebinding
	to a unix domain socket, the optional "mode" value is now specified
	as the usual octal value (no need to convert mode bits into decimal
	notation)

2019-03-30 10:37 +0000  Gustaf Neumann  <neumann@wu.ac.at>  (49d9cc067174)

	* Merged in apiskors/naviserver (pull request #22)

	Fix Ns_LogRoll() to work on Windows.

	Approved-by: Gustaf Neumann <neumann@wu.ac.at>

2019-03-30 00:40 -0400  Andrew Piskorski  <atp@piskorski.com>  (0e260e2bef0e)

	* nsd/log.c:
	Fix Ns_LogRoll() to work on Windows. This includes both the
	2006-03-28 (f5773e4a53a4, 3ee16203924f) and 2014-11-03
	(8d3c79974f08) fixes, which were somehow later lost.

2019-03-28 23:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (275cd5c8a1a9)

	* nsd/tclhttp.c:
	factor out common strings

2019-03-28 23:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e0f9b9bffa2a)

	* nsd/fastpath.c:
	use Boolean expression

2019-03-28 23:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f870def4254c)

	* nsd/driver.c:
	add one more O_CLOEXEC

2019-03-27 11:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ccb3e221adb)

	* include/nsthread.h:
	pass always third argument to fcntl()

2019-03-27 10:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f4b7985d8755)

	* configure.ac, include/nsconfig.h.in, nsd/crypt.c:
	avoid name clash of macro HAVE_CRYPT with PostgreSQL config file
	pg_config.h.

	The name clash is harmless, but annoying. Fix as well macro for
	crypt_r().

2019-03-24 14:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab7c859193d7)

	* nsd/fd.c, nsd/tclhttp.c:
	reduce variable scopes

2019-03-24 13:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4454c4304f7f)

	* include/nsthread.h, nsd/nswin32.c:
	remove clang-tidy smell: prefer fcntl(fd, F_DUPFD_CLOEXEC) over
	dup()

2019-03-22 12:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8aef7f1cc5bd)

	* nscgi/nscgi.c, nsd/adpeval.c, nsd/binder.c, nsd/fd.c, nsd/tclhttp.c,
	nsd/tclmisc.c, nsd/tclthread.c, nsd/unix.c, nslog/nslog.c,
	nsproxy/nsproxylib.c, nsthread/nsthreadtest.c:
	add O_CLOEXEC to open() operations to reduce security smells

2019-03-22 12:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b833ec47198c)

	* tcl/nstrace.tcl:
	move serialized objects in the blueprint after the namespace imports
	and ensemble recreators since constructors can call functions
	depending on this

2019-03-14 21:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8f93486ba73)

	* doc/src/naviserver/ns_server.man, nsd/nsd.h, nsd/queue.c,
	tests/ns_server.test:
	no need to introduce a new field, since the "stats" member has
	already a similar member.

2019-03-14 21:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (618d86fc3dbd)

	* doc/src/naviserver/ns_server.man, nsd/nsd.h, nsd/queue.c,
	tests/ns_server.test:
	Report in "ns_server threads", how often a thread of this pool was
	started.

	This statistic can help to identify installations, where threads are
	started and stopped in a too eager fashion.

2019-03-14 20:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (85f9bb29fc69)

	* nsd/nsd.h, nsd/urlspace.c:
	improved scalability: provide different locks per urlspace IDs.

2019-03-14 20:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7397fda48f18)

	* nsd/server.c:
	remove unneeded variable

2019-03-11 11:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b9a617b7e89a)

	* nsd/modload.c:
	modload: avoid to add potentially missing extension twice, improve
	error message

2019-03-10 23:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f037d96aee8c)

	* NEWS:
	improve spelling

2019-03-10 23:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86784362ba6d)

	* nsd/adpparse.c, nsd/config.c, nsd/tclinit.c:
	improve spelling

2019-03-10 23:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f1631bd9bfbb)

	* nsd/driver.c, nsd/sockaddr.c, nsd/str.c, nsd/tclhttp.c,
	nsd/tclxkeylist.c:
	improve spelling

2019-03-10 23:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a5125c1d4a54)

	* doc/src/manual/admin-db.man, doc/src/manual/tcl-overview.man,
	doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_sls.man,
	nsperm/doc/mann/nsperm.man, nsproxy/doc/mann/ns_proxy.man:
	improve spelling

2019-03-10 21:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86f6ddc7a59e)

	* nsd/driver.c, nsd/sls.c, nsd/str.c, nsd/tclcrypto.c, nsd/tclmisc.c:
	improve spelling

2019-03-10 21:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a19686eb2837)

	* nscgi/doc/mann/nscgi.man:
	improve spelling

2019-03-10 21:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bcb3dffb3484)

	* nsproxy/doc/mann/ns_proxy.man:
	improve spelling

2019-03-10 21:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (28d326bfdf19)

	* doc/src/naviserver/ns_crypto.man, doc/src/naviserver/ns_http.man,
	doc/src/naviserver/ns_job.man:
	improve spelling

2019-03-10 21:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05d353e1aaa6)

	* Makefile:
	make dist: improve cleanup of development files

2019-02-24 19:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4fef7340cda2)

	* .hgtags:
	Added tag naviserver-4.99.18 for changeset 97c2631e7137

2019-02-24 19:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97c2631e7137 [naviserver-4.99.18])

	* NEWS:
	update diffstats

2019-02-24 18:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b29e00da61b3)

	* nsd/driver.c, nsd/queue.c, nsd/str.c, nsdb/dbtcl.c, nsperm/nsperm.c:
	minor cleanup: remove commented code, add "fall through" comments

2019-02-24 11:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aff27c20343b)

	* README, configure.ac, doc/src/manual/admin-maintenance.man,
	nscgi/doc/mann/nscgi.man, nscp/doc/mann/nscp.man:
	update version numbers

2019-02-24 11:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bee311462cc2)

	* NEWS:
	update NEWS file

2019-02-24 11:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc6f2982d00b)

	* Makefile:
	improve "make dist"

2019-02-24 11:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81ac2eefe9e6)

	* doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/manual/c-driverdb.man, doc/src/manual/tcl-
	overview.man, doc/src/naviserver/keyl.man,
	doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_adp_puts.man,
	doc/src/naviserver/ns_adp_stats.man,
	doc/src/naviserver/ns_config.man,
	doc/src/naviserver/ns_connchan.man, doc/src/naviserver/ns_crypt.man,
	doc/src/naviserver/ns_getform.man, doc/src/naviserver/ns_log.man,
	doc/src/naviserver/ns_quotehtml.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_server.man,
	doc/src/naviserver/ns_truncate.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_writer.man, nscp/doc/mann/nscp.man,
	nsproxy/doc/mann/ns_proxy.man:
	Improve spelling, improve alignment with implementation (fix incorrect
	defaults).

2019-02-23 22:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (04d04e109271)

	* doc/src/manual/admin-install.man, doc/src/manual/admin-
	maintenance.man, doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_schedule.man, nsd/driver.c, nsd/nsmain.c,
	nsd/nswin32.c, nsd/sched.c, nsd/sockcallback.c,
	nsproxy/nsproxylib.c, nsthread/winthread.c:
	fix typos and remove obsolete parts from documentation

2019-02-23 15:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (53c05aac978d)

	* tests/adp.test:
	replace deprecated "ns_adp_eval" in test by "ns_adp_parse"

2019-02-23 14:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db892680d957)

	* nsd/tclmisc.c:
	putting "static" storage-class specifier to the beginning of the
	line

2019-02-23 14:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fbb6e750b3a4)

	* nsd/sched.c:
	Improve labels in ns_log entries for schedules procedures

	With this change, one can determine exactly, which scheduled thread
	was executing an instance of which scheduled procedure. Similarly as
	for connection threads, one can now distinguish, whether two log
	entries are from the same instance of a scheduled proc or from
	different ones.

2019-02-23 14:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f258c735552f)

	* doc/src/naviserver/ns_schedule.man:
	improve naming

2019-02-23 13:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (78adfedb7349)

	* nsd/adpparse.c:
	don't call deprecated command

2019-02-23 13:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (809bdc7a8a03)

	* nsd/tclinit.c:
	fix typo

2019-02-23 13:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29198f390e35)

	* doc/src/naviserver/ns_after.man, doc/src/naviserver/ns_cancel.man,
	doc/src/naviserver/ns_pause.man, doc/src/naviserver/ns_resume.man,
	doc/src/naviserver/ns_schedule_daily.man,
	doc/src/naviserver/ns_schedule_proc.man,
	doc/src/naviserver/ns_schedule_weekly.man: deleted file.
	* doc/src/naviserver/commandlist.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_after.man, doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_cancel.man, doc/src/naviserver/ns_cookie.man,
	doc/src/naviserver/ns_pause.man, doc/src/naviserver/ns_resume.man,
	doc/src/naviserver/ns_schedule.man,
	doc/src/naviserver/ns_schedule_daily.man,
	doc/src/naviserver/ns_schedule_proc.man,
	doc/src/naviserver/ns_schedule_weekly.man:
	rework grouped man pages, fix broken examples, move deprecated
	commands to the deprecated section

2019-02-23 12:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (91784502f0b4)

	* nsd/tclsched.c:
	Mark ns_cancel explicitly as deprecated, use ns_unschedule_proc
	instead; before its use was just discouraged by the man page.

2019-02-23 09:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f52af4887876)

	* doc/src/naviserver/ns_job.man:
	fix wrong argument order in sample command

2019-02-21 20:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (de2e4bf21984)

	* tcl/nstrace.tcl:
	generalize namespace exclusion by letting the user to choose, what
	namespaces should be excluded

2019-02-21 20:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7bc5d8ec2f26)

	* tcl/nstrace.tcl:
	unfortunately, there is still a site having troubles with "clock
	format" in Tcl 8.6, when the "::tcl" namespace is included. Provide
	some configuration means to control the inclusion of the namespace
	in the blueprint (currently undocumented).

2019-02-21 14:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c254374677b)

	* nsd/connio.c:
	reduce assignments in expressions

2019-02-20 00:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0f80b6247f51)

	* nsdb/dbinit.c, nsdb/doc/mann/ns_db.man:
	nsdb stats: add number of currently connected DB connections

2019-02-19 09:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (773532b2262e)

	* doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_adp_abort.man,
	doc/src/naviserver/ns_adp_include.man,
	doc/src/naviserver/ns_adp_parse.man,
	doc/src/naviserver/ns_adp_register.man,
	doc/src/naviserver/ns_adp_stats.man,
	doc/src/naviserver/ns_return.man, doc/src/naviserver/returnstatus-
	cmds.man, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/adprequest.c, tests/http_byteranges.test:
	improve cross-referencing in the ADP man pages, make spelling of ADP
	more consistent

2019-02-19 09:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e0be76c065c2)

	* nsd/cookies.c:
	remove debugging output

2019-02-17 13:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7a18f926b4f)

	* configure.ac:
	bump version number to 4.99.18b2

2019-02-17 12:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16ea3db90e03)

	* doc/src/naviserver/ns_cookie.man, include/ns.h, nsd/cookies.c,
	tests/cookies.test:
	ns_setcookie: add flag "-samesite" with values "strict|lax|none"

	When the flag is set it prevents the browser from sending this
	cookie along with cross-site requests to mitigate cross site
	scripting attacks. Permissible values are [term strict], [term lax],
	or [term none] (default). While the value [term strict] prevents
	sending the cookie to the target site in all cross-site browsing
	context, the value of [term lax] allows sending the cookie when the
	user clicks on regular links. For details, see
	https://www.owasp.org/index.php/SameSite

	This cookie flag is not yet part of an RFC, but most major browsers
	support it. Browsers that do not support it, ignore the flag
	silently (see https://caniuse.com/#search=samesite).

	Although most cookies should probably use the flags, in order to
	provide backward compatibility, the flag can't be activated by
	default on all cookies.

2019-02-17 12:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e0bb54250b64)

	* doc/src/naviserver/ns_cookietime.man: deleted file.
	* doc/src/naviserver/ns_cookietime.man:
	remove man page for non-existing command "ns_cookietime"

2019-02-16 19:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6924c56a2d7d)

	* configure.ac:
	bump version number to 4.99.18b1

2019-02-16 19:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5aefba2344d)

	* doc/src/naviserver/ns_log.man:
	improve wording

2019-02-16 19:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (335c7a6f8fad)

	* nsd-config.tcl, openacs-config.tcl, sample-config.tcl.in:
	add configuration examples for ns/parameters logusec and
	logusecdiff; improve documentation in config files

2019-02-16 19:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (142eb599711e)

	* tcl/util.tcl:
	whitespace changes

2019-02-16 19:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e89f5059e278)

	* doc/src/naviserver/ns_log.man:
	add sample configuration section

2019-02-16 19:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (64777ca3ebae)

	* doc/src/manual/admin-tuning.man:
	fix typo

2019-02-14 14:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (82b019f97d0e)

	* nsd/config.c:
	remove development output

2019-02-13 13:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ada44071bff2)

	* doc/src/naviserver/ns_http.man, nsd/tclhttp.c:
	ns_http: use memory units as well for parameter -spoolsize

2019-02-13 12:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40ecd5fd97b8)

	* doc/src/manual/admin-install.man, doc/src/naviserver/ns_cache.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_shortcut_filter.man:
	improve documentation

2019-02-13 12:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1afd890f5a97)

	* include/ns.h, nsd/nsd.h, nsdb/db.h, nsdb/nsdb.h:
	adding declarations for PURE and CONST functions

2019-02-13 12:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cd060a869b9b)

	* nsd/str.c:
	reduce variable scope and fix index

2019-02-13 11:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c36e1f9702c)

	* doc/src/naviserver/ns_cache.man, include/ns.h, nsd/str.c,
	nsd/tclcache.c, nsd/tclobjv.c, nsd/tclvar.c, tests/ns_cache.test:
	support memunits also for argument parsing and use it for ns_cache_*

	- added Tcl_Obj type
	- added Objv type
	- updated man pages
	- extended regression test

2019-02-12 16:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b19cf4c9293)

	* merged

2019-02-12 15:44 +0000  Gustaf Neumann  <neumann@wu.ac.at>  (525d2bc33023)

	* Merged in apiskors/naviserver (pull request #21)

	Fix Ns_VarUnset() to actually support deleting the entire nsv array.

	Approved-by: Gustaf Neumann <neumann@wu.ac.at>

2019-02-05 15:03 -0500  Andrew Piskorski  <atp@piskorski.com>  (50d5672089d1)

	* nsd/tclvar.c:
	Fix Ns_VarUnset() to actually support deleting the entire nsv array.

2019-02-12 16:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (217df8acc13d)

	* doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_writer.man, include/ns.h, nsd-config.tcl,
	nsd/adpeval.c, nsd/config.c, nsd/dns.c, nsd/driver.c,
	nsd/fastpath.c, nsd/nsconf.c, nsd/nsd.h, nsd/progress.c,
	nsd/server.c, nsd/str.c, nsd/tclinit.c, nsd/tclobjv.c,
	nssock/doc/mann/nssock.man, openacs-config.tcl, sample-
	config.tcl.in:
	Added support for memory units in config files

	With this change, memory sizes con be configured now not only with
	bare numbers, but as well with memory units (e.g. 1MB instead of
	[expr {1024*1024}]).

	The International System of Units (SI) defines kB, MB, GB as 1000,
	1000^2, 1000^3 bytes, and IEC defines KiB, MiB and GiB as 1024,
	1024^2, 1024^3 bytes.

	For effective memory usage, multiples of 1024 are better (e.g. 4k
	pages). Therefore, we follow the PostgreSQL conventions and use 1024
	as basis, but we allow as well the IEC abbreviations.

2019-02-12 10:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03d02bc93ae0)

	* doc/src/manual/admin-install.man, doc/src/manual/admin-tuning.man:
	improve documentation

2019-02-12 10:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8f3dfb066a9)

	* openacs-config.tcl, sample-config.tcl.in:
	add DNS config parameters

2019-02-12 09:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7ae003f541c)

	* sample-config.tcl.in:
	add parsens and indent consistently with spaces

2019-02-11 14:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba32623cfdc8)

	* doc/src/naviserver/ns_log.man, nsd/log.c:
	one more option for error.log: "logusecdiff" records time diffs
	since last entry in usec

2019-01-31 20:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (612f74c1e9bb)

	* openacs-config.tcl:
	add sorting order to use always the version with the highest version
	number

2019-01-30 14:16 -0500  Andrew Piskorski  <atp@piskorski.com>  (cb4bc5d0e14f)

	* nsd/log.c:
	Revert to PRIxPTR, switching to PRIuPTR is undesirable.

2019-01-29 11:27 -0500  Andrew Piskorski  <atp@piskorski.com>  (c9e7902100d5)

	* Merge in upstream changes.

2019-01-29 11:24 -0500  Andrew Piskorski  <atp@piskorski.com>  (16e6658319ae)

	* include/nsthread.h, nsd/log.c:
	Fix garbled log output on Windows, PRIuPTR now gives I64u or I32u
	there.

2019-01-25 09:35 -0500  Andrew Piskorski  <atp@piskorski.com>  (f2a0dec821b3)

	* openacs-config.tcl:
	Bugfix, spurious '}' introduced in changeset 5587:bb78064b1137,
	2019-01-24.

2019-01-25 09:32 -0500  Andrew Piskorski  <atp@piskorski.com>  (4e19db115472)

	* openacs-config.tcl:
	Merge in Gustaf's fixes to new no *.so approach.

2019-01-23 17:22 -0500  Andrew Piskorski  <atp@piskorski.com>  (9fb8f7ddd747)

	* openacs-config.tcl, sample-config.tcl.in, simple-config.tcl:
	Remove dot_so, just use bare no-extension module names.

2019-01-23 16:55 -0500  Andrew Piskorski  <atp@piskorski.com>  (a2384415ece5)

	* nsd-config.tcl:
	Merge upstream changes, adopt Gustaf's new no *.so approach.

2019-01-29 16:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (24796ea1438e)

	* tcl/nstrace.tcl:
	revert changes trying to omit tcl stuff from blueprint since this
	seems to hurt, at least for Tcl 8.5

2019-01-29 12:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (641903183cc8)

	* tcl/nstrace.tcl:
	omit ::msgcat from blueprint

2019-01-28 23:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1a07e7f1397)

	* nsthread/thread.c:
	initialize always thead name

2019-01-28 09:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cc626b08eef2)

	* nsdb/dbinit.c:
	improve comment

2019-01-28 09:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (407f0d534bfa)

	* nsdb/dbinit.c:
	remove commented-out code

2019-01-28 09:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6361c84344b6)

	* nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/nsdb.h:
	whitespace changes

2019-01-25 19:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0cac39752fbb)

	* tcl/nstrace.tcl:
	Don't put ::tcl* namespaces to the list of the namespaces to be
	created (let tcl do it)

2019-01-24 11:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb78064b1137)

	* openacs-config.tcl, simple-config.tcl:
	omit extension for shared objects in config files

2019-01-24 11:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5cc0d1c8712c)

	* nsd-config.tcl, nsssl/Makefile:
	Merged in apiskors/naviserver (pull request #19)

2019-01-23 14:16 -0500  Andrew Piskorski  <atp@piskorski.com>  (ace52933673f)

	* nsd-config.tcl, openacs-config.tcl, simple-config.tcl:
	Use dot_so sharedlibextension so loading modules works on both Linux
	and Windows.

2019-01-23 13:35 -0500  Andrew Piskorski  <atp@piskorski.com>  (812dbb38a350)

	* include/Makefile.win32, nsssl/Makefile.win32:
	Turn HAVE_OPENSSL_EVP_H on/off for Windows.

2019-01-23 13:02 -0500  Andrew Piskorski  <atp@piskorski.com>  (d46f3f8e3d5f)

	* nsd/tclhttp.c:
	Add ifdef HAVE_OPENSSL_EVP_H around SSL_get_cipher() call. This lets
	Windows nsd.exe link successfully!

2019-01-23 12:51 -0500  Andrew Piskorski  <atp@piskorski.com>  (eee9bc48472b)

	* Makefile.win32:
	For core libraries, prefer Makefile.win32 if present, otherwise use
	plain Makefile.

2019-01-23 12:51 -0500  Andrew Piskorski  <atp@piskorski.com>  (b92403028b1d)

	* nsssl/Makefile, nsssl/Makefile.win32: new file.
	* nsssl/Makefile, nsssl/Makefile.win32:
	Put Windows-only stuff in Makefile.win32, Linux-only in Makefile.

2019-01-23 12:49 -0500  Andrew Piskorski  <atp@piskorski.com>  (52b0b7b18cca)

	* nsssl/Makefile.common: new file.
	* nsssl/Makefile: deleted file.
	* nsssl/Makefile, nsssl/Makefile.common:
	Rename nsssl Makefile to Makefile.common.

2019-01-23 12:00 -0500  Andrew Piskorski  <atp@piskorski.com>  (cbc0d71571ba)

	* nsssl/Makefile:
	Clarify Linux vs. Windows incompatibility with CLEAN.

2019-01-24 08:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (227b2724a06e)

	* nsd/modload.c:
	fix last commit (check of returncode of library function was
	incorrect)

2019-01-23 21:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c9d9a151bc3)

	* nsd-config.tcl, nsd/modload.c:
	allow omission of file extension for binary modules,

	Background: unixoid platforms use itraditionall in NaviServer ".so"
	as extension, no matter what "info sharedlibextension" is. On macOS,
	the sharedlibextension returns .dylib, while the module is named
	.so. Under windows, it seems that the extension of the module has to
	be .dll, so it is not so easy to write portable config files. The
	new code tries now first to load the library as specified (for
	backward compatibility), if this fails, it tries to append either
	".so" in unixoid platforms or ".dll" under windows.

2019-01-23 21:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (87cda12b00a2)

	* nsd/tclcrypto.c:
	ease debugging of potential encoding problems

2019-01-23 08:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e00960aebbc9)

	* doc/src/manual/tcl-lib-file.man, tcl/file.tcl:
	deprecate (softly) ns_source proc and make clear, that
	ns_register_tcl is the way to go. Update the documentation and make
	clear, that ns_register_tcl is used for intepreting .tcl files.

2019-01-22 20:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29b30f8c515f)

	* nsssl/doc/mann/nsssl.man:
	improve man page

2019-01-22 20:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a4aae9702a5)

	* tcl/file.tcl:
	fix broken ns_sourceproc

2019-01-22 09:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca33c9233c60)

	* nsssl/Makefile:
	have to revert change, otherwise we get an compilation error (at
	least, under macOS)

	Recursive variable `CLEAN' references itself (eventually). Stop

2019-01-22 01:04 -0500  Andrew Piskorski  <atp@piskorski.com>  (afe415ad7c50)

	* include/Makefile.win32:
	Attempt to add necessary Windows OpenSSL support. But nsd.dll and
	nsd.exe still fail to link.

2019-01-22 00:35 -0500  Andrew Piskorski  <atp@piskorski.com>  (05b1f0f48456)

	* Makefile.win32:
	nsssl is now part of core, not an add-on module.

2019-01-22 00:25 -0500  Andrew Piskorski  <atp@piskorski.com>  (178103c29bc5)

	* nsssl/Makefile.win32: deleted file.
	* nsssl/Makefile.win32:
	Now that nsssl is part of the NaviServer core, its Makefile.win32 is
	obsolete, remove it.

2019-01-22 00:13 -0500  Andrew Piskorski  <atp@piskorski.com>  (67ce3c513754)

	* nsssl/Makefile:
	Now that nsssl is part of the NaviServer core (rather than an add-on
	module), its Makefile must be valid on Windows too, so avoid use of
	"+=" and other features which break Windows nmake.

2019-01-21 15:46 -0500  Andrew Piskorski  <atp@piskorski.com>  (99494de0a88b)

	* Makefile.win32:
	Simplify and clarify the smash_lib_include stuff.

2019-01-21 15:11 -0500  Andrew Piskorski  <atp@piskorski.com>  (92497e83d5f5)

	* Merge upstream changes through 2019-01-17. No conflicts.

2019-01-16 12:51 -0500  Andrew Piskorski  <atp@piskorski.com>  (36ed92f152cf)

	* include/nsconfig.h.in:
	Merge upstream changes through 2019-01-13.

2019-01-18 18:44 +0100  Zoran Vasiljevic  <zv@archiware.com>  (fd186ea6d7d2)

	* nsproxy/nsproxylib.c:
	Fixed block in reaper thread that led to excessive time spent in the
	main reaper loop, thus blocking the whole proxy interface.

2019-01-17 23:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c915e2412de)

	* nsd/tclmisc.c:
	replace UTF-8 string literals by hexadecimal-escape-sequences to
	avoid potential encoding limitations from older compilers

2019-01-17 09:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59a24d5599b8)

	* nsd/tclmisc.c:
	optimization: declare symbol array const and static

2019-01-17 09:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16d54cccd5f1)

	* tests/ns_striphtml.test:
	remove false warning from regression test, improve test labels

2019-01-13 02:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (01627330cfb9)

	* include/nsthread.h, nsd/fastpath.c, nsd/sock.c:
	Security smell: add *CLOEXEC to file descriptor open operation

	This fixes no real issue (forks are very limited in nsd), but
	silences static analyzers

2019-01-12 22:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (459244a2c148)

	* nsd/sock.c:
	Improve connect() operations with half-configured IPv6 installations

	This change addresses especially a problem, where IPv6 is activated
	on a server, but it cannot be used to connect to the outside world.
	In this situations, connect operations to hosts with domain names
	having both IPv4 and IPv6 addresses would fail, although IPv4
	connections are possible. In this cases, one should actually either
	deactivate IPv6 on the machine or probably deactivate IPv6 name
	lookups in bind (option "-4", filter-aaaa-on-v4 yes;)

	With this change, this should be be necessary. This change fixes
	also a resource leak in this situation.

2018-12-29 04:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (671d8c8047b9)

	* nsdb/dbinit.c:
	whitespace change

2018-12-29 04:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6682dca586a)

	* nsd/sock.c:
	add braces

2018-12-29 04:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (443a33bcf3eb)

	* nsd/queue.c:
	add explicit cast

2018-12-29 04:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a6308dde18f)

	* nsd/driver.c:
	simplify statements

2018-12-29 04:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ce7ebe5f74ab)

	* nsd/dns.c:
	add explicit else branch at end of cascade

2018-12-29 04:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (532df854bb56)

	* nsd/adpparse.c:
	whitespace change

2018-12-29 03:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db2ba129da3e)

	* nsd/tclcache.c:
	avoid double deletes (introduced today)

2018-12-29 03:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76c503443ee6)

	* nsd/tclresp.c:
	reduce variable scope

2018-12-29 03:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbe07073c5cf)

	* nsd/connio.c:
	avoid unneeded cast and assignment

2018-12-29 03:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc1d52cbe360)

	* nscgi/nscgi.c:
	fix potential memory leak

2018-12-28 23:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (324eac815581)

	* nsd/tclcache.c, tests/ns_cache.test:
	cache transaction semantics: align behavior

	- make "ns_cache flush $cache" behave like "ns_cache_flush -glob
	$cache *".
	- extend regression test

2018-12-20 21:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (492a93a04e14)

	* openacs-config.tcl:
	Improve documentation

2018-12-18 11:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d85ff454c07b)

	* nsdb/dbdrv.c:
	fix handle-active state in error cases

2018-12-17 19:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40d39eb81888)

	* tcl/ns_crypto.tcl:
	align code and documentation

2018-12-17 13:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca073bdd03fc)

	* nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/doc/mann/ns_db.man,
	nsdb/nsdb.h:
	new API call: ns_db currenthandles

	Return information about handles currently allocated to the thread
	performing this call. The result contains a dict with the pools,
	from which handles were allocated, the names of the handles and
	their "active" state (a handle is active between a "ns_db select"
	and the last "ns_db getrow" statement). If no handles are allocated
	by this thread, empty is returned.

	For example, a possible result is "main {nsdb0 1} subquery {nsdb1
	0}" indicating that the current thread has allocated handles from
	pool "main" and "subquery", but the handle from pool "main" (i.e.
	"nsdb0") is currently active (during a select).

2018-12-17 12:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56a190e8aa0d)

	* nssock/doc/mann/nssock.man:
	fix typo

2018-12-17 12:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ed4e9f0e6193)

	* include/nsthread.h:
	provide macro NS_TCL_PRE85 to detect, when NaviServer is compiled
	with a Tcl prior to 8.5

2018-12-16 17:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (673070e6befb)

	* nsd/fastpath.c, nsd/index.c, nsd/urlspace.c:
	reduce dead assignments

2018-12-07 14:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f08088f80be4)

	* nsd-config.tcl, nssock/doc/mann/nssock.man, nssock/nssock.c,
	openacs-config.tcl:
	turn off Nagle algorithm (parameter nodelay) per default

2018-12-07 11:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cc05adb0ad18)

	* nsd/driver.c:
	remove outdated comment

2018-12-07 11:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cfaf00632071)

	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_adp_ctl.man, doc/src/naviserver/ns_cond.man,
	doc/src/naviserver/ns_critsec.man, doc/src/naviserver/ns_env.man,
	doc/src/naviserver/ns_event.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_rwlock.man, doc/src/naviserver/ns_sema.man,
	doc/src/naviserver/ns_writer.man, nslog/doc/mann/ns_accesslog.man:
	distinguish consistently between subcommand and argument

2018-12-07 11:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5492d65fb164)

	* doc/src/manual/admin-maintenance.man:
	improve sample service file

2018-12-04 14:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f25c8c4d0957)

	* nsd/sockfile.c:
	improve indentation

2018-11-20 15:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (49c314f2b1e9)

	* nsd/nsopenssl.h, nsd/tclcrypto.c:
	fix compilation issue for versions of OpenSSL before 1.0.2

2018-11-20 15:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c924aec1dba)

	* nsd/tclcrypto.c:
	whitespace changes

2018-11-16 12:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (77dcbaf94331)

	* nsd/tclhttp.c:
	align implementation with documentation (if wait operation has no
	timeout, use timeout of queue operation)

2018-11-16 12:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5e816ffc4995)

	* nsd/task.c:
	reduce variable scope

2018-11-15 11:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02783d730ade)

	* doc/src/naviserver/ns_job.man:
	align documentation with implementation; use itemized list for
	describing entries in the result lists.

2018-11-14 12:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06232350e9d1)

	* nsd/tclcache.c:
	reduce variable scope

2018-11-14 11:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1b62ca953a46)

	* openacs-config.tcl:
	deactivate SSLv3 by default, adjust comments to values from source
	code

2018-11-08 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d71ceca6d0d)

	* nsd/tclhttp.c:
	remove unneeded variable

2018-11-08 11:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ec8190671af)

	* nsd/tclhttp.c:
	improved debug messages, tested with boundary cases (i.e. upload
	files being a multiple of CHUNK-SIZE)

2018-11-07 13:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (80ed01e123a0)

	* nsd/tclhttp.c:
	ns_http: fix potential problem with partial writes on HTTP requests
	with large bodies (e.g. POST of larger files)

2018-11-06 09:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30f5063d0ea3)

	* include/ns.h, nsd/sockaddr.c:
	add const declaration

2018-11-06 09:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9ecb7463012b)

	* nsd/nswin32.c:
	help parse performing static analysis

2018-11-06 09:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ea4aa46c054)

	* nsd/sock.c:
	remove unused macro

2018-11-06 09:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7a395a738364)

	* nsd/dns.c:
	make otherwise unused macro more local

2018-11-04 18:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8253a660e393)

	* .hgtags:
	Added tag naviserver-4.99.17 for changeset 12b3f7e266d3

2018-11-04 18:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12b3f7e266d3 [naviserver-4.99.17])

	* tests/http.test:
	provide compatibility for Tcl 8.5 in http.test

2018-11-04 14:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (146d22afd7cc)

	* NEWS:
	update diff-stats

2018-11-04 14:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3be80fa271f)

	* doc/images/manual/blueprint3.png: new file.
	* doc/images/manual/blueprint3.png, doc/src/manual/tcl-overview.man:
	add image visualizing blueprints to documentation

2018-11-04 14:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ea4260736cf3)

	* Makefile:
	add support for images in documentation files

2018-11-04 13:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff64865acdee)

	* README, configure.ac:
	bump version number to 4.99.17

2018-11-04 13:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7587066dd72c)

	* nsd-config.tcl:
	add sample for initcmds to nsd-config.tcl

2018-11-04 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c111fbfabf7f)

	* NEWS:
	updated news files, esp. with changes in sample configure files

2018-11-04 08:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f2f01284d055)

	* nsd/connio.c, nsd/cookies.c, nsd/queue.c, nsd/request.c, nsd/task.c:
	avoid shadowing of outer symbols

2018-11-04 08:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e615fe495828)

	* nsd/conn.c:
	improve comment

2018-11-04 08:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f0f827cc7c8)

	* nsd/config.c:
	whitespace change (fix indentation)

2018-11-04 08:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (626ae8a133af)

	* include/ns.h:
	aligen name of arguments in prototype with function definition

2018-11-04 08:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3f242c081973)

	* tests/http.test:
	improve spelling

2018-11-03 19:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61cd1a66a08c)

	* doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_return.man,
	nsd/cache.c, nsd/nswin32.c, nsd/queue.c, nssock/doc/mann/nssock.man:
	remove comma before that

2018-11-03 19:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a37cda6eb9a)

	* NEWS:
	update change statistics

2018-11-03 19:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a6157fdf3f5)

	* NEWS:
	add changes of NaviServer modules to NEWS file

2018-11-03 18:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a84fc9fbaa47)

	* nsd/sockcallback.c, nsd/task.c:
	remove code smells

2018-11-03 18:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef859838f8f4)

	* nsd/tclhttp.c:
	make function CallDoneCallback() static and comment function

2018-11-03 18:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b1a5dcf2777)

	* nsd/tclhttp.c:
	remove test with identical outer condition

2018-11-03 17:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6cb299c00ce1)

	* nsd/connchan.c, nsd/driver.c, nsd/nsmain.c, nsd/queue.c, nsd/set.c,
	nsd/tclcrypto.c, nsd/tclhttp.c, nsd/tcljob.c, nsproxy/nsproxylib.c,
	nsssl/nsssl.c:
	fixes for Raspberry PI: use proper print macros for printing size_t
	and ssize_t

2018-11-03 17:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72801bdfc11d)

	* nsd/unix.c:
	reduce implicit conversions

2018-11-03 09:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e3aa5717a39c)

	* tcl/ns_crypto.tcl, tests/ns_crypto.test:
	fix editing bug (many thanks to Oleg for pointing this out) extend
	regression test for ns_crypto

2018-11-01 20:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (83f7940bf4da)

	* NEWS:
	update change statistics

2018-11-01 20:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23997702be58)

	* nsdb/db.h, nsdb/nsdb.h:
	withspace changes

2018-11-01 20:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (70ff7214b7db)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/adprequest.c, nsd/auth.c, nsd/binder.c, nsd/callbacks.c,
	nsd/cls.c, nsd/compress.c, nsd/connchan.c, nsd/crypt.c,
	nsd/encoding.c, nsd/event.c, nsd/exec.c, nsd/filter.c, nsd/form.c,
	nsd/httptime.c, nsd/index.c, nsd/info.c, nsd/init.c, nsd/lisp.c,
	nsd/listen.c, nsd/main.c, nsd/mimetypes.c, nsd/modload.c,
	nsd/nsconf.c, nsd/nsmain.c, nsd/nsthread.c, nsd/nswin32.c, nsd/op.c,
	nsd/pathname.c, nsd/pidfile.c, nsd/progress.c, nsd/quotehtml.c,
	nsd/random.c, nsd/range.c, nsd/return.c, nsd/returnresp.c,
	nsd/rollfile.c, nsd/sched.c, nsd/set.c, nsd/sockaddr.c,
	nsd/sockcallback.c, nsd/sockfile.c, nsd/stamp.c, nsd/str.c,
	nsd/task.c, nsd/tclcallbacks.c, nsd/tclcmds.c, nsd/tclcrypto.c,
	nsd/tclenv.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclrequest.c,
	nsd/tclresp.c, nsd/tclsched.c, nsd/tcltime.c, nsd/tclxkeylist.c,
	nsd/tls.c, nsd/url2file.c, nsd/urlencode.c, nsd/urlopen.c,
	nsd/urlspace.c, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c,
	nsdb/dbutil.c, nsdb/nsdb.c, nslog/nslog.c, nsperm/nsperm.c,
	nsssl/nsssl.c, nsthread/cslock.c, nsthread/error.c, nsthread/fork.c,
	nsthread/master.c, nsthread/memory.c, nsthread/mutex.c,
	nsthread/nsthreadtest.c, nsthread/rwlock.c, nsthread/sema.c,
	nsthread/signal.c, nsthread/time.c, nsthread/tls.c:
	whitespace changes (remove tabs and trailing spaces)

2018-11-01 19:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f916b6e50178)

	* nsd/tclresp.c:
	silence static checker

2018-11-01 19:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9740a685770)

	* nsthread/pthread.c, nsthread/winthread.c:
	align variable name with prototype

2018-11-01 19:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e1bfff9c2dac)

	* nsd/nswin32.c:
	use always NULL instead of 0 for SERVICE_STATUS_HANDLE

2018-11-01 19:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7521188de801)

	* nsd/dns.c, nsd/sockcallback.c, nsd/task.c, nsd/tclconf.c,
	nsd/tclfile.c, nsd/tcljob.c:
	avoid potential name clashes with predefined "min" or "max"

2018-11-01 19:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (34b9ffbf58a6)

	* nsd/tclmisc.c:
	silence static checker

2018-11-01 19:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (504672e0700e)

	* nsd/tclcrypto.c:
	reduce code duplication

2018-11-01 19:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6a3689188ab6)

	* include/ns.h, nsd/config.c:
	avoid potential name clashes with predefined macros

2018-11-01 18:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33705ae7f261)

	* NEWS, README, configure.ac, nsthread/pthread.c:
	improved NEWS, bumped version to 4.99.17b2

2018-11-01 17:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d086d298df83)

	* nsd/driver.c:
	fix print string when no SO_REUSEPORT is available

2018-10-31 12:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d2efe49c380)

	* nsd/tclhttp.c:
	improve comment

2018-10-31 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2b16644762a)

	* nsd/tclhttp.c:
	fix Tcl error code setting in versions before 8.7

2018-10-31 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c19adb211df)

	* include/nsthread.h:
	clean dirty editor buffer

2018-10-31 11:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (46aebdb222f6)

	* include/nsthread.h, nsd/tclobj.c:
	do not rely on implementation defined print/scan format %p, but use
	instead standardized integer types

2018-10-31 11:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5500eb9767c)

	* tests/test.nscfg:
	stick to full name of "sharedlibextension" as used in Tcl

2018-10-31 11:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0fdb439c7867)

	* tests/ns_info.test:
	let windows test succeed, even when binary name does not end with
	*nsd

2018-10-31 10:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dfffeb120a2e)

	* tcl/ns_crypto.tcl:
	fix typos

2018-10-31 10:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9234ec7069c5)

	* include/nsconfig.h.in:
	prefer current spelling of macOS

2018-10-31 10:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9ddd89981930)

	* nsdb/util.tcl:
	fix spelling

2018-10-31 10:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (662045737660)

	* include/Makefile.win32, include/nsthread.h, nsd/sock.c,
	tests/test.nscfg, tests/testserver/modules/client.tcl,
	tests/testserver/modules/testhttp.tcl:
	incorporating windows changes from Oleg Oleinik

2018-10-29 19:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d88f71cb9bb5)

	* nsd/driver.c, nsd/task.c:
	fix typos in comments

2018-10-29 19:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8ba3e08760e4)

	* nsd/tclvar.c:
	avoid potential nameing conflicts pointed out by cppcheck

2018-10-29 19:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff45f4e1414a)

	* nsd/set.c:
	avoid potential nameing conflicts pointed out by cppcheck

2018-10-29 19:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c7788ea020a)

	* Makefile:
	Don't include access log in diest tar file

2018-10-28 14:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08980136a097)

	* NEWS:
	updated NEWS file

2018-10-28 14:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d0e91034b8bf)

	* tests/http.test:
	extend regression test (added test cases for -timeout and
	-donecallback)

2018-10-28 14:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (051ef9d80fec)

	* nsd/tclhttp.c:
	set error code to NS_TIMEOUT when timeouts occur; improve comments,
	refactor code a little.

2018-10-28 14:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3f10e168d0ad)

	* nsd/task.c:
	Fix potential infinite loop when a task added itself as its next task
	(nextWaitPtr) causing an infinite loop. This might have happened in
	connection of timeouts occurring in tasks.

2018-10-27 12:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23182fdc4340)

	* doc/src/README:
	use 4 spaces indentation

2018-10-27 12:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d0543b3c19ec)

	* doc/src/README: new file.
	* doc/src/README.txt: deleted file.
	* doc/src/README, doc/src/README.txt:
	rename README.txt to README like in other places

2018-10-27 12:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76959e6a5900)

	* NEWS:
	update statistics

2018-10-27 12:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (36e234724b93)

	* NEWS, README, configure.ac, include/nsconfig.h.in:
	add first draft of NEWS update and bump version numbers

2018-10-26 15:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c66d44438836)

	* nsd/str.c:
	simplify Ns_GetBinaryString(), since detailed differentiation does
	not seem to be necessary anymore

2018-10-26 14:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f2bec635df7f)

	* doc/src/naviserver/ns_crypto.man: new file.
	* doc/src/naviserver/ns_crypto.man:
	add man page for ns_crypto functionality

2018-10-26 14:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ccbc0f02c9c4)

	* nsd/tclcrypto.c:
	fix typo

2018-10-26 14:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (561e23681648)

	* tcl/ns_crypto.tcl:
	reflow comment

2018-10-26 14:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9689ef2b6f36)

	* nsd/tclcache.c:
	fix comment

2018-10-26 14:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c6f7b4215f8e)

	* doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_connchan.man:
	improve man pages

2018-10-26 14:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a09195388677)

	* NEWS:
	improve spelling

2018-10-25 18:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5be63200062)

	* license.terms:
	updating contributors

2018-10-22 20:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (758bb1564484)

	* nscgi/nscgi.c, nsd/adpcmds.c:
	minor changes to silence cppcheck

2018-10-22 20:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59067a5c028e)

	* tests/http.test, tests/ns_server.test:
	improve spelling

2018-10-22 20:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aecfba8f9b5d)

	* doc/src/naviserver/ns_striphtml.man, nsd/tclmisc.c,
	tests/ns_striphtml.test:
	let ns_striphtml strip as well HTML comments

2018-10-20 18:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df05e62db76d)

	* nsd/adpparse.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclsock.c,
	nslog/nslog.c:
	minor changes to reduce code smells

2018-10-19 10:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (618d04995d0b)

	* nsd/tclmisc.c:
	deactivate development code

2018-10-19 10:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12b338ecba46)

	* nsd/tclmisc.c, tests/ns_striphtml.test:
	support all HTML4 entities in ns_striphtml

2018-10-18 22:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9686234ef37c)

	* tests/ns_striphtml.test: new file.
	* nsd/tclmisc.c, tests/ns_striphtml.test:
	improving ns_striphtml: add resolving of basic HTML entities (&nbsp:
	etc) fix encoding of some numeric entities extend regression test

2018-10-11 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61837bd156df)

	* doc/src/manual/admin-db.man:
	improve man section

2018-10-11 11:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (77a6443d4631)

	* openacs-config.tcl:
	use PostgreSQL's conninfo notation in the datasource to hint, that
	more parameters are possible as well

2018-10-11 11:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (442866e85cb0)

	* nsd/httptime.c:
	improve spelling

2018-10-11 11:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23bfdc8e7af1)

	* doc/src/naviserver/ns_http.man:
	improve documentation (many thanks to Michael Aram for point this
	out)

2018-09-29 15:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (542fefd4c735)

	* doc/src/naviserver/ns_ictl.man, nsd/init.tcl, nsd/nsmain.c,
	nsd/sock.c, nsd/watchdog.c, nsdb/util.tcl:
	improve spelling

2018-09-29 15:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9ab9c5c6e2ac)

	* nsd/tclsock.c:
	avoid potential NULL reference

2018-09-29 15:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56c8389cec5e)

	* nsd/tclhttp.c:
	remove dead assignment

2018-09-29 15:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57f97f4377ac)

	* nsd/sock.c:
	reduce variable scopes

2018-09-23 19:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7398a6cc1a8e)

	* tests/ns_reflow_text.test:
	improve comment of test

2018-09-23 19:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8543d1271b5)

	* doc/src/naviserver/nsv.man:
	improve example in man page

2018-09-23 19:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d1c4f6226c8)

	* doc/src/naviserver/ns_http.man:
	improve example in man page

2018-09-23 19:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c988d0c23c4)

	* nsd/tclmisc.c:
	- avoid potential passing of NULL as 2nd arg of memcpy()

2018-09-17 08:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ecad07eb907)

	* nsd/encoding.c:
	change preset encodings (when not specified in config file) for
	files with extensions .htm, .html, and .adp from iso8859-1 to utf-8

2018-09-16 11:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef6bef4593c7)

	* doc/src/manual/tcl-libraries.man, nsd/init.tcl:
	add parameter "initcmds" to "tcl" section of the server
	configuration.

	The new features allows one to setup full configurations without
	separate files by allowing to add commands to the config file, which
	are executed after all regular configurations.

2018-09-16 11:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c5d24e54332f)

	* doc/src/naviserver/ns_http.man:
	fix line breaks in man page

2018-09-16 11:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a28729fc2782)

	* tests/http.test:
	fix line breaking in man page

2018-09-16 10:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b16a8c11192)

	* nsd/init.tcl:
	use ns_parseargs for ns_driversections (instead of "manual parsing")

2018-09-15 17:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e91433ec4a90)

	* configure.ac:
	bump version number to 4.99.17d6

2018-09-15 12:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12e13bda18fc)

	* nsd/tclenv.c:
	fix issue with space for the terminating null character correctly

2018-09-15 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (875f7f83d4bb)

	* nsd/connchan.c, nsd/tclenv.c, nsdb/dbutil.c:
	make sure, we have enough space for the terminating null character

2018-09-14 12:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d5efda24839)

	* doc/src/naviserver/ns_conn.man:
	Add pointer to "ns_getform" to man page entry of "ns_conn form".

2018-09-14 12:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f0f651ad8f36)

	* doc/src/naviserver/ns_ictl.man:
	remove duplicated entry in man page

2018-09-14 12:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10620a93618e)

	* nsd/tclhttp.c, tests/http.test:
	Fixed memory leak in "ns_http run" and extended regression test

2018-09-14 11:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2c05ea438eb)

	* nsd/task.c:
	reduce verbosity in debug cases

2018-09-12 04:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f2c80129f0e6)

	* tests/http.test:
	add testcases for ns_getformfile with and without spool file

2018-09-12 04:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd21ace48988)

	* tcl/form.tcl:
	bugfix for ns_getformfile (see
	https://sourceforge.net/p/naviserver/bugs/80/)

	Do not rely on global variables, but use ns_set instead. Depending
	on configured values, ns_getformfile could return empty, even when
	files were uploaded

2018-09-12 04:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (469a08189612)

	* tests/test.nscfg:
	change for config file of testserver: set maxupload for nssock to
	10000

2018-09-08 11:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5eecd314eb10)

	* openacs-config.tcl:
	improve comments in sample configuration of OpenACS

2018-09-08 10:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (045c6b3721b2)

	* tests/test.nscfg:
	remove unneeded mime mapping

2018-09-08 10:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (222ab36591c2)

	* Makefile:
	add example with verbose test cases to "make help"

2018-09-08 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8d760b3b95a)

	* nsd/unix.c:
	remove false positives from log file

2018-09-08 10:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb7b862759b5)

	* nsd/sock.c:
	don't use reuse socket option on local socket

2018-09-08 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c71092f8430b)

	* nsd/init.tcl:
	capitalize name "Tcl"

2018-09-08 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e0da4683e4da)

	* nsd/driver.c:
	reduce verbosity

2018-09-08 10:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29fb6d443e26)

	* nsd/tclsock.c:
	whitespace cleanup

2018-09-03 12:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a6487fb4cc1)

	* doc/src/naviserver/ns_http.man:
	add documentation for "ns_http stats"

2018-09-01 17:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (010b572226d7)

	* nsd/connchan.c:
	provide callback info for ns_connchan

2018-09-01 12:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dff71c30d61e)

	* nsd/tclhttp.c:
	remove unneeded test

2018-09-01 12:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30fd7edc64b9)

	* nsd/sock.c:
	properly initialize revents member

2018-09-01 12:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dcc7313d4332)

	* nsd/connchan.c:
	reduce variable scope

2018-08-29 15:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bfe0aaee1265)

	* nsd/sock.c:
	use ns_poll() instead of poll() for windows portability

2018-08-29 12:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b8604ed4926f)

	* nsperm/nsperm.c:
	reduce number of return statements before end of function

2018-08-29 12:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1cd95ea096fe)

	* nsd/connchan.c:
	make sure to initialize all members of a structure

2018-08-29 12:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33dfc1f78734)

	* nsd/unix.c:
	reduce verbosity

2018-08-29 11:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8af9ea77de9)

	* configure.ac:
	bump version number to 4.99.17d5

2018-08-29 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8900292369cf)

	* nsd/task.c:
	remove pedantic warning

2018-08-28 16:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a952f1eab882)

	* doc/src/naviserver/ns_http.man, include/ns.h, nsd/tclhttp.c:
	Improvements for “ns_http”:
	-	Provided support for asynchronous “ns_http” tasks: when the new flag
	“donecallback” is provided, then an “ns_http” task is started in the
	background and does not require an “ns_http wait” anymore. Instead,
	when it finishes it executes the provided donecallback which
	receives as additional arguments the Tcl result (in form of an
	integer) and the result dict, returned usually from “ns_http run”.
	-	As a consequence, requests of the form “ns_http queue …
	-donecallback … ” o do not return a handle for “ns_http wait” o are
	not automatically cleaned up (canceled) at the end of a connection
	requests o typically, donecallback are executed in a different
	thread than it was started o some more options, which were
	previously only valid on “ns_http wait” (such as e.g. spoolsize) are
	now valid for “ns_http queue” as well.
	-	Updated documentation

2018-08-28 16:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7f4cde4e67ab)

	* nsd/sock.c:
	improve comment

2018-08-28 16:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15a7bae06c95)

	* tests/ns_conn.test:
	align tests with recent changes in "ns_connchan list"

2018-08-28 15:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (918829df06ad)

	* nsd/unix.c:
	provide information in the error.log when fcntl() call fails

2018-08-28 15:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (386be5c53e54)

	* nsd/task.c:
	provide more detailed info when debugging tasks

2018-08-28 15:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c1dee6f40b3)

	* openacs-config.tcl:
	add comments to ease debugging

2018-08-28 15:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ee89129363d)

	* nsd/sock.c:
	reduce verbosity

2018-08-28 15:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c4c2ffc79ba5)

	* nsd/sock.c:
	New feature: support resolving a hostname against multiple IP
	addresses for client operations:
	- in case, one domain name has multiple IP addresses registered,
	previous versions of NaviServer tried only the first returned
	address and returned an error, when this failed. This happened when
	using client functions (e.g. ns_http).
	- host names with multiple IP addresses are nowadays quite common,
	e.g. "localhost" having an IPv4 and an IPv6 address registered. In
	previous versions, when e.g. localhost has as first address the IPv6
	address, but IPv6 was not active, it returned an error.
	- resolving against IP addresses works always.

2018-08-27 16:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f9ea46e6c10d)

	* nsd/dns.c:
	add comment

2018-08-22 19:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (78c8a67fc1e7)

	* nsd/tclthread.c:
	provide always a thread name for tclthreads

2018-08-19 20:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20434585fe2c)

	* nsd/tclthread.c:
	fix broken thread name

2018-08-17 19:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d51c0db91e61)

	* doc/src/naviserver/ns_time.man:
	fix typo

2018-08-16 14:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb1465b7c701)

	* nsd/connchan.c, nsd/mimetypes.c:
	improve source code documentation

2018-08-16 13:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (53a3907f4e11)

	* doc/src/naviserver/ns_connchan.man, nsd/connchan.c:
	ns_connchan improvements:
	* ability to suspende callbacks. Previously, one could only terminate
	a callback with closing a channel automatically, or continuing
	firing events. When a callback returns now the value of "2", the
	callback will be suspended (i.e. no more events, but the channel is
	kept open)
	* ns_connchan list: return now in the listing two more fields: a) cmd
	name of the callback (eases debugging, when callbacks are changed
	dynamically) b) conditions used for registering

2018-08-13 17:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d3d25ea1c663)

	* nsd/connchan.c:
	when "ns_connchan write" would block, return the nr of bytes
	written; preare for a possible automatic registry of a callback.

2018-08-13 11:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7720b8074f3f)

	* nsd/driver.c:
	improve naming

2018-08-13 11:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c181abcb0e8)

	* nsssl/Makefile:
	whitespace change

2018-08-11 18:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0acf86d27c7d)

	* nsd/urlopen.c:
	fix typo, improve error message

2018-08-11 18:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61b2fb2afc1a)

	* nsd/conn.c:
	set error code when ns_conncptofp fails

2018-08-11 09:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (972fc91b2c39)

	* nsd/connchan.c, nssock/nssock.c:
	align documentation with implementation

2018-08-11 08:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d9d1b1cfb4e)

	* nsd/connchan.c:
	return POSIX error codes in case "ns_connchan write" fails

2018-08-10 12:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (200520a2c17a)

	* nsd/adpparse.c, nsd/tclsched.c, nsdb/dbinit.c:
	improve type clean-ness

2018-08-09 23:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b962a9b1397b)

	* nsd/connchan.c, nsd/task.c:
	improve debugging outout return error info NS_TIMEOUT or
	NS_WOULDBLOCK on "ns_connchan write"

2018-08-09 23:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d1c20f908ab)

	* nsd/tclhttp.c:
	add Ns_ParseHeader to output of Debug(reququest)

2018-08-07 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9af23a8f08db)

	* include/ns.h, nsd/sched.c:
	improve type cleanness

2018-08-07 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b25b736213fc)

	* nsd/tclcrypto.c:
	remove unneeded assignment

2018-08-06 23:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ed88ed5eac5)

	* nsd/tclhttp.c:
	name mutex properly and handle SSL_ERROR_SYSCALL without issuing a
	warning

2018-08-06 23:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d5fe83ac995)

	* nsthread/mutex.c:
	improve comments

2018-08-06 23:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9afc10fd44ce)

	* nsd/init.c, nsd/nsd.h, nsd/sockcallback.c, nsd/task.c, nsd/tclenv.c:
	initialize and name mutexes properly

2018-08-06 22:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8ca1d93bec27)

	* nsd/tclcrypto.c:
	reduce verbosity and perform some cleanup

2018-08-06 22:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb12186bfd54)

	* nsd/init.c, nsd/nsd.h, nsd/task.c:
	initialize and name mutexes properly

2018-08-06 22:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (601f1459974a)

	* nsd/fd.c, nsd/init.c, nsd/nsd.h, nsd/sockcallback.c:
	initialize and name mutexes properly

2018-08-06 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf0396eb3149)

	* nsthread/mutex.c:
	provide compiler-flag NS_MUTEX_NAME_DEBUG for ease locating
	anonymous mutexes

2018-08-06 11:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (78faeb536830)

	* nslog/nslog.c:
	make sure, ip address string is always non-null

2018-08-06 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (feee71296dfe)

	* nsdb/dbinit.c:
	name mutex properly

2018-08-06 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (52af5f046771)

	* nsd/tclinit.c:
	init mutexes explicitly

2018-08-06 11:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b128f776375c)

	* nsd/tclenv.c:
	provide name for mutex (having a proper init call would be better)

2018-08-05 22:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (67e09101970b)

	* NEWS, README, nsssl/ChangeLog, openacs-config.tcl, sample-
	config.tcl.in, tests/http.test, tests/http_chunked.test,
	tests/ns_hostbyaddr.test, tests/ns_listencallback.test:
	improve spelling

2018-08-05 22:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2344596e44b5)

	* openacs-config.tcl:
	improve spelling

2018-08-05 22:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (13d281a33f92)

	* nsd/task.c:
	improve cleanness of compilation with newest compilers

2018-08-05 22:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20f2710659d7)

	* doc/src/naviserver/ns_atexit.man,
	doc/src/naviserver/ns_atshutdown.man: deleted file.
	* doc/src/naviserver/ns_atexit.man,
	doc/src/naviserver/ns_atshutdown.man,
	doc/src/naviserver/ns_atsignal.man:
	remove duplicate man pages

2018-08-04 12:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c041feb4e508)

	* NEWS, configure.ac, include/nsconfig.h.in, m4/tcl.m4, nsd/init.tcl,
	nsssl/README.md, tcl/compat.tcl, tcl/ns_crypto.tcl, tcl/nstrace.tcl,
	tcl/sendmail.tcl:
	improve spelling

2018-08-04 12:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56bc3f1f7de5)

	* sample-config.tcl.in:
	add parameter "masklogaddr" of "nslog" to sample config file set to
	"true"

2018-08-04 12:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4fe7b7d8857d)

	* nsd-config.tcl:
	add parameter "masklogaddr" of "nslog" to sample config file set to
	"true"

2018-08-04 12:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe43a59c8af6)

	* nslog/doc/mann/ns_accesslog.man, nslog/nslog.c, openacs-config.tcl:
	New feature for GDPR: add option masklogaddr to mask IP addresses in
	access log, (similar to "anonip" IP anonymizer of the Swiss privacy
	foundation)

	When this parameter is set, all IP addresses are masked in the log
	file, such that the host-specific (= person-specific) information is
	masked out and the IP-address does not match a particular individual
	anymore. Still, with the masking turned on, reverse DNS lookup
	and/or geolocation is possible. Default: false.

2018-08-04 12:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (733e59551eb4)

	* doc/src/naviserver/ns_server.man:
	consistently capitalize term URL

2018-08-03 21:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (617f745fd10f)

	* nsd/tclhttp.c:
	reduce implicit conversions

2018-08-03 21:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2231fbe2290b)

	* nsd/sockaddr.c:
	improve comments in source file

2018-08-02 10:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (467c3e56cf3e)

	* nsd/task.c, nsd/tclhttp.c:
	provide URL in warning to ease debugging

2018-07-31 21:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (47dbcd116fed)

	* configure.ac:
	bump version number to 4.99.17d4

2018-07-31 20:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bbbe2f459a1b)

	* nsd/nsmain.c:
	add version tag to "starting" message to ease analysis in case of
	problems

2018-07-31 20:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (baddfa3600ad)

	* nsd/tclhttp.c:
	make refcounting explicit

2018-07-31 20:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b8292d952ce)

	* nsd/task.c:
	get rid of warning

2018-07-31 10:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2baf2a526518)

	* NEWS, doc/README, include/ns.h, nsd/sock.c:
	improve spelling

2018-07-31 10:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ee4aac37c86b)

	* nsd/tclhttp.c:
	get rid of compiler warnings

2018-07-31 10:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16fa45c40ee5)

	* include/ns.h, nsd/driver.c, nsd/sock.c, nsd/tclhttp.c,
	nsd/tclsock.c:
	tclhttp client improvements for HTTPS: API change:
	- Ns_SockTimedConnect2() returns now Ns_ReturnCode to be able to
	distinguish between timeouts and errors
	- Ns_SockConnectError(): new call to provide consistent error messages
	and to set Tcl error info consistently
	- reactivate asynchronous reading in ns_http

2018-07-30 21:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (27f4dd6c4eb3)

	* include/ns.h, nsd/task.c, nsd/tclhttp.c, nsd/tls.c:
	tclhttp client improvements for HTTP:
	- deactivate setting SSL_SENT_SHUTDOWN, since we see strange errors
	from ephorus when it is set.
	- generalize static function WaitWritable() to WaitState()
	- return ssl info in result dict
	- improve debug output for tasks

2018-07-28 17:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d0860cb9169)

	* openacs-config.tcl:
	update default openacs config file

2018-07-28 17:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aeb456475099)

	* nsd/config.c:
	- provide better log message, when configured value is out of range
	- update config values when range check corrects the value to get the
	finally configured value via introspection

2018-07-28 17:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (868d91eeea02)

	* nsd/cache.c:
	reduce implicit conversions

2018-07-25 11:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a2b7540aed85)

	* nsd/tclinit.c:
	make conversion from void* to other type explicit (MISRA)

2018-07-24 21:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43d27325a6ef)

	* nscgi/doc/mann/nscgi.man, nsd/adpparse.c, nsd/connio.c, nsd/event.c,
	nsd/filter.c, nsd/form.c, nsd/index.c, nsd/limits.c, nsd/modload.c,
	nsd/pathname.c, nsd/range.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclresp.c, nsd/url.c, nsdb/doc/mann/ns_db.man,
	nsdbtest/nsdbtest.c, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c:
	improve spelling

2018-07-24 21:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d1dd1173ddb)

	* doc/src/manual/adp-overview.man, doc/src/manual/main-history.man,
	doc/src/manual/tcl-overview.man,
	doc/src/naviserver/ns_adp_flush.man,
	doc/src/naviserver/ns_atsignal.man, doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_memoize.man, doc/src/naviserver/ns_time.man:
	improve spelling

2018-07-24 20:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d549a7691539)

	* nsd/tclset.c, nsd/tclvar.c:
	improve spelling

2018-07-24 20:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f258524b221)

	* nsdbtest/nsdbtest.c:
	improve type cleanness

2018-07-24 20:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5aa14cd34d02)

	* nsd/mimetypes.c:
	when a chartype is specified, never assume the mimetype is binary

2018-07-16 11:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44fc3d2b50d0)

	* nsthread/pthread.c:
	minor edits

2018-07-16 08:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d25ce04fb82)

	* nsd/tclcache.c:
	reduce variable scope, don't reference pointer without check of
	valid arguments

2018-07-16 08:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd22a7fe1498)

	* nsd/conn.c, nsd/nsd.h, nsd/tclhttp.c, nsd/tclinit.c, nsd/tclmisc.c,
	nsd/tclvar.c:
	reduce variable scopes, minor cleanup

2018-07-13 15:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1018d19e4541)

	* nsd/nsd.h, nsd/tclcrypto.c, nsd/tclinit.c:
	Add reporting of update interp operations when epoch is changed
	(might be an expensive operation)

2018-07-13 15:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8cf5b5dd520c)

	* openacs-config.tcl:
	improve formatting

2018-07-13 15:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (880c7004aa03)

	* nsd/init.tcl:
	check for epoch updates as well in cleanup phase (deallocate trace)
	to reduce latency for client requests

2018-07-13 15:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20693100cb2c)

	* nsd/cache.c:
	cache statistics: return hitrate as double instead of as integer

2018-07-05 00:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6fc5f6eebaae)

	* include/ns.h, nsd/conn.c, tests/ns_conn.test:
	use "ns_conn currentaddr" and "ns_conn currentport" instead of
	"ns_conn addr", since "ns_conn port" means actually the port
	specified literally in the request. the current* operations refer to
	the actual socket.

2018-07-05 00:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (233d29bb0944)

	* nsd/tclhttp.c:
	improve error handling, when connection is closed early and runs
	into a POLLHUP

2018-07-04 15:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d842e4a268fb)

	* openacs-config.tcl:
	remove obsolete information from documentation in sample config file

2018-07-04 15:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a4f35933dce)

	* nsd/tclcrypto.c:
	reduce potentialö warnings when compiled against a version of
	OpenSSL without OPENSSL_NO_EC defined

2018-07-04 15:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b53ae100c88)

	* nsd/tclvar.c, tests/ns_nsv.test:
	Add atomic operation "nsv_set -default ARRAY KEY VALUE". Add cases
	for regression test.

2018-07-03 12:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a71a1896a9cc)

	* tcl/ns_crypto.tcl:
	add ns_uuid function based on OpenSSL ns_crypto::randombytes

2018-07-02 19:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07dd0e252636)

	* nsd/tclhttp.c:
	add const declaration

2018-07-02 19:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a655adf1acd4)

	* nsd-config.tcl:
	simplify sampke config file for novices

2018-07-02 18:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ebb8b820c183)

	* include/nsthread.h:
	At least since visual studio 2012, MSCV has intptr_t and uintptr_t
	defined

2018-06-29 12:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a406c208199)

	* nsd-config.tcl, nsd/config.c, openacs-config.tcl:
	Add an optional argument "body" to "ns_section"

	This change allows us to brace the ns_params belonging to this
	section like in usual Tcl blocks. This has two advantages: a) it
	shows clearly, where the block ends b) when using an editor with
	automatic indentation, the log file looks nicer without mich work
	This change is fully backward compatible, old style config files
	continue to work

2018-06-28 14:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e0ab5a6d1550)

	* nsd/tclvar.c, tests/ns_nsv.test:
	add "-reset" option to nsv_set

2018-06-28 12:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f2c4fc35bb1d)

	* openacs-config.tcl:
	add section for nsstats, whitespace cleanup

2018-06-28 12:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (184ab1847ae3)

	* nsd/url.c, tests/ns_parseurl.test:
	use constantly capitalized URL

2018-06-27 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dabdfa9f415b)

	* tcl/fastpath.tcl:
	fix typo in filename

2018-06-27 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0074b3da4c47)

	* nsd/url.c:
	fix indentation

2018-06-27 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5363f177e0bb)

	* nsd/tclhttp.c:
	user braces in a more uniform way

2018-06-26 15:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d9483c67e4d7)

	* doc/src/man.css, doc/src/naviserver/ns_hmac.man,
	doc/src/naviserver/ns_md.man:
	Work on ns_crypto man page

2018-06-26 14:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (511054108a10)

	* doc/src/naviserver/ns_schedule_proc.man:
	remove duplicated brackets

2018-06-26 14:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b09ded42402)

	* doc/src/naviserver/nsv.man:
	improve man page

2018-06-26 14:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ee11ec0ba70)

	* doc/src/naviserver/ns_getform.man:
	remove duplicated word

2018-06-25 13:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a3a45ab158d)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tclmisc.c:
	ns_hash: provide a script-level interface for the HashStringKey
	function (very useful for e.g. cache partitioning)

2018-06-25 13:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (559cde9a85ad)

	* tcl/aolserver-openacs.tcl:
	warn after 100 instead of 200 ms about long locking calls

2018-06-20 11:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a5868501552b)

	* nsd/mimetypes.c:
	minor update of mime types based on actual IANA media types

2018-06-20 10:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (802f30437f88)

	* nsd/tclhttp.c:
	Don't reuqire content-type to be specified for ns_http requests
	containing a body or bodyfile (although providing it is recommended)

2018-06-18 13:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00d439419188)

	* nsd-config.tcl:
	fix pidfile entry in sample config file

2018-06-17 14:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72d0152d0e5b)

	* nsd/tclcrypto.c, nsssl/nsssl.c:
	add support for compiling NaviServer against versions of OpenSSL
	having EC support disabled

2018-06-17 11:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b851ea1135aa)

	* configure.ac:
	bump version number to 4.99.17d3

2018-06-17 11:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72b6f61f2341)

	* nsd/tclcrypto.c:
	make sure to initialize variables on all error paths either

2018-06-16 01:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5eecf53e3cce)

	* nsd/tclhttp.c, tests/ns_parseurl.test:
	fix URL parse, where URL with colon in the pathi was given, but no
	port provided (detected a port incorrectly)

2018-06-14 12:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (28b0f5cd8a9d)

	* tcl/nstrace.tcl:
	Address problem https://stackoverflow.com/questions/49031790/how-
	can-i-debug-a-tcl-8-6-error-in-clock-tcl Definition order in tcl
	namespaces might confuse Tcl (clock) internals

2018-06-11 20:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1d3b2bc28fe)

	* doc/src/manual/admin-install.man:
	fix documentation syntax

2018-06-11 19:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5191b5af996f)

	* nsd/conn.c:
	let "ns_conn isconnected" return false, when the connection is
	already closed. Otherwise we have to add a new subcommand "ns_conn
	closed", which seems somewhat odd (isconnected true and closed
	true?)

2018-06-11 10:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6349d6b6a89)

	* nsd/returnresp.c:
	imprive spelling

2018-06-11 10:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5015be89dda)

	* doc/src/naviserver/keyl.man, doc/src/naviserver/ns_absoluteurl.man,
	doc/src/naviserver/ns_addrbyhost.man,
	doc/src/naviserver/ns_adp_abort.man,
	doc/src/naviserver/ns_adp_append.man,
	doc/src/naviserver/ns_adp_argc.man,
	doc/src/naviserver/ns_adp_argv.man,
	doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_adp_break.man,
	doc/src/naviserver/ns_adp_close.man,
	doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_debug.man,
	doc/src/naviserver/ns_adp_dir.man,
	doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_exception.man,
	doc/src/naviserver/ns_adp_flush.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_adp_mime.man,
	doc/src/naviserver/ns_adp_mimetype.man,
	doc/src/naviserver/ns_adp_parse.man,
	doc/src/naviserver/ns_adp_puts.man,
	doc/src/naviserver/ns_adp_register.man,
	doc/src/naviserver/ns_adp_return.man,
	doc/src/naviserver/ns_adp_stats.man,
	doc/src/naviserver/ns_adp_tell.man,
	doc/src/naviserver/ns_adp_trunc.man,
	doc/src/naviserver/ns_after.man, doc/src/naviserver/ns_atclose.man,
	doc/src/naviserver/ns_atexit.man,
	doc/src/naviserver/ns_atshutdown.man,
	doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_base64.man, doc/src/naviserver/ns_cache.man,
	doc/src/naviserver/ns_cancel.man, doc/src/naviserver/ns_chan.man,
	doc/src/naviserver/ns_charsets.man,
	doc/src/naviserver/ns_checkurl.man, doc/src/naviserver/ns_cond.man,
	doc/src/naviserver/ns_config.man, doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_conncptofp.man,
	doc/src/naviserver/ns_cookie.man, doc/src/naviserver/ns_critsec.man,
	doc/src/naviserver/ns_crypt.man, doc/src/naviserver/ns_driver.man,
	doc/src/naviserver/ns_encodingforcharset.man,
	doc/src/naviserver/ns_env.man, doc/src/naviserver/ns_event.man,
	doc/src/naviserver/ns_filestat.man,
	doc/src/naviserver/ns_fmttime.man,
	doc/src/naviserver/ns_ftruncate.man,
	doc/src/naviserver/ns_gifsize.man, doc/src/naviserver/ns_gmtime.man,
	doc/src/naviserver/ns_guesstype.man,
	doc/src/naviserver/ns_hashpath.man, doc/src/naviserver/ns_hmac.man,
	doc/src/naviserver/ns_hostbyaddr.man,
	doc/src/naviserver/ns_hrefs.man, doc/src/naviserver/ns_http.man,
	doc/src/naviserver/ns_httptime.man, doc/src/naviserver/ns_ictl.man,
	doc/src/naviserver/ns_imgmime.man,
	doc/src/naviserver/ns_imgsize.man,
	doc/src/naviserver/ns_imgtype.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_internalredirect.man,
	doc/src/naviserver/ns_job.man, doc/src/naviserver/ns_jpegsize.man,
	doc/src/naviserver/ns_kill.man, doc/src/naviserver/ns_library.man,
	doc/src/naviserver/ns_localtime.man,
	doc/src/naviserver/ns_locationproc.man,
	doc/src/naviserver/ns_log.man, doc/src/naviserver/ns_md.man,
	doc/src/naviserver/ns_md5.man, doc/src/naviserver/ns_mktemp.man,
	doc/src/naviserver/ns_moduleload.man,
	doc/src/naviserver/ns_modulepath.man,
	doc/src/naviserver/ns_mutex.man,
	doc/src/naviserver/ns_normalizepath.man,
	doc/src/naviserver/ns_pagepath.man,
	doc/src/naviserver/ns_parseargs.man,
	doc/src/naviserver/ns_parseheader.man,
	doc/src/naviserver/ns_parsehttptime.man,
	doc/src/naviserver/ns_parsequery.man,
	doc/src/naviserver/ns_parseurl.man, doc/src/naviserver/ns_pause.man,
	doc/src/naviserver/ns_pngsize.man,
	doc/src/naviserver/ns_purgefiles.man,
	doc/src/naviserver/ns_quotehtml.man, doc/src/naviserver/ns_rand.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_requestauthorize.man,
	doc/src/naviserver/ns_resume.man, doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_rlimit.man,
	doc/src/naviserver/ns_rollfile.man,
	doc/src/naviserver/ns_runonce.man, doc/src/naviserver/ns_rwlock.man,
	doc/src/naviserver/ns_schedule.man, doc/src/naviserver/ns_sema.man,
	doc/src/naviserver/ns_server.man,
	doc/src/naviserver/ns_serverpath.man,
	doc/src/naviserver/ns_serverrootproc.man,
	doc/src/naviserver/ns_set.man,
	doc/src/naviserver/ns_setprivileges.man,
	doc/src/naviserver/ns_sha1.man,
	doc/src/naviserver/ns_shortcut_filter.man,
	doc/src/naviserver/ns_shutdown.man, doc/src/naviserver/ns_sleep.man,
	doc/src/naviserver/ns_sls.man, doc/src/naviserver/ns_sockaccept.man,
	doc/src/naviserver/ns_sockblocking.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockcheck.man,
	doc/src/naviserver/ns_socketpair.man,
	doc/src/naviserver/ns_socklisten.man,
	doc/src/naviserver/ns_socklistencallback.man,
	doc/src/naviserver/ns_socknonblocking.man,
	doc/src/naviserver/ns_socknread.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_striphtml.man,
	doc/src/naviserver/ns_symlink.man, doc/src/naviserver/ns_time.man,
	doc/src/naviserver/ns_truncate.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_url2file.man,
	doc/src/naviserver/ns_urldecode.man,
	doc/src/naviserver/ns_urlencode.man,
	doc/src/naviserver/ns_urlspace.man,
	doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man, doc/src/naviserver/ns_write.man,
	doc/src/naviserver/ns_writecontent.man,
	doc/src/naviserver/ns_writer.man, doc/src/naviserver/nsv.man,
	doc/src/naviserver/returnstatus-cmds.man, nsdb/doc/mann/ns_db.man,
	nslog/doc/mann/ns_accesslog.man, nsperm/doc/mann/ns_perm.man,
	nsproxy/doc/mann/ns_proxy.man:
	Improve spelling

2018-06-11 10:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (165407d169b1)

	* doc/src/naviserver/ns_register.man:
	ns_register_filter: add missing option "-first" to documentation

2018-06-11 09:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a7224c85718)

	* nsd/url.c:
	make logic more explicit

2018-06-11 08:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7c812205f50)

	* nsd/queue.c:
	move initialization after nonnull assert

2018-06-11 08:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b7325b63e121)

	* include/ns.h:
	sort Ns_Conn* method prototypes alphabetically

2018-06-09 13:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ce26b1a696d3)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tclcrypto.c:
	Name authenticated encryption and decryption commands
	ns_crypto::aead (proper name Authenticated Encryption with
	Associated Data). Provide different names for encrytion and
	decryption (ns_crypto::aead::encrypt and ns_crypto::aead::decrypt)

2018-06-09 11:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a6f98a58711)

	* doc/src/naviserver/ns_hmac.man, doc/src/naviserver/ns_md.man:
	updated list of available digests in recent versions of OpenSSL

2018-06-09 10:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (398790d60560)

	* nsd/tclcrypto.c, tcl/ns_crypto.tcl:
	check, whether cipher support the required mode (e.g. GCM vs. CCM)

2018-06-07 13:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8169ee11d812)

	* nsd/tclcrypto.c:
	added decryption to provide Authenticated Encryption and Decryption
	(GCM mode); better cmd name is still needed

2018-06-06 10:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c31648ec9c04)

	* nsd/tclcrypto.c:
	remove duplicated (comment) line

2018-06-06 10:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e193f2550eb3)

	* nsd/nsopenssl.h: new file.
	* nsd/ns_openssl.h: deleted file.
	* nsd/ns_openssl.h, nsd/nsopenssl.h:
	add proper include file

2018-06-06 10:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f30b2cabe347)

	* nsd/ns_openssl.h, nsd/tclcrypto.c: new file.
	* nsd/Makefile, nsd/ns_openssl.h, nsd/nsd.h, nsd/tclcmds.c,
	nsd/tclcrypto.c, nsd/tls.c:
	Add new crypto function "ns_crypto::randombytes" to return n random
	bytes as provided by OpenSSL. Refactor code between crypto and tls
	specific functions.

2018-06-06 10:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b1fbdb9d2a46)

	* nsd/request.c:
	reduce number of returns before end of function

2018-06-06 10:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e4035eb4f2f)

	* tests/ns_conn.test:
	adapt regression test due to added option in error message

2018-06-01 09:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6a1e31d87fc5)

	* nsd/conn.c, nsd/op.c:
	get the server-side IP address via getsockname()

2018-06-01 09:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ffd03e356488)

	* doc/src/naviserver/ns_conn.man, include/ns.h, nscgi/nscgi.c,
	nsd/conn.c, nsd/queue.c, nsd/tclmisc.c, nslog/nslog.c:
	Add "ns_conn addr": previously, we had "ns_conn peeraddr", "ns_conn
	peerport" and "ns_conn port" but no "ns_conn addr". now this is also
	available for symmetry.

	Similarly, Ns_ConnAddr() was added as new API function.
	Ns_ConnPeer() was marked deprecated, Ns_ConnPeerAddr() should be
	used instead.

2018-05-31 12:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a29988ab2b9)

	* nsssl/nsssl.c:
	nsssl: add module name to locak name to distinguish locks in case
	multiple nsssl drivers are loaded

2018-05-31 12:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8d411716018)

	* openacs-config.tcl:
	add "UserInfoCacheSize" to sample config file

2018-05-25 12:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63eded7481d8)

	* NEWS, README, doc/src/manual/admin-install.man, include/nsthread.h,
	nsd-config.tcl, nsd/crypt.c, nsd/driver.c, nsd/log.c:
	improve spelling of proper names

2018-05-24 20:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0344a12f8d4a)

	* nsd/tls.c:
	::ns_crypto::enc return a dict containing "bytes" and "tag" as the
	interp result (instead of just the bytes)

2018-05-24 08:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f0ec7086c52)

	* nsssl/tests/modules/testhttps.tcl,
	tests/testserver/modules/client.tcl, tests/testserver/modules
	/listencallback-procs.tcl, tests/testserver/modules/testhttp.tcl:
	whitespace cleanup

2018-05-24 08:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (258728f4ec62)

	* nsd-config.tcl, nsperm/htaccess.tcl, tcl/ns_crypto.tcl:
	improve comments

2018-05-23 12:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a296f340335e)

	* nsd/str.c:
	remove of version dependency was too optimistic, reintroduce version
	define removed yesterday

2018-05-22 22:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59d66a6ce26b)

	* nsd/tls.c:
	be more careful with pointern to size_t

2018-05-22 16:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20620406a23c)

	* nsd/tls.c:
	fix compatibility issue in hkdf with linux (pointer to int vs
	pointer to size_t)

2018-05-22 13:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0097da6fe2aa)

	* tcl/compat.tcl, tcl/file.tcl, tests/adp.test, tests/compat.test,
	tests/cookies.test, tests/encoding.test, tests/errordoc.test,
	tests/http.test, tests/http_byteranges.test,
	tests/http_chunked.test, tests/http_keep.test,
	tests/http_persistent.test, tests/init.test, tests/keylist.test,
	tests/ns_accesslog.test, tests/ns_addrbyhost.test,
	tests/ns_adp_compress.test, tests/ns_base64.test,
	tests/ns_cache.test, tests/ns_cond.test, tests/ns_config.test,
	tests/ns_conn.test, tests/ns_conn_host.test, tests/ns_crypt.test,
	tests/ns_crypto.test, tests/ns_driver.test, tests/ns_env.test,
	tests/ns_file.test, tests/ns_gifsize.test, tests/ns_hashpath.test,
	tests/ns_hostbyaddr.test, tests/ns_hrefs.test,
	tests/ns_httptime.test, tests/ns_image.test, tests/ns_info.test,
	tests/ns_jpegsize.test, tests/ns_limits.test,
	tests/ns_listencallback.test, tests/ns_log.test, tests/ns_md5.test,
	tests/ns_mime.test, tests/ns_nsv.test, tests/ns_pagepath.test,
	tests/ns_parseargs.test, tests/ns_parseurl.test,
	tests/ns_proxy.test, tests/ns_reflow_text.test,
	tests/ns_register_filter.test, tests/ns_register_proc.test,
	tests/ns_schedule.test, tests/ns_server.test,
	tests/ns_serverpath.test, tests/ns_set.test, tests/ns_sha1.test,
	tests/ns_sls.test, tests/ns_thread.test, tests/ns_thread_crash.test,
	tests/ns_urlencode.test, tests/ns_urlspace.test,
	tests/ns_uuencode.test, tests/ns_writer.test, tests/nsdb.test,
	tests/progress.test, tests/tclconnio.test, tests/tclresp.test,
	tests/timeout.test, tests/url2file.test:
	whitespace cleanup of .test and .tcl files

2018-05-22 13:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f6652ef5ef5)

	* tests/ns_crypto.test:
	improve documentation in ns_crypto test file

2018-05-22 12:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ebff8089258)

	* tests/ns_base64.test, tests/ns_crypto.test:
	add regression tests for "::ns_crypto::md hkdf ..."

2018-05-22 12:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bf08c16899dc)

	* tcl/ns_crypto.tcl:
	whitespace cleanup

2018-05-22 11:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0237e10d5f0f)

	* nsd/str.c, nsd/tclmisc.c:
	make behavior of handling binary characters closer to Tcl

2018-05-22 11:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (197565b4699a)

	* tests/ns_base64.test:
	extend base64 test cases, including 3-byte UTF-8 characters

2018-05-22 11:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (32262be7a083)

	* tests/ns_cache.test:
	ease association with partial operation in complex test case

2018-05-22 10:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41c50b832aae)

	* tests/ns_base64.test: new file.
	* tests/ns_base64encode.test: deleted file.
	* tests/ns_base64.test, tests/ns_base64encode.test,
	tests/ns_mime.test, tests/ns_uuencode.test:
	collect all base64* tests in ns_base64.tst

2018-05-22 09:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29ef79b0d9b6)

	* tests/ns_cache.test:
	ease association with partial operation in complex test case

2018-05-21 21:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ecd14a78129)

	* nsd/tclimg.c:
	make compiler and fb infer happy

2018-05-21 21:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c547bd9f31e2)

	* NEWS:
	improve wordings

2018-05-21 21:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b15a2e71654d)

	* nsd/str.c, nsd/tls.c:
	address differences with binary daty between tcl 8.7 and 8.6

2018-05-21 12:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f807e3eae6a8)

	* nsd/tls.c:
	remove dead assignments

2018-05-21 11:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39f2330d5e3d)

	* nsd/tls.c:
	add alternavite shared secret derivation based on EVP_PKEY based on
	recommended "high-level interface"

2018-05-20 17:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (418fb927ad7b)

	* nsd/tls.c, tcl/ns_crypto.tcl:
	add "ns_crypto::eckey sharedsecret -pem ... -encoding ...
	PUBKEYSTRING"

2018-05-20 16:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (684f93e4d827)

	* doc/src/manual/admin-maintenance.man, doc/src/manual/tcl-lib-
	file.man, doc/src/manual/tcl-lib-nstrace.man,
	doc/src/naviserver/ns_fmttime.man, doc/src/naviserver/ns_http.man,
	doc/src/naviserver/ns_httpget.man, doc/src/naviserver/ns_ictl.man,
	doc/src/naviserver/ns_job.man, doc/src/naviserver/ns_kill.man,
	doc/src/naviserver/ns_mutex.man, doc/src/naviserver/ns_set.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_time.man, doc/src/naviserver/ns_tmpnam.man,
	nssock/doc/mann/nssock.man, nsssl/dhparams.h:
	improve documentation

2018-05-20 15:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (698ee61f4352)

	* nsd/auth.c, nsd/driver.c, nsd/index.c, nsd/range.c, nsd/sock.c,
	nsd/str.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tcljob.c,
	nsd/tclsock.c, nsd/tclxkeylist.c, nsd/tls.c, nsd/urlspace.c,
	nsdb/dbdrv.c, nsdb/dbinit.c:
	improve comments

2018-05-20 15:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7277dace118d)

	* openacs-config.tcl:
	adjust to current OpenACS

2018-05-20 15:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7b70736fca0)

	* nsd/connio.c:
	- add log entry for debug(request) when connection closes

2018-05-18 10:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b3fffa9b2cc)

	* nsd/request.c:
	remove unused variable

2018-05-18 08:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f679010616d9)

	* nsd/tls.c:
	let naviserver compile with OpenSSL before 1.1.0

2018-05-17 12:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20e7038acb76)

	* nsd/tls.c:
	new function ns_crypto::eckey generate -name prime256v1 -pem
	/tmp/foo.pem some minor refactoring

2018-05-17 09:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d1b2c590cd24)

	* doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_driver.man, doc/src/naviserver/ns_rlimit.man,
	doc/src/naviserver/ns_urlspace.man,
	doc/src/naviserver/ns_writer.man, nsd/log.c, nsd/server.c:
	improve spelling

2018-05-17 09:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (188f0114b3ae)

	* nsd/tls.c:
	use GetEckeyFromPem instead of GetPkeyFromPem

2018-05-16 14:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9f4b0310286)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tls.c:
	- extend crypto support for elliptic curves ease key handling and
	reformatting ns_crypto::eckey pub -pem
	/usr/local/ns/modules/vapid/prime256v1_key.pem -encoding base64url
	ns_crypto::eckey priv -pem
	/usr/local/ns/modules/vapid/prime256v1_key.pem -encoding base64url
	ns_crypto::eckey import -encoding base64url \
	      -string [ns_base64urldecode BDwwYm4O5dZG9SO6Vaz168iDLGWMmitkj5LFvunvM
	fgmI2fZdAEaiHTDfKR0fvr0D3V56cSGSeUwP0xNdrXho5k]

2018-05-16 07:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d2838c557822)

	* nsd/tls.c:
	fix output for encoding output option "binary"

2018-05-15 09:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c96d5c36302)

	* nsd/exec.c, nsd/set.c, nsd/tclimg.c, nsd/tclobjv.c,
	nsproxy/nsproxylib.c:
	remove dead assignments

2018-05-13 14:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68173002044c)

	* nsd/url2file.c:
	don't write if-statements in a single line

2018-05-13 14:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d25b8b0a89f)

	* nsd/adpcmds.c, nsd/adpparse.c, nsd/adprequest.c, nsd/connchan.c,
	nsd/connio.c, nsd/driver.c, nsd/exec.c, nsd/log.c, nsd/queue.c,
	nsd/range.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclresp.c, nsd/tclsched.c,
	nsd/tclsock.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/tls.c,
	nsd/unix.c, nsd/url2file.c, nsd/urlencode.c, nsd/urlopen.c,
	nsd/urlspace.c, nsperm/nsperm.c, nsproxy/nsproxylib.c,
	nsssl/nsssl.c:
	remove dead assignments

2018-05-13 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a6d62dededd1)

	* nsd/exec.c:
	windows: Incorrect handle was used to perform operations on the
	process in Ns_WaitForProcess (many thanks to Oleg Oleinik)

2018-05-13 12:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ae1c58f6f7c6)

	* nsd/fd.c:
	make sure to create temporary files correctly under windows (many
	thanks to Oleg Oleinik)

2018-05-13 12:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (01474e066648)

	* nsd/conn.c, nsd/connchan.c:
	target of Ns_ObjvBool has to be int (bool can't be used, since
	converter assuems int). Many thanks to Oleg Oleinik.

2018-05-13 12:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b80215e96e9b)

	* nsd/urlencode.c:
	destination assumed to be int in Ns_ObjvIndex (many thanks to Oleg
	Oleinik)

2018-05-12 12:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (95f20058ab05)

	* nsd/tclmisc.c, tests/ns_base64encode.test:
	fix regression thest for base64encode with embedded zeros

2018-05-12 11:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (28ce95e978c4)

	* include/ns.h, nsd/fastpath.c:
	prefer "fileName" over "file" as name of argument

2018-05-12 11:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7596b6d0265)

	* nsd-config.tcl, openacs-config.tcl:
	recomment "-Z" as default option for brotli

2018-05-12 11:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7964c3d830d5)

	* doc/src/manual/admin-install.man:
	improve documentation

2018-05-11 13:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ee88f1031e1)

	* nsd/request.c:
	remove escaped printf statement

2018-05-11 13:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08a2920bb045)

	* doc/src/naviserver/ns_conn.man, doc/src/naviserver/ns_return.man,
	include/ns.h, nsd-config.tcl, nsd/conn.c, nsd/driver.c,
	nsd/fastpath.c, nsd/nsd.h, nsd/request.c, nsd/tclmisc.c, openacs-
	config.tcl, tcl/fastpath.tcl, tests/ns_adp_compress.test,
	tests/ns_base64encode.test, tests/ns_conn.test:
	Support brotli compression format (RFC 7932) for static content
	delivery

	Brotli achieves better result for compression for typical web
	content compared to e.g. gzip and is supported by most current
	servers. The definition of static content delivery is exactly the
	same as for static gzip content.

	new configuration options for ns/fastpath: brotli_static: should
	static brotli delivery checked? brotli_refresh: should outdated
	brotli compressed files be refreshed? brotli_cmd: OS-level command
	with options used for brotli compression

	-rw-r--r-- 1 neumann wheel 664 Jan 2 13:57
	ns/pages/doc/naviserver/man.css.br
	-rw-r--r-- 1 neumann wheel 2242 Jan 2 13:57
	ns/pages/doc/naviserver/man.css
	-rw-r--r-- 1 neumann wheel 843 May 11 12:28
	ns/pages/doc/naviserver/man.css.gz

	new subcommand "ns_conn acceptedcompression" to return accepted
	compressions for the current connection

2018-05-11 13:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f6a74a00534)

	* tests/ns_reflow_text.test:
	reduce verbosity

2018-05-11 12:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b632392a497)

	* index.adp:
	improve markup of default index page

2018-05-11 08:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a704e74e975)

	* nsd/tls.c:
	remove debugging output and remove unnecessary trailing NULLs

2018-05-08 17:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (373ac4a2a4c4)

	* nsd/tclhttp.c:
	fix position of break command

2018-05-07 22:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a9d660f0e32e)

	* nsd/server.c:
	provide name for per-server urlspace lock

2018-05-05 10:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65a8b62d0b1d)

	* doc/src/manual/admin-install.man, nsd/connio.c:
	minor cleanuü

2018-05-05 10:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ae544aa061e)

	* include/nsthread.h:
	extend list of platforms for manual provisioning of __PRIPTR_PREFIX
	in case it is not defined

2018-05-05 09:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e185b5d5156)

	* nsd/tls.c:
	fix typo

2018-05-05 09:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43cdd8c1979a)

	* doc/src/naviserver/ns_getcontent.man,
	doc/src/naviserver/ns_queryexists.man,
	doc/src/naviserver/ns_queryget.man,
	doc/src/naviserver/ns_querygetall.man,
	doc/src/naviserver/ns_quotehtml.man, doc/src/naviserver/ns_rand.man:
	improve documentation markup

2018-05-05 08:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (553e11756b38)

	* tcl/form.tcl:
	fix ns_parseformfile to handle also www-form-urlencoded (in
	additions to multipart/form-data)

2018-05-05 08:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7392ef5befc0)

	* nsd/set.c:
	align output of "ns_set print" with documented behavior

2018-05-05 08:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e19c628269e7)

	* doc/src/naviserver/ns_set.man:
	fix broken markup

2018-05-05 08:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb84940591b5)

	* doc/src/naviserver/ns_parsequery.man:
	add cross reference

2018-05-05 08:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (88ba874e870e)

	* doc/src/naviserver/ns_getform.man:
	improved man page

2018-05-05 08:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e341edbb4333)

	* doc/src/naviserver/ns_getcontent.man: new file.
	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_getcontent.man:
	add man page for previously undocumented command

2018-05-05 08:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (427ba5627d5f)

	* doc/src/naviserver/ns_base64.man: new file.
	* doc/src/naviserver/ns_base64.man:
	add consolidated man page

2018-05-04 21:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08b4328dcc6b)

	* nsd/tclhttp.c:
	minor code cleanup

2018-05-04 20:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54cb955d0497)

	* include/ns.h:
	provide consistent spelling of proper names

2018-05-04 20:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f96a9e651fb)

	* include/ns.h, nsd/tclhttp.c:
	Provide consistent behavior for HTTP and HTTPS, when a connection to
	a valid host NOT listening on the specified port is tried.

2018-05-03 13:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (431e35eb8994)

	* nsd/adprequest.c, nsd/connchan.c, nsd/dstring.c, nsd/queue.c,
	nsd/tclcache.c, nsd/tclmisc.c, nsd/tcltime.c, nsdb/dbinit.c,
	nslog/nslog.c, nsperm/nsperm.c, nsproxy/nsproxylib.c,
	nsthread/mutex.c, nsthread/nsthreadtest.c, nsthread/thread.c:
	use format macro PRId64 for variables of type int64_t

2018-05-02 11:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d964e2868d3)

	* doc/src/naviserver/ns_base64decode.man,
	doc/src/naviserver/ns_base64encode.man: deleted file.
	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_base64decode.man,
	doc/src/naviserver/ns_base64encode.man,
	doc/src/naviserver/ns_sendmail.man,
	doc/src/naviserver/ns_uuencode.man:
	document ns_base64urldecode and ns_base64urlencode in a common
	command page with ns_base64decode and ns_base64encode to show
	differences

2018-04-30 10:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f407862ee4ca)

	* nsd/request.c, nsd/url.c, nsd/urlencode.c, nsd/urlspace.c:
	improve grammar

2018-04-30 10:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5816fa30b228)

	* nsperm/doc/mann/nsperm.man:
	improve grammar

2018-04-30 10:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8cbb8d21432)

	* doc/src/manual/adp-overview.man, doc/src/manual/main-features.man,
	doc/src/manual/tcl-libraries.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_httpopen.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_urlspace.man:
	improve grammar

2018-04-30 10:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d6298c7a04d)

	* nsd/cache.c:
	reduce implicit conversions

2018-04-28 08:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (079a6155bf04)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/adpeval.c, nsd/adprequest.c,
	nsd/conn.c, nsd/cookies.c, nsd/driver.c, nsd/encoding.c, nsd/exec.c,
	nsd/fastpath.c, nsd/fd.c, nsd/info.c, nsd/log.c, nsd/modload.c,
	nsd/nsconf.c, nsd/nsmain.c, nsd/nswin32.c, nsd/op.c, nsd/pathname.c,
	nsd/pidfile.c, nsd/request.c, nsd/return.c, nsd/returnresp.c,
	nsd/rollfile.c, nsd/server.c, nsd/tclcallbacks.c, nsd/tclhttp.c,
	nsd/tclinit.c, nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclrequest.c,
	nsd/tclsched.c, nsd/url.c, nsd/url2file.c, nsd/urlopen.c,
	nsd/urlspace.c, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c,
	nsperm/nsperm.c, nssock/nssock.c, nsssl/nsssl.c:
	make definition of argument after last typed argument more
	consistent

2018-04-27 21:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a9647a17b2b1)

	* nsd/tls.c:
	* add HMAC-based Extract-and-Expand Key Derivation Function (HKDF)
	RFC 5869 https://tools.ietf.org/html/rfc5869 ::ns_crypto::md hkdf
	-digest sha256 ....
	 -> requires compilation with OpenSSL 1.1.0 or newer
	* add binary output encoding for the crypto functions

2018-04-27 16:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4494910694f2)

	* Makefile, include/Makefile.global.in, nsd/tls.c:
	fix memory leak, return raw signature, minor cleanup

2018-04-27 15:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8573339a40d3)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tclmisc.c, nsd/uuencode.c,
	tests/ns_mime.test:
	implement ns_base64url{encode|decode} as native commands

	as alternative to the new commands, a flag would have been as well
	possible. however, since encoding commands are fed with often
	unpredicted data, encoding data starting with a dash might lead to
	confusions. so, for higher backwards compatibility, two new commands
	were added.

	extended regression test to cover interesting cases

2018-04-26 14:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (343c2dd3c195)

	* include/ns.h, nsd/nsd.h, nsd/tclcmds.c, nsd/tls.c, nsd/uuencode.c,
	tests/ns_crypto.test:
	Added "-encoding hex|base64url|base64" option for output encoding
	for the crypto function. Previously, all these functions returned the
	result in "hex" format. If the option is not specified, the result
	is the same as before (hex). The encoding option was added to the
	following functions:
	- ns_crypto::hmac string
	- ns_crypto::hmac get
	- ns_crypto::md string
	- ns_crypto::md get
	- ns_crypto::md vapidsign
	- ns_crypto::enc

	The latter two functions are experimental TODO: documentation and
	test cases.

2018-04-26 09:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2b88612cf3a)

	* nsd/tclmisc.c:
	reduce implicit type conversions

2018-04-25 11:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c3b651624d97)

	* openacs-config.tcl:
	remove duplicated word

2018-04-25 11:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9634d541e7cd)

	* include/ns.h, include/nsthread.h:
	improce source code documentation: remove duplicated words

2018-04-25 11:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f0beade436a)

	* nsdb/dbtcl.c, nsperm/nsperm.c, nsthread/nsthreadtest.c:
	improve documentation: remove duplicated words

2018-04-25 11:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bcf7807c811b)

	* nsd/cookies.c, nsd/driver.c, nsd/set.c, nsd/tclfile.c,
	nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c, nsd/tclobjv.c,
	nsd/tclset.c, nsd/urlspace.c:
	improve source code documentation: remove repeated words

2018-04-25 11:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e61461c2c9d3)

	* doc/src/manual/tcl-overview.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_cookie.man, doc/src/naviserver/ns_hotp.man,
	doc/src/naviserver/ns_ictl.man, doc/src/naviserver/ns_job.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_setexpires.man,
	doc/src/naviserver/ns_thread.man, doc/src/naviserver/ns_totp.man,
	doc/src/naviserver/nsv.man:
	improve documentation

2018-04-24 21:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9da7923d0b2)

	* nsd-config.tcl:
	add standard environment variable to sample config file

2018-04-24 21:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (71dce8ec7c8d)

	* nsd-config.tcl:
	set environment variable RANDFILE to a sensible value for NaviServer
	to avoid surprises, when openssl is called from the server

2018-04-23 14:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e191d84cafbe)

	* nsd/adpcmds.c, nsd/tclcmds.c, tcl/compat.tcl:
	implement deprecated ns_adp_eval and ns_adp_safeeval scripted based
	on the much more generic and flexible ns_adp_parse (was already
	changed in from documentation)

2018-04-23 09:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ea56bfdab45)

	* include/nscheck.h, nsd/driver.c, nsd/random.c, nsd/tclxkeylist.c:
	fix typos

2018-04-23 08:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba340b974093)

	* nsd/tclcache.c, nsd/tclsock.c, nsd/tcltime.c, nslog/nslog.c,
	nsproxy/nsproxylib.c:
	Don't pass implementation-defined NULL after the last typed argument
	to a variadic function

2018-04-23 08:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a43d654ce3ed)

	* nscgi/nscgi.c:
	move variable initializatiion aftr nonnull asserts

2018-04-22 20:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5b7fb92c0ec)

	* sample-config.tcl.in:
	fix typo

2018-04-22 20:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b17fe027f0b)

	* contrib/examples/writer.tcl:
	fix typo

2018-04-18 14:46 +0200  Zoran Vasiljevic  <zv@archiware.com>  (632fb5fe907a)

	* nsd/tclimg.c:
	Added some copyright trivia.

2018-04-16 09:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7922122431e)

	* doc/src/naviserver/ns_adp_eval.man,
	doc/src/naviserver/ns_adp_safeeval.man: deleted file.
	* doc/src/manual/adp-overview.man, doc/src/naviserver/ns_adp_argc.man,
	doc/src/naviserver/ns_adp_argv.man,
	doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_adp_eval.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_adp_safeeval.man:
	improve documentation

2018-04-08 09:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (452a6acb94f4)

	* bitbucket-install.tcl, contrib/examples/upload.tcl, nsd-config.tcl,
	nsdb/util.tcl, nsperm/htaccess.tcl, tcl/form.tcl, tcl/sendmail.tcl,
	tests/testserver/modules/client.tcl,
	tests/testserver/modules/testhttp.tcl:
	modernize tcl code

2018-04-08 08:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f34fb8868bb)

	* nsd/tclhttp.c:
	reduce number of return statements before end of function

2018-04-08 08:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (989ad929e339)

	* tcl/aolserver-openacs.tcl:
	report version of serializer during startup

2018-04-01 17:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (70b20129e47b)

	* nsd/nswin32.c, nsd/tclresp.c:
	fix typos

2018-03-28 10:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba92dbec90af)

	* doc/src/naviserver/ns_register.man, nslog/nslog.c, nsperm/nsperm.c:
	fix typos

2018-03-15 13:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b28ab08d5d5c)

	* nsd/tclmisc.c, tests/ns_reflow_text.test:
	Omit first prefix when "-offset" is used

2018-03-15 12:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56a3bf199886)

	* nsd/tclmisc.c, tests/ns_reflow_text.test:
	Extend ns_reflow_text with optiional argument "-offset" to support
	e.g. incremental output

2018-03-13 09:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a89feaf424cf)

	* configure.ac:
	bump version number

2018-03-11 16:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (972a53c3e0cd)

	* tests/ns_reflow_text.test:
	fix typo

2018-03-09 09:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b1a37d3aa945)

	* nsd/cache.c:
	whitespace cleanup

2018-03-09 09:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (329c6ba44684)

	* nsd/cache.c:
	improve warning message (it is easier to track hash keys than
	values)

2018-03-09 09:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d172b021bd50)

	* nsd/queue.c:
	add comment

2018-03-05 10:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c9ee93a2aa3)

	* nsd/tclmisc.c, tests/ns_reflow_text.test:
	ns_reflow_text: Improve handling for overflow lines, extend
	regression test

2018-03-05 10:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (93b5405a75a4)

	* nsd/connio.c, nsd/tclhttp.c:
	fix typos

2018-03-03 16:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f7dd673d413)

	* nsproxy/nsproxylib.c, nsssl/nsssl.c:
	Prefer Tcl_DString over Ns_DString

2018-03-03 16:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54c6c89585c5)

	* nslog/nslog.c:
	whitespace changes

2018-03-03 16:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03620bcffa20)

	* nslog/nslog.c:
	prefer Tcl_DString over Ns_DString

2018-03-03 16:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf1912223dfd)

	* nsd/config.c:
	Prefer Tcl_DString over Ns_DString

2018-03-01 10:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a7804e3c029d)

	* include/ns.h, nsd/cache.c, nsd/tclcache.c:
	improve results of [ns_cache_stats -contents ...]

	- return key and list of values (to ease association between entry
	and statistics; previously, guesswork was needed)
	- return additionally reuse count

	One can easily now check,
	- what are the hottest entries in a cache (effected most by a long
	lock)
	- what are the lease used entries (is it worth caching these?)
	- what are the largest entries in a cache, etc.

	Example usage: set stats [ns_cache_stats -contents util_memoize]
	join [lsort -decreasing -integer -index 2 $stats] \n

2018-03-01 10:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca40398d3283)

	* tests/ns_reflow_text.test: new file.
	* tests/ns_reflow_text.test:
	extend regression test

2018-03-01 01:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (417b6f570f75)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tclmisc.c:
	Add experimental command ns_reflow_text, since Tcl solutions are
	surprisingly slow on largish input

2018-02-22 13:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f16e8c1ee94)

	* include/ns.h, nsd/cls.c, nsd/nsd.h, nsd/sls.c, nsd/tclcache.c,
	nsd/tclmisc.c, nsd/tclvar.c, nsthread/thread.h:
	add "pure" attributes, sort prototypes for Ns_Conn alphabetically

2018-02-19 19:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7162eebfb7b)

	* openacs-config.tcl:
	provide subsite based error pages

2018-02-19 13:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (908fa2bf93f0)

	* include/ns.h, nsd/form.c, nsd/nsd.h:
	add "pure" specifier

2018-02-19 13:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3774f838c8fe)

	* nsd/driver.c:
	align format speficier to avoid warnings with most recent changes in
	tcl 8.7a2

2018-02-14 10:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7010cbd50896)

	* nsdb/dbtcl.c:
	bugfix for deprecated command: fix fetching of handle

2018-02-14 09:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a7f94057f3d7)

	* nsd/tclhttp.c:
	Make sure, a non-null assertion is not violated in error case

2018-02-13 20:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1b3aaacbbbf)

	* nsd/tclhttp.c:
	reduce implicit conversions

2018-02-13 20:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cadcd68186db)

	* include/ns.h, nscp/nscp.c, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adpparse.c, nsd/adprequest.c, nsd/auth.c, nsd/config.c,
	nsd/conn.c, nsd/connchan.c, nsd/cookies.c, nsd/driver.c,
	nsd/encoding.c, nsd/fastpath.c, nsd/form.c, nsd/httptime.c,
	nsd/info.c, nsd/limits.c, nsd/log.c, nsd/mimetypes.c, nsd/modload.c,
	nsd/nsd.h, nsd/nsmain.c, nsd/pathname.c, nsd/progress.c,
	nsd/queue.c, nsd/quotehtml.c, nsd/random.c, nsd/set.c, nsd/sls.c,
	nsd/tclcache.c, nsd/tclcallbacks.c, nsd/tclconf.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclrequest.c,
	nsd/tclresp.c, nsd/tclsched.c, nsd/tclset.c, nsd/tclsock.c,
	nsd/tclthread.c, nsd/tcltime.c, nsd/tclvar.c, nsd/tclxkeylist.c,
	nsd/tls.c, nsd/url.c, nsd/url2file.c, nsd/urlencode.c,
	nsd/urlopen.c, nsd/urlspace.c, nsdb/dbtcl.c, nslog/nslog.c,
	nsperm/nsperm.c, nsproxy/nsproxylib.c, nsssl/nsssl.c,
	nsthread/nsthreadtest.c:
	Provide compatibility with Tcl 8.7.2 (removed CONST and VOID macros)

2018-02-12 20:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e318a3be1524)

	* include/ns.h, nsd/task.c, nsd/tclhttp.c:
	experimental support for "ns_http stats"

2018-02-12 10:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (757947888b98)

	* doc/src/naviserver/ns_quotehtml.man:
	Fix quoting in man page for ns_quotehtml, add keyword "encoding"

2018-02-05 12:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f9b67f3de04b)

	* configure.ac:
	bump version number to 4.99.17d1

2018-02-05 12:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df2c4362fd00)

	* doc/src/naviserver/ns_http.man, nsd/tclhttp.c:
	return uniform results for "ns_http wait" and "ns_http run" in form
	of a list of attribute/value pairs (dict)

	Background: Previously, the commands returned different results,
	depending on the options
	- "ns_http run" returned the name of the queued command (which was
	completely useless, this the queued command was already terminated)
	- "ns_http wait" returned sometimes the body of the reply (when the
	reply was not spooled) or empty (spooled) or "1", when the option
	"-R" was specified

	Now the result is always a dict, maybe mirroring the result of the
	(optional) output variables, which continue to work.

	Since the results were irregular and not documented in the man
	pages, the backward compatibility should be high. Also the
	regression test of NaviServer was not effected.

2018-02-05 11:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00eef45e4bbb)

	* nsd/nsd.h, nsd/return.c:
	prefer boolean over int when appropriate

2018-02-05 11:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (766a9f24ff78)

	* nsd/connio.c, nsd/crypt.c:
	prefer boolean over int when appropriate

2018-02-05 11:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f021518ba197)

	* nsperm/nsperm.c:
	prefer boolean over int when appropriate

2018-02-05 11:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69e1ad7121e1)

	* nsd/driver.c:
	add nonnull assertion, prefer boolean over int when appropriate

2018-02-05 11:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (843f49d6c910)

	* nsd/conn.c:
	reduce implicit conversions

2018-02-04 02:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e022ffc6fdbb)

	* nsd/tclhttp.c:
	reduce verbosity

2018-02-04 02:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb4b1b97763a)

	* nsd/tclhttp.c:
	reduce verbosity

2018-02-03 20:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d4b6048429b0)

	* doc/src/naviserver/ns_http.man, include/ns.h, nsd/tclhttp.c:
	Add option "-outputfile" to "ns_http run" and "ns_http wait",
	provide a more sensible output to "ns_http run"

	- by specifying the option "-outputfile" the received file will be
	always written to the disk, no matter how large it is.
	- the command "ns_http run" did previously return the http handle,
	which was useless, since the named task was already finished at this
	time. Now it returns the ns_set of the reply_headers.

2018-02-03 19:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7527f5094cd3)

	* nsd/tclset.c:
	improve error message

2018-02-03 18:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c6c68a6e0c3)

	* nsd/tclhttp.c:
	whitespace changes: switch to vertical layout of argument lists, as
	this is as well preferred by tcl guide-lines

2018-02-02 18:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be8a81dc85cc)

	* doc/src/naviserver/ns_http.man, include/ns.h, nsd/tclhttp.c:
	new feature: provide means for storing downloaded data in a named
	file

	THe command "ns_http wait" has now an additional option "-body_file"
	(simiöar to "ns_http queue" which can be used to specify a filename
	for the downloaded content"

2018-02-02 18:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05de3b9c8240)

	* tests/ns_server.test:
	use HTTP instead of http

2018-02-02 18:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (95c1ed9a7910)

	* nssock/nssock.c:
	keep lower case

2018-02-02 18:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b1f3cb996348)

	* doc/src/naviserver/ns_set.man:
	fix typo

2018-02-02 11:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38aee8a7dbd0)

	* nsd/driver.c, nsd/mimetypes.c, nsd/queue.c, nsd/tclhttp.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/urlspace.c, nssock/nssock.c,
	nsthread/thread.c, win/cgitest/main.c:
	fix typos

2018-02-01 23:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2bfa7e85cec0)

	* nsd/cache.c, nsd/conn.c, nsd/connchan.c, nsd/driver.c, nsd/queue.c,
	nsd/sched.c, nsd/sock.c, nsd/tclcache.c, nsd/tclvar.c,
	nsthread/winthread.c:
	fix typos

2018-01-31 09:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b57929543ef9)

	* nsd/conn.c:
	silence static checker

2018-01-22 19:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a1b526a01b9)

	* include/ns.h, nsd/returnresp.c:
	don't try to serve redirected files in case the connection is
	already closed (will lead only to confusing messages)

2018-01-22 12:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd295d02b14d)

	* nsd/adpeval.c, nsd/log.c:
	try to deal with "fall-though" checking in newer gcc versions (e.g.
	7.1)

2018-01-22 10:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e92c227980c0)

	* nsd/driver.c, nsd/tclobj.c:
	Improve type cleanness

2018-01-22 10:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33b2250d9a4e)

	* configure.ac:
	code smell reduction: CHECK_FUNCS can check multiple functions

2018-01-20 20:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (999876546c23)

	* openacs-config.tcl:
	Extend sample config file for OpenACS

2018-01-20 20:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25821ddeedb2)

	* nsdb/dbtcl.c:
	add missing fetch commands for obtaining handles (on obviously
	seldomly used subcommands)

2018-01-20 20:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f660f0705850)

	* nsd/tcljob.c:
	avoid potential NULL dereference in error case

2018-01-20 20:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0acadcfaf251)

	* nsd/rollfile.c:
	avoid potential NULL dereference and simplify logic

2018-01-20 20:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c0c91c4f311c)

	* nsd/adpeval.c:
	Avoid potential NULL dereference

2018-01-02 19:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d68beae91e6)

	* nscp/nscp.c, nsd-config.tcl, tcl/config.tcl, tcl/file.tcl:
	- use same initialization for enablelclpages when configured over
	"ns/server/$server" or over "ns/server/$server/adp" to avoid subtle
	differences on global variables
	- use more consistent log entries (mentioning the server)

2018-01-02 19:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (619c3e38c87a)

	* configure.ac:
	bump version number to 4.99.17d0

2017-12-29 21:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5563803dce64)

	* .hgtags:
	Added tag naviserver-4.99.16 for changeset 8c1d0715d066

2017-12-29 21:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c1d0715d066 [naviserver-4.99.16])

	* configure.ac:
	Update version numbers

2017-12-29 21:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ad8e002e9444)

	* NEWS, README:
	update docs

2017-12-29 20:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b19f7dee1fe)

	* merge

2017-12-29 20:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5e7a1625690c)

	* nsd/sock.c:
	Provide compatibility for macOS High Sierra

	macOS High Sierra raises "Broken pipe: 13" errors for the http.test
	regression test. It seems to ignore the setting

	 ns_sigmask(SIG_BLOCK, &set, NULL);

	in unix.c where "set" contains SIGPIPE. Therefore, we turn off
	SIGPPIPE directly on the socket.

2017-12-29 20:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30aa94d6614d)

	* nsd/adpeval.c, nsd/log.c, nsd/tclthread.c, nsdb/dbutil.c,
	nsthread/winthread.c:
	Make fall-though comments more regular

2017-12-29 20:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29db36ffba66)

	* nsd/set.c:
	Fix over-eager assertion

2017-12-25 15:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cc17e09421b9)

	* nsd/set.c:
	Fix assert

2017-12-24 10:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eaab7bbd01d5)

	* nsd/adpeval.c, nsd/log.c, nsd/tclthread.c, nsdb/dbutil.c,
	nsthread/winthread.c:
	make implicit fall through comments more regular

2017-12-22 19:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db6238b09f0e)

	* NEWS, configure.ac:
	Update News and bump version number to 4.99.16b3

2017-12-22 19:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (70666fab5b83)

	* doc/src/naviserver/ns_limits.man-retracted, include/Makefile.win32:
	Fix typos

2017-12-22 14:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65ab200c7c07)

	* nsd/rollfile.c:
	Restrict value range to make sure that no buffer overflow can happen

2017-12-22 13:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c048b2923f11)

	* nsd/connio.c, nsd/driver.c, nsd/log.c, nsd/rollfile.c, nsd/server.c,
	nsd/tclhttp.c, nsd/urlspace.c, nsproxy/nsproxylib.c,
	nsthread/memory.c, nsthread/nsthreadtest.c, nsthread/reentrant.c:
	Use snprintf() instead of sprintf() to protect better against buffer
	overflows

2017-12-22 12:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44bd22046582)

	* include/ns.h, nsd/nsd.h, nsd/str.c, nsd/tclmisc.c, nsd/tclobj.c,
	nsd/tls.c:
	Improve robustness of bytearray operations (having string
	representations) New API function NsTclObjIsEncodedByteArray() to
	determine, whether Tcl_UtfToExternalDString() is required to get the
	binary content

2017-12-22 10:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dfefa4d9c1cd)

	* nsd/tls.c:
	Use old style initialization for LibreSSL

2017-12-22 10:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (77d2ba9217e5)

	* nsd/tls.c:
	Add support for LibreSSL 2.6.4 (releasd on Dec19)

2017-12-22 01:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (82d627d3d08c)

	* nsd/tls.c:
	Provide minial upport for LibreSSL

2017-12-22 01:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09ccac972c61)

	* nsd/tclmisc.c:
	deal with systems having no RLIMIT_AS

2017-12-21 22:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (abead85d3239)

	* NEWS, configure.ac, include/nsconfig.h.in:
	Update version numbers for release candidate

2017-12-21 22:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2869acc8c236)

	* NEWS:
	Updated NEWS for release candidate

2017-12-21 14:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (48e7356b457b)

	* nsd/cache.c, nsd/conn.c, nsd/connchan.c, nsd/driver.c,
	nsd/fastpath.c, nsd/queue.c, nsd/server.c, nsd/sock.c,
	nsd/tcltime.c, nsproxy/nsproxylib.c, nsthread/cslock.c,
	nsthread/nsthreadtest.c, nsthread/pthread.c, nsthread/thread.c:
	fix typos

2017-12-21 14:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d0dc7fa519ea)

	* nsd/cache.c, nsd/conn.c, nsd/connchan.c, nsd/driver.c,
	nsd/fastpath.c, nsd/queue.c, nsd/server.c, nsd/sock.c,
	nsd/tcltime.c, nsproxy/nsproxylib.c, nsthread/cslock.c,
	nsthread/nsthreadtest.c, nsthread/pthread.c, nsthread/thread.c:
	Fix typos

2017-12-21 14:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a256419daced)

	* doc/src/manual/adp-overview.man, doc/src/manual/main-standards.man,
	doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_env.man,
	doc/src/naviserver/ns_guesstype.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_mutex.man, doc/src/naviserver/ns_runonce.man,
	doc/src/naviserver/ns_truncate.man:
	Fix typos

2017-12-21 14:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (88ad75cffb6c)

	* doc/src/naviserver/ns_runonce.man:
	Fix markup

2017-12-21 14:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b495340714e7)

	* doc/src/naviserver/ns_cache.man:
	Add section about Cache Transactions

2017-12-21 14:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40b32e46471f)

	* nsd/adpparse.c, nsd/cache.c, nsd/conn.c, nsd/connchan.c,
	nsd/driver.c, nsd/fastpath.c, nsd/queue.c, nsd/server.c, nsd/sock.c,
	nsd/tclobjv.c, nsd/tcltime.c, nsproxy/nsproxylib.c,
	nsthread/cslock.c, nsthread/nsthreadtest.c, nsthread/pthread.c,
	nsthread/thread.c:
	Fix typos in source files

2017-12-21 14:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (53fd5958b2f1)

	* NEWS.template:
	update date in template

2017-12-21 14:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b8c2683aa5c3)

	* nsd/queue.c:
	Fix typo

2017-12-21 10:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c59c818e3bd)

	* doc/src/naviserver/ns_connchan.man:
	Include "ns_conn chan" in man page (command still experimental)

2017-12-21 10:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ffd87026765a)

	* doc/src/naviserver/ns_adp_include.man:
	Fix broken example and broken markup

2017-12-21 10:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eac101312030)

	* nsd/set.c:
	Reduce verbosity

2017-12-21 10:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4fdbfebe72fd)

	* nsd/connchan.c:
	Reduce verbosity

2017-12-20 19:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43af2988ac0f)

	* nsd/tclhttp.c:
	Removed dead assignment

2017-12-12 13:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb303a9eb78a)

	* nsd-config.tcl, nsd/conn.c, nsd/nsd.h, nsd/nsmain.c, openacs-
	config.tcl, sample-config.tcl.in:
	make new behavior (reject NsConnRequire() operations on already
	closed connections) optional (enabled by default, but give people a
	chance to fix their code)

	Introduced ns/parameter config value "rejectalreadyclosedconn",
	which is per default true. added parameter to sample config files

2017-12-12 12:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d3c42e30bec2)

	* nsd/driver.c:
	Improve debug message

2017-12-12 12:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2541e6d9a5f)

	* nsd/connio.c:
	White space changes: trim trailing spaces

2017-12-12 00:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f9f1ff4b0d7d)

	* nsd/driver.c:
	fix variable name

2017-12-12 00:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0614ae2cbdc9)

	* nsd/driver.c:
	provide more details about the broken read operation

2017-12-11 12:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e389e1172798)

	* nsdb/util.tcl, tcl/util.tcl:
	Check status of ns_parsetime: still performance wise useful for
	current versions of Tcl

2017-12-11 12:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c0588853be3)

	* nsd/tls.c:
	Improve compatibbility with ancient versions of OpenSSL

2017-12-11 12:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e3f276d17f7)

	* nsssl/nsssl.c:
	Improve compatibility with ancient versions of OpenSSL

2017-12-11 12:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20225f5b6b5c)

	* include/nsthread.h:
	Remove duplicated definition block

2017-12-10 20:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ce5516640005)

	* nsd/conn.c:
	return NS_ERROR from NsConnRequire() when called on a closed
	connection.

	Background: one sites returns sometimes a "Fatal:
	Tcl_RegisterChannel: duplicate channel names" from Tcl 8.5 or Tcl
	8.6. Up to my understanding on possible way for this to happen is,
	when a C extension or NaviServer closes a file descriptor owned by
	Tcl. Being more carefule on operations on closed connections might
	help to simplify complex error situations.

2017-12-10 18:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b44755302c53)

	* nsd/connchan.c, nsproxy/nsproxylib.c:
	whitespace changes

2017-12-10 18:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af9199d27602)

	* nsproxy/doc/mann/ns_proxy.man, nsproxy/nsproxylib.c,
	tests/ns_proxy.test:
	ns_proxy service:
	- bring subcommands into alphabetical order to ease consistency checks
	with docs
	- reduce size of mega switch statement
	- document undocumented functions
	- fix typos in documentaton

2017-12-10 18:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65c229059e49)

	* doc/src/naviserver/ns_http.man:
	Fix bracket in man page

2017-12-08 17:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b248a32d2d4)

	* configure.ac:
	Bump version number to 4.99.16b1

2017-12-08 17:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0914b550cc9a)

	* nsssl/README.md:
	whitespace change: use unix style lf (like in all other files)
	instead of crlf

2017-12-08 16:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8620f95d907c)

	* nsssl/README.md:
	Improve documentation of new features

2017-12-08 04:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f2b0c2fa4f9f)

	* doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_httppost.man,
	include/ns.h, include/nsconfig.h.in, nsd/tclhttp.c, nsd/tls.c,
	nsssl/README.md, nsssl/nsssl.c:
	Added support for client side Server Name Indication (SNI) in
	ns_http via new parameter "-hostname"

2017-12-08 03:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f051f34c939b)

	* doc/src/naviserver/ns_writer.man:
	Improve man page and add cross reference

2017-12-03 12:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (112ff39224c7)

	* nsd/tclresp.c:
	reduced mismatched essential type categories for binary operator

2017-12-03 11:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ae23678b775)

	* nsdb/dbinit.c, nsdb/nsdb.h:
	use consistently boolean for "fetchingRows"

2017-12-03 11:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b059ff8944e0)

	* nsd/adpparse.c, nsd/fastpath.c, nsd/request.c, nsd/tcltime.c:
	use INTCHAR consistently in strchr()

2017-12-03 11:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bda36acdd20b)

	* nsd/tclcache.c:
	fix argument type (*NewBooleanObj receives int)

2017-12-03 11:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ecf10c14d563)

	* nsd/event.c:
	Improve formatting

2017-12-03 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (915c4dbbed77)

	* nsd/nsconf.c:
	remove constness die to external prototype

2017-12-03 10:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b0019846b6aa)

	* nsd/tcljob.c:
	Use consistently uintptr_t for thread ids, prefer bool over int

2017-12-02 18:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c1d015bf149b)

	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_adp_append.man,
	doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_include.man,
	doc/src/naviserver/ns_adp_parse.man,
	doc/src/naviserver/ns_adp_puts.man, doc/src/naviserver/ns_cache.man,
	doc/src/naviserver/ns_chan.man,
	doc/src/naviserver/ns_choosecharset.man,
	doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_cookie.man, doc/src/naviserver/ns_env.man,
	doc/src/naviserver/ns_htmlselect.man,
	doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_httppost.man,
	doc/src/naviserver/ns_job.man, doc/src/naviserver/ns_kill.man,
	doc/src/naviserver/ns_moduleload.man,
	doc/src/naviserver/ns_parseargs.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_return.man, doc/src/naviserver/ns_runonce.man,
	doc/src/naviserver/ns_schedule.man,
	doc/src/naviserver/ns_schedule_daily.man,
	doc/src/naviserver/ns_schedule_proc.man,
	doc/src/naviserver/ns_schedule_weekly.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockcheck.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_symlink.man,
	doc/src/naviserver/ns_truncate.man,
	doc/src/naviserver/ns_writer.man, doc/src/naviserver/nsv.man,
	nsproxy/doc/mann/ns_proxy.man:
	further documentation cleanup: use [option] more consistently

2017-12-02 17:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fccc644ab9c7)

	* doc/src/naviserver/commandlist.man, nscgi/doc/mann/nscgi.man,
	nscp/doc/mann/nscp.man, nsdb/doc/mann/ns_db.man,
	nslog/doc/mann/ns_accesslog.man, nsperm/compat.tcl,
	nsperm/doc/mann/ns_perm.man, nsperm/doc/mann/nsperm.man,
	nsproxy/doc/mann/ns_proxy.man, nssock/doc/mann/nssock.man,
	nsssl/doc/mann/nsssl.man:
	documentation improvements

	- provide for every module the name of the module as keyword
	- fix missing and deprecated commands in nsperm

2017-12-02 17:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d8d5c60a60ed)

	* tcl/util.tcl:
	prefer expand operator over eval

2017-12-01 10:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f4ada805666c)

	* doc/src/naviserver/ns_adp_include.man,
	doc/src/naviserver/ns_http.man, nsd/tclhttp.c:
	Provide error message when check fails and fix check

2017-12-01 10:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41fc6b2d2738)

	* tests/http.test:
	provide better error message, when test fails

2017-12-01 09:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd32ed6bf288)

	* doc/src/naviserver/ns_setprivileges.man: new file.
	* doc/src/naviserver/ns_setprivileges.man: deleted file.
	* doc/src/naviserver/ns_setprivileges.man,
	doc/src/naviserver/ns_setprivileges.man:
	Fix typo in man page name

2017-12-01 09:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (939862345798)

	* doc/src/naviserver/commandlist.man, tcl/util.tcl:
	move ns_updateheaders (undocumented function) to deprecated commands,
	since it was deprecated with AOLserver 3.0

2017-11-30 21:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e2f1a357fb6)

	* include/ns.h, nsd/unix.c:
	Code cleanup:

	- reduce number of returns before end of function
	- prefer Ns_ReturnCode over int

2017-11-29 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56037cef9cf3)

	* nsdb/dbinit.c:
	Add notice, when auto-closing db-handles to ease debugging of
	potential problems with closed/broken db connections

2017-11-24 17:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b06a4c17ffd)

	* nsdb/doc/mann/ns_buildsqldate.man, nsdb/doc/mann/ns_db.man,
	nslog/doc/mann/ns_accesslog.man, nsperm/doc/mann/ns_perm.man,
	nsperm/nsperm.c, nsproxy/doc/mann/ns_proxy.man:
	Documentation improvements:

	add descriptions for
	- ns_quotelisttolist
	- ns_getcsv
	- ns_dberrorcode
	- ns_dberrormsg
	- ns_dbconfigpath
	- ns_pooldescription

	mark builtins from modules as per-server

2017-11-24 15:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d7357cc941c)

	* nsd/tclhttp.c:
	Improve robustnaess, when invalid URLs aer given

2017-11-24 07:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ea0f59549566)

	* doc/src/naviserver/commandlist.man:
	Fix man-page generation

2017-11-23 20:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (37fe71ab4f22)

	* nsd/driver.c:
	Robustness improvement: don't Fatal on invalid URLs passed to
	NSDriverClientOpen, but spit out a warning

2017-11-21 20:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dacafb1c6417)

	* nsthread/mutex.c:
	Change in debugging entry, when mutexlocktrace is activated:

	Use thread name instead of hex ID to further ease matching of
	entries

2017-11-21 20:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6730abcf800)

	* nsd-config.tcl, nslog/nslog.c, openacs-config.tcl, sample-
	config.tcl.in:
	Added new config parameter for nslog: "logthreadname"

	When the parameter is specified, the thread name is placed as second
	field in the access.log. This eases debugging, since one can now
	link the lines in error.log caused by a request with the line in
	the access.log without the need of guessing. The thread name
	contains the name of the connection pool and a connection id.

2017-11-18 17:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c862e912c59d)

	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_driver.man:
	Further documentation updates

2017-11-18 17:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4bab54cb8161)

	* nsd/tclcmds.c, tcl/compat.tcl:
	Resolve potential naming conflict

	The command NsTclEnvObjCmd() is/was registered twice, once as
	"ns_env" and once as "env". Since the latter is not documented, adds
	no functionality over "ns_env", does not follow the usual naming
	conventions and poses therefore a potential naming conflict, mark it
	as deprecated. The C implementation of "env" was replaced by a Tcl
	one, which will complain.

2017-11-18 17:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69cceaff498c)

	* nsd/tclobj.c:
	Make sure, the buffer is large enough to contain string terminator

2017-11-17 23:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a00b0cb543f9)

	* doc/src/naviserver/ns_puts.man: deleted file.
	* doc/src/man3/Ns_Sls.man, doc/src/naviserver/keyl.man,
	doc/src/naviserver/ns_absoluteurl.man,
	doc/src/naviserver/ns_addrbyhost.man,
	doc/src/naviserver/ns_adp_abort.man,
	doc/src/naviserver/ns_adp_append.man,
	doc/src/naviserver/ns_adp_argc.man,
	doc/src/naviserver/ns_adp_argv.man,
	doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_adp_break.man,
	doc/src/naviserver/ns_adp_close.man,
	doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_debug.man,
	doc/src/naviserver/ns_adp_dir.man,
	doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_eval.man,
	doc/src/naviserver/ns_adp_exception.man,
	doc/src/naviserver/ns_adp_flush.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_adp_mime.man,
	doc/src/naviserver/ns_adp_mimetype.man,
	doc/src/naviserver/ns_adp_parse.man,
	doc/src/naviserver/ns_adp_puts.man,
	doc/src/naviserver/ns_adp_register.man,
	doc/src/naviserver/ns_adp_return.man,
	doc/src/naviserver/ns_adp_safeeval.man,
	doc/src/naviserver/ns_adp_stats.man,
	doc/src/naviserver/ns_adp_tell.man,
	doc/src/naviserver/ns_adp_trunc.man,
	doc/src/naviserver/ns_after.man, doc/src/naviserver/ns_atclose.man,
	doc/src/naviserver/ns_atexit.man,
	doc/src/naviserver/ns_atshutdown.man,
	doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_base64decode.man,
	doc/src/naviserver/ns_base64encode.man,
	doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_cancel.man,
	doc/src/naviserver/ns_chan.man, doc/src/naviserver/ns_charsets.man,
	doc/src/naviserver/ns_checkurl.man, doc/src/naviserver/ns_cond.man,
	doc/src/naviserver/ns_config.man, doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_conncptofp.man,
	doc/src/naviserver/ns_cookie.man, doc/src/naviserver/ns_critsec.man,
	doc/src/naviserver/ns_crypt.man,
	doc/src/naviserver/ns_encodingforcharset.man,
	doc/src/naviserver/ns_env.man, doc/src/naviserver/ns_event.man,
	doc/src/naviserver/ns_filestat.man,
	doc/src/naviserver/ns_fmttime.man,
	doc/src/naviserver/ns_ftruncate.man,
	doc/src/naviserver/ns_gifsize.man, doc/src/naviserver/ns_gmtime.man,
	doc/src/naviserver/ns_guesstype.man,
	doc/src/naviserver/ns_hashpath.man,
	doc/src/naviserver/ns_hostbyaddr.man,
	doc/src/naviserver/ns_hrefs.man, doc/src/naviserver/ns_http.man,
	doc/src/naviserver/ns_httptime.man, doc/src/naviserver/ns_ictl.man,
	doc/src/naviserver/ns_imgmime.man,
	doc/src/naviserver/ns_imgsize.man,
	doc/src/naviserver/ns_imgtype.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_internalredirect.man,
	doc/src/naviserver/ns_job.man, doc/src/naviserver/ns_jpegsize.man,
	doc/src/naviserver/ns_kill.man, doc/src/naviserver/ns_library.man,
	doc/src/naviserver/ns_localtime.man,
	doc/src/naviserver/ns_locationproc.man,
	doc/src/naviserver/ns_log.man, doc/src/naviserver/ns_md5.man,
	doc/src/naviserver/ns_mktemp.man,
	doc/src/naviserver/ns_moduleload.man,
	doc/src/naviserver/ns_modulepath.man,
	doc/src/naviserver/ns_mutex.man,
	doc/src/naviserver/ns_normalizepath.man,
	doc/src/naviserver/ns_pagepath.man,
	doc/src/naviserver/ns_parseargs.man,
	doc/src/naviserver/ns_parseheader.man,
	doc/src/naviserver/ns_parsehttptime.man,
	doc/src/naviserver/ns_parsequery.man,
	doc/src/naviserver/ns_parseurl.man, doc/src/naviserver/ns_pause.man,
	doc/src/naviserver/ns_pngsize.man,
	doc/src/naviserver/ns_purgefiles.man,
	doc/src/naviserver/ns_puts.man, doc/src/naviserver/ns_quotehtml.man,
	doc/src/naviserver/ns_rand.man, doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_requestauthorize.man,
	doc/src/naviserver/ns_resume.man, doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_rlimit.man,
	doc/src/naviserver/ns_rollfile.man,
	doc/src/naviserver/ns_runonce.man, doc/src/naviserver/ns_rwlock.man,
	doc/src/naviserver/ns_schedule.man, doc/src/naviserver/ns_sema.man,
	doc/src/naviserver/ns_server.man,
	doc/src/naviserver/ns_serverpath.man,
	doc/src/naviserver/ns_serverrootproc.man,
	doc/src/naviserver/ns_set.man,
	doc/src/naviserver/ns_setprivileges.man,
	doc/src/naviserver/ns_sha1.man,
	doc/src/naviserver/ns_shortcut_filter.man,
	doc/src/naviserver/ns_shutdown.man, doc/src/naviserver/ns_sleep.man,
	doc/src/naviserver/ns_sls.man, doc/src/naviserver/ns_sockaccept.man,
	doc/src/naviserver/ns_sockblocking.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockcheck.man,
	doc/src/naviserver/ns_socketpair.man,
	doc/src/naviserver/ns_socklisten.man,
	doc/src/naviserver/ns_socklistencallback.man,
	doc/src/naviserver/ns_socknonblocking.man,
	doc/src/naviserver/ns_socknread.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_striphtml.man,
	doc/src/naviserver/ns_symlink.man, doc/src/naviserver/ns_time.man,
	doc/src/naviserver/ns_truncate.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_url2file.man,
	doc/src/naviserver/ns_urldecode.man,
	doc/src/naviserver/ns_urlencode.man,
	doc/src/naviserver/ns_urlspace.man,
	doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man, doc/src/naviserver/ns_write.man,
	doc/src/naviserver/ns_writecontent.man,
	doc/src/naviserver/ns_writer.man, doc/src/naviserver/nsv.man,
	doc/src/naviserver/returnstatus-cmds.man:
	add keywords for "global builtin" and "server builtin"

2017-11-17 22:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f188f6dbb91)

	* doc/src/naviserver/ns_locationproc.man,
	doc/src/naviserver/ns_serverrootproc.man:
	Fix broken/unfinished man pages

2017-11-17 22:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9fe3c92800a)

	* nsd/tclcmds.c, tcl/compat.tcl:
	make deprecated command ns_returnadminnotice a tcl proc and mark it
	explicitly as deprecated

2017-11-17 21:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5395b63547e0)

	* doc/src/naviserver/returnstatus-cmds.man:
	fix typo in command name

2017-11-17 21:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f976c0965fa0)

	* doc/src/naviserver/ns_gmtime.man:
	Fix broken formattimg: part of the return values was listed as
	argment of function

2017-11-17 21:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7916bb32b309)

	* nsd/tclcmds.c, tcl/compat.tcl:
	implement deprecated command "ns_puts" as Tcl proc and complain on
	its usage

2017-11-17 21:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7345d63a9e4)

	* doc/src/naviserver/ns_cancel.man:
	Fix borken man page (command should be probably deprecatted).

2017-11-17 20:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b591ffce9e5)

	* doc/src/naviserver/ns_adp_exception.man:
	fix broken markup in man page

2017-11-17 20:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c1dc61df242d)

	* doc/src/naviserver/commandlist.man, doc/src/naviserver/keyl.man,
	doc/src/naviserver/ns_adp_mime.man,
	doc/src/naviserver/ns_adp_mimetype.man,
	doc/src/naviserver/ns_findset.man, doc/src/naviserver/ns_job.man:
	improve documentation (add grouping for ns_set and keyl*, add
	crossrefs)

2017-11-16 08:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ff5cb57e174)

	* nsd/tclobj.c:
	minor cleanup (move line around, fix comment)

2017-11-16 08:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (258c331180ee)

	* tests/http.test:
	deactivate test depending on tcl8.6 builtins when using earlier tcl
	versions

2017-11-15 12:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54402dca696c)

	* nsd/tclobj.c, tests/http.test:
	more bytearray work: testcases and tcl 8.7 compatibility

	The regression test handlels now the somewhat tricky cases of impure
	bytarrays. Improved the documentation to make intentions clear

2017-11-15 12:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc34b6806f4e)

	* doc/src/naviserver/ns_job.man, doc/src/naviserver/ns_schedule.man:
	Improve docs: more uniform handling of keywords and "see also"

2017-11-15 10:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7fe042cf3bf)

	* nsd/tclresp.c:
	Use Boolean expression

2017-11-14 16:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81a5fa37d1ce)

	* nsd/tclobj.c:
	- behave more like TclIsPureByteArray() to avoid surprises, when a
	Tcl_Obj contains a bytearray AND a string rep

2017-11-13 09:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b3fec70cc09)

	* doc/src/naviserver/ns_job.man:
	Improve man page

	- distinguish between constants (subcommand) and arguments
	- add example

2017-11-08 15:56 +0100  Zoran Vasiljevic  <zv@archiware.com>  (1c65b15cb6ca)

	* nsd/tclobj.c:
	Ns_TclGetOpaqueFromObj is now clever enough to obtain the address of
	the object by just looking at the object's string rep.

2017-11-08 08:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f63ee2bef364)

	* Merge

2017-11-07 14:58 +0100  Zoran Vasiljevic  <zv@archiware.com>  (87360dea7a8d)

	* nsproxy/nsproxylib.c:
	Reduce log severity from Notice to Debug at some frequently visited
	places, otherwise the log gets cluttered.

2017-11-07 11:55 +0100  Zoran Vasiljevic  <zv@archiware.com>  (20bbc6ad151f)

	* nsd/cache.c, nsd/tclhttp.c:
	Silenced some compiler warnings in cache.c. Have Ns_HttpMessageParse
	use correct Ns_ReturnCode's.

2017-11-08 08:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09115f64be80)

	* nsd/driver.c:
	Increase maximum number of driver threads to 64

2017-11-08 08:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e0e50c6ef32)

	* nsd/binder.c:
	white space changes

2017-10-31 10:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (212129afe7c5)

	* nsd-config.tcl:
	fix typos

2017-10-31 10:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f117fb16cde)

	* nsd/nswin32.c:
	Prefer Boolean tests

2017-10-29 18:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8bbbdd7b71af)

	* nsd/tclhttp.c:
	Reduce verbosity

2017-10-27 13:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (87a98498d4d8)

	* include/ns.h, nsd/tclhttp.c:
	Small reform of HTTP header parsing:

	- new API function: Ns_HttpMessageParse() for parsing a (potentially
	incomplete) HTTP message bbased on old HttpParseHeaders() operaton
	- the function Ns_HttpMessageParse() is as well useful of UDP based
	HTTP transfers
	- reduce number of strlen() operations when parsing HTTP headers

2017-10-27 13:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f67e9e731771)

	* nsd/driver.c:
	reduce verbosity

2017-10-25 12:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6d4ae7dcf2d)

	* sample-config.tcl.in:
	update sample log file and make it work out of the box

2017-10-25 12:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d23bdd33e9d4)

	* nsd/driver.c:
	relax condition, since one has to care for error cases as well here

2017-10-25 11:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ed17b08cf1d)

	* nsd/driver.c:
	Improve debugging on NsWriterQueue() with dropped connections

2017-10-24 20:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (99b1eb3b50f1)

	* nsd/driver.c:
	allow usage of global defserver; avoid double DriverClose calls for
	UDP

2017-10-20 17:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f9b5032e182)

	* nsproxy/nsproxylib.c:
	Remove duplicated entry

2017-10-20 13:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6aa3080fe24b)

	* nsproxy/nsproxylib.c:
	whitespace changes: trim trailing spaces

2017-10-20 13:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ffc1fad006f1)

	* tests/ns_proxy.test:
	adapt regression test for new subcommand

2017-10-20 13:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (71a5cc807efe)

	* nsproxy/nsproxylib.c:
	nsproxy: new subcommand "ns_proxy stats"

	Provide usage and runtime statistics per nsproxy pool

2017-10-20 11:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b851211b2292)

	* nscgi/doc/mann/nscgi.man, nscgi/nscgi.c, nsd-config.tcl, openacs-
	config.tcl, sample-config.tcl.in:
	nscgi: new config parameter "allowstaticresources"

	The new parameter "allowstaticresources" allows one to control whether
	or not static resources can be delivered from a cgi-bin directory.

	Background: when cgi scripts are called from a cgi-bin directory
	without an explicit extension mapping to a script interpreter (e.g.
	Perl, Bash, ...) the script has to be set executable. If this is not
	the case, the cgi-script is delivered in source code, which might
	reveal unwanted information. The reason for this behavior was, that
	one can so deliver also static resources (e.g. images) from a cgi-
	bin directory. Now this behavior con be controlled with the
	configure parameter "allowstaticresources", which is by default off.
	If an application depends on this behavior, please turn it on in the
	config file (in the nscgi section).

2017-10-16 11:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7cad8202b96e)

	* tcl/nstrace.tcl:
	Make name of traceepochmutex mutex distinguishable by adding server
	name as suffix

2017-10-16 11:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e933f3c82cf)

	* nsd/server.c:
	keep nsd: prefix

2017-10-16 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8ad2104938b0)

	* nsd/server.c:
	Whitespace changes: strip trailing spaces

2017-10-16 10:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db8f0ced510a)

	* nsd/server.c:
	Make mutex name distinguishable when multiple servers are used

2017-10-16 10:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29c7eb6c0a74)

	* include/ns.h:
	Align variable names in prototype with definition

2017-10-11 13:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d24a89e6701)

	* nsd/set.c:
	Reduce verbosity for common cases

2017-10-11 11:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (53e3a0c48a86)

	* nsd/set.c:
	White space changes: remove trailing spaces and fix typos in
	comments

2017-10-11 11:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (879d5b56df50)

	* include/ns.h, nsd/queue.c, nsd/set.c:
	Performance improvement: remove the need of 3 malloc/free pairs pre
	requests

	With this change, every request saves typically three ns_malloc
	operations per request: 1) the Ns_Set structure 2) the set name (it
	preserves the old name) 3) the field set

2017-10-11 11:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5ec77fd2619)

	* nsd/server.c:
	Improve code documentation

2017-10-11 00:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e608b3d446c8)

	* doc/src/naviserver/ns_job.man, openacs-config.tcl, sample-
	config.tcl.in:
	Improve documentation

2017-10-10 10:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1723b7db9f3a)

	* doc/src/naviserver/ns_server.man, nsd/queue.c:
	Reform of ns_server active|all|queued

	Better handling of querying data from concurrent threads. A certain
	problem are semi-parsed requests: these are not "queued", but not
	all information is available for quering it. We do the best effort
	to report on fields that are trusted.

	Remove option "-checkforproxy" from "ns_server queued", since such
	request neve have such information availale.

2017-10-06 19:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d16cb091a0a)

	* nsd/queue.c:
	Introduce global local for connPtr to protect against concurrency
	issues from different pools

2017-10-06 13:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c36fe9110ab)

	* include/ns.h, nsd/queue.c:
	Bug fix: protect contents of connPtr against concurrent operations
	(e.g. in "ns_server ... active")

2017-10-05 20:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a6df0c6762e7)

	* nsd/queue.c:
	Protect call of Ns_SetIGet against NULL headers and output debug
	line.

	The output of the debug line is just transitional to figure out,
	when exactly the function is called without header fields

2017-10-05 15:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b1215a239fbf)

	* nsdb/dbinit.c, nsdb/nsdb.h:
	Revive verbose member in handle and use it for "logsqlerrors"
	settings

2017-10-05 11:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa57babfb13e)

	* nsdb/dbtcl.c:
	Fix potentially uninitialized variable

2017-10-03 12:10 +0000  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9314b807aee2)

	* Merged in davidqc/naviserver (pull request #17)

	flip logic on null check

2017-10-03 12:22 +0100  David Osborne  <david@qcode.co.uk>  (847e2fda7a8d)

	* nsd/queue.c:
	flip logic on null check

2017-10-03 12:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a837c8fc00e)

	* nsd/urlencode.c:
	Don't warn about URL fragment marker in
	Ns_UrlEncodingWarnUnencoded()

2017-10-02 11:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4de15f2e6a8f)

	* nsd/driver.c:
	Change severity level of NS_CONN_ENTITYTOOLARGE message from debug
	to notice

	Intention: provide information about possible misconfigurations or
	attacks in the error log

2017-10-01 15:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25b578f9c69d)

	* nslog/nslog.c:
	Optimization: avoid 1 char loops with Ns_DStringNAppend

2017-09-30 19:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a5d17e6a50d)

	* nsd/queue.c:
	Whitespace changes: remove trailing spaces

2017-09-30 19:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f6ae299539d)

	* doc/src/naviserver/ns_server.man, nsd/queue.c, tests/ns_server.test:
	Refactor "ns_server active|queued|all -checkforproxy"

	- Move "-checkforproxy" to the last position. Otherwise, it would
	be a useless but accepted option for all "ns_server" subbcommands
	(and shown as valid in error messages, etc.)
	- extend regression test
	- extend documentation

2017-09-29 15:12 +0100  David Osborne  <david@qcode.co.uk>  (856f4291bbb7)

	* nsd/queue.c:
	backout earlier commit

2017-09-29 15:04 +0100  David Osborne  <david@qcode.co.uk>  (82280bf028c6)

	* nsd/driver.c:
	backout earlier commit

2017-09-29 12:22 +0100  David Osborne  <david@qcode.co.uk>  (b9cebfcf96f7)

	* nsd/queue.c:
	Remove duplicate init

2017-09-29 12:20 +0100  David Osborne  <david@qcode.co.uk>  (f13c3d10750b)

	* nsd/queue.c:
	Add checkforproxy switch

2017-09-29 10:52 +0100  David Osborne  <david@qcode.co.uk>  (649273dae36c)

	* nsd/driver.c:
	Merged naviserver/naviserver into default

2017-04-19 12:40 +0100  David Osborne  <david@qcode.co.uk>  (c496c00986b0)

	* nsd/driver.c:
	Try to populate request->port from Host header

2017-09-28 08:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5436d27a7680)

	* openacs-config.tcl:
	Ease configuration for nsssl by simply setting https port in sample
	configuration

2017-09-26 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00014180512b)

	* tests/cookies.test:
	Extend regression test for "ns_getcookie -all"

2017-09-26 10:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (977265686010)

	* nsd/urlspace.c:
	Performance: don't force stlen() when length is known

2017-09-26 10:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (21941e9cbf8a)

	* doc/src/naviserver/ns_cookie.man:
	Fix typos in documentation

2017-09-26 10:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7ca386a81b12)

	* nsd/cookies.c:
	Fix potential loop in "ns_getcookies -all true ...."

2017-09-24 13:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e7bbfc7d875)

	* nsd/cache.c:
	Remove "expirted++" line. No need to count rollbacked values in
	"expired" statistics

2017-09-20 10:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (98f5725d735d)

	* nsd/adpparse.c:
	improve speed of line-counting by about a 2x

2017-09-19 09:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07ca577b39a8)

	* nsd/event.c, nsd/server.c, nsd/tclvar.c, nsd/urlspace.c,
	nsproxy/nsproxylib.c, nsproxy/nsproxymod.c, nsthread/pthread.c,
	nsthread/winthread.c:
	Prefer US spellings

2017-09-19 09:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f476abe220b5)

	* nsd/tclinit.c:
	Whitespace changes

2017-09-19 09:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (04929bb0b86d)

	* nsd/tclinit.c:
	Prefer Boolean value

2017-09-18 23:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b71aad1cc10d)

	* nsd/quotehtml.c:
	Performance improvement for ns_quotehtml

	ns_quotehtml is one of the most frequently called functions of
	NaviServer, when used e.g. with OpenACS. This performance
	improvement avoids creation of unneeded Tcl_Objs for frequently
	called cases yielding about 15% performance increase.

2017-09-18 22:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (012d718b986e)

	* nsd/form.c:
	Undo potential crlf-translations in the body of requests with
	content-type www-form-urlencoded

	Background: if e.g. hidden form fields contain a line-breaks, these
	might transformed into CRLF by current browsers in POST requests. In
	this step the value of the hidden form-fields might become larger on
	every iteration. The change tries to undo this effect on UNIX-like
	systems.

	HTML5 defines atually the value field of FORM fields as "string
	without line breaks" http://w3c.github.io/html-
	reference/input.text.html ... but in real life applications, such
	value fields exist

2017-09-17 11:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c4396d3d78b3)

	* nsd/driver.c:
	Add detection for TLS handshakes on plain connections

2017-09-16 17:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8e0eede2e26e)

	* include/ns.h, nsd/cache.c, nsd/tclcache.c:
	Fix typo in function name

2017-09-16 13:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6426bf001d91)

	* nsd/tclobj.c, nsd/tclresp.c:
	whitespace changes: remove trailing spaces

2017-09-16 13:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4fc9d7b6eeb4)

	* nsd/tclobj.c:
	Fix compatibility with Tcl 8.7a1

	Starting with Tcl 8.7a1, Tcl has actually two different types for
	bytearrays, the old "tclByteArrayType" and a new
	"properByteArrayType", where both have the string name "bytearray".
	NsTclObjIsByteArray() is now extended to handle both types.

2017-09-15 10:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05557140cfc5)

	* nsd/config.c, nsd/driver.c:
	Fix potential bug, when "/servers" section is missing

2017-09-14 18:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5045622a6a2e)

	* nsd/tclcache.c, nsd/tclfile.c, nsd/tclvar.c:
	reduce variable scopes

2017-09-14 18:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df7cc096d2c7)

	* nsd/tclxkeylist.c:
	whitespace changes

2017-09-12 20:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a1b45548921)

	* include/ns.h, nscgi/nscgi.c, nscp/nscp.c, nsd/adpcmds.c,
	nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c, nsd/driver.c,
	nsd/dstring.c, nsd/tclcache.c, nsd/tclhttp.c, nsd/tclthread.c,
	nsdb/dbtcl.c, nsdb/dbutil.c, nslog/nslog.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c, nsssl/nsssl.c, nsthread/nsthreadtest.c:
	Replace calls to decpreacted function Tcl_DStringTrunc() by
	Tcl_DStringSetLength()

2017-09-12 14:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f6870b99967)

	* nsd/tclvar.c:
	Whitespace changes: remove trailing spaces

2017-09-12 14:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6008e3d0720e)

	* doc/src/naviserver/nsv.man, nsd/tclvar.c:
	bugfix: don't complain, when "-nocomplain" is used in "nsv_unset".

2017-09-12 14:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (64c5bb23610d)

	* nsd/driver.c, nsd/nsd.h, nsd/nsmain.c, nssock/doc/mann/nssock.man,
	nsssl/doc/mann/nsssl.man, tests/ns_conn_host.test,
	tests/ns_pagepath.test, tests/ns_serverpath.test, tests/test.nscfg:
	Virtual server reform

	- new feature: Make mapping of host entries in the virtual server
	definition more intelligent to avoid newbie gotchas and hard to find
	mis-configurations (entries in e.g. nssock/servers) a) add
	automatically an entry with the port, when non is given b) complain,
	when driver is not listening on the specified port c) add
	automatically an entry without the port, when the driver listening
	on the default port Old configurations (doing a-z manually) should
	continue to work, non RFC compliant (test) cases have to be fixed
	(when a driver uses a non-default port, and the request contains no
	port)
	- Added documentation
	- bugfix: Avoid potential double-initialization of driver modules when
	multiple servers are used.
	- bugfix: Postpone registration of virtual servers until all servers
	are defined. Before it was possible that NaviServer boot was
	terminated, when a default server of a driver was not yet defined.

2017-09-08 14:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (51d9f97448ce)

	* nsd/url.c:
	Whitespace changes: trim trailing spaces

2017-09-08 14:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f42615f0b2e8)

	* nsd/url.c:
	Improve comment

2017-09-08 14:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab076d703b47)

	* nsd/tclhttp.c:
	Avoid adding square braces in Ns_HttpLocationString when no port and
	defPort is provided (we assume, the host component can e used as
	provided)

2017-09-08 14:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (adc62c2e638d)

	* nsd/tclvar.c:
	speedup: use Tcl_CreateHashEntry instead of Tcl_FindHashEntry since
	the first uses the latter.

2017-09-08 09:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7457e3cc67e4)

	* nsd/driver.c:
	Reduce variale scope and improve debug message

2017-09-08 08:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c6d789010f2e)

	* nsd/driver.c:
	Add log debug entry, when lookup of virtual server fails and driver
	uses fallback

2017-09-07 07:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86d748ce085e)

	* nsd/quotehtml.c:
	Improve comment

2017-09-07 07:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44cbfc41fc10)

	* nsthread/pthread.c:
	eliminate variable

2017-09-06 12:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (377c0dbf5abe)

	* nsd/quotehtml.c:
	Improve performance of ns_quotehtml

	This function is in real-world application on the most
	frequently used functions of NaviServer. This change improves the
	performance of ns_quotehtml by about 40-60% by avoiding per-
	character calls to *DStringAppend

2017-09-05 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bca9c40f4fad)

	* doc/src/naviserver/ns_cache.man:
	Improve documentation

2017-09-04 14:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8abe8d494407)

	* configure.ac:
	bump version number

2017-09-04 14:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5368404fca8)

	* include/nsthread.h, nsd/dstring.c, nsd/log.c, nsd/queue.c,
	nsd/tclcache.c, nsd/tclhttp.c, nsd/tcljob.c, nsd/tclset.c,
	nsd/tcltime.c, nsd/tclvar.c, nsdb/dbtcl.c, nsthread/memory.c,
	nsthread/mutex.c, nsthread/thread.c:
	Improve performance:

	Improve performance by replacing the slow "snprintf(... %d ...)"
	function by a the new functions ns_uint32toa() and ns_uint65toa().
	This change improved the performance of EnterSet() by nearly a
	factor of 2.5. Before, snprintf() took in this function 3x (!) as
	long as Tcl_CreateHashEntry(), thew new ns_u32toa() is about 6x
	faster as Tcl_CreateHashEntry().

	Before: 196,229 => nsd/tclset.c:EnterSet (165x) 831,510 =>
	nsd/tclset.c:EnterSet (710x)

	After 81,390 => nsd/tclset.c:EnterSet (165x) 337,050 =>
	nsd/tclset.c:EnterSet (710x)

	 New functions: int ns_uint32toa(char *buffer, uint32_t n)
	NS_GNUC_NONNULL(1); int ns_uint64toa(char *buffer, uint64_t n)
	NS_GNUC_NONNULL(1);

2017-09-04 13:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (924cf3f2cac3)

	* tests/ns_info.test:
	whitespace changes

2017-09-03 12:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (77c04415235a)

	* merge

2017-09-03 12:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (04778c971882)

	* include/ns.h:
	relax nonnull annotation

2017-09-03 12:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3bea993a690a)

	* nsd/tclcache.c:
	Whitespace change

2017-09-03 12:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e3ba909f2375)

	* doc/src/naviserver/ns_cache.man:
	update documentation

2017-08-31 16:53 -0400  Andrew Piskorski  <atp@piskorski.com>  (0e15f7ba7ae6)

	* Merge Gustaf's 2017-08-29 changes.

2017-08-29 17:00 -0400  Andrew Piskorski  <atp@piskorski.com>  (439d266c60fb)

	* tcl/sendmail.tcl:
	Use local time (with timezone) instead of UTC in Date header.

2017-08-29 16:58 -0400  Andrew Piskorski  <atp@piskorski.com>  (6186669f1f64)

	* tcl/sendmail.tcl:
	For the deprecated warning, do not write entire body of email to the
	log!

2017-09-02 16:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (769ca5c24b61)

	* nsd/tcljob.c:
	Fix typos

2017-09-02 16:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb5b585a266f)

	* nsd/tcljob.c:
	Whitespace changes

2017-08-29 18:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e2e9fff3fa3d)

	* nsperm/doc/mann/ns_perm.man:
	align documentation with source code

2017-08-29 17:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c036c9c5b83)

	* doc/src/manual/tcl-overview.man:
	Improve documentation

2017-08-29 16:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a347faf877c7)

	* tests/cookies.test:
	Fix error message, when the named cookie is not found

2017-08-22 20:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7911fbf46c6)

	* nsd/conn.c:
	Fix asserton as pointed out by Andrew https://bitbucket.org/naviserv
	er/naviserver/commits/92267b60389ffa694dbbfa2f661d7c0914890bc2

2017-08-21 15:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a71c34edd12b)

	* include/nsthread.h:
	fix indentation and nonnull constraint

2017-08-21 15:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0faa960d3da6)

	* nsd/driver.c:
	Fix variable scope

2017-08-21 15:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (819ac3bc7710)

	* nsd/cache.c:
	Improve safety

2017-08-21 15:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (987321ee930a)

	* nsd/listen.c:
	Fix variable scope

2017-08-19 18:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (98b7cb3ed4d0)

	* doc/src/manual/admin-maintenance.man:
	Improve documentation: rewrite obsolete parts

2017-08-15 12:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (927cfd290169)

	* nsthread/reentrant.c:
	White-space change: untabify

2017-08-15 12:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5590f907b656)

	* nsthread/reentrant.c:
	Remove over-eager asserts

2017-08-15 12:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba9a37652111)

	* include/ns.h:
	White-space changes: untabify

2017-08-15 12:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba3f38c864e2)

	* nsd/driver.c:
	White-space change: break some overlong lines

2017-08-15 12:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e35478fee1e)

	* include/ns.h:
	Remove redundant declarations

2017-08-15 12:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a4056f789a83)

	* nsd/driver.c:
	White-space changes

2017-08-15 12:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (254738808113)

	* nsd/driver.c:
	Add assertion to ease life of static checker

2017-08-15 12:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d128a8d32bd)

	* nsd/cookies.c:
	White-space changes: untabify, break overlong lines, trim trailing
	spaces

2017-08-15 11:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa0db411bc56)

	* nsd/cookies.c:
	Fix loop for "ns_getcookie -all ..."

2017-08-15 11:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b561c15ccb13)

	* nsd/urlencode.c:
	Whitespace changes: strip trailing spaces, break overlong lines

2017-08-15 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0f830b4c0e64)

	* nsd/conn.c:
	Whitespace change: untabify and delete trailing spaces

2017-08-15 11:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92267b60389f)

	* nsd/conn.c:
	Make assumptions explicit and help static code checkers

2017-08-15 11:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00bfd7b9e4f4)

	* nsd/auth.c:
	Reduce variable scope

2017-08-15 10:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ab013c27064)

	* tcl/aolserver-openacs.tcl:
	Improve info message to include information about configure options
	of nsf

2017-08-15 10:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec800cadad6f)

	* tcl/nstrace.tcl:
	Fix: make message a warning, improve message

2017-08-14 21:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e27265d2cfde)

	* tests/http_persistent.test:
	Fix possible interaction between test cases: cleanup of more
	temporary variables

2017-08-14 21:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6a1cc7d7a5c3)

	* tests/http_persistent.test:
	Fix possible interaction between test cases: cleanup "result"
	variable after test cases

2017-08-08 12:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (79752789daa2)

	* doc/src/naviserver/ns_cookie.man, nsd/cookies.c, tests/cookies.test:
	Add option "-all" to ns_getcookie

	Background: By using a cookie domain, it is possible that a cookie
	with a specified name is given two value, one from e.g. the parent
	domain, one from the current; this can lead to situation not easy to
	debug, when e.g. domain cookies are introduced from other
	applications in the same domain. The "-all" option provides
	instrastructure support to detect such situations by returning
	potentially multiple values for the cookie.

2017-07-27 15:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (110052969811)

	* nsd/cache.c:
	Fix potential memory leak, when an entry with uncommitted value is
	unset

2017-07-26 09:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a42f29ff1ccf)

	* nsd/connchan.c, nsd/listen.c:
	revert escaped changes

2017-07-26 08:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c3a63577656)

	* nsd/cache.c, nsd/connchan.c, nsd/listen.c:
	minor cleanup (remove debugging line, ...)

2017-07-26 08:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90085b2126d1)

	* include/ns.h, nsd/cache.c, nsd/tclcache.c:
	Improve performance when uncommitted entries are committed or rolled
	back:
	- use a separate hash table to make commit / rollback operations
	independent of the number of entries in the stack
	- reduce performance dependency on number of caches significantly

	Improve source code documentation

2017-07-24 11:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4c0944d05094)

	* configure.ac:
	Bumping version to 4.99.16d9

2017-07-24 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4c8797135a73)

	* nsthread/mutex.c:
	make sure, nameLength is always initialized in Ns_MutexSetName2()

2017-07-24 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e5d4a73ea07)

	* nsd/dns.c:
	update interface

2017-07-24 10:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f9934c5842f)

	* nsd/init.tcl:
	adding "ns_cache_transaction_rollback -all" to ns_cleanup

2017-07-24 10:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26bd742a6abc)

	* include/ns.h, nsd/cache.c, nsd/nsd.h, nsd/tclcache.c, nsd/tclcmds.c,
	tests/ns_cache.test:
	Adding transaction semantics for ns_cache*

	Background: when ns_cache_* commands are used within a DB
	transaction (e.g. in OpenACS), it might occur, that partial results
	of the transaction are cached before the transaction is committed.
	When the transaction is rolled back, invalid values might be kept in
	the stack leading to erroneous and hard to debug behavior.
	Furthermore, information about committed changes might leak into
	other threads via the cache.

	The new cache transaction semantics is implemented via the three
	commands

	 ns_cache_transaction_begin ns_cache_transaction_commit
	ns_cache_transaction_rollback

	When no ns_cache_transaction* commands are used, the behavior is
	exactly as before. When cache transactions are used (initiated by a
	ns_cache_transaction_begin and ended via ns_cache_transaction_commit
	or ns_cache_transaction_rollback, the ns_cache commands provide in
	essence the following functionalities:

	a) The ability to rollback of the values since the matching
	ns_cache_transaction_begin b) Isolation of behavior: cached values
	from incomplete cache transactions are just visible from the current
	thread, but not from other threads. c) Nesting: transactions can be
	nested (up to a compile time constant, currently 16) d)
	Introspection: the statistics about cache commits and rollbacks are
	included in the cache statistics.

	Implementation: The implementation is an extension of the pre-
	existing update semantics and follows as close as possible the
	existing model used in ns_cache_eval. The "value" of a cache entry
	is NULL until a commit is performed, other threads competing for the
	same cache entry have to wait for the "commit" operations.

	The old C-API continues to work as before. The new transaction aware
	interface is implemented over the following commands

	 Ns_CacheFindEntryT() Ns_CacheFirstEntryT() Ns_CacheGetValueT()
	Ns_CacheNextEntryT() Ns_CacheWaitCreateEntryT()

	In order to avoid potential unwanted long-time locks on cache
	entries when cache transactions are not properly closed (e.g. in
	error cases), "ns_cleanup" is now extended to roll back all changes.

	The following ns_cache commands are now cache transaction aware:

	 ns_cache_get ns_cache_eval ns_cache_incr ns_cache_append
	ns_cache_lappend ns_cache_keys ns_cache_flush

2017-07-17 18:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7abe3c5f6da)

	* nsproxy/nsproxylib.c:
	Improve cleaness of compilation with gcc 7.1.1 under FC26

2017-07-17 18:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b1ccae5c1d7)

	* nsthread/tls.c:
	Improved cleanness for compilation with gcc 7.1 under FC26

2017-07-12 03:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bbba4954ad0e)

	* nsd/tclcache.c:
	prefer boolean value over int

2017-07-03 21:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ba04ba89834)

	* openacs-config.tcl:
	Fix variable name in config file

2017-07-01 12:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ae340b38efa)

	* nsd/queue.c:
	- include the connID in the thread name to ease debugging, when
	multiple requests are processed by the same connection thread and it
	is not clear, where the first ends and the next starts
	- reduce the number of returns before the end of the function
	- improve documentation

2017-07-01 11:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0f4605fd96a3)

	* nsd/cache.c:
	- don't use equal comparison on boolean functions
	- improve branch prediction

2017-06-21 13:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (85d2368123c7)

	* nsd/driver.c:
	minor cleanup

2017-06-21 12:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a247f2f96529)

	* nsd/driver.c:
	Honor provided method name

2017-06-21 11:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (515e8bd10b1d)

	* nsd/listen.c:
	Ns_SockListenCallback(): don't set the port to 0 before calling
	bind(). Not sure, why this was done before.

2017-06-21 11:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2db55a085138)

	* nsd/sockaddr.c:
	Improve symmetry for V4MAPPED addresses. ns_inet_pton() returns a
	IPv4 address (family AF_INET) for an IPv4 address. however, a
	reverse lookup over getsockname() might result in a V4MAPPED
	address, leading the a different IP string, which is valid but
	different to the former. With this change, ns_inet_ntop() returns
	for V4MAPPED addresses as well the plain IPv4 string.

2017-06-21 10:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5855af96266)

	* nsd/sock.c:
	Add debugging lines

2017-06-21 10:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7fc4e0ec3d03)

	* nsd/connchan.c:
	Return as well ip address [ns_connchan listen] in result dict
	(needed e.g. from PASV in FTP server implementations)

2017-06-20 17:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ff8a16cb6ff)

	* include/ns.h, nsd/listen.c, nsd/tclsock.c:
	User proper undefined IP-address, such we can make fist arg of
	Ns_SockListenCallback mandatory

2017-06-20 17:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03e3a1a94fd3)

	* nsd/connchan.c:
	Use proper default server, when no servername can be determined

2017-06-20 15:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (850103a38cc7)

	* configure.ac:
	Bump version number to 4.99.16d8

2017-06-20 15:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1576d108ddd2)

	* .hgignore:
	Add infer-out to ignore files

2017-06-20 15:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bfa52a1e7033)

	* nsd/listen.c:
	- Ns_SockListenCallback: alter interface to (a) return the
	listensocket and (b) to be able to bind to the fresh socket. This is
	necessary for e.g. FTPD's passive server connections, where the
	server offers a freshly bound socket to the client to connect to
	(EPSV, extended passive mode).

	- driver.c:
	  * factor out LookupDriver() to improve reusability
	  * new function NSDriverSockNew() to create an initialized driver Sock
	structure,

	- connchan.c:
	  * new subcommand "ns_connchan listen"
	  * missing: + implementation of ssl variant via specifying "-driver" +
	handling of "-server" (and obtaining defaultserver)

2017-06-20 15:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (384d4dcf639f)

	* include/ns.h, nsd/connchan.c, nsd/driver.c, nsd/nsd.h, nsd/sock.c,
	nsd/tclsock.c, tests/ns_conn.test:
	- Ns_SockListenCallback: alter interface to (a) return the
	listensocket and (b) to be able to bind to the fresh socket. This is
	necessary for e.g. FTPD's passive server connections, where the
	server offers a freshly bound socket to the client to connect to
	(EPSV, extended passive mode).

	- driver.c:
	  * factor out LookupDriver() to improve reusability
	  * new function NSDriverSockNew() to create an initialized driver Sock
	structure,

	- connchan.c:
	  * new subcommand "ns_connchan listen"
	  * missing: + implementation of ssl variant via specifying "-driver" +
	handling of "-server" (and obtaining defaultserver)

2017-06-20 14:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e482cd1bb553)

	* nsd/url2file.c:
	Reduce variable scope

2017-06-20 14:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f2d110c6d74)

	* doc/src/naviserver/ns_base64decode.man:
	Improve man page

2017-06-20 14:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c727097b99e0)

	* Makefile:
	Don't alter permission on every "Make install"

2017-06-20 10:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3704792e040c)

	* nsd/urlspace.c:
	whitespace change: remove trailing spaces

2017-06-20 10:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d05bc11b7784)

	* nsd/urlspace.c:
	remove unneeded assert

2017-06-20 09:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (575ebb7a82b7)

	* nsd/tcljob.c:
	Improve comment, white space change

2017-05-30 09:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15ad74bc59a5)

	* nsd/return.c:
	Add comment

2017-05-30 09:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d3a2069de03e)

	* nsproxy/nsproxylib.c:
	Reduce verbosity

2017-05-29 13:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc1f55c9e821)

	* nsd/config.c, nsd/driver.c, nsd/tclcache.c, nsd/tclfile.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tcltime.c, nsd/urlencode.c,
	nsthread/mutex.c, nsthread/rwlock.c, nsthread/tls.c:
	Fix potential crashes as flagged by fb infer.

2017-05-27 20:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7866c64d12d0)

	* nsd/encoding.c, nsd/fastpath.c, nsd/filter.c, nsd/op.c,
	nsd/pathname.c, nsd/tclcache.c, nsd/tclinit.c, nsd/url2file.c,
	nsd/urlspace.c:
	NsGetServer() can return NULL (in error cases); don't assume in the
	code, that the result is not NULL.

2017-05-25 12:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9318e95542e4)

	* include/ns.h, nscgi/nscgi.c, nsd/exec.c, nsproxy/nsproxylib.c:
	Improve error handling in nsproxy:
	- new function Ns_WaitForProcessStatus(): this function allows
	handling the received signal by the calling client. This way, a
	misleadinng error in the log file can be avoided.
	- Ns_WaitForProcessStatus: disambiguate variable "status" into wait-
	status and return-status.
	- mark Ns_WaitProcess() as deprecated. This function was replaced
	years ago by Ns_WaitForProcess()
	- fine tune output for eval-timeouted nsproxy with writing much output
	(avoid unneeded zombie and killing log entries)

2017-05-25 12:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e63bba9781cd)

	* openacs-config.tcl:
	Fix typos

2017-05-21 11:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (165db90be5aa)

	* openacs-config.tcl:
	Add setting of OpenACS kernel parameter
	"NsShutdownWithNonZeroExitCode" in sample config file

2017-05-18 09:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4867280f239f)

	* doc/src/naviserver/ns_kill.man, doc/src/naviserver/ns_shutdown.man:
	Improve man page of ns_shutdown (include option "-restart")

2017-05-18 09:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd0f93cecbb2)

	* sample-config.tcl.in:
	Include global parameter shutdowntimeout in somple config file

2017-05-15 15:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f17b7225007)

	* nsproxy/nsproxylib.c:
	make proxy shutdown more robust

2017-05-14 12:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (96c4f2de2526)

	* doc/src/naviserver/ns_urlencode.man:
	Improve man page

2017-05-14 11:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86a87efb8240)

	* nsd/crypt.c, nsd/sock.c:
	replace all occurrences of strcpy() with a more safe variant

2017-05-13 20:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3da62348cacf)

	* configure.ac:
	Bump version number to 4.99.16d7

2017-05-13 20:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e6167c1f28a)

	* nsproxy/nsproxylib.c:
	Avoid potential hangs of nxproxy in cases the evaltimeout is very
	small and the client is writing much data causing blocking write
	operations

2017-05-10 14:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9568e9ddac2b)

	* nsd/nsmain.c:
	address issue of pipe between starting process and child in watchdog
	mode (as reported by Zoran)

2017-05-10 14:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8cd3a2b39f7a)

	* nsd/driver.c:
	allow fully qualified domain names in host header field (as allowed
	in RFC 2976)

2017-05-10 13:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7ac0ee65d0fe)

	* nsd/httptime.c, nsproxy/nsproxylib.c:
	Silence clang 4.0 (with full set of warnings)

2017-05-10 11:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d332e8e9944)

	* nsproxy/doc/mann/ns_proxy.man:
	Improve man page

2017-05-07 21:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (31d1e34ea667)

	* doc/src/naviserver/ns_http.man:
	Improve man page

2017-05-07 21:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2cd0bfa07bd7)

	* nsd/nswin32.c:
	Improve cleanness of compilation under windows

2017-05-07 21:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15bd56e0ddb6)

	* nsd/rollfile.c:
	Improve handling of invalid input

2017-04-29 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b70bde3e851d)

	* nsd/cache.c, nsd/driver.c, nsd/event.c, nsd/fastpath.c,
	nsd/filter.c, nsd/form.c, nsd/op.c, nsd/range.c, nsd/return.c,
	nsd/returnresp.c, nsd/tclinit.c, nsd/tclthread.c, nsdb/dbinit.c,
	nsthread/cslock.c, nsthread/memory.c, nsthread/rwlock.c:
	Make to access nonnull-values only after assert

2017-04-29 10:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b57ffe0b3705)

	* nsd/task.c:
	Make sure to dereference pointer after assert

2017-04-26 09:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03be226caf01)

	* nsd/rollfile.c:
	Fix comparison

2017-04-26 09:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (47ea31965b73)

	* nsd/driver.c:
	Silence static checker

2017-04-26 09:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33bfd3c506c2)

	* nsd-config.tcl, nsd/binder.c, nsd/sock.c:
	remove code smell expression assigned to a narrower or different
	essential type under windows

2017-04-25 13:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1b4aaf686063)

	* nsd/fastpath.c, nsd/url2file.c:
	Make sure "ns_server serverdir" and "ns_server pagedir" return
	normalized paths to avoid potential confusions

2017-04-25 13:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9872d073a5e7)

	* openacs-config.tcl:
	add strict-transport-security to sample config file

2017-04-25 13:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e066219e30a)

	* nscgi/nscgi.c:
	streamline terminology

2017-04-24 11:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (745ed722b20e)

	* openacs-config.tcl:
	Improved sample config file for OpenACS: allow one to specify the actual
	user in the access log

2017-04-24 09:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (742004627b02)

	* nsd/httptime.c, nsd/tclmisc.c, nsproxy/nsproxylib.c:
	Make sure to initialize variables on all possible paths

2017-04-24 09:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ec1cdb7ada1)

	* nsd/binder.c, nsd/exec.c:
	Prefer void* over legacy caddr_r

2017-04-22 19:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (98e5551f9288)

	* bitbucket-install.tcl, doc/src/manual/admin-tuning.man,
	doc/src/manual/adp-overview.man, doc/src/manual/c-driverdb.man,
	doc/src/manual/main-faq.man, doc/src/manual/main-standards.man,
	doc/src/naviserver/ns_adp_exception.man,
	doc/src/naviserver/ns_mutex.man, doc/src/naviserver/ns_write.man,
	doc/src/naviserver/returnstatus-cmds.man, include/ns.h, nsd-
	config.tcl, nsd/adpcmds.c, nsd/cache.c, nsd/filter.c, nsd/log.c,
	nsd/tclinit.c, nsd/tclobjv.c, nsd/urlencode.c,
	nsdb/doc/mann/ns_db.man, nssock/doc/mann/nssock.man, openacs-
	config.tcl, tcl/aolserver-openacs.tcl, tcl/nstrace.tcl:
	Standardize spelling of names of products (Tcl, AOLserver,
	PostgreSQL, NaviServer) More spelling fixes

2017-04-22 18:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (961d2d4b13f6)

	* doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/manual/tcl-lib-file.man,
	doc/src/naviserver/ns_adp_parse.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_return.man, doc/src/naviserver/nsv.man:
	Use uniform spelling of "Tcl"

2017-04-22 18:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (471d0df37a35)

	* include/nsconfig.h.in:
	Use uniform spelling of "Tcl"

2017-04-22 18:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5a9ca750c4a)

	* nsd/adpcmds.c, nsd/adpparse.c, nsd/driver.c, nsd/listen.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclset.c, nsd/tclsock.c,
	nsperm/init.tcl, nsperm/nsperm.c, tcl/aolserver-openacs.tcl,
	tests/testserver/modules/client.tcl:
	Use uniform spelling of "Tcl"

2017-04-22 18:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9141e5b9c73e)

	* bitbucket-install.tcl, doc/src/manual/admin-tuning.man,
	doc/src/manual/adp-overview.man, doc/src/manual/c-driverdb.man,
	doc/src/manual/main-faq.man,
	doc/src/naviserver/ns_adp_exception.man,
	doc/src/naviserver/ns_mutex.man, doc/src/naviserver/ns_write.man,
	doc/src/naviserver/returnstatus-cmds.man, include/ns.h, nsd/cache.c,
	nsd/driver.c, nsd/filter.c, nsd/log.c, nsd/tclobjv.c,
	nsdb/doc/mann/ns_db.man:
	Fix spelling errors

2017-04-22 18:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec5a8ec6233b)

	* nsd/adpcmds.c:
	Improve variable names

2017-04-22 18:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16c287a858f2)

	* configure.ac:
	Use uniform spelling of "Tcl"

2017-04-22 18:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a94ce0a9ee03)

	* nsperm/init.tcl:
	Use more straightforward Tcl idiom to access first character of a
	string

2017-04-22 18:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa9eb12209aa)

	* tcl/compat.tcl, tcl/form.tcl:
	Use safe variant of "file delete"

2017-04-22 18:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f84cf0477db1)

	* tcl/nstrace.tcl:
	Fix spelling error

2017-04-22 18:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12f9542f0010)

	* tcl/charsets.tcl:
	fix typo in variable name

2017-04-22 17:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42d5a2347d08)

	* doc/src/manual/tcl-overview.man, doc/src/naviserver/ns_http.man:
	Use safe variants in man pages

2017-04-22 17:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b631195267b8)

	* include/ns.h, nsd/rollfile.c:
	Reduce return statement before end of function

2017-04-22 17:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44ff54b1104a)

	* nsd/conn.c:
	Group int declaratons

2017-04-21 15:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (376a9de6d6c5)

	* NEWS, doc/src/naviserver/ns_limits.man-retracted,
	include/Makefile.global.in, include/nsthread.h, m4/misc.m4,
	m4/usermgt.m4, nsd/init.tcl, nsd/nswin32.c, nsd/progress.c,
	nsd/queue.c, nsd/request.c, nsd/return.c, nsd/sls.c, nsd/str.c,
	nsd/task.c, nsd/tclinit.c, nsd/tcljob.c, nsd/tclobjv.c,
	nsd/tclresp.c, nsd/tclset.c, nsd/tclxkeylist.c, nsd/urlspace.c,
	nsdb/dbinit.c, nsperm/nsperm.c, nsproxy/doc/mann/ns_proxy.man,
	nsproxy/nsproxylib.c, nsssl/ChangeLog, nsthread/nsthreadtest.c,
	nsthread/pthread.c, nsthread/rwlock.c, nsthread/tls.c,
	nsthread/winthread.c, openacs-config.tcl, sample-config.tcl.in,
	tcl/file.tcl, tcl/form.tcl, tests/cookies.test, tests/http.test,
	tests/ns_server.test, tests/tclresp.test:
	Fix spelling errors

2017-04-21 14:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8483117386af)

	* nsd/sock.c:
	Reduce implicit conversions

2017-04-21 14:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3338a29ef3d)

	* nsd/binder.c:
	Reduce implicit conversions

2017-04-20 23:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ead71ab56593)

	* nsd/nsmain.c, nsd/nsthread.c:
	Fix spelling errors

2017-04-20 23:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (000af0655cfb)

	* nsd/form.c:
	Fix spelling error

2017-04-20 23:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (79ef62dddc9a)

	* doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/manual/c-driverdb.man, doc/src/manual/main-
	standards.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_cookie.man, doc/src/naviserver/ns_mktemp.man,
	doc/src/naviserver/ns_parseheader.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_setprivileges.man, nscp/nscp.c,
	nsd/callbacks.c, nsd/compress.c, nsd/conn.c, nsd/connchan.c,
	nsd/connio.c, nsd/dns.c, nsd/driver.c, nsd/dstring.c, nsd/event.c,
	nsd/filter.c, nsd/form.c, nsd/httptime.c, nsd/info.c, nsd/log.c:
	Fix spelling errors

2017-04-20 16:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8e9452c4446a)

	* nsdb/nsdb.h, nsdbtest/nsdbtest.c:
	- define typedef for NsDb_DriverInitProc
	- define typedef for NsDb_ReturnCode

2017-04-20 16:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dab02d6daf2f)

	* nsd/urlspace.c:
	Reduce implicit conversions

2017-04-20 16:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f2963b2456eb)

	* nsd/tclsock.c:
	Reduce implicit conversions

2017-04-20 16:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e2ed62a4bbe)

	* nsd/dstring.c:
	Reduce implicit conversions

2017-04-17 19:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bcbd7acd5177)

	* nsd/urlencode.c:
	improve warning message text

2017-04-17 18:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e1a2b10edb1c)

	* include/ns.h, nsd/encoding.c, nsd/tclinit.c, nsd/urlencode.c,
	tests/ns_urlencode.test:
	urlencode reform:
	- simplify logic
	- avoid malloc/free
	- improve performance in common cases by about a factor of 2
	- extend regression test with security relevant case

2017-04-16 11:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15cf3a2a586d)

	* nsd/urlencode.c:
	Use URL encoding, if no charset is given. This fixes an old (at
	least 10 year old) bug which can allow one to sneak in binary nulls into
	query variables, which provide an injection attack vector

2017-04-15 10:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2b08487644f)

	* configure.ac:
	Bump version number to 4.99.16d6

2017-04-15 10:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9cfbed666e0b)

	* tests/cookies.test:
	align cookie test with code

2017-04-15 10:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (efae8635b3b1)

	* nsd/conn.c:
	Reduce number of goto statements

2017-04-15 10:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f23ce7c603f2)

	* nsd/url.c:
	fix newly inserted assertion

2017-04-15 09:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d22b4ed634da)

	* nsd/sock.c:
	reduce implicit conversions

2017-04-14 19:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (243c870f2cd9)

	* merge

2017-04-13 14:49 +0100  David Osborne  <david@qcode.co.uk>  (83e8dd57f5af)

	* doc/src/naviserver/ns_parseheader.man:
	Add disposition option to ns_parseheader

2017-04-12 15:51 +0100  David Osborne  <david@qcode.co.uk>  (13a5ad02930c)

	* doc/src/naviserver/ns_connchan.man:
	Add ns_connchan exists doc entry

2017-04-14 18:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23bb26d4071b)

	* nsd/url.c:
	make assumptions explicit

2017-04-14 18:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00a279170092)

	* nsd/info.c:
	Reduce variable scopes

2017-04-12 10:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a33f8b96a32f)

	* tests/cookies.test, tests/ns_urlencode.test:
	Align and extend regression test

2017-04-12 10:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0efa050285d7)

	* nsd/urlencode.c:
	Encode percent sign (indicator for percent-encoded octets) although
	it is not required by RFC 6265. Elsewise a raw string "%20" would be
	encoded as "%20" (no need to encode anything) but decoded as " "
	(space).

2017-04-12 10:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c3499f334de5)

	* nsd/dns.c:
	Prefer type bool over int for Boolean values

2017-04-12 09:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (523130f70c7b)

	* nsd/driver.c, nsd/info.c:
	Reduce number of returns before end of function

2017-04-12 09:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0e4d66dcdecc)

	* nsd/nsmain.c:
	Fix usage message

2017-04-11 21:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4379218d636b)

	* doc/src/naviserver/ns_info.man:
	Improve documentation

2017-04-10 12:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40401e1cf50d)

	* NEWS:
	fix typo

2017-04-10 12:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dac4ab6f2a36)

	* nsd/pathname.c:
	Reduce Usage of goto statements

2017-04-10 12:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f133d4f16be)

	* nsd/urlspace.c:
	Improve error message

2017-04-08 20:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8511959193b8)

	* nsproxy/nsproxylib.c:
	make nsproxy compileable under windows

2017-04-08 20:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (37e956fb6068)

	* nsd/log.c:
	Be explicit on type conversions

2017-04-08 16:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eeba8c21619b)

	* nsd/sls.c, nsd/tclthread.c, nsd/urlspace.c:
	Reduce number of returns before end of function

2017-04-08 16:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fad4ceb6e370)

	* nsd/crypt.c, nsd/sched.c, nsd/tclenv.c, nsd/tclfile.c,
	nsd/tclresp.c:
	Improve type cleanness

2017-04-08 15:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1084730b5a00)

	* nsd/dns.c:
	Improve type cleanness

2017-04-08 15:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a38f72f75812)

	* doc/src/naviserver/commandlist.man, doc/src/naviserver/ns_write.man:
	Improve documentation
	- Group streaming HTML commands
	- Remove deprecated command ns_connsendfp from documentation

2017-04-08 13:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c29128a5a4d3)

	* doc/src/naviserver/ns_chan.man,
	doc/src/naviserver/ns_sockcallback.man:
	Improve manpages: make distinction between input argument "when" and
	the reported condition more clear.

2017-04-07 21:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0cd7363626a1)

	* nsssl/nsssl.c:
	add error handling

2017-04-07 16:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dd690d4ec379)

	* nsd/urlencode.c:
	Remove unneeded variable

2017-04-07 16:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (221d0c8f629b)

	* nsssl/nsssl.c:
	Fix bug with hinging close operations (SSL_shutdown hangs). This was
	an old back dating back to the initial version of nsssl in 2006 bug
	cahsed an "ns_connchan close" operation to hang.

2017-04-05 12:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b852119ea5f)

	* nsd/urlencode.c, tests/ns_urlencode.test:
	factor out redundant hex character decodings from ByteKey arrays.

2017-04-05 08:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b5576e283b8)

	* include/ns.h, nsd/cookies.c, nsd/urlencode.c:
	Implement cookie encodings as defined in RFC 6265 (HTTP State
	Management Mechanism, 2011).
	 * New API functions: Ns_CookieEncode() Ns_CookieDecode()
	 * Additional accepted value for parameter "-part" in "ns_urlencode"
	and "ns_urldecode": one can specify in addition to "query" and "path"
	now "coockie" to request cookie encoding/decoding.

2017-04-05 08:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (049a9c86940b)

	* nsd/sockfile.c:
	fix compilation issue under Debian 8.6 (see Davids comment)

2017-04-05 08:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc282eadc7ab)

	* nsd-config.tcl:
	fix sample config file and move "enabletclpages" to the section,
	from where it is used in the startup files

2017-04-05 08:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (89802bf0e537)

	* nsd/request.c:
	Add const declaration

2017-04-05 08:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ddc69a8e62d)

	* nsd/binder.c:
	Improve type cleanness for windows

2017-04-03 07:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97a26da29a5d)

	* nsd/sock.c:
	Improve type-cleanness under windows

2017-04-03 06:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (efacfcec5fd4)

	* nsd/sock.c:
	windows cleanup: use ns_sockerrno macro instead of duplicating the
	logic

2017-04-03 06:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (de727796c66c)

	* nsd/binder.c:
	Improve cleanness of compilation under windows

2017-04-02 19:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00fe94aab89d)

	* include/ns.h, nsd/conn.c, nsd/request.c, tests/ns_urlencode.test:
	Keeping the correct hierarchy of a URL as impled by RFC 3986 in
	[ns_conn urlv] (For details see
	https://sourceforge.net/p/naviserver/mailman/message/35762900/)

2017-04-02 12:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1fadec70fa76)

	* include/nsthread.h, nscgi/nscgi.c, nsd/binder.c, nsd/connchan.c,
	nsd/driver.c, nsd/exec.c, nsd/sock.c, nsd/sockcallback.c,
	nsd/sockfile.c, nsd/tclsock.c, nsd/unix.c, nsd/watchdog.c,
	nsproxy/nsproxylib.c, nsthread/pthread.c:
	Improve Windows support for recent versions of visual studio
	(versions after visual studio 2010) by introducing NS_EINPROGRESS
	and NS_EINTR for abstracting from the raw constants (many thanks to
	Maurizio for the input)

2017-04-02 12:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8bb68f26ab18)

	* nsd/httptime.c:
	improve comment

2017-04-02 12:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b73c0b9fa82f)

	* nsd/request.c:
	improve comment

2017-03-29 11:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b8611d66f0b)

	* nsd/url2file.c:
	minior restructuring

2017-03-29 10:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d15452185ef)

	* nsd/sock.c:
	Improve type cleanness under windows (should probably make
	NS_MSG_IOVLEN_T a type)

2017-03-29 10:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5ce7d21a93b)

	* include/ns.h, nsd/nsmain.c, nsd/watchdog.c, nsthread/nsthreadtest.c:
	Use NS_GNUC_PRINTF on more occasions

2017-03-29 10:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b2ccb422049)

	* include/ns.h, include/nsthread.h, nsd/binder.c, nsd/nswin32.c,
	nsd/sock.c:
	Introducing ns_sockerrno_t to sort out different error types between
	windows and unix

2017-03-26 13:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4b0bc875b906)

	* nsd/urlencode.c:
	To make query-component encoding usable for encoding/decoding
	cookies, the characters "," and ";" have to be percent-encoded as
	well. uppercase percent escape decoding was already implemented, not
	need to check this twice

2017-03-25 18:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2297124c859a)

	* nsd/urlencode.c:
	make sure that only valid hex codes are converted

2017-03-25 18:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1840789a21c6)

	* nscp/nscp.c:
	Use DString instead of plain buffer

2017-03-25 17:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59542049e4a4)

	* nsd/httptime.c:
	Reduce number of returns before end of function

2017-03-24 17:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (75fdb564f527)

	* nsd/urlencode.c:
	Remove dibugging code

2017-03-24 16:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d9869c81b017)

	* nsd/urlencode.c:
	fix lengh of specially handled blank

2017-03-24 15:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe04a026c5f4)

	* nsd/urlencode.c:
	make sure to null terminate encoded string

2017-03-24 14:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (557e820ad11f)

	* nsd/urlencode.c:
	Don't warn on unencoded '=' characters

2017-03-24 14:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a829d76f20ca)

	* nsd/urlencode.c:
	fix variable name

2017-03-24 14:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7b8fcbde84d1)

	* configure.ac:
	Bump version number to 4.99.16d5

2017-03-24 14:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e82cfd81657e)

	* include/ns.h, nsd/returnresp.c, nsd/urlencode.c:
	urlencode reform:

	- The new code conforms to RFC3986 (2005), which has a more precise
	and differently structured definition (e.g. no 'unwise' characters)
	of characters encoded in URLs. The coding of the query part is
	actually defined in the HTML 4.01 definitions.

	- Coding of space (" ") in the path and query part is still
	different as in older versions of NaviServer (spaces are coded as
	"*" in the query part and "%20" in the path segments. This
	distinction is not not necessary according to the RFCs.

	- The coding tables are documented in detail, containing design
	considerations.

	- A new flag "-uppercase" added for supporting encoding for OAuth
	(RFC 5849); note that the "path" segment encoding has to be used to
	avoid coding space as "+".

	- A warning is produced now, when a URL is passed to the location
	field (e.g. ns_returnredirect), which is not properly encoded. Only
	characters, which have to be always coded, are flagged.

	- One can obtain the previoius encoding behavior when compiling with
	"RFC1738" defined.

2017-03-21 09:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26ddc5ddce7b)

	* nssock/nssock.c:
	Improve type cleanness and prepare for potential debugging

2017-03-20 20:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e72d45248d92)

	* include/nsthread.h, nsthread/thread.c:
	Improve print formats for windows (visual studio 2017)

2017-03-20 20:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7313607a258)

	* include/nsthread.h, nsd/dstring.c:
	Cope with changes in Universal CRT in Visual Studio 2015 where e.g.
	vsnprintf() is no longer identical to _vsnprintf().

2017-03-12 04:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3915546e79aa)

	* merge

2017-03-10 12:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (846fbca9f00f)

	* merge

2017-03-10 12:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d64a00f1c73f)

	* nsd/sockfile.c:
	- add debugging hooks for Maurizio

2017-03-11 15:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (717ac1f09e73)

	* nsd/connchan.c:
	Improve robustness of ConnChanOpenObjCmd in failure cases

2017-03-05 02:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (543c81fce445)

	* nsd/sock.c:
	Reduce number of returns before end of function

2017-03-05 01:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe8a0216135b)

	* nsd/proc.c:
	Add (commented out) debug statement to help to fix potential
	problems in windows port

2017-03-05 01:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20691226aae1)

	* nsd/nswin32.c, nsthread/error.c:
	Move definition of ns_snprintf() from nsd/nswin32.c to
	nsthread/error.c, since nsthread uses ns_snprintf. Add status lines
	about -ticker- thread to make life-time clear.

2017-03-05 01:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4237f6f46fea)

	* nsd/config.c, nsd/tclimg.c, nsd/tclmisc.c, nsd/urlencode.c:
	don't pass address of a const as a non-const pointer

2017-03-05 01:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ddf39bb2b1e)

	* nsthread/mutex.c:
	Remove debugging code

2017-03-05 01:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c488ee38c7f0)

	* nsthread/thread.c:
	Fix indentation

2017-03-04 16:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8f2073291cb)

	* nsd/nswin32.c:
	Improve cast of 32bit value

2017-03-04 16:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (62c15ab8f84a)

	* include/nsthread.h:
	Fix macro definition

2017-03-04 12:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be04393cc0cb)

	* include/nsthread.h, openacs-config.tcl:
	Document "ns/parameters tmpdir" in openacs sample config file.
	Change the default for P_tmpdir to "c:/tmp" for _WIN32

2017-03-04 11:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3fe3c0f678a9)

	* include/nsthread.h, nsd/sock.c, nsproxy/nsproxylib.c:
	Starting with VS2010 EWOULDBLOCK is defined in errno.h !=
	WSAEWOULDBLOCK, so we have to abstract to NS_EWOULDBLOCK to cope
	with earlier versions and to provide cross_platform support

2017-03-03 10:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (73a5a9677a25)

	* include/Makefile.global.in, nsd/tclset.c:
	Reduce variable scope

2017-03-01 09:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39bc8b69a3e3)

	* nsd/tclenv.c:
	Reduce number of goto statements. Reduce number of returns before
	end of function and reduce variable scopes.

2017-03-01 09:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39361de81f13)

	* nsd/tclset.c:
	Reduce number of returns before end of function and fix indentation

2017-03-01 08:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8147069e422)

	* nsd/log.c:
	Fix spelling of command name

2017-03-01 08:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb203e7ccba9)

	* nsd/log.c, nsd/tclvar.c:
	Reduce variable scope

2017-02-26 16:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dfe16657ec55)

	* configure.ac:
	Bump version number to 4.99.16d4

2017-02-26 16:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4963c78fb9fe)

	* nsd/tclvar.c:
	Reduce number of returns before end of function and reduce variable
	scopes

2017-02-26 16:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9402bc2318ee)

	* tests/ns_log.test:
	align test results (sorted options)

2017-02-26 15:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2cce6be3faa)

	* nsd/tclset.c:
	Whitespace change: replaces tabs by spaces, strip trailing spaces

2017-02-26 15:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc1015691c1b)

	* nsd/tclset.c:
	Reduce number of returns before end of function and reduce variable
	scopes

2017-02-26 15:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb8621d2a4ef)

	* nsd/tclset.c, tests/ns_set.test:
	Remove useless and undocumented subcommand "ns_set idelete"

2017-02-26 15:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d73be074fbd)

	* nsd/tclset.c:
	Remove unreachable labels (this branch is only reached with
	different labels)

2017-02-26 15:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (49b03a270faf)

	* nsd/log.c:
	Split large function NsTclLogCtlObjCmd(). Reduce number of returns
	before end of function

2017-02-26 14:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a9a0e2c1208)

	* nsd/connchan.c:
	Reduce number of returns before end of function and reduce variable
	scopes

2017-02-26 14:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a9928e3cbed7)

	* doc/src/naviserver/ns_cache.man:
	document result code of ns_cache_create

2017-02-24 20:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ad87e1b13e86)

	* nsd/tls.c:
	- Reduce number of returns before end of function
	- user variable names more constently

2017-02-24 20:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9264a64bf2d8)

	* nsssl/nsssl.c:
	Return the computed returncode (fixes potential crash as reported by
	David Osborne)

2017-02-24 09:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a322f008b85)

	* nsd/nsmain.c:
	Reduce verbosity for return status communication, mystery solved
	(systemd kill parent process due to too small timeout)

2017-02-23 14:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3fe8dae709db)

	* nsd/tclcache.c, tests/ns_cache.test:
	- reduce size of NsTclCacheCreateObjCmd
	- setting SetErrorCode more consistently
	- ns_cache_create returns now boolean instead of exception to provide
	better support for concurrent thread creations (after
	ns_cache_create, it is guaranteed that the cache exists, this eases
	usage scenarios together with [ns_cache_exists]
	- improve comments

2017-02-23 13:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (708f5d0a55a3)

	* nsd/driver.c:
	Improve comments

2017-02-23 12:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7442f718a8f4)

	* merge

2017-02-23 11:01 +0000  David Osborne  <david@qcode.co.uk>  (26e39da51f7e)

	* nsd/driver.c:
	Even if protocol matches, carry on searching drivers until non-null
	driverName also matches

2017-02-23 12:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9924684ebc86)

	* nsd/nsmain.c:
	Provide more detailed debugging info, when communications between
	parent and forked child fails

2017-02-22 16:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5259a4d9f508)

	* nsd/connchan.c, nsd/driver.c, nsd/nsd.h:
	Added prototypical "-driver" option to "ns_connchan open"

2017-02-22 15:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39a05a0aede9)

	* nsd/nsmain.c, nsd/tclcache.c:
	Provide debugging hints for startup problems under systemd

2017-02-22 09:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b7905353f31)

	* openacs-config.tcl:
	Add extraheaders to sample config file for openacs

2017-02-21 19:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (36fb9035c15b)

	* doc/src/naviserver/ns_cache.man, nsd/nsd.h, nsd/tclcache.c,
	nsd/tclcmds.c, tests/ns_cache.test:
	Add new command "ns_cache_exists". It is more than an order of
	magnitude faster than [expr {"foo" in [ns_cache_names]]

2017-02-21 13:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c2911ace7a1)

	* nsd/nsmain.c:
	Always set the pipefd to 0 after closing it

2017-02-21 08:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (563b33c226a7)

	* include/nsthread.h, nsd/nswin32.c:
	Don't ignore length parameter in ns_nsprintf

2017-02-21 08:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d788940e35ff)

	* nsd/tclimg.c:
	Reduce implicit conversions

2017-02-20 09:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ae4c03a6b74d)

	* configure.ac, nsd/nsmain.c:
	- Remove duplicated line
	- Bump version number to 4.99.16d3

2017-02-20 09:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (908b9d6dee20)

	* nsd/log.c, nsd/nsmain.c:
	Don't produce warning on warn_unused_result (on write() operations)
	or on unreachable code (after Fatal under macOS)

2017-02-20 08:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (247250b54462)

	* nsd/lisp.c, nsd/tclimg.c:
	Reduce number of returns before end of function and reduce variable
	scopes

2017-02-20 08:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6bb5d2027d1)

	* nscp/nscp.c:
	- Reduce number of returns before end of function and reduce
	variable scopes
	- add nonnull constraints
	- Reduce function size

2017-02-19 19:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (faf674cf3433)

	* doc/src/naviserver/ns_cache.man:
	Add documentation for ns_cache_configure

2017-02-19 17:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (32d228cb93a6)

	* nsd/log.c, nsd/nsd.h, nsd/nsmain.c:
	When the server is starting in a forking mode, return a non-zero
	return code, when initialization of the server went wrong.

2017-02-19 17:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (087029bb9469)

	* Makefile:
	Move flag "-f" (foreground flag) to the end

2017-02-18 22:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef9a315767c0)

	* configure.ac, include/nsconfig.h.in, nsd/nsmain.c:
	Provide error message rather than crashing when compiled against a
	version of Tcl compiled with Apple's Core Foundation support

2017-02-18 22:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (052893968588)

	* nsd/adpparse.c:
	Reduce number of returns before end of function and reduce variable
	scopes

2017-02-18 22:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30043ff0d53d)

	* nsd/adpcmds.c:
	Fix typo

2017-02-17 12:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df77877f3001)

	* nsd/modload.c, nsdbtest/nsdbtest.c:
	Reduced mismatched essential type categories for binary operator

2017-02-17 12:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e8d0da68a44)

	* include/ns.h, nsd/pathname.c:
	Add NS_GNUC_RETURNS_NONNULL for path-generating functions

2017-02-17 12:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f3018e052e0)

	* include/nsthread.h, nsd/nswin32.c:
	Provide ns_nsprintf to reduce code smells under windows

2017-02-17 12:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (18d70de2110c)

	* nsd/log.c:
	Reduce variable scopes

2017-02-16 21:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1405be9cb8f)

	* nsd/tclcache.c:
	Improve type cleanness

2017-02-16 02:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (258264d620c1)

	* nsd/driver.c:
	Improve handling of requests in ancient (pre HTTP/1.0 1996) HTTP
	requests in combination with writer threads. Previous versions could
	run into a too restrictive sanity assert, assuming that reply
	headers must be always present (which is not the case in the rather
	informal HTTP versions before HTTP/1.0)

2017-02-15 11:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (443eb0b47a9f)

	* nsd/encoding.c:
	Ease debugging with potentially invalid encoding names

2017-02-15 10:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c24640702417)

	* nsthread/memory.c:
	Cast to unsigned int (as required by tcl 8.6)

2017-02-15 10:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3edf9789fcb6)

	* nsd/tclcache.c:
	Initialize cPtr for error cases

2017-02-15 10:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3cacba187527)

	* include/Makefile.global.in:
	Drop flags not everywhere available

2017-02-15 10:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1041fc4fe395)

	* nsthread/memory.c:
	- case to unsigned int (as required by tcl 8.6)

2017-02-15 10:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e7ebbc5d372)

	* nsd/tclcache.c, tests/ns_cache.test:
	ns_cache_* overhaul:
	- make sure cPtr is always initialized (defined value in error cases)
	- pass clientData to ObjvCache in case, the Tcl_Obj has to be created
	- don't crash in ObjvCache, when server is not available
	- extend regression test with test cases for ns_cache_configure

2017-02-15 09:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b09434aab264)

	* nsd/sockfile.c:
	Don't spit out errors, when trying to CORK on invalid (closed) files

2017-02-11 01:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5feff0b15673)

	* nsthread/reentrant.c:
	Stop using readdir_r() unless it is forced via compile flag.
	Background:
	- readdir_r() was deprecated in glibc in 2016 (version 2.24)
	- readdir_r() was removed from tcl in 2005
	(http://www.rkeene.org/projects/tcl/tcl.fossil/tktview?name=1095909)

2017-02-09 10:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3368fbaa5c43)

	* include/nsconfig.h.in, nsd/tls.c, nsssl/dhparams.h, nsssl/nsssl.c:
	More changes for OpenSSL 1.1.0
	- deactivate registration of CRYPTO_set_mem_functions() since OpenSSL
	interface of malloc() functions has changed. Registring our own
	functions does not seem necessary
	- fix various interace changes (no access to DH members, removal of
	SSLLock and SSLThreadId, SSL3_FLAGS_NO_RENEGOTIATE_CIPHERS)

2017-02-07 17:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f76f35f5cd9)

	* m4/openssl.m4, nsd/tls.c:
	Initialization for OpenSSL 1.1.0 has changed. Extend m4 macros for
	testing and alter initialization

2017-02-06 12:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97b2e3926c2b)

	* nsd/connio.c:
	Prefer type bool over int for Boolean values

2017-02-06 12:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09e112fc7328)

	* nsd/fd.c:
	Use plain assignment for setting flags

2017-02-06 12:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ee5c5e8d0e05)

	* nsd/driver.c:
	Initialize Ns_ReturnCode properly with NS_OK;

2017-02-06 12:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c7a26dc97dd)

	* nsd/connio.c:
	Reduce variable scope

2017-02-03 13:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (835996f9b93c)

	* nsdb/db.h, nsdb/dbinit.c, nsdb/dbtcl.c:
	nsdb: provide interface to session_ids. When implementing e.g.
	prepared statements over the nsdbpg driver, the prepared statement
	is just valid for one session. by providing the session_id on the
	Tcl layer, prepared statements can be provided selectively on the
	Tcl level.

2017-02-02 13:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ddde55af1515)

	* include/ns.h, nsd/cache.c, nsd/dns.c, nsd/tclcache.c:
	Don't rely on dirty write operations (many thanks to Zoran!)

2017-02-02 11:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9af606df8d7c)

	* include/ns.h, nsd/sockcallback.c, nsd/tclmisc.c:
	Write always const qualifier before type

2017-02-02 10:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8193b0974a67)

	* nsd/fd.c:
	White space change: remove trailing spaces

2017-02-02 10:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61a7cbca1114)

	* nsd/driver.c:
	White space change: remove trailing spaces

2017-02-02 10:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (227cd52a0921)

	* nsd/driver.c, nsd/fd.c:
	Reduce number of returns before end of function and reduce variable
	scopes; improve comments

2017-02-02 09:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fbaf31c88cc1)

	* nsd/driver.c:
	Prefer type "booltype " over type "inttype " when variable is
	logically Boolean

2017-02-02 09:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e67406661ee2)

	* nsd/adpcmds.c, nsd/connio.c, nsd/dns.c, nsd/driver.c:
	Reduce number of returns before end of function

2017-02-02 09:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3390d417d5eb)

	* nsd/cookies.c:
	Reduce variable scope

2017-01-31 12:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (546ba122bcb4)

	* configure.ac:
	Bump version number to 4.99.16d2

2017-01-31 12:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c0e874c88986)

	* nsthread/pthread.c:
	Switch to the recommended way of creating detachted threads via
	pthread attribute (see e.g.
	https://docs.oracle.com/cd/E19455-01/806-5257/6je9h032l/index.html)

2017-01-31 12:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (feec4390fdcd)

	* nsd/tcljob.c:
	Provide arguments in alphabetical order

2017-01-31 12:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (66726c0b123b)

	* nsd/tclfile.c:
	- Reduce number of returns before end of function
	- Check arg vector before connection state

2017-01-31 12:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b7d91cfe12cc)

	* nsd/cookies.c:
	Reduce number of returns before end of function

2017-01-31 12:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61b36dc085c4)

	* nsd/cookies.c:
	Reduce number of returns before end of function

2017-01-31 12:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (100358f69bbd)

	* nsd/adpcmds.c:
	Prefer Ns_TclPrintfResult for result generation

2017-01-30 14:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92781383e71d)

	* include/ns.h, nsd/cache.c, nsd/nsd.h, nsd/tclcache.c, nsd/tclcmds.c:
	Added command to change cache parameters at runtime:

	 ns_cache_configure /cache/ ?-timeout T1? ?-expires T2? ?-maxentry
	E? ?-maxsize S?

2017-01-28 23:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d455005f8a4)

	* nsd/queue.c:
	Make sure that internal counters are reset, when creating a thread
	failed; remove unneeded static function JoinConnThread()

2017-01-28 23:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf9cde89b238)

	* nsd/tclcache.c:
	Allow caches larger than 2GB

2017-01-28 23:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (50144bc2e8e6)

	* NEWS:
	- improve spelling

2017-01-28 00:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (878e9bea8673)

	* doc/src/naviserver/ns_job.man:
	- fix markup

2017-01-27 23:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06c9cf213434)

	* doc/src/header.inc, doc/src/man.css:
	Improve banner of online manual pages:
	- make url protocol agnostic
	- use new .io domain of sourceforge

2017-01-27 23:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f75c136c1f52)

	* doc/src/naviserver/ns_job.man:
	Improve manpage:
	- add missing glags
	- bring subcommands to alphabetical order

2017-01-23 11:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6a5bd49c037)

	* tests/cookies.test, tests/ns_sls.test, tests/tclresp.test,
	tests/url2file.test:
	Align test cases

2017-01-23 11:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8478c7a2bd0)

	* nsd/cookies.c:
	Make behavior in error case more uniform: check first syntax, then
	connection

2017-01-23 11:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41bf45971e50)

	* nsd/tclresp.c:
	Improve error message: ns_set is here "invalid" but not "illegal"

2017-01-23 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10096a53af5f)

	* nsd/adpeval.c, nsd/adprequest.c, nsd/auth.c:
	- Prefer usage of Ns_ParseObjv over manual parsing/error message
	generation
	- Reduce number of returns before end of function

2017-01-23 11:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5a265f30d8f)

	* nsd/driver.c, nsd/tclfile.c, nsd/tclinit.c, nsd/tclresp.c:
	Use NsConnRequire instead of static variants

2017-01-23 11:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d48a2a880df)

	* nsd/cookies.c:
	Reduce variable scopes

2017-01-23 10:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a47e18c69fb7)

	* nsd/conn.c, nsd/cookies.c, nsd/nsd.h:
	New API function NsConnRequire() to make handling of required
	connections and error results more regular.

2017-01-22 10:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41045c9b8cf8)

	* nsd/driver.c, nsd/pathname.c:
	Don't pass implementation-defined NULL after the last typed argument
	to a variadic function

2017-01-22 10:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab1c143a1859)

	* nscp/nscp.c, nsd/adpeval.c, nsd/adprequest.c, nsd/callbacks.c,
	nsd/cookies.c, nsd/log.c, nsd/modload.c, nsd/pathname.c,
	nsd/queue.c, nsd/sls.c, nsd/url2file.c, nsdb/dbtcl.c:
	Generate error messages with Ns_TclPrintfResult Prefer
	Tcl_SetObjResult over Tcl_SetResult

2017-01-22 10:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5a213d4b459)

	* nsd/auth.c:
	Prefer Tcl_SetObjResult over Tcl_SetResult

2017-01-22 10:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e3deed2e9755)

	* nsd/adpcmds.c:
	Reduce number of returns before end of function

2017-01-22 09:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72c56db44fdb)

	* nsd/crypt.c:
	- simply casts

2017-01-19 09:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (27e3da3cfd3d)

	* nsd/adpcmds.c:
	White space changes:
	- replace tabs by spaces
	- remove trailing spaces

2017-01-19 09:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8ca05311ef9)

	* nsd/adpcmds.c:
	- Prefer usage of Ns_ParseObjv over manual parsing and error message
	generation
	- Reduce number of returns before end of function

2017-01-19 09:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38986059ba66)

	* nsd/nsmain.c:
	use NS_TRUE/NS_FALSE instead of 1/0 for boolean variables

2017-01-19 08:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (033426d032c6)

	* tests/ns_urlspace.test:
	extend regression test for ns_urlspace

2017-01-18 12:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eaf46928ab90)

	* tests/ns_thread_crash.test: new file.
	* tests/ns_thread_crash.test:
	Add test file used for sorting out problems with the tcl
	initialization for forthcoming tcl version 8.7

2017-01-18 12:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7b9b977220e7)

	* nsd/tclthread.c:
	Avoid a potential race condition

2017-01-18 10:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (603103a9d95e)

	* nsd/filter.c:
	Reduce scope of lock when registering a filter

2017-01-18 10:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f563564dfc30)

	* nsd/adpeval.c, nsd/adprequest.c, nsd/nsd.h, tests/test.nscfg:
	- added parameter "defaultextension" for adp section in config file.
	Can be set e.g. to ".adp" to test for FILENAME.adp, when adp is
	mapped to FILENAME

2017-01-18 09:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3748e44e9785)

	* nsd/adpcmds.c:
	reduce number of returns before end of function

2017-01-16 15:14 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8f9f7883a924)

	* nsd/nsmain.c:
	Added explicit notifier init for forked process with Tcl 8.4. This
	solves the problems when an loadable extension creates threads using
	Tcl API but never creates any Tcl interpreter per thread. All later
	versions of Tcl init the notifier on-demand.

2017-01-16 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a6cf227cad8d)

	* nsd/adpcmds.c, nsd/form.c, nsd/queue.c, nsd/tclmisc.c,
	nsdb/dbinit.c, nsdb/dbtcl.c:
	- don't rely on undocumented behavior

2017-01-16 10:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38f3162239ea)

	* nsd/sockfile.c:
	- mark argument as unused (under Linux)

2017-01-16 10:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (108fbffc224a)

	* nsd/tclobjv.c, nsd/url2file.c:
	- Don't pass implementation-defined NULL after the last typed
	argument to a variadic function

2017-01-16 09:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e1617d7d5172)

	* include/Makefile.global.in:
	- add tidy cflags for conveniant testing

2017-01-16 09:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00e14a861ccf)

	* nsproxy/nsproxylib.c:
	- align argument name of prototype

2017-01-15 19:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23966c68ab0a)

	* nsperm/nsperm.c:
	- use NULL for comparison with pointer

2017-01-15 19:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3add9a6a86e)

	* nsd/tclobjv.c, nsd/unix.c, nsd/watchdog.c:
	- prefer bool over int

2017-01-15 19:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb6a08bc456d)

	* nsd/tclcallbacks.c, nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobjv.c:
	- prefer bool over int

2017-01-15 19:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03a2a3b2498a)

	* nsd/request.c:
	- white space change

2017-01-15 19:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2becbe1fe78d)

	* nsd/random.c:
	- prefer bool over int

2017-01-15 19:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c51315a3808)

	* nsd/nswin32.c, nsd/queue.c:
	- prefer bool over int

2017-01-15 17:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (494b17863419)

	* nsd/cookies.c, nsd/sockfile.c, nsd/watchdog.c, nsproxy/nsproxylib.c:
	- reduce implicit conversions from signed to unsigned

2017-01-15 17:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81664494f0fa)

	* nsd/cookies.c:
	- prefer bool over int

2017-01-15 17:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5038e12e6ca1)

	* nsd/config.c:
	- prefer bool over int

2017-01-15 17:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aa6d38f6bee7)

	* nsd/adpeval.c, nsd/adpparse.c, nsd/callbacks.c:
	- prefer bool over int

2017-01-15 17:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec6160a97ff6)

	* nsd/adpeval.c:
	- prefer bool over int

2017-01-14 22:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5324f9d106d3)

	* include/ns.h, include/nsthread.h, nsd/adpcmds.c, nsd/auth.c,
	nsd/callbacks.c, nsd/crypt.c, nsd/driver.c, nsd/mimetypes.c,
	nsd/tclcallbacks.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tclobjv.c,
	nsd/tcltime.c, nsd/tclxkeylist.c, nsd/unix.c, nsdb/nsdb.c,
	nsthread/mutex.c, nsthread/reentrant.c, nsthread/thread.c,
	nsthread/winthread.c:
	White space change:
	- strip trailing spaces

2017-01-14 22:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e4fcea3bc6e8)

	* nsd/mimetypes.c, nsd/tclcallbacks.c, nsdb/nsdb.c, nsthread/cslock.c,
	nsthread/master.c, nsthread/pthread.c, nsthread/thread.c,
	nsthread/winthread.c:
	Unify code initialization:
	- use bool instead of int
	- use variable name "initialized"

2017-01-14 19:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec1ff0eacdea)

	* include/ns.h, nsd/nsd.h, nsthread/reentrant.c:
	- improve padding, especially on 64bit machines

2017-01-14 18:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (75043fb0c2cd)

	* nsd/crypt.c:
	- reduce implicit conversions (gcc7)

2017-01-14 18:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a4efd634313)

	* tests/ns_config.test, tests/ns_env.test:
	- align with more precise error messages

2017-01-14 18:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c898b9e1e9f1)

	* nsd/callbacks.c, nsd/fastpath.c, nsd/tclinit.c, nsd/tclobjv.c,
	nsd/tcltime.c, nsd/tclxkeylist.c, nsd/watchdog.c,
	nsproxy/nsproxylib.c:
	- remove old style function definitions

2017-01-14 17:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d55916c5b981)

	* nsssl/dhparams.h, nsssl/nsssl.c:
	- remove old-style function definitions

2017-01-14 17:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (85a5d7530a0d)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/auth.c, nsd/binder.c, nsd/conn.c, nsd/connchan.c, nsd/cookies.c,
	nsd/driver.c, nsd/dstring.c, nsd/info.c, nsd/tclconf.c,
	nsd/tclenv.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclresp.c,
	nsd/tclsock.c, nsd/watchdog.c:
	- improve the compilation with -Wwrite-strings
	- reduce shadowing of local variables
	- add const declarations

2017-01-14 17:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0da9901b4c49)

	* include/ns.h:
	- adding missing prototypes
	- sort prototypes alphabetically

2017-01-14 17:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d8db9746e75)

	* nsssl/dhparams.h, nsssl/nsssl.c:
	- add prototypes

2017-01-14 13:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac52b0594689)

	* nsd/unix.c:
	- add prototype for GetPwUID()

2017-01-14 13:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (24f14efc4899)

	* nsd/tclset.c:
	- don't shadow variable
	- don't pass variables of type "const char *" to functions declared
	with "char *"

2017-01-14 13:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8fc4313015de)

	* nsd/nsd.h:
	- adding missing prototype for NsTclReturnTooLargeObjCmd()

2017-01-14 12:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e23fb66b4b41)

	* nsd/config.c, nsd/nsd.h, nsd/nsmain.c:
	- remove shadowing conflict of variable "optind" with global
	variable optind of command line parser (e.g.
	https://linux.die.net/man/3/optind)

2017-01-13 22:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b80b4e7f5757)

	* nscp/nscp.c, nsdb/dbtcl.c, nslog/nslog.c, nsthread/nsthreadtest.c,
	nsthread/pthread.c:
	- reduce shadowing of variables
	- improve the compulation with -Wwrite-strings

2017-01-13 22:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f56731381958)

	* nsthread/thread.h:
	- add missing protypes

2017-01-13 22:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (feac11eefefb)

	* nsthread/error.c, nsthread/thread.h:
	- add const declarations

2017-01-13 20:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (416205ce2c23)

	* nsd/tls.c:
	- don't shadow local variable

2017-01-13 20:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (27df565e3429)

	* nsperm/nsperm.c:
	- don't shadow local variable

2017-01-13 20:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a3ccce7baa65)

	* nsdbtest/nsdbtest.c:
	- add missing prototype

2017-01-13 20:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5a35aed7a67)

	* nsproxy/nsproxy.h:
	- adding missing prototype

2017-01-13 20:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5822804f379a)

	* nsd/exec.c, nsd/log.c, nsd/modload.c, nsd/pathname.c, nsd/sls.c,
	nsd/stamp.c, nsd/url.c, nsd/url2file.c, nsd/urlspace.c,
	nsperm/nsperm.c:
	- improve the compulation with -Wwrite-strings

2017-01-13 20:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c956bd9737b4)

	* nscp/nscp.c, nsd/adpeval.c, nsd/compress.c, nsd/connchan.c,
	nsd/driver.c, nsd/sock.c, nsd/sockfile.c, nsd/watchdog.c,
	nsdb/dbtcl.c, nsdb/nsdb.c, nsperm/nsperm.c, nssock/nssock.c,
	nsthread/nsthreadtest.c:
	- mark unused arguments as UNUSED

2017-01-13 13:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af0663b343f2)

	* include/ns.h, nsd/tclobjv.c:
	- mark member key of Ns_ObjvSpec as const

2017-01-13 13:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c8109a2532a)

	* nsssl/nsssl.c:
	- makr unused arguments as UNUSED

2017-01-13 12:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06d56282a3e5)

	* nsproxy/nsproxy.c, nsproxy/nsproxylib.c:
	Use same conventions in nsproxy module like in other modules
	- make unused arguments with UNUSED
	- add const declarations

2017-01-13 11:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (98c3f96a20d6)

	* nsd/nsmain.c:
	- adding const declarations
	- adding nonnull asserts

2017-01-13 11:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (639e820b29e1)

	* nsd/nsmain.c:
	- remove the call to Tcl_InitNotifier(), which is not needed

2017-01-13 11:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (acd7c8f4efe2)

	* configure.ac:
	- bumpt version number to development version 4.99.16d1

2017-01-12 14:51 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c0778e8b7da7)

	* nsthread/pthread.c, nsthread/thread.c, nsthread/thread.h,
	nsthread/winthread.c:
	Refactor the code w.r.t thread-exit so it can be better re-used
	among platforms.

2017-01-12 12:53 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0251d38ebf1c)

	* nsthread/winthread.c:
	Align Win port to the latest TLS cleanup changes.

2017-01-12 12:50 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a22c60e49ab6)

	* nsd/nsmain.c, nsthread/pthread.c, nsthread/thread.c, nsthread/tls.c:
	Rework way we handle TLS cleanup; align it to the Tcl practices. Add
	compatibility for Tcl 8.5- w.r.t notifier-thread init after the
	fork.

2017-01-10 10:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (138ee584763a)

	* .hgtags:
	Added tag naviserver-4.99.15 for changeset e045cbe91217

2017-01-10 10:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e045cbe91217 [naviserver-4.99.15])

	* NEWS, README, configure.ac:
	- bump version number to 4.99.15

2017-01-10 10:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08e1c1491811)

	* NEWS:
	- update news file

2017-01-10 10:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f1d5d1147ec)

	* Makefile:
	- remove backup-files from dist

2017-01-10 10:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f74fd07c26e)

	* include/nsconfig.h.in:
	- rebuilt with TEA 3.9

2017-01-10 10:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8dab7dfa8904)

	* install-sh:
	- use recent version of install-sh

2017-01-10 10:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (614fbf7b5551)

	* m4/tcl.m4:
	- use TEA 3.9 (TEA 3.10 causes currently problems, don't do
	experiments before the release)

2017-01-10 10:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (501772fc8ca5)

	* include/nsconfig.h.in:
	- upgrade to TEA 3.10

2017-01-10 10:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (da8d023cab42)

	* m4/tcl.m4:
	- Upgrade to TEA 3.10

2017-01-09 22:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (674c89fb63c3)

	* nsd/init.c:
	- moved Ns_MutexInit() and Ns_MutexSetName() past
	Nsthreads_LibInit()

2017-01-09 10:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (081a4306b53f)

	* NEWS:
	- updated NEWS entry

2017-01-09 09:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e54b4a435ed5)

	* include/ns.h, nsd/adpcmds.c, nsd/binder.c, nsd/compress.c,
	nsd/fastpath.c, nsd/nsd.h, nsd/unix.c, nsproxy/nsproxy.h,
	nsproxy/nsproxylib.c:
	- align argument names in prototypes and function definitions

2017-01-08 23:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5f835758a05)

	* configure.ac:
	- bump version number to 4.99.15b4

2017-01-08 23:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (792e94411b1c)

	* include/nsthread.h, nsd/adpcmds.c, nsd/adprequest.c, nsd/config.c,
	nsd/conn.c, nsd/connchan.c, nsd/cookies.c, nsd/driver.c, nsd/info.c,
	nsd/limits.c, nsd/modload.c, nsd/nsmain.c, nsd/pathname.c,
	nsd/quotehtml.c, nsd/tclcache.c, nsd/tclconf.c, nsd/tclfile.c,
	nsd/tclhttp.c, nsd/tcljob.c, nsd/tclrequest.c, nsd/tclresp.c,
	nsd/tclset.c, nsd/tclsock.c, nsd/tclthread.c, nsd/tcltime.c,
	nsd/url.c, nsd/url2file.c, nsd/urlspace.c, nsdb/dbtcl.c,
	nslog/nslog.c, nsperm/nsperm.c, nsthread/mutex.c, nsthread/signal.c,
	nsthread/winthread.c:
	Ease compilation under windows:
	- don't pass "const char*" as member dest of Ns_ObjvSpec
	- add compatibility type "suseconds_t" for windows
	- define NS_NAVISERVER for windows (no configure script)
	- move conditional definition of P_tmpdir after the .h files are
	loaded
	- fix type in macro PTR2UINT in windows code

2017-01-07 20:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (125ff8f9291c)

	* nsd/tclsock.c:
	- improve type cleanness

2017-01-07 18:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54eac31ee99a)

	* nsd/tclhttp.c:
	- improve variable naming

2017-01-07 18:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2673056a1d2a)

	* nsd/url.c:
	- pass interp to Tcl_ListObjAppendElement()

2017-01-05 16:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d93f8df78b35)

	* configure.ac:
	- bump version number to 4.99.15b3

2017-01-05 16:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (531813e4d1b8)

	* m4/openssl.m4:
	- check as well for pkg-config when "--with-openssl" is used via
	defaults (i.e. not explicitly specified)

2017-01-05 16:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b58e6c3f0752)

	* simple-config.tcl:
	- improve minimal sample config file

2017-01-04 18:34 +0100  Zoran Vasiljevic  <Zoran Vasiljevic>  (48ad1974cd02)

	* nsd/nsmain.c:
	Added more comment on Tcl_FindExecutable calling position.

2017-01-04 13:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (511347268982)

	* nsd/driver.c:
	- use NS_IP_UNSPECIFIED in case no bind address is specified

2017-01-02 22:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7dea4e947ef)

	* configure.ac, tests/ns_adp_compress.test:
	- make compression test result robust against changes between zlib
	1.2.8 and zlib 1.2.9

2017-01-02 20:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e22b92111cf1)

	* nsd/nsmain.c:
	- keep Tcl_FindExecutable(argv[0]) after the fork - otherwise
	tclconnio-3.1 leads to a Fatal after thread::create

2017-01-02 20:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec715f49f391)

	* include/Makefile.global.in:
	- no need to have TCL_NO_DEPRECATED twice in defines

2017-01-01 20:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (664787f0fc7b)

	* nsd/nsmain.c, nsproxy/nsproxylib.c:
	fixes for tcl 8.7:
	- make sure to call Tcl_FindExecutable() before any Tcl call

2016-12-31 14:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f85a672b6967)

	* include/ns.h, nscgi/nscgi.c, nsd/conn.c:
	- use "unsigned short" consistently for ports

2016-12-31 12:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f942bc356c98)

	* nsd/binder.c, nsd/fd.c, nsd/httptime.c, nsd/queue.c, nsd/tclconf.c,
	nsd/tcljob.c, nsdb/dbinit.c, nsthread/reentrant.c:
	- white space changes

2016-12-31 12:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0025c41c133)

	* nsd/adpeval.c, nsd/adprequest.c, nsd/nsmain.c, nsd/tclcache.c,
	nsd/tclobjv.c, nsd/url2file.c, nsproxy/nsproxylib.c:
	- Don't pass implementation-defined NULL after the last typed
	argument to a variadic function

2016-12-31 12:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (856bf2ec692a)

	* nsd/conn.c:
	- white space change

2016-12-31 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c6850786d22)

	* nsd/conn.c:
	- reduce number of returns before end of function

2016-12-31 12:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e253d478c7c)

	* nsd/conn.c:
	- reduce usage of Tcl_AppendResult()

2016-12-31 12:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09df35b496f8)

	* nsd/cache.c, nsd/conn.c, nsd/connchan.c, nsd/log.c, nsd/tclset.c,
	nsd/tclthread.c, nsd/tclvar.c, nsd/uuencode.c:
	- reduce number of returns before end of function
	- add const declarations

2016-12-31 12:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (605eefbca33b)

	* nscp/nscp.c, nsd/config.c:
	- replaced remaining Tcl_CmdProcs into Tcl_ObjCmdProcs

2016-12-30 17:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7353c1f0b09d)

	* Makefile, NEWS, include/Makefile.global.in:
	- Make it possible to pass alternative implementation of CPPCHECK to
	Makefile

2016-12-30 17:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c60311ef6822)

	* configure.ac:
	- bump version number to 4.99.15b1

2016-12-30 17:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (403483acac43)

	* NEWS:
	- updated NEWS file (preliminary release notes for 4.99.15)

2016-12-30 17:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (252916d36232)

	* doc/src/naviserver/ns_server.man:
	- remove typos

2016-12-30 17:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (019523ac992b)

	* doc/src/naviserver/ns_conn.man:
	- add documentation of "ns_conn partialtimes"

2016-12-30 17:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5ff0dd3df0f)

	* nssock/doc/mann/nssock.man:
	- add "resuseport" description
	- improve keywords

2016-12-30 16:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e042fcec1101)

	* doc/src/naviserver/ns_driver.man:
	- remove spurious words from documentation

2016-12-30 16:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf5bb345a29c)

	* nsd-config.tcl, openacs-config.tcl, sample-config.tcl.in:
	- document mutexlocktrace in sample config files

2016-12-30 14:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9370b545df4)

	* nsd/binder.c:
	- fix typo in variable name

2016-12-30 12:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb47746cd836)

	* doc/src/naviserver/ns_server.man:
	- fix typos

2016-12-30 12:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0af98f97b888)

	* doc/src/naviserver/ns_server.man:
	- add the following subcommands to ns_server man page ns_server
	?-server /s/? ?-pool /p/? map ?-noinherit? ?/mapspec/? ns_server
	?-server /s/? mapped ?-exact? ?-noinherit? /mapspec/ ns_server
	?-server /s/? ?-pool /p/? unmap ?-noinherit? /mapspec/

2016-12-29 14:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (712302e4199a)

	* doc/src/manual/admin-install.man,
	doc/src/naviserver/ns_connchan.man, doc/src/naviserver/ns_http.man,
	doc/src/naviserver/ns_httpopen.man, doc/src/naviserver/ns_ictl.man,
	nssock/doc/mann/nssock.man:
	- prefer upper case spelling for HTTP and HTTPS

2016-12-29 13:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb89f69f21ec)

	* nssock/doc/mann/nssock.man:
	- fix typos

2016-12-29 13:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59b6ff28cecb)

	* doc/src/manual/admin-maintenance.man, nsd-config.tcl,
	nssock/doc/mann/nssock.man, nsssl/doc/mann/nsssl.man, openacs-
	config.tcl, sample-config.tcl.in:
	- document parameter "driverthreads"

2016-12-28 22:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b10ac0055fd3)

	* configure.ac:
	- bump version number to 4.99.15d2

2016-12-28 22:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d87bbaa8e07)

	* tests/ns_driver.test: new file.
	* tests/ns_driver.test:
	- add tests for ns_driver

2016-12-28 22:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef88d6dbaf29)

	* doc/src/naviserver/ns_driver.man: new file.
	* doc/src/naviserver/ns_driver.man:
	- add man page for ns_driver

2016-12-28 22:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d3f10554c78a)

	* nsd/driver.c:
	- return error messages, when ns_driver subcommand is called with
	too many arguments

2016-12-28 19:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63239c5a0872)

	* nsd/tclobjv.c:
	- remove spurious space when Ns_ParseObjv() is called with opts and
	args NULL but arguments are provided (unsurfaced old bug).

2016-12-28 18:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b8e38f779744)

	* doc/src/manual/admin-maintenance.man, doc/src/manual/tcl-lib-
	file.man, doc/src/manual/tcl-lib-nstrace.man,
	doc/src/naviserver/ns_filestat.man,
	doc/src/naviserver/ns_sendmail.man, doc/src/naviserver/ns_set.man,
	doc/src/naviserver/nsv.man, naviserver.rdf.in, nsd/adpeval.c,
	nsd/tclcache.c, nsd/tclset.c, nsd/tclxkeylist.c:
	- prefer spelling "Tcl" over "TCL"

2016-12-23 10:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0312095acf4)

	* nsd/queue.c:
	- mark argument as unused

2016-12-23 10:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c1321409cb04)

	* nsd/tcljob.c:
	- Passing 0L after the last typed argument to variadic function

2016-12-23 10:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43dce6c90225)

	* nscgi/nscgi.c, nsd/tcljob.c:
	- replace suffix "l" by "L" to avoid potential confusion with digit
	"1"

2016-12-23 10:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c09a8d8b065b)

	* nsd-config.tcl:
	- use default readahad buffer size

2016-12-21 10:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (225904a9ec60)

	* include/ns.h, nsd/binder.c, nsd/conn.c, nsd/connchan.c,
	nsd/driver.c, nsd/nsd.h:
	Continuing driver reform:
	- make distinciton explicit between driver type (e.g. "nssock"),
	driver name (e.g. "nssock1"), and driver thread name (e.g.
	"nssock1:1")
	- allow reuseport for Ns_SockListenUdp() in the same way as for TCP
	listen interface
	- new subcommand "ns_driver info" showing config info per module

2016-12-14 10:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7a82d0cdaad9)

	* nsd/driver.c, nsd/nswin32.c, nsd/queue.c:
	- removed unused arguments
	- mark arguments as unused when needed

2016-12-13 12:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (de70225ed87f)

	* nscgi/nscgi.c, nsd/adpeval.c, nsd/tcljob.c:
	- improving sentinel argument

2016-12-13 12:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (abdf7f78e8a7)

	* nsd/httptime.c:
	- silence checker

2016-12-13 12:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (baa8d0c4b05d)

	* nsd/driver.c, nsd/queue.c:
	- adding const declarations

2016-12-13 12:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7f5fed088fa5)

	* nsd/binder.c:
	- Prebind structure is not used under windows

2016-12-13 12:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c0f309b37efa)

	* nsd/driver.c:
	- add missing (implied) static declaration

2016-12-13 11:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4abb6a3742a4)

	* nsd/queue.c:
	- don't pass function to macro

2016-12-13 11:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab5d6cc0170d)

	* nsd/nswin32.c:
	- add missing argument in windows code

2016-12-11 18:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e62983b1da11)

	* nsproxy/nsproxylib.c:
	- reduce variable scopes
	- reduce number of return statements inside functions

2016-12-11 18:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d762f9c0a63)

	* nsproxy/nsproxylib.c:
	- don't write "nsproxy ping" like eval cmds

2016-12-11 17:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f4c813065338)

	* nsd/binder.c, nslog/nslog.c, nsproxy/nsproxylib.c:
	nsproxy:
	- don't reset timeout for reaper when slaves already expired
	- improve debug messages

2016-12-10 18:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30ac4d28b2c6)

	* nsd/nsmain.c:
	- make startup more robust, when called with invalid arguments

2016-12-10 18:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (748f415a9979)

	* doc/src/manual/admin-maintenance.man, doc/src/template.man:
	- document number sign in prebind command

2016-12-10 17:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b00c58d10fec)

	* nsssl/nsssl.c:
	- white space changes

2016-12-10 17:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b47efaa52bda)

	* nsd/binder.c:
	- added optional #number suffix on prebind argument to allow the
	usage of SO_REUSEPORT on privileged ports. one can use now e.g. ....
	-b '[2001:628:404:74::31]:80#2' ... on the command line to prebind 2
	sockets such that the option "driverthreads" can be set to 2

2016-12-10 17:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff9b24f72dbc)

	* nsssl/nsssl.c:
	- whitespace changes

2016-12-10 12:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (91d69f28ba07)

	* nsd/binder.c:
	- fix typo

2016-12-07 12:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f00669543826)

	* nsd/connchan.c, nsd/tclcache.c, nsd/tcljob.c:
	- silence static checkers

2016-12-07 12:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9317a5c126fd)

	* include/nsthread.h, nsd/nsmain.c:
	- don't mess around with FD_SETSIZE

2016-12-07 12:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb3227651b9c)

	* nsd/urlspace.c:
	- make sure that URLs in result of walk callback are proper list
	elements

2016-12-06 14:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (452c877bac05)

	* nsd/driver.c:
	- improve naming of output fields

2016-12-06 14:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06585796ad44)

	* nsdb/dbtcl.c:
	- silence static checker

2016-12-06 14:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c33ab446a1b)

	* nsd/tclxkeylist.c:
	- reduce variable scope

2016-12-02 14:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (057079fa1b6b)

	* doc/src/naviserver/commandlist.man, nsd/driver.c:
	new ns_driver subcommands
	 -  ns_driver names
	 -  ns_driver threads

2016-12-02 14:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c8e25380fc4)

	* doc/src/manual/admin-maintenance.man:
	- don't advertise deprecated commands

2016-12-02 14:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f08d6c25d644)

	* nsd/queue.c:
	- reduce verbosity

2016-12-02 14:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7e726cf8e68)

	* nsproxy/nsproxylib.c:
	- provide more details for debugging nsproxy

2016-12-02 10:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0aaa56a251f)

	* include/ns.h, include/nsthread.h, nsd/nsmain.c, nsthread/mutex.c:
	- move definition of type "bool" from ns.h to nsthread.h to make
	boolean types as well available in nsthread implementation
	- added a new global parameter (defined in "ns/parameters") named
	"mutexlocktrace"for turning on/off tracing of long mutex calls
	Example: ns_section "ns/parameters" ns_param mutexlocktrace true

2016-12-02 10:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (417e588ede97)

	* nsd/config.c:
	- improve comment

2016-12-02 09:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07e1208ce038)

	* doc/src/naviserver/ns_register.man, nscgi/doc/mann/nscgi.man,
	nsproxy/nsproxylib.c:
	- add ability to turn on debug messages of nsproxy selectively with
	ns_logctl severity Debug(nsproxy) on
	- provide hints via debug, when reaper becomes active and tries to
	shut down slaves

2016-11-30 09:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0dc8f7cf5753)

	* nsd/queue.c:
	- move mutex unlock before JoinConnThread() to reduce locking
	duration

2016-11-29 14:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (458b79529223)

	* nsd/queue.c:
	- use urlspace.lock instead of pools.lock for urlspace locking

2016-11-29 11:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7fd242b2e36)

	* nsd/nsd.h, nsd/queue.c, nsd/server.c, nsd/tclobjv.c,
	tests/ns_server.test:
	- defined new subcommands for ns_server

	 ns_server ... map ?-noinherit? ?mapspec? ns_server ... mapped
	?-exact? ?-noinherit? mapspec ns_server ... unmap ?-noinherit?
	mapspec

	- reduce size of huge switch statement by defining the following
	subcommands as sepearate functions

	 ServerMaxThreadsObjCmd() ServerMinThreadsObjCmd() ServerMapObjCmd()
	ServerMappedObjCmd() ServerUnmapObjCmd()

	- provide uniform handling of mapspecs
	- added flags to NsMapPool() to be able to specify inheritance
	- extend regression test

2016-11-28 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25db0236bfa7)

	* nsthread/mutex.c:
	- add logging of long lock durations

2016-11-28 02:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59910abbc5a9)

	* nsd/queue.c:
	- add pool name to hint
	- fix typo in message

2016-11-27 20:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac229cbe0002)

	* tests/ns_server.test:
	- add tests for mapping and unapping of requests

2016-11-27 19:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68fdcc5b3198)

	* nsd/conn.c, tests/ns_conn.test:
	- add "ns_conn partialtimes" returning the partial times for a
	request (similar to the per-pool timing statistics in "ns_server
	stats")

2016-11-27 19:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e65e0ca0f83f)

	* doc/src/naviserver/ns_parseargs.man:
	- improve the documentation of ns_parseargs

2016-11-27 19:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bcc64e33680d)

	* nsd/nsd.h, nsd/queue.c, tests/ns_server.test:
	- added "ns_server ... unmap ..." in symmetry to "ns_server ... map
	..."

2016-11-27 18:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (998db49dd6c4)

	* openacs-config.tcl:
	- improve sample config file

2016-11-19 18:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c7531948a9d)

	* nsd/driver.c:
	- don't tell the user we are accepting connections, when this is not
	true

2016-11-19 17:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9204596b974a)

	* nsd/binder.c, nsd/nsd.h, nsd/nsmain.c:
	- return Ns_ReturnCode from NsPrebind to terminate, when prebind
	fails

2016-11-19 17:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4eba8d5d1593)

	* nsd/driver.c:
	- remove debug message

2016-11-19 16:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3159a2743493)

	* nsd/driver.c:
	- add support for driverthreads and global servers

2016-11-19 16:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b0659e24d076)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/tclcmds.c,
	nssock/nssock.c:
	TODO: check, if someone is already listening on port, doc (driver
	config and nsd_driver), sample configs

	- Implemented driver option "driverthreads" in analogy to
	"writerthreads" or "spoolerthreads". This option can only be used
	when "SO_REUSEPORT" is supported by the operating system
	- New command "ns_driver stats": return statistics about driver usage

2016-11-18 14:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ce36e787b724)

	* include/ns.h, nsd/binder.c, nsd/driver.c, nsd/listen.c, nsd/nsd.h,
	nsd/sock.c, nssock/nssock.c, nsssl/nsssl.c:
	Support for option reuseport (https://lwn.net/Articles/542629/):
	- This option allows multiple drivers threads listening on the same
	port (potentially improved throughput)
	- Configuration: new boolean parameter "reuseport" for driver section
	(default: false)
	- Changes: additional argument for Ns_DriverListenProc(),
	Ns_SockListenEx(), Ns_SockBindUdp(), Ns_SockBind()
	- TODO: prebind handling, doc, handling of ns_socket reuseoption,
	other cases of Ns_SockBind(*,NS_FALSE), other drivers

2016-11-18 14:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00402030ee7b)

	* nsd-config.tcl:
	- document parameter listenbacklog via config files

2016-11-18 14:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8e76580d9384)

	* configure.ac:
	- changing version number towards 4.99.15

2016-11-18 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2920b4a9d23e)

	* .hgtags:
	Added tag naviserver-4.99.14 for changeset b905737d2876

2016-11-18 12:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b905737d2876 [naviserver-4.99.14])

	* NEWS:
	- removed empty sections

2016-11-18 12:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c5e133b4758b)

	* NEWS:
	- updated NEWS file

2016-11-18 12:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2e991d1e329)

	* configure.ac:
	- bump version number to 4.99.13

2016-11-18 12:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55d9e64a45a8)

	* README:
	- update README file

2016-11-18 12:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7bc636d13106)

	* nsproxy/nsproxylib.c:
	- silence compiler about potentially uninitialized variable (gcc7)

2016-11-17 16:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f185aa19c688)

	* nsd/queue.c:
	- Return the current mappings just in the case, when "ns_server ...
	map" was called without the optional argument.
	- return just the elements from the queried pool.

2016-11-17 00:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8232f1bf916d)

	* nsd/queue.c:
	- include pool name in result of meap subcommand

2016-11-15 19:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca074e5117e6)

	* doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_register.man:
	- fix typo in documentation

2016-11-15 19:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (99220bf2e85b)

	* nsd/queue.c, tests/ns_server.test:
	- added experimental subcommand "map" to "ns_server" to list and
	extend mapping to connection pools

2016-11-15 19:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (371e6cb5eb30)

	* nsd/urlspace.c:
	- improve comments

2016-11-15 19:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (210a36d0d2a8)

	* nsd/url2file.c:
	- use function type for walk callback

2016-11-15 02:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6352a216802f)

	* doc/src/naviserver/ns_register.man:
	- add common usage of ns_register_proc to the example section

2016-11-13 12:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbe3cdfefafa)

	* NEWS:
	- updated NEWS file

2016-11-13 12:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ebccc48b2404)

	* configure.ac:
	- bump version number to 4.99.14b2

2016-11-13 02:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5df9d279714f)

	* nsd/fastpath.c, nsd/log.c, nsd/modload.c, nsd/nsconf.c,
	nsd/pidfile.c, nsd/tclinit.c, nslog/nslog.c:
	- don't use implementation defined NULL as last argument of variadic
	function Ns_HomePath(()

2016-11-13 02:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c3ef751e640)

	* nsd/adpeval.c, nsd/fastpath.c, nsd/fd.c, nsd/info.c, nsd/pathname.c,
	nsd/url2file.c:
	- don't use implementation defined NULL as last argument of variadic
	function Ns_MakePath(()

2016-11-13 02:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8c29c5a8d0b)

	* nscgi/nscgi.c, nsd/adpeval.c, nsd/config.c, nsd/cookies.c,
	nsd/driver.c, nsd/exec.c, nsd/fastpath.c, nsd/log.c, nsd/nswin32.c,
	nsd/op.c, nsd/request.c, nsd/return.c, nsd/returnresp.c,
	nsd/rollfile.c, nsd/tclhttp.c, nsd/tclmisc.c, nsd/url.c,
	nsd/urlopen.c, nsd/urlspace.c, nsdb/dbdrv.c, nslog/nslog.c,
	nsperm/nsperm.c:
	- don't use implementation defined NULL as last argument of variadic
	function Ns_DStringVarAppend(()

2016-11-13 01:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ebb1e5883d85)

	* nsd/url2file.c:
	- don't use implementation defined NULL as last argument of variadic
	function Ns_TclEvalCallback()

2016-11-13 01:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1b605928d0bf)

	* nsd/driver.c, nsd/fastpath.c, nsd/pathname.c, nsd/returnresp.c,
	nsd/server.c, nsd/tclinit.c, nsdb/dbdrv.c, nsdb/dbinit.c,
	nsdb/dbtcl.c:
	- avoid consistently implementation defined NULL as last function of
	Ns_ConfigGetPath()

2016-11-13 01:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54d129c30b12)

	* configure.ac:
	- update beta version

2016-11-13 01:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d0280c03aee)

	* nsdb/dbutil.c:
	- reduce variable scope

2016-11-13 00:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06303546dcc2)

	* nsperm/nsperm.c:
	- remove commented out code

2016-11-11 12:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (569012ecb5d0)

	* tests/ns_urlspace.test:
	- remove debug message

2016-11-11 11:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (191faf939cbb)

	* NEWS:
	- update NEWS

2016-11-11 09:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f600bdfa7525)

	* Makefile:
	- don't throw error message, when doing an install from a Bitbucket
	checkout and no documentation was generated locally

2016-11-10 22:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1801946d9886)

	* nsdb/dbutil.c:
	- ensure NULL result in case auf failure

2016-11-09 22:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (18e85186eb86)

	* Makefile:
	- improve output of "make help"

2016-11-09 01:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3dbba1c87076)

	* configure.ac:
	- bump version number to 4.99.14b1

2016-11-09 01:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09e0c42801b0)

	* include/nsthread.h, nsthread/reentrant.c:
	- Solaris does not define s6_addr16, so we have to help outself with
	a brutal macro

2016-11-08 23:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f262d76031e2)

	* include/nsthread.h, nsthread/thread.c:
	- align protoypes and function definitions

2016-11-05 14:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b288df65e29f)

	* nsd/tclxkeylist.c, nsdb/dbinit.c, nsdb/dbutil.c:
	- reduce number of return statements before end of function

2016-11-05 14:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d707cca089c4)

	* nsd/sched.c:
	- use parens around boolean expression

2016-11-05 14:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cee19c1de3ab)

	* nsd/connchan.c:
	- add const declaration

2016-11-05 13:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (36cf96cf7b0e)

	* nsdb/nsdb.h:
	- Ns_DbInterpretSqlFile() align function prototype with definition

2016-11-05 12:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4e9a0c886897)

	* nsd/tclfile.c:
	- improve documentation

2016-11-04 11:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ff3049ad3d8)

	* nsd/crypt.c:
	- improve cleanness of compilation with type warnings under gcc7

2016-11-04 10:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3bb5e2a39efd)

	* include/ns.h, nsd/conn.c, nsd/nsd.h, nsd/queue.c,
	tests/ns_server.test:
	- make run time statistics more complete by including trace times,
	which includes the time after running the main task of a connection
	and freeing the connection thread. This time includes the trace
	filters and the server traces (e.g. producing access.log entry) as
	well as the time deallocating per connection resources.
	- include value "tracetime" in [ns_server stats]
	- split Ns_ConnTimeStats into two separate functions
	NsConnTimeStatsUpdate() and NsConnTimeStatsFinalize(); no need for a
	"Ns_" prefix.

2016-11-03 10:15 +0000  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fcd65f98002c)

	* Merged in hanzer/nsfork (pull request #11)

	Spelling correction.

2016-11-02 15:56 -0400  Adam Jensen  <hanzer@riseup.net>  (fa5edad11efc)

	* contrib/examples/writer.tcl:
	Spelling correction.

2016-11-03 10:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (452b8d6a6f28)

	* doc/src/naviserver/ns_ictl.man, nsd-config.tcl, nsd/queue.c:
	- collect statistics before traces are run (e.g. access.log
	writing); fixes bug reported by David Osborne about incorrect
	partial times
	- add more sample entries to nsd-config.tcl

2016-11-03 09:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d1ea43ebab05)

	* nsd/dstring.c:
	- remove extra space

2016-11-01 16:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72191a0e529f)

	* nsd/connchan.c:
	- make code more rubust against canceled requests
	- improve source code comments

2016-11-01 16:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1fecef5bd487)

	* nsd/sockcallback.c:
	- improve source code comments

2016-11-01 00:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (82c1b4ba03cc)

	* configure.ac:
	- bump version number to 4.99.14d2

2016-11-01 00:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f4c1dd3d3496)

	* nsd/tclxkeylist.c:
	- prefer Tcl_Obj interface over string based interface
	- reduce the number of returns before function end

2016-10-31 23:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (879341628453)

	* tests/keylist.test: new file.
	* nsd/tclxkeylist.c, tests/keylist.test:
	- modernize txlxkeylist
	- use naviserver memory management rountines
	- fix several bugs (returning break)
	- add regression test

2016-10-31 22:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fd37ecddc147)

	* nsd/connchan.c:
	connchan.c:
	- make freeing of connection channel more robust
	- simplify and fix logic for partial write operations

2016-10-31 21:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (49fd49f4dd4c)

	* nsd/urlspace.c:
	- use datatype "int" for parameters passed with Ns_ObjvBool (rather
	than bool, which causes invalid values on gcc 4.8.4 (Ubuntu
	4.8.4-2ubuntu1~14.04.3))

2016-10-31 21:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2bd677acb914)

	* nsd/tclmisc.c, nsd/tclobj.c:
	- improve type cleanness on gcc 4.8.4 (Ubuntu
	4.8.4-2ubuntu1~14.04.3)

2016-10-31 21:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45f5c7f1b6aa)

	* tests/ns_urlspace.test:
	- make test more robust: don't raise exception in case of failure

2016-10-31 17:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7a8686a02594)

	* include/nsversion.h.in, nsd/nsmain.c:
	- improve usefulness of "nsd -c": in case the environment variable
	NAVISERVER is not set, and bin/init.tcl is not found under the
	running binary, fall-back to the configured install directory as
	"home"
	- add preprocessor variable NS_NAVISERVER to point to the configured
	install directory (can be used as last resort to find configuration
	data)

2016-10-31 16:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d1975e94a65d)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tclfile.c, tcl/compat.tcl:
	- turn ns_tmpnam into a proc
	- get rid of call to deprecated C library function tmpnam()

2016-10-31 15:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c5435719745)

	* tests/ns_file.test: new file.
	* tests/ns_file.test:
	- add test cases for ns_mktemp

2016-10-31 15:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c760a42a2ba3)

	* doc/src/naviserver/ns_mktemp.man:
	- improve man page

2016-10-31 14:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38d067d1577e)

	* nsd/nswin32.c:
	- make windows variant of ns_mkstemp() more compatible with unix/mac
	(remove _O_TEMPORARY flag)

2016-10-31 13:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aa91f76c1984)

	* README:
	- improve wording in README file

2016-10-31 13:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56e6607b19b2)

	* nsd-config.tcl:
	- adjust sample file parameters

2016-10-31 13:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (84ea6934e97a)

	* contrib/examples/index.adp, contrib/examples/upload.tcl,
	contrib/examples/writer.tcl:
	- general overhaul of the contrib/example scripts

2016-10-31 11:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86e4b886c65d)

	* nsd/connchan.c:
	- added const declaration
	- removed printf debug statement

2016-10-31 11:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (185cc71936f3)

	* nsd/tclfile.c:
	- remove unneeded cast

2016-10-31 11:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ce5d7bfbcad)

	* nsd/tclhttp.c:
	- fix indentation

2016-10-30 11:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8104ded5be35)

	* nsssl/nsssl.c:
	- comment current behavior

2016-10-30 11:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df1ea009b8fa)

	* nsd/tclfile.c:
	- fix bug #77 (introduced in 4.99.13)

2016-10-28 20:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (119162910be1)

	* tests/all.tcl, tests/test.nscfg:
	- make sure, the tests are running with expected locale and encoding

2016-10-28 20:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7417e74a0de)

	* tests/ns_conn.test:
	- fix potential race condition in test

2016-10-28 13:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2390de49314)

	* nsd/connchan.c:
	- ns_connchan: allow callback changes without invoking socket-
	shutdown machinery

2016-10-27 13:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a110c8f360e9)

	* nsd/connchan.c:
	- add support for partial write operations to "ns_connchan write"
	and "ns_connchan open"

2016-10-26 18:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (71343b1fbbb8)

	* doc/src/naviserver/ns_connchan.man, nsd/connchan.c, nsd/driver.c,
	nsd/nsd.h:
	ns_connchan:
	- add flag "-version" to "ns_connchan open" to specify HTTP version
	(default 1.0)
	- make sure, channel is writable before we are writing to it
	- generate error messages in case of failure directly from
	DriverSend(), since callers can't distinguish error cases
	- update documentation

2016-10-26 18:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (178d0da0457a)

	* tests/ns_conn.test:
	- improve comments

2016-10-26 18:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af896d47870f)

	* nssock/nssock.c:
	- white space changes

2016-10-26 17:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (613257644c6b)

	* nsd/sock.c:
	- add likely() and rearrange variable initialization

2016-10-25 21:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40053e3e0882)

	* nsd/sockfile.c:
	- don't complain about uncorking, when user has already closed the
	connection

2016-10-25 21:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3db6453373e4)

	* openacs-config.tcl:
	- unify conventions

2016-10-25 09:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b06bf02ce7a9)

	* nsd/log.c, nsd/modload.c, nsd/nswin32.c, nsd/op.c:
	- reduce number of return statements before end of function

2016-10-24 20:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f598ac071383)

	* nsd/connchan.c:
	- mark argument as unused

2016-10-24 20:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6baa55b869b4)

	* nsd/driver.c:
	- make static checker happy

2016-10-24 20:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ab2948cb826)

	* nsd/rollfile.c:
	- simplify logic

2016-10-24 11:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c70d52b8b68e)

	* nsd-config.tcl, openacs-config.tcl:
	- add config parameter "concurrentinterpcreate" to sample config
	files

2016-10-24 11:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (294aebe54203)

	* doc/src/manual/admin-maintenance.man:
	- add section with sample configuration for systemd
	- improve typesetting

2016-10-24 11:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d8c4a6efe63d)

	* doc/src/manual/admin-tuning.man:
	- add documentation of "ns/parameter" option
	"concurrentinterpcreate"
	- minor cleanup

2016-10-24 11:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02e7a7a27083)

	* doc/src/naviserver/ns_connchan.man:
	- fix white-space problem

2016-10-24 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f1b463ee9bfb)

	* nsd/nsconf.c, nsd/nsd.h, nsd/tclinit.c, tests/test.nscfg:
	- Add new config flag "concurrentinterpcreate" to "ns/parameters" to
	allow optionally concurrent creations of Tcl interpreters.
	Concurrent creations of tcl interpreters was a problem with Tcl 8.5,
	but seems to work with Tcl 8.6. Per default, this flag is
	deactivated.

2016-10-24 09:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a2a98bd5fa33)

	* nsd/log.c:
	- when NaviServer is started with -c or -f (i.e. logging to stderr),
	don't "roll away" the log file on Ns_LogRoll.

2016-10-23 15:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d67f16d14bbe)

	* nsd/connchan.c:
	ns_connchan:
	- freeChannel: change direct free operation into a callback to avoid
	race conditions
	- reduce goto statements

2016-10-23 12:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ebd11bad65a8)

	* nsd/driver.c:
	NSDriverClientOpen
	- remove goto statements
	- reduce variable scopes

2016-10-23 12:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (043f9c4ceafd)

	* nscp/nscp.c:
	- remove debug statements

2016-10-23 12:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec301729b2eb)

	* nsd/rollfile.c:
	- make sure, status is always initialized
	- removed goto statement

2016-10-22 13:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db8a69ada8a3)

	* nsd/driver.c:
	NSDriverClientOpen:
	- don't start url with // when path starts already with a /
	- keep request lines uniform (no crlf)

2016-10-22 13:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05aa3b220e91)

	* nsd/sockcallback.c:
	- provide a better explaining variable for hashtable

2016-10-22 12:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4b8e18f179aa)

	* doc/src/naviserver/ns_connchan.man:
	- add documentation for "ns_connchan open"
	- clarify format in which timeouts can be specified

2016-10-21 09:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (526312b7ac23)

	* nsd/tclinit.c:
	- don't update interp in "ns_ictl cleanup", when no defer callbacks
	were executed

2016-10-18 12:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6855b08b6a8)

	* nscp/nscp.c, nsd/op.c, nsd/request.c, nsd/rollfile.c, nsd/sched.c,
	nsd/set.c, nsd/sock.c, nsd/sockaddr.c, nsd/str.c, nsd/tclmisc.c,
	nsd/tclxkeylist.c, nsd/url2file.c, nsd/urlopen.c, nsdb/dbdrv.c:
	- reduce number of return statements before end of function

2016-10-18 12:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5eba288f31a6)

	* configure.ac:
	- make version number as development version (4.99.14d1)

2016-10-15 20:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (22510d345d18)

	* NEWS:
	- minimal cleanup in NEWS

2016-10-15 19:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3625f580aaf)

	* .hgtags:
	Added tag naviserver-4.99.13 for changeset c749993e27e1

2016-10-15 19:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c749993e27e1 [naviserver-4.99.13])

	* NEWS:
	- updated news file

2016-10-15 19:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7a9053efa0b7)

	* README, configure.ac:
	- bumped version number to 4.99.13

2016-10-15 19:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b15ced8913f0)

	* tests/http_persistent.test:
	- make result of test independent from length of version number

2016-10-15 18:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b16658b1f5c)

	* nsd/limits.c:
	- reduce variable scope

2016-10-14 14:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (937d6ce68a52)

	* nsd/binder.c, nsd/limits.c:
	- reduce variable scopes

2016-10-14 14:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (528eff8b8a09)

	* nsthread/mutex.c:
	- add thread id to warning message

2016-10-14 14:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (877586608a54)

	* tcl/aolserver-openacs.tcl:
	- use ad_log instead of ns_log to warn about long cache locking
	operations

2016-10-11 11:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6030378957d1)

	* configure.ac, include/ns.h, nsd/limits.c, nsd/log.c, nsd/request.c,
	nsd/rollfile.c, nsd/sched.c, nsd/sockaddr.c, nsd/tclmisc.c,
	nsd/urlopen.c, nsdb/dbinit.c:
	- Reduced number of return statement before end of function
	- improved comments
	- bumped version number to 13b2

2016-10-11 11:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3164c35f728e)

	* nsd/binder.c:
	- reduce variable scope
	- improving comments

2016-10-10 10:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a6094113a2d)

	* NEWS, NEWS.template:
	- cosmetical change

2016-10-10 10:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9cc8c8810cf7)

	* NEWS, README, configure.ac:
	- update NEWS and README
	- bump version number to 4.99.13b1

2016-10-09 19:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6a738147b23)

	* NEWS:
	- prepare NEWS file for next release

2016-10-09 19:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7aedcef5da29)

	* doc/src/naviserver/ns_absoluteurl.man,
	doc/src/naviserver/ns_parseurl.man: new file.
	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_absoluteurl.man,
	doc/src/naviserver/ns_parseurl.man,
	doc/src/naviserver/ns_url2file.man,
	doc/src/naviserver/ns_urldecode.man:
	- add man pages for ns_absoluteurl and ns_parseurl

2016-10-09 18:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d69936f1f641)

	* nsd/url.c, tests/ns_parseurl.test:
	- use simply "port" instead of "portstring" in resulting dict of
	ns_parseurl

2016-10-09 17:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (089cfd42b5b6)

	* nsd/log.c:
	- ignore return value of RollFileFmt(), Ns_LogRoll() succeeds, when
	LogOpen() succeeds

2016-10-09 12:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (035fa70d50c2)

	* doc/src/naviserver/ns_log.man, nsd-config.tcl, openacs-config.tcl:
	- change "recommended" logrollfmt

2016-10-08 18:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aa7311745617)

	* configure.ac:
	- bump version number to 4.99.13d5

2016-10-08 18:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7ae3f55e3a8)

	* doc/src/naviserver/ns_log.man, include/ns.h, nsd-config.tcl,
	nsd/adpcmds.c, nsd/log.c, nsd/nsd.h, nsd/rollfile.c, nsd/unix.c,
	nslog/nslog.c, openacs-config.tcl:
	new option for error.log: logrollfmt (section ns/parameters)
	- This option has the same interpretation as for access log (and
	shares the implementation) and provides timestamp based log file
	naming. This option can reduce back-up demands for large error.logs
	significantly (since the names are stable) and increases the
	orthogonality of options (in respect to access.logs).
	- added option to sample config files
	- added description to man page

2016-10-08 18:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05ce2159c183)

	* include/Makefile.global.in:
	- add picky compile flags as sample to the Makefile

2016-10-08 18:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d9aaa29d70f)

	* nsd/tclmisc.c:
	- limit interpretation of numeric entities to printable characters

2016-10-08 17:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2535c2ec4a88)

	* nsd/tclmisc.c:
	- ns_striphtml: honor numeric entities between 1 and 255 instead of
	ignoring it

2016-10-07 14:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c3f643f11b17)

	* include/nsthread.h:
	- fix typo in last commit

2016-10-07 13:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ad7e0aabec2d)

	* include/nsthread.h, nsd/adpparse.c, nsd/sock.c, nsd/sockaddr.c,
	nsd/sockfile.c, nsd/tclmisc.c, nsd/unix.c, nsproxy/nsproxylib.c,
	nssock/nssock.c, nsthread/nsthreadtest.c, nsthread/thread.c:
	- remove implicit conversions and comparisons between different
	types also for Linux

2016-10-07 13:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d92a256f13a)

	* include/Makefile.global.in, include/ns.h, include/nsthread.h,
	nscgi/nscgi.c, nsd/binder.c, nsd/compress.c, nsd/connio.c,
	nsd/driver.c, nsd/dstring.c, nsd/event.c, nsd/exec.c,
	nsd/fastpath.c, nsd/fd.c, nsd/index.c, nsd/log.c, nsd/nsconf.c,
	nsd/nsd.h, nsd/nsmain.c, nsd/nswin32.c, nsd/returnresp.c,
	nsd/sock.c, nsd/sockaddr.c, nsd/sockcallback.c, nsd/task.c,
	nsd/tclhttp.c, nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclsock.c,
	nsd/tclvar.c, nsd/tls.c, nsd/unix.c, nsd/watchdog.c, nsdb/dbinit.c,
	nslog/nslog.c, nsperm/nsperm.c, nsproxy/nsproxylib.c,
	nssock/nssock.c, nsssl/nsssl.c, nsthread/memory.c,
	nsthread/nsthreadtest.c, nsthread/pthread.c, nsthread/thread.c,
	nsthread/thread.h, nsthread/time.c, nsthread/winthread.c:
	- remove implicit conversions and comparisons between different
	types
	- compiles now clean with -Wconversion -Wsign-conversion -Wfloat-
	conversion -Wsign-compare

2016-10-02 19:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc836c75c007)

	* nsd/tclmisc.c, nsd/tclxkeylist.c:
	Make NaviServer compileable with -DTCL_NO_DEPRECATED
	- remove usages if ANSI_ARGS macro
	- get rid of TCL_PARSE_PART1: flag is deprecated at least since tcl
	8.4 and has no effect. The part1 is always parsed whenever the part2
	is NULL

2016-10-02 18:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0dfb19374305)

	* nsd/tclcallbacks.c:
	- fix variable name in NONNULL assert

2016-10-02 15:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (086a10ffba05)

	* nsd/config.c:
	- remove a few gotos and a premature return

2016-10-02 15:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (488d2c7b0d10)

	* nsd/url.c, tests/ns_parseurl.test:
	- fix in url-parser test case with port and ip literal notation
	- extend regression test
	- remove one more premature return

2016-10-02 14:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f4dcb02ee92)

	* configure.ac:
	- bump version number to 4.99.13d4

2016-10-02 14:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0469ff0d3c3e)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/url.c, tests/ns_parseurl.test:
	Improve url generation:
	- new command ns_absoluteurl make Ns_AbsoluteUrl() functionality
	available on the Tcl layer (compose an absolute url based on a
	relative url which is completed with parts from an base url)
	- fix bug in Ns_AbsoluteUrl() in connection with IP literal notation
	- added regression test cases for ns_absoluteurl

2016-10-01 20:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (47eaa9ecbf5f)

	* nscgi/nscgi.c, nsd/nswin32.c, nsd/range.c, nsd/request.c,
	nsd/server.c, nsd/set.c, nsd/sock.c, nsd/str.c, nsd/tclconf.c,
	nsd/tclobj.c, nsd/tclobjv.c, nsd/tclthread.c, nsd/tclxkeylist.c,
	nsd/url.c, nsd/url2file.c, nsd/urlencode.c, nsd/urlopen.c,
	nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/nsdb.c, nsdbtest/nsdbtest.c:
	- reduce number of premature returns
	- reduce variable scopes

2016-10-01 20:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a847aecaad1c)

	* tests/compat.test, tests/encoding.test, tests/errordoc.test,
	tests/http_byteranges.test, tests/http_keep.test, tests/init.test,
	tests/ns_accesslog.test, tests/ns_adp_compress.test,
	tests/ns_cond.test, tests/ns_config.test, tests/ns_conn.test,
	tests/ns_conn_host.test, tests/ns_crypt.test, tests/ns_env.test,
	tests/ns_hashpath.test, tests/ns_httptime.test,
	tests/ns_limits.test, tests/ns_log.test, tests/ns_mime.test,
	tests/ns_pagepath.test, tests/ns_parseargs.test,
	tests/ns_proxy.test, tests/ns_register_filter.test,
	tests/ns_register_proc.test, tests/ns_schedule.test,
	tests/ns_server.test, tests/ns_serverpath.test, tests/ns_sls.test,
	tests/ns_thread.test, tests/ns_urlencode.test, tests/ns_writer.test,
	tests/nsdb.test, tests/progress.test, tests/tclconnio.test,
	tests/tclresp.test, tests/timeout.test, tests/url2file.test:
	- replace tcl "eval" by expand operator

2016-10-01 16:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e1e56eced4d)

	* nsd/progress.c:
	- reduce number of return statements per function

2016-10-01 16:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45dbe9e68262)

	* nsd/request.c:
	- adhere to usual comment formatting rules
	- improve variable name
	- reduce number of return statements per function

2016-10-01 13:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (737e80d4aaae)

	* nsd/log.c, nsd/tclset.c:
	- silence checker about potential uninitialized variables

2016-10-01 10:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0710765f66e4)

	* nsd/sockfile.c, nsd/task.c, nsd/tclcallbacks.c, nsd/tclobj.c,
	nsd/tclsched.c:
	- reduce number of return statements per function
	- reduce variable scopes

2016-10-01 10:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b534a924109b)

	* nsd/tclmisc.c:
	- follow usual comment formatting rules
	- reduce number of return statements per function

2016-10-01 08:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d262eb5e9b4)

	* nsd/returnresp.c:
	- reduce the number of return statements per function

2016-09-30 21:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (50baad2286ec)

	* nsd/random.c, nsd/returnresp.c:
	- reduce the number of returns per function

2016-09-30 21:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb3640d49148)

	* nsd/adpeval.c, nsd/info.c, nsd/nsd.h, nsd/quotehtml.c,
	nsd/tclcmds.c, nsd/tclfile.c, nsd/tclmisc.c, nsd/tclset.c:
	Use for all Tcl cmds Tcl_Obj interface:
	- converted all remaining Tcl_CmdProc to Tcl_ObjCmdProc
	NsTclAdpStatsCmd -> NsTclAdpStatsObjCmd NsTclCrashCmd ->
	NsTclCrashObjCmd NsTclHrefsCmd -> NsTclHrefsObjCmd NsTclLibraryCmd
	-> NsTclLibraryObjCmd NsTclMkTempCmd -> NsTclMkTempObjCmd
	NsTclParseHeaderCmd -> NsTclParseHeaderObjCmd NsTclQuoteHtmlCmd ->
	NsTclQuoteHtmlObjCmd NsTclStripHtmlCmd -> NsTclStripHtmlObjCmd

2016-09-30 15:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb2eadd33ea7)

	* nsd/connio.c, nsd/log.c, nsd/nswin32.c, nsd/op.c, nsd/pathname.c:
	- reduce the number of return statements per function

2016-09-30 11:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c10e5b2e4402)

	* nsd/event.c, nsd/nswin32.c, nsd/sock.c, nsd/sockcallback.c:
	- pollfd members events (and revents) are defined by posix as short.
	make typeconversion explicit.

2016-09-30 11:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7edc21e1c135)

	* include/ns.h, nsd/binder.c:
	- adjust type of argument to current practice to reduce code smells
	(when a char is passed, use char as argument type)

2016-09-30 11:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39caadf4b171)

	* tests/cookies.test:
	- adjust tests of regression test to http-only flag when deleting
	cookies (to improve result from security scanners)

2016-09-30 11:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8fdd941c27e)

	* nsd/fastpath.c:
	- white space changes (remove tabs)

2016-09-30 11:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f626b4421bf7)

	* tests/testserver/pages/test.html,
	tests/testserver/pages/test.html.gz: new file.
	* tests/http.test, tests/test.nscfg, tests/testserver/pages/test.html,
	tests/testserver/pages/test.html.gz:
	- add test cases for static gzipped files

2016-09-30 10:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c8d0bad97da)

	* configure.ac:
	- bump version number to 4.99.13d3

2016-09-30 10:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e26c913dd15c)

	* nsd/fastpath.c:
	- bug fix for mime-type in fastpath, when gzip is activated (mime
	type was incorrectly set to application/gzip, when the static
	gzipped file was returned). many thanks to David Osborne for
	reporting.

2016-09-29 10:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a7e41d0fa1a3)

	* nsd/driver.c:
	- don't use boolean arguments to comparison operator

2016-09-29 10:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (490b6a504c90)

	* nsd/nsd.h:
	- use consistently NS_POLL_NFDS_TYPE for pidx

2016-09-29 10:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e2a2ad851296)

	* nsd/driver.c:
	- pollfd members events (and revents) are defined by posix as short.
	make typeconversion explicit.

2016-09-26 14:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (137b9512f773)

	* nsthread/tls.c:
	- if Tcl is fixed (duplicate call of TclpFreeAllocCache(), the
	shudown-bypass is not needed anymore (will be updated, when it is
	clear, when this is the case and how it can be detected)

2016-09-22 19:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (070bfddbc75d)

	* tcl/aolserver-openacs.tcl:
	- moke callback more robust, in case, some ther proc has already
	performed a nsf::finalize operation

2016-09-22 12:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb0323c3e23b)

	* configure.ac:
	- bump version number to 4.99.13d2

2016-09-22 12:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c180d3326f64)

	* nsd/nsd.h, nsd/tclinit.c:
	- get rid of Tcl_EvalFile() which is going to be deprecated by Tcl

2016-09-22 12:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2cabc44d6bf1)

	* Makefile:
	- remove automatic run in "lldbtest" target (to be able to configure
	lldb)

2016-09-22 12:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (83ad483d4a65)

	* tcl/aolserver-openacs.tcl:
	- register delete trace to run nsf::finalize in a safe state (before
	any other c-based finalize handler are fired)

2016-09-22 11:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc3df143ec41)

	* nsd/init.tcl:
	- avoid regular expression (to avoid as well the registration of the
	regexp-thread-local storage initialization)

2016-09-14 04:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0beacf24b7ec)

	* nsd/url.c:
	- fix chartype comparison for Linux

2016-09-10 14:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40aec37161a9)

	* nsd/tclfile.c, nsd/tclinit.c:
	- remove return from middle of function

2016-09-10 14:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3dbe6eae4721)

	* nsd/tclfile.c:
	- improve source documentation

2016-09-10 14:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59d6de25da83)

	* nsd/url.c:
	- add "UNUSED" declaration

2016-09-09 12:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3306b6e4316d)

	* tests/ns_parseurl.test: new file.
	* nsd/nsd.h, nsd/tclcmds.c, nsd/url.c, tests/ns_parseurl.test:
	Improve url parser:
	- new command ns_parseurl make Ns_ParseUrl() functionality available
	on the Tcl layer
	- make URL parser more restrictive: distingush between colon for
	protocol and other colons
	- add support for protocol relative (protocol agnostic) URLs (as
	contained in RFC 3986)
	- added regression test cases

2016-09-09 10:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0149e848582)

	* nsd/cookies.c:
	- ns_deletecookie: make delted cookie non-scriptable to improve
	ratings on security scanners

2016-09-02 20:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a3a58296eae)

	* nsd/tclconf.c:
	- fix for [naviserver:bugs] #76: ns_configsections returns
	incomplete results

2016-08-30 09:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d4244f081fdc)

	* configure.ac:
	- bump version number to 4.99.13d1

2016-08-21 17:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16f4c016b316)

	* .hgtags:
	Added tag naviserver-4.99.12 for changeset 74ebbd617f03

2016-08-21 17:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (74ebbd617f03 [naviserver-4.99.12])

	* NEWS, README, configure.ac:
	- bump version number, update NEWS

2016-08-21 17:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c9376408bc2)

	* nsd/httptime.c, nsd/tclmisc.c:
	- remove conditions which are always true

2016-08-19 12:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81647df2d34a)

	* nsd/tclthread.c:
	- reduce the number of returns per function
	- improve comment density

2016-08-19 11:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (73c498787f27)

	* nsd/tclfile.c:
	- improve comment density

2016-08-19 11:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (46c3b1c30eae)

	* nsd/queue.c:
	- cast boolean value explicitly to "int" for printf

2016-08-18 14:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e2e2e4b8682)

	* nsd/nswin32.c:
	- reduce number of returns per function

2016-08-18 13:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d2d6b17b5b7)

	* nsd/queue.c:
	- reduce number of return statements per function

2016-08-18 13:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7ba1fc3151be)

	* nsd/str.c:
	- brace expression

2016-08-18 13:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c468fb8b5fb)

	* nsd/queue.c:
	- prefer bool over int

2016-08-18 13:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f51c5c6c4cc2)

	* nsd/urlopen.c:
	- remove unneeded cast

2016-08-18 13:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d7cc9837b9e)

	* nsthread/mutex.c:
	- prefer "for" loop over "while"

2016-08-18 13:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eeb915acc13d)

	* nsd/tcljob.c:
	- improve comments

2016-08-18 12:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c75ee7f5cb5)

	* nsd/adpeval.c, nsd/nsd.h, nsd/tclinit.c:
	- use boolean for itPtr->deleteInterp

2016-08-17 13:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b45630d2237f)

	* nsd/connio.c:
	- changed type of condition to boolean

2016-08-17 13:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d77fdc34196)

	* nsd/driver.c:
	- adding const declaration

2016-08-15 18:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c06882382dc)

	* README, configure.ac:
	- bumped version numbers to 4.99.12b1

2016-08-15 17:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5b5b2168644)

	* NEWS:
	- udpated NEWS with features of 4.99.12

2016-08-15 15:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f1dcb4a5959)

	* NEWS, include/ns.h, nsd/driver.c, nsd/lisp.c, nsd/random.c,
	nsdb/dbtcl.c:
	- reduce cast from non-struct type to struct type
	- reduce cases, where pointer arithmetic on non-array variables relies
	on memory layout, which is dangerous (use array variable instead)

2016-08-15 13:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3acc23fe5d5f)

	* nsd/tclcache.c:
	- improve comment

2016-08-15 13:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1dd188baec5b)

	* include/ns.h, nsd/conn.c, nsd/connchan.c, nsd/fastpath.c,
	nsd/modload.c, nsd/nsd.h, nsd/range.c, nsd/sched.c,
	nsd/tclxkeylist.c:
	- prefer bool over int
	- reduce implicit conversions

2016-08-15 13:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f195977256db)

	* nsd/connio.c, nsd/index.c, nsd/limits.c, nsd/lisp.c, nsd/modload.c,
	nsd/nsmain.c, nsd/sock.c, nsd/tclrequest.c, nsd/tclsock.c,
	nsd/tclthread.c, nsdb/dbtcl.c:
	- reduce number of returns per function
	- reduce variable scopes

2016-08-15 10:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0dc1e3e92456)

	* nsd/crypt.c:
	- reduce implicit conversions leading to potential loss of sign

2016-08-15 10:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7554f0a39cc2)

	* nsd/tclfile.c:
	- whitespace changes

2016-08-15 10:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45fc318f84cf)

	* nsd/tclfile.c:
	- whitespace changes

2016-08-15 00:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5795a47309fa)

	* nsd/tclmisc.c:
	- reduce number of returns per function

2016-08-15 00:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9786315db2e7)

	* NEWS, nsd/tclhttp.c, nsd/tcljob.c:
	- reduce number of returns per function
	- reduce variable scope

2016-08-15 00:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6d39eea2998)

	* nsd/driver.c:
	- add UNUSED declarations

2016-08-14 23:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05052048f0b8)

	* nsd/driver.c, nsd/tclcache.c:
	- add const declarations
	- reduce implicit conversions

2016-08-14 23:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c42534e77208)

	* nsd/tclmisc.c:
	- fix implicit conversions

2016-08-14 23:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45b1637b2c00)

	* nsd/tclxkeylist.c:
	- minor cleanup: remove unneeded static var, silence static checker

2016-08-14 23:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca02f21187a7)

	* nsd/fastpath.c, nsd/info.c:
	- silence static checkers about potential uninitialized variables

2016-08-14 23:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (243825261f35)

	* nsd/tclset.c:
	- fix indentation

2016-08-14 23:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e65a9a369244)

	* nsd/fastpath.c, nsd/log.c, nsd/tcljob.c:
	- improve code comments

2016-08-14 15:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c7def6f00d6)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/auth.c, nsd/info.c, nsd/modload.c, nsd/queue.c, nsd/tclcache.c,
	nsd/tclmisc.c, nsd/tclrequest.c, nsd/tclresp.c, nsd/tclset.c,
	nsd/tclthread.c, nsd/url2file.c, nsd/urlopen.c, nslog/nslog.c,
	nsproxy/nsproxylib.c:
	- align argument names of function defines for Tcl_ObjCmdProc with
	the names used in Tcl

2016-08-13 20:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (35499fbf053a)

	* doc/src/naviserver/ns_hotp.man, doc/src/naviserver/ns_md.man,
	doc/src/naviserver/ns_totp.man: new file.
	* doc/src/naviserver/ns_sha2.man: deleted file.
	* Makefile, doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_hmac.man, doc/src/naviserver/ns_hotp.man,
	doc/src/naviserver/ns_md.man, doc/src/naviserver/ns_md5.man,
	doc/src/naviserver/ns_sha1.man, doc/src/naviserver/ns_sha2.man,
	doc/src/naviserver/ns_totp.man, tcl/ns_crypto.tcl:
	- added man pages for ns_md ns_hotp ns_totp

2016-08-13 13:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e99cd8cd109b)

	* nscp/nscp.c, nsd/tclmisc.c, nsd/tclxkeylist.c:
	- reduce number of calls to Tcl_AppendResult()
	- reduce number of return statements per function

2016-08-13 01:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26e552e4e292)

	* nsd/auth.c, nsd/config.c, nsd/conn.c, nsd/quotehtml.c,
	nsd/tclconf.c, nsd/tclimg.c, nsd/tclobj.c, nsd/tclxkeylist.c:
	- reduce number of calls to Tcl_AppendResult()
	- reduce number of return statements per function

2016-08-13 01:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb6000be7dd2)

	* nsd/conn.c, nsd/encoding.c, nsd/limits.c, nsd/queue.c,
	nsd/tclcache.c, nsd/tclfile.c, nsd/tcljob.c, nsd/tclmisc.c,
	nsd/tclset.c, nsd/tclsock.c, nsd/tclvar.c, nsdb/dbtcl.c,
	nsproxy/nsproxylib.c:
	- eliminate all calls to deprecated call Tcl_AppendElement()
	- reduce number of calls to Tcl_AppendResult()

2016-08-12 14:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15a886f922a5)

	* nsd/log.c:
	- add missing space

2016-08-12 14:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aebc5994e05c)

	* nsd/log.c, nsd/pathname.c, nsd/tclfile.c:
	- no need to call Ns_DStringFree() after Tcl_DStringResult()

2016-08-12 14:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ece27e80d68f)

	* nsd/info.c, nsd/log.c, nsd/tclenv.c, nsd/tclobjv.c, nsd/tclset.c,
	nslog/nslog.c:
	- reduce number of calls to deprecated Tcl_AppendResult()

2016-08-12 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63cfa387b6e0)

	* nsd/range.c, nsd/request.c, nsd/sls.c, nsd/tclmisc.c, nsd/tclobjv.c:
	- reduce number of multiple returns of functions
	- reduce variable scopes

2016-08-12 10:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (19f0d999c114)

	* nsd/limits.c, nsd/tcljob.c, nsd/tclrequest.c, nsd/tclsched.c,
	nsd/tclvar.c, nsd/url2file.c:
	- use consistently INT2PTR(NS_TRUE) as argument in Ns_ObjvBool
	converter registrations

2016-08-11 12:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d2daa30ce2b6)

	* nsd/adpeval.c:
	- reduce number of calls to deprecated Tcl_AppendResult()

2016-08-11 12:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ce8bd1a6a6f)

	* nsd/adpcmds.c, nsd/conn.c, nsd/pathname.c, nsd/tclcache.c,
	nsd/tcltime.c, nsd/tclvar.c, nsdb/dbtcl.c:
	- reduce number of calls to deprecated Tcl_AppendResult()

2016-08-11 11:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (228bfb7afc8c)

	* nsd/adprequest.c, nsd/tclobj.c, nsd/tclsock.c:
	- reduce number of calls to deprecated Tcl_AppendResult()

2016-08-11 11:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc859079ef95)

	* nsproxy/nsproxylib.c:
	- reduce number of calls to deprecated Tcl_AppendResult()

2016-08-11 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d34032a8d284)

	* nsproxy/nsproxylib.c:
	- modernize argv interface
	- reduce number of returns per function

2016-08-11 10:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6428a553c3ea)

	* nsd/tclsock.c:
	- fix flag "-timeout" for NsTclSockOpenObjCmd()
	- reduce number of returns per function

2016-08-11 10:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b276118d2caa)

	* nsd/driver.c:
	- make arguments to Tcl_GetChannelHandle() type clean

2016-08-10 13:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39e2d82f608d)

	* nsd/encoding.c, nsd/mimetypes.c, nsd/tclinit.c, nsd/tcljob.c:
	- reduce variable scopes

2016-08-10 13:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef46886e21a9)

	* nsd/fastpath.c:
	- prefer variable name "mimeType" over "type"
	- reduce number of multiple returns from functions/switches

2016-08-10 13:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (674a490e01ad)

	* nsd/return.c:
	- use NS_INVALID_SOCKET instead of -1
	- remove test for Ns_ConnSockPtr() again (warn on a higher level)

2016-08-10 13:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8359d60e07eb)

	* tests/ns_writer.test:
	- order subcommands alphabetically

2016-08-10 13:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8fec6aeb9a41)

	* nsd/driver.c:
	- split large switch statement of NsTclWriterObjCmd using
	Ns_SubcmdObjv()

2016-08-10 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3866a4abc08)

	* nsd/dns.c, nsd/driver.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tls.c, nsthread/mutex.c:
	- issue error messages with cmds without arguments are issued with
	arguments
	- added const declarations
	- marked unused arguments with UNUSED

2016-08-09 22:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76603baefe60)

	* nsd/return.c:
	- terminate ReturnOpen() when Ns_Conn has no associated sockPtr

2016-08-09 21:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44d88bd6d7d2)

	* nsd/encoding.c, nsd/fastpath.c, nsd/filter.c, nsd/form.c,
	nsd/mimetypes.c:
	- reduce number of returns per function

2016-08-09 20:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (783dc869ca48)

	* nsd/conn.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tcljob.c,
	nsd/tclsock.c, nsd/tls.c, nsd/urlspace.c:
	- reduce variable scopes

2016-08-09 20:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (78fd87686e8d)

	* nsperm/nsperm.c:
	- add casts for printf statements

2016-08-09 20:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d4ec3935fcd8)

	* nsd/driver.c:
	- reduce number of returns per function
	- ns_write submitfile: bail out earlier, when no sockPtr is available
	(when e.g. client has closed already the connection)

2016-08-09 11:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38c770ee085b)

	* nsperm/nsperm.c:
	- reduce number of calls to deprecated Tcl_AppendResult()

2016-08-09 11:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3913f1cd88ee)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/conn.c, nsd/driver.c,
	nsd/limits.c, nsd/queue.c, nsd/tclcache.c, nsd/tclfile.c,
	nsd/tcljob.c, nsd/tclresp.c, nsd/tclset.c, nsd/tclsock.c,
	nsd/tclvar.c, nsperm/nsperm.c, nsproxy/nsproxylib.c:
	- reduce number of calls to deprecated Tcl_AppendResult()

2016-08-09 10:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7f8039acf37)

	* nsd/httptime.c:
	- reduce number of multiple returns per function
	- modernize argv parsing

2016-08-09 10:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6f1c6be5531)

	* nsd/tclhttp.c:
	- reduce number of multiple returns from functions/switches
	- prefer Ns_TclPrintfResult() over Tcl_AppendResult() for error
	messages (Tcl_AppendResult is deprecated)

2016-08-08 20:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8931ecd1259e)

	* nsd/tclhttp.c:
	- split large switch() statement into smaller units using using
	Ns_SubcmdObjv()

2016-08-08 19:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e335bd8796a)

	* doc/src/naviserver/ns_ictl.man, nsd/tclinit.c:
	- update documentation
	- add deprecated log statements
	- prefine single returns from functions

2016-08-08 19:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ebf21dde417)

	* nsd/tclinit.c:
	- don't use boolean args for comparison operator
	- removed unneeded function

2016-08-08 19:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (80b6b7ae39f7)

	* configure.ac:
	- bump version number to 4.99.12d6

2016-08-08 19:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef4591cb8240)

	* nsd/tclinit.c:
	- split huge switch statement using using Ns_SubcmdObjv()

2016-08-08 19:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ee39b7c758a5)

	* tests/ns_crypto.test:
	- fix typo in comment

2016-08-08 19:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6a5a11455f0e)

	* m4/openssl.m4:
	- fix typo in error message

2016-08-07 16:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (101235f4c435)

	* nsd/urlspace.c:
	- add prototypes

2016-08-07 15:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9b11047548dc)

	* tests/all.tcl:
	- Don't exit the script, but let ns_shutdown take care about
	terminating everything. Otherwise it is possible that the shutdown
	mechanism of NaviServer conflicts with Tcls shutdown (both
	ThreadExitProc and an ExitProc might be called on the same interp).

2016-08-07 00:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81dcbcd3e17a)

	* nsd/urlspace.c, tests/ns_urlspace.test:
	- split large function NsTclUrlSpaceObjCmd() into 5 small ones using
	Ns_SubcmdObjv()

2016-08-07 00:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (439d069c5de7)

	* nsd/tcljob.c:
	- reduce variable scope

2016-08-07 00:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d50e982aae1)

	* nsproxy/nsproxylib.c:
	- use Ns_ParseObjv() instead of manual argv parsing
	- improve documentation

2016-08-07 00:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f622dda6913)

	* nsd/tls.c:
	- reduce variable scopes

2016-08-07 00:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f68fa232935d)

	* nsd/dns.c:
	- reduce variable scope

2016-08-06 22:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0609539f91ef)

	* nsd/tls.c:
	- add const declarations

2016-08-06 22:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4038e4ce89ad)

	* nsd/tclobjv.c:
	- improve comments
	- white-space changes

2016-08-06 22:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (35ff25943d64)

	* nsd/tcljob.c:
	- split huge function NsTclJobObjCmd() into 14 small ones using
	Ns_SubcmdObjv()
	- add objv converter ObjvQueue()

2016-08-06 22:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f57ffc55cc80)

	* nsd/tclfile.c:
	- don't use boolean values as arguments of comparsion
	- improve comments

2016-08-06 22:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a215457b83f6)

	* nsd/dns.c:
	- prefer single returns from functions

2016-08-06 22:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17f7f1727a45)

	* nsd/connio.c:
	- improve comments

2016-08-06 22:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07afa6a8a841)

	* nsd/connchan.c:
	- add const declaration

2016-08-06 22:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (11c5cd3bc33d)

	* nsd/adpcmds.c:
	- prefer NS_TRUE over 1 for boolean value

2016-08-05 12:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d78a4a33a9b4)

	* include/ns.h, nsd/connchan.c, nsd/tclfile.c, nsd/tclobjv.c,
	nsd/tls.c, tests/ns_conn.test:
	New infrastructure support for commands with subcommands:
	- instead of long switch statements with nested structures with often
	many returns, one can now specify Tcl_ObjCmdProcs for subcommands.
	The command with subcommands can be defined as:

	 const Ns_SubCmdSpec subcmds[] = { {"callback",
	ConnChanCallbackObjCmd}, {"close", ConnChanCloseObjCmd}, {"detach",
	ConnChanDetachObjCmd}, {"exists", ConnChanExistsObjCmd}, {"list",
	ConnChanListObjCmd}, {"open", ConnChanOpenObjCmd}, {"read",
	ConnChanReadObjCmd}, {"write", ConnChanWriteObjCmd}, {NULL, NULL} };
	return Ns_SubcmdObjv(subcmds, clientData, interp, objc, objv);

	- advantages: more modular, smaller functions, improved locality
	- used so far in crypto support, ns_chan (a 200 function was split
	into 5 functions up to 50 lines), ns_connchan (a 500 line function
	was split into 8 functions up to 120 lines). There are more of these
	large switch statements in the code.

2016-08-04 19:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a146b2f9487)

	* include/ns.h, nsd/tclfile.c, nsd/tclresp.c, nsdb/dbtcl.c:
	- prefer single returns from functions

2016-08-04 19:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57c61e2961b9)

	* nsd/driver.c, nsd/tclhttp.c, nsd/tclobjv.c, nsd/tclresp.c:
	- minor changes (whitespace, comments)

2016-08-04 19:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af33c6200826)

	* nsd/tclsock.c:
	- prefer single return from functions

2016-08-04 19:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69ca5fd5cb18)

	* nsd/tcljob.c:
	- prefer single return from funciton
	- fix typo

2016-08-04 19:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (332b83b64f81)

	* nsd/connio.c:
	- correct return value

2016-08-04 19:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23d4ec52eec8)

	* nsd/config.c:
	- fix bool value

2016-08-04 19:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e81f44f6b9d5)

	* nsd/adpparse.c:
	- adding const declaration

2016-08-03 21:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b4137da017a)

	* tcl/ns_crypto.tcl, tests/ns_crypto.test:
	Improved crypto support:
	- ns_crypto::hotp: Implementation of HMAC based One-Time Password
	algorithm as defined in RFC 4226
	- ns_crypto::totp: Implementation of a Time-Based One-Time Password
	algorithm as defined in RFC 6238
	- extended regression test with test vector from the RFCs

2016-08-03 21:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3639039c90b7)

	* Makefile.win32:
	- use spelling "NaviServer" consistently

2016-08-03 21:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b9c0c4514c9)

	* tcl/aolserver-openacs.tcl:
	- allow one to run nsf code aslo in the testserver

2016-08-03 21:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d94a8de0c67)

	* tests/ns_hostbyaddr.test:
	- simplify code

2016-08-02 21:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (beef7d7f7a8e)

	* nsd/adpparse.c, nsd/cache.c, nsd/callbacks.c, nsd/config.c,
	nsd/nsd.h, nsd/range.c, nsd/return.c:
	- prefer single returns from functions
	- get rid of alloca() in case c99 is available
	- split up NsAdpParse() into AdpParseTclFile() and AdpParseAdp()

2016-08-02 19:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fd2153d6373c)

	* nsd/driver.c:
	- add const declaration

2016-08-02 02:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86f3d28fc2de)

	* nsd/connio.c:
	- reduce variable scope

2016-08-02 02:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d117597024e)

	* nscp/nscp.c, nsd/adpcmds.c, nsd/driver.c, nsd/tclobjv.c,
	nsd/tclresp.c, nsd/tclsock.c:
	- use unsigned short for port
	- prefer single returns from functions
	- add const declaration

2016-08-02 01:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb992936606e)

	* nsd/tcltime.c:
	- use uppercase "L" as suffix to avoid possible confusion with 1

2016-08-01 21:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (75ebefc81a96)

	* nsd/tclhttp.c:
	- ignore result explicitly

2016-08-01 21:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1fa82a7ef38)

	* nsd/adpcmds.c:
	- prefer single returns from functions

2016-08-01 21:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b4fc667a9da)

	* nscp/nscp.c:
	- remove check for missing configuration, since defaults are
	provided

2016-08-01 21:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (406b33ceed05)

	* include/ns.h:
	- fix port type from unsiged int to unsigned short

2016-08-01 21:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac9ae13ce1ec)

	* nsd/conn.c:
	- silence checker

2016-08-01 21:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e0d02f55353)

	* nsd/tclobjv.c:
	- add comment lines

2016-08-01 20:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fae655457791)

	* nsd/connio.c, nsd/tcljob.c:
	- prefer single returns from functions

2016-08-01 11:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7187d07bad3d)

	* nsd/driver.c, nsd/sockaddr.c:
	- reduce implicit conversions

2016-08-01 11:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c0249db3aa82)

	* include/ns.h, nsd/connio.c, nsd/proc.c, nsd/progress.c,
	nsd/tclmisc.c, nsd/tclobjv.c:
	- adding const declarations

2016-08-01 11:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a3a2bb7f63c)

	* nsd/tclresp.c:
	- refer single returns from functions

2016-08-01 10:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (582436fb7662)

	* nsd/tls.c:
	- prefer single return from functions

2016-08-01 09:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6494e6c8e16e)

	* nsd/compress.c:
	- reduce implicit conversions (implicit sign loss)

2016-07-31 19:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e44450123bc1)

	* tests/ns_crypto.test: new file.
	* tests/ns_crypto.test:
	- add new testfile for ns_crypto::* commands

2016-07-31 19:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (027127d33369)

	* nsd/driver.c:
	- reduce implicit conversions

2016-07-31 19:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8be6bbf3769)

	* nsd/tcltime.c:
	- adding const statements

2016-07-31 18:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (717ce8aa75c5)

	* tcl/ns_crypto.tcl: new file.
	* tcl/crypto.tcl: deleted file.
	* nsd/tclcmds.c, nsd/tclhttp.c, tcl/compat.tcl, tcl/crypto.tcl,
	tcl/ns_crypto.tcl, tests/ns_sha1.test:
	- prefer bool over int
	- use unsigned short for ports
	- use namespace ::ns_crypto::* instead of ::crypto::*

2016-07-31 18:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a837f8f2a96)

	* include/ns.h, nsd/dstring.c, nsd/sock.c, nsd/tclobjv.c,
	nsd/tclsock.c:
	- additional objv-converter Ns_ObjvUShort() for unsigned short (used
	for ports)
	- additional DString formatter Ns_DStringAppendTime() to provide
	unified formatting of Ns_Time structs
	- fix more occurrences for using unsigned short for ports
	- modernize tcl argv parsing for
	   * NsTclSockCallbackObjCmd(),
	   * NsTclSockListenCallbackObjCmd,
	   * NsTclSockListenObjCmd(), and
	   * NsTclSockOpenObjCmd()

2016-07-31 18:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f27d8a3a88bb)

	* nsd/tclsched.c:
	- produce boolean tcl value from boolan member

2016-07-31 18:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4cb5d4900777)

	* nsd/binder.c, nsd/driver.c, nsd/nswin32.c:
	- use unsigned short for ports

2016-07-31 18:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4575229a7e85)

	* nsdb/dbdrv.c:
	- keep "int" as result of SpExecProc

2016-07-31 18:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba368979771f)

	* nsd/log.c:
	- use boolean constants

2016-07-31 18:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff5312be8bf5)

	* nsd/connchan.c:
	- use boolean constant

2016-07-31 18:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ddfd2c76c94)

	* nsd/adpcmds.c:
	- use bool instead of int

2016-07-31 18:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e4795940c809)

	* nscp/nscp.c:
	- use unsigned short for port

2016-07-31 11:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f851f7f01121)

	* nsd/tcltime.c:
	- remove unneeded return statement

2016-07-31 11:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e14c22d65bb)

	* nsd/tcltime.c:
	- improve source code docuemntation
	- fix potential bug in error conditions

2016-07-31 11:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c466d43066c)

	* include/ns.h, nsd/driver.c, nsd/queue.c, nsd/sockcallback.c,
	nslog/nslog.c:
	- new API call Ns_DStringAppendTime() to ease uniform printing of
	Ns_Time structs into DStrings

2016-07-31 11:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06f03036dd7c)

	* nsd/conn.c:
	- silence static checker

2016-07-29 15:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (249a65d08c19)

	* doc/src/manual/admin-install.man, doc/src/manual/admin-
	maintenance.man, doc/src/manual/tcl-libraries.man,
	doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_requestauthorize.man, include/Makefile.win32,
	nsd-config.tcl, nsd/adprequest.c, nsd/pathname.c, nsdb/dbtcl.c,
	nsproxy/doc/mann/ns_proxy.man, nsproxy/nsproxymod.c, openacs-
	config.tcl, simple-config.tcl, tcl/init.tcl:
	- fix typos
	- use camel case in "NaviServer" consistently

2016-07-29 12:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d3335847781)

	* nsd/conn.c, nsd/connchan.c, nsd/tclimg.c:
	- reduce number of functions with multiple returns

2016-07-29 10:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b8388df1d6c6)

	* nsd/tclcache.c:
	- prefer single returns from functions
	- reduce variable scopes

2016-07-29 09:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (da15d27c6396)

	* nsd/tclimg.c:
	- modernize tcl argument parsing
	- prefer single returns from functions

2016-07-28 12:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f09dbae83b92)

	* Makefile, nsssl/Makefile:
	- follow Tcl conventions: rename optional argument for selective
	testing from TCLTESTARGS to TESTFLAGS

2016-07-28 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5bec13d5e707)

	* tests/testserver/modules/listencallback-procs.tcl:
	- reduce verbosity

2016-07-28 12:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aeabf5a3fcd8)

	* nsd/config.c, nsd/tcltime.c, nsd/tls.c:
	- prefer single return from functions
	- reduce variable scopes

2016-07-28 11:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2797e439bb5)

	* nsd/tcltime.c, nsthread/time.c:
	- modernize tcl argument parsing
	- prefer single returns from functions

2016-07-27 20:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (448bc5e12677)

	* nsd/adprequest.c, nsd/auth.c, nsd/config.c, nsd/encoding.c,
	nsd/fastpath.c:
	- prefer single return from function

2016-07-27 20:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a019559a3ef0)

	* include/ns.h, nsd/adprequest.c, nsd/filter.c, nsd/log.c, nsd/nsd.h,
	nsd/op.c, nsd/tclrequest.c, nsd/tls.c:
	- prefer bool over int

2016-07-27 10:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (77d9cc146624)

	* include/ns.h, nsd/binder.c, nsd/connio.c, nsd/driver.c,
	nsd/listen.c, nsd/sock.c, nsd/sockaddr.c, nsd/sockcallback.c,
	nsd/sockfile.c, nsd/tclhttp.c, nsd/tclmisc.c, nsd/tclresp.c,
	nsd/tclsched.c, nsd/tclxkeylist.c, nsd/urlopen.c, nsd/urlspace.c,
	nsd/uuencode.c, nsdb/dbdrv.c, nsdb/dbtcl.c, nssock/nssock.c,
	nsssl/nsssl.c:
	- use consistently unsigned short for ports
	- don't call ns_sock_set_blocking with a non-socket file descriptor
	under windows
	- prefer bool over int
	- reduce implicit conversions

2016-07-27 10:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d1e748b903f6)

	* openacs-config.tcl:
	- add ns_rlimit call to sample config file

2016-07-24 20:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (60f0316bcf9e)

	* nsd/driver.c:
	- add one more usage of macro INTCHAR

2016-07-24 20:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09a7d674e43a)

	* nsd/connio.c, tests/testserver/modules/testhttp.tcl:
	- fix in request parsing of pre-HTTP/1.0 requests (no request header
	fields, old bug)

2016-07-24 19:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cfe86ff5d903)

	* include/ns.h, include/nsthread.h, nscgi/nscgi.c, nscp/nscp.c,
	nsd/adpeval.c, nsd/adpparse.c, nsd/auth.c, nsd/binder.c,
	nsd/connio.c, nsd/driver.c, nsd/encoding.c, nsd/form.c,
	nsd/httptime.c, nsd/mimetypes.c, nsd/nsmain.c, nsd/pathname.c,
	nsd/request.c, nsd/return.c, nsd/rollfile.c, nsd/tclenv.c,
	nsd/tclhttp.c, nsd/tclmisc.c, nsd/tclxkeylist.c, nsd/url.c,
	nsd/urlopen.c, nsd/urlspace.c, nsdb/dbinit.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c, nsthread/nsthreadtest.c:
	- introduced macro INTCHAR to pass "char" to library functions
	requiring "int" to avoid code smells of expressions assigned to a
	narrower or different essential type, MISRA 2012 Rule 10.3)

2016-07-24 12:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4c413d83e798)

	* nsd/connio.c, nsd/tclset.c, nsdb/dbtcl.c:
	- use Tcl_NewBooleanObj for boolean results.
	- turn more "int" into Ns_ReturnCode

2016-07-24 12:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d1fb6e498f68)

	* nsd/driver.c, nsd/nsd.h:
	- use NsWriterStreamState consistently

2016-07-24 12:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7c07d688cfd)

	* nsdb/dbdrv.c, nsdb/nsdb.h:
	- must keep int instead of Ns_ReturnCode for the time being.

2016-07-23 18:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eea7212ce592)

	* nscgi/nscgi.c, nsd/adprequest.c:
	- reduce implicit conversions
	- prefer single returns from functions
	- silence checker

2016-07-23 17:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb0c888a5a75)

	* nsdb/dbinit.c, nsdb/nsdb.h:
	- turn more "int" into Ns_ReturnCode
	- reduce implicit conversions

2016-07-23 17:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26f123f5780b)

	* include/ns.h, nsd/connio.c, nsd/driver.c, nsd/log.c, nsd/set.c,
	nsd/task.c, nsd/tclcache.c, nsd/url.c, nsdb/dbdrv.c, nsdb/nsdb.h:
	- turn more "int" into Ns_ReturnCode
	- prefer bool over int
	- reduce implicit conversions

2016-07-22 11:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (809c521617a8)

	* nsd/driver.c:
	- fix potential crash while producing error message for certain
	invalid requests

2016-07-22 11:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4553ea78ec37)

	* include/ns.h, nsd/adpparse.c, nsd/conn.c, nsd/connio.c,
	nsd/driver.c, nsd/encoding.c, nsd/log.c, nsd/nsd.h, nsd/range.c,
	nsd/request.c, nsd/return.c, nsd/tclfile.c, nsd/tclresp.c,
	nsd/tclvar.c, nsd/url2file.c, nslog/nslog.c:
	- turn defines into enum NsWriterStreamState
	- prefer bool over int
	- ad nonnull assert

2016-07-20 09:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f7cd4c86618)

	* nsd/driver.c:
	- flag bad request, that looked like end of headers, as bad request

2016-07-19 20:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9796484bfe28)

	* doc/src/naviserver/ns_rlimit.man, nsd/nsd.h, nsd/tclcmds.c:
	- make the ns_crash cmd available

2016-07-19 20:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (964fd84ca7fb)

	* nsd/driver.c:
	- prefer bool over int

2016-07-19 19:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (82cb796f3afa)

	* nsd/tls.c:
	- cast type explicitly

2016-07-19 19:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2557cf45d3c)

	* nsd/tclmisc.c:
	- fix result of "dev" member in ns_filestat command
	- cast numeric members of stat to Tcl_NewWideIInt to avoid surprises
	with platform specific types (like ino_t, dev_t, etc.)

2016-07-18 14:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (34c95d682779)

	* nsd/driver.c, nsd/limits.c, nsd/nswin32.c, nsd/tclcache.c,
	nsd/tcljob.c:
	- fix implicit conversions from 0 to NULL

2016-07-18 12:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25f1ed12d3b1)

	* include/ns.h, nscgi/nscgi.c, nsd/adprequest.c, nsd/connio.c,
	nsd/event.c, nsd/fastpath.c, nsd/nswin32.c, nsd/proc.c,
	nsd/return.c, nsd/sockaddr.c, nsd/task.c, nsd/tclobjv.c,
	nsd/tclrequest.c, nsd/tclresp.c, nsd/url2file.c, nsd/urlencode.c,
	nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/nsdb.h:
	- adding const declarations

2016-07-18 12:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e021225bbbee)

	* nsd/compress.c:
	- reduce implicit conversion
	- ignore results explicitly

2016-07-18 11:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca9c2cd8da11)

	* nsdb/dbtcl.c:
	- follow usual naming conventions
	- adding const declarations

2016-07-18 10:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20afd1e65bd9)

	* nsd/compress.c:
	- remove unneeded define
	- reduce implicit conversions

2016-07-16 17:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (99c472ddde67)

	* include/nsthread.h:
	- add changes for Visual Studio 2015 (as indicated by Maurizio)

2016-07-15 22:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (62a281cfeb54)

	* include/ns.h, nscp/nscp.c, nsd/conn.c, nsd/connio.c, nsd/dns.c,
	nsd/event.c, nsd/fastpath.c, nsd/form.c, nsd/httptime.c,
	nsd/index.c, nsd/info.c, nsd/limits.c, nsd/listen.c, nsd/log.c,
	nsd/modload.c, nsd/nsmain.c, nsd/nswin32.c, nsd/proc.c, nsd/range.c,
	nsd/returnresp.c, nsd/rollfile.c, nsd/server.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/task.c, nsd/tclcallbacks.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclsched.c, nsd/tclset.c, nsd/tcltime.c,
	nsd/tclvar.c, nsd/urlencode.c, nsd/urlopen.c, nsdb/dbdrv.c,
	nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/nsdb.h:
	- adding const declarations

2016-07-14 12:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6986110974c5)

	* include/ns.h, nsd/tclobjv.c:
	- relax nonnull assertions

2016-07-14 12:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2577a1ce96e5)

	* include/ns.h, nsd/cookies.c, nsd/encoding.c, nsd/mimetypes.c,
	nsd/op.c, nsd/proc.c, nsd/progress.c, nsd/queue.c, nsd/sched.c,
	nsd/set.c, nsd/sls.c, nsd/sockaddr.c, nsd/tclhttp.c, nsd/tclmisc.c,
	nsd/tclresp.c, nsd/tclthread.c, nsd/tclxkeylist.c:
	- add const declarations

2016-07-14 11:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a335dab2af85)

	* nsd/tclobjv.c:
	- prefer single returns from functions
	- reduced variable scopes
	- add const declarations

2016-07-13 20:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (659afb579cc4)

	* nsd/config.c, nsd/return.c, nsd/server.c, nsd/tclmisc.c,
	nsd/tclsock.c:
	- add const declarations

2016-07-13 20:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2a7feabd185)

	* nsd/auth.c, nsd/callbacks.c, nsd/cls.c, nsd/connio.c, nsd/filter.c,
	nsd/tclcache.c, nsd/tclinit.c, nsd/tcljob.c, nsd/tclrequest.c,
	nsd/url2file.c:
	- adding const declarations
	- prefer bool over int

2016-07-13 19:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5357d29ce4c4)

	* nsdb/db.h, nsdb/dbdrv.c:
	- use Ns_ReturnCode for functions in db driver where appropriate

2016-07-13 11:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5285e3d2e069)

	* include/ns.h, nscp/nscp.c, nsd/config.c, nsd/driver.c,
	nsdbtest/nsdbtest.c:
	- prefer bool over int

2016-07-13 11:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (005fb42cea36)

	* nsd/connchan.c:
	- reduce implicit conversions

2016-07-12 16:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a9d0b346654e)

	* include/ns.h, nsd/auth.c, nsd/compress.c, nsd/conn.c, nsd/connio.c,
	nsd/exec.c, nsd/fastpath.c, nsd/nsmain.c, nsd/pathname.c,
	nsd/random.c, nsd/return.c, nsd/rollfile.c, nsd/sock.c,
	nsd/sockaddr.c, nsd/tclenv.c, nsd/tclmisc.c, nsd/tclobjv.c,
	nsd/tclrequest.c, nsd/tclsched.c, nsd/tclthread.c, nsd/url2file.c,
	nsd/urlopen.c, nsdb/dbdrv.c, nsdb/dbutil.c:
	Ns_ReturnCode reform (part 5): use Ns_ReturnCode on the following
	functions:

	NsUrlToFileProc Ns_ConnReturnEntityTooLarge
	Ns_ConnReturnUnauthorized Ns_DriverRequestProc Ns_FetchPage
	Ns_ReturnCode Ns_RollFile Ns_SetServerRootProc Ns_TclDetachedThread
	Ns_TclThread Ns_WaitForProcess Ns_WaitForStartup Ns_WaitProcess

2016-07-12 14:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fd8e93ec2f8d)

	* nsdb/dbinit.c:
	- use calloc rather than initializing members with 0/NULL

2016-07-12 14:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d07a1b2798b9)

	* nslog/nslog.c:
	- avoid mismatch between tcl result code and ns result code
	- reformat switch statement

2016-07-12 14:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7f255d6f8272)

	* nsproxy/nsproxylib.c:
	- ignore result explicitly

2016-07-12 13:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d9a96d864d10)

	* nsd/str.c:
	- prefer boolean over int

2016-07-12 12:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12e98f63638d)

	* nsd/log.c:
	- prefer Ns_ReturnCode over int
	- reduce variable scope

2016-07-12 12:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (31811a97fb0d)

	* nsd/event.c:
	- align result-codes of Ns_EventEnqueue() and Ns_RunEventQueue();
	return bool in both cases

2016-07-12 12:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4be63fd6f916)

	* doc/src/naviserver/ns_writer.man, nsd/driver.c:
	- clean up NS_OK vs. TCL_OK
	- align results of "ns_writer submit" with "ns_writer submitfile",
	document meaning of result

2016-07-12 11:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c52d515bf338)

	* nsd/compress.c:
	- fix typo in code-section when no zlib is available

2016-07-11 21:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d21ebb3c645)

	* include/ns.h, nsd/config.c, nsd/conn.c, nsd/connchan.c,
	nsd/filter.c, nsd/form.c, nsd/queue.c:
	- prefer Ns_ReturnCode over int
	- don't compare beeloean values with ==

2016-07-11 17:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (597eeee2ccce)

	* nsd/tclthread.c:
	- fix potential memory leak for "ns_mutex eval"
	- proivde parens for expressions

2016-07-11 17:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (111d78968bc0)

	* openacs-config.tcl:
	- provide alternate candidates for addresses

2016-07-11 13:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d576597df112)

	* nsd/tclthread.c:
	- name mutex in syncobjs
	- reduce variable scope

2016-07-09 20:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7bc63a275965)

	* nsd/connchan.c:
	- improve cleanness of compilation with Tcl 8.6

2016-07-09 19:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e5cecc6d175)

	* nsd/binder.c, nsd/cache.c, nsd/driver.c, nsd/init.c, nsd/nsconf.c,
	nsd/nsmain.c, nsd/random.c, nsd/server.c, nsd/tclenv.c,
	nsd/tclvar.c, nsdb/dbinit.c, nsproxy/nsproxylib.c,
	nsthread/cslock.c, nsthread/mutex.c:
	- provide explicit names for more mutexes
	- initialize static variables
	- prefer bool over int

2016-07-08 13:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a80a98ae1e4)

	* nsd/tclinit.c:
	- provide a name for mutex 12

2016-07-08 13:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5c332046daf)

	* nsdb/db.h, nsdb/dbdrv.c, nsdb/nsdb.h:
	- use Ns_ReturnCode instead of int when appropriate
	- add nonnull assertions
	- fix indentation

2016-07-08 13:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90d671f7aa2f)

	* include/Makefile.global.in:
	- move load specs of OpenSSL libraries to the end of the link path
	to minimize interference with other load paths

2016-07-04 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d52d69b1c738)

	* nsd/modload.c:
	- reduce variable scopes

2016-07-04 10:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc008e6e0732)

	* doc/src/naviserver/commandlist.man:
	- add missing commands

2016-07-04 10:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (597f23161d63)

	* doc/src/naviserver/commandlist.man:
	- make list of commands more canonical

2016-06-30 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (19f18526f3b2)

	* include/ns.h, nsd/auth.c, nsd/driver.c, nsd/sched.c, nsd/str.c,
	nsd/task.c, nsd/tclhttp.c, nsd/tclmisc.c, nsd/tls.c, nsd/url.c:
	- factored out function Ns_GetBinaryString() to obtain from a
	Tcl_Obj the binary representation if available, otherwise the string
	representation
	- Ns_ReturnCode reform (part 4): use Ns_ReturnCode on the following
	functions: Ns_AbsoluteUrl Ns_ParseUrl Ns_TaskCancel Ns_TaskEnqueue
	Ns_TaskWait

2016-06-29 11:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b7ee06d032f3)

	* include/ns.h, nscp/nscp.c, nsd/conn.c, nsd/connchan.c,
	nsd/fastpath.c, nsd/listen.c, nsd/log.c, nsd/modload.c, nsd/nsd.h,
	nsd/nsmain.c, nsd/nswin32.c, nsd/pathname.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/tclinit.c, nsd/tclrequest.c, nsd/tclsock.c,
	nsd/tls.c, nsd/unix.c, nsd/url2file.c, nssock/nssock.c,
	nsssl/nsssl.c:
	Ns_ReturnCode reform (part 3): use Ns_ReturnCode on the following
	functions:

	NsConnectService NsInstallService NsMemMap NsMountUrl2FileProc
	NsRemoveService NsShortcutFilterProc NsTclFilterProc
	NsTclUrl2FileProc Ns_FastUrl2FileProc Ns_FilterProc Ns_GetSockAddr
	Ns_LogFilter Ns_ModuleLoad Ns_SetConnLocationProc Ns_SockCallback
	Ns_SockCallbackEx Ns_SockCancelCallbackEx Ns_SockCloseLater
	Ns_SockListenCallback Ns_SockPipe Ns_SockSetBlocking
	Ns_SockSetNonBlocking Ns_SockTimedWait Ns_SockWait Ns_TclEval
	Ns_TclRequest Ns_Url2FileProc Ns_UrlToFileProc

2016-06-28 11:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b0ad5d8f620e)

	* include/ns.h, nscgi/nscgi.c, nscp/nscp.c, nsd/adpeval.c, nsd/auth.c,
	nsd/compress.c, nsd/connio.c, nsd/driver.c, nsd/encoding.c,
	nsd/fastpath.c, nsd/filter.c, nsd/main.c, nsd/modload.c, nsd/nsd.h,
	nsd/op.c, nsd/pathname.c, nsd/queue.c, nsd/request.c,
	nsd/returnresp.c, nsd/str.c, nsd/tclhttp.c, nsd/tclinit.c,
	nsd/tclobjv.c, nsd/tclresp.c, nsd/tclset.c, nsd/tclvar.c,
	nsd/url2file.c, nsd/urlopen.c, nsdb/nsdb.c, nslog/nslog.c,
	nsperm/nsperm.c, nsproxy/nsproxymod.c, nssock/nssock.c,
	nsssl/nsssl.c, tests/ns_sha1.test:
	Ns_ReturnCode reform (part 2): use Ns_ReturnCode on the following
	functions:

	NsAsyncWrite NsWriterQueue Ns_AuthorizeRequest Ns_CompressBufsGzip
	Ns_CompressGzip Ns_CompressInit Ns_ConnClose Ns_ConnCopyToChannel
	Ns_ConnCopyToDString Ns_ConnCopyToFd Ns_ConnCopyToFile
	Ns_ConnFlushContent Ns_ConnReadHeaders Ns_ConnReadLine
	Ns_ConnSendFileVec Ns_ConnWriteChars Ns_ConnWriteVChars
	Ns_DriverInit Ns_FetchPage Ns_FetchURL Ns_InflateBufferInit
	Ns_InflateEnd Ns_InflateInit Ns_ModuleInit Ns_ModuleInitProc
	Ns_ParseHeader Ns_ParseObjv Ns_ParseRequest Ns_RequestAuthorizeProc
	Ns_ServerInitProc Ns_StrToInt Ns_StrToWideInt Ns_TclInitInterps
	Ns_TclInitModule Ns_TclRegisterAtCleanup Ns_TclRegisterAtCreate
	Ns_TclRegisterAtDelete Ns_TclRegisterTrace Ns_WriteCharConn

2016-06-28 11:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (623c41457f25)

	* doc/src/naviserver/ns_writer.man:
	- document return values of "ns_writer submitfile"

2016-06-27 14:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09ea1f75297b)

	* configure.ac:
	- bump version number to 4.99.12d5

2016-06-27 14:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2567af081780)

	* include/ns.h, include/nsthread.h, nscgi/nscgi.c, nsd/adprequest.c,
	nsd/cache.c, nsd/callbacks.c, nsd/conn.c, nsd/connio.c,
	nsd/driver.c, nsd/exec.c, nsd/fastpath.c, nsd/fd.c, nsd/filter.c,
	nsd/log.c, nsd/nsd.h, nsd/op.c, nsd/queue.c, nsd/return.c,
	nsd/returnresp.c, nsd/rollfile.c, nsd/sched.c, nsd/sockcallback.c,
	nsd/task.c, nsd/tclfile.c, nsd/tcljob.c, nsd/tclrequest.c,
	nsd/tclresp.c, nsd/tclthread.c, nsd/tclvar.c, nsd/url2file.c,
	nsdb/dbinit.c, nslog/nslog.c, nsproxy/nsproxylib.c,
	nsthread/nsthreadtest.c, nsthread/pthread.c, nsthread/winthread.c:
	Ns_ReturnCode reform: since the code basis containg at least two
	cases, where Tcl and NaviServer return codes were confused (e.g.
	comparing a result with TCL_OK, which is a naviserver return code,
	returning NS_OK, NS_ERROR, ...) i've defined an enum type for
	NaviServer return codes to make the distinction clearer and to allow
	code smell checker to locate suspicious places. The changed version
	is binary compatible on every sane platform with the purely "int"
	based interfaces.

	The following functions return now Ns_ReturnCode: NsAdpPageProc
	NsConnRunProxyRequest NsRunFilters NsTclRequestProc NsUrlToFile
	Ns_AdpRequest Ns_AdpRequestEx Ns_CacheTimedWait Ns_CacheWait
	Ns_CloseOnExec Ns_CondTimedWait Ns_ConnPuts Ns_ConnRedirect
	Ns_ConnResetReturn Ns_ConnReturnBadRequest Ns_ConnReturnCharData
	Ns_ConnReturnData Ns_ConnReturnFile Ns_ConnReturnForbidden
	Ns_ConnReturnHeaderLineTooLong Ns_ConnReturnHtml
	Ns_ConnReturnInternalError Ns_ConnReturnInvalidMethod
	Ns_ConnReturnMoved Ns_ConnReturnNoResponse Ns_ConnReturnNotFound
	Ns_ConnReturnNotImplemented Ns_ConnReturnNotModified
	Ns_ConnReturnNotice Ns_ConnReturnOk Ns_ConnReturnOpenChannel
	Ns_ConnReturnOpenFd Ns_ConnReturnOpenFile Ns_ConnReturnRedirect
	Ns_ConnReturnRequestURITooLong Ns_ConnReturnStatus
	Ns_ConnReturnUnavailable Ns_ConnRunRequest Ns_ConnSendChannel
	Ns_ConnSendDString Ns_ConnSendFd Ns_ConnSendFp Ns_ConnWriteData
	Ns_ConnWriteVData Ns_DbCancel Ns_DbDML Ns_DbExec Ns_DbFlush
	Ns_DbGetRow Ns_DbGetRowCount Ns_DbResetHandle Ns_DbSpExec
	Ns_DbSpReturnCode Ns_DbSpSetParam Ns_DbSpStart Ns_FastPathProc
	Ns_LogRoll Ns_NoCloseOnExec Ns_PurgeFiles Ns_RollFileByDate
	Ns_UrlToFile Ns_VarAppend Ns_VarGet Ns_VarSet Ns_VarUnset
	Ns_WriteConn

	Ns_OpProc

2016-06-27 11:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2a68fcf1d23)

	* nsd/tclresp.c, nsd/tclset.c, nsd/tclvar.c, nsd/urlspace.c:
	- prefer Ns_ParseObjv() interface for consistency
	- prefer single return statements from functions

2016-06-27 09:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ef89c482962)

	* nsd/connchan.c:
	- generalize print format

2016-06-25 14:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c4d361c3bbfd)

	* nsd/queue.c:
	- remove unneeded assertion

2016-06-25 14:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86bb3d18990e)

	* nssock/nssock.h: deleted file.
	* nssock/Makefile, nssock/nssock.c, nssock/nssock.h:
	- don't build shared library libnssock.dylib (or .so) for sharing
	driver functions (rather copy functions if necessary)

2016-06-25 00:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55a428a244c5)

	* nsd/queue.c:
	- mark argument as unused

2016-06-25 00:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7952f6b8ee7c)

	* nscgi/nscgi.c, nsd/adpcmds.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	- make result of NsQueueConn() boolean
	- prefer single return statement

2016-06-25 00:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (78cb3c30fdaf)

	* nsd/sockaddr.c:
	- reduce implicit conversions

2016-06-24 10:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c75959d0c165)

	* include/nsthread.h, nsd/sockaddr.c, nsthread/reentrant.c:
	- move definition of s6_addr16 and s6_addr32 to nsthread.h to reduce
	redundancy

2016-06-24 10:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b006bde9dc2)

	* nsd/tclobj.c:
	- let NsTclObjIsByteArray() be true whenever we have a tcl obj of
	type byteArrayTypePtr

2016-06-24 08:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c5d117b88465)

	* nsd/sockaddr.c:
	- try to improve portability for *BSD systems

2016-06-23 08:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb14b4b010d8)

	* nsd/tclfile.c:
	- add const declaration

2016-06-23 08:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc646bd4261a)

	* doc/src/naviserver/ns_rlimit.man:
	- fix typo

2016-06-23 08:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (624b2df9ac75)

	* nsssl/Makefile:
	- use the Makefiles from the build tree rather than these of the
	installed code

2016-06-20 20:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6bb33fb92a05)

	* doc/src/naviserver/ns_rlimit.man: new file.
	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_rlimit.man, nsd/nsd.h, nsd/tclcmds.c,
	nsd/tclmisc.c:
	- new command "ns_rlimt" to get/set various resource limits from the
	operating systems. A typical use case for this command is to query
	or set e.g. the core size via the NaviServer startup file or to
	change it at runtime in a syntax independent from the naming and
	conventions in the various startup scripts (e.g. upstart, systemd,
	...).

2016-06-17 20:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c71f2014c713)

	* tcl/sendmail.tcl:
	- don't fail hard, when smtpusestarttls is not set

2016-06-17 11:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c9f1106d65b3)

	* include/ns.h, nsd/connio.c, nsd/driver.c, nsd/nswin32.c,
	nsd/sockfile.c, nsd/tclsock.c, nsdb/dbtcl.c:
	- reduce implicit conversions
	- added const declarations

2016-06-17 10:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bdc1612b9502)

	* nsdb/dbinit.c, nsdb/nsdb.h:
	- adding const declaration

2016-06-17 10:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a954d477c21)

	* nsd/queue.c:
	- remove always true expression

2016-06-17 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2efdd31f85db)

	* nsd/tls.c:
	- reduce implicit conversions

2016-06-17 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a943ddeb991)

	* nsd/adprequest.c:
	- adding const declaration

2016-06-17 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bbcfb6967e14)

	* nsd/driver.c:
	- reduce verbosity

2016-06-15 22:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (682464c4ea4e)

	* nsd/tclhttp.c:
	- use ns_poll everywhere instead of poll()

2016-06-15 12:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (24d9fa6b1911)

	* nsd/tclhttp.c:
	- make assertion test boolean

2016-06-15 12:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b402280b7232)

	* nsd/cookies.c, tests/cookies.test:
	Fix for a serious bug in cookie management which could lead to false
	positives in ns_getcookie:

	- Previous versions of NaviServer searched the Cookie and Set-Cookie
	header files for "NAME=" and returned the value provided after this
	string, when found.

	- However, the Cookie and Set-Cookie header fields have different a
	different syntax (see https://tools.ietf.org/html/rfc6265 section
	4.1.1 vs. 4.2.1), such as e.g. Cookie: cookie1="value1";
	cookie2="value2"; style=null; ... Set-Cookie: cookie1="new- value";
	Expires=Fri, 01-Jan-2035 01:00:00 GMT; Path=/; HttpOnly

	- Therefore, searching in Cookie e.g. for a cookie named "tyle" lead
	to a success as well as a search in Set-Cookies for e.g. a cookie
	named "Expires".

	The fixed version uses now two different parsers for these purposes,
	the regression test was extended.

2016-06-14 07:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (24141f560e5b)

	* include/ns.h, nsd/connchan.c, nsd/driver.c:
	- prefer ssize_t over int as result of read operations
	- use boolean values in expressions
	- reduce implicit conversions
	- use NULL for null-pointer assignments

2016-06-14 04:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (adb1106d4814)

	* nsd/tls.c:
	- make sure that we clear the returned SSL_clx and free it, when
	Ns_TLS_CtxClientCreate() or Ns_TLS_CtxServerCreate() fails.
	- use for(;;) as idiom for endless loops
	- use UNUSED on more occasions

2016-06-14 03:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cddd7ef67d28)

	* tcl/sendmail.tcl:
	- add comment
	- minor Tcl cleanup

2016-06-13 21:18 +0200  Constantin Șerban-Rădoi  <costashsrc@gmail.com>  (ada06847deb2)

	* include/ns.h, nsd/tls.c:
	Add Ns_TLS_CtxServerCreate and Ns_TLS_SSLAccept functions into tls.

2016-06-13 20:52 +0200  Constantin Șerban-Rădoi  <costashsrc@gmail.com>  (b7efdf5d5608)

	* Merge upstream changes.

2016-06-12 20:44 +0200  Constantin Șerban-Rădoi  <costashsrc@gmail.com>  (3cdcf25c2d90)

	* Merge upstream changes.

2016-06-12 20:40 +0200  Constantin Șerban-Rădoi  <costashsrc@gmail.com>  (60262a0eac0f)

	* tcl/sendmail.tcl:
	Implement STARTTLS functionality for ns_sendmail command.

2016-06-13 13:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02263b6d9443)

	* nsdb/dbinit.c:
	- remove duplicated if-clause

2016-06-11 19:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db8d2b46c90f)

	* nsd/config.c, nsd/conn.c, nsd/driver.c, nsd/info.c, nsd/nsconf.c,
	nsd/nsmain.c, nsd/nswin32.c, nsd/task.c, nsd/tclcache.c,
	nsd/tclresp.c, nsd/tclsock.c, nsdb/dbinit.c:
	- further bool cleanup

2016-06-11 19:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (80d9882665b5)

	* nscgi/nscgi.c:
	- add missing space

2016-06-11 19:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0f0a5e3866a)

	* nsd/adpparse.c, nsd/adprequest.c:
	- add const declarations

2016-06-11 19:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5124732b7ce8)

	* nsd/adpeval.c:
	- use bool without extra operator

2016-06-11 11:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (13335941468f)

	* nsd/compress.c, nsd/config.c, nsd/connchan.c, nsd/dns.c,
	nsd/driver.c, nsd/fastpath.c, nsd/form.c, nsd/index.c, nsd/info.c,
	nsd/log.c, nsd/nswin32.c, nsd/pathname.c, nsd/queue.c, nsd/sched.c,
	nsd/server.c, nsd/sock.c, nsd/sockcallback.c, nsd/sockfile.c,
	nsd/task.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclmisc.c,
	nsd/tclresp.c, nsd/tclsock.c, nsd/tclthread.c, nsd/tclvar.c,
	nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c, nsperm/nsperm.c,
	nssock/nssock.c, nsssl/nsssl.c:
	- don't pass Boolean argument to equal or not equal operators

2016-06-10 12:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b115c64603c)

	* nsssl/nsssl.c:
	- improve error message

2016-06-09 22:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bfec7c56c471)

	* include/ns.h, nsd/driver.c, nsd/queue.c, nsd/set.c:
	- Fix ns_set management of headers (which was broken since the
	introduction of the leftover management when requests are
	pipelined). The problem was that the "static" ns_set for headers is
	needed in the driver (sockPtr->reqPtr->headers), since the driver
	adds header field to it) and of the connection connPtr->headers.
	Since the reqPtr in the driver releases the request quite early, the
	request headers might be freed before these were used in the
	connection run. The changed implementation makes a copy of the
	sockPtr->reqPtr->headers for the connection, which can manage it now
	freely.
	- New function Ns_SetRecreate() which is a combintion of a create and
	a move operation, but avoiding malloc operations on all keys/values.

2016-06-08 12:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (60be612ca370)

	* nsd/tclhttp.c, nsd/urlspace.c:
	- don't pass boolean to equal operator

2016-06-08 12:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8e1202f4be72)

	* nsd/event.c, nsd/info.c, nsd/tclmisc.c, nsd/uuencode.c:
	- reduce implicit conversions

2016-06-08 12:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf12b46da83e)

	* nsd/nsd.h:
	- use bool instead of int

2016-06-08 12:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f05d1cabd6c)

	* nsdb/dbinit.c:
	- adding const declaration

2016-06-08 12:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bcaaca20cf79)

	* nsd/config.c:
	- don't pass boolean argument to equal

2016-06-08 12:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5e3aa046564)

	* include/ns.h, nsd/adpcmds.c, nsd/cache.c, nsd/conn.c,
	nsd/pathname.c:
	- add const declarations

2016-06-08 12:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (750e4c56780c)

	* nsd/tclset.c:
	- pass boolean values

2016-06-08 12:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1bc71edafebd)

	* nsdb/dbinit.c:
	- shorten error handling cascade after Tcl_ListObjAppendElement()

2016-06-08 11:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c00a229ab72)

	* nsd/mimetypes.c:
	- define storage class before type

2016-06-08 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9278201e22fc)

	* nsd/request.c:
	- move sanity check into debug mode

2016-06-08 11:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c9eb98552d2)

	* nsd/op.c:
	- use boolean comparisons

2016-06-08 11:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba7bc6fa84f9)

	* nsd/return.c:
	- add reply headers to debug(request) output ... especially useful
	when debugging (false) result of vulnerability scanners

2016-06-08 11:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17dce8ff8059)

	* doc/src/naviserver/ns_return.man:
	- fix typo (many thanks to Cesáreo García Rodicio for reporting)

2016-06-08 11:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7db7343b7a8)

	* tcl/fastpath.tcl:
	- fix typo (many thanks to Cesáreo García Rodicio for reporting)

2016-06-06 12:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92c2d93bcace)

	* nsd/config.c:
	- fix stupid bug introduced in previous change 2276638

2016-06-06 10:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15980b979719)

	* include/ns.h, nscgi/nscgi.c, nscp/nscp.c, nsd/connio.c,
	nsd/cookies.c, nsd/crypt.c, nsd/driver.c, nsd/event.c, nsd/form.c,
	nsd/httptime.c, nsd/info.c, nsd/nsmain.c, nsd/nswin32.c, nsd/op.c,
	nsd/pathname.c, nsd/queue.c, nsd/returnresp.c, nsd/sls.c,
	nsd/sock.c, nsd/sockcallback.c, nsd/str.c, nsd/task.c,
	nsd/tclcache.c, nsd/tclfile.c, nsd/tclimg.c, nsd/tclmisc.c,
	nsd/tclobjv.c, nsd/tclset.c, nsd/tclsock.c, nsd/tclvar.c,
	nsd/urlspace.c, nsd/uuencode.c:
	- use "bool" as result of Ns_HomePathExists(),
	Ns_InfoShutdownPending(), Ns_InfoStarted(), Ns_InfoServersStarted(),
	Ns_EqualProc, Ns_EqualProc
	- use "for (;;)" as idiom for inifine loops
	- make conditionals boolean expressions

2016-06-06 09:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (22766388df5a)

	* include/ns.h, nsd/config.c:
	- use type "bool" (rather than "int") in Ns_ConfigBool(),
	Ns_ConfigFlag(), and Ns_ConfigGetBool()

2016-06-06 03:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7373f7aecab0)

	* include/ns.h, nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/connchan.c, nsd/crypt.c, nsd/driver.c, nsd/exec.c, nsd/limits.c,
	nsd/log.c, nsd/mimetypes.c, nsd/nsmain.c, nsd/tclcache.c,
	nsd/tclmisc.c, nsd/tclthread.c, nsd/tclvar.c, nsdb/dbtcl.c,
	nsdbtest/nsdbtest.c:
	- adding const declarations

2016-06-06 02:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (84cf9b85c182)

	* nscgi/nscgi.c, nsd/adpcmds.c, nsd/binder.c, nsd/conn.c,
	nsd/driver.c:
	- reduce boolean arguments to equal comparison

2016-06-06 01:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (217c5b132709)

	* nsd/conn.c, nsd/driver.c, nsd/tclconf.c, nsdb/dbinit.c:
	- reduce variable scope
	- make loop construct more clear
	- add const declaration
	- reduce implicit type conversions

2016-06-05 20:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (187f0e9e70a1)

	* nsd/tclconf.c:
	- fix freshly introduced bug leading to TCL_ERROR in success case

2016-06-05 17:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e615c566043)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/config.c, nsd/conn.c, nsd/dns.c,
	nsd/listen.c, nsd/nsmain.c, nsd/sockaddr.c, nsd/tclcache.c,
	nsd/tcljob.c, nsd/tclset.c, nsd/tcltime.c, nsd/urlencode.c,
	nsdbtest/nsdbtest.c:
	- ignoring results explicitly
	- adding editor hints

2016-06-05 01:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bf07019e5f9d)

	* nsd/adpcmds.c, nsd/connchan.c, nsd/form.c, nsd/tclcache.c,
	nsd/tclenv.c, nsd/tclvar.c, nsdb/dbinit.c:
	- handle result of Tcl_ListObjAppendElement() in most cases
	explicitly

2016-06-05 00:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15bdca9cefec)

	* nsdb/dbtcl.c, nsproxy/nsproxylib.c:
	- ignore results explicitly

2016-06-05 00:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (869133224291)

	* nsd/adpeval.c, nsd/driver.c, nsd/log.c, nsd/return.c:
	- ignore results explicitly

2016-06-05 00:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1df15f45691)

	* nsd/sock.c, nsd/tclhttp.c, nsd/tls.c:
	- ignore result of Ns_SockTimedWait() explicitly

2016-06-05 00:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1b5ff1e2e681)

	* nsd/tclmisc.c:
	- ignore result of Tcl_SetVar2Ex() explizitly

2016-06-05 00:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c146bab7616)

	* nsd/conn.c, nsd/form.c, nsd/tclconf.c, nsd/tclhttp.c, nsd/tclset.c,
	nsd/urlopen.c, nsdb/dbtcl.c, nsproxy/nsproxylib.c:
	- don't ignore result of Ns_TclEnterSet()

2016-06-03 18:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d136ed3bf18)

	* nsd/driver.c, nsd/range.c:
	- make use of the 2nd argument of strtoll()

2016-06-03 10:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c2e16bc041a)

	* include/nsthread.h, nsd/range.c:
	- replace deprecated atoll by strtoll

2016-06-03 10:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9768f1c05037)

	* nsd/tclcache.c:
	- silence static checker

2016-06-03 10:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df392d7d3f7d)

	* doc/src/naviserver/ns_addrbyhost.man,
	doc/src/naviserver/ns_hostbyaddr.man, nscgi/nscgi.c, nscp/nscp.c,
	nsd/adpcmds.c, nsd/adpeval.c, nsd/cache.c, nsd/conn.c,
	nsd/connchan.c, nsd/driver.c, nsd/pathname.c, nsd/tclvar.c,
	nsd/urlspace.c:
	- adding "const" declarations

2016-06-02 13:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b83b3c8bc3b4)

	* nsd/fastpath.c:
	- don't complain in errorlog when stat() is called on a file in a
	non-existing directory

2016-05-31 10:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d9c061d6e075)

	* nsd/dns.c:
	- simplify code

2016-05-31 10:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0e598d0f7aab)

	* nsd/request.c:
	- protect against response splitting attack

2016-05-31 10:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a742caf8419)

	* nssock/nssock.c:
	- bump version number of nssock

2016-05-23 09:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a5d22d725634)

	* nsd/sha2.c, nsd/sha2.h: deleted file.
	* nsd/Makefile, nsd/nsd.h, nsd/sha2.c, nsd/sha2.h, nsd/tclcmds.c,
	nsd/tclmisc.c, tcl/compat.tcl, tests/ns_sha1.test:
	- remove ns_sha2 command in favor of more general crypto::md
	functions from OpenSSL

2016-05-22 09:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b59583f9e684)

	* nsd/tls.c:
	minor code cleanup
	- reduce implicit conversions
	- add parens
	- remove ignored comma

2016-05-20 21:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (947978d7a934)

	* openacs-config.tcl:
	- fix typo in sample config file

2016-05-20 21:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3941c7f77d7b)

	* configure.ac:
	- bump version number to 4.99.12d4

2016-05-20 19:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f5deed0b313)

	* openacs-config.tcl:
	- fix as well the commented out line for nsssl

2016-05-20 18:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ae3ee02fcf0)

	* openacs-config.tcl:
	- generalize and fix sample config file

2016-05-20 18:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f96258b9a7be)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tls.c, tcl/crypto.tcl:
	- added same interface to crypt::hmac / ns_hmac as for crypt::md /
	ns_hmac. One can use now HMACs as well incrementally and on large
	files without bloat.
	- refactor crypto code a little to avoid more redundancy

2016-05-20 09:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f037616522b1)

	* tcl/crypto.tcl: new file.
	* tcl/crypto.tcl:
	- add missing file

2016-05-20 09:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (965cbabb86b2)

	* include/ns.h, nsd/nsd.h, nsd/tclcmds.c, nsd/tclmisc.c, nsd/tls.c:
	- added crypt::md from OpenSSL (support a wide range of message
	digest algorithms), supports as well incremental commands
	- let Ns_HexString() return the character string (a pattern, used by
	many other character string commands as well)

2016-05-19 12:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0a39a699333)

	* doc/src/naviserver/ns_hmac.man: new file.
	* doc/src/naviserver/ns_hmac_sha2.man: deleted file.
	* doc/src/naviserver/commandlist.man, doc/src/naviserver/ns_hmac.man,
	doc/src/naviserver/ns_hmac_sha2.man, doc/src/naviserver/ns_md5.man,
	doc/src/naviserver/ns_sha1.man, doc/src/naviserver/ns_sha2.man,
	nsd/tls.c:
	- factoring out GetString()
	- update documentation (replace ns_hmac_sha2 by ns_hmac.man, add
	hs_hmac to function list)

2016-05-18 13:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12bcd00357e4)

	* nsd/hmac_sha2.c, nsd/hmac_sha2.h: deleted file.
	* nsd/Makefile, nsd/hmac_sha2.c, nsd/hmac_sha2.h, nsd/nsd.h,
	nsd/tclcmds.c, nsd/tclmisc.c, tcl/compat.tcl, tests/ns_sha1.test:
	- replace the HMAC computations based on sha2 by the more generic
	version from OpenSSL
	- provide backwards compatibility
	- adapt regression test

2016-05-18 12:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b24e7dc1de3)

	* nsd/tls.c:
	- add version dependencies for OpenSSL 1.0.0 and 1.1.0
	- return names of available MD algorithms in case of error (when
	supported by OpenSSL)

2016-05-17 23:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4cd2d2fc4d5f)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tls.c:
	- add new ns_hmac implementation based on OpenSSL

2016-05-17 10:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d6b81279a5a)

	* nsd/form.c:
	- improve comments

2016-05-15 19:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d0b6c536d185)

	* nsd/driver.c, nsd/pathname.c, nsd/sockaddr.c, nsd/tclhttp.c,
	nsd/tls.c:
	- minor code cleanup

2016-05-15 14:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a28407d6f316)

	* nsd/tls.c:
	- fix indentation

2016-05-13 14:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f33955b9fda7)

	* nsssl/nsssl.c:
	- nsssl.c: export Ns_ModuleVersion also when compiled without
	OpenSSL support

2016-05-13 10:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (362e270a3f20)

	* include/Makefile.global.in, include/ns.h, nsd/connchan.c,
	nsd/tclhttp.c, nsd/tls.c, nsssl/nsssl.c:
	- add compilation support for --without-openssl

2016-05-12 14:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5cc244665570)

	* configure.ac:
	- bump version number to 4.99.12d3

2016-05-12 14:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d22df0dcb3e7)

	* nsssl/doc/mann/nsssl.man: new file.
	* nssock/doc/mann/nssock.man, nsssl/doc/mann/nsssl.man:
	- add man page for nsssl

2016-05-12 14:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c3586a7b85d)

	* Makefile:
	- add nsssl to the list of subdirs

2016-05-12 12:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbfb889adb1b)

	* .hgtags:
	- merged nsssl into naviserver repository

2016-05-12 12:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (66b356c0c5d1)

	* nsssl/ChangeLog, nsssl/LICENSE, nsssl/Makefile,
	nsssl/Makefile.win32, nsssl/README.md, nsssl/dhparams.h,
	nsssl/nsssl.c, nsssl/tests/all.tcl, nsssl/tests/config.tcl,
	nsssl/tests/etc/openssl.cnf, nsssl/tests/modules/testhttps.tcl,
	nsssl/tests/nsssl.test, nsssl/tests/pages/123: new file.
	* ChangeLog, LICENSE, Makefile, Makefile.win32, README.md, dhparams.h,
	nsssl.c, tests/all.tcl, tests/config.tcl, tests/etc/openssl.cnf,
	tests/modules/testhttps.tcl, tests/nsssl.test, tests/pages/123:
	deleted file.
	* ChangeLog, LICENSE, Makefile, Makefile.win32, README.md, dhparams.h,
	nsssl.c, nsssl/ChangeLog, nsssl/LICENSE, nsssl/Makefile,
	nsssl/Makefile.win32, nsssl/README.md, nsssl/dhparams.h,
	nsssl/nsssl.c, nsssl/tests/all.tcl, nsssl/tests/config.tcl,
	nsssl/tests/etc/openssl.cnf, nsssl/tests/modules/testhttps.tcl,
	nsssl/tests/nsssl.test, nsssl/tests/pages/123, tests/all.tcl,
	tests/config.tcl, tests/etc/openssl.cnf,
	tests/modules/testhttps.tcl, tests/nsssl.test, tests/pages/123:
	moved nsssl content to nsssl directory (part of merge)

2016-05-11 14:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e7fc21f9d72)

	* Makefile, README.md, nsssl.c, tests/modules/testhttps.tcl,
	tests/nsssl.test:
	Cleanup:
	- remove Ns_TaskProc HttpsProc (since included already in ns_http)
	- make use of ns_http instead of ns_ssl in regression tests
	- update README

2016-05-10 13:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (009995044047)

	* nsssl.c:
	- adapted to OpenSSL reform

2016-05-09 15:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69990004b9ed)

	* Makefile, README.md, nsssl.c:
	- adapted to OpenSSL reform (NaviServer 4.99.12d2)
	- bumped version number to 2.0

2016-05-07 12:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec52ad1a22a9)

	* README.md, nsssl.c:
	- Provide information for driver version 4 (clientInitProc, protocol
	and default port)
	- refactor code to be useful for Https task and client driver sockets

2016-04-24 11:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (62b261a55c20)

	* nsssl.c:
	- use constant CHUNK_SIZE instead of hard-wired number and explain
	background

2016-04-22 23:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a10db25f6a7)

	* nsssl.c:
	- terminate argument list of Tcl_AppendResult properly with NULL

2016-04-22 23:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68fd77f18a31)

	* tests/pages/123: new file.
	* README.md, nsssl.c, tests/nsssl.test, tests/pages/123:
	- updated documentation
	- improved error message
	- extended regression test

2016-04-22 22:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40b046bd24dc)

	* nsssl.c:
	- add parameter -body_file to ns_nsssl to specify a file for
	transmission (doc updates are still missing)
	- add nonnull annotations

2016-04-13 00:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (251d514aef3d)

	* nsssl.c:
	- use type Ns_TclTraceProc for functions registered voa
	Ns_TclRegisterTrace()

2016-04-13 00:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7af0d5110155)

	* README.md, nsssl.c:
	- use typedef Ns_ModuleInitProc for Ns_ModuleInit()
	- bump version number to 1.0

2016-02-26 14:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c814dc1c59f)

	* nsssl.c:
	- improve code safety

2016-02-25 17:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f04cbb2e99c)

	* nsssl.c:
	- fix typo (just visible, when compiled with assertion on)

2016-02-24 14:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (049a59e32386)

	* nsssl.c, tests/config.tcl, tests/nsssl.test:
	- make changes for IPv6 (and testing with IPv4)
	- bump version number

2016-02-24 10:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8650bbea5452)

	* tests/modules/testhttps.tcl:
	- add support for "-binary" flag in test http client

2016-02-01 18:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a21dd115cb53)

	* nsssl.c:
	- add check whether obtaining DH parameters from pem file fails

2016-02-01 18:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17bd074b55c8)

	* Makefile:
	- remove cppcheck target, since it is already "inherited" from
	Makefile.modules

2016-01-10 20:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e189acfcc67c)

	* README.md:
	- merged heads

2016-01-10 20:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c323b1a1fb56)

	* ChangeLog:
	- updated ChangeLog

2016-01-10 20:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b33483c669c)

	* README.md:
	- added optionional SSLINCLUDE to Makefile to point to openssl
	include files

2016-01-10 20:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c2d306ba9a1)

	* nsssl.c:
	- don't use NULL in sentinel

2016-01-10 20:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f53f33c4944d)

	* Makefile:
	- include target cppcheck

2015-09-18 19:29 +0000  gustafn  <neumann@wu-wien.ac.at>  (548199dab4ee)

	* README.md:
	README.md edited online with Bitbucket

2015-09-13 19:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02e6e4391345)

	* nsssl.c, tests/config.tcl, tests/nsssl.test:
	- include content-encoding, when determining binary content in http
	client requests
	- update to same level as in naviserver http client requests
	- add regression tests

2015-07-29 14:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (84e95c376909)

	* nsssl.c:
	- handle binary data when "-body" is specified in nsssl command

2015-07-09 17:25 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6dc749c9caf5)

	* nsssl.c:
	- use always macro INT2PTR to convert integer to pointer

2015-07-01 11:36 +0100  David Osborne  <david@qcode.co.uk>  (70b4af5c2430)

	* nsssl.c:
	Check for host header when keep_host_header is specified. Move check
	to before strdup.

2015-06-30 16:21 +0100  David Osborne  <david@qcode.co.uk>  (f0e9e8b6492d)

	* nsssl.c:
	Possibly should check for cases where Host header is expected by
	isnt given

2015-06-30 15:32 +0100  David Osborne  <david@qcode.co.uk>  (1c80f02687ae)

	* README.md:
	Readme update

2015-06-30 15:09 +0100  David Osborne  <david@qcode.co.uk>  (affa997ac4f7)

	* nsssl.c:
	Use bool rather than int.

2015-06-23 12:56 +0100  David Osborne  <david@qcode.co.uk>  (a6f72d59d50b)

	* nsssl.c:
	optionally keep Host header intact

2015-04-06 16:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (391bd75ee6ad)

	* README.md, nsssl.c:
	- updated README and version number

2015-03-15 17:04 +0000  gustafn  <neumann@wu-wien.ac.at>  (d5807281cec7)

	* README.md:
	README.md edited online with Bitbucket

2015-03-15 17:03 +0000  gustafn  <neumann@wu-wien.ac.at>  (69bf552f23b8)

	* README.md:
	README.md edited online with Bitbucket

2015-03-15 18:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c3892afbb20)

	* README.md: new file.
	* README: deleted file.
	* README, README.md:
	- use .md as extension for README to provide a nicer start page on
	Bitbucket

2015-03-15 05:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b68731c136e)

	* tests/all.tcl, tests/config.tcl, tests/etc/openssl.cnf,
	tests/modules/testhttps.tcl, tests/nsssl.test: new file.
	* Makefile, nsssl.c, tests/all.tcl, tests/config.tcl,
	tests/etc/openssl.cnf, tests/modules/testhttps.tcl,
	tests/nsssl.test:
	- added test cases for nsssl
	- new command nstest::https to provide support for running regression
	test over ssl

2015-03-13 13:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (507b98ed746c)

	* README:
	- update README

2015-03-13 13:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (48012bf29685)

	* - merge

2015-03-13 13:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57f71eb17508)

	* nsssl.c:
	- fix off by 1 bug leading to incorrect urls when https client was
	used with url path
	- align logic more closer with tclhhtp.c
	- bump version number to identify fixed versions

2015-03-12 07:50 +0000  gustafn  <neumann@wu-wien.ac.at>  (03af97afb670)

	* README:
	README edited online with Bitbucket

2015-03-11 11:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b50a346080e2)

	* nsssl.c:
	- prefer bool and NS_TRUE/NS_FALSE over int and 1/0

2015-02-23 18:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bacb1a9bfb9a)

	* README:
	- update recommended ciphers to exclude RC4

2015-02-21 19:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7050367529c1)

	* nsssl.c:
	- define path as const

2015-02-21 17:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (87f7657e95bd)

	* - merge

2015-02-21 17:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0cb31c93e338)

	* README:
	- improve security options in README file

2015-02-21 17:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68c95d55c736)

	* Makefile:
	- use documented MODOBJS instead of older-style OBJS in Makefiles

2015-02-20 10:44 +0100  gustafn  <neumann@wu-wien.ac.at>  (f0d7b54f0ca8)

	* Merged in apiskors/nsssl (pull request #1)

	add Windows nmake support

2014-10-12 12:30 -0400  Andrew Piskorski  <atp@piskorski.com>  (9d50ab753afd)

	* Makefile.win32:
	Add 32-bit build support.

2014-10-11 09:15 -0400  Andrew Piskorski  <atp@piskorski.com>  (fee5416920ff)

	* Makefile.win32: new file.
	* Makefile.win32:
	Add new Windows-only nmake file.

2015-01-07 11:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (de4e2dedd1f3)

	* nsssl.c:
	- fix freshly introduced bug while eliminating write operations to
	const strings

2015-01-05 15:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65ed17e6c4e4)

	* README:
	- improve markdown

2015-01-05 15:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5704fb6305ae)

	* README:
	- improve markdown

2015-01-05 15:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (991aeb7b616f)

	* README:
	- improve markdown

2015-01-05 14:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33e988f03d88)

	* README:
	- improve markdown

2015-01-05 14:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6377f125323b)

	* README:
	- improve markdown

2015-01-05 14:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cafebec3856a)

	* README:
	- improve markdown

2015-01-05 14:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (475429fa2f7f)

	* README:
	- improve markup on Bitbucket via markdown

2015-01-05 14:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f1726375239)

	* nsssl.c:
	- reduce modifications of const strings

2014-11-25 11:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08fcaf364d86)

	* nsssl.c:
	- use Ns_LogTaskDebug to be able to turn debugging selectively
	on/off (via ns_logctl)

2014-11-25 10:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9cd48cc6a72a)

	* nsssl.c:
	- adjust to new prototypes

2014-11-14 14:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d5db8f80dea)

	* nsssl.c:
	- use Ns_SockState
	- handle NS_SOCK_EXCEPTION
	- adjust variable size for ssl options

2014-11-01 00:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d16974a3f98d)

	* nsssl.c:
	- adjust to current tip

2014-10-29 09:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (60b866e0e9ce)

	* nsssl.c:
	- use socklen_t for accept

2014-10-22 09:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (447ed6d63987)

	* nsssl.c:
	- add const for send operation

2014-10-19 11:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca63fbdc2891)

	* nsssl.c:
	- use NS_INVALID_SOCKET instead of INVALID_SOCKET

2014-09-29 10:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d243c4e04722)

	* nsssl.c:
	- adjust types

2014-09-23 08:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (add6ed223751)

	* nsssl.c:
	- make flags "unsigned int"

2014-07-02 18:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ba2fcde26cd)

	* README:
	- change advertised version number

2014-05-02 11:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02550f47d7f5)

	* nsssl.c:
	Make sure to initialize all members of Ns_DriverInitData to zero

2014-04-12 14:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b152ac8cfdf6)

	* README:
	- update documentation with HSTS (HTTP Strict Transport Security)

2014-04-12 14:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (341fa67cee67)

	* nsssl.c:
	- remove debug line

2014-04-10 11:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54c424a9b419)

	* README:
	- fix typos in README

2014-04-10 11:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d465b85aa4be)

	* dhparams.h: new file.
	* Makefile, README, dhparams.h, nsssl.c:
	- added support for Eliptic Curve Cryptograpy (such as Elliptic
	Curve Diffie-Hellman (ECDH))
	- provide compiled-in defaults for DH parameters
	- add flags for handling several SSL and TLS bugs.
	- deactivate SSLv2
	- bumped version number to 0.5

2014-04-05 11:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f22f00eda35a)

	* nsssl.c:
	- Added OpenSSL version number to startup message

2014-03-31 11:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (400e637a96e3)

	* README:
	- mention adding of diffie hellman parameters to server.pem in
	README file

2014-02-14 11:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5165ff9750b1)

	* README, nsssl.c:
	- added additional parameter "-decompress" for "ns_ssl wait" to
	compress the result on the fly (incrementally) in case it is content
	encoding is "gzip"

2014-01-27 20:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07cae509cc89)

	* README, nsssl.c:
	bump version number to 0.4

2014-01-27 20:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e13f5225231c)

	* README, nsssl.c:
	- added support for perfect forward secrecy (PFS) to nsssl

2013-08-22 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c486fa36b36f)

	* nsssl.c:
	- return headers + status also, when no spoolsize is specified

2013-06-18 11:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d6255bec5a21)

	* ChangeLog, README:
	- updated ChangeLog, README

2013-06-18 11:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e361d738631)

	* nsssl.c:
	- Made ns_ssl working with asynchronous I/O.
	- Refactored code to improve reuse from ns_http.
	- Added flags
	     -file /varName/ and
	     -spoolsize /int/ to "ns_ssl wait". If the content of the obtained
	file is larger or equal than spoolsize, it is spooled to temp file,
	and the name of the temp file is returned in the variable provided
	by "-file". These options make it possible to retrieve also large
	content (e.g. video files) via ns_http without bloating memory.

2013-05-25 20:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec9c41f920bf)

	* .hgtags:
	Added tag naviserver-4.99.5 for changeset 2a01f010f2b7

2013-05-25 20:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a01f010f2b7)

	* ChangeLog: new file.
	* ChangeLog, README:
	- updated README file, added ChangeLog

2013-05-25 20:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (648c6ac08cb7)

	* .hgtags:
	Added tag naviserver-4.99.5 for changeset 60b45c18e323

2013-01-18 10:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (60b45c18e323)

	* nsssl.c:
	enable partial write operations on a per-connection basis (value in
	CTX does not seem to propergate)

2013-01-18 09:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03e063926a22)

	* nsssl.c:
	fix 1 byte reads

2012-12-13 20:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa72b8bd3b30)

	* nsssl.c:
	Pass accept timeout to Ns_SockSetDeferAccept()

2012-12-13 18:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c6746f2f53a7)

	* nsssl.c:
	Use refactored function Ns_SockSetDeferAccept() instead of private
	implementation

2012-12-09 17:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (91d12f60cd2d)

	* nsssl.c:
	pass structure to SockCork, not fd.

2012-12-09 17:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (32a310a58767)

	* nsssl.c:
	Using TCP_CORK for optimizing TCP tracffc. Avoid send attempts on
	zero-byte buffers.

2012-12-07 19:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41b46f7473a3)

	* nsssl.c:
	SSL_read frequently returns just 1 byte in a read operation. Perform
	in such cases a second attempt (which will return significantly more
	data)

2012-12-07 19:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (576e9f82a868)

	* nsssl.c:
	added SO_ACCEPTFILTER for machines having no TCP_DEFER_ACCEPT

2012-12-06 11:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b163e8794a34)

	* README:
	update recommended cipher configuration (old one exposes
	vulnerabilities)

2012-12-05 00:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (230a03690f6f)

	* nsssl.c:
	Prefer server ciphers to secure against BEAST attack. Disable
	compression to avoid CRIME attack. Prevent client-initiated
	renegotiation which is an attack point for DoS.

2012-12-03 10:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (465f2f74b2c1)

	* README, nsssl.c:
	Define driver properly as NS_DRIVER_ASYNC; don't enter eventloop via
	Ns_SockTimedWait() since this might interact badly with the toplevel
	event loop in driver.c. Various small cleanups. Tagged old version
	as 0.1 and incremented version number to 0.2. Tested on Linux and
	macOS.

2012-12-03 10:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a59265f1f10e)

	* .hgtags: new file.
	* .hgtags:
	Added tag nsssl-0.1 for changeset 07e8df5c88e7

2012-11-26 03:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07e8df5c88e7)

	* nsssl.c:
	add Darwin fix, allow deferaccept

2010-09-14 02:10 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (7b64fe471ae9)

	* nsssl.c:
	Fixed wrong args bug

2008-11-07 20:42 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a2d7f6bf1f1f)

	* nsssl.c:
	Don't implement driver SendFile callback as this is handled
	automatically

2008-10-22 20:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (fee758b57a95)

	* nsssl.c:
	Check the return value of SSL_new() in Accept()

2008-10-22 04:23 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (818d2d081b06)

	* nsssl.c:
	Drop the Ns_DriverRequestProc; validate client cert in Recv

2008-10-22 03:14 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (2b5c7e8acda8)

	* nsssl.c:
	Implement new driver callback interface

2008-05-05 22:19 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a9dcf4225aa3)

	* nsssl.c:
	No longer use NS_DRIVER_QUEUE_ON_ACCEPT flag, should be automatic;
	reindent

2007-04-25 00:01 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (2a38d1f67e19)

	* README, nsssl.c:
	Implement https client requests, mimicking ns_http command

2007-04-05 11:13 +0100  Zoran Vasiljevic  <zv@archiware.com>  (70672be84d37)

	* README:
	Fix the example of loading the module

2007-01-02 22:46 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (9d06ffe63818)

	* nsssl.c:
	Add stub ns_ssl command

2006-11-28 20:12 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e5989f04079e)

	* nsssl.c:
	Add random seed to ssl init module

2006-11-28 19:36 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (bf1567892d82)

	* LICENSE, Makefile, README, nsssl.c: new file.
	* LICENSE, Makefile, README, nsssl.c:
	Initial revision

2016-05-12 08:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3f3d7ec216d5)

	* nsd/tclhttp.c:
	Minor code cleanup
	- reduce implicit conversions
	- add const declarations
	- add parens

2016-05-12 08:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c62aff5dc17)

	* nsd/connchan.c:
	- removed shadowed variable

2016-05-11 14:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57e2dba452ec)

	* doc/src/naviserver/ns_http.man:
	- include https documentation in ns_http command

2016-05-11 14:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b368f0359ff2)

	* nsd/tls.c:
	- remove redundant word OpenSSL (since this is included in the
	message)

2016-05-11 14:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fed46472e07d)

	* tcl/http.tcl:
	- provide a deprecated stub-function for ns_ssl to provide backward
	compatibility for the migration

2016-05-11 14:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba92944fda23)

	* nsd/connchan.c:
	- bring options into an alphabetical order

2016-05-11 14:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df05324e028f)

	* tests/ns_conn.test, tests/ns_info.test:
	- reflect latest changes in regression test

2016-05-11 14:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ae0485e54196)

	* tests/test.nscfg:
	- make testing more robust, when ipv6 is available, but turned off
	by the kernel

2016-05-11 12:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d82b302a69e)

	* nsd/tclhttp.c, nsd/tls.c:
	- remove debugging output

2016-05-10 14:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d411f78e4bc)

	* doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_info.man,
	nsd/info.c:
	- added subcommand [ns_info ssl] to indicate, if the binary was
	compiled with OpenSSL support.
	- updated documentation

2016-05-10 13:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (547b99ec268f)

	* include/ns.h, nsd/connchan.c, nsd/driver.c, nsd/tclhttp.c,
	nsd/tls.c, nssock/nssock.c:
	OpenSSL reform (part 2)
	- refactored tclhttp.c and nsssl.c, such that ns_http can handle both,
	http and https
	- https client requests can be used now also, when nsssl driver is not
	loaded.
	- nsssl.c can be now substantially reduced by removing all Ns_Task
	stuff, not done yet
	- simplified request line construction in NSDriverClientOpen()
	- renamed Ns_TLS_CtxCreate() -> Ns_TLS_CtxClientCreate()
	- renamed Ns_TLS_SSLCreate() -> Ns_TLS_SSLConnect()
	- renamed Ns_DriverInitData.defport -> Ns_DriverInitData.defaultPort

2016-05-09 22:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d6bab4af0ce9)

	* Makefile:
	- fix variable name in Makefile for LD_LIBRARY_PATH under fakeroot
	(Many thanks to Héctor Romojaro for the fix). There is still the
	problem that a "make test" runs against installed binary when rpath
	is set

2016-05-09 15:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec2bad0c1dae)

	* m4/openssl.m4, nsd/tls.c: new file.
	* configure.ac, include/Makefile.global.in, include/ns.h,
	include/nsconfig.h.in, m4/openssl.m4, nsd/Makefile, nsd/connchan.c,
	nsd/init.c, nsd/nsd.h, nsd/tls.c:
	OpenSSL reform
	- provided --with-openssl?=path? option to configure
	- new functions NsOpenSSLInit(), Ns_TLS_CtxCreate() and
	Ns_TLS_SSLCreate() to provide reusable SSL/TLS support.
	- new abstract types NS_TLS_SSL_CTX and NS_TLS_SSL (also available,
	when no OpenSSL support compiled in)
	- removed Ns_ClientConnectionContext introduced by last patch
	- adapted connchan and nsssl to new structures
	- bumped version number to 4.99.12d2

2016-05-09 15:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7b4c80fa945)

	* nsd/compress.c:
	- added editor hints

2016-05-09 09:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (01a0623c958c)

	* nsd/form.c:
	- add parens
	- use usual comment style

2016-05-09 09:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b95caffc567c)

	* nsd/connchan.c, nsd/driver.c, nsd/nsd.h:
	- reducing variable scope
	- adding const declaration
	- reduce implicit conversions

2016-05-07 12:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6905bfc6d205)

	* include/ns.h, nsd/connchan.c, nsd/driver.c, nsd/nsd.h,
	nssock/nssock.c:
	Adding support for ns_connchan to handle https connections
	- support for client functionality of non-plain-text protocols
	requires initialization of connection, which in turn requires
	parameterization. Therefore,
	     - a new proc Ns_DriverClientInitProc can be registered to the drivers
	     - the parameters have to be passed to the client init proc via a fixed
	api. For this purpose, Ns_ClientConnectionContext was introduced
	- let driver provide a protocol string (like e.g. "https", or "udp")
	and a default port via Ns_DriverInitData
	- bumping driver version to 4

2016-05-07 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16f9f2b42bdf)

	* configure.ac:
	- bump version number to 4.99.12d1

2016-05-06 15:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f03c82a8a3b2)

	* nsproxy/doc/mann/ns_proxy.man:
	- fix man page (this fix is as well necessary for reproducible
	builds)

2016-05-06 15:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ded562cabeb6)

	* nsd/connchan.c, nsd/driver.c, nsd/nsd.h, nsd/sock.c:
	Extending ns_connchan to support http-client functionality via
	driver channels. The new subcommands could be used for tcl-clients
	as well for tunneling incoming requests (should also be suited for
	tunneling web sockets).

	Current limitations: In the current state, the SSL-initialization
	for https is missing, client-connections are forced to HTTP/1.0.

	Details:
	- new subcommand "ns_connchan open ?-method m? ?-headers h? ?-timeout
	t? /url/" Open a client connection and send request line and
	specified headers
	- new subcommand "ns_connchan exists /channel/" Check if the specified
	channel exists

	- Made naming of static functions more regular:
	  * FreeRequest() renamed to RequestFree()
	  * SockPrepare() renamed to RequestNew()
	  * factored out SockNew(drvPtr);

	- new debug severity Debug(connchan)

2016-05-05 18:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8231df420266)

	* nsd/pathname.c, nsd/progress.c, nsd/queue.c, nsd/sockaddr.c,
	tests/ns_hashpath.test:
	- fix typos

2016-05-05 16:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8eee6da197e4)

	* nsd/tclsock.c:
	- use ns_send instead of send

2016-05-03 08:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7e6d30fe5a3b)

	* nsd/mimetypes.c:
	- handle .gzip (and .tgz) like .gz

2016-05-02 00:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6aee80e7c883)

	* .hgtags:
	Added tag naviserver-4.99.11 for changeset 78dc7c7de219

2016-05-02 00:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (78dc7c7de219 [naviserver-4.99.11])

	* NEWS, README, configure.ac:
	- commit NEWS
	- bump version number to 4.99.11

2016-05-01 12:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (46825bfc6f4a)

	* nsd/sockfile.c:
	- provide more detailed error messages in case corking fails

2016-04-29 13:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe85c10edce2)

	* nsd/form.c, tcl/form.tcl:
	- form-parser: guard plain content parsing by checking, if the
	content type contains www-form-urlencoded. Otherwise a POST request
	where the content is no form might lead to strange results, when
	[ns_getform] is used.

2016-04-28 09:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d7eb4f5d0e8)

	* nsd/dstring.c, nsd/fastpath.c, nsd/tclhttp.c:
	- minor code cleanup (adding parens, removing implicit conversion)

2016-04-26 22:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0002ee48c8c9)

	* README, configure.ac:
	- bump version number to 4.99.11b2

2016-04-26 22:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af37a91ec13b)

	* doc/src/naviserver/ns_http.man:
	- fix whate-space that breaks documentation generation

2016-04-26 22:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (202c5ea46e37)

	* tests/http.test:
	- curon needs (at keast under linux) the "-g" flag to accept ipv6
	addresses

2016-04-26 22:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (895255772014)

	* tests/testserver/modules/client.tcl:
	- testserver: making response parser more robust by requesting more
	data, when not enough content is available

2016-04-26 10:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a3a3dd27b9c4)

	* nsd/driver.c:
	- adjust re-use limit for request buffer to power of two

2016-04-26 00:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a0354889568)

	* nsd/driver.c:
	- reduce memory hunger on large request buffers and potential memory
	leak.

2016-04-26 00:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (263200d0916c)

	* nsd/progress.c:
	- prefer lowercase CONST

2016-04-26 00:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4099c166150b)

	* nsd/tclhttp.c:
	- make sure to clean output headers

2016-04-24 11:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7edfb2d38bf3)

	* configure.ac:
	- bump version number to 4.99.11b1

2016-04-24 11:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (929386cf2b22)

	* include/ns.h, nsd/driver.c, nsd/dstring.c:
	- factor out Ns_DStringAppendPrintable() from driver.c and move it
	to dstring.c
	- prefer lower case unsigned suffix

2016-04-23 09:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (59ef27f5c858)

	* nsd/init.tcl, nsdb/util.tcl, nsperm/compat.tcl, nsperm/htaccess.tcl,
	nsperm/init.tcl, tcl/aolserver-openacs.tcl, tcl/cache.tcl,
	tcl/charsets.tcl, tcl/config.tcl, tcl/fastpath.tcl, tcl/form.tcl,
	tcl/init.tcl, tcl/nstrace.tcl, tcl/sendmail.tcl, tcl/util.tcl:
	Whitespace changes:
	- in all tcl files: replace tabs by spaces, add editor hints to avoid
	tabs

2016-04-23 09:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (de88577f8820)

	* nsd/queue.c, nsd/tclmisc.c:
	- minor editing

2016-04-23 09:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ae4031dc34b)

	* nssock/nssock.h:
	- add common copyright stanza

2016-04-23 09:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7018620d7cb6)

	* doc/src/naviserver/ns_hmac_sha2.man: new file.
	* doc/src/naviserver/ns_hmac_sha2.man, doc/src/naviserver/ns_md5.man,
	doc/src/naviserver/ns_sha1.man, doc/src/naviserver/ns_sha2.man:
	- added a man page for ns_hmac_sha2
	- updated cross references of related pages

2016-04-22 23:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (165af2f27bb9)

	* tests/testserver/pages/123: new file.
	* doc/src/naviserver/ns_http.man, nsd/tclhttp.c, tests/http.test,
	tests/testserver/pages/123:
	updates for "-body_file" for ns_http:
	- updated documentation
	- improved error message
	- extended regression test

2016-04-22 22:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be02e3d3a778)

	* nsd/tclhttp.c:
	- remove unneeded line

2016-04-22 13:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (77c6fbac782b)

	* include/ns.h, nsd/fastpath.c, nsd/tclhttp.c:
	- expose FastStat() from fastpath.c as Ns_Stat() to make it reusable
	in other file.
	- add parameter -body_file to ns_http to specify a file for
	transmission (doc update and ns_ssl is still missing)
	- prefer lower case u as unsigned suffix

2016-04-21 13:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76341951108b)

	* tcl/form.tcl:
	- ns_getcontent: new function (somewhat similar to ns_getform),
	which gets the transmitted content from a request. Background: when
	upload spooling is activated, the [ns_conn content] might be empty,
	but the content might be provided as [ns_conn contentfile]. The
	contentfile is always binary, while [ns_conn content] might return
	the content binary or not depending on its flags. The function
	ns_getcontent was introduce to reduce the burden of an application
	developer to handle spooling/nonspooling binary/nonbinary content
	multiple times.

2016-04-21 09:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (960a799f138c)

	* configure.ac, nsd/binder.c, nsd/dns.c, nsd/driver.c, nsd/form.c,
	nsd/queue.c, nsd/sock.c, nsd/sockaddr.c, nsd/tclhttp.c:
	- remove debug comments (//-comments)
	- bump version number to 11a5

2016-04-20 20:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e06eedb6037e)

	* include/ns.h, nsd/tclset.c:
	- make NS_TCL_SET_STATIC and NS_TCL_SET_DYNAMIC an enum
	(Ns_TclSetType), since the values are mutual exclusive
	- Set the last argument of Ns_TclEnterSet to type Ns_TclSetType
	- Remove misleading documentation about NS_TCL_SET_STATIC and
	NS_TCL_SET_DYNAMIC

2016-04-20 19:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7b94a0725412)

	* doc/src/naviserver/ns_set.man:
	- provde more information what ns_cleanup does

2016-04-19 23:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (815fa35bb3a6)

	* include/ns.h, nsd/tclmisc.c, nsperm/nsperm.c, tests/ns_sha1.test:
	- make NsHexString configurable for upper and lower case
	- use lower-case hex strings for ns_*sha2 functions
	- add test cases for ns_hmac_sha2

2016-04-18 15:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (525eec08594c)

	* include/ns.h, nsd/tclmisc.c, nsperm/nsperm.c:
	- rename function Ns_CtxString() to Ns_HexString() to make it easier
	to understand its intention.
	- provide source code documentation for Ns_HexString()

2016-04-18 15:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5889f167a84)

	* nsd/tclmisc.c:
	- reduce implicit sign conversions
	- don't loose const declarations via cast

2016-04-18 15:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dd37a5412950)

	* nsd/Makefile:
	- fix Makefile entry

2016-04-17 23:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6f5f7bb63fb3)

	* nsd/hmac_sha2.c, nsd/hmac_sha2.h: new file.
	* nsd/Makefile, nsd/hmac_sha2.c, nsd/hmac_sha2.h, nsd/nsd.h,
	nsd/tclcmds.c, nsd/tclmisc.c:
	- new command implementing Hash-based message authentication code
	(based on sha2): "ns_hmac_sha2 ?-length L? /key/ /message/" The
	crypto-code is from https://github.com/ogay/hmac

2016-04-17 22:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (756c6a8483cb)

	* doc/src/naviserver/ns_sendmail.man, tcl/sendmail.tcl:
	- ns_sendmail:
	  * provide new interface based on non-positional arguments
	  * mark old interface based on positional arguments as deprecated
	  * update documentation

2016-04-17 22:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (50ee42d1bbbb)

	* nsd/driver.c:
	- improve debug messages

2016-04-17 19:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4b250b3504cd)

	* tests/ns_sha1.test:
	- update ns_sha2 tests to include -length 224

2016-04-17 19:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (87efe0b2ca64)

	* nssock/nssock.h: new file.
	* nssock/Makefile, nssock/nssock.c, nssock/nssock.h:
	- Make driver i/o-functions reusable via shared library
	- the library contains the following functions Ns_DriverListenProc
	Ns_DriverSockAccept; Ns_DriverSockRecv; Ns_DriverSockSend;
	Ns_DriverSockClose;

2016-04-17 19:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf002fb2c0f2)

	* nsd/driver.c, nsd/queue.c:
	- resurrect handling of non-HTTP drivers (having drvPtr->requestProc
	set)

2016-04-17 19:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c533bed8eb34)

	* nsd/conn.c:
	- fix comment

2016-04-15 18:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5e09a8bcc5eb)

	* doc/src/naviserver/ns_sha2.man:
	- update documentation for ns_sha2

2016-04-15 17:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c96bd6d07e7)

	* nsd/sha2.c, nsd/sha2.h, nsd/tclmisc.c:
	- use implementation of sha2 from Olivier Gay
	<olivier.gay@a3.epfl.ch>
	- add option "-length 224"
	- updated regression test

2016-04-15 16:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb79cf3289f4)

	* nsd/tclmisc.c, tests/ns_sha1.test:
	- fixed ns_sha2 hex computation

2016-04-15 10:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b87e537db2be)

	* doc/src/naviserver/ns_sha2.man: new file.
	* doc/src/naviserver/commandlist.man, doc/src/naviserver/ns_sha1.man,
	doc/src/naviserver/ns_sha2.man:
	- adding man page for ns_sha2

2016-04-14 21:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3de739d076c4)

	* nsd/sha2.c, nsd/sha2.h: new file.
	* nsd/Makefile, nsd/nsd.h, nsd/sha2.c, nsd/sha2.h, nsd/tclcmds.c,
	nsd/tclmisc.c, nsproxy/nsproxymod.c, tests/ns_sha1.test:
	- added new command "ns_sha2 ?-length length? data" based on the
	SHA2 implementation of Aaron Gifford
	(http://www.aarongifford.com/computers/sha.html)
	- extended regression test

2016-04-14 21:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f5c95754029)

	* nsd/sockaddr.c:
	- improve error message

2016-04-14 21:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (942eece40448)

	* nsd/driver.c:
	- improve error message

2016-04-14 21:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63936bc4f2f9)

	* nsdb/nsdb.c:
	- white space change

2016-04-14 21:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (04ead614c3a3)

	* include/nsthread.h:
	- white space change

2016-04-13 00:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5502ca341f3)

	* nscp/nscp.c, nsdb/nsdb.c, nslog/nslog.c, nsperm/nsperm.c,
	nsproxy/nsproxymod.c, nssock/nssock.c:
	- use typedef Ns_ModuleInitProc for Ns_ModuleInit()

2016-04-11 18:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5766a2975ce)

	* openacs-config.tcl:
	- provide sample config file for openacs for IPv4 and IPv6

2016-04-11 16:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c33cb52722d0)

	* nsd/connio.c, nsd/driver.c, nsd/filter.c, nsd/queue.c:
	- LogBuffer(): better handling of chars > 127
	- reduce implicit conversions
	- reduce variable scope
	- add parenthesis

2016-04-11 08:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c39cfceb7e9)

	* nsd/driver.c:
	- avoid sign extension

2016-04-09 15:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (265486e2b09a)

	* nsd/queue.c:
	- reduce verbosity

2016-04-09 15:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d70beb4ecfd5)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adprequest.c, nsd/auth.c, nsd/binder.c, nsd/cache.c,
	nsd/compress.c, nsd/cookies.c, nsd/encoding.c, nsd/event.c,
	nsd/exec.c, nsd/form.c, nsd/httptime.c, nsd/limits.c, nsd/log.c,
	nsd/mimetypes.c, nsd/nsmain.c, nsd/pathname.c, nsd/progress.c,
	nsd/queue.c, nsd/random.c, nsd/range.c, nsd/returnresp.c, nsd/sls.c,
	nsd/sock.c, nsd/sockfile.c, nsd/task.c, nsd/tclcache.c,
	nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclobj.c, nsd/tclobjv.c, nsd/tclrequest.c,
	nsd/tclresp.c, nsd/tclsched.c, nsd/tclthread.c, nsd/tclvar.c,
	nsd/url2file.c, nsd/urlopen.c, nsd/uuencode.c, nsdb/dbdrv.c,
	nsdb/dbinit.c, nsdbtest/nsdbtest.c, nsperm/nsperm.c,
	nsthread/mutex.c, nsthread/reentrant.c, nsthread/rwlock.c,
	nsthread/thread.c, nsthread/winthread.c:
	- prefer lower case unsigned suffix

2016-04-09 10:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (121f1aace338)

	* tests/http_persistent.test, tests/testserver/modules/client.tcl,
	tests/testserver/pages/1, tests/testserver/pages/2,
	tests/testserver/pages/3: new file.
	* configure.ac, include/ns.h, nscgi/nscgi.c, nsd/adpeval.c,
	nsd/adprequest.c, nsd/conn.c, nsd/connio.c, nsd/driver.c,
	nsd/fastpath.c, nsd/filter.c, nsd/form.c, nsd/nsd.h, nsd/op.c,
	nsd/queue.c, nsd/request.c, nsd/return.c, nsd/tclmisc.c,
	nsd/tclsock.c, nslog/nslog.c, tests/http_persistent.test,
	tests/testserver/modules/client.tcl, tests/testserver/pages/1,
	tests/testserver/pages/2, tests/testserver/pages/3:
	Driver reform:
	- implement leftover management for persistent connections
	- some (newer?) clients (e.g. under iOS) send sometimes multiple HTTP
	requests in a single chunk of data (i.e. arriving in a single recv()
	operation), which is certainly allowed
	- until now, NaviServer (or AOLserver) just processed the first
	request of the reveive buffer, ignoring the reminder, causing missed
	(hanging) requests or invalid followup requests.
	- The new version handles such situations correctly- As a consequence,
	the receive buffer management (and the livecycle of request buffers
	and structures) had to be reworked, since the reveive buffer was
	cleared after every request and bound to the Sock structure. In the
	new version the parsed requests (struct Ns_Request) is part of
	Ns_Conn and Ns_Sock and Request to decouple connection thread
	concerns from driver concerns and to allow concurrency (reveived
	more bytes in a pipline while a connection thread is working already
	on the first requests)
	- Extended the testing infrastructure to simulate requests arriving in
	multiple chunks (new file tests/testserver/modules/client.tcl)
	- De-spaghetti driver code, remove obsolete code.
	- Improve source code documentation
	- Improve more error logging, report errors in more error conditions
	- Prefer bool over int variables for logical variables
	- Extend regression test to including buffering cases in http/1.1
	- Bump version number to 4.99.11a4

2016-04-08 09:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eba2729974ce)

	* doc/src/naviserver/ns_log.man:
	- improve documentation

2016-04-07 18:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7ed22a25ae08)

	* tests/http_chunked.test:
	- provide better visual separation between test items
	- avoid eval

2016-04-07 18:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a9bf51a164f4)

	* doc/src/naviserver/ns_log.man:
	- improve spelling

2016-04-07 18:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7ebe2787a12b)

	* doc/src/naviserver/ns_sockselect.man:
	- improve formatting of man page

2016-03-29 19:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (75897cee838f)

	* nsd/log.c:
	- improve comments

2016-03-29 19:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43df642e8761)

	* nsd/driver.c:
	- fix typo

2016-03-29 19:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c40c8144081)

	* include/ns.h, nscgi/nscgi.c, nscp/nscp.c, nsd/modload.c, nsdb/db.h,
	nsdb/dbdrv.c, nslog/nslog.c, nsperm/nsperm.c, nsproxy/nsproxymod.c,
	nssock/nssock.c:
	- add nonnull asserts and document (strange) argument list for
	Ns_ModuleLoad() in NsDbLoadDriver()

2016-03-29 19:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c4b1f70a447c)

	* include/nscheck.h:
	- relax gcc6 test, since gcc6 behavior is apparently fixed

2016-03-26 17:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (052ba1d24e60)

	* include/ns.h, nsd/adprequest.c, nsd/fastpath.c, nsd/tclrequest.c:
	- keep query parameter after directory induced redirect in fastpath
	(bug report of David Osborne in the NaviServer list)
	- setting 2nd argument of Ns_OpProc to nonnull

2016-03-25 23:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (243ba1bab500)

	* nsd-config.tcl:
	- deactivate request debugging in nsd-config.tcl

2016-03-25 22:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e99047ec7a2)

	* nsd/request.c:
	- undo clearing optimization of last commit

2016-03-25 22:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a4ea70f7ac3)

	* include/ns.h, nsd-config.tcl, nsd/driver.c, nsd/nsd.h,
	nsd/request.c:
	- added severity Debug(request) to receive in the log file entries
	for begin and end of requests (useful especially for concurrency of
	long-running requests.
	- added non-null constraint for Ns_ResetRequest() since this function
	is intended to be called always on embedded structures.
	- improve source code documentation
	- added nonnull asserts to ChunkedDecode()

2016-03-25 22:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0743934e1ed7)

	* Makefile:
	- added target: "lldb-sample" to ease calling the sample config
	under lldb

2016-03-25 20:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39ca9b16bbc5)

	* nsd/nsd.h:
	- define NONNULL for NsFreeRequest

2016-03-25 20:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b96e5d742997)

	* nsd/queue.c:
	- call NsFreeRequest only when reqPtr not NULL

2016-03-25 20:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (841b1f1b2754)

	* nsd/mimetypes.c:
	- remove redundant definition

2016-03-25 20:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3fe0589dbf9c)

	* nsd/sock.c:
	- minor improvements

2016-03-25 20:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e22e59b7f35)

	* nslog/nslog.c:
	- prefer dsPtr over ds + address operator

2016-03-20 19:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5cb83b3e945d)

	* doc/src/naviserver/ns_log.man, nsd/log.c:
	- added likey/unlikey hints for the compiler
	- add comment lines
	- improve man page

2016-03-19 18:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8190d2eddfff)

	* tcl/form.tcl:
	- fix encoding problems in ns_parseformfile

2016-03-18 14:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (677fa0d09445)

	* nsd/mimetypes.c:
	- lower case mime types, since mime types are case insensitive
	(http://tools.ietf.org/html/rfc2045)

2016-03-18 14:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (454a561b8bf2)

	* nsd/conn.c:
	- add parens

2016-03-17 20:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7e89756f9cfe)

	* nsd/driver.c:
	- remove hack to map POST requests into GET requests for large
	uploaded content, since it (1) confuses applications querying the
	HTTP method and (2) it is apprarently not necessary any more.

2016-03-17 20:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c438c3ba2782)

	* nsd/mimetypes.c:
	- completing mimetypes according to http://www.iana.org/assignments
	/media-types/media-types.xhtml

2016-03-15 09:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0aa51bd108e0)

	* doc/src/naviserver/ns_conn.man, nsd/conn.c, nsd/driver.c,
	nsd/form.c, nsd/nsd.h, tcl/form.tcl:
	- Add support for HTML5 file attribute "multiple": HTML5 allows for
	uploading multiple files under the same INPUT name. Previous version
	of NaviServer just accepted the first file with the given name.

	- Consequences: 1) the following support functions [ns_conn
	fileoffset $name] [ns_conn filelength$name] [ns_conn fileheaders
	$name] return for the specified name potentially a list of values
	instead of scalar values 2) The ns_set returned by [ns_getform] will
	contain multiple entries for the file, as well multiple entries for
	$name.tmpfile and $name .content-type

2016-03-15 09:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42a2939e5048)

	* nsd/returnresp.c:
	- improve comment

2016-03-15 09:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b71b24f0136)

	* nsd/log.c:
	- prefer boolean value over 0/1

2016-03-15 08:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f3579bb8cb4)

	* include/ns.h, nsd/sockaddr.c:
	- Ns_SockaddrSameIP(): new function for testing, if two IP addresses
	are equal

2016-03-15 08:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9da46f0a40ed)

	* nsd/tclset.c:
	- prefer lower-case number suffix

2016-03-14 09:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d102a1ab7b04)

	* configure.ac:
	- bump version number to 4.99.11a3

2016-03-14 09:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4c80e4f510c1)

	* contrib/examples/index.adp, index.adp:
	- align style and logo of default web server configuration with
	style of man pages
	- improve validity of HTML

2016-03-14 09:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23e7e94072ed)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/nsd.h, nsd/op.c,
	nsd/returnresp.c, nsd/tclhttp.c, tests/http.test:
	- improve error handling: return "invalid method" instead of "file
	not found" when method is invalid
	- new function Ns_ConnReturnInvalidMethod()
	- new function Ns_HttpLocationString() to unify generation of host and
	location strings
	- removed unused sockstate SOCK_SERVERREJECT
	- provide better driver debug messages to list more interesting cases,
	improve provided context in debug messages
	- SockSetServer(): align documentation with actual behavior, fix
	return value
	- prefer lowercase "u" suffix
	- add nonnull asserts
	- extend regression test

2016-03-14 09:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2bbe63c6e7fd)

	* nsd/server.c:
	- fix typo in comment

2016-03-14 09:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4466ec9cc2bc)

	* nsd/request.c:
	- Ns_ParseRequest(): provide better error messages for invalid
	requests (instead of assuming HTTP/0.9 in most cases and handle
	cases silently)
	- delaying cleanup of struct Request in error situations to be able to
	provide better error messages (in most cases NsFreeRequest() handles
	now success and error cases)
	- improve source code documentation

2016-03-14 08:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9190f181b547)

	* nsd-config.tcl:
	- add sample debug statements

2016-03-13 10:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec700b4a53a0)

	* doc/src/naviserver/ns_register.man:
	- fix typo

2016-03-13 00:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65a46b4dce50)

	* nsd/returnresp.c:
	- improve validity of returned HTML

2016-03-13 00:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97b8f1e5d3c3)

	* nscp/nscp.c, tests/testserver/modules/testhttp.tcl:
	- prefer IP-literal notation

2016-03-06 19:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03683f084fd8)

	* nsd/httptime.c, nslog/nslog.c:
	- pass consistently NULL to time() (instead of "0")

2016-03-06 17:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8114413b4bf)

	* nsd/driver.c:
	- include peer address in error message about invalid requests to
	ease debugging
	- single error message for SOCK_BADREQUEST and SOCK_BADHEADER
	sufficient

2016-03-05 23:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c71a4e2e65f)

	* doc/src/naviserver/ns_cookie.man:
	- fix documentation bug

2016-03-05 04:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8ebd15c7df53)

	* nsd-config.tcl:
	- listen in sample config file on every ip address, not only on
	loopback. This has the advantage, that when listening on ipv6, the
	urls in the dirlisting (based on host) work, even when they are ipv4
	addresses.

2016-03-04 09:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (64f9d4b79f54)

	* nsd/log.c:
	- add more comments
	- prefer boolean over 0/1 coding

2016-03-03 20:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (472e9307aba2)

	* nsd/driver.c, nsd/sock.c, nssock/nssock.c:
	- don't ignore all SOCK_READERROR since it is possible to swallow
	error conditions
	- improve of signaling close from peer by clearing the errno (and
	return -1 as before)

2016-03-03 18:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a7df48232db)

	* nsd/driver.c:
	- handle EAGAIN as SOCK_MORE

2016-03-02 20:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ff6f84b40cc)

	* nsd/driver.c:
	- report driver generated replies in the error.log (access log would
	be better)

2016-03-02 20:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e2ee1ef9c161)

	* nsproxy/nsproxylib.c:
	- prefer boolean results over 0/1

2016-03-01 12:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8e266385e8d3)

	* doc/src/naviserver/ns_limits.man-retracted: new file.
	* doc/src/naviserver/ns_limits.man: deleted file.
	* doc/src/naviserver/ns_limits.man, doc/src/naviserver/ns_limits.man-
	retracted:
	- hide manpage of ns_limits, since the command is in premature
	status

2016-02-29 10:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (369eb9352865)

	* nsd/dns.c:
	- a failed reverse lookup is normally not an "error", but just worth
	a "notice" in error.log

2016-02-28 14:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bdf5d293e514)

	* nsd/sock.c:
	- make sure that the local and of a SockConnect is of the same
	address family as the remote end

2016-02-28 14:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (88b15fff98e0)

	* openacs-config.tcl:
	- set maxupload in OpenACS sample config file

2016-02-28 14:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (49ffd44776e9)

	* nsd/url.c:
	- fix typo in comment

2016-02-28 14:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (baac47614973)

	* nssock/doc/mann/nssock.man:
	- improve documentation of parameters

2016-02-28 14:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b9ba90313777)

	* nsd/driver.c:
	- provide a warning, when parameter maxupload has to be adjusted

2016-02-27 07:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (427dcf49884f)

	* nsd/binder.c:
	- white space change

2016-02-27 07:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (877335cbfdcd)

	* nsd/dns.c:
	- reduce scope of variable

2016-02-27 07:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d8f673e661e)

	* nsd/driver.c:
	- don't shadow variable

2016-02-26 14:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d6088d06dfd)

	* nsd/binder.c, nsd/sockaddr.c:
	- fix more issues with prebind
	- increase verbosity for prebind

2016-02-26 11:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (585090097902)

	* nsd-config.tcl:
	- improve tests for deactivated ipv6 in demo config file nsd-
	config.tcl

2016-02-26 10:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cafe994a8793)

	* nsd/driver.c, nsd/nswin32.c, nsd/sock.c, nsd/str.c:
	- add missing prototype
	- add more parens

2016-02-26 10:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (593dbca1b2b7)

	* nsd/driver.c, nsd/queue.c:
	- use parens for sockaddr consistently

2016-02-26 09:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c82d81f5690d)

	* nsd/request.c:
	- remove for claus irregularity

2016-02-26 09:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (432a251c4e8e)

	* include/nsthread.h, nsd/nswin32.c, nsd/sockaddr.c,
	nsthread/reentrant.c:
	- enable IPv6 per for MSCV
	- remove local version of inet_ntop()
	- mark HAVE_INET_NTOP and HAVE_INET_NTOP as defined for MSCV
	- adjust raw printing of IPv6 addresses for MSCV (using u.Word)

2016-02-26 09:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1cd22a093b2c)

	* nsd/driver.c:
	- reduce type conversions
	- declare variables at the begin of a block

2016-02-26 08:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (883084d31878)

	* include/ns.h:
	- add missing NS_EXTERN

2016-02-25 14:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b0aae4d4f35)

	* nsd/binder.c:
	- fix typo

2016-02-25 12:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (64b5ec6449d5)

	* nsd/nswin32.c, nsd/sockaddr.c:
	- adjust members of windows specific address bits for IPv6 addresses
	- fix typo

2016-02-25 12:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c9b7865efd78)

	* nsd-config.tcl:
	- make sample config script more robust:
	  * don't hard-code ip address
	  * if an ipv6 version of NaviServer is used, check, if IPv6 is enabled
	and set address accordingly

2016-02-25 11:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (47e5345eb153)

	* nsd/binder.c:
	- don't try binder when addresses cant be resolved
	- avoid hangs from the binder
	- don't hard-code unspecified IP address

2016-02-25 11:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7884150f0a5)

	* nsd/tclsock.c:
	- improve readability of error message

2016-02-24 13:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (178414d96f20)

	* nsd/sockaddr.c, tests/ns_listencallback.test,
	tests/testserver/modules/listencallback-procs.tcl: new file.
	* configure.ac, include/ns.h, include/nsconfig.h.in,
	include/nsthread.h, nscgi/nscgi.c, nscp/nscp.c, nsd-config.tcl,
	nsd/Makefile, nsd/binder.c, nsd/conn.c, nsd/dns.c, nsd/driver.c,
	nsd/info.c, nsd/listen.c, nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/nswin32.c, nsd/queue.c, nsd/request.c, nsd/sock.c,
	nsd/sockaddr.c, nsd/str.c, nsd/tclhttp.c, nsd/tclsock.c, nsd/unix.c,
	nsd/url.c, nsperm/doc/mann/nsperm.man, nsperm/hosts.allow,
	nsperm/htaccess.tcl, nsperm/init.tcl, nsperm/nsperm.c,
	nssock/nssock.c, nsthread/reentrant.c, tcl/form.tcl,
	tests/ns_addrbyhost.test, tests/ns_conn.test, tests/ns_info.test,
	tests/ns_listencallback.test, tests/test.nscfg,
	tests/testserver/modules/listencallback-procs.tcl,
	tests/testserver/modules/testhttp.tcl:
	IPv6 support for NaviServer
	- Added a amall Abstraction API for IP-version agnostic calls:
	Ns_LogSockaddr(), Ns_SockaddrGetPort(), Ns_SockaddrGetSockLen(),
	Ns_SockaddrMask(), Ns_SockaddrMaskBits(), Ns_SockaddrSetPort(),
	ns_inet_ntop(), ns_inet_pton()

	- Replaced in interface more places where "sockaddr_in" (the IPv4
	version of the sockaddr) with the generic (version agnostic)
	sockaddr (also in IPv4 code to obtain API consistency when no IPv6
	is available): Ns_BindSock(), Ns_ConnSetPeer(), Ns_GetSockAddr(),
	Ns_SockBind(), Ns_SockBindUdp()

	- The Ns_Sock structure contained sockaddr_in, which is not
	sufficient to store IPv6 addresses. Therefore, it was necessary to
	change that to "sockaddr_storage" which guarantees to be large
	enough to keep all kind of addresses. This affects as well driver
	modules which communicate via the NaviServer managed sockets. Old
	drivers might crash with the new structure. Therefore, I've bumped
	NS_DRIVER_VERSION to 3 such that driver modules (also binaries) can
	communicate that they support IPv6. In IPv6 mode, NaviServer refuses
	to work with versions <3.

	- Replaced all usages of ns_inet_ntoa() by ns_intet_ntop() (except
	for legacy an minimal library support)

	- Added log file warnings on various places, where NaviServer was
	ignoring error states in socket communications silently.

	- Transformed hash table for open listen ports to string keys (the
	old code used 32bit IPv4-addresses as keys in hash tables)
	- added test for ns_listencallback

	- Ns_HttpParseHost: new abstraction for parsing host and port
	number. Reason: IPv6 literal notation contains many colons, parsing
	IP-literal notation according to RFC 3986 section 3.2.2 is necessary
	(removed places where code was searching for ':' to expect the port)

	- Added [ns_info ipv6] to obtain information whether the binary
	supports IPv6 or not

	- Added configure flag --disable-ipv6 to build NaviServer just with
	IPv4 support.

	- provide defines for core differences between IPv4 and IPv6 #ifdef
	HAVE_IPV6 # define NS_IP_LOOPBACK "::1" # define NS_IP_UNSPECIFIED
	"::" # define NS_SOCKADDR_IN sockaddr_storage # define
	NS_IPADDR_SIZE INET6_ADDRSTRLEN #else # define NS_IP_LOOPBACK
	"127.0.0.1" # define NS_IP_UNSPECIFIED "0.0.0.0" # define
	NS_SOCKADDR_IN sockaddr_in # define NS_IPADDR_SIZE INET_ADDRSTRLEN
	#endif

	 - nsperm:
	  * Aligned implementation with the documentation (hosts.allow/deny have
	comma-separated entries)
	  * Added submask specification in the form /xxx (e.g. ::1/64)
	  * Use binary IPv4 and IPv6 values for hash and mask lookup
	  * Generalizing masking functions
	  * Refactor code to avoid memory leaks
	  * Updated documentation

	- modules:
	  * nsudp and nsssl are now IPv6 aware/compliant

	TODOs:
	- more platform testing (probably changes for Windows necessary, help
	is appreciated)
	- remove commented out debug statements

	- make more modules IPv6 compliant
	- documentation updates

2016-02-24 11:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0cc418cb7cba)

	* tests/tclresp.test:
	- remove test with deprecated "ns_startcontent"

2016-02-24 11:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e222984c19a4)

	* tests/encoding.test:
	- replace deprecated "ns_startcontent" by "ns_headers"

2016-02-24 10:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92701131b2e7)

	* tests/adp.test:
	- add listen constraint

2016-02-24 01:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61f135697ea9)

	* nsd/sockfile.c:
	- Don'd use bool in socket options

2016-02-23 20:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a195491e5c5)

	* nsthread/thread.c:
	- obtain hex string from function pointer in a c99 compliant manner

2016-02-19 12:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e57399cfeace)

	* nsd/form.c:
	- prefer lowercase unsigned suffix

2016-02-16 15:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a724f848eb6d)

	* .hgtags:
	Added tag naviserver-4.99.10 for changeset 22c89823961c

2016-02-16 15:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (22c89823961c [naviserver-4.99.10])

	* NEWS:
	- updated NEWS file

2016-02-16 15:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df6b123ad2dc)

	* configure.ac:
	- bump version number to 4.99.10

2016-02-14 13:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15db3204688f)

	* doc/src/naviserver/commandlist.man:
	- add a section of deprecated commands

2016-02-14 13:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b52998d0df9c)

	* nsd/tclresp.c:
	- log when deprecated function ns_startcontent is called

2016-02-13 18:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f21f0f746eb5)

	* .cvsignore, include/.cvsignore, nsd/.cvsignore,
	tests/testserver/.cvsignore: deleted file.
	* .cvsignore, include/.cvsignore, nsd/.cvsignore,
	tests/testserver/.cvsignore:
	- remove .cvsignore files

2016-02-13 15:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f99ffcc47a15)

	* doc/src/naviserver/nsv.man, nsd/adpeval.c, nsd/cls.c,
	nsthread/tls.c:
	- fix spelling errors

2016-02-12 11:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2df34409174)

	* include/nsthread.h, nsd/config.c:
	- use SCNd64 instead of PRId64 for scanning values

2016-02-11 10:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44f1618e4a01)

	* include/nsthread.h:
	- further cleanup of the compatibility layer of the PRI*PTR macros

2016-02-07 15:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a112b60c974)

	* Makefile:
	- add parallel checks and inconclusive results to cppcheck options

2016-02-07 15:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4074d40243b7)

	* nsd/fastpath.c:
	- don't shadow type from zlib.h

2016-02-07 15:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f29ce1bff63b)

	* nsd/server.c:
	- skip constant part

2016-02-07 15:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b923ffeced47)

	* nsd/connchan.c:
	- remove double assignment

2016-02-05 00:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f241a4b7c0ac)

	* nsdb/dbinit.c:
	- add parens

2016-02-04 23:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8c15084b5b6)

	* include/nsthread.h:
	- fix cut&paste problem

2016-02-03 13:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7a02f66897c)

	* nsdb/dbinit.c, nsdb/nsdb.h:
	- added nonnull annotations

2016-02-03 12:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (51fe32648826)

	* include/ns.h:
	- improve macros for supporting bool und visual studio

2016-02-03 11:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (749090c26855)

	* include/nsthread.h:
	- improve print macros for _WIN64

2016-02-02 23:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5feaab39401c)

	* nslog/nslog.c:
	- Don't pass NULL after the last typed argument to a variadic
	function

2016-01-27 22:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2dd595261f9d)

	* doc/src/naviserver/returnstatus-cmds.man:
	- add hint to documentation

2016-01-27 22:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68b3c078c34d)

	* include/ns.h:
	- refine "bool" definition for C++ compilers

2016-01-22 21:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d6dc8ddbb2e8)

	* nsd/driver.c, nsd/nswin32.c, nsd/tclhttp.c:
	- minor cleanup

2016-01-18 09:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b57675480e9e)

	* nsd/connchan.c:
	- add const declarations

2016-01-18 09:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8967fb67ac65)

	* nsd/log.c, nsd/urlencode.c:
	- no need to use address operator, when array (name) is passed to a
	function

2016-01-18 08:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (454aa307d791)

	* include/ns.h:
	- don't do a '#if SOMEVAR > ..." on a potentially undefined
	preprocessor variable

2016-01-17 19:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69fbdcadd901)

	* nsd/set.c:
	- use ns_strdup() instead of ns_strcopy() when it is clear that
	argument is nonnull
	- minor cleanup

2016-01-17 19:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (66d57e6938dc)

	* nsd/nsd.h, nsd/queue.c, nsd/server.c:
	- don't set members of the configuration Ns_Set() from multiple
	threads, since these sets are not secured via a mutex. Move reading
	of config variable "connsperthread" into main startup thread

2016-01-15 14:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b0fc74612680)

	* Makefile:
	- add target for testing under lldb

2016-01-11 10:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5528ec4ba7b)

	* .hgtags:
	Added tag naviserver-4.99.9 for changeset 67ee59f56e70

2016-01-11 10:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (67ee59f56e70 [naviserver-4.99.9])

	* README:
	- update README, NEWS

2016-01-11 10:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e699a9537168)

	* configure.ac:
	- update version number

2016-01-11 00:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c143483834d1)

	* include/Makefile.module.in:
	- add target "cppcheck" (for all modules)

2016-01-10 18:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (842741b81fe6)

	* nsd/server.c:
	- prefer lower case U-suffix over upper case.

2016-01-10 18:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40304aa3d34e)

	* nsd/tclcache.c:
	- remove side-effect

2016-01-10 18:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38321444100c)

	* nsd/cache.c, nsd/form.c, nsd/tclhttp.c:
	- reduce variable scopes

2016-01-10 18:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ea73da8e200c)

	* include/ns.h, nsd/sched.c:
	- change result of Ns_Cancel(), Ns_Pause(), Ns_Resume() form "int"
	to "bool"

2016-01-06 23:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f4923c08138)

	* nsd/sock.c:
	- TCP_FASTOPEN: macOS 10.11 seems to support TCP_FASTOPEN, but
	does not allow the qvalue 5, which is recommended for Linux

2016-01-03 12:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3339b41dd41e)

	* nsd/binder.c:
	- improve comment density above threshold

2015-12-31 13:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ecbfd513b2c3)

	* include/ns.h, nsd/driver.c:
	- align member elements

2015-12-31 13:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a40689ba316f)

	* include/ns.h, nsd/info.c, nsd/nsd.h:
	- add "const" declarations

2015-12-31 12:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a12e0291d507)

	* nsd/adpparse.c:
	- add "const" to cast
	- prefer "u" over "U" suffix

2015-12-31 12:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30d3e43fbfe7)

	* nsperm/nsperm.c:
	- remove extra comma

2015-12-29 16:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd9d5adf9699)

	* nsd/index.c:
	- fix typos
	- white space changes

2015-12-29 16:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d1256a321892)

	* nsproxy/nsproxylib.c:
	- make asserts more precise

2015-12-29 16:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (307208e8cd4f)

	* nsd/exec.c:
	- initialize variable to ease life of static checkers

2015-12-28 18:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d56f6e5fcf3d)

	* nsd/connio.c, nsd/nswin32.c:
	- fix filename

2015-12-26 08:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c377ddec6c9f)

	* nsd/init.tcl, tests/tclresp.test:
	- improve compatibility of ns_eval with Tcl's eval. In particular,
	one can now define a proc containing a comment via ns_eval. The
	following forms works now:

	 set cmd [list proc ::foo {} { # some comment ns_return 200
	text/plain ok }] eval $cmd ns_eval $cmd ns_eval {*}$cmd

2015-12-22 08:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (50995742edac)

	* nsd/return.c:
	- updated list of status codes

2015-12-20 02:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40204ffe368c)

	* include/nsthread.h:
	- return correct type for getpid() under windows

2015-12-20 02:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9abdfabd72b7)

	* nsd/dns.c:
	- use warning instead of error when dns-lookup fails (potentially
	expected result)

2015-12-19 17:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbbc8fbe9cdd)

	* include/ns.h, nsd/connchan.c, nsd/tclsock.c:
	- use real boolean type in C99 (helps as well for c++)

2015-12-17 20:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4dd180dc130a)

	* include/ns.h, nsd/nswin32.c:
	- provde c++ compatibility

2015-12-12 17:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d4aaeb04768)

	* doc/src/naviserver/ns_register.man:
	- fix obsolete documentation for ns_register_proc

2015-12-10 09:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8139772b5ae)

	* nsdb/dbtcl.c:
	- remove strange code

2015-12-07 22:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41627483427f)

	* include/nsthread.h:
	- add parens around expressions

2015-12-07 22:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (781a384963b8)

	* nsd/urlspace.c:
	- fix nesting in switch statement

2015-12-07 22:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f9cf29cfe927)

	* nsproxy/nsproxylib.c:
	- fix typo

2015-11-29 11:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c1003b25987)

	* nsd/conn.c, nsd/driver.c, nsd/urlspace.c:
	- reduce implicit signed/unsigend conversions
	- prefer 0u over 0U

2015-11-28 15:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (609b017b9e63)

	* include/nscheck.h, nscgi/nscgi.c, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adpparse.c, nsd/adprequest.c, nsd/auth.c, nsd/binder.c,
	nsd/cache.c, nsd/callbacks.c, nsd/cls.c, nsd/compress.c,
	nsd/config.c, nsd/conn.c, nsd/connchan.c, nsd/connio.c,
	nsd/cookies.c, nsd/crypt.c, nsd/dns.c, nsd/driver.c, nsd/dstring.c,
	nsd/encoding.c, nsd/event.c, nsd/exec.c, nsd/fastpath.c,
	nsd/filter.c, nsd/form.c, nsd/httptime.c, nsd/index.c, nsd/limits.c,
	nsd/lisp.c, nsd/listen.c, nsd/log.c, nsd/mimetypes.c, nsd/op.c,
	nsd/pathname.c, nsd/proc.c, nsd/queue.c, nsd/quotehtml.c,
	nsd/range.c, nsd/request.c, nsd/return.c, nsd/returnresp.c,
	nsd/rollfile.c, nsd/sched.c, nsd/server.c, nsd/set.c, nsd/sls.c,
	nsd/sock.c, nsd/sockcallback.c, nsd/str.c, nsd/task.c,
	nsd/tclcache.c, nsd/tclcallbacks.c, nsd/tclcmds.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobj.c, nsd/tclobjv.c,
	nsd/tclrequest.c, nsd/tclresp.c, nsd/tclset.c, nsd/tclsock.c,
	nsd/tclthread.c, nsd/tcltime.c, nsd/tclvar.c, nsd/tclxkeylist.c,
	nsd/unix.c, nsd/url2file.c, nsd/urlencode.c, nsd/urlopen.c,
	nsd/urlspace.c, nsd/uuencode.c, nsdb/dbinit.c, nsdb/dbtcl.c,
	nsdb/dbutil.c, nslog/nslog.c, nsproxy/nsproxylib.c, nssock/nssock.c,
	nsthread/cslock.c, nsthread/memory.c, nsthread/mutex.c,
	nsthread/pthread.c, nsthread/reentrant.c, nsthread/rwlock.c,
	nsthread/sema.c, nsthread/signal.c, nsthread/thread.c,
	nsthread/time.c, nsthread/tls.c, tests/ns_proxy.test:
	- New macro NS_NONNULL_ASSERT(): Background: The unreleased gcc6
	with "-pedantic" complaints since recently about asserts, in which
	nonnull conditions are explicitly tested, and spits out warnings
	like ... warning: nonnull argument ... compared to NULL ... The new
	macro NS_NONNULL_ASSERT turns off these tests when gcc6 is used.

2015-11-28 12:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d45e07ae01e)

	* nsd/conn.c, nsd/connchan.c, nsd/driver.c, nsd/info.c, nsd/log.c,
	nsd/sls.c, nsd/tclenv.c, nsd/tclfile.c, nsd/tclhttp.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclset.c, nsd/tclthread.c,
	nsd/tcltime.c, nsd/tclvar.c, nsd/urlspace.c, nsdb/dbtcl.c,
	nslog/nslog.c, nsproxy/nsproxylib.c:
	- add more const declarations

2015-11-28 10:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (24f54a0ac379)

	* nsd/cache.c:
	- add missing assert()

2015-11-28 10:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (675b483c7bac)

	* nsd/urlspace.c:
	- don't get in conflict with c90 identifier
	- align prototype
	- add "default" to switch statements
	- remove unaccessed variable

2015-11-28 10:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (18a1d25d8f9e)

	* nsd/nsd.h:
	- remove extra comma

2015-11-23 13:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (99e080f49c72)

	* nsd/urlspace.c, tests/ns_urlspace.test:
	- fix urlspace deletion bug (previously noted in regression test)
	- extend regression test

2015-11-22 20:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c709629e889)

	* nsd/fd.c, nsd/queue.c, nsdb/dbinit.c:
	- don't use unsigned format on signed variable

2015-11-22 20:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3663d741f7d3)

	* nsperm/nsperm.c:
	- fix test on wrong variable

2015-11-22 20:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1513475f893)

	* tests/ns_urlspace.test:
	- add more test cases to regression test

2015-11-19 11:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8637e773eefb)

	* tests/ns_urlspace.test: new file.
	* tests/ns_urlspace.test:
	- add regression test cases for ns_urlspace

2015-11-19 11:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d00bbe6c38d)

	* nsd/urlspace.c:
	- reduce variable scope

2015-11-19 11:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8ba505398ee)

	* doc/src/naviserver/ns_urlspace.man, doc/src/naviserver/nsv.man:
	- fix typos

2015-11-19 08:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ddb353fd6c50)

	* doc/src/naviserver/ns_urlspace.man: new file.
	* doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_connchan.man,
	doc/src/naviserver/ns_urlspace.man, doc/src/naviserver/nsv.man:
	- new man page for ns_urlspace
	- minor fixes for related man pages

2015-11-19 08:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c9951064baaf)

	* nsd/urlspace.c:
	- cleanup

2015-11-18 20:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2758b9f8392f)

	* include/ns.h, nsd/limits.c, nsd/nsd.h, nsd/op.c, nsd/queue.c,
	nsd/tclcmds.c, nsd/tclfile.c, nsd/url2file.c, nsd/urlspace.c:
	- The new command "ns_urlspace" that allows one to attach data to URLs
	in a hierarchical manner form the Tcl level. The command allows e.g.
	to write ns-perm like access control in Tcl without much hassle.

	 ns_urlspace set ?-id i? ?-key k? ?-noinherit? /url/ string
	ns_urlspace get ?-exact? ?-id i? ?-key k? ?-noinherit? /url/
	ns_urlspace list ns_urlspace new ns_urlspace unset ?-id i? ?-key k?
	?-noinherit? ?-recurse? /url/

	- Ns_UrlSpecificGetFast() was (and is) broken, but it is nowhere
	used. It is marked now as deprecated, requests are redirected to
	Ns_UrlSpecificGet().

	- The optimization of __URLSPACE_OPTIMIZE__ imposes no changes, all
	tests work functionally equivalent. However, at least in my test-
	cases there is no performance improvement when using it.

	- ns_urlspace can be used in the regression test for testing the
	functionality provided by in urlspace.c systematically. The
	regression tests will be added later (like man pages).

2015-11-18 20:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c9cd694a32d)

	* nsd/tclvar.c:
	- use single return

2015-11-18 20:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3f0f7454b680)

	* nsd/tclcache.c:
	- use single return

2015-11-10 22:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00017c3ccecf)

	* nsd/exec.c:
	- reduce implicit signed/unsigned conversions

2015-11-10 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (142a49e6c053)

	* doc/src/header.inc, doc/src/man.css:
	- include logo via css to ease debian packaging

2015-11-10 11:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d6f2935bc15)

	* nsd/urlspace.c:
	- don't compare unsigned type with less than 0

2015-11-10 11:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8745f170386)

	* nsd/set.c:
	- there seems to be a compliter bug on recent versions of clang.
	Let's try whether this variant can cause the same problem

2015-11-09 08:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08c23b65016f)

	* include/ns.h, nsd/index.c:
	- reduce signed/unsigned conversions

2015-11-09 08:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff712b4aa557)

	* nsdb/dbinit.c:
	- don't cast away const

2015-11-09 08:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0068b8e947f2)

	* nsd/tclcache.c, nsd/tclvar.c:
	- don't ignore result of Tcl_ObjSetVar2()

2015-11-09 07:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4cda1afa32e4)

	* nsthread/thread.c:
	- prefer "for" loop over "while"

2015-11-09 07:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (abffdf460383)

	* nsd/queue.c:
	- don't use "Ns" prefix for static functions

2015-11-09 07:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6826dff60223)

	* nsd/callbacks.c:
	- improve debugging output

2015-11-04 10:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4fe917d65353)

	* nsd/connio.c, nsd/crypt.c, nsd/fastpath.c, nsd/index.c, nsd/set.c,
	nsd/urlspace.c:
	- reduce implicit type conversions

2015-11-04 10:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (316e4b2aaefa)

	* doc/src/naviserver/ns_return.man, openacs-config.tcl, sample-
	config.tcl.in, tcl/fastpath.tcl:
	- added ability to optionally minify css and js files on the fly
	when gzipped content is requested. This is an extension of the
	gzip_static/gzip_refresh feature.

2015-11-03 19:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3dbe13976786)

	* nsthread/mutex.c, nsthread/nsthreadtest.c:
	- fix typos

2015-10-31 13:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c18955c60f5)

	* nsdb/db.h, nsdb/dbinit.c, nsdb/nsdb.h:
	- add const declarations

2015-10-31 13:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (95d1a627204f)

	* nsd/urlspace.c:
	- reduce implicit conversions

2015-10-31 13:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a30928a1d3c3)

	* nsdb/dbtcl.c:
	- remove debug output

2015-10-31 13:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ceab98b4013)

	* nsd/log.c:
	- reduce implicit conversions

2015-10-31 13:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (14ddf8e694ae)

	* doc/src/naviserver/ns_return.man:
	- fix typo

2015-10-26 11:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (016c2623b8d6)

	* nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/doc/mann/ns_db.man, nsdb/nsdb.h,
	openacs-config.tcl:
	Extend nsdb and document configuration options:
	- added logMinDuration: when sql logging is turned on, include only
	queries that take longer than the specified duration in the
	error.log (similar to log_min_duration_statement in PostgreSQL)
	- logMinDuration can be specified in the config file for every pool
	- logMinDuration can be altered dyamically via "ns_db logminduration
	..."
	- document nsdb configuration options in ns_db man page

2015-10-25 19:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (125957199c02)

	* include/ns.h, nsd/config.c, nsd/tcltime.c:
	- Ns_GetTimeFromString: provide API callable from config file to
	convert strings to ns_time (supporting "sec:usec" and "sec.fraction"
	formats)
	- fix "floating-point" format for Ns_ObjvTime(): 1.05 was interpreted
	like 1.5

2015-10-21 22:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d88714cd4f3)

	* nsdb/dbinit.c:
	- add aggregated sql times, suitable for delta monitoring

2015-10-21 22:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c929a0ccadb)

	* nsd/index.c:
	- reduce implicit conversions

2015-10-21 22:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ffd732cadd68)

	* nsd/log.c, tests/ns_log.test:
	- adapt regression test to new command line options

2015-10-21 14:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ec3604a5360)

	* doc/src/naviserver/ns_log.man, nsd/log.c, openacs-config.tcl:
	- when logcolorize is true, provide a potentially different color
	for the timestamp prefix based on ANSI color codes (parameters
	logprefixcolor and logprefixintensity)

2015-10-21 13:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (726805577fe7)

	* nsd/fastpath.c:
	- silence checker

2015-10-18 13:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (906257d0d90c)

	* nsd/log.c:
	- initialize extra severities with enabled=false

2015-10-17 19:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2cda927a89ef)

	* doc/src/naviserver/ns_log.man, nsd/log.c:
	New feature: optional colorization of error.log
	- all severities (system- or user-defined) have now "color" and
	"intensity" specified, which can be controlled via

	 ns_logctl severity severity-level ?-color color? ?-intensity
	intensity? ?bool?

	- reasonable default values for the color mapping are provided.
	- to enable colorization, set "logcolorize" in section "ns/parameters"
	to true
	- when viewing error.log file via less, use "less -r"

2015-10-17 18:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca02057736f6)

	* include/nsthread.h:
	- indent #ifdefs more consistently

2015-10-17 18:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0fbd0f84807b)

	* nsproxy/doc/mann/ns_proxy.man:
	- fix man entry

2015-10-17 18:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72b00159b1ff)

	* openacs-config.tcl:
	- colorize log per default

2015-10-16 13:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7279872bc230)

	* include/ns.h, nsd/index.c, nsd/sockfile.c:
	- reduce implicit conversions
	- add more parenthesis

2015-10-16 13:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4edf76972e6e)

	* nsd/conn.c:
	- access structure after assert

2015-10-16 13:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6657f9b1b41a)

	* nsd/sock.c:
	- fix test on invalid result

2015-10-16 13:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c13916c8cb29)

	* nsd/set.c:
	- remove unneeded comparison

2015-10-01 10:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (11016dbc7433)

	* nsd/cache.c, nsd/conn.c, nsd/fd.c, nsdb/dbinit.c:
	- move usage of pointers after assert() to reduce messages of static
	checkers
	- reduce implicit conversions

2015-09-29 14:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65a57dc4ef28)

	* nsd/connchan.c, nsd/connio.c, nsd/dns.c, nsd/fd.c, nsd/queue.c:
	- move operations with potential null pointers after asserts
	- improve cleanness of print formatters

2015-09-29 14:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5847072d2ab4)

	* nscgi/nscgi.c, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/cache.c:
	- move variable initializations after assert statements to silence
	static checker (sonarsrv)

2015-09-27 13:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9be7f4060db)

	* nsd/adpeval.c, nsd/driver.c, nsd/queue.c, nsd/tclvar.c:
	- improve cppcheck issues
	- add unlikely() for error cases
	- make ignoring of results more explicit
	- pass (char *)0 instead of NULL to varargs interface

2015-09-26 19:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3880b83b77a8)

	* nsd/driver.c:
	- reduce implicit conversions

2015-09-26 19:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02684dd5ad9d)

	* nsd/tclinit.c:
	- add const

2015-09-25 20:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d4c07c27bf3)

	* nsthread/reentrant.c:
	- replaced obsolete function 'asctime' by strftime

2015-09-25 20:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (291a352e6cee)

	* include/ns.h, nscgi/nscgi.c, nsd/dns.c, nsd/set.c:
	- allow NULL value in last argument of Ns_SetUpdate() and
	Ns_SetIUpdate
	- prefer bool over int for boolean values

2015-09-23 09:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57e7c4496c22)

	* doc/src/naviserver/ns_job.man, nsd/tcljob.c, nsd/tclsock.c:
	- use consistently Ns_ObjvTime for all "-timeout" parameters
	- add missing documentation for parameter "-timeout" of "ns_job
	configure"

2015-09-22 15:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (500a404f77dc)

	* nsd/fd.c:
	- don't compare integers with pointers

2015-09-19 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8afbe53b81fc)

	* nsd/urlspace.c:
	- add const declarations

2015-09-19 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (28dd48aaf5b8)

	* nsd/fastpath.c:
	- align function name with prototype

2015-09-19 11:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2b41ded7a59)

	* nsd/driver.c:
	- use standard function memchr() instead of home-brew strnchr

2015-09-19 10:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (67d339f7d7c2)

	* nsdb/db.h, nsdb/dbinit.c:
	- add const declaration
	- silence static checker

2015-09-19 10:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (40714be06ae2)

	* nsd/fd.c:
	- reduce flagged items from sonarsrv: _get_osfhandle(fd) returns
	since 2011 intptr_t; http://sonarsrv.spazioit.com:9000/component_iss
	ues?id=my%3Anaviserver#createdAfter=2015-09-07|createdBefore=2015-09
	-13|resolved=false;

2015-09-15 11:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (022f3fb85e28)

	* nsdb/doc/mann/ns_db.man:
	- update documentation

2015-09-15 11:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (464ca26ad2c8)

	* tests/test.nscfg:
	- use 127.0.0.1 instead of "localhost" for temporary web server
	during regression test

2015-09-15 09:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ced7a5ce44f7)

	* nsdb/dbinit.c:
	- include number of get-handle operations in [ns_db stats] to
	improve transparency on potential bottlenecks

2015-09-14 13:27 +0200  Zoran Vasiljevic  <zv@archiware.com>  (ddabd9a32d0a)

	* nsproxy/nsproxylib.c, tests/all.tcl, tests/ns_proxy.test:
	nsproxy/nsproxylib.c: fixed glitch in [ns_proxy config]
	tests/all.tcl: explicitly state Tcl8.5 package tests/ns_proxy.test:
	tests checking config options now know "-env"

2015-09-13 19:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4bd55e8b0467)

	* nsd/tclhttp.c:
	- include content-encoding, when determining binary content in http
	client requests

2015-09-13 14:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7f475aa8204)

	* include/ns.h, nsd/compress.c, nsd/connio.c,
	tests/ns_adp_compress.test:
	- fix bug in interaction between chunked encoding and gzip: when
	gzip is enabled, then it is necessary to write content even with 0
	bytes (last chunk) to make sure the gzip stream is flushed

2015-09-12 12:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba051202de49)

	* nsdb/dbinit.c, nsdb/doc/mann/ns_db.man:
	- include aggregated wait times for handles per pool in "ns_db
	stats" output

2015-09-12 11:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63a700b79a5c)

	* nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c,
	nsdb/doc/mann/ns_db.man, nsdb/nsdb.h:
	- Improved debug output for SQL: include runtime in log statements
	- added "nsdb stats":
	- fixed typos in comments and docmentation
	- bring ns_db subcommands in man page consistently into alphabetical
	order
	- prefer bool over int
	- add missing const declations

2015-09-11 15:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eacb52c53eb0)

	* nsd/tclinit.c:
	- reduce scope of variable

2015-09-11 14:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5e10e9fcebb5)

	* doc/src/manual/main-features.man:
	- more updates to documentation

2015-09-11 14:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a7a549fc967)

	* doc/src/naviserver/ns_normalizepath.man:
	- fix example in documentation

2015-09-11 14:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3753f91747dd)

	* nsdb/dbinit.c:
	- make per-handle log statement dependent on "verbose" member

2015-09-11 14:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5994aa976033)

	* openacs-config.tcl:
	- improve sample config file (add ns_logctl, more comments)

2015-09-09 12:17 +0200  Zoran Vasiljevic  <zv@archiware.com>  (aa989dde979e)

	* naviserver.rdf.in:
	Changed RDF repository hint from CVSRepository to HgRepository.

2015-09-07 18:10 +0200  Zoran Vasiljevic  <zv@archiware.com>  (402c94ad2de8)

	* nsproxy/doc/mann/ns_proxy.man, nsproxy/nsproxylib.c:
	nsproxy/nsproxylib.c: added passing env to slave from an NsSet

2015-09-07 16:04 +0200  Zoran Vasiljevic  <zv@archiware.com>  (f14045b3aa82)

	* nsd/fd.c, nsd/tclinit.c:
	nsd/fd.c: added Ns_(No)CloseOnExec implementation for Win32.
	nsd/tclinit.c: Tcl_CreateHashEntry needs valid "changed" arg.

2015-08-03 19:02 +0200  gustafn  <neumann@wu-wien.ac.at>  (7dd17a2cf070)

	* Merged in davidqc/naviserver (pull request #8)

	String length fix

2015-08-03 15:07 +0100  David Osborne  <david@qcode.co.uk>  (bae065fe25ed)

	* nslog/nslog.c:
	String length fix

2015-08-03 19:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6f449e23afe2)

	* merge

2015-08-03 18:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2fee91e2ad7d)

	* include/ns.h, nsd/mimetypes.c, nsd/set.c, nsd/tclhttp.c,
	tests/http.test, tests/test.nscfg:
	improve robustness of ns_http with post data:
	- determine binary transmission based on NsTclObjIsByteArray() (old)
	and mime-type (new) to provide a more robust solution when
	shimmering of tcl_objs happens.
	- provide API to determine whether a content type requires binary
	transmission
	- adding test cases for POST requests vis ns_http
	- provide configure parameter "listenurl" for testserver to ease
	portability between ns_http and ns_ssl tests

2015-08-02 16:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c75ca306d7a8)

	* tests/http.test:
	- match operations in register and unregister commands

2015-08-02 16:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (472e93a78909)

	* configure.ac:
	- distingusih tip version number from released one

2015-07-31 19:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c717b2ef919d)

	* nsd/event.c:
	- address size issue as flagged by sonarsrv

2015-07-30 19:57 +0200  gustafn  <neumann@wu-wien.ac.at>  (afae6e5f6f04)

	* Merged in davidqc/naviserver (pull request #7)

	Default directoryproc to _ns_dirlist regardless of directorylisting
	value

2015-07-30 11:43 +0100  David Osborne  <david@qcode.co.uk>  (46bc6027b475)

	* doc/src/naviserver/ns_return.man:
	directorylist doc update

2015-07-21 12:14 +0100  David Osborne  <david@qcode.co.uk>  (afd8de3e5bdc)

	* nsd/fastpath.c, tcl/fastpath.tcl:
	directoryproc defaults to _ns_dirlist regardless of directorylisting

2015-07-30 19:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0f70906c9429)

	* nslog/nslog.c:
	- fix logical error

2015-07-29 14:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aff6016e3b31)

	* nsd/tclfile.c:
	- Add The fallback for definition of L_tmpnam, since the fallback
	from Tcl was removed on 2015-07-15

2015-07-29 14:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (203e7e7957b9)

	* nsd/tclhttp.c:
	- handle binary data when "-body" is specified in ns_http command

2015-07-14 11:57 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a138a9d5ace2)

	* nslog/nslog.c:
	- add apache-style escaping in access log as well for other double-
	quoted fields depending on external input

2015-07-14 11:34 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d8f08adb14aa)

	* nslog/nslog.c:
	- escape special characters in query field of access log in apache
	style

2015-07-14 11:28 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d655e77e56e5)

	* nsthread/signal.c:
	- fix typo in comment

2015-07-09 17:46 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (514a1417f19c)

	* nsthread/signal.c:
	- fix definition order of NS_finalshutdown

2015-07-09 17:22 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2116eabda2ed)

	* nsd/tclhttp.c:
	- use always macro INT2PTR to convert integer to pointer

2015-07-09 17:16 -0500  gustafn  <neumann@wu-wien.ac.at>  (ca602ddd96c0)

	* include/ns.h:
	Merged in davidqc/naviserver (pull request #6)

	Header processing updates

2015-07-01 11:35 +0100  David Osborne  <david@qcode.co.uk>  (f44788aa0392)

	* nsd/tclhttp.c:
	Test for expected host header when keep_host_header is specified

2015-06-30 15:31 +0100  David Osborne  <david@qcode.co.uk>  (d456b1620667)

	* doc/src/naviserver/ns_http.man:
	Documentation update

2015-06-30 15:03 +0100  David Osborne  <david@qcode.co.uk>  (adacddffa050)

	* nsd/tclhttp.c:
	Move non-null assertion. Use bool rather than int.

2015-06-26 17:30 +0100  David Osborne  <david@qcode.co.uk>  (6f262c5e665a)

	* nsd/tclhttp.c:
	keep_host_header argument for HttpConnect

2015-06-25 15:49 +0100  David Osborne  <david@qcode.co.uk>  (1b12f1b8e7c8)

	* include/ns.h:
	Ns_SetIUpdate prototype

2015-06-24 14:40 +0100  David Osborne  <david@qcode.co.uk>  (115289d29cae)

	* nsd/return.c, nsd/set.c:
	- Ns_ConnUpdateHeaders to use case insensitive Update

2015-07-09 09:38 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (762b340f5709)

	* nsd/sockfile.c:
	- change member name drvPtr->options to drvPtr->opts

2015-07-09 09:32 -0500  Gustaf Neumann  <neumann@wu-wien.ac.at>  (688e4070d74d)

	* include/ns.h, nsd/sockfile.c:
	- Don't use TCP_CORK on UDP sockets

2015-07-02 10:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42d35a99db2c)

	* nsd/driver.c:
	- improve socket shutdown behavior for udp-based drivers

2015-06-22 09:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (575d50833d7e)

	* nscgi/nscgi.c:
	- add function prototype for Ns_ModuleInit()

2015-06-17 08:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (281950f5241b)

	* README:
	- improve README file (add more about installs from the repository,
	mention *-modules-tar file)

2015-06-17 08:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43e6f80d4fb3)

	* include/nsthread.h, nsd/nsd.h:
	- add missing "NS_" prefix before EXTERN (many thants to William
	Scott Jordan for pointing this out)

2015-06-11 11:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44f7e95e6dad)

	* merge

2015-06-11 11:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5569b261f752)

	* nsd/return.c, nsd/returnresp.c:
	- remove potential xss attack (mostly false positives) on error
	messages that are directly generated from user strings by naviserver
	- prefer lowercase html elements and attributes
	- quote html attributes (recommended by HTML 4.*)

2015-06-02 12:39 -0700    <dvrsn@diphi.com>  (7e23525e9a5d)

	* nsproxy/nsproxylib.c, tests/ns_proxy.test:
	ensure list nature of errorCode is preserved in proxy calls

	errorCode was being treated as a list element by passing it to
	Tcl_SetErrorCode; as a result the value would have an additional
	level of list quoting. Passing a Tcl_Obj to Tcl_SetObjErrorCode
	preserves its value as a list.

2015-05-05 10:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45dd01a6647c)

	* nsd/set.c:
	- make sure that size of ns_set is always less than maxSize, since
	set->fields[size] is used

2015-05-05 10:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (131cd7257d7f)

	* nsd/info.c:
	- don't return directly from switch statement

2015-05-05 10:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c4864ebe50cc)

	* nsd/form.c:
	- don't write block in a single line

2015-05-01 21:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86851f29ce7c)

	* nsd/tclmisc.c:
	- don't cast away const

2015-05-01 21:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72a7ebd16b20)

	* nsd/tclthread.c:
	- use FALLTHROUGH as pseudo comment, since "lint -fallthrough" did
	not work with pc-lint

2015-05-01 21:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07edc15abd5b)

	* nsd/tcltime.c:
	- remove implicit conversion

2015-05-01 21:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68bff2d5345f)

	* nsd/config.c, nsd/dstring.c, nsd/pathname.c, nsd/tclcallbacks.c:
	- remove assignment operation from boolean expression

2015-04-27 16:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4fb95c84ebe2)

	* nsd/tclobj.c:
	- don't cast away const

2015-04-24 11:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8ffab3876da0)

	* tests/ns_server.test:
	- remove debug output

2015-04-24 11:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (139bfe576b15)

	* nsd/crypt.c, nsd/queue.c, nsd/tcltime.c, nsd/urlencode.c:
	- reduce implicit conversions
	- add const declarations

2015-04-24 11:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9038db6bd5f6)

	* nsd/nsd.h:
	- white space change

2015-04-24 11:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (32b4300cc9b4)

	* include/ns.h, nsd/uuencode.c:
	- improve variable names (use inputSize instead of bufSize, which
	might refer to the output buffer size)
	- white space changes

2015-04-24 10:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5d123e94c0a)

	* include/ns.h, nsd/cookies.c, nsd/driver.c, nsd/tclobjv.c,
	nsd/urlencode.c, tests/cookies.test, tests/ns_writer.test:
	- removed Ns_ParseOptions() with defined types, use instead
	Ns_ParseObjv()
	- adapted regression test

2015-04-24 10:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9ea6625cd6aa)

	* nsd/tclobj.c:
	- clean compilation for clang 3.7

2015-04-23 11:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a893b687faa6)

	* include/ns.h, nsd/queue.c, nsd/tclobjv.c, tests/ns_server.test:
	- switched argument parsing for command "ns_server" to the standard
	Naviserver argv parsing (since this was fixed a few releases ago)
	- added converter (Ns_ObjvProc) Ns_ObjvServer
	- extended regression test

2015-04-23 09:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d8f8aee592f8)

	* nsd/queue.c:
	- merge

2015-04-23 09:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b86162fb365b)

	* tcl/nstrace.tcl-head: deleted file.
	* tcl/nstrace.tcl-head:
	- stop tracking a debug file

2015-04-23 08:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fd8fb9856c73)

	* tests/ns_server.test:
	- add test case for "ns_server"

2015-04-23 08:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbadd16088f2)

	* nsd/queue.c:
	- improve "signal lost" handling (timeout happens, but connPtr is
	provided). On some sites the previous approach was leading to a
	state stuck in a while in the error state.

2015-04-17 19:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3e2f39dbb85)

	* doc/src/naviserver/ns_sleep.man, doc/src/naviserver/ns_time.man,
	nsd/tcltime.c:
	- allow the synatx of the result of "ns_time format" to be used
	on input at every place, where ns_times are accepted

2015-04-22 14:33 -0700    <dvrsn@diphi.com>  (4265c21238fc)

	* nsd/queue.c:
	fix off-by-one error in ns_server

	NsTclServerObjCmd was incorrectly checking argc after parsing
	options. As a result, "ns_server -pool {}" (pool given, no
	subommand) would segfault.

2015-04-16 08:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d3930bff387)

	* nsd/return.c:
	- added const declaration

2015-04-16 08:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b5d34d725bec)

	* nsdbtest/nsdbtest.c:
	- added const declarations

2015-04-16 08:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b65b3aa316ca)

	* nsd/exec.c:
	- fix typo in WIN code

2015-04-13 10:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bca4dc06505c)

	* .hgtags:
	Added tag naviserver-4.99.7 for changeset 380de4a12557

2015-04-13 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ec1ff057a50)

	* .hgtags:
	Added tag naviserver-4.99.8 for changeset 5664e7d0813a

2015-04-13 10:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5664e7d0813a [naviserver-4.99.8])

	* .hgtags:
	Added tag naviserver-4.99.7 for changeset 20ece8458972

2015-04-13 10:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20ece8458972)

	* NEWS:
	- added release date to NEWS file

2015-04-13 09:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7abaad44e13d)

	* .hgtags:
	Added tag naviserver-4.99.8 for changeset 7350d17dc8f8

2015-04-13 09:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7350d17dc8f8)

	* NEWS:
	- updated NEWS

2015-04-13 09:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2bad90b3ea43)

	* README, configure.ac:
	- update version numbers to 4.99.8

2015-04-13 09:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c7ff43467b5)

	* nsd/tclmisc.c:
	- avoid potential access of string past null character

2015-04-10 20:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2507e729167)

	* tests/ns_image.test: new file.
	* doc/src/naviserver/ns_gifsize.man,
	doc/src/naviserver/ns_imgmime.man,
	doc/src/naviserver/ns_imgsize.man,
	doc/src/naviserver/ns_imgtype.man,
	doc/src/naviserver/ns_jpegsize.man,
	doc/src/naviserver/ns_pngsize.man, tests/ns_image.test,
	tests/ns_md5.test:
	- added 24 testcases for image handling (we have now more than 1000
	test case in total)
	- modernize Tcl in documentation pages for image handling, uses
	see_also for pointing to other pages.

2015-04-10 20:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3022ad8e9d8c)

	* nsd/nsd.h, nsd/server.c:
	- move "compresspreinit" to the server configuriation, same place as
	ompressenable, compresslevel, and compressminsize.

2015-04-10 19:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (575b5a35f811)

	* nsd/tclimg.c:
	- ns_imgsize returned an error where it should return success and
	widht and heith returned as 0 (according to documentation)

2015-04-10 10:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0e11e7c89c10)

	* include/nsthread.h, nsd/nsd.h, nsd/nsmain.c, nsd/unix.c,
	nsthread/signal.c, nsthread/tls.c:
	- added global variable NS_finalshutdown to avoid freeing of thread
	local storage on final shutdown, since this seems to be the major
	source for crashes during shutdown.

2015-04-10 09:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (19af0bfa6e86)

	* nsd/server.c, openacs-config.tcl, sample-config.tcl.in:
	- cosmetics (spacing, preferring NS_TRUE, moving parameter
	descripting to the right section

2015-04-09 07:24 -0700    <dvrsn@diphi.com>  (743c7f284d0a)

	* nsd/server.c, sample-config.tcl.in:
	add compresspreinit config parameter

	Setting this parameter (default is false) will cause the compression
	stream buffers to be allocated and initialized at server startup.
	Without it, they will be allocated and initialied as needed. This
	drops the memory footprint of a server with a default config from
	~40M to ~5M

2015-04-09 11:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4648054385db)

	* nscgi/doc/mann/nscgi.man, nscgi/nscgi.c:
	- added ability to debug configuration via "ns_logctl severity
	Debug(cgi) on"
	- improved documentation
	- added nonnull declarations
	- replaced SetUpdate() by Ns_SetUpdate(), since no values are passed
	as NULL (tested via assertion)

2015-04-07 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68029297fcad)

	* doc/src/naviserver/ns_md5.man: new file.
	* NEWS, doc/src/naviserver/ns_crypt.man,
	doc/src/naviserver/ns_md5.man, doc/src/naviserver/ns_sha1.man:
	- add missing man page for ns_md5
	- add cross-refs for crypto functions
	- update NEWS

2015-04-06 16:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a66f3d892b08)

	* NEWS, README, configure.ac:
	- updated version number, README and NEWS for release candidate

2015-04-06 15:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7808bea8567)

	* configure.ac:
	- Improved rpath handling in configure.ac for Linux distros, where
	TCL_CC_SEARCH_FLAGS and TCL_LD_SEARCH_FLAGS are set empty, like
	e.g.Debian (Many thanks to David Osborne for the recommendation)

2015-04-06 15:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4230345c76e4)

	* nsd/adpeval.c:
	- add assertion for dynamic array indexing

2015-04-01 19:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d06e6077034d)

	* tests/ns_parseargs.test:
	- improve robustness of tests

2015-04-01 19:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (99e13e1336f9)

	* nsd/tclmisc.c:
	- ns_sha: removed (and commented) a seemingly unneeded memset()

2015-04-01 18:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (36aa11be7408)

	* tests/testserver/pages/ns_poweredby.png: new file.
	* nsd/tclmisc.c, tests/ns_md5.test, tests/ns_sha1.test,
	tests/testserver/pages/ns_poweredby.png:
	- add binary support to ns_sha1 to be feature compatible to ns_md5
	- add test cases for check-summing on binary files
	- reduce verbosity

2015-04-01 18:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5838fdcd920)

	* nsd/queue.c:
	- improve wording in comment

2015-04-01 18:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dfb8f42b6b9d)

	* nsd/event.c:
	- revert +1 change, was not necessary

2015-04-01 15:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fedce0093e52)

	* nsd/tclmisc.c, nsd/tclresp.c, tests/ns_md5.test:
	- ns_md5 added support for binary data
	- extended regression test

2015-04-01 10:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c49da9a8d4eb)

	* tests/ns_md5.test: new file.
	* nsd/tclmisc.c, tests/ns_md5.test:
	- fix long existing but so far undetected bug in ns_md5: confusion
	about uint32_t vs. uint8_t
	- cross checked results with other md5 implementations
	- added regression test set for md5

2015-04-01 10:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1365e0619d13)

	* include/nsthread.h, nsd/nsmain.c:
	- improve startup message about FD_SETSIZE and hard/soft limits on
	number of files
	- improve indentation in nsthread.h

2015-03-29 12:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8501f29be44a)

	* nsd/log.c:
	- prefer single return of function
	- protect against potential buffer overruns

2015-03-29 12:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8ec6a10208b0)

	* nsd/fastpath.c, nsd/tcljob.c:
	- no need to pass empty argument vector

2015-03-28 18:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f422b2b4bb87)

	* nsdb/dbinit.c:
	- switch from db-specific flag fVerbose to Ns_LogSqlDebug to
	generalize notification handling (as already done in nsdbpg)

2015-03-28 16:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3782968e607f)

	* nsd/event.c:
	- fix off-by-one error on array size

2015-03-27 16:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1176451c9dda)

	* nsd/queue.c:
	- address possible reac condition

2015-03-27 16:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39768235cbba)

	* nsd/driver.c:
	- reduce warning during regression test

2015-03-25 10:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43c46eb437e3)

	* nscp/nscp.c:
	- add hack to address mysterical problem with static checker PC
	Lint, leading previously to an internal error

2015-03-25 10:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e1037deeb24)

	* nsd/conn.c:
	- add suffix to avoid implicit conversion

2015-03-23 15:02 +0100  Victor Guerra  <vguerra@gmail.com>  (9a9f2a73c737)

	* nsd/return.c:
	parameter type was renamed to mimeType

2015-03-16 19:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90e207ba5036)

	* include/ns.h, nsd/return.c, nsd/tclresp.c:
	- prefer variable name "mimeType" over "type" for mime types.

2015-03-15 16:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05cb1af81c77)

	* nsd/urlencode.c:
	- avoid c90 identifiers starting with str[a-z]

2015-03-15 16:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6eb3dbb4f29c)

	* nsd/tclvar.c:
	- align prototype with function definition

2015-03-15 16:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec1aae0931cc)

	* nsd/tclobjv.c:
	- avoid "bool" as variable name
	- don't write if-statements as a single line

2015-03-15 16:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bf10f5ef83f9)

	* nsd/tclmisc.c:
	- use char datatype when assiging to a char variable

2015-03-15 16:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa3fb8f3f427)

	* nsd/request.c:
	- don't use for loops without a braced body

2015-03-15 16:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (770cb0a68333)

	* nsd/nsconf.c:
	- reduce implicit signed/unsigned conversions

2015-03-15 16:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1992153adc18)

	* nsd/driver.c:
	- provide more hints for error diagnosis when DriverDebug is
	activated

2015-03-15 16:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5e05c53bc472)

	* nsd/crypt.c:
	- reduced implicit signed/unsigned conversions

2015-03-15 16:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd63223c462e)

	* nscgi/nscgi.c, nsd/auth.c:
	- don't use for loops without a braced body

2015-03-15 16:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5419cace61bd)

	* include/ns.h:
	- align prototype names and function names

2015-03-15 15:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (84d4e9ffad0e)

	* tests/http.test:
	- make test more robust

2015-03-12 03:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (993caced9223)

	* openacs-config.tcl:
	- update sample nsssl configuration

2015-03-11 11:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fcc53c397b31)

	* include/ns.h, nsd/sockfile.c, nssock/nssock.c:
	- prefer boolean and NS_TRUE/NS_FALSE over int and 0/1

2015-03-11 10:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (632ece9633d1)

	* nsd/sockfile.c:
	- fix initialization (many thanks to David Osborn for the catch)

2015-03-04 04:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (096278955dc1)

	* include/Makefile.global.in:
	- remove redundancy from CFLAGS, come closer to what's probably
	intended by tcl.m4

2015-03-04 03:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (769c95b6913a)

	* nsd/tclvar.c:
	- Fixed bug, where one thread frees a nsv-array, but an internal
	representation of a Tcl_Obj for this array in another thread
	contains still a pointer to the freed array. The bug was introduced
	in Nov 2014, when fixing the memory leak of unset nsv-array
	structures. After the change we use now a less agressive caching by
	just storing the bucket pointer in the internal representation of
	the Tcl_Obj.
	- Prefer boolean and NS_TRUE/NS_FALSE over int and 1/0
	- Use lowercase unsigned suffix

2015-02-25 12:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e97df2a194d4)

	* nsd/urlencode.c, tests/ns_urlencode.test:
	- fix bug reported by Wolfgang Winkler, when " ns_urldecode --" is
	called.
	- switched ot regular argv parser, since reasons for using alternate
	one is fixed for a while (useing caching of internal rep only for
	non-shared tcl-objs)
	- extended regression test

2015-02-25 00:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc8b19ffc617)

	* nsd/conn.c, tests/ns_conn.test:
	- don't crash on [ns_conn content] when there is no content
	- extend regression test

2015-02-23 19:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (694b8fd9533e)

	* .hgtags:
	Added tag naviserver-4.99.7 for changeset 380de4a12557

2015-02-23 18:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (380de4a12557 [naviserver-4.99.7])

	* NEWS:
	- fixed typos and polished text

2015-02-23 18:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b643210a5d36)

	* NEWS:
	- update NEWS file

2015-02-23 18:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6025f34c232)

	* doc/src/naviserver/ns_connchan.man: new file.
	* doc/src/naviserver/ns_connchan.man:
	- add uncommitted file

2015-02-23 18:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6344391f4d70)

	* README, configure.ac:
	- bumped version numbers

2015-02-23 18:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f64b26ac835)

	* include/ns.h:
	- make path const (since it is returned usually as const)

2015-02-21 19:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1fc6ec0749a4)

	* include/nsthread.h, nsthread/tls.c:
	- relax constraint that 2nd argument of Ns_TlsSet() has to be non-
	null

2015-02-19 20:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9116c551193a)

	* nsdb/Makefile:
	- whatspace change

2015-02-19 20:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa58c6640cf1)

	* doc/src/man.css:
	- sue ccourier forn when displaying results of [const ...] in
	documentation

2015-02-19 20:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (645a25655a17)

	* doc/src/manual/tcl-lib-file.man, nscgi/doc/mann/nscgi.man:
	- improve docuemntation

2015-02-15 15:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (084e0ea0b988)

	* doc/src/manual/main-standards.man:
	- fix typesetting
	- remove obsolete content (e.g. concerning CVS)
	- use examples from existing code basis

2015-02-15 14:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25bc913e4e16)

	* nscgi/Makefile, nscp/Makefile, nsdb/Makefile, nsdbtest/Makefile,
	nslog/Makefile, nsperm/Makefile, nssock/Makefile:
	- use documented MODOBJS instead of older-style OBJS in Makefiles

2015-02-10 09:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f0b5dd52817)

	* Makefile, include/nsthread.h, nsd/config.c, nsd/driver.c,
	nsd/return.c, nsd/tclobj.c, nsd/unix.c:
	- added compatibility macro PRIuz in symmetry to PRIdz. the former
	is for size_t, the latter for sssize_t
	- added length fields for *scanf* operations to avoid possible
	internal buffer overflows in certain versions of libc
	- added --verbose flag for cppcheck

2015-02-10 09:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (66197d7b4457)

	* nsd/tclthread.c:
	- reduce variable scope

2015-02-10 08:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e20600db28b)

	* nsd/uuencode.c:
	- make sure to initialize array "chars"

2015-02-08 15:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6160545593a8)

	* nsd/compress.c, nsd/httptime.c, nsd/lisp.c, nsd/tclxkeylist.c:
	- fixing potentially undefined behavior
	- adding const

2015-02-08 13:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2bb565c17b8e)

	* nsd/watchdog.c:
	- remove obsolete undefine operation

2015-02-08 11:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (405702f87c5a)

	* doc/src/manual/tcl-libraries.man:
	- improve documentation

2015-02-01 16:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c563d9268aa)

	* nsd/log.c:
	- use unsinged type for bit operations

2015-02-01 16:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12450ccde8de)

	* nsd/conn.c:
	- fix duplicate semicolon

2015-01-31 14:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44cb6775b598)

	* nsd/adpparse.c:
	- improve comment density

2015-01-31 13:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bf80aae97971)

	* nsd/connchan.c:
	- improve comment density

2015-01-31 13:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8887f6d2daa5)

	* nsd/tcltime.c:
	- improve comment density

2015-01-31 13:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (edc2eacb002b)

	* doc/src/naviserver/ns_geturl.man, nsd/urlopen.c:
	- mark ns_geturl as deprecated in favor of ns_http
	- improve comment density

2015-01-30 13:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8963eefc158d)

	* tests/encoding.test, tests/http.test, tests/test.nscfg:
	- add additional test cases for http encodings (including curl-based
	testcase, when curl is available)
	- finish the default charset of utf-8 (adjust encoding testcases)

2015-01-30 13:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b95a27d3091)

	* doc/src/naviserver/ns_conn.man, nsd/conn.c:
	- bugfix and compatibility with aolserver: return for "ns_conn
	content" per default result in the charset of the connection
	- add for "ns_conn content" the flag "-binary" to return the raw byte
	array

2015-01-29 09:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (19bedd36e6b8)

	* nsd/driver.c:
	- remove unneeded operations in driver loop, add likely/unlikely

2015-01-29 09:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55771f605975)

	* tests/http.test, tests/test.nscfg:
	- add tests for encoding in "ns_conn content"

2015-01-29 09:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (da7db2b193c4)

	* tests/ns_adp_compress.test:
	- fix typo

2015-01-29 09:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e52876985da)

	* nsd/dns.c:
	- reduce verbosity

2015-01-21 11:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (60ebb1556bad)

	* nsd/cls.c:
	- use INT2PTR macro for integer to pointer conversion

2015-01-16 14:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c1e6cb6838b)

	* include/nsthread.h:
	- win32: use GetCurrentProcessId() instead of _getpid() to return
	DWORD instead of int

2015-01-16 13:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0947a4d5dfce)

	* nsd/nsmain.c, nsd/random.c:
	- don't apply plain #if on undefined preprocessor variable

2015-01-13 09:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4dba78067c4c)

	* nsd/return.c:
	- reduce implicit conversions
	- improve variable names
	- improve comment
	- prefer lower case type suffix

2015-01-12 19:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8b0fac86cee)

	* nssock/nssock.c:
	- improve comments

2015-01-12 19:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8e7860b36381)

	* nsd/driver.c:
	- fix extra headings handling

2015-01-12 09:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97f15d6047d2)

	* include/nsthread.h, nsd/adpcmds.c, nsd/crypt.c, nsd/dns.c,
	nsd/driver.c, nsd/exec.c, nsd/nsd.h, nsd/request.c, nsd/return.c,
	nsd/tclhttp.c, nsd/urlopen.c:
	- reduce implicit conversions

2015-01-12 09:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a4a775a77cb0)

	* nsthread/winthread.c:
	- align name to posix

2015-01-10 19:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0e096b4a906a)

	* include/ns.h, include/nsthread.h, nsd/tclmisc.c:
	- the macro HAVE64 was never initialized.
	- rename HAVE64 to HAVE_64BIT to follow naming conventions more
	closely

2015-01-10 13:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (520fd1a3724e)

	* nsd/crypt.c, nsd/nswin32.c, nsd/urlencode.c:
	- recast result of <<
	- adding const properties

2015-01-10 13:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (db875410efed)

	* nsd/tclimg.c:
	- recast result of <<
	- adding non-null assertions
	- adding const properties

2015-01-10 12:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef5584e9d7fb)

	* nsd/tclmisc.c:
	- improve locality
	- don't declare variables after assert()

2015-01-10 12:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7542fdda1a5a)

	* nsd/uuencode.c:
	- recast result of << operation

2015-01-10 12:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f712e8cc90bf)

	* tests/ns_thread.test:
	- added test for "ns_thread handle"

2015-01-09 10:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (213127a11736)

	* include/ns.h, nsd/tclmisc.c:
	- adding non-null assertions
	- removing unneeded casts
	- adding const properties
	- adhere to function naming conventions
	- put macro values into parenthesis

2015-01-07 11:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d615b74c025)

	* nsd/tclhttp.c:
	- fix freshly introduced bug while eliminating write operations to
	const strings

2015-01-07 10:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c4f1d414ce91)

	* nsd/queue.c:
	- add trailing dash

2015-01-07 10:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c8150d07cb4)

	* nsd/tclthread.c:
	- try to silence pc-lint the fseudo comment
	- add missing comma

2015-01-05 13:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fd3ac3d11658)

	* doc/src/naviserver/ns_thread.man:
	- improve markup and wording

2015-01-05 13:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (949c43d151d4)

	* doc/src/naviserver/ns_thread.man, nsd/tclthread.c, tcl/nstrace.tcl,
	tests/ns_cache.test, tests/ns_thread.test:
	- added an option "-name" to "ns_thread begin" and "ns_thread
	begindetached"
	- marked redundant names of subcommands in ns_thread as deprecated
	ns_thread begin -> ns_thread create ns_thread getid -> ns_thread id
	ns_thread join -> ns_thread wait ns_thread get -> ns_thread handle
	- updated documentation

2015-01-05 10:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (515fb538cfcd)

	* include/ns.h, nsd/conn.c, nsd/connchan.c, nsd/connio.c,
	nsd/driver.c, nsd/nsd.h, nsd/queue.c, nssock/nssock.c:
	- prefer bool over int (make management of keep-alive status more
	explicit)

2015-01-05 10:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (926ea88267b0)

	* nsd/uuencode.c:
	- recast after "<<" operation (MISRA 10.5)

2015-01-04 12:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25a288448652)

	* nsd/nsd.h, nsd/queue.c, nsd/tcljob.c, nsthread/cslock.c,
	nsthread/mutex.c, nsthread/rwlock.c, nsthread/sema.c,
	nsthread/thread.h:
	- use consistently uintptr_t for nextids

2015-01-04 12:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ceb90aa47b04)

	* nsproxy/nsproxy.h, nsproxy/nsproxylib.c:
	- add const declarations

2015-01-04 12:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c6cc40f892fa)

	* nsperm/nsperm.c:
	- prefer boolean expression

2015-01-04 12:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a189f928dfd)

	* doc/src/manual/tcl-libraries.man:
	- improve documentation

2015-01-03 14:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2adae78d8590)

	* doc/src/naviserver/ns_geturl.man:
	- documentation fix for ancient parameter passing to functions
	registered via ns_register_proc

2015-01-03 14:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (098db911d18b)

	* doc/src/manual/tcl-overview.man:
	- various more documentation fixes for ancient parameter passing to
	functions registered via ns_register_proc

2015-01-03 12:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b1ab73a7541c)

	* doc/src/manual/tcl-libraries.man:
	- documentation fix for ancient parameter passing to functions
	registered via ns_register_proc

2015-01-03 12:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2955c7dbe37a)

	* doc/src/manual/tcl-libraries.man:
	- improve documentation

2015-01-03 12:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c9a54ed5949)

	* nsd/init.tcl:
	- there is no evident need for using "eval"

2015-01-02 11:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba536a37d2df)

	* include/ns.h, nsd/connchan.c, nsd/cookies.c, nsd/fastpath.c,
	nsd/nswin32.c, nsd/sockcallback.c, nsd/tclresp.c, nsthread/thread.c:
	- reduce implicit conversions
	- add const property
	- reduce variable scope
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2015-01-01 13:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c96afbd05dc1)

	* include/nsthread.h, nsd/tclthread.c, nsthread/pthread.c,
	nsthread/thread.c, nsthread/thread.h, nsthread/tls.c,
	nsthread/winthread.c:
	- make TclThread more robust
	  * fix crash when a thread was created with "ns_thread begindetached",
	but an error occurred during startup)
	  * fix memory management for TclThread by moving TclThreadArg into
	thread local storage
	  * provide the new call NsThreadShutdownStarted() to handle race
	conditions in tls cleanup during thread shutown
	- prefer bool over int for boolean variables
	- use unsigned variables/values for flags

2014-12-31 18:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d66e747fc65)

	* nsd/connchan.c: new file.
	* nsd/connchan.c:
	- add missing file

2014-12-31 17:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (82f04ffc5c4d)

	* doc/src/naviserver/ns_chan.man,
	doc/src/naviserver/ns_sockcallback.man, include/ns.h, nsd/Makefile,
	nsd/nsd.h, nsd/request.c, nsd/tclcmds.c, nsd/tclinit.c,
	nsd/tclresp.c, nsdb/doc/mann/ns_db.man, nssock/doc/mann/nssock.man,
	tests/ns_conn.test:
	- first implementation of ns_connchan

2014-12-23 11:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b7f9ce822a61)

	* nsd/sockcallback.c:
	- make sure to have diff always initialized

2014-12-23 11:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab202b2f2e12)

	* nsd/tclsock.c:
	- reduce variable scope

2014-12-23 10:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bef9cc3ea3dc)

	* nsd/sockcallback.c, nsdb/dbinit.c, nsdb/nsdb.h:
	- add const declarations for (Ns_Time *)

2014-12-23 10:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d0d920733f6b)

	* nsd/return.c:
	- improve robustness of code

2014-12-23 10:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (52b3962c6860)

	* nsd/sockcallback.c:
	- remove useless variable

2014-12-23 10:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (686c9cc203ae)

	* nsd/cookies.c:
	- reduce variable scopes

2014-12-20 19:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (287432c4fadc)

	* - merge

2014-12-20 19:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf4b825432b2)

	* doc/src/naviserver/ns_sockcallback.man, include/ns.h, nsd/conn.c,
	nsd/nsd.h, nsd/nswin32.c, nsd/queue.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tclsock.c,
	nsd/unix.c, tests/ns_conn.test:
	- remove hard-coded sizes of ip-addresses and replace it by
	NS_IPADDR_SIZE
	- fix incorrect result of "ns_conn protocol" (returned empty"
	- extend regression test
	- provide new function NsTclAllocateInterp(NsServer *) in addition to
	Ns_TclAllocateInterp(char *server) to reduce string base server
	lookups
	- use Ns_Time for timeouts instead of int/long
	- let Ns_SockCallbackEx(), Ns_SockCancelCallbackEx() return optionally
	the name of the associated thread
	- use bool instead of int as last argument of ns_sock_set_blocking()

2014-12-20 19:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a9c29e033bc)

	* nsd/driver.c, nslog/nslog.c, nsperm/nsperm.c:
	- use Tcl_DStringResult instead of AppendResult

2014-12-20 16:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c32e653b116e)

	* nsd/crypt.c:
	- reduce implicit signed/unsigned conversions

2014-12-20 16:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76117bc80020)

	* nsd/tcltime.c:
	- add nonnull assertions

2014-12-20 16:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5c3a87341a8)

	* nsdb/dbtcl.c:
	- fix typo

2014-12-20 16:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7b2fad1206c)

	* nssock/nssock.c:
	- add nonnull assertions

2014-12-20 16:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc98e01c59f2)

	* nssock/nssock.c:
	- add editor hints

2014-12-20 11:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1b3087c06d7f)

	* nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/doc/mann/ns_db.man, nsdb/nsdb.h:
	- allow time interval of timeout for "ns_db gethandle" to be
	specified with second factions (usual ns_time format)

2014-12-20 11:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2eebcb5beb7)

	* doc/src/naviserver/ns_time.man:
	- document "ns_time format"

2014-12-20 10:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d18ec860c80e)

	* nsd/tcljob.c:
	- make threadpool timeout an Ns_Time (as it is the case for most
	other timeout values)

2014-12-18 13:13 -0800    <dvrsn@diphi.com>  (7bbce535f95e)

	* nsd/init.tcl:
	fix setting of private/shared in ns_module

2014-12-18 10:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7678f0ef7ec0)

	* nsd/init.tcl:
	- move network module filtering to the front to avoid double loading
	of tcl modules (many thanks to William Scott Jordan for the fix)

2014-12-13 20:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c716a229c85b)

	* nsthread/memory.c:
	- don't nest the malloc in memcpy()

2014-12-13 19:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e65933b46155)

	* nsd/adpeval.c, nsd/adprequest.c, nsd/cookies.c, nsd/dns.c,
	nsd/fastpath.c, nsd/pathname.c, nsd/range.c:
	- move assignments out of if-conditions

2014-12-13 19:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f18227b2e289)

	* nsd/cookies.c, nsd/nsmain.c:
	- don't cast complex expressions

2014-12-13 19:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb9cbbf916aa)

	* nsd/httptime.c:
	- don't cast complex expression

2014-12-13 17:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ab1311322ee)

	* nsd/crypt.c:
	- reduce signed/unsigned conversions

2014-12-13 17:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02029222327d)

	* nsd/config.c:
	- remove dead assignment

2014-12-13 17:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6409c6efb15c)

	* nsd/limits.c:
	- simplify macros

2014-12-13 16:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9726eabd08fe)

	* nsd/log.c:
	- don't use old-style prototypes

2014-12-11 11:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be63bf8023a2)

	* nsd/cache.c, nsd/crypt.c:
	- reduce probibited operations with plain chars
	- reduce implicit conversions

2014-12-11 11:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f136a4c052d3)

	* nsd/driver.c:
	- white space change: remove trailing spaces, replace tabs by
	spaces, prefer suffix "u" over "U"

2014-12-11 11:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c6b63ef6f4a)

	* nsd/queue.c:
	- deleted unneeded code
	- fix spelling in comments

2014-12-10 12:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (474114999d7d)

	* nsd/nswin32.c, nsd/queue.c, nsd/sock.c, nsd/tcltime.c,
	nslog/nslog.c:
	- reduce implicit signed/unsigned conversions

2014-12-10 12:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (80806ea44c0a)

	* include/ns.h, nsd/cls.c, nsd/config.c, nsd/encoding.c, nsd/listen.c,
	nsd/modload.c, nsd/nsd.h, nsd/op.c, nsd/sls.c, nsd/tclcmds.c,
	nsd/unix.c, nsd/urlspace.c:
	- removed declaration of not used symbols NsCloseAllFiles(),
	NsStopSockCallbacks(), NsStopScheduledProcs(), NsGetBuf(),
	NsUrlSpecificWalk()
	- complete adding of nonnull constrains in nsd.h

2014-12-10 12:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (644ce52679ce)

	* nsd/log.c:
	- silence checker about possible initialized value in error branches
	- fix indentation

2014-12-10 11:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05ef1b0b6dae)

	* include/ns.h, nsd/binder.c, nsd/config.c, nsd/info.c, nsd/limits.c,
	nsd/nsd.h, nsd/nsmain.c, nsd/queue.c, nsd/server.c, nsd/tclinit.c,
	nsd/tclthread.c:
	- add nonnull constraints to binder.c, config.c, limits.c
	- add more const declarations

2014-12-09 12:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (481375f2a167)

	* nsd/driver.c, nsd/filter.c, nsd/mimetypes.c, nsd/nsd.h, nsd/op.c,
	nsd/pathname.c, nsd/request.c, nsd/sched.c, nsd/sockcallback.c,
	nsd/url2file.c:
	- add nonnull constraints

2014-12-09 01:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b895aa34c48)

	* include/ns.h, nsd/adprequest.c, nsd/cls.c, nsd/connio.c,
	nsd/crypt.c, nsd/httptime.c, nsd/set.c, nsd/sls.c, nsd/tclobjv.c,
	nsd/tclsock.c, nsd/tcltime.c, nsd/tclvar.c, nsd/urlopen.c,
	nsd/urlspace.c:
	- reduce implicit signed/unsigned conversions

2014-12-09 00:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ce4dfa629bc)

	* nsd/queue.c:
	- add const declarations

2014-12-09 00:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ffcaa96146a2)

	* nsd/log.c:
	- leave switch statement via break, and not via return

2014-12-09 00:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d998f785dca2)

	* nsd/driver.c:
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1

2014-12-09 00:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca10c01c150a)

	* include/ns.h, nsd/binder.c:
	- relax nonnull constraints for Ns_SockListenUdp
	- improve documentation

2014-12-08 15:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ffdfc47b9aa)

	* include/ns.h, nscgi/nscgi.c, nsd/exec.c, nsd/nswin32.c, nsd/queue.c:
	- add const declaration which become possible due to last changes

2014-12-08 15:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d6cb126a0ff)

	* nsd/conn.c:
	- don't cast away const

2014-12-08 15:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (211ba99a1ca0)

	* nsd/binder.c:
	- ajust comment style

2014-12-08 15:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b59667f3f35)

	* nsd/tclinit.c:
	- make enumeration in case statement complete

2014-12-08 15:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f89a6f63f1f)

	* nscp/nscp.c:
	- align with protoype names

2014-12-08 00:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (094336d54fa0)

	* include/ns.h, nsd/binder.c, nsd/fd.c, nsd/listen.c, nsd/proc.c,
	nsd/quotehtml.c, nsd/return.c, nsd/sched.c, nsd/sock.c,
	nsd/sockfile.c, nsd/tclcallbacks.c, nsd/tclenv.c, nsd/tclfile.c,
	nsd/unix.c:
	- add nonnull assertions (finishing all prototypes from ns.h)

2014-12-07 20:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (91318b0a915e)

	* include/ns.h, nsd/lisp.c, nsd/listen.c, nsd/pathname.c,
	nsd/tcltime.c:
	- add nonnull assertions in lisp.c, listen.c, pathname.c and
	tcltime.c

2014-12-07 20:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (21eb8946c165)

	* include/ns.h, nsd/dstring.c, nsd/index.c:
	- add nonnull assertions in dstring.c and index.c

2014-12-07 20:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03bdcb0973a5)

	* nsd/sockcallback.c, nsd/tclsock.c:
	- fix condition in tclsock
	- no need to iterate over callbacks when ns_poll() returns 0
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1

2014-12-07 15:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10d940ece51f)

	* nsd/random.c:
	- fix random calculation based on arc4random()

2014-12-07 13:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ae92789d8c7)

	* doc/src/naviserver/ns_base64decode.man,
	doc/src/naviserver/ns_base64encode.man,
	doc/src/naviserver/ns_uuencode.man:
	- fix wrong command name
	- improve linkage between related commands

2014-12-06 18:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1267c8822e3)

	* doc/src/naviserver/ns_log.man:
	- update documentation for ns_logtcl

2014-12-06 14:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f1a22b06bf56)

	* nsd/conn.c, nsd/dns.c, nsthread/mutex.c:
	- minor cleanup

2014-12-06 13:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0369cc2275d7)

	* include/ns.h, nsd/crypt.c, nsd/dns.c, nsd/event.c, nsd/exec.c,
	nsd/uuencode.c:
	- add nonnull assertions to crypt.c, dns.c, event.c, exec.c,
	uuencode.c
	- add const declarations in crypt.c, dns.c, event.c, exec.c,
	uuencode.c

2014-12-06 13:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (73be7f36c627)

	* include/ns.h, nsd/cookies.c:
	- add nonnull assertions to cookies.c
	- add const declarations in cookies.c

2014-12-06 12:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f9222041b94)

	* include/ns.h, nscgi/nscgi.c, nsd/adpcmds.c, nsd/compress.c,
	nsd/conn.c, nsd/crypt.c, nsd/driver.c, nsd/exec.c, nsd/fastpath.c,
	nsd/form.c, nsd/httptime.c, nsd/log.c, nsd/nsconf.c, nsd/nswin32.c,
	nsd/request.c, nsd/tclenv.c, nsd/tclinit.c, nsd/tclmisc.c,
	nsd/tclxkeylist.c, nsd/uuencode.c, tests/ns_log.test:
	- add nonnull assertions to conn.c
	- fix wrong placement of function names in ns.h
	- add const declarations in conn.c
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1
	- reduce implicit signed/unsigned conversions
	- reduce assignments in conditional expressions
	- fix api documentation bug

2014-12-05 15:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6f1a3c886271)

	* nsd/info.c:
	- fix freeing of dstring: Tcl_DStringResult() clears the dstring
	automatically

2014-12-05 14:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f4bac6a6227c)

	* nsd/log.c:
	- added experimental log statistics

2014-12-05 13:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9aa79f1844c8)

	* include/ns.h, nsd/log.c:
	- add nonnull assertions

2014-12-05 13:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e4fb0af0e417)

	* include/ns.h, nsd/log.c:
	- use boolean datatype for log severity enabled

2014-12-05 11:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (53f8150430e9)

	* nsd/listen.c:
	- fix potentially uninitialized variable

2014-12-05 10:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b1d2c09ffe35)

	* nscgi/nscgi.c, nsd/sockfile.c, nsdb/dbutil.c:
	- make ignoring of arguments explicit
	- reduce implicit signed/unsigned conversions

2014-12-05 10:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (abaef7c88a79)

	* nsd/limits.c, nsd/listen.c, nsd/nsd.h, nsd/queue.c:
	- use same datatype for timeout (long) as in time structure
	- use boolean for shutdown and wakeup flags

2014-12-05 10:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90b60a0afd6e)

	* nsd/listen.c, nsd/sockcallback.c:
	- handle results of Ns_SockProc

2014-12-05 10:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0fd5b4850a26)

	* nsd/sockcallback.c:
	- document cases, where result of Ns_SockProc are ignored
	- use NS_TRUE/NS_FALSE instead of numeric values when checking results
	of Ns_SockProc

2014-12-05 10:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a5bb186fc787)

	* include/ns.h, nscp/nscp.c, nsd/listen.c, nsd/returnresp.c,
	nsd/sock.c, nsd/tclsock.c:
	- Ns_SockProc returns NS_TRUE/NS_FAIL; therefore, return type should
	bool

2014-12-05 09:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (921792fca3a3)

	* nsd/binder.c, nsd/request.c:
	- make sure to use NS_SOCKET and NS_INVALID_SOCKET instead of int/-1

2014-12-05 09:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (80557fae21f6)

	* nsd/form.c:
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1

2014-12-05 08:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4287d048e716)

	* nsd/request.c:
	- get rid of undefined behavior
	- prefer boolean expressions
	- add cons property

2014-12-04 20:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b5fb12bcc77)

	* nsd/crypt.c:
	- make Ns_Encrypt threadsafe under Linux

2014-12-04 15:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (726b9a730d43)

	* nsd/tclvar.c:
	- make sure the Tcl_Obj-cached array ptr has already a bucketPtr
	(result of linux testing)

2014-12-04 15:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (691a6c950699)

	* nsd/return.c:
	- silence -pedantic compilation with -stc=c99 under linux

2014-12-04 14:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (153bc2b581bf)

	* configure.ac, include/nsconfig.h.in, m4/misc.m4, nsd/crypt.c:
	- check for existence of crypt_r
	- reduce implicit conversions

2014-12-04 00:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b17f78394d06)

	* include/ns.h, nsd/conn.c, nsd/log.c, nsd/rollfile.c, nsdb/dbinit.c,
	nsdb/dbtcl.c, nsdb/nsdb.c, nsdb/nsdb.h:
	- allow one to set logging of SQL statements via "ns_logctl severity
	Debug(sql) on" at runtime
	- reduce implicit conversions

2014-12-03 16:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f203463b437)

	* include/ns.h, nsd/adprequest.c, nsd/binder.c, nsd/conn.c,
	nsd/driver.c, nsd/log.c, nsd/nsconf.c, nsd/queue.c, nsd/task.c,
	nsd/tclenv.c, nsd/tclhttp.c, nsd/tclxkeylist.c, nsthread/memory.c,
	nsthread/mutex.c:
	- add C-API function Ns_LogSeveritySetEnabled() to let modules
	change enabled states
	- ns_http:
	    * fix invalid request strings, when url http://google.com/ (with
	trailing slash) is used
	    * fix possible race condition when time gap between "ns_http queue"
	and "ns_http wait" is larger
	- prefer memcpy over strncpy, since it has in most cases the
	appropriate semantics and it is faster
	- avoid multiple strlen() operations
	- provide better handling of overlong strings
	- add nonnull assertions

2014-12-02 13:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61b54ff1f4f1)

	* nsd/cache.c, nsd/crypt.c, nsd/form.c, nsd/task.c:
	- use memory bounded functions instead of potentially buffer
	overflowing functions
	- reduce scope of variables
	- dereference values after assertions

2014-12-02 13:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b22997091548)

	* Makefile:
	- reduce number of false positives for cppcheck

2014-12-02 12:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba9f295000b4)

	* include/nsthread.h, nsd/rollfile.c, nsd/tclenv.c, nsd/tclfile.c,
	nsd/tclobjv.c, nsd/tclsock.c, nsd/tclthread.c, nsd/tclxkeylist.c,
	nsdb/dbutil.c, nsproxy/nsproxylib.c, nsthread/memory.c,
	nsthread/thread.c:
	- use memory bounded functions instead of potentially buffer
	overflowing functions
	- warn, when results of ns_malloc, ns_calloc or ns_strdup is not used
	- replace macro ckstrdup by function in tclxkeylist.c
	- add const declarations
	- prefer "const" over "CONST" unless in Tcl interface

2014-12-02 09:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (028918b86fdc)

	* include/ns.h, nsd/config.c, nsd/crypt.c, nsd/driver.c,
	nsd/fastpath.c, nsd/mimetypes.c, nsd/nsd.h, nsd/return.c,
	nsd/rollfile.c, nsd/sock.c, nsd/str.c, nsdb/nsdb.c:
	- add nonnull assertions to mimetimes.c and rollfile.c
	- ignore less function results
	- reduce variable scopes
	- reduce implicit signed/unsigned conversions
	- prefer "const" over "CONST" unless in Tcl interface

2014-12-01 20:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (47057c4d4ae2)

	* nsd/crypt.c:
	- reduce implicit conversions

2014-12-01 13:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (64ed229ae6e7)

	* nscp/nscp.c:
	- cleanup type under windows

2014-12-01 13:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b6bb3ef8b0a)

	* nsd/log.c:
	- remove seemingly useless statements, which can lead to a crash
	under windows

2014-12-01 12:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2bc069051b54)

	* nsd/config.c, nsd/fd.c, nsd/log.c, nsd/nswin32.c, nsd/pidfile.c,
	nsd/queue.c, nsd/range.c, nsd/sockfile.c, nsd/url2file.c:
	- make ignoring of function results explicit

2014-12-01 11:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03d00eaaf2cc)

	* include/ns.h, include/nsconfig.h.in, include/nsthread.h,
	nsd/adpeval.c, nsd/adprequest.c, nsd/config.c, nsd/conn.c,
	nsd/connio.c, nsd/driver.c, nsd/form.c, nsd/log.c, nsd/nsconf.c,
	nsd/nsd.h, nsd/queue.c, nsd/tclenv.c, nsd/tclobj.c,
	nsd/tclrequest.c, nsd/url.c, nsthread/memory.c:
	- use safer strncpy() insteady of strcpy()
	- add nonnull assertions to tclobj.c
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1
	- add const declarations
	- prefer "const" over "CONST" unless in Tcl interface

2014-12-01 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (888dcdb73a12)

	* m4/misc.m4: new file.
	* configure.ac, m4/misc.m4, nsd/random.c:
	- use arc4random() if available

2014-12-01 09:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d297f54d8ff)

	* include/ns.h, nsd/fastpath.c, nsd/nsd.h:
	- add nonnull assertion to fastpath.c
	- prefer "const" over "CONST" unless in Tcl interface
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1

2014-11-30 18:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (feb97c9b00c1)

	* include/ns.h, nsd/compress.c, nsd/connio.c, nsd/driver.c,
	nsd/return.c, nsd/returnresp.c, nsd/sock.c,
	tests/ns_adp_compress.test, tests/tclresp.test:
	- there is no need to compress empty io-vecs (where the compressed
	content is longer due to footer etc.). we have to ajust the
	regression test, since it contains such empty compress blocks
	- revert over-eager changes
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-30 13:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d44df0029d65)

	* nsdb/dbtcl.c:
	- make nonnull assumptions clear

2014-11-30 13:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bbae9d5318fa)

	* nsd/driver.c, nsd/url.c:
	- eliminate dead code

2014-11-30 13:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (269fb47733f1)

	* nsd/tclhttp.c, nsd/tclxkeylist.c:
	- fix potentially uninitialized variables

2014-11-30 13:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (48ff57a782f7)

	* include/ns.h, nsd/config.c, nsd/connio.c, nsd/exec.c, nsd/modload.c,
	nsd/request.c, nsd/return.c, nsd/rollfile.c, nsd/set.c, nsd/str.c,
	nsd/tclinit.c, nsd/tclset.c, nsd/tclthread.c, nsd/url.c,
	nsdb/dbinit.c, nsthread/mutex.c:
	- make compilation clean for clang 3.6
	- remove redundant operations due to nonnnull declarations
	- align NS_GNUC_NONNULL with asserts on more occasions
	- add const declations
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-30 12:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7992c9ff4edb)

	* nscgi/doc/mann/nscgi.man, nscgi/nscgi.c, nsd-config.tcl:
	- fix a bug in cgi interface leading to a reported port with a
	starting ":"
	- fix sample configuration for cgi
	- remove some documentation bugs for cgi

2014-11-29 11:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c961de3860cd)

	* include/ns.h, include/nsthread.h, nsd/info.c, nsd/task.c,
	nsd/tclinit.c, nslog/nslog.c:
	- add const declarations
	- prefer "const" over "CONST" unless in Tcl interface
	- reduce implicit conversions

2014-11-28 17:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54429c7018ba)

	* nscp/nscp.c, nsd/sched.c:
	- reduce implicit conversions

2014-11-28 17:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (13cc67224382)

	* include/ns.h, nscp/nscp.c, nsd/connio.c, nsd/driver.c, nsd/log.c,
	nsd/sched.c, nsd/tclimg.c:
	- handle return results of functions or ignore these explicitly

2014-11-28 10:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8d7131cf70a)

	* doc/src/naviserver/ns_http.man, nssock/doc/mann/nssock.man:
	- improve documentation (document port 0 behavior)
	- improve linkage between documentation pages

2014-11-28 10:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (033d726b327d)

	* nscgi/nscgi.c:
	- fix wrong modifications

2014-11-26 22:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (85ad081ffcd0)

	* nscgi/nscgi.c, nsd/adpparse.c, nsd/config.c, nsd/tclhttp.c:
	- make ignoring of results explicit

2014-11-26 19:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e38687378f6)

	* include/nsthread.h, nsthread/pthread.c, nsthread/reentrant.c,
	nsthread/sema.c, nsthread/thread.c:
	- added nonnull assertions to pthread.c, reentrant.c, sema.c,
	thread.c

2014-11-25 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0fda6189a3c1)

	* include/ns.h, nsd/driver.c, nsd/nsd.h, nsd/task.c, nsd/tclhttp.c:
	- make Ns_LogTaskDebug a global symbol such it can be used from
	nsssl as well

2014-11-25 11:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f66ab1829c0e)

	* nsd/task.c, nsd/tclhttp.c:
	- add debugging serverity for tasks

2014-11-25 11:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b41f603b39c4)

	* nsd/driver.c, nsd/nsd.h:
	- make compilation clean under gcc5

2014-11-25 11:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9fc776c0f4d8)

	* nslog/nslog.c:
	- make compilation clean under clang

2014-11-25 10:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1b45dbad63eb)

	* nsd/driver.c, nsd/nsd.h:
	- change order in array, add comment

2014-11-25 10:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (710bbe61bd35)

	* nsd/driver.c, nsd/nsd.h:
	- add mapping from spooler states to sock states (for error
	reporting)

2014-11-25 09:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e88624c3cd50)

	* include/ns.h, include/nsthread.h, nscp/nscp.c, nsd/adprequest.c,
	nsd/cache.c, nsd/dstring.c, nsd/form.c, nsd/httptime.c,
	nsd/nswin32.c, nsd/op.c, nsd/pathname.c, nsd/proc.c, nsd/queue.c,
	nsd/sock.c, nsd/task.c, nsd/tclcallbacks.c, nsd/tclinit.c,
	nsd/tclsock.c, nsd/tclthread.c, nsd/url2file.c, nsdb/dbinit.c,
	nsdb/dbtcl.c, nsdb/nsdb.c, nslog/nslog.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c, nsproxy/nsproxymod.c, nsthread/winthread.c:
	- added nonnull assertions to task.c
	- add const declarations
	- reduce implicit conversions

2014-11-25 00:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb47f929c7b6)

	* include/ns.h, include/nsthread.h, nsd/nsthread.c, nsd/queue.c,
	nsthread/cslock.c, nsthread/pthread.c, nsthread/rwlock.c,
	nsthread/thread.c, nsthread/thread.h, nsthread/tls.c,
	nsthread/winthread.c:
	- added nonnull assertions to cslock.c, rwlock.c, pthread.c,
	thread.c, tls.c
	- add const declarations

2014-11-24 23:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (136ab7aaff41)

	* nsthread/reentrant.c:
	- align parameter names of ns_strtok to unix man pages
	- white space change

2014-11-24 23:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ea74f81afc7)

	* include/nsthread.h, nsthread/time.c:
	- there is not need to introduce Ns_GetTimeFromTcl() since one can
	use Tcl_GetTime() directly
	- there is not need to introduce Ns_GetTimeFromWindowsFileTime() since
	this call would be only usable under windows.
	- keep assertions and fix of typo

2014-11-24 23:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b4407e5280b)

	* tcl/nstrace.tcl:
	- guard Tcl namespace ensemble usage by checking the version number
	of Tcl

2014-11-24 23:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d545017c853d)

	* nsd/log.c:
	- revert to previous version: the intention is that the message is
	the last statement in the old log. In case there is a bug in
	windows, it should be properly fixed, not just getting rid of the
	symptoms.

2014-11-24 12:51 -0500  Andrew Piskorski  <atp@piskorski.com>  (ac1bd35ff47b)

	* include/Makefile.global.in:
	Adjust include/Makefile.global.in (for Unix) to work correctly with
	my 2014-11-02 rev 557970029135 fix (for Windows) to nsd/Makefile.

2014-11-24 12:13 -0500  Andrew Piskorski  <atp@piskorski.com>  (c39a75a63945)

	* include/nsthread.h, nsd/log.c, nsd/nsmain.c, nsd/queue.c,
	nsd/tclsock.c, nsthread/mutex.c:
	Merge in all upstream changes. No conflicts.

2014-11-24 11:49 -0500  Andrew Piskorski  <atp@piskorski.com>  (f8c05178675b)

	* nsd/log.c:
	Re-apply my 8d3c79974f08 fix which got lost during merge: Fix
	ns_logroll crash on Windows.

2014-11-19 15:39 -0500  Andrew Piskorski  <atp@piskorski.com>  (5b22002e43d8)

	* include/Makefile.win32, nsd/log.c, nsd/queue.c:
	I somehow lost some upstream changes when merging, apply them.

2014-11-19 15:23 -0500  Andrew Piskorski  <atp@piskorski.com>  (a94740347cb7)

	* include/Makefile.win32, include/nsthread.h, nsd/log.c, nsd/nsmain.c,
	nsd/queue.c, nsd/sched.c, nsd/tclsock.c, nsd/tcltime.c,
	nsthread/nsthreadtest.c:
	Merge in all upstream changes.

2014-11-07 03:45 -0500  Andrew Piskorski  <atp@piskorski.com>  (5c0d83b215b4)

	* include/nsthread.h, nsd/log.c, nsd/nsmain.c, nsd/queue.c,
	nsd/sched.c, nsd/tclsock.c:
	Merge in all upstream changes. No conflicts.

2014-11-03 00:00 -0500  Andrew Piskorski  <atp@piskorski.com>  (8d3c79974f08)

	* nsd/log.c:
	Fix ns_logroll crash on Windows.

2014-11-02 23:46 -0500  Andrew Piskorski  <atp@piskorski.com>  (557970029135)

	* include/Makefile.win32, nsd/Makefile:
	Rename nsd.{lib,dll} to libnsd.{lib,dll} to avoid smashing over
	their PDB debug file with the one for nsd.exe.

2014-11-02 16:53 -0500  Andrew Piskorski  <atp@piskorski.com>  (b2263ad6d3b3)

	* include/nsthread.h, nsd/log.c, nsd/nsmain.c, nsd/queue.c,
	nsd/sched.c, nsd/tclsock.c, nsthread/mutex.c,
	nsthread/nsthreadtest.c, nsthread/reentrant.c:
	Merge in all upstream changes. No conflicts.

2014-10-30 17:43 -0400  Andrew Piskorski  <atp@piskorski.com>  (ce260ac50b6b)

	* Makefile.win32:
	My ActiveTcl install location is now: C:\P\Tcl-64

2014-10-30 17:24 -0400  Andrew Piskorski  <atp@piskorski.com>  (a32985fdf428)

	* Makefile.win32, include/nsthread.h, nsd/log.c, nsd/nsmain.c,
	nsd/queue.c, nsd/sched.c, nsd/tclsock.c, nsd/tcltime.c,
	nsthread/nsthreadtest.c, nsthread/time.c:
	Merge in all upstream changes. No conflicts.

2014-10-29 15:06 -0400  Andrew Piskorski  <atp@piskorski.com>  (02e64d5e1a5c)

	* tests/ns_nsv.test:
	Fix test ns_nsv-3.5 to actually check that the array no longer
	exists.

2014-10-23 17:08 -0400  Andrew Piskorski  <atp@piskorski.com>  (2a0436a55f12)

	* nsd/queue.c:
	Allow empty string thread name in CreateConnThread().

2014-10-23 15:56 -0400  Andrew Piskorski  <atp@piskorski.com>  (638dc4c2eda3)

	* include/nsthread.h, nsd/log.c, nsd/nsmain.c, nsd/sched.c,
	nsd/tclsock.c, nsd/tcltime.c, nsthread/mutex.c,
	nsthread/reentrant.c, nsthread/time.c:
	Merge in all upstream changes. No conflicts.

2014-10-21 17:30 -0400  Andrew Piskorski  <atp@piskorski.com>  (0c067b5567cd)

	* nsd/nsmain.c:
	In Ns_Main, when the server is missing, log more info about the
	servers that ARE present in the config file.

2014-10-19 14:14 -0400  Andrew Piskorski  <atp@piskorski.com>  (21c8e2d8c63d)

	* nsthread/time.c:
	Add in more of Gustaf's time changes that got lost during an earlier
	merge.

2014-10-19 14:03 -0400  Andrew Piskorski  <atp@piskorski.com>  (c61b07f5e651)

	* nsthread/time.c:
	Change _MSC_VER version of Ns_GetTime() to use
	Ns_GetTimeFromWindowsFileTime(), per Gustaf's newer preference.

2014-10-19 14:01 -0400  Andrew Piskorski  <atp@piskorski.com>  (658a9281b7bd)

	* Makefile.win32, include/nsthread.h, nsd/log.c, nsd/sched.c,
	nsd/tclsock.c, nsthread/mutex.c:
	Merge in all upstream changes.

2014-10-18 02:41 -0400  Andrew Piskorski  <atp@piskorski.com>  (2ed58b6a9c05)

	* tests/ns_cond.test, tests/testserver/modules/ns_cond.tcl: new file.
	* tests/ns_cond.test, tests/testserver/modules/ns_cond.tcl:
	Add a real-world test of ns_cond wait and broadcast.

2014-10-16 15:20 -0400  Andrew Piskorski  <atp@piskorski.com>  (bfbb7d1dcfa5)

	* include/nsthread.h, nsthread/nsthreadtest.c, nsthread/time.c:
	Merge in all upstream changes. Resolve nsthread/time.c conflicts in
	favor of my local changes, as they are cleaner and more general.

2014-10-16 01:18 -0400  Andrew Piskorski  <atp@piskorski.com>  (258febad54be)

	* tcl/nstrace.tcl:
	Prevent the missing 'namespace ensemble' command from breaking Tcl
	8.4.

2014-10-15 03:29 -0400  Andrew Piskorski  <atp@piskorski.com>  (28b8eb8e7b12)

	* nsd/log.c, nsd/sched.c, nsd/tclsock.c:
	Merge in all upstream changes. No conflicts.

2006-03-28 19:48 +0100  Andrew Piskorski  <atp@piskorski.com>  (f5773e4a53a4)

	* nsd/log.c:
	(Ns_LogRoll): fix logrolling on Win32 (bug # 994224)

	Uses a simplified version of Dossy's bug-994224-v409a-
	patch-20040928.txt patch. (transplanted from
	40cdd73ec6a44782929eaad8af3e37b07af7ba99)

2006-03-28 19:35 +0100  Andrew Piskorski  <atp@piskorski.com>  (ce8e03148fd0)

	* nsd/pathname.c:
	Fix Ns_NormalizePath() for //foo/bar paths on Win32 (bug #1162890)
	(transplanted from b0fe3532af28b729dead9f9c3637e1ac97611a13)

2014-10-15 01:38 -0400  Andrew Piskorski  <atp@piskorski.com>  (ae030a48f6be)

	* nsthread/nsthreadtest.c:
	Declare Tcl_GetMemoryInfo() with NS_IMPORT.

2014-10-13 10:44 -0400  Andrew Piskorski  <atp@piskorski.com>  (a63afee6e82c)

	* nsd/tclsock.c:
	Fix broken 2005-02-16 rev 1097:3d984c89b332, which bogusly smashed
	over the Ns_GetAllAddrByHost() [ns_addrbyhost -all] support added
	2004-12-06 in rev 1092:89882a8e77bc.

2014-10-13 04:31 -0400  Andrew Piskorski  <atp@piskorski.com>  (6c25644526e8)

	* tcl/sendmail.tcl:
	Remove trailing whitespace, only.

2014-10-12 14:39 -0400  Andrew Piskorski  <atp@piskorski.com>  (fc6eb88935a2)

	* Makefile.win32:
	Better control of whether to append to or smash over LIB and
	INCLUDE.

2014-10-12 13:04 -0400  Andrew Piskorski  <atp@piskorski.com>  (698bb8303f26)

	* nsthread/mutex.c:
	Tweak, when timing is off we do not need the end, diff, startTime
	variables.

2014-10-12 12:37 -0400  Andrew Piskorski  <atp@piskorski.com>  (603e42053859)

	* include/Makefile.win32, include/nsthread.h, nsd/sched.c,
	nsd/tcltime.c, nsthread/mutex.c:
	Merge in all upstream changes. No conflicts.

2014-10-12 12:30 -0400  Andrew Piskorski  <atp@piskorski.com>  (5fe50fc06f66)

	* Makefile.win32, include/Makefile.win32:
	Add 32-bit build support.

2014-10-11 09:16 -0400  Andrew Piskorski  <atp@piskorski.com>  (f5b9d392a854)

	* Makefile.win32:
	Add the nsssl module.

2014-10-11 09:04 -0400  Andrew Piskorski  <atp@piskorski.com>  (279f6282a8e1)

	* Makefile.win32:
	Do not explicitly INCLUDE to child nmakes. Doing so was breaking the
	nsssl build, although I don't entirely understand why.

2014-10-11 06:37 -0400  Andrew Piskorski  <atp@piskorski.com>  (57ce73a5e5a9)

	* Makefile.win32:
	Remove /e option to nmake, it is not necessary for core Naviserver,
	and interferes with appending to INCLUDE in add-on module makefiles.

2014-10-11 06:36 -0400  Andrew Piskorski  <atp@piskorski.com>  (534ac3d5bcb0)

	* Makefile.win32:
	Add support for building add-on modules.

2014-10-08 19:53 -0400  Andrew Piskorski  <atp@piskorski.com>  (4ef1319aabb4)

	* nsthread/time.c:
	Switch to using Ns_GetTimeFromTcl() for the _MSC_VER case too.

2014-10-08 19:52 -0400  Andrew Piskorski  <atp@piskorski.com>  (a4e976e7950b)

	* nsthread/reentrant.c, nsthread/time.c:
	Merged in all upstream changes. Resolved conflict in nsthread/time.c
	largely by adopting my newer code, but included the cast too long.

2014-10-08 18:13 -0400  Andrew Piskorski  <atp@piskorski.com>  (652ae47d5795)

	* include/nsthread.h, nsd/sched.c, nsd/tcltime.c, nsthread/time.c:
	Backout b1180ffe3f1d, make Ns_Time.sec a long again.

2014-10-08 18:04 -0400  Andrew Piskorski  <atp@piskorski.com>  (e3519c16e578)

	* nsthread/mutex.c:
	Make it easier to toggle mutex timings on/off.

2014-10-08 17:42 -0400  Andrew Piskorski  <atp@piskorski.com>  (ee76b74bf279)

	* nsthread/mutex.c:
	Backout eb2066caeb8a, turn Windows mutex timings OFF again.

2014-10-08 13:11 -0400  Andrew Piskorski  <atp@piskorski.com>  (c6f3e4637d9b)

	* nsthread/time.c:
	Move code into Ns_GetTimeFromWindowsFileTime() and
	Ns_GetTimeFromGetTimeOfDay(), making Ns_GetTime() much simpler.

2014-10-08 00:52 -0400  Andrew Piskorski  <atp@piskorski.com>  (301f860a7dc3)

	* nsthread/reentrant.c:
	Remove ATP_LLD_MSC_HACK_YES for ns_localtime(), we now have a better
	fix.

2014-10-08 00:42 -0400  Andrew Piskorski  <atp@piskorski.com>  (eb2066caeb8a)

	* nsthread/mutex.c:
	Turn mutex timings back on for Windows, they were not the problem.

2014-10-08 00:42 -0400  Andrew Piskorski  <atp@piskorski.com>  (b1180ffe3f1d)

	* include/nsthread.h, nsd/sched.c, nsd/tcltime.c, nsthread/time.c:
	Change Ns_Time.sec from long to time_t, fixing big problems on
	Windows!

2014-10-07 23:42 -0400  Andrew Piskorski  <atp@piskorski.com>  (9cbc04ac2dfc)

	* nsthread/reentrant.c:
	Add ATP_LLD_MSC_HACK_YES version of ns_localtime() which does NOT
	trigger EINVAL from localtime_s().

2014-10-07 23:37 -0400  Andrew Piskorski  <atp@piskorski.com>  (e0dbf720924c)

	* include/nsthread.h, nsthread/time.c:
	Move code into Ns_GetTimeFromTcl().

2014-10-07 15:24 -0400  Andrew Piskorski  <atp@piskorski.com>  (315bc5ab4882)

	* include/Makefile.win32:
	Merge in all upstream changes, including Gustaf removing my rpath
	hack.

2014-10-07 14:26 -0400  Andrew Piskorski  <atp@piskorski.com>  (13f7a8138768)

	* Makefile.win32:
	Clarify necessary LIB and INCLUDE settings and where they come from.

2014-10-07 14:24 -0400  Andrew Piskorski  <atp@piskorski.com>  (12fa5c463224)

	* include/Makefile.win32:
	Increase warning level to /W3. Add /EHsc flag (C does not throw C++
	exceptions).

2014-11-24 13:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e299c61b22f2)

	* include/nsthread.h:
	- parenthesize macro body

2014-11-24 13:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d180c9aa0aa)

	* include/nsthread.h, nsd/nswin32.c:
	- implement ns_recv() and ns_send() as functions under windows

2014-11-24 12:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b58c16d45220)

	* include/ns.h, include/nsthread.h, nsd/adpeval.c, nsd/auth.c,
	nsd/callbacks.c, nsd/conn.c, nsd/httptime.c, nsd/limits.c,
	nsd/log.c, nsd/nsd.h, nsd/queue.c, nsd/range.c, nsthread/mutex.c,
	nsthread/thread.h:
	- added nonnull assertions to auth.c, callbacks.c, httptime.c,
	- limits.c, range.c and mutex.c
	- changed conn->id from int to uintptr_t (like for sls ids.
	- added NsConnIdStr()
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-24 08:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (440648564186)

	* include/ns.h, m4/usermgt.m4, nsd/adprequest.c, nsd/index.c,
	nsd/queue.c, nsd/return.c, nsd/tclhttp.c, nsd/tclmisc.c,
	nsd/tclxkeylist.c, nsd/urlopen.c, nsd/uuencode.c, nsdb/dbdrv.c,
	nsdb/nsdb.h, nsdbtest/nsdbtest.c:
	- align prototype names and function names
	- reduce implicit conversions
	- avoid c90 identifiers starting with str[a-z], to[a-z], E[A-Z]
	- add const declarations

2014-11-23 17:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aa8a7793e9bc)

	* nsd/driver.c:
	- fix a potential race condiditon in writer threads: fill in queue
	structure before a writer job is added to the queue (and is
	potentially picked up by a writer thread).

2014-11-22 21:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (949ec866c7a6)

	* include/ns.h, nsd/dstring.c, nsd/form.c, nsd/random.c,
	nsd/tclresp.c, nsd/tclxkeylist.c:
	- add nonnull assertions to form.c
	- reduce implicit conversions
	- add const declarations

2014-11-22 19:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (84f5f77648af)

	* include/ns.h, nsd/adprequest.c, nsd/tclfile.c, nsd/tclsock.c,
	nsd/tclxkeylist.c, nsd/urlopen.c:
	- avoid c90 identifiers starting with str[a-z] and to[a-z]
	- use modern-style argument parsing for NsTclKillObjCmd() and
	NsTclSymlinkObjCmd()
	- make ignoring of function results explicit
	- reduce implicit conversions
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-22 19:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9201b817a361)

	* nsd/nsmain.c, nsd/tclfile.c:
	- avoid c90 reverved identifier "signal"

2014-11-22 19:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb7fb5528ec2)

	* nsd/log.c:
	- avoid usage of c90 reserved identifier "free"

2014-11-22 19:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5e301788fa9d)

	* nsd/encoding.c:
	- eliminate c90 reserved identifier starting with E[A-Z]

2014-11-22 19:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a22b8c91008)

	* include/ns.h, nsd/cache.c, nsd/fastpath.c, nsd/task.c,
	nsd/tclcache.c, nsd/tclhttp.c:
	- add nonnull assertions to cache.c
	- avoid c90 reserved identifier starting with to[a-z]
	- add const declarations
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-22 18:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (403868dbdd12)

	* nsd/nsd.h, nsd/tclhttp.c, nsd/tclinit.c:
	- avoid potential confusion by plural of http and the https protocol
	- avoid reserved c90 identifier "remove"

2014-11-22 17:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f451dc713ed)

	* nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/nsdb.h:
	- add const declarations

2014-11-22 17:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d16cc208629a)

	* include/ns.h, nscgi/nscgi.c, nscp/nscp.c, nsd/adpeval.c,
	nsd/adprequest.c, nsd/binder.c, nsd/conn.c, nsd/fastpath.c,
	nsd/log.c, nsd/modload.c, nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/pathname.c, nsd/queue.c, nsd/server.c, nsd/sls.c, nsd/task.c,
	nsd/tclcache.c, nsd/tclconf.c, nsd/tclenv.c, nsd/tclinit.c,
	nsd/url2file.c, nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c,
	nsdb/dbtcl.c, nsdb/dbutil.c, nsdb/nsdb.h, nslog/nslog.c:
	- move assigments out of conditions in "while" or "if" statements
	- avoid c90 reserved identifier "signal"
	- prefer bool and NS_TRUE/NS_FAIL over int and 0/1
	- add "const" constraints
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-22 12:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef20b30de8e5)

	* include/ns.h, nsd/compress.c, nsd/filter.c, nsd/sockfile.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclobjv.c,
	nsd/urlopen.c:
	- reduce implicit conversions
	- prefer boolean and NS_TRUE/NS_FAIL over int and 0/1
	- add nonnull constraints
	- add "const" constraints
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-21 13:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (671f860b326f)

	* nsd/driver.c, nsd/nsd.h:
	- reduce implicit conversions

2014-11-21 13:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8a2b5a59265)

	* nsd/sockcallback.c:
	- prefer for loops over while loops

2014-11-21 13:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a3a004cab368)

	* nsd/unix.c:
	- reduce scope of variables

2014-11-21 09:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b08e84c8b321)

	* include/ns.h, nscgi/nscgi.c, nsd/sock.c:
	- prefer boolean and NS_TRUE/NS_FAIL over int and 0/1
	- reduce implicit conversions

2014-11-21 09:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb73864f4738)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/nsd.h:
	- add "const" constraints to driver

2014-11-21 08:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbbf7588628c)

	* nsd/driver.c:
	- reduce implicit conversions

2014-11-20 23:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (35c607f75039)

	* include/ns.h, nsd/adpcmds.c, nsd/adpparse.c, nsd/httptime.c,
	nsd/nsd.h:
	- avoid c90 identifiers starting with str[a-z]
	- add "const" constraints

2014-11-20 23:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2953ebce0c06)

	* nsd/driver.c:
	- reduce implicit type conversions

2014-11-20 23:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (738cb69b4368)

	* nsd/httptime.c:
	- avoid usage of c90 reverved identifiers "time" and "tm"

2014-11-20 18:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbd40506380d)

	* nsd/tclinit.c:
	- fix stupid bug in socket close callback (introduced by me)

2014-11-20 18:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d5f829e65913)

	* nsd/nsd.h:
	- move bool definition from nsd.h to ns.h

2014-11-20 18:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2cbde5f0fc32)

	* m4/usermgt.m4: new file.
	* configure.ac, include/ns.h, include/nsconfig.h.in, m4/usermgt.m4,
	nsd/unix.c:
	- use getpwnam_r, getpwuid_r, getgrnam_r, and getgrgid_r instead of
	their thread-unsafe counterparts. This change allow these functions
	to run without locking

2014-11-20 09:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7a9af5f0eea6)

	* nsd/tclset.c:
	- reduce variable scopes

2014-11-20 09:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (798ae5a27928)

	* openacs-config.tcl:
	- editing error

2014-11-19 12:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f837e5fd8d9)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/driver.c, nsd/nsd.h, nsd/task.c:
	- move assigments out of conditions in "while" or "if" statements
	- prefer boolean and NS_TRUE/NS_FAIL over int and 0/1
	- reduce implicit conversions

2014-11-19 12:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cd1b14b7d785)

	* nscgi/nscgi.c, nsd/driver.c, nsd/log.c, nsd/nswin32.c, nsd/return.c,
	nsd/sockfile.c, nsd/tclhttp.c, nsd/unix.c, nslog/nslog.c:
	- use NS_INVALID_FD instead of -1

2014-11-19 09:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (663076662758)

	* nsd/driver.c:
	- handle non-started drivers on more places
	- simplify loop logic over drivers

2014-11-19 08:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a698c46647a)

	* include/nsthread.h:
	- define NS_INVALID_FD similar to NS_INVALID_SOCKET and
	NS_INVALID_PID

2014-11-19 08:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d42823b9fefc)

	* nsd/driver.c:
	- allow one to load driver module (and register commands), but do not
	start driver, when port is set to 0

2014-11-18 13:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (377474e56f60)

	* include/ns.h, include/nsthread.h, include/nsversion.h.in,
	nscp/nscp.c, nsd/binder.c, nsd/config.c, nsd/driver.c, nsd/listen.c,
	nsd/nsd.h, nsd/queue.c, nsd/sock.c, nsd/sockcallback.c, nsd/task.c,
	nsd/tclresp.c, nsd/tclsock.c, nsd/url2file.c:
	- switch argument of Ns_SockProc back to "unsigned int" since there
	is a single place in the code, where Ns_SockProc might be called
	with a combination of Ns_SockState flags.
	- use parens around macro arguments
	- reduce implicit conversions
	- prefer boolean and NS_TRUE/NS_FAIL over int and 0/1
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-18 10:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb81fd6ae838)

	* include/ns.h, include/nsthread.h, nscp/nscp.c, nsd/adpeval.c,
	nsd/adprequest.c, nsd/config.c, nsd/driver.c, nsd/form.c,
	nsd/index.c, nsd/info.c, nsd/nsd.h, nsd/nswin32.c, nsd/pathname.c,
	nsd/progress.c, nsd/quotehtml.c, nsd/tclcache.c, nsd/tclhttp.c,
	nsd/tclinit.c, nsd/tclmisc.c, nsd/tclxkeylist.c, nsd/url2file.c,
	nsdb/dbinit.c, nsdb/dbutil.c, nsdb/nsdb.h, nslog/nslog.c:
	- avoid c90 identifier starting with str[a-z]
	- ignore less function results
	- reduce implicit conversions
	- move assigments out of conditions in "while" or "if" statements
	- avoid shadowing of variable names
	- prefer "const" over "CONST" unless in Tcl interface
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-18 08:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7aef2ecc60d9)

	* nsd/tclsock.c:
	- use modern style argument passing for ns_sock
	- ignore less runction results

2014-11-17 16:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26cc7c2a64c7)

	* nsd/dns.c, nsd/event.c, nsd/log.c, nsd/queue.c, nsd/sock.c,
	nsd/tclinit.c, nsd/tclobj.c:
	- avoid c90 identifier starting with "E" or str[a-z]
	- reduce implicit conversions
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-17 14:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb8ffc203d46)

	* include/nsthread.h, nsd/driver.c:
	- add missing definition for ns_lseeks under unix

2014-11-17 13:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c9466ff35dd2)

	* .hgignore:
	- add extension to be ignored for windows compilation intermediaries
	and results

2014-11-17 12:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d35fb4036f0d)

	* nsd/driver.c:
	- use ssize_t for results of write() operations

2014-11-17 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0faaea4620fc)

	* include/nsthread.h, nscgi/nscgi.c, nsd/adpeval.c, nsd/driver.c,
	nsd/fastpath.c, nsd/fd.c, nsd/nswin32.c, nsd/unix.c,
	nsproxy/nsproxylib.c:
	- use ns_open consistently with 3 arguments

2014-11-17 12:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (08680db31a71)

	* include/Makefile.win32:
	- set windows runtime library option from /MT(d) tp /MD(d). This was
	probably the true cause of the access log problem

2014-11-17 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e9f8795b7cd)

	* nscgi/nscgi.c, nsd/adpeval.c, nsd/driver.c, nsd/event.c, nsd/exec.c,
	nsd/fastpath.c, nsd/fd.c, nsd/log.c, nsd/sockcallback.c, nsd/task.c,
	nsd/tclinit.c, nsd/unix.c, nslog/nslog.c:
	- use ns_* as well in log entries and messages

2014-11-17 11:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb9c3c6ccd9d)

	* include/nsthread.h, nscgi/nscgi.c, nsd/adpeval.c, nsd/binder.c,
	nsd/driver.c, nsd/exec.c, nsd/fastpath.c, nsd/fd.c, nsd/log.c,
	nsd/nswin32.c, nsd/return.c, nsd/sock.c, nsd/tclhttp.c,
	nsproxy/nsproxylib.c, nsthread/winthread.c:
	- added ns_lseek, ns_dup, ns_dup2
	- use ns_open, ns_close, ns_lseek, ns_dup, ns_dup2, ns_write and
	ns_read consistently

2014-11-17 09:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c405529a971f)

	* nsd/nsd.h, nsd/nswin32.c, nsd/unix.c:
	- reduce type conversions

2014-11-17 09:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25a59ff86a37)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	- reduce reuse of reserved c90 identifier str[a-z].*

2014-11-17 08:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2eb832383c84)

	* nsd/tcltime.c:
	- reduce re-use of C90 identifier time and is[a-z].*

2014-11-17 08:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (58b7438d028d)

	* nsd/adpeval.c:
	- make switch cases explicit
	- ignore less return issues

2014-11-17 08:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57a5c04cce16)

	* nsd/binder.c:
	- add comment for symmetry with other blocks

2014-11-17 08:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (359112199615)

	* nsd/sockcallback.c:
	- make enum to int conversion explicit

2014-11-17 08:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e65d32465881)

	* nscp/nscp.c:
	- reduce implicit conversions

2014-11-17 08:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8de53fd3923d)

	* nsthread/nsthreadtest.c:
	- fix format string

2014-11-17 08:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7bbd5d0d961)

	* include/Makefile.build:
	- revert escaped change

2014-11-17 07:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (44b3cac830c9)

	* nsd/exec.c:
	- don't provide a return value for a void function

2014-11-16 20:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e3c553e1f179)

	* include/Makefile.build, nsd/fastpath.c:
	- reduce implicit type conversions

2014-11-16 20:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2df40402cd67)

	* nscgi/nscgi.c, nsd/nswin32.c, nsd/tclhttp.c, nsd/tclxkeylist.c:
	- reduce implicit type conversions

2014-11-16 20:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (70437a26eef9)

	* include/nsthread.h, nsd/nswin32.c, nslog/nslog.c:
	- implement interface routines ns_open, ns_close, ns_write, ns_read
	as small C functions to address wierd problem with access.log (it
	seems that the windows dlls for nslog and the main libnsd are
	linked agains 2 different instances of the runtime system)

2014-11-16 18:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (369c47bd0061)

	* include/Makefile.win32, nsd/nswin32.c, nsd/tclxkeylist.c,
	nsthread/nsthreadtest.c:
	- fix compilation and reduce warning under windows

2014-11-16 17:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ad42353c5bc9)

	* nsd/binder.c, nsd/connio.c:
	- improve comment density

2014-11-16 17:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6931cfdba73)

	* include/ns.h, nsd/compress.c, nsd/connio.c, nsd/nsconf.c, nsd/nsd.h,
	nsd/server.c, nsd/tclcallbacks.c:
	- avoid c90 identifier starting with "_" or str[a-z].*

2014-11-16 16:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c7bc0d4783c)

	* include/ns.h, nsd/adprequest.c, nsd/cache.c, nsd/callbacks.c,
	nsd/conn.c, nsd/exec.c, nsd/fd.c, nsd/httptime.c, nsd/lisp.c,
	nsd/nsconf.c, nsd/random.c, nsd/return.c, nsd/server.c, nsd/sls.c,
	nsd/sockfile.c, nsd/tclcache.c, nsd/tclcallbacks.c, nsd/tclset.c,
	nsd/url.c, nsd/urlopen.c, nsdb/dbdrv.c:
	- reduce unhandled function results
	- reduce implicit conversions
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-16 15:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe122bbdfb8b)

	* include/ns.h, nsd/cookies.c, nsd/modload.c, nsd/nsd.h:
	- document handling of Ns_ModuleVersion in module loader
	- move constants needed potentially for flags back to the public
	interface

2014-11-16 12:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63eb96339510)

	* include/ns.h, nscp/nscp.c, nsd/adpcmds.c, nsd/cache.c, nsd/driver.c,
	nsd/event.c, nsd/nsd.h, nsd/sock.c, nsd/sockcallback.c,
	nsd/tclhttp.c, nsd/tclinit.c, nsd/tclmisc.c, nsd/tclobj.c,
	nsd/tclresp.c, nsd/tclsock.c:
	- handle Ns_SockState masks with explicit casts (to unsigned int)
	for bit operations
	- more adjustments to new enums
	- reduce implicit conversions
	- name handled enum values explicitly in switch statements
	- avoid returns in switch statements
	- prefer return type bool with (NS_TRUE/NS_FALSE) over return type int
	(with 0 / 1)
	- add more comments to sockcallback.c

2014-11-16 11:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e82d7eb5e82b)

	* nsd/tclxkeylist.c:
	- turn macro DupSharedKeyListChild into a function

2014-11-15 14:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8342ecd4a4be)

	* include/ns.h, include/nsthread.h, nsd/cookies.c, nsd/event.c,
	nsd/listen.c, nsd/mimetypes.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/nswin32.c, nsd/pathname.c, nsd/proc.c, nsd/sock.c,
	nsd/tclmisc.c, nsd/tclsock.c, nsthread/winthread.c:
	- move defines into file when not needed in ns.h or nsd.h
	- move more platform dependencies from nsd.h into nsthread.h
	- eliminate unneeded define NS_FATAL, group naviserver return code
	together
	- define enum AdpResult for adp results
	- get rid of pedantic warning for empty translation units
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-15 09:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12097eefc029)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/filter.c, nsd/nsmain.c,
	nsd/return.c, nsd/sls.c, nsd/str.c, nsd/task.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclinit.c, nsd/tclrequest.c, nsd/tclset.c,
	nsd/tclxkeylist.c, nsdb/dbtcl.c:
	- cleanup after define->enum conversion
	- avoid c90 identifier starting with "_"
	- reduce implicit conversions
	- make ignoring of function results explicit

2014-11-14 22:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1062d5d19d47)

	* nsd/nswin32.c:
	- reduce implicit conversions

2014-11-14 21:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e213ed148448)

	* include/ns.h, nsd/filter.c, nsd/nsd.h, nsd/tclrequest.c,
	nsd/tclset.c:
	- convert NS_FILTER_* defines into enum Ns_FilterType
	- add nonnull constraints (filter.c)

2014-11-14 14:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d711360febd0)

	* nsd/tclhttp.c:
	- handle NS_SOCK_EXCEPTION state explicitly

2014-11-14 14:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97b42d2f9eac)

	* nsd/info.c, nsd/tclset.c, nsdb/dbtcl.c:
	- add "default" labels to switch statements
	- reduce scope of loop variables
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-14 13:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9ad6df33df65)

	* include/ns.h, nsd/driver.c, nsd/encoding.c, nsd/event.c, nsd/log.c,
	nsd/modload.c, nsd/nsd.h, nsd/range.c, nsd/return.c,
	nsd/sockcallback.c, nsd/str.c, nsd/task.c, nsd/tclhttp.c,
	nsd/tclinit.c, nsd/tclmisc.c, nsd/urlspace.c:
	- driver.c: demangle NaviServer return-codes (NS_OK/NS_ERROR) and
	socket/driver return states by using enums (SockState, DriverState)
	- provide different error messages for read and write timeouts
	- introduce enum Ns_SockState for socket states
	- add nonnull constraints (tclinit.c, urlspace.c)
	- don't hardcode sizes of arrays
	- reduce scope of variables
	- avoid reuse of C90 identifier pattern (str[a-z]+)
	- prefer boolean expressions in if/while/... over expressions of other
	types
	- prefer "const" over "CONST" unless in Tcl interface
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-13 12:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b62ffa3a7342)

	* include/ns.h, nsd/encoding.c:
	- add nonnull constraints
	- prefer "const" over "CONST" unless in Tcl interface
	- reduce implicit conversions

2014-11-13 10:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (503353a9f804)

	* nsd/connio.c:
	- move assignments out of conditional expressions
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-13 09:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4df049d0b6f2)

	* nsd/pidfile.c, nsd/urlopen.c:
	- avoid c90 reserved identifiers to[a-z]*

2014-11-13 09:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f52f18cf777)

	* nsd/tclconf.c:
	- avoid c90 reserved identifier is[a-z]*

2014-11-13 09:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a41283480d71)

	* nsd/sockfile.c:
	- avoid c90 reserved identifier to[a-z]*

2014-11-13 09:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (96e82ce833cd)

	* nsd/log.c:
	- avoid c90 reserved identifier "log"

2014-11-13 09:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d82501e4b88)

	* include/ns.h, nsd/adpeval.c, nsd/log.c, nsd/nsd.h, nsd/tclobjv.c,
	nsd/tclxkeylist.c, nsd/urlspace.c:
	- replace TclX-specific assert by regular assert
	- add default labels to switch statements
	- add nonnull constraints in ulrspace.c
	- add const constrains (mostly tclxkeylist)
	- prefer "const" over "CONST" unless in Tcl interface
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-13 07:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aba6482e484a)

	* include/ns.h, nsd/dstring.c, nsd/exec.c, nsd/tclinit.c,
	nsd/tclthread.c:
	- turn tcl trace types from ifdefs into enums
	- add default labels to switch statements
	- reduce implicit conversions
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-13 06:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7207be081ddb)

	* nscgi/nscgi.c, nsd/adpparse.c, nsd/binder.c, nsd/conn.c,
	nsd/driver.c, nsd/encoding.c, nsd/httptime.c, nsd/log.c,
	nsd/nsmain.c, nsd/pathname.c, nsd/queue.c, nsd/sls.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tcljob.c,
	nsd/tclrequest.c, nsd/tclset.c, nsd/tcltime.c, nsd/tclvar.c,
	nsd/urlopen.c:
	- add default labels to switch statements
	- reduce implicit conversions
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-12 11:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f37687ded9c2)

	* include/ns.h, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/adprequest.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/set.c,
	nsdb/dbdrv.c:
	- add nonnull constraints in adp* interface
	- add default labels to switch statements
	- avoid reuse of C90 identifier pattern (str[a-z]+)
	- prefer "const" over "CONST" unless in Tcl interface
	- reduce implicit conversions
	- prefer boolean expressions in if/while/... over expressions of other
	types
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs

2014-11-11 12:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b91391d25c3)

	* nsd/tclcache.c, nsd/tclvar.c:
	- use Tcl_NewBooleanObj() for returning boolean values (not
	Tcl_NewIntObj)

2014-11-11 12:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0edf9d2c0668)

	* nsd/cookies.c:
	- size array correctly

2014-11-11 12:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (babb499981ee)

	* nsd/task.c:
	- don't assign value to ignored variable

2014-11-11 12:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (674bd14ff757)

	* nsd/tclobjv.c:
	- remove unneeded variable

2014-11-11 12:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (decdd4e7b4be)

	* nscp/nscp.c:
	- nscp: report error when "user" config entry is invalid and ignored
	- don't change strings in ns_set values
	- reduce implicit conversions

2014-11-11 11:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e67cd8d4788c)

	* nsd/filter.c, tests/ns_register_filter.test:
	- fix a bug with where NsGetFilters() failed to return the right
	filter type when NS_FILTER_FIRST flag was set.
	- extend regression test

2014-11-10 10:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b9fb58cf1948)

	* include/nscheck.h, include/nsthread.h, nscgi/nscgi.c, nsd/adpeval.c,
	nsd/config.c, nsd/connio.c, nsd/driver.c, nsd/fastpath.c,
	nsd/filter.c, nsd/info.c, nsd/nsd.h, nsd/queue.c, nsd/sched.c,
	nsd/sockcallback.c, nsd/task.c, nsd/tclhttp.c, nsd/tclimg.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclxkeylist.c, nsdbtest/nsdbtest.c,
	nslog/nslog.c, nsproxy/nsproxylib.c:
	- add macros ns_write() and ns_read() rather than write() and read()
	for os-abstraction to avoid potential conflict with variable name
	"write" or "read". This is analogous to many more ns_* definitions
	for OS abstraction
	- use parens for macro arguments
	- add editor hints to keep formatting conventions, prefer spaces
	over tabs
	- prefer boolean expressions in if/while/... over expressions of other
	types

2014-11-09 12:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb730a94eed9)

	* nsd/driver.c, nssock/nssock.c:
	- reduce implicit signed/unsigned conversions
	- move assigments out of conditions in "if" statement

2014-11-09 12:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (28ae19dca9d6)

	* nsd/request.c:
	- don't compare unsigned type with negative number

2014-11-09 12:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b18f3aa6cf91)

	* include/nsthread.h, nsd/info.c:
	- fix second argument of Ns_ThreadArgProc

2014-11-09 11:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42c6665c7c96)

	* nsthread/thread.c:
	- reduce conversions of function pointer to object pointer type

2014-11-09 01:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3eb55fb1de51)

	* nsd/conn.c, nsd/driver.c, nsd/nsd.h, nsd/nsmain.c, nsd/pathname.c,
	nsd/range.c, nsd/tclvar.c:
	- make ignoring of function results explicit or handle it.
	- move assigments out of conditions in "while" or "if" statements
	- reduce implicit signed/unsigned conversions

2014-11-08 20:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7ae4161dd200)

	* include/Makefile.build, include/Makefile.win32:
	- revert escaped changes

2014-11-08 20:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33c5fb7a11a0)

	* include/Makefile.build, include/Makefile.win32, include/ns.h,
	include/nsthread.h, nscgi/nscgi.c, nscp/nscp.c, nsd/adpeval.c,
	nsd/auth.c, nsd/binder.c, nsd/config.c, nsd/driver.c, nsd/log.c,
	nsd/modload.c, nsd/request.c, nsd/set.c, nsd/sock.c, nsd/tclhttp.c,
	nsd/tclmisc.c, nsd/tclset.c, nsd/tclxkeylist.c:
	- move more windows dependencies from ns.h into nsthread.h
	- close sockets with ns_sockclose() instead of close()
	- define ns_recv() and ns_send() to handle windows/unix differences
	better
	- reduce implicit conversions

2014-11-08 16:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43d269f95ec3)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/nsd.h, nsd/tclvar.c,
	nslog/nslog.c:
	- don't merge NS_DRIVER_ACCEPT_STATUS and sock status codes in one
	variable
	- reduce implicit signed/unsigned conversions

2014-11-08 15:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f1423655f5b)

	* nsd/adpeval.c, nsd/driver.c, nsd/range.c, nsd/tclxkeylist.c,
	nsd/urlencode.c:
	- reduce implicit signed/unsigned conversions

2014-11-08 13:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1597a0e5b07c)

	* include/ns.h, nscp/nscp.c, nsd/adpeval.c, nsd/config.c, nsd/conn.c,
	nsd/connio.c, nsd/tclcallbacks.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclrequest.c, nsd/tclsock.c:
	- provide for errors logged in error.log a context information by
	using Ns_TclLogErrorInfo() instead of Ns_TclLogError(). Mark the
	latter as deprecated.
	- move assigments out of conditions in "while" or "if" statements

2014-11-08 12:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc19f8e053ec)

	* nsd/task.c, nsd/tclinit.c:
	- fix indentation

2014-11-07 09:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c4fe7d4a0dd)

	* include/ns.h, nsd/connio.c, nsd/cookies.c, nsd/driver.c,
	nsd/queue.c, nsd/tclobjv.c, nsd/urlencode.c:
	- make compilation clean for linux version of compilers (gcc 4.8.3,
	clang 3.4)

2014-11-06 20:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e2cf9b911a5)

	* nsd/tcljob.c:
	- let type-checker make sure, enum values are within range. use
	assertions to make sure, enough print-strings are available.
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-06 19:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb4a57ca3d3c)

	* nsd/binder.c, nsd/config.c, nsd/connio.c, nsd/filter.c,
	nsd/pathname.c, nsd/rollfile.c, nsd/sched.c, nsd/sockcallback.c,
	nsd/tclcache.c, nsd/tclimg.c, nsd/tclinit.c:
	- prefer boolean expressions over expressions of other types

2014-11-06 18:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02f5f4bb2026)

	* include/nsthread.h, nsd/driver.c, nsd/event.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/task.c, nsproxy/nsproxylib.c:
	- linux/freebsd/oracle define pollfd.events and pollfd.revents as
	short. Make sure, we use always the same type.

2014-11-06 16:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ab2d22b1fa2)

	* nsd/nsmain.c, nsd/sched.c, nsd/sockcallback.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclresp.c, nsd/tclthread.c:
	- move assignment out of expression
	- make ignoring of result explicit

2014-11-06 16:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c000ed29782)

	* include/ns.h:
	- make Ns_LogSeverity signed (reduce implicit conversions)

2014-11-06 16:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a6c1840b839d)

	* nsd/cookies.c:
	- make singned conversion explicit

2014-11-06 14:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4cb76f20a846)

	* nslog/nslog.c:
	- temporary fix for Windows writing to access.log. Even though the
	write operation nslog.c and driver.c is performed with seemingly the
	same arguments, the operation in driver.c behaves wierd. Although
	it reports that the right number of characters was written, they do
	not show up in the access.log. A tell(fd) before and after the write
	operation shows, that nothing is written....

2014-11-06 11:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b00542162b69)

	* nsd/str.c:
	- avoid reuse of C90 identifier pattern (str[a-z]+)
	- add nonnull assertions

2014-11-06 11:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a13ec5a1d2b)

	* include/ns.h, nsd/log.c:
	- don't extend value-range of enum programmatically. Therefore,
	change enum type Ns_LogSeverity to integer to be able to use it for
	passing native enum types and used-defined log levels

2014-11-06 09:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c38dcc035fe6)

	* nsd/server.c, nsd/tcljob.c:
	- reduce variable scopes

2014-11-06 08:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2507c47632b6)

	* nsd/adpeval.c, nsd/connio.c, nsd/driver.c, nsd/nswin32.c,
	nsd/proc.c, nsd/queue.c, nsd/tclhttp.c, nsthread/thread.c:
	- improve compilation with "--std=c99 -pedantic"

2014-11-06 08:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (48607874e03a)

	* nsd/exec.c:
	- fix typo

2014-11-05 21:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (421ac00fd962)

	* nsd/tclvar.c:
	- reduce implicit conversions of enums to int

2014-11-05 21:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4cf867bb050f)

	* nsd/conn.c, nsd/driver.c, nsd/exec.c:
	- handle write errors

2014-11-05 21:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20675c8ff0da)

	* nsd/sockfile.c:
	- add missing const flag

2014-11-05 20:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fdfb715dbdfc)

	* nsd/nsd.h:
	- fix flag coding bug (stupid me!)

2014-11-05 10:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63166b9dd8d4)

	* include/ns.h, nscgi/nscgi.c, nscp/nscp.c, nsd/adpeval.c,
	nsd/adprequest.c, nsd/binder.c, nsd/conn.c, nsd/connio.c,
	nsd/cookies.c, nsd/dns.c, nsd/driver.c, nsd/encoding.c, nsd/exec.c,
	nsd/filter.c, nsd/form.c, nsd/index.c, nsd/limits.c,
	nsd/mimetypes.c, nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/nswin32.c, nsd/queue.c, nsd/range.c, nsd/return.c,
	nsd/returnresp.c, nsd/server.c, nsd/set.c, nsd/sock.c,
	nsd/tclcache.c, nsd/tclenv.c, nsd/tclhttp.c, nsd/tcljob.c,
	nsd/tclobjv.c, nsd/tclset.c, nsd/tclsock.c, nsd/urlencode.c,
	nsd/urlopen.c, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c:
	- make sure ns_set sizes are accessed via size_t
	- prefer size_t over Tcl_WideInt for sizes
	- use boolean expressions in conditions with flags
	- reduce implicit signed/unsigned conversions

2014-11-04 20:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a69c702e115)

	* nsd/driver.c, nsd/encoding.c, nsd/mimetypes.c, nsd/tclfile.c,
	nsd/tclmisc.c, nsd/tclxkeylist.c, nsdb/dbtcl.c:
	- use Tcl_GetStringFromObj() instead of Tcl_GetString() when string
	length is needed (avoid additional strlen() operations)
	- use Tcl_GetCharLength() instead of Tcl_GetStringFromObj and ignoring
	return value

2014-11-04 19:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ae332bc0f30b)

	* nsd/conn.c, nsd/nsconf.c, nsd/nsd.h:
	- avoid buffer overflows
	- don't hardcode sizes for string arrays

2014-11-04 19:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d4580104490)

	* nsd/set.c:
	- make ignoring of function results explicit

2014-11-04 19:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (66588dad1350)

	* nsd/urlencode.c:
	- use unsigned type for bit operations

2014-11-04 18:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f0fc2a26fe58)

	* nsd/sockfile.c:
	- no need to include <stdio.h>

2014-11-04 18:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba705ecdb5e6)

	* nsd/auth.c:
	- remove unneeded (void)

2014-11-04 18:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fcfc924ea1c7)

	* nsd/conn.c:
	- fix parens around likely()

2014-11-04 10:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (74a6346ee766)

	* nsd/url2file.c:
	- remove debug statements

2014-11-04 10:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (333d9e00ed72)

	* nscp/nscp.c, nsd/config.c, nsd/conn.c, nsd/connio.c, nsd/driver.c,
	nsd/fastpath.c, nsd/form.c, nsd/limits.c, nsd/nsd.h, nsd/queue.c,
	nsd/rollfile.c, nsd/server.c, nsd/tclcallbacks.c, nsd/tclhttp.c,
	nsd/tclmisc.c, nsd/tclobj.c, nsd/tclset.c, nsd/urlopen.c,
	nsdb/dbinit.c, nsdb/dbtcl.c:
	- use const on more occasions (e.g. result of Ns_ConfigGetPath)
	- reduce implicit signed/unsigned conversions
	- use boolean expressions in conditions with flags
	- adding nonnull assertions (connio)
	- avoid reuse of C90 identifier pattern (str[a-z]+)

2014-11-04 10:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55a45e876504)

	* include/ns.h, nsd/set.c:
	- adding nonnull assertions

2014-11-03 16:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9be392e4619f)

	* include/ns.h, nscgi/nscgi.c, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adprequest.c, nsd/conn.c, nsd/nsd.h, nsd/op.c, nsd/tclvar.c:
	- use const on more occasions

2014-11-03 16:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f5db40228e4)

	* nsd/tcljob.c:
	- don't assume, enum type is the same as int

2014-11-03 12:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d267c09f2c3e)

	* nsd/httptime.c:
	- don't calculate with signed characters

2014-11-03 12:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43d1184d1d40)

	* nsd/random.c:
	- use int instead of char for status information

2014-11-03 12:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c82d84fdc723)

	* nsd/tclvar.c:
	- simplifying NsTclNsvUnsetObjCmd()

2014-11-03 11:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a622fbdd253)

	* include/ns.h, nsd/adpcmds.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/callbacks.c, nsd/conn.c, nsd/cookies.c, nsd/driver.c,
	nsd/event.c, nsd/httptime.c, nsd/pathname.c, nsd/range.c,
	nsd/server.c, nsd/sls.c, nsd/tclconf.c, nsd/tclmisc.c,
	nsd/tclxkeylist.c, nsd/urlspace.c, nsdb/dbdrv.c, nslog/nslog.c:
	- use CHARTYPE macro consistently (digit, alpha)
	- use boolean expressions in conditions with flags
	- avoid reuse of C90 identifier pattern (str[a-z]+)
	- use const on more occasions

2014-11-03 09:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b5c0b519cb3)

	* nsd/tcljob.c:
	- use modern-style Ns_ParseObjv() instead of manual argv parsing for
	ns_job interface, at least, when optional arguments are involved.

2014-11-02 20:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3735acae8cc7)

	* nsd/form.c:
	- use char type in comparison

2014-11-02 20:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b7fb6b06f432)

	* nscp/nscp.c:
	- do not use non-ANSI escape sequences

2014-11-02 20:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (829630d0e27a)

	* include/ns.h, nsd/connio.c, nsd/return.c:
	- use size_t for length of data in Ns_ConnSendChannel(),
	- Ns_ConnSendFd(), Ns_ConnSendFp() like in other functions.
	- make ignoring of results explicit
	- prefer "const" over "CONST" unless in Tcl interface

2014-11-02 19:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17387e47bd2d)

	* nscp/nscp.c, nsd/adpeval.c, nsd/adprequest.c, nsd/compress.c,
	nsd/conn.c, nsd/driver.c, nsd/nsmain.c, nsd/pathname.c,
	nsd/progress.c, nsd/queue.c, nsd/return.c, nsd/tclhttp.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclobjv.c, nsd/tclthread.c,
	nsd/urlopen.c, nsdb/dbdrv.c, nsdb/dbinit.c, nsdbtest/nsdbtest.c,
	nslog/nslog.c, nsproxy/nsproxylib.c, nssock/nssock.c,
	nsthread/rwlock.c:
	- use boolean expressions in conditions of conditional expressions

2014-11-02 18:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (efce67bae68d)

	* nsd/compress.c, nsd/cookies.c, nsd/driver.c, nsd/event.c,
	nsd/limits.c, nsd/nsd.h, nsd/queue.c, nsd/set.c, nsd/str.c,
	nsd/tclset.c, nssock/nssock.c, nsthread/winthread.c:
	- use short types for events/revents to avoid truncations
	- use boolean expressions in conditions of conditional expressions

2014-11-02 17:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7385378edab)

	* nsd/config.c, nsd/driver.c, nsd/exec.c:
	- when ignoring return values of functions, use standard C means

2014-11-02 17:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a2c9da87a449)

	* nscgi/nscgi.c, nsd/adpeval.c, nsd/adprequest.c, nsd/cache.c,
	nsd/compress.c, nsd/config.c, nsd/conn.c, nsd/dns.c, nsd/driver.c,
	nsd/event.c, nsd/index.c, nsd/limits.c, nsd/log.c, nsd/nsmain.c,
	nsd/nswin32.c, nsd/proc.c, nsd/queue.c, nsd/sched.c, nsd/sock.c,
	nsd/sockfile.c, nsd/task.c, nsd/tclcache.c, nsd/tclconf.c,
	nsd/tclenv.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tclmisc.c,
	nsd/tclobjv.c, nsd/tclset.c, nsd/watchdog.c, nsdb/dbinit.c,
	nslog/nslog.c, nsproxy/nsproxylib.c, nsthread/memory.c,
	nsthread/mutex.c, nsthread/nsthreadtest.c, nsthread/winthread.c:
	- use boolean expressions in conditions of conditional expressions

2014-11-02 15:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30ce97793fcb)

	* include/ns.h, nsd/cookies.c:
	- add NS_COOKIE_EXPIRENOW for handling former negative value for
	time_t

2014-11-02 15:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4df15bfc7dbb)

	* nsd/adpeval.c, nsd/auth.c, nsd/tclvar.c, nsd/urlencode.c:
	- reduce implicit signed/unsigned conversions
	- make ignoring of result of Ns_SetPut() explicit

2014-11-02 14:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e950baededb)

	* nsd/tclimg.c, nsd/tclvar.c:
	- don't ignore result of Tcl_Close()
	- reduce implicit conversions

2014-11-02 14:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2212e58cab6a)

	* include/ns.h, nsd/cookies.c:
	- don't pass nagative value to time_t, align implementation ot
	documentation
	- reduce implicit signed/unsigned conversions

2014-11-02 14:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e3289cf992fb)

	* nsd/tclvar.c:
	- reduce scope of variable

2014-11-02 13:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (70059815eeee)

	* nsd/nswin32.c:
	- use distinct bit-patterns for signal detection under windows.

2014-11-02 11:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (276e30cb96c6)

	* nsd/callbacks.c:
	- initialize static variables

2014-11-02 11:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76c43312cfdf)

	* include/ns.h, nsd/urlencode.c:
	- avoid reuse of C90 identifier pattern (str[a-z]+)

2014-11-01 03:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0f52acb0fa67)

	* include/nsthread.h, nscp/nscp.c, nsd/encoding.c, nsd/nsd.h,
	nsd/nswin32.c, nsd/tcljob.c, nsd/unix.c, nsd/uuencode.c:
	- remove casts
	- prefer "const" over "CONST" unless in Tcl interface
	- prefer boolean expressions over expressions of other types
	- ignore result of ReleaseQueue() explicitly
	- reduce implicit signed/unsigned conversions

2014-10-31 21:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7150163013ef)

	* include/ns.h, nscgi/nscgi.c, nsd/config.c, nsd/conn.c, nsd/driver.c,
	nsd/nsd.h, nsd/pidfile.c, nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c,
	nsdb/dbtcl.c, nsdb/nsdb.h, nsproxy/nsproxylib.c:
	- use const on more occasions

2014-10-31 11:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ce9f3868ff9)

	* nscp/nscp.c:
	- remove several casts
	- use "char buf" + UCHAR when needed as on other places

2014-10-31 10:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2b6eb33f97c0)

	* include/ns.h, nscgi/nscgi.c, nscp/nscp.c, nsd/adpcmds.c,
	nsd/adpparse.c, nsd/adprequest.c, nsd/auth.c, nsd/binder.c,
	nsd/callbacks.c, nsd/cls.c, nsd/compress.c, nsd/config.c,
	nsd/connio.c, nsd/cookies.c, nsd/crypt.c, nsd/driver.c, nsd/event.c,
	nsd/fastpath.c, nsd/fd.c, nsd/form.c, nsd/init.c, nsd/limits.c,
	nsd/lisp.c, nsd/log.c, nsd/mimetypes.c, nsd/modload.c, nsd/nsd.h,
	nsd/nsmain.c, nsd/nswin32.c, nsd/op.c, nsd/progress.c, nsd/queue.c,
	nsd/random.c, nsd/request.c, nsd/return.c, nsd/sched.c,
	nsd/server.c, nsd/set.c, nsd/sls.c, nsd/sock.c, nsd/sockcallback.c,
	nsd/sockfile.c, nsd/task.c, nsd/tclcache.c, nsd/tclcallbacks.c,
	nsd/tclconf.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclrequest.c,
	nsd/tclresp.c, nsd/tclsched.c, nsd/tclsock.c, nsd/tclthread.c,
	nsd/tclvar.c, nsd/tclxkeylist.c, nsd/unix.c, nsd/url2file.c,
	nsd/urlencode.c, nsd/urlopen.c, nsd/urlspace.c, nsd/watchdog.c,
	nsdb/dbtcl.c, nsdb/dbutil.c, nsdb/nsdb.c, nslog/nslog.c,
	nsperm/nsperm.c, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c,
	nssock/nssock.c, nsthread/master.c, nsthread/memory.c,
	nsthread/nsthreadtest.c, nsthread/pthread.c, nsthread/reentrant.c,
	nsthread/thread.c, nsthread/winthread.c:
	- prefer boolean expressions over expressions of other types
	- adding nonnull assertions
	- reduce implicit signed/unsigned conversions
	- prefer "const" over "CONST" unless in Tcl interface

2014-10-30 18:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e37a36b5cd0)

	* nsd/tclvar.c, tests/ns_nsv.test:
	- fix array unset bug reported by Andrew Piskorski
	- extend regression test

2014-10-29 12:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41d597bdd3c1)

	* nsd/queue.c, nsproxy/nsproxylib.c:
	- use boolean expressions in asserts

2014-10-29 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0e61d6517fc2)

	* nsd/form.c, nsd/listen.c, nsd/nsconf.c:
	- don't ignore return value of Ns_SockCallback() and
	Ns_SockSetNonBlocking()
	- reduce implicit signed/unsigned conversions

2014-10-29 11:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (13d245e197fa)

	* include/ns.h, nscgi/nscgi.c, nsd/conn.c, nsd/driver.c,
	nsd/fastpath.c, nsd/form.c, nsd/queue.c, nsd/request.c,
	nsd/urlencode.c, nsd/urlopen.c, nslog/nslog.c:
	- make several fields of Ns_Request "const char *"

2014-10-29 10:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (790606e65640)

	* nsd/sched.c:
	- ducoment function in ususal style

2014-10-29 10:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (58c0c37dd2cb)

	* nsd/sched.c:
	- mino cleanup in function produced from former macro

2014-10-29 10:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4141a15ce23b)

	* nsd/nsd.h, nsd/sls.c:
	- make nextSlsId uintptr_d

2014-10-29 10:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33be38896c95)

	* include/ns.h, nsd/request.c:
	- reduce implicit signed/unsigned conversions
	- prefer "const" over "CONST" unless in Tcl interface
	- document urlv construction

2014-10-29 09:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (70c31e05105e)

	* include/ns.h, nscp/nscp.c, nsd/adpparse.c, nsd/cache.c,
	nsd/driver.c, nsd/info.c, nsd/log.c, nsd/nsd.h, nsd/queue.c,
	nsd/sock.c, nsd/task.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclsock.c, nsd/tclthread.c, nssock/nssock.c,
	nsthread/nsthreadtest.c:
	- Use Tcl_Free() instead of ckfree() to free result from
	Tcl_SplitList() as described in the manual
	- use socklen_t consistently (was used sometimes)
	- remove unneeded casts
	- use const on more occasions

2014-10-28 18:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b4a5ac1cb78)

	* include/nsthread.h, nsthread/time.c:
	- use const on more occasions

2014-10-28 18:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10e71e11694e)

	* include/ns.h, nscgi/nscgi.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/auth.c, nsd/config.c, nsd/connio.c, nsd/dns.c, nsd/driver.c,
	nsd/encoding.c, nsd/form.c, nsd/httptime.c, nsd/mimetypes.c,
	nsd/nsd.h, nsd/pathname.c, nsd/request.c, nsd/str.c, nsd/tclmisc.c,
	nsdb/dbtcl.c, nsdb/dbutil.c, nslog/nslog.c:
	- use consistently macro CHARCONV generally for conversions and
	macro CHARTYPE for testing character properties
	- rename misspelled function NsParseAcceptEnconding() to
	NsParseAcceptEncoding()
	- prefer "const" over "CONST" unless in Tcl interface

2014-10-28 09:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17b6e2879f75)

	* nsd/adpeval.c:
	- remove unneeded casts

2014-10-28 09:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3273cb2b9e9)

	* include/ns.h, nsd/request.c:
	- new macro CHARCONV to avoid implicit conversions changing
	signedness and making int-to-char conversion (losing precision)
	explicit

2014-10-27 21:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df670a04cb56)

	* include/ns.h, nsd/connio.c, nsd/request.c, nsd/sched.c, nsd/sock.c:
	- use CHARTYPE macro for testing character properties
	- reduce implicit signed/unsigned conversions
	- use const on more occasions

2014-10-27 21:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec5b6b202b77)

	* include/ns.h, nsd/adpcmds.c, nsd/connio.c, nsd/cookies.c,
	nsd/driver.c, nsd/fastpath.c, nsd/info.c, nsd/queue.c, nsd/sched.c,
	nsd/tclimg.c, nsd/urlencode.c:
	- Don't ignore result of GzipFile()
	- reduce implicit signed/unsigned conversions
	- use const on more occasions

2014-10-27 09:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7e93b380efd5)

	* include/ns.h, nsd/binder.c, nsd/connio.c, nsd/nsd.h, nsd/nswin32.c,
	nsd/sockfile.c, nsd/tclobj.c, nsd/tclsock.c, nsd/tclxkeylist.c,
	nsd/unix.c:
	- use const on more occasions
	- prefer "const" over "CONST" unless in Tcl interface
	- reduce implicit signed/unsigned conversions

2014-10-27 09:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0797872c6481)

	* nsd/request.c:
	- replace unsafe atof() by strtod()

2014-10-27 08:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ed4d99910cc7)

	* nscp/nscp.c, nsd/adpeval.c, nsd/adpparse.c, nsd/binder.c,
	nsd/cache.c, nsd/config.c, nsd/dns.c, nsd/encoding.c,
	nsd/fastpath.c, nsd/form.c, nsd/limits.c, nsd/listen.c, nsd/log.c,
	nsd/op.c, nsd/proc.c, nsd/progress.c, nsd/returnresp.c, nsd/sched.c,
	nsd/sockcallback.c, nsd/tclcache.c, nsd/tclfile.c, nsd/tclhttp.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclset.c, nsd/tclthread.c,
	nsd/tclvar.c, nsdb/dbinit.c, nsdb/dbtcl.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c:
	- prefer boolean expressions over expressions of other types
	(regularizing "isNew" checks)

2014-10-27 08:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (133f3d3b25ed)

	* nsd/adpparse.c, nsd/return.c, nsd/returnresp.c, nsd/tclinit.c,
	nslog/nslog.c, nsperm/nsperm.c, nsproxy/nsproxymod.c:
	- Don't ignore result of Ns_TclRegisterTrace()
	- reduce implicit signed/unsigned conversions

2014-10-26 13:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (752fee02e764)

	* nscgi/nscgi.c, nsd/binder.c, nsd/request.c, nsd/returnresp.c,
	nsd/tclsock.c, nsthread/nsthreadtest.c:
	- replace unsafe atoi() by strtol()

2014-10-26 12:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a47bc2bf2f1)

	* include/ns.h, nsd/request.c:
	- use new macro CHARTYPE to avoid implicit conversions changing
	signedness

2014-10-26 12:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90835c172b3c)

	* include/ns.h, nsd/adpcmds.c, nsd/encoding.c, nsd/exec.c, nsd/info.c,
	nsd/log.c, nsd/sockfile.c, nsd/tclenv.c, nsd/tclfile.c,
	nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c, nsd/tclmisc.c,
	nsd/tclset.c, nsd/tclsock.c, nsd/tclthread.c, nsd/tcltime.c,
	nsd/tclvar.c, nsd/urlopen.c, nsdb/dbtcl.c, nsproxy/nsproxylib.c:
	- use Tcl_DStringResult when appropriate
	- use Tcl_SetObjResult() instead of Tcl_SetResult(..., TCL_VOLATILE);
	- prefer boolean expressions over expressions of other types

2014-10-26 11:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (79bbc681eea7)

	* include/Makefile.build:
	- revert escaped change

2014-10-25 20:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d9b03bdfa43)

	* Makefile.win32, include/Makefile.build, nsd/nsmain.c:
	- simplify logic (no need for separate tests)
	- reactivating thread name settings for other service modes

2014-10-25 20:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ff142d53b5c)

	* nsd/nsmain.c, nsd/nswin32.c:
	Windows improvements:
	- provide error messages with messages strings
	- provide more detailed messages when registering services fails
	- set thread name correctly in service mode

2014-10-25 11:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2debafa5c49)

	* nsd/adpparse.c, nsd/driver.c, nsd/pathname.c, nsd/queue.c,
	nsd/range.c, nsd/server.c, nsd/tclimg.c, nsd/tclsched.c,
	nsd/urlencode.c:
	- reduce number of implicit char/int or unsigned char/char
	conversions

2014-10-25 11:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1df0448b30e0)

	* nsd/tclfile.c:
	- modernize arg parsing of NsTclFTruncateObjCmd() and
	NsTclTruncateObjCmd()

2014-10-24 17:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bfe2608cd8c5)

	* include/ns.h, nsd/adpeval.c, nsd/adprequest.c, nsd/config.c,
	nsd/form.c, nsd/info.c, nsd/nsd.h, nsd/nsmain.c, nsd/queue.c,
	nsd/tclcache.c:
	- remove several casts, dropping "const" property
	- declare more argumemts/results as const

2014-10-24 17:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1667df025cc6)

	* include/ns.h, nscgi/nscgi.c, nsd/binder.c, nsd/driver.c, nsd/exec.c,
	nsd/log.c, nsd/nsd.h, nsd/server.c, nsd/sockfile.c, nsd/tclobjv.c,
	nsd/tcltime.c:
	- declared more arguments const

2014-10-24 11:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (027248c0e54b)

	* nsd/connio.c, nsd/driver.c, nsd/log.c, nsd/nsd.h, nsd/sls.c,
	nsd/sockfile.c:
	- reduce signed/unsigned conversions with potential loss of
	precision

2014-10-24 10:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d29b3e761af)

	* include/ns.h, nscgi/nscgi.c, nsd/binder.c, nsd/cache.c,
	nsd/connio.c, nsd/driver.c, nsd/dstring.c, nsd/exec.c, nsd/form.c,
	nsd/log.c, nsd/main.c, nsd/nsd.h, nsd/queue.c, nsd/set.c,
	nsd/sock.c, nsd/sockfile.c, nsd/tcljob.c, nsd/tclmisc.c,
	nsd/tclobjv.c, nsd/tclthread.c, nsd/tcltime.c, nsd/tclxkeylist.c,
	nsdb/db.h, nsdb/dbdrv.c, nsdb/dbutil.c, nsdb/nsdb.h,
	nsdbtest/nsdbtest.c:
	- use const on more places

2014-10-23 14:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a33da7709091)

	* nsd/adpparse.c, nsd/config.c, nsd/crypt.c, nsd/dns.c,
	nsd/encoding.c, nsd/form.c, nsd/log.c, nsd/nsmain.c, nsd/pathname.c,
	nsd/server.c, nsd/tclmisc.c, nsd/tclsock.c, nsd/tclxkeylist.c:
	- use '\0' instead of 0 for null byte
	- prefer boolean operations over expression of other types in tests

2014-10-23 13:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (220028e7ec17)

	* nsd/tclmisc.c, nslog/nslog.c:
	- use UCHAR macro consistently for islower(), isupper(), tolower(),
	toupper(), isdigit(), and isspace()

2014-10-23 12:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df825377ac4b)

	* - merge

2014-10-23 12:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (83e8a8660db7)

	* nsd/pathname.c, nsd/request.c, nsd/tclimg.c:
	- use UCHAR macro consistently for islower(), isupper(), tolower(),
	toupper() isdigit()

2014-10-22 23:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (efb436be0978)

	* nsd/urlspace.c:
	- make semantics of cascaded "if" more explicit

2014-10-23 12:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d6d1b8efc9b2)

	* nsd/compress.c:
	ä- adjust prototypes, when zlib is not available

2014-10-23 12:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b09020a3924e)

	* nsd/queue.c:
	- add "-service-" to allowed thread names in development mode

2014-10-23 12:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (457a0a3a071e)

	* include/nsthread.h, nsthread/time.c, nsthread/winthread.c:
	- make first argument of Ns_DiffTime const

2014-10-22 23:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (208571705df3)

	* nsd/adpparse.c:
	- remove bug with "ns_adp_ctl stream on"
	- make intended semantics of AppendBlock more clear

2014-10-22 22:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5606c93cf690)

	* nsd/adpparse.c:
	- use ptrdiff_t for difference of pointers
	- AppendBlock() make clear, that arg 3 == NULL is implemented as a
	noop. Probably a bug.

2014-10-22 21:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (98f7558ddd70)

	* include/ns.h, nscgi/nscgi.c, nsd/adpeval.c, nsd/adprequest.c,
	nsd/cache.c, nsd/cookies.c, nsd/event.c, nsd/filter.c, nsd/limits.c,
	nsd/log.c, nsd/nsd.h, nsd/progress.c, nsd/server.c, nsd/sls.c,
	nsd/sock.c, nsd/sockcallback.c, nsd/task.c, nsd/tclcache.c,
	nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c, nsd/tclthread.c,
	nsd/urlspace.c, nsdbtest/nsdbtest.c, nslog/nslog.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c, nsthread/mutex.c, nsthread/reentrant.c,
	nsthread/rwlock.c, nsthread/thread.c, nsthread/winthread.c:
	- reduce signed/unsigned conversions
	- use const on more occasions

2014-10-22 21:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6bf070381f2f)

	* nsd/index.c:
	- arithmetic operations on void* are undefined (gcc extension).
	Avoid these by uase char **.

2014-10-22 20:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a4a42143eb5b)

	* nsd/conn.c, nsd/tclvar.c:
	- use boolean expressions

2014-10-22 18:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc34e6b5506a)

	* openacs-config.tcl:
	- sample config file for openacs: don't use directory path traversal
	for determining whether libthread is available, since this seems to
	cause problems under FreeBSD

2014-10-22 12:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c361645fe812)

	* nsd/tclimg.c, nsd/tcljob.c:
	- reduce signed/unsigend conversions

2014-10-22 10:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6bc371387584)

	* nsd/adpparse.c, nsd/sched.c, nsd/sockfile.c, nsd/tclthread.c,
	nsd/tcltime.c:
	- reduce int to pointer conversins
	- use INT2PTR and PTR2INT more consistently

2014-10-22 09:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (588feb396a61)

	* nsd/nsd.h, nsd/server.c:
	- relax NONNNULL constraints on NsInitServer: 2nd argument can be
	NULL (when called via ServiceMain() under windows)

2014-10-20 21:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55a1e0d261d6)

	* include/ns.h, nscp/nscp.c, nsd/adpeval.c, nsd/cache.c,
	nsd/callbacks.c, nsd/cls.c, nsd/connio.c, nsd/cookies.c,
	nsd/driver.c, nsd/filter.c, nsd/index.c, nsd/limits.c, nsd/lisp.c,
	nsd/nsd.h, nsd/nsmain.c, nsd/sched.c, nsd/set.c, nsd/sls.c,
	nsd/sock.c, nsd/sockcallback.c, nsd/sockfile.c, nsd/task.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclsock.c, nsd/tclthread.c,
	nsd/tclvar.c, nsdb/dbinit.c, nsdb/nsdb.h, nssock/nssock.c:
	- use const on more occasions

2014-10-20 09:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e0bf41c7a0c)

	* nsd/tclobjv.c:
	- fix argument numbering in NS_GNUC_NONNULL

2014-10-20 09:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (357ad750bd35)

	* include/nscheck.h, nsd/adpeval.c, nsd/binder.c, nsd/compress.c,
	nsd/cookies.c, nsd/dns.c, nsd/event.c, nsd/op.c, nsd/tclinit.c,
	nsd/tclresp.c:
	- reduce signed/unsigend conversions
	- avoid reserved word "time" as identifier

2014-10-20 00:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b84a2d0ed34)

	* include/ns.h, include/nsthread.h, nsd/adpeval.c, nsd/adpparse.c,
	nsd/config.c, nsd/driver.c, nsd/encoding.c, nsd/fastpath.c,
	nsd/main.c, nsd/modload.c, nsd/nsd.h, nsd/pathname.c, nsd/request.c,
	nsd/return.c, nsd/rollfile.c, nsd/set.c, nsd/sock.c, nsd/tclcache.c,
	nsd/tclcallbacks.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c,
	nsd/tclobj.c, nsd/tclobjv.c, nsd/tclset.c, nsd/tclsock.c,
	nsd/url2file.c, nsd/urlencode.c, nsd/urlspace.c, nslog/nslog.c,
	nsproxy/nsproxylib.c, nsthread/memory.c, nsthread/pthread.c:
	- use const on more occasions
	- reduce signed/unsigend conversions
	- prefer "const" over "CONST" unless in Tcl interface

2014-10-19 22:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3ad038f4d30d)

	* include/ns.h, nsd/driver.c, nsd/tclobj.c:
	- use const for strings in Ns_ObjvTable and Ns_Driver
	- align types sendwait and recvwait in Ns_Driver with type for
	Ns_Time.seconds (long)
	- reduce signed/unsigend conversions

2014-10-19 21:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (863e431dc481)

	* openacs-config.tcl:
	- openacs sample config file: add parameter hostname to section
	"ns/server/${server}/module/nsssl"

2014-10-19 12:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e852e24ec3a3)

	* include/ns.h, include/nsthread.h, nscp/nscp.c, nsd/adpparse.c,
	nsd/adprequest.c, nsd/cache.c, nsd/callbacks.c, nsd/cls.c,
	nsd/config.c, nsd/crypt.c, nsd/driver.c, nsd/encoding.c,
	nsd/event.c, nsd/exec.c, nsd/info.c, nsd/listen.c, nsd/nsd.h,
	nsd/nsmain.c, nsd/pathname.c, nsd/quotehtml.c, nsd/range.c,
	nsd/request.c, nsd/return.c, nsd/sched.c, nsd/set.c, nsd/sls.c,
	nsd/sockfile.c, nsd/task.c, nsd/tclenv.c, nsd/tcljob.c,
	nsd/tclset.c, nsd/tclthread.c, nsd/urlopen.c, nsdb/dbdrv.c,
	nsdb/dbinit.c, nsdb/nsdb.h, nssock/nssock.c:
	- use const on more occasions
	- adding nonnull assertions
	- prefer "const" over "CONST" unless in Tcl interface

2014-10-19 11:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (26df767676aa)

	* nsd/tclobjv.c:
	- add nonnull assertions

2014-10-19 10:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e0ec0265b598)

	* include/ns.h, nsd/compress.c, nsd/index.c, nsd/pathname.c,
	nsd/sched.c, nsd/tclobjv.c, nsdb/nsdb.h:
	- align function prototypes with function definitions

2014-10-19 10:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8968d55d201)

	* Makefile:
	- don't hardcode .so

2014-10-18 17:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d2bdb90e797a)

	* include/ns.h, nsd/index.c, nsd/tclobjv.c:
	- use const on more occasions
	- adding nonnull assertions

2014-10-18 13:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d66f82fccbba)

	* doc/src/naviserver/ns_cond.man:
	- fix man page for "ns_cond wait"

2014-10-18 13:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2a406c63f41a)

	* nsd/tclthread.c:
	- fix bug in ns_cond reported by Andrew Piskorski; tcl command
	argument parsing was incorrect

2014-10-18 12:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (79a99f16b480)

	* tests/testserver/pages/adp1.adp, tests/testserver/pages/adp2.adp:
	new file.
	* tests/testserver/pages/adp1.adp, tests/testserver/pages/adp2.adp:
	- add missing pages for test adp test cases

2014-10-18 11:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (695b8dae188d)

	* nsd/connio.c, nsd/driver.c, nsd/tclresp.c:
	- fix streaming flag

2014-10-18 11:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68bca8389f2f)

	* include/ns.h, nsd/conn.c, nsd/connio.c, nsd/driver.c,
	nsd/httptime.c, nsd/range.c, nsd/return.c, nsd/tclresp.c:
	- Ns_ConnSetLengthHeader(): make handling of HTML-streaming explicit
	- use const on more occasions
	- adding nonnull assertions
	- reduce signed/unsigend conversions

2014-10-17 19:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f61214c72048)

	* include/ns.h, nsd/return.c:
	- use const on more occasions
	- prefer const over CONST unless in Tcl interface
	- reduce signed/unsigend conversions

2014-10-17 19:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (066d67eb512b)

	* nsd/driver.c:
	- reduce signed/unsigend conversions

2014-10-17 19:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7b1907600899)

	* nsd/return.c:
	- user INT2PTR for integer to pointer conversions

2014-10-17 18:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e27f69a9aef8)

	* include/ns.h, nsd/compress.c, nsd/log.c, nsdb/dbtcl.c:
	- align function prototypes with function definitions

2014-10-17 18:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30d905ba6182)

	* nsd/url2file.c, nsdb/dbinit.c:
	- adding nonnull assertions
	- reduce signed/unsigend conversions
	- use const on more occasions

2014-10-17 18:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa563fed0bf8)

	* include/ns.h, nsd/compress.c, nsd/tclhttp.c:
	- use "const" on more occasions
	- reduce signed/unsigend conversions

2014-10-17 13:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a0f3338087d)

	* nsd/driver.c:
	- prefer Boolean values
	- reduce number of reserved word conflicts by using camel case

2014-10-17 13:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8c4edafbb18)

	* include/ns.h, nsd/driver.c, nsd/nsd.h:
	- use "const" on more arguments

2014-10-17 13:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (128bf9e81b2a)

	* nsd/return.c, nsd/sock.c, nsd/task.c:
	- reduce signed/unsigned conflicts

2014-10-17 13:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (771d6fe6f176)

	* nscp/nscp.c:
	- fix indentation

2014-10-17 12:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03b281f6a632)

	* doc/src/naviserver/ns_addrbyhost.man, nsd/tclsock.c:
	- use Ns_ParseObjv for NsTclGetAddrObjCmd() and NsTclGetAddrObjCmd()
	instead of ad-hoc parsing.
	- document option "-all" of function "ns_addrbyhost"

2014-10-17 12:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b63716c71a4d)

	* nsthread/mutex.c:
	- more cleanup in mutex.c:
	  * make mutex timings configurable (e.g. via defines during
	compilation)
	  * document NS_NO_MUTEX_TIMING
	  * don't leave undefined variables when NS_NO_MUTEX_TIMING is turned on

2006-03-28 19:48 +0100  Andrew Piskorski  <atp@piskorski.com>  (3ee16203924f)

	* nsd/log.c:
	(Ns_LogRoll): fix logrolling on Win32 (bug # 994224)

	Uses a simplified version of Dossy's bug-994224-v409a-
	patch-20040928.txt patch. (transplanted from
	40cdd73ec6a44782929eaad8af3e37b07af7ba99)

2006-03-28 19:35 +0100  Andrew Piskorski  <atp@piskorski.com>  (1aa531e639c7)

	* nsd/pathname.c:
	Fix Ns_NormalizePath() for //foo/bar paths on Win32 (bug #1162890)
	(transplanted from b0fe3532af28b729dead9f9c3637e1ac97611a13)

2014-10-17 11:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe175eb617d7)

	* nsd/tclsock.c:
	- use same objv definition as in Tcl

2014-10-13 10:44 -0400  Andrew Piskorski  <atp@piskorski.com>  (44e5e317b02d)

	* nsd/tclsock.c:
	Fix broken 2005-02-16 rev 1097:3d984c89b332, which bogusly smashed
	over the Ns_GetAllAddrByHost() [ns_addrbyhost -all] support added
	2004-12-06 in rev 1092:89882a8e77bc.

2014-10-13 04:31 -0400  Andrew Piskorski  <atp@piskorski.com>  (92e4c9755fca)

	* tcl/sendmail.tcl:
	Remove trailing whitespace, only.

2014-10-12 14:39 -0400  Andrew Piskorski  <atp@piskorski.com>  (40f014f1cc45)

	* Makefile.win32:
	Better control of whether to append to or smash over LIB and
	INCLUDE.

2014-10-17 11:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fa3f902c73b9)

	* Makefile.win32:
	- fix merge conflict

2014-10-11 09:16 -0400  Andrew Piskorski  <atp@piskorski.com>  (3d913f61d7b6)

	* Makefile.win32:
	Add the nsssl module.

2014-10-11 09:04 -0400  Andrew Piskorski  <atp@piskorski.com>  (70d09740964d)

	* Makefile.win32:
	Do not explicitly INCLUDE to child nmakes. Doing so was breaking the
	nsssl build, although I don't entirely understand why.

2014-10-17 11:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c833152a50c)

	* Makefile.win32:
	- fix merge conflict

2014-10-11 06:36 -0400  Andrew Piskorski  <atp@piskorski.com>  (5fe554002882)

	* Makefile.win32:
	Add support for building add-on modules.

2014-10-08 18:04 -0400  Andrew Piskorski  <atp@piskorski.com>  (b61082996b35)

	* nsthread/mutex.c:
	Make it easier to toggle mutex timings on/off.

2014-10-17 10:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d20df74f516d)

	* include/ns.h, nsd/tclcache.c, nsd/tclcallbacks.c, nsd/tclcmds.c,
	nsd/tclobjv.c, nsd/tclrequest.c:
	- use "const" on more occasions
	- avoid reserved word "time" as identifier
	- reduce signed/unsigend conversions

2014-10-17 09:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (46e216a0586f)

	* nsd/tclcmds.c:
	- ignore function result

2014-10-16 21:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d22a8a67b03)

	* include/ns.h, nsd/sock.c, nsd/tclmisc.c, nsd/tclobjv.c:
	- reduce singed/unsigend conversions
	- use const on more occasions
	- align var names in prototypes with var names in function definitions
	- follow posix naming for send() and recv() arguments

2014-10-16 19:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (053f5e8ed1f3)

	* nsd/return.c:
	- remove hard-coded MIME-Version from headers

2014-10-16 09:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (72b9fbac08d6)

	* nsthread/nsthreadtest.c:
	- fix for bug in nsthreadtest when compiled with Tcl 8.5 or newer

2014-10-16 09:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a623bc3c4d7)

	* nsdb/dbinit.c:
	- undo part of removal of seemingly unused variables since these
	have consequences for the actual db drivers

2014-10-15 17:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (93fb840d6080)

	* include/ns.h, nsd/set.c, nsd/tclset.c:
	- use const for more arguments

2014-10-15 16:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aa6f0ccdecdb)

	* nsd/adpeval.c, nsd/adprequest.c, nsd/nsd.h:
	- declare more arguments as "const"

2014-10-15 16:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cfc18bfb0690)

	* nsd/driver.c:
	- used boolean expressions in asserts
	- make constants unsigned

2014-10-15 16:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5cd835d7b433)

	* nsd/tclxkeylist.c:
	- add const to definition

2014-10-15 16:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ea34189efb7)

	* nsd/nswin32.c:
	- avoid shadowing of variable names

2014-10-15 16:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e674db0cce59)

	* nsd/tclobjv.c:
	- reduce singed/unsigned operations

2014-10-15 16:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6145ce6e0229)

	* nsd/crypt.c:
	- avoid adding or shifting by 0

2014-10-15 16:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e845404751f)

	* nsdb/dbutil.c, nsdb/nsdb.h:
	- add nonnull assertions

2014-10-15 16:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07fdce652bcc)

	* nscp/nscp.c, nsd/tcljob.c:
	- reduce signed/unsigned conversions

2014-10-15 11:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (04474aa27e4f)

	* include/ns.h, nsd/proc.c:
	- use const for proc descriptions

2014-10-15 10:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (941fed9c2bbf)

	* nsperm/nsperm.c:
	- donÄt ignore noinherit (seemingly old bug)

2014-10-15 10:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63434ffdc50d)

	* nsd/proc.c:
	- undo change of using & in front for function pointers due to
	seemingly contradictory warnings from lint: "Suspicious use of &:
	Since names of functions by themselves are promoted to address, the
	use of the & is redundant" vs. "function identifier used without „&‟
	or parenthesized parameter list"

2014-10-15 10:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b67d934ade1a)

	* nsd/adprequest.c:
	- initialize variable

2014-10-15 09:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (663e227105a3)

	* include/nsthread.h, nsthread/time.c:
	- further cleanup of Ns_GetTime()
	- added nonnull assertions

2014-10-15 08:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6f3dc1269234)

	* nsd/adpcmds.c, nsd/adprequest.c, nsd/fastpath.c, nsd/index.c,
	nsd/limits.c, nsd/nsmain.c, nsd/tclcache.c, nsd/tclhttp.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclrequest.c,
	nsd/tclresp.c, nsd/tclvar.c, nsperm/nsperm.c:
	- use INT2PTR consistently for Ns_ObjvBool

2014-10-14 18:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e26b96edc2fc)

	* nsd/tclsched.c:
	- use macro INT2PTR for integer to pointer conversions

2014-10-14 18:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69961eece633)

	* nsd/urlspace.c:
	- use expicit cats for into to size_t conversions

2014-10-14 18:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9edeca226cda)

	* nsd/tclset.c:
	- use unsigned int for flags

2014-10-14 18:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f98f1dea07a8)

	* nsd/return.c:
	- reduce signed / unsigned conversions

2014-10-14 18:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b1be51dda892)

	* nscgi/nscgi.c:
	- remove unneeded struct

2014-10-14 17:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e5bf7e484c51)

	* include/ns.h, nsd/info.c, nsd/nsd.h, nsd/queue.c, nsd/sock.c,
	nsd/tclinit.c:
	- use ssize_t for recv()
	- reduce impliced unsigned/signed conversions
	- use const for more arguments

2014-10-14 17:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (276fd62658ee)

	* nsd/nsd.h:
	- remove redundant definition

2014-10-14 17:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (389047054376)

	* nsd/proc.c:
	- specify function pointers with &-operator

2014-10-14 08:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e75609d03b5)

	* nsd/nsconf.c:
	- remove cast

2014-10-14 08:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (04b05df3c4ab)

	* nsd/sockfile.c, nsd/tclxkeylist.c:
	- use const on more occasions

2014-10-14 01:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f9b9f664497)

	* nsd/log.c:
	- use INT2PTR more frequently

2014-10-14 01:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56418d2a14d5)

	* nsd/adpeval.c, nsd/config.c, nsd/exec.c, nsd/tclhttp.c,
	nsd/tclimg.c, nsd/tclset.c:
	- make sure, local variables are always initialized

2014-10-14 00:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (accca6100c02)

	* nsd/driver.c, nsd/rollfile.c, nsd/tclimg.c, nsd/tcljob.c,
	nsd/tclmisc.c:
	- reduce signed/unsigned conversions

2014-10-14 00:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d31e140a75a)

	* nsd/tclrequest.c, nsd/url2file.c:
	- fix flag handling, use INT2PTR macro

2014-10-14 00:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92a609678c3b)

	* nsd/tclxkeylist.c:
	- brace body of for-loop

2014-10-14 00:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d02d45a402bd)

	* nscp/nscp.c, nsd/connio.c, nsd/httptime.c, nsd/lisp.c,
	nsd/modload.c, nsd/nsmain.c, nsd/queue.c, nsd/tclhttp.c,
	nsd/tcljob.c, nsd/uuencode.c, nsdb/dbdrv.c:
	- reduce unused assignments

2014-10-13 23:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dcc00593b6f2)

	* nsd/urlencode.c:
	- use character type for character value

2014-10-13 23:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0aeebd47f6b6)

	* nsd/fd.c:
	- remove redundant defines

2014-10-13 23:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86197c4f79fa)

	* nsd/set.c, nsd/tclvar.c:
	- name parameters in prototype

2014-10-13 23:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e58c1c246b74)

	* nsd/nsmain.c, nsd/random.c:
	- initialize static variables

2014-10-13 23:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2818e9c46f67)

	* nsd/info.c, nsd/tclhttp.c:
	- remove unneeded external references

2014-10-13 23:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (64aa84bfc9f7)

	* nscgi/nscgi.c, nsd/binder.c, nsd/cache.c, nsd/driver.c, nsd/exec.c,
	nsd/info.c, nsd/nswin32.c, nsdb/dbinit.c:
	- remove unused symbols and stucture members

2014-10-13 23:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aed0130f9ae0)

	* include/ns.h, nsd/adprequest.c, nsd/dns.c, nsd/driver.c,
	nsd/event.c, nsd/request.c, nsd/task.c, nsd/tclimg.c:
	- reduce singed unsigned conversions

2014-10-13 23:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d016b55defc)

	* nsd/adpparse.c:
	- use const for more strings and structures

2014-10-13 23:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (22cfac294a59)

	* nslog/nslog.c:
	- make flag value unsigned, use hex notation

2014-10-13 21:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (691627abbab0)

	* nscgi/nscgi.c:
	- improve comment density

2014-10-13 21:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a26e363dc29)

	* nsd/tclset.c:
	- fix newly introduced bug

2014-10-13 16:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (187e3eafd792)

	* nsd/driver.c, nsd/log.c, nsd/tcljob.c:
	- remove shadowing of variables

2014-10-13 16:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b44510b0c2e)

	* tests/ns_set.test:
	- fix consequences of removal of useless ns_set option purge

2014-10-13 15:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5206c44b0de3)

	* nsd/adpparse.c, nsd/binder.c, nsd/compress.c, nsd/driver.c,
	nsd/tclmisc.c:
	- remove unused preprocessor defines

2014-10-13 15:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3701a40c86ad)

	* nsd/nsd.h:
	- remove old-style function prototypes

2014-10-13 15:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4f1a7d5736f9)

	* nsd/encoding.c, nsd/log.c, nsd/sockcallback.c, nsd/tclcache.c,
	nsd/tclfile.c, nsd/tclobjv.c, nsd/tclresp.c, nsd/tclsock.c:
	- UNUSED polishing

2014-10-13 09:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e46eabd3c9b1)

	* include/ns.h, nscp/nscp.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/auth.c, nsd/callbacks.c, nsd/cls.c, nsd/compress.c,
	nsd/driver.c, nsd/encoding.c, nsd/exec.c, nsd/filter.c, nsd/form.c,
	nsd/index.c, nsd/log.c, nsd/mimetypes.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/nswin32.c, nsd/range.c, nsd/return.c, nsd/rollfile.c,
	nsd/sched.c, nsd/server.c, nsd/sock.c, nsd/sockfile.c, nsd/str.c,
	nsd/task.c, nsd/tcljob.c, nsd/tclobjv.c, nsd/tclset.c,
	nsd/tclsock.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/uuencode.c,
	nsdb/db.h, nsdb/dbtcl.c, nsdb/nsdb.h:
	- remove unneeded symbols
	- align names in prototypes and function definitions

2014-10-12 21:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f0df3b494cc)

	* include/ns.h, nsd/auth.c, nsd/crypt.c, nsd/dns.c, nsd/httptime.c,
	nsperm/nsperm.c:
	- use "const" for more strings

2014-10-12 21:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3c752e9c61f)

	* nscgi/nscgi.c:
	- use size_t for sizes

2014-10-12 20:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (18a6c2d63cba)

	* nsd/driver.c, nsd/nsd.h:
	- use size_t for maxsize and bufsize in DrvWriter and Driver

2014-10-12 20:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (158f9c9ade60)

	* nscp/nscp.c:
	- fix indentation

2014-10-12 16:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe042522b4ee)

	* nsd/tclset.c:
	- remove unreferenced enumeration value

2014-10-12 16:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (66beefc0b22e)

	* nsdb/dbutil.c:
	- remove unreachable code

2014-10-12 16:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bafd894627b0)

	* nsd/log.c:
	- initialize variable explicitlely

2014-10-12 16:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (758dbc024c37)

	* nscp/nscp.c, nsd/lisp.c, nsd/tclmisc.c, nsdb/dbdrv.c:
	- brace body of if statements

2014-10-12 15:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ede1bbbac8dd)

	* nsd/crypt.c:
	- brace for loops

2014-10-12 15:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c23a7a454b2)

	* nsd/limits.c, nsd/nsmain.c, nsd/tclvar.c, nsd/urlspace.c:
	- adding missing "static" declarations

2014-10-12 15:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e2797f29b281)

	* nsd/urlspace.c:
	- adding missing "static"

2014-10-12 15:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3c65ea90506)

	* include/ns.h, include/nsthread.h, nscgi/nscgi.c, nsd/adpparse.c,
	nsd/config.c, nsd/driver.c, nsd/encoding.c, nsd/fastpath.c,
	nsd/limits.c, nsd/log.c, nsd/modload.c, nsd/proc.c, nsd/quotehtml.c,
	nsd/task.c, nsd/tclconf.c, nsd/tclinit.c, nsd/tclmisc.c,
	nsd/tclobj.c, nsd/tclobjv.c, nsd/tclrequest.c, nsd/tclsched.c,
	nsd/tclthread.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/url2file.c,
	nsd/urlencode.c, nsd/urlopen.c:
	- use INT2PTR and PTR2INT more consistently
	- reduce signed/unsigend operations
	- used unsigned types for bitwise operations

2014-10-12 13:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2937f657fa34)

	* nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/nsdb.h:
	- make char* pool const
	- use PTR2INT and INT2PTR for int/pointr conversions

2014-10-12 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2dd4fd10de50)

	* nsdb/nsdb.c, nsdbtest/nsdbtest.c, nslog/nslog.c, nsperm/nsperm.c,
	nsproxy/nsproxymod.c, nssock/nssock.c:
	- make Ns_ModuleVersion constant

2014-10-11 21:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d45d65e4c17)

	* include/ns.h, include/nsthread.h, nsd/connio.c, nsd/driver.c,
	nsd/pathname.c, nsd/sock.c:
	- align variable names

2014-10-11 21:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (32f12e13a5db)

	* nsd/tclmisc.c:
	- reduce number of sign conversions

2014-10-11 21:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (340011c98f98)

	* nsd/urlspace.c:
	- prefer boolean expressions

2014-10-11 21:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b1933a875c7)

	* nsd/nsmain.c:
	- remove unused variable from unix-part

2014-10-11 21:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d8dfb968b6af)

	* nsd/crypt.c:
	- remove octal constants

2014-10-11 21:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0fa180dccbba)

	* nsd/uuencode.c:
	- use hex rather than octal constants

2014-10-11 16:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb29e6963cd5)

	* include/ns.h, nscp/nscp.c, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adpparse.c, nsd/adprequest.c, nsd/auth.c, nsd/conn.c,
	nsd/cookies.c, nsd/driver.c, nsd/encoding.c, nsd/fastpath.c,
	nsd/form.c, nsd/httptime.c, nsd/info.c, nsd/limits.c, nsd/log.c,
	nsd/mimetypes.c, nsd/modload.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/pathname.c, nsd/progress.c, nsd/queue.c, nsd/quotehtml.c,
	nsd/random.c, nsd/sls.c, nsd/tclcache.c, nsd/tclcallbacks.c,
	nsd/tclconf.c, nsd/tclenv.c, nsd/tclfile.c, nsd/tclhttp.c,
	nsd/tclimg.c, nsd/tclinit.c, nsd/tcljob.c, nsd/tclmisc.c,
	nsd/tclobjv.c, nsd/tclrequest.c, nsd/tclresp.c, nsd/tclsched.c,
	nsd/tclset.c, nsd/tclsock.c, nsd/tclthread.c, nsd/tcltime.c,
	nsd/tclvar.c, nsd/tclxkeylist.c, nsd/url2file.c, nsd/urlencode.c,
	nsd/urlopen.c, nsdb/dbtcl.c, nslog/nslog.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c:
	- switch to the notation of Tcl_ObjCmdProc and Tcl_CmdProc as
	defined in tcl.h in Tcl 8.5.*

2014-10-11 15:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eb692d9a2a90)

	* nsd/adprequest.c:
	- assert on locally used variables

2014-10-11 15:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a7c24ffcee23)

	* nscgi/nscgi.c, nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/event.c, nsd/form.c, nsd/nsd.h, nsd/pathname.c, nsd/random.c,
	nsd/task.c, nsd/tclimg.c, nsd/tclinit.c, nsd/tclrequest.c,
	nsd/tclsched.c, nsd/tclvar.c, nsd/url2file.c, nsd/uuencode.c,
	nslog/nslog.c:
	- reduce implicit signed/unsigned conversions

2014-10-11 14:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17bfff33660c)

	* include/ns.h, nsd/adpparse.c, nsd/cookies.c, nsd/crypt.c,
	nsd/fastpath.c, nsd/sock.c, nsd/sockfile.c, nsd/tclcmds.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclobjv.c, nsd/tcltime.c,
	nsdb/dbdrv.c, nsdb/dbtcl.c:
	- add missing function prototypes

2014-10-11 14:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5ce9c9c8803)

	* nsd/index.c:
	- bsearch is available in newer versions of MSVC.
	- add missing function prototypes

2014-10-11 13:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (144e693932fa)

	* include/ns.h, nsd/driver.c:
	- remove old-style function declaration
	- remove uneeded variable

2014-10-11 13:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e4e24027906f)

	* nsd/tclxkeylist.c:
	- remove unnecessary function (not included in any .h file)
	- made functions not defined in any .h file static and define function
	prototypes

2014-10-11 13:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23bf87a9a7d2)

	* include/ns.h, nsd/modload.c, nsd/nsd.h, nsd/tclinit.c:
	- rename NS_TclCreateInterp to NsTclCreateInterp to follow naming
	conventions and move function to internal usage (nsd.h)

2014-10-11 12:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7df35bf03bc3)

	* nsd/tclfile.c:
	- remove unneeded static function

2014-10-11 12:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7329c9fad0e3)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/conn.c, nsd/cookies.c,
	nsd/driver.c, nsd/encoding.c, nsd/fastpath.c, nsd/form.c,
	nsd/httptime.c, nsd/limits.c, nsd/log.c, nsd/main.c,
	nsd/mimetypes.c, nsd/nsd.h, nsd/nsmain.c, nsd/nswin32.c,
	nsd/pathname.c, nsd/pidfile.c, nsd/progress.c, nsd/quotehtml.c,
	nsd/random.c, nsd/return.c, nsd/sched.c, nsd/sls.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/tclcache.c, nsd/tclcallbacks.c,
	nsd/tclconf.c, nsd/tclenv.c, nsd/tclfile.c, nsd/tclimg.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobjv.c,
	nsd/tclrequest.c, nsd/tclresp.c, nsd/tclsched.c, nsd/tclsock.c,
	nsd/tcltime.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/urlencode.c,
	nsd/urlspace.c, nsdb/dbtcl.c, nsdbtest/nsdbtest.c:
	- flag all unsed parameters in function heads
	- use macro UNUSED as uniform mechanism (instead of naming parameters
	"dummy" or "ignored", ...)
	- add more nonnull assertions

2014-10-11 09:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33453ce6b295)

	* include/ns.h, nscgi/nscgi.c, nsd/adpparse.c, nsd/connio.c,
	nsd/log.c, nsd/nswin32.c, nsd/tclvar.c:
	- addressing signed/unsigned divides and relational operators

2014-10-10 13:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c032a9d5a6f)

	* include/Makefile.win32:
	- remove flag /D "NO_CONST=1" and /D _CRT_NONSTDC_NO_DEPRECATE from
	flags from windows build

2014-10-10 13:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1f4e52b30faf)

	* nsd/encoding.c:
	- change CONST -> const

2014-10-10 12:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ee4753ccae0e)

	* include/nsthread.h, nscp/nscp.c, nsd/binder.c, nsd/conn.c,
	nsd/dns.c, nsd/driver.c, nsd/index.c, nsd/listen.c, nsd/nsmain.c,
	nsd/nswin32.c, nsd/sock.c, nsd/tclhttp.c, nsd/tclsock.c,
	nsd/urlopen.c, nssock/nssock.c:
	- change from usage of INVALID_SOCKET (windows predefined constant)
	to NS_INVALID_SOCKET due to confusion under MinGW

2014-10-10 11:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ddc47151480)

	* include/ns.h, include/nsthread.h, nsd/index.c, nsd/set.c,
	nsd/tclcallbacks.c, nsd/tclresp.c, nsd/tclthread.c, nsd/urlspace.c,
	nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c:
	- name parameters in declarations

2014-10-10 11:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc0a07678454)

	* nscp/nscp.c, nsd/adpcmds.c, nsd/binder.c, nsd/conn.c, nsd/driver.c,
	nsd/encoding.c, nsd/event.c, nsd/httptime.c, nsd/info.c,
	nsd/limits.c, nsd/log.c, nsd/mimetypes.c, nsd/queue.c, nsd/return.c,
	nsd/sls.c, nsd/task.c, nsd/tclcache.c, nsd/tclcmds.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclset.c, nsd/tclthread.c,
	nsd/tcltime.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/urlencode.c,
	nsd/uuencode.c, nsdb/dbtcl.c, nslog/nslog.c:
	- const-ify more variables
	- use "const" rather than "CONST" when not required from Tcl interface

2014-10-10 10:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (142743f74cea)

	* nsd/tclimg.c:
	- define variables as const

2014-10-10 10:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (77817ba7d4dd)

	* nsd/tclimg.c:
	- initializae value, fix order

2014-10-10 10:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (333ce424833c)

	* nsd/conn.c, nsd/dstring.c, nsd/nsd.h, nsd/tclresp.c, nsd/tclsched.c,
	nsd/tclsock.c:
	- use unsigned types for flags

2014-10-10 10:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8e135f9ad2e)

	* include/ns.h, nsd/tclrequest.c:
	- use unsigned type fir flags

2014-10-10 10:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d38ac84034e3)

	* nsd/adprequest.c:
	- add nonnull assertions
	- use unsigned type for flags

2014-10-10 09:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (34d1ba42f5a6)

	* include/ns.h, nsd/nswin32.c:
	- GetLastError() returns a DWORD, not int

2014-10-10 09:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aba77fb246ec)

	* nsd/nswin32.c, nsd/tclimg.c:
	- reduce number of unsigned -> signed conversions

2014-10-10 08:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f1cebe6562b)

	* include/nsthread.h, nsd/driver.c, nsd/nsd.h:
	- use dup() instead of ns_sockdup() on non-socket file descriptors

2014-10-10 08:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7403078d5097)

	* nsd/task.c:
	- use unsigned type for bit operations

2014-10-09 14:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (013ed61a413e)

	* nsd/connio.c:
	- rename variables to camel-case

2014-10-09 14:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be83760f8a66)

	* nsd/nsd.h:
	- make flags unsigned

2014-10-09 13:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb324a1917f2)

	* nsd/sock.c:
	- windows returns sometimes an INVALID socket but keeps errno 0.
	Don't complain in such cases in the error.log

2014-10-09 10:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cee9d0676321)

	* include/nsthread.h, nsd/unix.c, nsthread/signal.c:
	- adding nonnull assertions

2014-10-09 09:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (802bacdbde17)

	* include/ns.h, nsd/conn.c, nsd/connio.c, nsd/driver.c,
	nsd/pathname.c, nsd/queue.c, nsd/range.c, nsd/request.c,
	nsd/sockfile.c, nsd/tclhttp.c, nsd/tclresp.c, nsd/tclvar.c,
	nsd/urlspace.c, nssock/nssock.c, nsthread/mutex.c:
	- reduced potential signed/unsignedess problems in arithmethic
	operations and comparisons
	- adding nonnull assertions
	- improve variable namings

2014-10-08 21:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33390fe57353)

	* nsd/driver.c, nsd/nsd.h, nsd/tclcache.c, nsd/tclmisc.c:
	- add function prototypes
	- add nonnull assertions

2014-10-08 13:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aecf84685138)

	* nsd/log.c, nslog/nslog.c:
	- fix argument passing in case sizes of time_t and long differ (fix
	for bug n windows reported by andrew)

2014-10-08 13:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b48d208a4fae)

	* nsd/sockfile.c:
	- improve shift operation in case offset is a 32bit quantity

2014-10-08 13:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f38c000711b)

	* nsthread/reentrant.c:
	- provide error messages in case gmtime_s or ctime_s fails

2014-10-08 13:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2826b133e2ee)

	* nsthread/time.c:
	- deactivate msvc platform version by default

2014-10-08 10:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a07ac5f6256)

	* include/ns.h:
	- add missing definition, sort order of definitions

2014-10-08 10:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15c95a82c25b)

	* nsd/sockfile.c:
	- fix function definition

2014-10-08 10:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7e12cc06dd3c)

	* nsd/tclresp.c:
	- add nonnull assertions

2014-10-08 09:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0abebf39806)

	* nsd/sockfile.c:
	- address potential problem in windows code

2014-10-08 09:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06e9da998059)

	* nsthread/reentrant.c:
	- fix syntax

2014-10-08 08:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e1a9856defce)

	* nsd/tclenv.c:
	- fix function names in comment

2014-10-07 12:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d9f9473ace8d)

	* nsthread/winthread.c:
	- provide casts for thread exit code handling

2014-10-07 12:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ae07e78d878)

	* include/nsthread.h:
	- move block of underscore definition into native windows block

2014-10-07 12:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c9ac9cc7141)

	* nsthread/time.c:
	- correct "#elseif"

2014-10-07 11:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b597be6006e1)

	* include/nsthread.h, nsthread/mutex.c, nsthread/reentrant.c,
	nsthread/time.c:
	- provide better distinction between MSVC build and cygwin/mingw
	builds. _WIN32 is set for both. Native windows build should check
	for _MSC_VER.

2014-10-07 11:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3f88f706a61)

	* nsd/compress.c:
	- fix types, when zlib is not defined

2014-10-07 11:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d2e4c734a529)

	* include/Makefile.global.in:
	- remove rpath struggles, which have sneaked in

2014-10-06 23:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ba02284c802)

	* nsthread/mutex.c:
	- deactivate mutex timings for the time being under windows

2014-10-06 22:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (963b49012470 <clean>)

	* Closing old branch

2014-10-06 22:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a78e3e0b15a)

	* nsd/nsd.h, nsd/nswin32.c:
	- remove unneeded code

2014-10-06 22:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f44ef01d075c)

	* include/Makefile.win32:
	- use "ns" as default root directory name like on other platforms

2014-10-06 22:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (023223ed1236)

	* nssock/nssock.c:
	- remove deactivated debug statements
	- keep code more local

2014-10-06 22:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ee12d24904d8)

	* include/nsthread.h, nsthread/reentrant.c:
	Merged in apiskors/naviserver/clean (pull request #3)

2014-10-04 05:32 -0400  Andrew Piskorski  <atp@piskorski.com>  (4d0e406c70c6)

	* include/Makefile.global.in:
	Merge in Ns_GetTime() fix from clean. Keep rpath hack.

2014-10-04 01:41 -0400  Andrew Piskorski  <atp@piskorski.com>  (51f1735d788d <clean>)

	* nsthread/time.c:
	In Ns_GetTime(), add back Windows implementation removed by Zoran on
	2007-09-29 in changeset 2009:4bf1ee6ebf84.

2014-10-03 07:57 -0400  Andrew Piskorski  <atp@piskorski.com>  (5a01d1f539db <clean>)

	* include/Makefile.build:
	Oops, revert accidental commit that turned on Makefile.win32 by
	default.

2014-10-03 07:46 -0400  Andrew Piskorski  <atp@piskorski.com>  (8421fc33ddfe <clean>)

	* include/Makefile.global.in:
	Back out rpath hack.

2014-10-03 07:40 -0400  Andrew Piskorski  <atp@piskorski.com>  (9e98d3b9203d <clean>)

	* include/Makefile.build:
	New branch, clean sources suitable for pushing upstream.

2014-10-02 13:20 -0400  Andrew Piskorski  <atp@piskorski.com>  (aa80fd56bd71)

	* include/Makefile.win32:
	Remove the "/EXPORT:Ns_ModuleInit" link flag, it is unnecessary and
	causes LNK4197 "export specified multiple times" warnings.

2014-10-02 13:05 -0400  Andrew Piskorski  <atp@piskorski.com>  (935b31ed3777)

	* include/Makefile.win32:
	On Windows strip the .so from module names so the file will be named
	e.g., "nscgi.dll" not "nscgi.so.dll".

2014-10-01 15:38 -0400  Andrew Piskorski  <atp@piskorski.com>  (f4c8f2738335)

	* nsthread/reentrant.c:
	The recently added Ns_Log() in the Windows version of ns_asctime()
	causes an unresolved external link error, so comment it out.

2014-10-01 12:38 -0400  Andrew Piskorski  <atp@piskorski.com>  (215dbf64adb0)

	* include/nsthread.h, nsd/driver.c, nsd/nsd.h, nsd/nswin32.c,
	nsd/queue.c, nssock/nssock.c:
	Merge in all upstream changes through 2014-09-29. This completely
	replaces my local (in fork) changes to nsd/driver.c and nsd/queue.c.

2014-09-25 22:07 -0400  Andrew Piskorski  <atp@piskorski.com>  (5980624443a5)

	* include/nsthread.h, nsd/driver.c, nsd/nsd.h, nsd/nswin32.c,
	nsd/queue.c:
	Merged in latest naviserver/naviserver head (default branck) changes
	from Gustaf.

2014-09-25 21:33 -0400  Andrew Piskorski  <atp@piskorski.com>  (740cbcbe119e)

	* include/Makefile.win32:
	Set DLL from MOD when that makes sense.

2014-09-25 21:31 -0400  Andrew Piskorski  <atp@piskorski.com>  (c0fe0932724f)

	* nssock/nssock.c:
	Move DWORD n1 declaration to where the Microsoft compiler allows it.

2014-09-25 21:16 -0400  Andrew Piskorski  <atp@piskorski.com>  (e42e8ea60a60)

	* nsd/nswin32.c:
	Add fake mkstemp() stub so I can continue Windows build debugging.

2014-09-25 21:03 -0400  Andrew Piskorski  <atp@piskorski.com>  (6bae5ae8bd40)

	* nsd/Makefile:
	Oops, left in bogus temporary comment when committing the LIBOBJS
	fix.

2014-09-25 17:57 -0400  Andrew Piskorski  <atp@piskorski.com>  (fc4729103ea9)

	* include/Makefile.global.in:
	Hack in rpath support.

2014-09-25 17:44 -0400  Andrew Piskorski  <atp@piskorski.com>  (993e2a8c6f5f)

	* include/Makefile.win32, nsd/Makefile:
	Set LIBOBJS directly to fix 'cycle in macro definition' error for
	OBJS on Windows.

2014-09-25 17:29 -0400  Andrew Piskorski  <atp@piskorski.com>  (710da5bf9fbe)

	* include/Makefile.global.in, include/Makefile.module.in,
	nsd/Makefile, nsdb/Makefile, nsproxy/Makefile, nsthread/Makefile:
	Rename makefile LIB variable to LIBNM. This fixes conflicts with the
	Windows linker LIB environment variable.

2014-09-25 16:53 -0400  Andrew Piskorski  <atp@piskorski.com>  (12ca4417aea8)

	* include/Makefile.win32:
	The nsd does not export Ns_ModuleInit either.

2014-09-25 16:49 -0400  Andrew Piskorski  <atp@piskorski.com>  (ef0d3a7231e6)

	* Makefile.win32:
	Default DEBUG to 1.

2014-09-25 16:44 -0400  Andrew Piskorski  <atp@piskorski.com>  (f1ad65f47daf)

	* Makefile.win32:
	Use nmake macro string substitution to reduce boilerplate and let us
	build individual modules at a time.

2014-09-25 15:33 -0400  Andrew Piskorski  <atp@piskorski.com>  (bddcd095d586)

	* include/Makefile.build:
	Show where we do the manual switch between Makefile.module and
	Makefile.win32.

2014-09-23 22:40 -0400  Andrew Piskorski  <atp@piskorski.com>  (3d722f75a853)

	* nsd/queue.c:
	Fix bogus inline declaration of wrPtr.

2014-09-23 22:28 -0400  Andrew Piskorski  <atp@piskorski.com>  (ef85aa03c5fb)

	* nsd/nsd.h:
	Define SHUT_WR on Windows.

2014-09-23 22:27 -0400  Andrew Piskorski  <atp@piskorski.com>  (07ef86fe8d82)

	* nsd/driver.c:
	Add links to examples of ioctlsocket() vs. fcntl().

2014-09-23 22:17 -0400  Andrew Piskorski  <atp@piskorski.com>  (33d0d922af9e)

	* nsd/driver.c:
	On Windows use ioctlsocket() and FIONBIO rather than fcntl() and
	O_NONBLOCK.

2014-09-23 18:01 -0400  Andrew Piskorski  <atp@piskorski.com>  (a5c978071e1d)

	* Makefile:
	Use the DTPLITE environment variable if one is set.

2014-09-23 13:53 -0400  Andrew Piskorski  <atp@piskorski.com>  (6d6ed1c3cf8a)

	* Makefile.win32, include/Makefile.build, include/Makefile.global.in,
	include/Makefile.module.in, include/Makefile.win32:
	Add Emacs modeline to makefiles that need it.

2014-09-23 13:18 -0400  Andrew Piskorski  <atp@piskorski.com>  (1ed0ef2b5185)

	* include/nsthread.h:
	Always set NSTHREAD_EXPORTS, not just for the __GNUC__ and
	__MINGW32__ cases.

2014-09-23 13:00 -0400  Andrew Piskorski  <atp@piskorski.com>  (e4b88ceb00af)

	* Makefile.win32, include/Makefile.win32:
	Various misc. Windows build fixes: Append to rather than overwrite
	LIB and INCLUDE environment variables. Ns_ModuleInit check for
	nsthread. Remove NOWIN98 option, it no longer exists and breaks the
	build. Backslashes.

2014-09-23 12:50 -0400  Andrew Piskorski  <atp@piskorski.com>  (0705ca0253ba)

	* Makefile.win32, include/Makefile.win32: new file.
	* Makefile.win32, include/Makefile.win32:
	Add Windows-specific makefiles, exactly as received from Ibrahim
	Tannir <itannir@archiware.com> on 2014-08-26.

2014-10-06 11:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (75926b0c7ddf)

	* include/nsthread.h:
	- add a fallback for NS_POLL_NFDS_TYPE (use this not only in the
	windows case)

2014-10-06 11:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a7b7192f13a)

	* nsthread/reentrant.c:
	- when os system functions fail, use NsThreadFatal() like in other
	files in the nsthread directory

2014-10-05 19:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (043ed778556f)

	* nsthread/reentrant.c:
	- include ns.h as last include file

2014-09-29 18:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38d0df1e4096)

	* include/ns.h, nsd/tclmisc.c:
	- signedness cleanup

2014-09-29 18:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (559f658b7200)

	* nsd/tcljob.c:
	- simplify code

2014-09-29 17:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (105f207614ea)

	* nsd/queue.c:
	- make usage of buffer clear

2014-09-29 17:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cedcedbefa20)

	* nsd/driver.c:
	- initialize buffer

2014-09-29 17:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d4997a9a5e2e)

	* nsd/nswin32.c:
	- ioctlsocket has a long argument

2014-09-29 17:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (242f073bd3e4)

	* nsd/tclenv.c:
	- don't call function repeatedly as argument of a macro

2014-09-29 12:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb6fcca2f536)

	* include/ns.h, nsd/index.c, nsd/queue.c, nsd/tclmisc.c,
	nsd/tclxkeylist.c:
	- improve saftey of macros

2014-09-29 12:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a07c69a0ca7)

	* nsd/log.c, nsd/tclcache.c:
	- sort out some more potential signed/unsigned conflicts

2014-09-29 12:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (13af24b7991e)

	* include/ns.h, nsd/connio.c:
	- remove further potential signedness conflicts

2014-09-29 11:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (775ff77b975a)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tclxkeylist.c:
	- move typedefs for *Cmd() to nsd.h to guaratee type checking
	argument lists.
	- fix bug: TclX_KeylgetObjCmd where classified as Tcl_CmdProc instead
	of Tcl_ObjCmdProc

2014-09-29 10:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (74818f93e02d)

	* include/nsthread.h, nsd/driver.c:
	- sort out more potential signed/unsigned conflicts

2014-09-29 09:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (98e13f76702a)

	* include/ns.h, include/nsthread.h, nscp/nscp.c, nsd/binder.c,
	nsd/conn.c, nsd/connio.c, nsd/event.c, nsd/filter.c, nsd/listen.c,
	nsd/nsd.h, nsd/pathname.c, nsd/proc.c, nsd/returnresp.c,
	nsd/sched.c, nsd/sls.c, nsd/sock.c, nsd/sockcallback.c, nsd/task.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tclobjv.c,
	nsd/tclsock.c:
	- added a new macros PTR2NSSOCK and NSSOCK2PTR in analogy to PTR2INT
	and INT2PTR to mask more win incompatibilities
	- use PTR2INT and INT2PTR on more occasions
	- change more dataytypes with bitwise operations to unsigned

2014-09-29 07:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a78a80275799)

	* include/ns.h, nsd/dns.c, nsd/driver.c, nsd/urlencode.c:
	- adding nonnull assertions

2014-09-29 07:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (22defe202c90)

	* nsd/fd.c:
	- remove unused functions, duplicating other behavior, without
	prototypes and entries in ns*.h

2014-09-28 14:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7ff858e3f0e)

	* include/nsthread.h, nsd/adpcmds.c, nsd/tclfile.c:
	- add more function name mappings for windows
	- remove signed/unsigned comparison

2014-09-28 14:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2665d0afb1d8)

	* include/ns.h, include/nsthread.h, nsd/nswin32.c, nsd/tclhttp.c:
	- define ns_mkstemp() as a first approximation for a replacement of
	mkstemp() under windows

2014-09-28 12:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7861c5a271b7)

	* include/ns.h, nsd/driver.c, nsd/nswin32.c, nsd/sock.c, nsd/task.c,
	nsd/tclmisc.c:
	- use unsigned constants and types for bitwise operations

2014-09-28 11:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (62acf90994be)

	* nsd/sock.c:
	- use ns_sock_set_blocking instead of other implementations

2014-09-28 11:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (91c8048219bc)

	* nsd/connio.c:
	- add nonnull assertion

2014-09-28 11:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6ad8fcbf974)

	* include/ns.h, nsd/compress.c, nsd/proc.c, nsd/tclhttp.c:
	- add nonnull assertions and CONST to const buffers

2014-09-27 22:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (950a8cebabb8)

	* include/nsthread.h, nsd/exec.c, nsthread/reentrant.c:
	- setting WINVERSION to Vista to allow usage of InetNtop()
	- make code more robust against previous defines
	- use the right pid_t type for win
	- add shutdown flags
	- use *_s function in win-specific reentrant code

2014-09-27 20:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0851469b4028)

	* nsd/unix.c:
	- respect USE_FIONBIO if in use

2014-09-27 20:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (305890d02771)

	* include/ns.h, nsd/driver.c, nsd/nswin32.c, nsd/unix.c:
	- introduce new functions ns_sock_set_blocking() to better separate
	platform concerns

2014-09-27 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5c82a21ad5c)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/conn.c, nsd/driver.c,
	nsd/encoding.c, nsd/log.c, nsd/pathname.c, nsd/pidfile.c,
	nsd/server.c, nsd/tclcallbacks.c, nsd/tclinit.c, nsd/tclrequest.c,
	nsd/tclsched.c, nslog/nslog.c, nsproxy/nsproxylib.c,
	nssock/nssock.c:
	- use non-NULL sentinel arguments

2014-09-27 12:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6359c7db855f)

	* nsd/nsd.h, nsd/server.c, nsd/tclinit.c:
	- adding nonnull assertions

2014-09-27 12:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6f8ceca0005e)

	* include/ns.h, nsd/request.c, nsd/tclcmds.c:
	- add nonnull assertions

2014-09-27 11:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (95a94b6d51ad)

	* nsd/tclcmds.c:
	- sort declarations

2014-09-27 11:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e06852f61a26)

	* nsd/tclcmds.c:
	- remove redundant definition

2014-09-27 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (61623ed3fba0)

	* nsd/driver.c:
	- add nonnull assertions

2014-09-27 10:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (716bb6eb97f8)

	* nsd/nsd.h, nsd/queue.c, nsd/server.c:
	- add nonnull assertions

2014-09-27 10:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06b39b6b9568)

	* include/nscheck.h, nsd/tcljob.c:
	- add nonnull assertions

2014-09-26 14:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1b3aa92c35e)

	* nsd/queue.c:
	- move variable declaration to the begin of the block

2014-09-26 14:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ce270c4268c)

	* include/ns.h, nsd/info.c:
	- return as well pid_t from Ns_InfoPid

2014-09-26 14:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (46263319ddd8)

	* include/nsthread.h:
	- use angle brackets for include file

2014-09-26 11:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b743a8847dd0)

	* include/nsthread.h:
	- remove unsigned suffix for making windows happy again

2014-09-26 09:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3fce8ab013d7)

	* include/ns.h, nsd/connio.c, nsd/set.c, nsd/tclset.c:
	- adding nonnull constraints

2014-09-26 09:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d6e840c2ed2)

	* nsthread/reentrant.c:
	- remove uneeded structure

2014-09-25 11:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (67bab25f9837)

	* include/ns.h, nscp/nscp.c, nsd/adpcmds.c, nsd/driver.c,
	nsd/filter.c, nsd/info.c, nsd/nsd.h, nsd/op.c, nsd/proc.c,
	nsd/sched.c, nsd/sockcallback.c, nsd/tclcallbacks.c, nsd/tclinit.c,
	nsd/tclrequest.c, nsd/url2file.c, nsdb/nsdb.c, nslog/nslog.c,
	nsproxy/nsproxylib.c, nsproxy/nsproxymod.c, nsthread/thread.c:
	- remove usage of anonymous union
	- reducing the conversion between function pointer and non-function-
	pointer

2014-09-25 09:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (03f024dacf46)

	* include/ns.h, nsd/adprequest.c, nsd/connio.c, nsd/driver.c,
	nsd/listen.c, nsd/nsd.h, nsd/progress.c, nsd/queue.c,
	nsd/returnresp.c, nsd/sched.c, nsd/sock.c, nsd/sockfile.c,
	nsd/tclfile.c:
	- added nonnull assertions

2014-09-25 09:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9d7b9ebaadde)

	* nsdb/dbinit.c, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c:
	- remove uneeded casts

2014-09-25 08:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (13f34409ed89)

	* nsd/tclmisc.c:
	- reduce variable scope

2014-09-25 08:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a2ed07686949)

	* nsd/adpcmds.c, nsd/nsd.h:
	- handle potential loss of sign in multipurpose adpCtlOpts.flag ny
	avoiding negative values

2014-09-25 08:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb5e6e05a04f)

	* include/nsthread.h, nsd/tclhttp.c:
	- adding nonnull assertions

2014-09-24 12:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e44f2abfd9dd)

	* nsd/sock.c:
	- use unsigned value to ioctl

2014-09-24 12:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb560249a558)

	* nsd/urlspace.c:
	- remove unneeded variables

2014-09-24 12:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57d4be612cc5)

	* nsd/log.c:
	- use constantly PTR2INT and INT2PTR macros to convert integers from
	and to pointers

2014-09-24 12:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e548c785fb7f)

	* nsd/tclrequest.c:
	- remove superfluous "adp" argument (most probably cruft from the
	past)

2014-09-24 12:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ea47e4ddfdf)

	* nsd/binder.c:
	- don't define unused symbols under windows

2014-09-24 11:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac79a3675abf)

	* configure.ac, nsd/unix.c:
	- add include for search for nfds_t
	- changed one more occurrence to NS_POLL_NFDS_TYPE

2014-09-24 11:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (952e9965eb8b)

	* configure.ac, include/ns.h, include/nsconfig.h.in,
	include/nsthread.h, nsd/driver.c, nsd/nswin32.c, nsd/unix.c:
	- use nfds_t when available (re-run of autogen.sh is necessary)

2014-09-24 11:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (21c3fa1d4493)

	* nsd/crypt.c, nsd/form.c, nsd/queue.c, nsd/set.c:
	- brace body of if-expressions

2014-09-24 10:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a3d54e2eb01)

	* nsd/tclxkeylist.c:
	- brace body of non-trivial if-expressions
	- whitespace changes

2014-09-24 09:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1335f41e0168)

	* include/ns.h, include/nsthread.h, nsd/adpparse.c, nsd/compress.c,
	nsd/log.c, nsd/nsd.h, nsd/task.c, nsd/tclmisc.c:
	- make hex constants (mostly for flags) unsigned

2014-09-24 09:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (308b5fed4b53)

	* nsd/adpparse.c:
	- fix variable names (serv, servPtr for flags is strange)
	- use unsigned for flags

2014-09-24 09:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (215288c7e6f4)

	* nsd/adpcmds.c, nsd/adpparse.c, nsd/exec.c, nsd/info.c, nsd/queue.c:
	- fix indentation
	- remove extraneous commas

2014-09-24 08:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e79835db4019)

	* nsd/adpcmds.c:
	- use unsigned type for flags

2014-09-24 08:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac0c415a3b25)

	* nsthread/reentrant.c:
	windows:
	- replace call to deprecated function asctime() by a call to
	asctime_s()

2014-09-23 11:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d7c5af1cfe8)

	* Makefile, nsd/tclcallbacks.c, nsdb/dbinit.c:
	- reduce variable scopes
	- use nunnull constraints

2014-09-23 11:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d3bc2a6bb3f7)

	* include/ns.h, include/nscheck.h, nsd/config.c, nsd/driver.c,
	nsd/sockcallback.c, nsd/tclcache.c, nsd/tclfile.c, nsd/tclmisc.c,
	nsd/tclsock.c:
	- using CONST for channel IDs, reduce casts
	- ease life of static checkers by providing more asserts()
	- reduce variable scopes

2014-09-23 09:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef47e47b92a1)

	* nsd/connio.c:
	- make clear that buffer is initialized

2014-09-23 08:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2f80746ed15)

	* include/ns.h, nsd/adpeval.c, nsd/adpparse.c, nsd/config.c,
	nsd/connio.c, nsd/cookies.c, nsd/driver.c, nsd/nsd.h, nsd/op.c,
	nsd/sched.c, nsd/sock.c, nsd/sockfile.c, nsd/tclset.c,
	nsd/url2file.c, nsd/urlspace.c, nssock/nssock.c:
	- make flags everywhere "unsigned int"

2014-09-23 02:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f97be7000d1e)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	- add nunnull declarations and assertions

2014-09-23 01:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ed57e0dd70e3)

	* nsd/tclhttp.c, nsd/tclinit.c, nsd/tcltime.c, nsdb/dbdrv.c,
	nsdb/dbtcl.c:
	- remove unreachable code

2014-09-23 01:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05269ce9f91f)

	* include/ns.h, nsd/nswin32.c, nsd/tclset.c, nsd/tclsock.c,
	nsd/tclvar.c, nsd/urlspace.c:
	- remove constant boolean expression
	- remove two more cases, where invalid sockets are assumed to be -1

2014-09-22 09:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b2d7c8fbf6f)

	* nsd/tclcache.c:
	- use just constants for aggregate initializers

2014-09-22 09:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (980e7bec5138)

	* nscp/nscp.c, nsd/binder.c, nsd/mimetypes.c, nsdb/dbtcl.c,
	nsperm/nsperm.c, nsproxy/nsproxylib.c:
	- use STREQ() macro more frequently

2014-09-22 09:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2c5192d44af)

	* include/nscheck.h, nsd/driver.c, nsd/exec.c:
	- use UNUSED macro, which has chances to work on window as well

2014-09-22 08:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (678ffd0cb1bf)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/callbacks.c, nsd/fd.c, nsd/limits.c,
	nsd/nswin32.c, nsd/op.c, nsd/queue.c, nsd/sched.c, nsd/tclmisc.c,
	nsd/unix.c, nsdb/nsdb.c, nsthread/nsthreadtest.c:
	- add explicit initializer for static variables

2014-09-22 08:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (181cb18393fc)

	* include/nsthread.h:
	- add same visiual separator for end of win + unix blocks

2014-09-21 13:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (964bb89332f2)

	* nsd/tclobjv.c, nsd/tclrequest.c:
	- remove unneeded address operators

2014-09-21 13:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc8463243f10)

	* nsd/modload.c:
	- undo earlier change

2014-09-21 13:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (84dbfd55d31d)

	* nscp/nscp.c, nsd/modload.c, nsd/url2file.c, nslog/nslog.c:
	- remove unneeded casts

2014-09-21 13:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d769f55cbeac)

	* include/nsthread.h:
	- make is easier to visually separate windows and unix block

2014-09-21 13:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (090cb56adc9f)

	* win/cgitest/main.c, win32/cgitest/main.c:
	- add comments

2014-09-21 12:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b06ea2b00529)

	* nsd/adpcmds.c, nsd/adpparse.c, nsd/conn.c, nsd/tclmisc.c,
	nsd/tclresp.c:
	- standardize type definitions of objv to the variant recommended on
	the Tcl man pages (e.g.
	http://www.tcl.tk/man/tcl8.5/TclLib/CrtObjCmd.htm)

2014-09-21 12:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2735b3b22794)

	* include/ns.h, nsd/adpeval.c, nsd/info.c, nsd/quotehtml.c,
	nsd/request.c, nsd/tclfile.c, nsd/tclmisc.c, nsd/tclset.c:
	- standardize type definitions of argv in Tcl_CmdProc to the variant
	recommended on the Tcl man pages (e.g.
	http://www.tcl.tk/man/tcl8.5/TclLib/CrtCommand.htm)

2014-09-20 15:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af2f6a86b09c)

	* nsd/adpeval.c, nsd/driver.c, nsd/urlspace.c:
	- address potential signedness issues

2014-09-20 14:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (89dd84a779a8)

	* nsd/urlencode.c:
	- fix indentation

2014-09-20 14:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (acfa974a33e5)

	* nsd/tclcache.c:
	- use just constants for aggregate initializers

2014-09-20 14:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d7bdd6fa64a)

	* nsd/op.c, nsd/sched.c, nsd/sockcallback.c, nsd/tclinit.c,
	nsd/tclobj.c, nsdb/nsdb.c:
	- remove unneeded casts

2014-09-20 14:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2bbaae82d81d)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/conn.c, nsd/form.c, nsd/info.c,
	nsd/limits.c, nsd/nsd.h, nsd/nsmain.c, nsd/queue.c, nsd/sls.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclset.c, nsd/tcltime.c,
	nsd/tclvar.c:
	- standardize type definitions of objv to the variant recommended on
	the Tcl man pages (e.g.
	http://www.tcl.tk/man/tcl8.5/TclLib/CrtObjCmd.htm)

2014-09-19 20:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ee6ee511cbb4)

	* nsd/binder.c:
	- one place more, where NS_SOCKET should be used for sockets

2014-09-19 20:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92afbbb19330)

	* nsd/tclobjv.c:
	- handle potential null-pointer dereferencing

2014-09-19 20:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8f228fbe2445)

	* nscp/nscp.c:
	- trying to silence static checker

2014-09-19 20:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ea4b79e67b15)

	* include/ns.h, nsd/connio.c, nsd/encoding.c:
	- handle potential signedness conflicts

2014-09-19 20:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7cd57f49ea2b)

	* nsd/log.c:
	- don't use negative numbers for size_t

2014-09-19 20:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2793af374a39)

	* nsd/driver.c:
	- use INVALID_SOCKET instead of -1 for datatype NS_SOCKET

2014-09-19 19:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef779edf3694)

	* nsd/tclmisc.c, nsd/urlencode.c, nsd/urlspace.c:
	- fix indentation and array boundary

2014-09-19 19:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (df2af2803847)

	* nsd/sock.c, nsd/tclcache.c:
	- use just constants for aggregate initializers

2014-09-19 19:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5831e7eeef2)

	* nsd/tclcmds.c:
	- adding CONST for use with string constants

2014-09-19 19:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a14f6531de28)

	* nsd/callbacks.c, nsd/filter.c, nsd/proc.c, nsd/tclcallbacks.c,
	nsd/tclrequest.c, nsd/tcltime.c:
	- remove unneeded casts

2014-09-19 13:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8aa44af27c0)

	* nsd/binder.c, nsd/conn.c, nsd/nswin32.c, nsd/sock.c,
	nssock/nssock.c:
	- use constantly INVALID_SOCKET instead of hardcoded -1 to improve
	portability

2014-09-19 13:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (117a17a8ddab)

	* nsd/nswin32.c:
	- reduce variable scopes

2014-09-19 12:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d77c7d702662)

	* include/nsthread.h, nscgi/nscgi.c, nsd/exec.c, nsd/watchdog.c,
	nsproxy/nsproxylib.c:
	- introduce NS_INVALID_PID to handle invalid pids on windows (-1 is
	not allowed there)

2014-09-19 12:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d10715344dfe)

	* nsd/driver.c:
	- remove unneeded assignment for windows

2014-09-19 12:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a2d926937a4)

	* nscp/nscp.c:
	- simplify lvalue expression

2014-09-19 12:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0eaac413c86)

	* nsd/tclxkeylist.c:
	- remove unneeded cast

2014-09-19 12:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cbfe97dcad7b)

	* nsd/tclmisc.c:
	- use parenthesis in macro to improve safety

2014-09-19 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b3486eafc77)

	* nsdb/dbtcl.c:
	- replace array indexing by pointer arithmethic

2014-09-18 13:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b985966d977)

	* include/ns.h, include/nsthread.h, nscgi/nscgi.c, nsd/binder.c,
	nsd/exec.c, nsd/nsd.h, nsproxy/nsproxylib.c, nsthread/fork.c,
	nsthread/winthread.c:
	- use pid_t for pids instead of int
	- add type pid_t for WIN builds

2014-09-08 16:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f97c86f6150b)

	* nsd/fastpath.c:
	- return gzipped size for content-encoding gzip

2014-09-08 16:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ff8ab1d05f7)

	* nsd/fastpath.c, nsd/return.c:
	- first fix for HEAD requests. we should add some regression tests
	and look closer to boundary cases

2014-09-08 16:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe880140188a)

	* doc/src/naviserver/commandlist.man:
	- documentation update: add nsv* to commandlist

2014-09-01 08:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (89577366e888)

	* include/Makefile.global.in:
	- pass ZLIB_INCLUDES to CLFAGS of modules build, since the includes
	are required by ns.h

2014-08-30 22:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d48c18fb0ab7)

	* openacs-config.tcl:
	- set environment variables from config file

2014-08-30 22:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (82b389d2e7a9)

	* nsd/tclhttp.c:
	- adjusted logging levels

2014-08-06 09:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c79b0b67085)

	* openacs-config.tcl:
	- openacs config file: increase default number of kept error logs

2014-08-06 09:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4c34f2cd152d)

	* nsd/tclhttp.c:
	- ns_http: when spoolsize is specified, but http server does not
	return content-size, use size of actual returned data to determine
	whether server should spool to file or not

2014-07-23 12:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (37fa67a64272)

	* doc/README:
	- update doc READM

2014-07-23 12:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fff7cd0b7665)

	* doc/src/manual/admin-db.man, doc/src/manual/admin-install.man,
	doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/manual/adp-overview.man,
	doc/src/manual/c-driverdb.man, doc/src/manual/c-urlspace.man,
	doc/src/manual/main-faq.man, doc/src/manual/main-features.man,
	doc/src/manual/main-history.man, doc/src/manual/main-standards.man,
	doc/src/manual/tcl-lib-file.man, doc/src/manual/tcl-lib-nstrace.man,
	doc/src/manual/tcl-libraries.man, doc/src/manual/tcl-overview.man,
	nscp/doc/mann/nscp.man:
	- adding module description to get rid of empty string in first line
	of manual entries
	- minor updates

2014-07-10 17:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eaad620428e5)

	* tests/http_byteranges.test:
	- add test to show that byte range is ignored on adp requests

2014-07-10 17:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (09b2b1d7e7aa)

	* nsd/return.c:
	- fix index in loop (many thanks to jeff rogers to point this out)

2014-07-02 10:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e016286686c9)

	* doc/src/naviserver/ns_cookie.man, nsd/cookies.c, tests/cookies.test:
	- ns_setcookie, ns_getcookie: if ignore the domain, if provided
	empty. Otherwise IE ignores the directive completely.

2014-06-29 12:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a64554e3cd43)

	* NEWS, README:
	- minor documentation updates

2014-06-29 11:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d73afa20927d)

	* .hgtags:
	Added tag naviserver-4.99.6 for changeset 5a843ad8cfc4

2014-06-29 11:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a843ad8cfc4 [naviserver-4.99.6])

	* NEWS:
	- updated news file

2014-06-29 11:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2cf04b51a5d6)

	* configure.ac:
	- bump version number

2014-06-19 14:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a69aa103f002)

	* Makefile, nscgi/nscgi.c, nsd/connio.c, nsd/encoding.c, nsd/exec.c,
	nsd/form.c, nsd/log.c, nsd/returnresp.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c:
	- reduce variable scopes
	- add target "cppcheck" to Makefile

2014-06-18 16:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81b94a092c3a)

	* doc/src/naviserver/ns_adp_parse.man, nsd/adpcmds.c, tests/adp.test:
	- further cleanup of ns_adp_parse
	- improved man page
	- added regression tests

2014-06-18 13:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc140909ad0e)

	* nsd/adpcmds.c:
	- fix flag setting

2014-06-18 13:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (82bdc4a23f8b)

	* nsd/adpcmds.c:
	- resolve flag confusion between ADP_TCLFILE and ADP_ADPFILE

2014-06-18 13:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c73362527c7d)

	* doc/src/naviserver/ns_adp_parse.man:
	- improve documentation

2014-06-18 13:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0d2e69379fbf)

	* configure.ac:
	- bump revision number

2014-06-02 11:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b943c23d525)

	* nsd/driver.c, nsd/tclhttp.c:
	- make sure to output error messages, when mkstemp() failed

2014-05-29 12:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4875f898c8e7)

	* NEWS:
	- add a diffstat line

2014-05-29 12:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (91c49ef9ea43)

	* NEWS.template: new file.
	* NEWS.template:
	- add first version of template for news entries

2014-05-29 12:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (068f6789275d)

	* NEWS:
	- first draft of change summary

2014-05-29 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d3c43bfdc18)

	* Makefile:
	- make sure to avoid inclusion of ._ files (on mac os x)

2014-05-29 12:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6d2615252c1)

	* configure.ac:
	- use version number for pre-release

2014-05-29 12:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (089d7b081b30)

	* nsd/init.tcl:
	- execute "ns_ictl addmodule" for every kind of module

2014-05-29 12:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (736b4a7338ac)

	* nsd/tclmisc.c:
	- get rid of warning in recent gcc

2014-05-29 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d71e616bf9ec)

	* doc/src/naviserver/ns_return.man:
	- improve wording

2014-05-29 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab0e2be3f5f8)

	* nsd/adprequest.c:
	- avoid potential NULL derefernce and make assumptions explicit

2014-05-25 16:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57be94ba6964)

	* nsproxy/nsproxylib.c:
	- fix log statement

2014-05-25 13:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1936b079369a)

	* nsproxy/nsproxylib.c:
	- use consistently pid_t instead of int

2014-05-25 13:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65878f95e121)

	* include/Makefile.global.in, include/nsthread.h, nsd/binder.c,
	nsd/compress.c, nsd/driver.c, nsd/tclfile.c, nsd/tclobj.c,
	nsd/tcltime.c, nsproxy/nsproxylib.c:
	- provide compatibility with OpenSolaris (OmniOS, SunOS 5.11)

2014-05-02 14:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fc88b10fa3c2)

	* doc/src/man.css, include/Makefile.build, include/Makefile.module.in,
	include/ns.h, include/nsversion.h.in, license.terms, m4/cmmsg.m4,
	m4/dns.m4, nscgi/Makefile, nscp/Makefile, nsd/Makefile,
	nsdb/Makefile, nsdb/nsdb.h, nsdb/util.tcl, nsdbtest/Makefile,
	nslog/Makefile, nsperm/Makefile, nsperm/compat.tcl,
	nsperm/htaccess.tcl, nsperm/init.tcl, nsproxy/Makefile,
	nsproxy/nsproxy.h, nsproxy/test-nsproxy.sh, nssock/Makefile,
	nsthread/Makefile, nsthread/thread.h, tcl/config.tcl,
	tcl/limits.tcl:
	- Remove CVS variable $Header$

2014-05-02 12:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (41058ffaa3ac)

	* nssock/nssock.c:
	- Make sure to initialize all members of Ns_DriverInitData to zero

2014-05-01 19:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9829513d99d)

	* nsd/tclobj.c:
	- make test for bytearray safe for changes introduced in tcl 8.6 and
	backported to Tcl 8.5 (see e.g.
	http://core.tcl.tk/tcl/info/91be696bf3)

2014-04-30 09:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7b6a19870ce6)

	* configure.ac, include/nsconfig.h.in, m4/dns.m4, m4/gettid.m4,
	m4/zlib.m4:
	- use recommended autoconf constants quoting
	- deactivate AM_* macros (get rid of warnings), since these are not
	used by autogen.sh

2014-04-12 14:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2630d4ba9ac9)

	* include/ns.h, nsd/driver.c, nsd/nsd.h, nsd/return.c,
	nssock/doc/mann/nssock.man:
	- add parameter "extraheaders" to drivers (e.g. nssock, nsssl). This
	feature allows an admin to specify extra reply headers sent back to
	on every request. By using this feature, one can activate for
	example HTTP Strict Transport Security for nsssl.

2014-04-06 15:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4327d9fa90dd)

	* install-sh:
	- use recent version of install-sh from tclconfig repository

2014-04-06 14:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e27d719c1500)

	* include/nsconfig.h.in:
	- update generated file

2014-04-06 14:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e90da7a134f)

	* m4/dns.m4:
	- replace obsolete macro AC_TRY_RUN

2014-04-06 14:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9b88accef592)

	* configure.ac:
	- replace obsolete macro AC_TRY_LINK

2014-04-06 14:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7fba0f04916)

	* m4/tcl.m4:
	- update to recent version of tcl.m4

2014-04-06 14:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0497757f5127)

	* nsd/driver.c, nsd/form.c, nsproxy/nsproxylib.c:
	- minor cleanup: reduce variable scopes, remove obsolete tests, ease
	code reading

2014-04-02 10:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f22d526f60e)

	* nsd-config.tcl:
	- change the setting in the sample config file "nsd-config.tcl" from
	"serverlog nsd.log" to "serverlog error.log" since novices seem to
	expect this.

2014-03-26 12:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b5a1db2126c)

	* include/ns.h, include/nscheck.h, nsd/dstring.c, nsd/tclinit.c:
	- defined new macro NS_GNUC_DEPRECATED_FOR() to be able to provide
	replacement hint
	- used NS_GNUC_DEPRECATED_FOR where appropriate
	- remove undefined and decprecared Ns_ConnInit() declaration
	- updated documentation of deprecated commands in the source

2014-03-26 12:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (832d01cfd76d)

	* nsd/conn.c, nsd/tclobjv.c:
	- fix typos

2014-03-26 12:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (945c8074c841)

	* doc/src/manual/tcl-overview.man, doc/src/naviserver/ns_getform.man,
	doc/src/naviserver/ns_mktemp.man, nsd/tclfile.c, tcl/form.tcl:
	- mark ns_tmpnam as deprecated since it uses an desprecated
	C-library function (use ns_mktemp instead)
	- allow "ns_mktemp" to be called without template (makes migration
	simpler)
	- update man page for ns_tmpnam
	- fixed man page for ns_getform
	- update .tcl-code to use ns_mktemp

2014-03-15 17:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e3028d6a8e9e)

	* nsd/tclobjv.c:
	- new static function GetOptIndex() used in Ns_ParseObjv():

	 Background: Tcl_GetIndexFromObj() validates internal reps based on
	the pointer of the base string table, which works only reliably with
	static string tables. Since NaviServer can't use static string
	tables, these are allocated on the stack. This can lead to mix-ups
	for shared objects with the consequence the resulting indices
	might be incorrect, leading to potential crashes. In order to allow
	caching, it should be possible to validate the entries based on
	other means, but this requires a different interface.

2014-03-05 10:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1debfe3f374f)

	* nsd/cache.c:
	Make Ns_CacheUnsetValue() more robust against code, where the
	freeProc calls a ns_cache operation (such as e.g. nsdbipg). Before
	that modification, double free operations were possible when the
	cache was pruned.

2014-03-01 18:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02fb1815e9a4)

	* doc/src/naviserver/ns_set.man:
	ns_set.man:
	- mention default value for "ns_set get" and "ns_set iget"
	- remove "-persist" flags from the documentation, since this was
	removed from the implementation years ago (ns_set copy, ns_set
	create, ns_set split)
	- remove "-shared" flags from the documentation, since this was
	removed from the implementation years ago (ns_set list)
	- improve formatting of entries

2014-03-01 18:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b80c1f2540a1)

	* nsd/tclset.c:
	- improve error message

2014-03-01 18:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d416805b2e05)

	* NEWS:
	- add empty stub for next release

2014-02-14 20:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5dc8901fe34f)

	* tcl/aolserver-openacs.tcl:
	- change back to previous version, until the fixed version of nsf is
	in wider distribution

2014-02-14 11:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81d7c8c463f0)

	* doc/src/naviserver/ns_http.man, include/ns.h, nsd/compress.c,
	nsd/tclhttp.c:
	- added additional parameter "-decompress" for "ns_http wait" to
	compress the result on the fly (incrementally) in case it is content
	encoding is "gzip"

2014-02-14 11:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b9dfc6b2eb3d)

	* tcl/aolserver-openacs.tcl:
	- use uplevel method instead of uplevel tcl cmd (to skip mixins
	layers)

2014-02-14 09:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (786d71da0a83)

	* nsthread/thread.c:
	- provide a default value

2014-02-04 14:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (459dfee88af5)

	* nsd/init.tcl:
	- make place explicit, where loading magic is required (this fixes
	as well startup problems with some configs)

2014-02-01 13:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8ca2a8329df)

	* nsd/init.tcl:
	remove debug info

2014-02-01 11:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a687f0cdb6af)

	* nsd/init.tcl:
	- load network modules after other ones to allow command from a
	global module used in the blueprint (was not possible so far due to
	the loading order)

2014-01-23 09:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4970c537069c)

	* Makefile:
	- add hint about creation of admin user

2014-01-23 09:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1fd1d09ed38d)

	* doc/src/naviserver/ns_memoize.man:
	- improve man page

2014-01-23 09:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d01286275020)

	* include/Makefile.global.in:
	- use optimize flags in CFLAGS

2014-01-23 09:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d6139a478e1)

	* README:
	- use contemporal version numbers

2014-01-13 15:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (98469ff68b1f)

	* doc/src/manual/adp-overview.man, doc/src/manual/tcl-overview.man:
	- get rid of ns_share in introductory examples
	- improve formatting

2014-01-10 08:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c0b9f4d848a3)

	* Makefile:
	- undo last change: don't require dptlite to be in ns directory,
	pass "dtplite=..." from installer scripts into makefile to force
	usage of a particular version

2014-01-07 19:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a7c1c9fe0e0)

	* Makefile:
	- build directory modues/tcl during install, since default configs
	point to it

2014-01-07 18:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6113535eba1d)

	* bitbucket-install.tcl:
	- fix tar options and output handling to work under Linux and macOS

2014-01-07 18:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf2b1ba82b30)

	* index.adp:
	- remove deprecated warnings

2014-01-07 17:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (739d006fc308)

	* nsd-config.tcl:
	- let script run relative to binary

2014-01-04 17:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e3461533db6)

	* doc/src/naviserver/ns_conn.man, doc/src/naviserver/ns_fmttime.man,
	doc/src/naviserver/ns_gmtime.man,
	doc/src/naviserver/ns_httptime.man,
	doc/src/naviserver/ns_localtime.man,
	doc/src/naviserver/ns_parsehttptime.man,
	doc/src/naviserver/ns_parsetime.man:
	- fix various documentation issues

2014-01-04 17:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (19dd8866c768)

	* doc/src/naviserver/ns_time.man, nsd/tcltime.c:
	ns_time:
	- add option "ns_time format" to print a time in the sec:usec format
	in secs in a decimal dot notation
	- fix and extend man page for ns_time

2014-01-04 17:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43ac5ab18616)

	* Makefile:
	- use dtplite from $(NAVISERVER)/bin to avoid confusion with other
	tcl installations on the same machine

2014-01-04 00:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec27ae843d5b)

	* doc/src/naviserver/ns_adp_parse.man, nsd/adpcmds.c:
	ns_adp_parse:
	- add dummy option "-string" for backwards compatibility

2014-01-04 00:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (464b856319de)

	* doc/src/naviserver/ns_adp_parse.man, nsd/adpcmds.c:
	ns_adp_parse:
	- bring documentation in sync with implementation
	- remove flags that were undocumented and did nothing
	- make sure that in string-mode the file-flag is cleared, otherwise
	string mode behaves like file mode

2013-12-26 17:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ddd3502015e3)

	* nsd/server.c:
	- add name of pool to entry in log file

2013-12-26 17:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe4011683127)

	* bitbucket-install.tcl:
	- make script more robust and general

2013-12-06 10:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ada2e2dd98fd)

	* doc/src/naviserver/ns_cookie.man, include/ns.h, nsd/cookies.c,
	tests/cookies.test:
	- ns_setcookie, ns_deletecookie: added flag "-replace" to replace
	already issued cookie requests in output headers; the same option is
	used in OpenACS.
	- updated documentation
	- extended regression test

2013-12-05 20:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ed99fcbd2832)

	* tests/testserver/modules/testhttp.tcl:
	- nstest::http: added flag "-getmultiheaders" to return all
	headerfields (multiset) with the specified name

2013-12-02 20:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (195e51e2d7a1)

	* doc/src/naviserver/ns_cookie.man, include/ns.h, nsd/cookies.c,
	nsd/tclobjv.c:
	- ns_getcookie: added option ?-include_set_cookies bool? to search
	cookies being set as well (from output headers); the same option is
	used in OpenACS.
	- added option converter Ns_OptionBoolean()

2013-12-02 14:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c908e33b1fcc)

	* doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_cookie.man, include/ns.h, nsd/cookies.c,
	tcl/charsets.tcl, tests/cookies.test:
	- ns_cookie: added option "-discard" as specified in RFC 2965

2013-11-10 22:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (86a07ac13697)

	* nsd/adpcmds.c, nsd/dns.c, nsd/driver.c, nsd/queue.c, nsd/tclresp.c,
	nsd/url2file.c:
	- use explicit pointer initializations to make newset gcc happy

2013-10-15 10:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2162f829a89b)

	* doc/src/manual/admin-install.man, doc/src/manual/admin-
	maintenance.man:
	- improve documentation: fix and complete descripting of command
	line arguments of NaviServer

2013-10-15 10:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0bbcf79c6d2e)

	* openacs-config.tcl:
	- improve documentation

2013-10-10 23:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (22487f6dbb7d)

	* nsd/init.tcl:
	- don't abbreviate info subcommands

2013-10-10 23:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (afe2d313f225)

	* tcl/aolserver-openacs.tcl:
	- don't abbreviate info subcommands

2013-10-10 23:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54ed19c2769a)

	* tcl/nstrace.tcl:
	- don't abbreviate info subcommands

2013-10-10 23:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e9537afecd3d)

	* tcl/form.tcl, tcl/http.tcl:
	- use more clear string comparison operators

2013-10-10 14:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c90c6c67645)

	* nsd/init.tcl:
	- make ns_driversection more robust in case it is called without
	connection

2013-10-10 14:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ba9c83e5030)

	* nsd/modload.c:
	- make it easier to spot a misconfiguration in case an empty
	filename is passed

2013-10-10 13:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63f46925085b)

	* nssock/nssock.c:
	- improve debugging output

2013-10-10 12:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b32ae36f382b)

	* nsd/tclresp.c:
	- mark ns_connsendfp as deprecated as documented (is superseded by
	ns_writefp)

2013-10-09 14:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (02875efc8aec)

	* tcl/form.tcl, tcl/http.tcl, tcl/sendmail.tcl:
	- use braced expressions
	- use string comparisons when appropriate

2013-10-09 10:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c35cd3d2394e)

	* nsd/sockcallback.c:
	- fix size of reallocation unit (many thanks to Wolfgang Winkler for
	pointing this out)

2013-10-03 00:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (89c38a7a5436)

	* include/nsthread.h:
	- add missing prototype

2013-10-03 00:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0580db7b324f)

	* nsdb/doc/mann/ns_dbquotevalue.man:
	- improve documentation

2013-10-03 00:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4e205d1a1332)

	* nsd/tclmisc.c:
	- fix inorrect type (sha context instead of md5 context)

2013-09-27 18:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (62f69d1295d0)

	* tcl/nstrace.tcl:
	- save aliases in blueprint

2013-09-21 19:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ae5b6f48c5e)

	* nscgi/nscgi.c, nscp/nscp.c, nsdb/dbinit.c, nslog/nslog.c,
	nsperm/nsperm.c, nsthread/nsthreadtest.c, nsthread/tls.c:
	- reduce variable scopes

2013-09-21 15:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c4363ca5c9a3)

	* nsd/pathname.c:
	- remove last gcc warning

2013-09-21 15:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e76dbeb14d66)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c, nsd/auth.c,
	nsd/binder.c, nsd/cache.c, nsd/callbacks.c, nsd/cls.c, nsd/conn.c,
	nsd/event.c, nsd/form.c, nsd/index.c, nsd/limits.c, nsd/log.c,
	nsd/pathname.c, nsd/returnresp.c, nsd/sched.c, nsd/server.c,
	nsd/set.c, nsd/sls.c, nsd/sock.c, nsd/sockcallback.c,
	nsd/sockfile.c, nsd/task.c, nsd/tclcache.c, nsd/tclcallbacks.c,
	nsd/tclconf.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclobjv.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/urlencode.c,
	nsd/urlspace.c, nsd/watchdog.c:
	- reduce variable scopes

2013-09-21 15:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e93929ddd3b)

	* nsd/driver.c:
	- just clear NS_CONN_ZIPACCEPTED flag on start of request

2013-09-21 12:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d1e59cec479b)

	* nsd/driver.c, nsd/exec.c:
	- silence compiler warnings

2013-09-21 12:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6ad7c85c2008)

	* nsd/driver.c:
	- clear flags of reused connect connections before processing a new
	request

2013-09-17 12:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (def03a4dc756)

	* nsd/return.c:
	- prevent potential HTTP response splitting attack

2013-09-01 12:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6f3558b7ff9)

	* doc/src/naviserver/ns_http.man:
	- improve documentation for ns_http, add larger example

2013-08-30 11:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16f60196e2a0)

	* openacs-config.tcl:
	- added parameter for ReverseProxyMode (used by OpenACS 5.8.0)
	- set minthreads to 2

2013-08-22 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (deab33e7b903)

	* nsd/tclhttp.c:
	- return headers + status also, when no spoolsize is specified

2013-08-16 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16f91bafc825)

	* - merge

2013-08-16 19:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d965bde9c0f9)

	* tcl/nstrace.tcl:
	- don't omit the ::tcl namespace in the blueprint, jeffs commit of
	the ensemble-serializer changed the picture

2013-08-16 14:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (83e94e2591f9)

	* Makefile:
	- make sure to inclide openacs-config.tcl in tar file and in the
	stalled path

2013-08-16 14:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6cf94a5f06be)

	* Makefile:
	- make sure to omit the "system forks" (hidden files) when creating
	tar distribution file under macOS

2013-08-11 16:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6f1ac8a8b25)

	* doc/src/manual/admin-db.man, doc/src/manual/admin-install.man,
	doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/manual/adp-overview.man,
	doc/src/manual/c-driverdb.man, doc/src/manual/c-urlspace.man,
	doc/src/manual/main-faq.man, doc/src/manual/main-features.man,
	doc/src/manual/main-history.man, doc/src/manual/main-standards.man,
	doc/src/manual/tcl-lib-file.man, doc/src/manual/tcl-lib-nstrace.man,
	doc/src/manual/tcl-libraries.man, doc/src/manual/tcl-overview.man,
	doc/src/naviserver/commandlist.man, doc/src/naviserver/keyl.man,
	doc/src/naviserver/ns_adp.man, nscgi/doc/mann/nscgi.man,
	nscp/doc/mann/nscp.man, nsperm/doc/mann/nsperm.man:
	- dtplite from tcllib 1.15 does not allow spaces in "titles" of
	manpages. Fix all manpages, such that build-doc works again.

2013-08-06 09:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fec425b78294)

	* nsd/driver.c, nsd/tclhttp.c:
	- handle result of write()

2013-08-06 09:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (79d910ded68e)

	* openacs-config.tcl:
	- fix directoryfile entries in sample config file

2013-08-05 10:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d118a87689af)

	* tcl/nstrace.tcl:
	- don't assume that Tcl's global variables ::errorInfo and
	::errorCode are always set

2013-07-17 10:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6a3baadb51de)

	* tcl/nstrace.tcl:
	- removed blacklisted ::clock proc since this is apparently not
	needed in David's clock-scenario (see naviserver-devel discussion)
	when ":localtime" is used as documented instead of ":Tcl/Localtime"

2013-07-08 11:57 -0700    <dvrsn@diphi.com>  (10bf51a04b2f)

	* tcl/nstrace.tcl:
	Copied ensemble serialization from aolserver

2013-07-05 20:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d92af09854e0)

	* tcl/nstrace.tcl:
	- exclude ::clock from blueprint

2013-07-05 19:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (78d0b43a075c)

	* tcl/util.tcl:
	- mark proc Paren as deprecated (who uses this?)

2013-07-04 21:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a91fe6050ddb)

	* tcl/nstrace.tcl:
	- fix bug http://sourceforge.net/mailarchive/forum.php?thread_name=C
	AKmpXCd-4%2Bvq9ugMpYhz7gxf%2B8os2p90bvGiuqTS0Wi3zpNxQw%40mail.gmail.
	com&forum_name=naviserver-devel Don't save ::tcl namespace in
	blueprint

2013-07-04 11:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7dca7336255)

	* doc/src/naviserver/ns_conn.man, doc/src/naviserver/ns_return.man,
	nsd/connio.c, nsd/driver.c, nsd/fastpath.c, openacs-config.tcl,
	sample-config.tcl.in, tcl/fastpath.tcl, tests/ns_adp_compress.test,
	tests/test.nscfg:
	- never return gzip-ed content unless the client indicates that it
	accepts it
	- change compressenable in the test config file to true
	- updated regression tests
	- document that "ns_conn compress 0" can deactivate compression
	- add test case for "ns_conn compress 0"
	- added option "gzip_refresh" for "ns/fastpath" (default false)
	- add Tcl proc ::ns_gzipfile to allow easy redefinition of the gzip
	command (as suggested by Jeff)
	- use Tcl proc ::ns_gzipfile instead of exec tcl command
	- set vary header in cases, where encoding might potentially change
	- update man pages and sample config files

2013-07-04 11:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (234c30ebf7cf)

	* doc/src/naviserver/ns_set.man:
	- add ns_set as keyword to allow for cross reference from top-level
	naviserver docs

2013-07-04 11:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b016668353d9)

	* doc/src/manual/tcl-overview.man:
	- improve spelling

2013-06-22 15:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8e1377767a36)

	* doc/src/naviserver/ns_return.man:
	- fixed typos in the documentation

2013-06-22 15:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b10d972e8e6)

	* nsd/driver.c:
	- Don't allow gzipped results on range requests

2013-06-22 14:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (720335cf9214)

	* nssock/doc/mann/nssock.man:
	- improved documentation

2013-06-22 14:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab0d51d59419)

	* doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_guesstype.man,
	doc/src/naviserver/ns_limits.man, doc/src/naviserver/ns_log.man,
	doc/src/naviserver/ns_sendmail.man,
	doc/src/naviserver/ns_sockaccept.man,
	doc/src/naviserver/ns_sockblocking.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockcheck.man,
	doc/src/naviserver/ns_socketpair.man,
	doc/src/naviserver/ns_socklisten.man,
	doc/src/naviserver/ns_socklistencallback.man,
	doc/src/naviserver/ns_socknonblocking.man,
	doc/src/naviserver/ns_socknread.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_write.man, doc/src/naviserver/ns_writer.man,
	doc/src/naviserver/returnstatus-cmds.man:
	- improved documentation

2013-06-22 14:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (48fb35b0fe30)

	* nsd/mimetypes.c:
	- improve message

2013-06-22 14:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dabb962cd4ab)

	* doc/src/naviserver/ns_return.man, nsd/fastpath.c, openacs-
	config.tcl, sample-config.tcl.in:
	Delivery of gzipped content via fastpath:

	- added option "gzip_static" for "ns/fastpath" (default false)

	 Send the gzipped version of the file if available and the client
	accepts gzipped content. When a file path/foo.ext is requested, and
	there exists a file path/foo.ext.gz, and the timestamp of the
	gzipped file is equal or newer than the source file, use the gzipped
	file for delivery.

	- added option "gzip_cmd" for "ns/fastpath" (default "")

	 Command for zipping files in case the (static) gzipped version of
	the file is older than the source. The command is just used for re-
	gzipping outdated files, it does not actively compress files, which
	were previously not compressed (this would be wasteful for e.g.
	large tmp files, there is not cleanup, etc.). If this parameter is
	not defined, outdated gzipped files are ignored, and a warning is
	written to the error.log. Example setting: "/usr/bin/gzip -9".

	- added section for fastpath configuration to ns_return describing
	the new and old configuration options (description of fastpath
	parameters was completely missing)

	- updated sample config files

2013-06-22 13:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c84359b4f79c)

	* nsd/connio.c:
	- reduce variable scopes

2013-06-19 22:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8b7ba9b21902)

	* nsd/driver.c:
	- initialize DSTring before usage (must be quite an old bug)

2013-06-19 21:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3b4b469d308)

	* nsd/driver.c:
	- don't overwrite config ns_set, when value was taken already from
	the ns_set

2013-06-19 21:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fd19f6c7f705)

	* doc/README, doc/src/naviserver/ns_conn.man:
	- updated documentation

2013-06-19 12:27 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac90553afc9f)

	* doc/README: new file.
	* doc/README:
	- initial attempt of a documentation guideline

2013-06-19 12:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e5a37280b79)

	* doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_return.man:
	- improve documentation

2013-06-19 12:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4436b168a046)

	* nssock/doc/mann/nssock.man: new file.
	* Makefile, nssock/doc/mann/nssock.man:
	- add initial version of a documentation of nssock parameters

2013-06-19 12:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b6ba466e4797)

	* openacs-config.tcl:
	- improve comment

2013-06-19 08:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c511b44c177e)

	* nsd/driver.c:
	- use module name as driver name. This makes it possible to
	distinguish in introspection and filtering between different driver
	instances, when the same driver module is loaded twice with
	different names (e.g. to listen on e.g. 2 different nssock ports)

2013-06-18 20:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c8d9b9476c39)

	* doc/src/naviserver/ns_cache.man:
	- improve man page

2013-06-18 20:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f27e3c20a8df)

	* nsd/mimetypes.c:
	- complete list of mimetypes from RFCs, W3C and IANA
	- fix incorrect mimetypes
	- produce warnings for overwriting predefined mimetype definitions via
	ns/mimetypes
	- produce warnings for useless definitions via ns/mimetypes

2013-06-18 11:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a15a5780b229)

	* configure.ac:
	- bumped version number to 4.99.6

2013-06-18 11:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6c3b5a14b84c)

	* doc/src/naviserver/ns_http.man, include/ns.h, nsd/tclhttp.c,
	nsd/tclmisc.c:
	- Added flags
	     -file /varName/ and
	     -spoolsize /int/ to "ns_http wait". If the content of the obtained
	file is larger or equal than spoolsize, it is spooled to temp file,
	and the name of the temp file is returned in the variable provided
	by "-file". These options make it possible to retrieve also large
	content (e.g. video files) via ns_http without bloating memory

	- refactored ns_http and ns_ssl to align naming and to factor our
	common code (Ns_HttpCheckHeader(), Ns_HttpCheckSpool(),
	Ns_SetNamedVar())

	- same changes applied to ns_http's close friend ns_ssl in the nsssl
	module.

2013-06-18 10:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9372ed822d26)

	* doc/src/naviserver/ns_config.man, nsd/init.tcl, nsd/tclconf.c,
	nsdb/util.tcl, nsperm/htaccess.tcl, tcl/cache.tcl, tcl/charsets.tcl,
	tcl/config.tcl, tcl/fastpath.tcl, tcl/file.tcl, tcl/http.tcl,
	tcl/limits.tcl, tcl/sendmail.tcl, tests/ns_config.test:
	- added option "-set" to ns_config to set the parameter to the
	default value in case it was no earlier provided. This makes the
	actual value query-able later.

2013-06-18 10:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e642dfab422)

	* nsd/driver.c:
	- reduce variable scopes

2013-06-18 09:04 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3d007d12140)

	* nsd/sock.c:
	- allow Ns_SockTimedWait to wait for different kind of events at the
	same time (i.e. wait for NS_SOCK_READ|NS_SOCK_WRITE)

2013-06-18 09:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (21fde0e5b190)

	* nsd/config.c:
	- create section if it does not exist

2013-06-17 21:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c9f91cdb0f31)

	* nsd/driver.c:
	- provide determined hostname and address back to configuration
	nsset

2013-06-16 20:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (00cc200c8aa7)

	* nsd/driver.c:
	- make code more robust to invalid data

2013-06-16 19:45 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be3d10ba3072)

	* nsd/log.c, nsd/nsconf.c, nsd/pidfile.c, nsd/tclconf.c,
	nsd/tclinit.c:
	- improve querying of ns_config values (e.g. in nsstats)
	- update config variables of filenames or directories to absolute
	values
	- keep defaults (if provided) of tcl_level ns_config calls

2013-06-16 19:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (17375dbb3efe)

	* nsd/driver.c, nsd/nsd.h, nsd/nsmain.c:
	- added ns_param tmpdir honoring environment variable TMPDIR
	- use ns_param tmpdir as default for drivers uploadpath

2013-06-16 19:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6e1ee0e63f75)

	* tcl/config.tcl:
	- improve indentation

2013-06-16 19:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f066e8fe52a)

	* doc/src/naviserver/ns_return.man:
	- add missing sentence to man entry

2013-06-16 19:30 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6103f20a355d)

	* tcl/file.tcl:
	- add space to notice in error.log to improve readability

2013-06-15 03:10 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42e4e3102522)

	* nsd/tclhttp.c:
	- quick fix for objv-parser bug; we should use Ns_ParseOptions()

2013-06-08 14:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2d9cb4ffb6d8)

	* .hgtags:
	Added tag naviserver-4.99.5 for changeset b7633f34a21a

2013-06-08 14:13 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b7633f34a21a [naviserver-4.99.5])

	* NEWS:
	updated NEWS

2013-06-08 13:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c23b2f245a19)

	* nsd/sock.c, nssock/nssock.c:
	- provide feedback about used socketoptions when nodelay or
	defereaccept are activated

2013-06-04 14:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d812197ba485)

	* nsd/driver.c:
	- copy module name to avoid problems with shutdown order

2013-05-31 00:37 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2341f67aa698)

	* doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_thread.man,
	doc/src/naviserver/nsv.man, nsd/fastpath.c, nsd/set.c,
	nsd/tclcache.c, nsd/tclcmds.c, nsd/tclvar.c, tcl/aolserver-
	openacs.tcl, tests/ns_cache.test, tests/ns_nsv.test:
	- nsv_get: added optional argument ?varName? to nsv_get to obtain
	compatibility with tsv::get in the Tcl thread library. This option
	allows an atomic test + get operation, avoiding unsafe nsv_exists
	following by nsv_get. Syntax: nsv_get /array/ /key/ ?/varName/?

	- ns_cache_get: new command to obtain a value from the cache.
	similar to nsv_get. Syntax: ns_cache_get /cache/ /key/ ?/varName/?

	- extended regression test and documentation

	- nsd/set.c: optimized Ns_SetFindCmp() by taking invariant out the loop.

2013-05-25 20:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c49639889fd9)

	* .hgtags:
	Added tag naviserver-4.99.5 for changeset 723d67081aed

2013-05-25 20:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (723d67081aed)

	* NEWS:
	- updated NEWS

2013-05-25 20:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a0fab322d90e)

	* .hgtags:
	Added tag naviserver-4.99.5 for changeset 283dbf8cd8dc

2013-05-25 20:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (283dbf8cd8dc)

	* Makefile:
	- updated file name

2013-05-25 20:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7786c3f841f3)

	* .hgignore:
	- added generated file version_include.man

2013-05-25 20:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af3454005770)

	* README, doc/src/manual/admin-maintenance.man, doc/src/template.man:
	- updated version numbers

2013-05-25 20:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7849c03c1331)

	* contrib/start-scripts/naviserver.SuSE, doc/src/README.txt,
	naviserver.rdf.in, nscp/doc/mann/nscp.man:
	- remove CVS variables

2013-05-25 19:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4b516983d919)

	* nsd/tclmisc.c:
	- remove CVS variables

2013-05-22 22:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5ca188b27de7)

	* nsd/driver.c:
	- no need to open file after mkstemp() call

2013-05-22 22:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3120c63be170)

	* nsd/connio.c, nsd/tcljob.c, nsd/tclvar.c, nsdb/dbtcl.c,
	nsdb/dbutil.c, nsproxy/nsproxylib.c, nsthread/mutex.c:
	- merged versions

2013-05-22 22:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8cc95571d697)

	* include/ns.h, nsd/adpeval.c, nsd/auth.c, nsd/binder.c, nsd/connio.c,
	nsd/driver.c, nsd/lisp.c, nsd/queue.c, nsd/tcljob.c, nsd/tcltime.c,
	nsd/tclvar.c, nsdb/dbtcl.c, nsdb/dbutil.c, nsproxy/nsproxylib.c,
	nsthread/mutex.c:
	- further c-code cleanup (make assumption explicit, avoid potential
	NULL derefs, use more safe system calls)

2013-05-21 14:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (22152a98770e)

	* include/ns.h, nscp/nscp.c, nsd/connio.c, nsd/dns.c, nsd/exec.c,
	nsd/fastpath.c, nsd/filter.c, nsd/form.c, nsd/index.c, nsd/listen.c,
	nsd/nsmain.c, nsd/pidfile.c, nsd/progress.c, nsd/return.c,
	nsd/rollfile.c, nsd/sched.c, nsd/sls.c, nsd/sockcallback.c,
	nsd/tclcache.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclsock.c, nsd/tclvar.c, nsd/tclxkeylist.c,
	nsd/url2file.c, nsd/urlopen.c, nsd/urlspace.c, nsdb/dbdrv.c,
	nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/dbutil.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c, nsthread/mutex.c, nsthread/winthread.c:
	- reduced variable scopes to improve source locality

2013-05-15 13:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (34cdce74dbcd)

	* doc/src/naviserver/ns_return.man:
	- fix syntax in doc file

2013-05-14 19:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d9c111b6762d)

	* nsd/init.tcl:
	- remove scripted setting of encoding system, since this is handled
	already in C

2013-05-13 12:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (337b28b1b068)

	* include/ns.h, nsd/driver.c, nsd/modload.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/queue.c, nsdb/dbdrv.c, tests/all.tcl:
	Further work on avoiding parallel create interp operations:
	- New function Ns_TclCreateInterp() to wrap Tcl_CreateInterp() in a
	mutex
	- Ns_ModuleLoad():
	    * pass optionally interp to avoid Tcl_InterpCreate() operations in
	case we have a interp available
	    * use NS_TclCreateInterp() instead of Tcl_CreateInterp()
	- Made messages in error log more orthogonal
	- Factored out NsStopSpoolers() and removed dependency of spooler
	shutdown from DriverThread()

2013-05-13 12:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07a9123e1e0a)

	* nsd/tclinit.c:
	- correct spelling in comment

2013-05-12 23:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42abb2f9200e)

	* openacs-config.tcl:
	- more cleanup in sample config file

2013-05-12 23:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (14adbde0c900)

	* tcl/fastpath.tcl:
	- remove unused parameters

2013-05-12 03:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7154ef742605)

	* doc/src/naviserver/ns_conn.man, doc/src/naviserver/ns_info.man,
	nsd/conn.c, nsd/info.c, tests/ns_conn.test:
	- moved "ns_info pool" to "ns_conn pool", since we have as well
	"ns_conn server"

2013-05-12 02:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0b2c90150362)

	* doc/src/naviserver/ns_info.man, nsd/info.c:
	- added "ns_info pool", which returns the current connection pool
	from the current server.

2013-05-11 23:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c9e0f1a4b4c)

	* openacs-config.tcl:
	- replace nsopenssl definition with nsssl
	- normalize indenting

2013-05-11 18:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5565f541e41d)

	* README, autogen.sh, m4/tcl.m4:
	- apply config changes as suggested by martin matuska

2013-05-11 17:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8decee260da2)

	* nsd/tcljob.c:
	- provide a a better name to the mutex lock for the ns_job thread
	pool

2013-05-10 16:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7366da393016)

	* tests/testserver/modules/testhttp.tcl,
	tests/testserver/modules/vhost.tcl:
	- use newer style tcl expressions

2013-05-10 11:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7630a813bdde)

	* nsd-config.tcl, openacs-config.tcl:
	- comment parameter "tclinitlock" for ns/params in config files

2013-05-10 11:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (193636c311d0)

	* nsd/queue.c:
	- more paranoia checks for potential race conditions

2013-05-09 18:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7bf3c02b3ea)

	* nsd/queue.c:
	- paranoia check: fix several dirty reads

2013-05-09 18:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1306a37dacdd)

	* nsthread/mutex.c:
	- make staticstics collection less racy. In the worst case, one
	could have gotten just wrong statistics, but the cleanup eases at
	least debugging

2013-05-09 18:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3ad4c845bcf)

	* nsd/tclinit.c:
	- change system encoding just once

2013-05-08 23:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6f112d0736f7)

	* nsd/tclinit.c:
	- protect against a potential race condition in Tcl_CreateInterp()

2013-05-05 23:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1fba8c95e001)

	* NEWS:
	- updated NEWS file (based on the version prepared from Bernhard van
	Woerden)

2013-05-05 21:58 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (535f95d1fa8b)

	* nsd/init.tcl, tcl/cache.tcl, tcl/charsets.tcl, tcl/compat.tcl,
	tcl/fastpath.tcl, tcl/file.tcl, tcl/form.tcl, tcl/http.tcl,
	tcl/init.tcl, tcl/nstrace.tcl, tcl/sendmail.tcl, tcl/util.tcl:
	- remove obsolete RCS variables

2013-05-05 20:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be92abc12fc4)

	* Makefile:
	- removed unneeded macro variable

2013-05-05 20:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6f9c5cdd7e2c)

	* nstclsh/Makefile, nstclsh/nstclsh.c: deleted file.
	* Makefile, nstclsh/Makefile, nstclsh/nstclsh.c:
	- remove nstclsh (not needed, since we have "nsd -c")

2013-05-03 12:21 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cf2c209e4f6c)

	* nsd/driver.c:
	- change sock-read-error message from a warning to a driver-debug
	message, since this happens quite often

2013-05-01 19:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fce8d8437eaa)

	* - merge

2013-05-01 19:19 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be4595182315)

	* nsd/tclinit.c:
	- Enforce utf-8 as system encoding Without this change the
	regression test fails when e.g. the system environment uses LANG=C.

	 Background: On todays systems, the LANG variable is set to e.g.
	"en_US.UTF-8". This setting results in a "encoding system" in Tcl of
	utf-8. However, when the system setting is "LANG=C", we see the
	following behavior in Tcl:

	 alice:~% tclsh % set tcl_patchLevel 8.5.13 % encoding system
	iso8859-1 % set a "äüö" äüö % string length $a 6 % string bytelength
	$a 12

	 The three characters "äüö" are reported with a string length of 6
	and a byte length of 12. The same information is used in NaviServer
	for e.g. the contentlength. Also in NaviServer, the default encoding
	is utf-8. So setting the system encoding should result in less
	surprises, different output encodings can be defined anyhow.

2013-04-30 20:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a618349a0d9)

	* nslog/nslog.c:
	- nslog.c: make logfile printing more robust (in respect of external
	modules)

2013-04-30 16:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (20e6d7582238)

	* openacs-config.tcl:
	- fix comment in config file

2013-04-30 10:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ea2926b8585b)

	* doc/src/naviserver/ns_return.man:
	- document "-binary" flag for ns_return

2013-04-29 11:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a2a69b2a19d7)

	* tcl/aolserver-openacs.tcl:
	- provide compatibility with nx 2.0b5 (unreleased)

2013-04-29 10:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3316f7cfcfc)

	* openacs-config.tcl:
	- recommend in sample config script to enable writers by default

2013-04-29 10:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (756498b99bed)

	* nslog/doc/mann/ns_accesslog.man:
	- beautify documentation

2013-04-29 10:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7c5e5106952e)

	* nsdb/dbtcl.c:
	- fix indentation

2013-04-13 10:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (34a5c3d45a29)

	* tcl/nstrace.tcl:
	- Do not save variables of the toplevel namespace into the
	blueprint. OpenACS had with this a problem, since the database
	handles are managed via global variables, which is solved by this
	modification.

2013-04-12 20:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9fad2f3c3701)

	* include/ns.h, nsd/callbacks.c, nsd/conn.c, nsd/driver.c, nsd/nsd.h,
	nsd/queue.c, nsd/range.c, nsd/server.c:
	- changed server lock to pool lock in most cases
	- fixed typos

2013-04-07 15:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8605b95b8ff3)

	* doc/src/naviserver/ns_setexpires.man, tcl/util.tcl:
	- extend ns_setexpires such one can include chache-response-
	directives (see section 14.9 of rfc2616)

2013-04-03 13:36 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b30499372950)

	* tcl/util.tcl:
	- pass seconds explicitly to ns_setexpires

2013-04-03 13:26 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fdfdedf23b1c)

	* doc/src/manual/adp-overview.man, doc/src/manual/tcl-libraries.man,
	doc/src/manual/tcl-overview.man:
	- remove obsolete argument '$conn' from documentation

2013-04-03 13:15 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ef22c345b50d)

	* openacs-config.tcl:
	- move directory listing options to fastpath section, where the code
	expects it

2013-03-18 10:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fb1cbbd12c8e)

	* doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_httpget.man,
	doc/src/naviserver/ns_httpopen.man,
	doc/src/naviserver/ns_httppost.man, tcl/http.tcl:
	- updated documentation (ns_http and friends)
	- marked ns_httpget, ns_httppost and ns_httpopen as deprecated (use
	ns_http instead)

2013-03-14 19:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (49967a3cb4fa)

	* nsd/driver.c:
	- fix syntax in print statement

2013-03-14 13:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a0066abf985)

	* include/nsconfig.h.in:
	change due to extended autoconf

2013-03-14 13:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (792d3c5c00cc)

	* nsd/driver.c:
	Report spoolerthreads and writerthreds in log file even when they
	are 0. When drivers are defined globally and/or locally, make sure
	to avoid potential confusions.

2013-03-14 12:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (27b1f9ab4d14)

	* nsd/init.tcl:
	New function "ns_driversection" do determine the configsection for
	driver in the config file. Usage: ns_driversection ?-driver drv?
	?-server s?

2013-03-11 11:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (50541bdb2fef)

	* doc/src/naviserver/ns_writer.man:
	- fix documentation syntax

2013-02-20 12:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (212c625cd29a)

	* tests/ns_writer.test: new file.
	* doc/src/naviserver/ns_writer.man, include/ns.h, nsd/driver.c,
	nsd/queue.c, nsd/tclobjv.c, tests/ns_writer.test:
	- ns_writer: added -server option to "ns_writer list" to list only
	requests from a particular (virtual) server
	- extended regression test, updated documentation
	- added Ns_OptionConverter: Ns_OptionServer to convert string to
	existing server.
	- extended option parser to allow options at the end of a command

2013-02-18 13:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8c76e6855c84)

	* nsd/compress.c:
	- reduce (at least initial) memory consumption by lazy initializing
	zlib

2013-02-18 13:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92373cc9307a)

	* tests/ns_hostbyaddr.test:
	- adjust notDarwin constraint true for versions before macOS 10.8

2013-02-16 13:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15fd3f1dacfd)

	* doc/src/naviserver/ns_writer.man, nsd/driver.c,
	tests/http_byteranges.test:
	- ns_writer: made "ns_writer submitfile" more robust and foolproof,
	- ns_writer: fixed "size" confusion (filesize vs. nr-bytes to be
	transmitted)
	- added more regression tests
	- updated documentation

2013-02-14 15:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ab0a9088a871)

	* tests/ns_log.test:
	- improve wording in status message of test

2013-02-14 15:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (23454aa8fb03)

	* tests/ns_info.test:
	- remove deprecated ns_info subcommands from test

2013-02-14 15:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4ebacdbd97be)

	* tests/ns_hostbyaddr.test:
	- removed "-constraints {notDarwin}" in tests, since apparently not
	needed anymore

2013-02-14 15:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a78d226dc12)

	* nsd/init.tcl, tests/tclresp.test:
	- Change "ns_eval -synch ..." back into "ns_eval -sync ..." to
	follow usual terminology and to improve compatibility with aolserver

2013-02-11 14:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f229c831558)

	* nsd/tclmisc.c:
	fix typo

2013-02-08 12:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dd489f511811)

	* nsd/driver.c, nsd/progress.c, nsd/tclthread.c:
	- silence compiler warnings about format specifiers under 32bit
	compiles

2013-02-07 13:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (523a93e5fd04)

	* nsd/driver.c, nsd/nsd.h:
	- Writer: fix leftover offset handling for partial writes
	- WriterSock: rename member "nread" to "toread" and move it into
	"file" struct

2013-02-07 13:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f042b5cda65b)

	* doc/src/naviserver/ns_server.man:
	- improve documentation

2013-02-07 13:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7560fd9246de)

	* nsd/queue.c:
	- ns_server: mark passing of optional second arg as pool as
	deprecated.

2013-02-04 18:10 -0700  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a43d203b6de)

	* include/ns.h, nsd/conn.c, nsd/nsd.h, nsd/queue.c, nslog/nslog.c:
	make timing statistics independent from nslog: refactor
	Ns_ConnTimeStats() into Ns_ConnTimeSpans() and Ns_ConnTimeStats()

2013-02-04 18:06 -0700  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e88f62ecb6f5)

	* doc/src/naviserver/ns_server.man:
	make order of ns_server subcommands alphabetical

2013-02-04 18:04 -0700  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ae9cbb374927)

	* doc/src/naviserver/ns_register.man: new file.
	* doc/src/naviserver/ns_register.man:
	revive ns_register* man page

2013-02-01 23:04 -0700  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aeb804fd197c)

	* doc/src/naviserver/ns_server.man, nsd/queue.c, tests/ns_server.test:
	* added "ns_server ?-server s? serverdir" to return the base
	directory of the virtual server
	* extended regression test, updated documentation

2013-02-01 17:17 -0700  Gustaf Neumann  <neumann@wu-wien.ac.at>  (71803edbe081)

	* doc/src/naviserver/ns_info.man, nsd/info.c:
	marked "ns_info platform" as deprecated; use
	$::tcl_platform(platform) instead.

2013-01-26 18:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (204cf60daa3c)

	* include/ns.h, nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/return.c,
	nssock/nssock.c, tests/http_byteranges.test:
	* Fixed all known range request bugs from regression test.
	* Handle most range requests via writer (all memory based range
	requests up to 32 ranges, 0 or 1 range fd-requests).
	* Extended WriterQueue to send most requests via a single corked unit
	(don't call Ns_ConnWriteVData() from WriterQueue() )
	* Extended regression test.

2013-01-24 13:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90cd8518f71a)

	* nsd/driver.c, nsd/fastpath.c, nsd/nsd.h, nsd/return.c,
	tests/http_byteranges.test, tests/test.nscfg:
	- Allow delivery of mmaped files via writer without the need of
	copying contet. Before, mmaped files were delivered via connection
	threads. (still todo: range reguests; could be extended to use mmap
	as well for other cases; other todo: find better way to run tests
	with multiple config files)

2013-01-24 13:15 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3c66f377ce87)

	* nsd/nsmain.c:
	- reduce verbosity

2013-01-23 10:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57c84d3671e7)

	* doc/src/naviserver/ns_adp_registertag.man,
	doc/src/naviserver/ns_register.man: deleted file.
	* doc/src/manual/adp-overview.man, doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_adp_register.man,
	doc/src/naviserver/ns_adp_registertag.man,
	doc/src/naviserver/ns_register.man, nsd/adpparse.c, nsd/tclcmds.c,
	nsd/tclmisc.c:
	- marked ns_register_adptag (use instead ns_adp_registerscript) and
	ns_adp_registertag (use instead ns_adp_registeradp) as deprecated.
	- updated and streamlined documentation
	- removed obsolete doc files doc/src/naviserver/ns_adp_registertag.man
	and doc/src/naviserver/ns_register.man

2013-01-20 23:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c6c25616ed8)

	* nsd/nsmain.c:
	- reduce verbosity

2013-01-20 23:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd0d5f27356b)

	* tests/ns_server.test: new file.
	* doc/src/naviserver/ns_info.man, doc/src/naviserver/ns_server.man,
	include/ns.h, nsd/adprequest.c, nsd/conn.c, nsd/connio.c,
	nsd/driver.c, nsd/fastpath.c, nsd/fd.c, nsd/filter.c, nsd/info.c,
	nsd/log.c, nsd/nsd.h, nsd/nsmain.c, nsd/op.c, nsd/queue.c,
	nsd/return.c, nsd/returnresp.c, nsd/tclinit.c, nsd/tclmisc.c,
	nslog/nslog.c, nsthread/mutex.c, nsthread/nsthreadtest.c,
	tests/ns_info.test, tests/ns_server.test, tests/test.nscfg:
	* Allowing to call "nsd -c" without config file. One can specify the
	environment variable NAVISERVER to point to the naviserver home
	director (for e.g. log file directories), otherwise it is determined
	by the location of the nsd binary.

	 nsd -c NAVISERVER=/usr/local/ns/ ./nsd/nsd -c

	* Standardize printing of timings (get rid of stupid
	$sec.$microsecs, where 1.2 means 1.000002 secs).

	* Moved statistics structure from NsServer to ConnPool to track per-
	pool usage. Added member poolPtr to Conn for easy association.

	* Defined new C function Ns_LogDeprecated() for handling deprecated
	messages for tcl-level defined commands.

	* Marked the following commands as deprecated:

	 ns_info filters ns_info pagedir ns_info pageroot ns_info
	requestprocs ns_info tcllib ns_info traces ns_info url2file

	 and defined the following commands instead:

	 ns_server ?-server server? filters ns_server ?-server server?
	pagedir ns_server ?-server server? requestprocs ns_server ?-server
	server? tcllib ns_server ?-server server? traces ns_server ?-server
	server? url2file

	* Marked the following commands as deprecated:

	 ns_server keepalive (use "ns_conn keepalive" instead) ns_info winnt
	(use $::tcl_platform(platform))

	* Updated documentation.
	* Updated regression test (new test set ns_server.test).

2013-01-19 17:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be100c6d13b9)

	* nsd/return.c:
	fix typo

2013-01-19 01:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05918d9bc26b)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/binder.c, nsd/callbacks.c,
	nsd/compress.c, nsd/config.c, nsd/connio.c, nsd/cookies.c,
	nsd/driver.c, nsd/encoding.c, nsd/limits.c, nsd/op.c,
	nsd/pathname.c, nsd/queue.c, nsd/request.c, nsd/returnresp.c,
	nsd/rollfile.c, nsd/server.c, nsd/sockfile.c, nsd/tclcallbacks.c,
	nsd/tclmisc.c, nsd/tclobjv.c, nsd/tclset.c:
	reducing variable scopes

2013-01-18 23:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2e80433dd9c)

	* include/ns.h, nscgi/nscgi.c, nsd/adprequest.c, nsd/compress.c,
	nsd/conn.c, nsd/connio.c, nsd/driver.c, nsd/return.c,
	nsd/returnresp.c:
	Reduce number of (used) API calls by favoring iovec interface

2013-01-18 12:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (261b94d30bf2)

	* nsd/sockfile.c:
	check in linux version

2013-01-18 11:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (744475eb24fe)

	* include/ns.h, nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/sock.c,
	nsd/sockfile.c, nssock/nssock.c:
	Partial write-reform:

	Previously, NsDriverSend() never performed partial writes although
	some client functions handled it (not always correctly). The reason
	for this was that nssock.sendProc used Ns_SockSendBufs() as
	implementation, and Ns_SockSendBufs() uses its own timeouts and
	event handling to deliver all content also on non-blocking sockets.

	The consequence was, that every write request in the writer thread
	waited until the full completion, which causes essentially a single
	outgoing request per writer thread at a time. This problem was
	reduced somewhat by the fact that file-spools read always smallish
	junks where the blocking was usually not so long. The problem was
	especially bad when fastpath-mmap + writer threads were activated
	and/or when only one writer thread was defined. For file with sizes
	> writersize, this meant sequentialization of file deliveries.

	The complete-delivery scheme is not a problem, when the connection
	threads send the content to the client (since multiple connection
	threads can send back multiple streams and do not block each other
	directly), but this is a problem when e.g. a single writer thread
	should deliver content of multiple requests.

	Now, the new code handles partial low-level writes correctly by
	allowing partial writes on the driver level. This requires some
	reshuffling of the functions.

	- The old SockSend() is now implementation of nssock.sendProc and
	performs partial writes on non-blocking sockets.

	- Ns_SockSendBufs() delivers all iovec bufs like before but calls
	now NsDriverSend() instead of the direct SockSend().

	- Ns_ConnSend() calls Ns_SockSendBufs() instead of NsDriverSend() in
	cases, where the writer thread is not used.

	- Ns_SockSendBufs() calls NsDriverSend() instead of SockSend()

	- Ns_SockSendFileBufs() calls NsDriverSend() instead of
	Ns_SockSendBufs()

	Further changes:

	- Group fields in WriterSock to separate concern of file-spooling
	and memory based requests.
	- Factor out WriterSend() from DriverThread() to improve readability
	and locality

	The code was tested with nssock + nsssl on macOS and Linux.

2013-01-18 10:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8843e47d696f)

	* include/nsthread.h:
	simplify UIO_MAXIOV handling; add UIO_SMALLIOV if not defined

2013-01-16 23:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b0ba9de9d8dc)

	* nsd/connio.c:
	fix format code warnings for newest generation of gcc

2013-01-16 23:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba23400a57df)

	* contrib/banners/ns_logosmall.png:
	provide better compressed image

2013-01-16 23:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b3d4cd30754a)

	* configure.ac, m4/gettid.m4, nsd/sock.c:
	Support TCP_FASTOPEN (new feature in Linux 3.7.0, (co)developed from
	Google's Web Performance Group), tested with FC18

2013-01-16 23:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (01727d0281c9)

	* nsd/driver.c:
	simplify SockSendResponse; flag partial writes

2013-01-16 16:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ae1c0cad522f)

	* nsd/crypt.c, tests/ns_crypt.test:
	In newer Linux distributions (like FC 18) crypt() returns frequently
	NULL (for empty salt, or one-character salt)

2013-01-16 13:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d80a0e3d720)

	* nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/return.c:
	use scatter/gather interface for writer instead of the char*
	interface

2013-01-16 11:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e957e4341ca8)

	* nsd/driver.c, tests/test.nscfg:
	Avoid dup (and potential close-confusion) on tmp files; minor
	simplification of the handling of the various inputs for
	WriterQueue();

2013-01-16 11:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (af6808088222)

	* tests/http-test-config.tcl: deleted file.
	* tests/http-test-config.tcl:
	remove unused file

2013-01-16 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bedba57ee16f)

	* nsd/queue.c:
	cleanup

2013-01-14 19:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f26fea5d0f3a)

	* nsd/queue.c:
	Fix output for "ns_server active|queued|all"

2013-01-14 14:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c7f62eaf19c1)

	* nsd/driver.c, nsd/queue.c:
	move Ns_ReleaseTemp() of streaming content from connection finish to
	driver finish

2013-01-14 14:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1455b01bfd68)

	* nsthread/mutex.c:
	reduce verbosity

2013-01-14 12:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (565d3081b766)

	* doc/src/naviserver/ns_writer.man, include/ns.h, include/nsthread.h,
	nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/return.c,
	openacs-config.tcl, sample-config.tcl.in:
	- Added asynchronous HTML streaming via writer to reduce connection
	thread blocking time for slow delivery lines.
	- New parameter "writerstreaming" for drivers to activate/deactivate
	streaming of HTML output via writer thread
	- New commands "ns_writer size /driver/ ?value?" and "ns_writer
	streaming /driver/ ?value?" to query set configuration parameter of
	writer thread
	- Use "NS_EXTERN" instead of "extern"
	- Updated documentation

2013-01-13 18:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cb7494857893)

	* nsthread/mutex.c:
	track total lock time

2013-01-10 12:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9f46985a50ec)

	* tests/servers/server1/pages/ns_adp_chunked.adp,
	tests/servers/server1/pages/ns_adp_compress.adp: deleted file.
	* doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_adp_ctl.man, nsd/adpcmds.c, nsd/adpparse.c,
	tcl/compat.tcl, tcl/form.tcl, tests/cookies.test,
	tests/encoding.test, tests/errordoc.test, tests/http.test,
	tests/http_chunked.test, tests/http_keep.test,
	tests/ns_conn_host.test, tests/ns_register_filter.test,
	tests/ns_sls.test, tests/servers/server1/pages/ns_adp_chunked.adp,
	tests/servers/server1/pages/ns_adp_compress.adp,
	tests/tclconnio.test, tests/tclresp.test, tests/timeout.test,
	tests/url2file.test:
	- Added proc "ns_deprecated" to flag deprecated commands in the
	log file.
	- Marked procs in compat.tcl and form.tcl as deprecated.
	- Replaced deprecated commands in the test file by the non-deprecated
	counterparts.
	- Improved documentation (removed non-existing cmds/options, add
	missing ones, ...)

2013-01-09 20:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5dad667e82b1)

	* nsd/connio.c, nsd/driver.c:
	Don't send streamed content via writer trhead for the time being

2013-01-09 14:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5bbba55a521e)

	* nsd/tclobjv.c:
	- remove wrong assertion

2013-01-09 01:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bba8a5fa02be)

	* doc/src/naviserver/ns_urlencode.man, include/ns.h,
	include/nsthread.h, nsd/queue.c, nsd/tclobjv.c, nsd/urlencode.c,
	tests/ns_urlencode.test:
	Generalized option parser from ns_server and used in ns_urlencode
	and ns_urldecode to get rid of the potential crash due to non-static
	strings in Tcl_GetIndexFromObjStruct().

2013-01-08 10:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d3258b4d88f3)

	* nsd/nsd.h, nsd/queue.c:
	return in [ns_server stats] and in [ns_server connections] the
	connections per server, and not the total number of connections

2013-01-07 09:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (191cae81d9d9)

	* configure.ac: new file.
	* configure.in: deleted file.
	* autogen.sh, configure.ac, configure.in, include/Makefile.global.in,
	include/nsconfig.h.in, m4/tcl.m4:
	Update to TEA 3.9, rename configure.in to configure.ac as suggested
	by the auto-tools warning

2013-01-04 23:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d44a8f9b0067)

	* doc/src/naviserver/ns_adp_close.man,
	doc/src/naviserver/ns_adp_flush.man,
	doc/src/naviserver/ns_adp_stream.man: new file.
	* doc/src/manual/tcl-overview.man, doc/src/naviserver/commandlist.man,
	doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_adp_abort.man,
	doc/src/naviserver/ns_adp_break.man,
	doc/src/naviserver/ns_adp_close.man,
	doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_flush.man,
	doc/src/naviserver/ns_adp_return.man,
	doc/src/naviserver/ns_adp_stream.man,
	doc/src/naviserver/ns_conn.man:
	improve documentation: add a few missing man-pages, group entries in
	commandlist, provide cross-references

2013-01-04 23:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7a18d0d94584)

	* tcl/form.tcl:
	don't use ns_unlink, which is deprecated

2013-01-04 21:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (83b1c55f3770)

	* doc/src/naviserver/ns_adp_registertag.man:
	fix typo

2013-01-04 21:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (85c54c7260cd)

	* nsd/queue.c:
	provide better error message in case the subcommand of "ns_server"
	was not found.

2013-01-04 21:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d66a96b29d3)

	* doc/src/naviserver/ns_adp_registeradp.man,
	doc/src/naviserver/ns_adp_registerproc.man,
	doc/src/naviserver/ns_register_adp.man,
	doc/src/naviserver/ns_register_adptag.man,
	doc/src/naviserver/ns_register_fastpath.man,
	doc/src/naviserver/ns_register_filter.man,
	doc/src/naviserver/ns_register_proc.man,
	doc/src/naviserver/ns_register_proxy.man,
	doc/src/naviserver/ns_register_trace.man,
	doc/src/naviserver/ns_register_url2file.man: deleted file.
	* doc/src/naviserver/commandlist.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_adp_append.man,
	doc/src/naviserver/ns_adp_argc.man,
	doc/src/naviserver/ns_adp_argv.man,
	doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_adp_break.man,
	doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_eval.man,
	doc/src/naviserver/ns_adp_include.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_adp_puts.man,
	doc/src/naviserver/ns_adp_registeradp.man,
	doc/src/naviserver/ns_adp_registerproc.man,
	doc/src/naviserver/ns_adp_registertag.man,
	doc/src/naviserver/ns_adp_return.man,
	doc/src/naviserver/ns_adp_tell.man,
	doc/src/naviserver/ns_adp_trunc.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_register_adp.man,
	doc/src/naviserver/ns_register_adptag.man,
	doc/src/naviserver/ns_register_fastpath.man,
	doc/src/naviserver/ns_register_filter.man,
	doc/src/naviserver/ns_register_proc.man,
	doc/src/naviserver/ns_register_proxy.man,
	doc/src/naviserver/ns_register_trace.man,
	doc/src/naviserver/ns_register_url2file.man:
	consolidating commands registering scripts and adp pages for a URL
	in ns_register man page. Removing man pages for non-existing
	commands, and half written man pages about commands, written
	elsewere, adding documentation for ns_uregister_op, simplifying
	keyworkds, etc.

2013-01-03 22:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (05ed093bfe4b)

	* nsd/queue.c:
	add lookup for server in NsTclServerObjCmd()

2013-01-03 18:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6efd429a1f4e)

	* nsd/queue.c:
	allow setting the size for maxthreads as well via "ns_server
	maxthreads value"

2013-01-03 16:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (29b461ad978a)

	* nsd/nsd.h, nsd/queue.c, nsd/server.c:
	added experimental cmds ns_server ?-server s? ?-pool p? maxthreads
	?value? ns_server ?-server s? ?-pool p? minthreads ?value? to query
	change minthreads and maxthreads at runtime

2013-01-03 16:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2381e37754af)

	* nsd/driver.c:
	reduce verbosity

2013-01-03 14:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f959af2c81e)

	* nsd/queue.c:
	improve comments

2013-01-03 14:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (625c91fa2812)

	* nsd/tclinit.c, nsd/urlencode.c:
	make Ns_ObjvTable static where possible

2013-01-03 14:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (defd5644ecdd)

	* nsd/queue.c:
	Avoid parallel creates in case these are not allowed by the config
	file

2013-01-01 21:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5b607ff06c89)

	* doc/src/naviserver/commandlist.man, doc/src/naviserver/ns_cache.man,
	doc/src/naviserver/ns_hrefs.man,
	doc/src/naviserver/ns_register_fastpath.man:
	improve documentation

2013-01-01 20:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6d9e47d7a482)

	* nslog/doc/mann/ns_accesslog.man, nslog/nslog.c, openacs-config.tcl,
	sample-config.tcl.in:
	- document logpartialtimes
	- compute and aggregate partial times as well when
	nslog/logpartialtimes is not set

2013-01-01 15:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5c6bbe2d896b)

	* nsd/log.c:
	drop LogToAsyncFile and use NsAsyncWrite in LogToFile. Async log
	file writing can be switched on/off by configuring the async log
	writer.

2013-01-01 15:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cceb972b2855)

	* nsd/queue.c:
	cleanup

2013-01-01 15:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1769af01b1d)

	* nsd/queue.c:
	- remove debug statements

2013-01-01 15:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3992f666df04)

	* nsd/driver.c:
	- remove debug statements

2013-01-01 15:22 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ce9b4b126a75)

	* nsd/nsd.h, nsd/queue.c:
	remove unneeded argument

2013-01-01 14:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5a1ca17ed9e8)

	* nsd/queue.c:
	- remove cast

2012-12-27 18:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6c17f7176c1)

	* configure.in:
	merged version with naviserver-connthreadqueue and bumped release to
	4.99.5

2012-12-25 14:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (581d31e94187)

	* include/nsthread.h, nsd/cache.c, nsd/config.c, nsd/conn.c,
	nsd/driver.c, nsd/filter.c, nsd/info.c, nsd/log.c, nsd/quotehtml.c,
	nsd/set.c, nsd/tclcache.c, nsd/tclconf.c, nsd/tclinit.c,
	nsd/tclobjv.c, nsd/tclset.c, nsd/tclvar.c, nsd/urlencode.c,
	nsthread/memory.c, nsthread/mutex.c, nsthread/pthread.c,
	nsthread/time.c:
	add branch optimization for most frequently used blocks

2012-12-23 18:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (62d265cf82ec)

	* nsd/config.c:
	Use GetSection() instead of Ns_ConfigCreateSection() in ConfigGet(),
	since this is (a) faster and (b) removes the need for the most-
	frequently used mutex lock in naviserver, namely "nsd:conf".

2012-12-23 18:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dddaad0fa232)

	* openacs-config.tcl:
	- recommend to set the OutputCharset in the config file in OpenACS

2012-12-20 12:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ffb6a6ab6c4)

	* doc/src/naviserver/ns_conn.man, doc/src/naviserver/ns_writer.man,
	nsd/conn.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c,
	tests/ns_conn.test:
	New subcommand "ns_conn clientdata" to query or set the client date
	of the current connection. The client data is provided by the
	application and is potentially passed to different threads and can
	be used to establish the context with the connection thread. For
	example, the writer thread outputs the client data when listing
	running connections (one can determine e.g. which user has initiated
	the delivery, etc.).

	Output in "ns_writer list" contain now start time of the initiating
	request, name of the thread, driver, the ip-address of the
	requestor, the file descriptor, the remaining size and the bytes
	already sent, and the client data as provided via [ns_conn
	clientdata].

2012-12-20 12:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (250f0076c409)

	* nsd/fastpath.c:
	initialize static variable cache to NULL; return empty in
	ns_fastpath_cache_stats, if the fast_path cache is not used.

2012-12-20 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (81f9325102c7)

	* nsd/urlspace.c:
	make sure to initialize variable

2012-12-19 15:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (49ea7086be08)

	* doc/src/naviserver/ns_conn.man:
	Document missing options of ns_conn.

2012-12-19 15:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3071817d3961)

	* nsd/conn.c, tests/ns_conn.test:
	bring ns_conn options into alphabetical order

2012-12-19 13:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b36cce462977)

	* doc/src/naviserver/ns_return.man, doc/src/naviserver/ns_writer.man:
	document "ns_writer list" more precisely

2012-12-19 13:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c1e99ad4acf)

	* nsd/queue.c:
	reduce verbosity

2012-12-19 13:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f4b44884292)

	* nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/return.c:
	Let Ns_ConnSend() use the writer thread to deliver adp-content etc.
	without blocking a connection thread. This improves the request
	latency and avoids (maybe unwanted) DOS attacks.

	Extend the interface of SockWriterRelease() to contain the queue.
	SockWriterRelease() manages now the queue entries as seen e.g. by
	"nswriter list".

	Fix thread safety of "nswriter list".

	Handle POLLHUP in writer thread explicitly.

	Delegate close() operations from writer thread to driver thread via
	NsSockClose().

	Extend interface of NsWriterQueue() to accept as well iovec & nbufs
	(as required by Ns_ConnSend()). This saves an unneeded copy of the
	send data.

2012-12-13 20:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b665f493e57)

	* include/ns.h, nsd/sock.c, nssock/nssock.c:
	pass timeout to Ns_SockSetDeferAccept

2012-12-13 17:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (439ece84a678)

	* include/ns.h, nsd/sock.c, nssock/nssock.c:
	Factor out Ns_SockSetDeferAccept() from nssock and nsssl

2012-12-13 17:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e260f8006483)

	* nsd/request.c:
	Silence false positive compiler warning

2012-12-12 10:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (75871e886d8b)

	* nssock/nssock.c:
	add experimental support for TCP_FASTOPEN

2012-12-11 21:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (669364da8d12)

	* nsd/queue.c, openacs-config.tcl, tests/ns_conn.test:
	setting default for connsperthread to 10000; simplifying flag
	initialization of connections

2012-12-10 21:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0edb9b519267)

	* doc/src/naviserver/ns_conn.man, include/ns.h, nsd/conn.c,
	nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/request.c,
	tests/ns_adp_compress.test:
	refactoring of parsing of accept-encoding; new command 'ns_conn
	zipaccepted'

2012-12-09 17:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3d1a2f56a0b)

	* nsd/sockfile.c, nssock/nssock.c:
	reduce verbosity

2012-12-09 16:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2ca0187b086e)

	* include/ns.h, include/nsconfig.h.in, nsd/sockfile.c,
	nssock/nssock.c, openacs-config.tcl:
	Adding TCP option "nodelay" for nssock on operating systems that do
	not use this per default (Linux uses TCP_NODELAY per default). Using
	TCP_CORK for optimzing TCP_PACKAGE size on machines where this is
	available. Extending buffer size when sending files from 4KB to
	16KB.

2012-12-09 16:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (39bd042715ac)

	* nsd/driver.c:
	remove unused flag

2012-12-07 19:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68f9fe2c79f9)

	* nssock/nssock.c:
	added SO_ACCEPTFILTER for machines having no TCP_DEFER_ACCEPT

2012-12-07 18:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d370c979015)

	* nsd/driver.c, openacs-config.tcl, sample-config.tcl.in:
	rename the parameter "asyncwriter" to "asynclogwriter" to avoid
	confusion with the writer threads, which deliver content
	asynchronously

2012-12-06 17:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65011f8b5a72)

	* nssock/nssock.c:
	shigh. i think i need new glasses.

2012-12-06 14:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f097ea4d8ce)

	* nssock/nssock.c:
	align nssock with the driver logic (revc 0 => SOCK_MORE)

2012-12-04 15:24 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (30af1f999f81)

	* nsd/driver.c:
	Increase static buffer size to avoid stalling from SSL. Make sure to
	reset buffer size to original value on 0 byte reads or error read
	operations.

2012-12-03 10:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e295e96a146a)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/log.c, nsd/nsd.h,
	nsd/queue.c, nsd/server.c, nslog/nslog.c, openacs-config.tcl,
	sample-config.tcl.in:
	Made asyncwriter configurable (boolean ns/parameter "asyncwriter").
	Added shutdown handling for asyncwriter. Added filterTime to
	logpartialtimes and to values returned by "ns_server stats".
	Simplified driver logic (fixed bad interaction with nsssl, which
	used non-blocking sockets, but declared itself as a non-async
	driver). Fixed potential bug for partial reads in header parsing
	(string comparison could read past available bytes, pick up values
	from previous requests). Deleted obsolete parameter "flushcontent".

2012-12-01 22:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e307efa05bd6)

	* openacs-config.tcl, sample-config.tcl.in:
	add documentation for highwatermark and lowwatermark

2012-12-01 22:39 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (865f6f14b9fc)

	* sample-config.tcl.in:
	improve readability, delete parameter "spread"

2012-11-29 20:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (516ee3c00a7a)

	* nsd/queue.c:
	output start time in "end of job" line as tag for easier correlating
	error log and access log

2012-11-29 15:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0c6c01c2d34c)

	* nsd/fastpath.c, nsd/tclcmds.c:
	added command ns_fastpath_cache_stats to obtain usage info from the
	fastpath cache

2012-11-29 10:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4807933db9dc)

	* include/ns.h, nsd/conn.c, nsd/queue.c, nslog/nslog.c:
	add highres start time to partial-times output in access log (to be
	able to repoduce the exact order of requests), minor cleanup

2012-11-28 12:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3b5b47e18cd8)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/log.c, nsd/nsd.h,
	nsd/queue.c, nslog/nslog.c:
	add aggregated accept time, queue time and run time to [ns_server
	stats]

2012-11-28 10:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4d46c5b4acdd)

	* nsd/driver.c, nsd/log.c, nsd/nsd.h, nsd/queue.c, nslog/nslog.c:
	Cleanup: comment code, reduce verbosity, eliminate dead code

2012-11-27 21:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a3be92485ef9)

	* nsd/driver.c:
	naming locks, minor cleanup

2012-11-27 20:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cff1dc1afde4)

	* nsd/driver.c, nsd/log.c, nsd/nsd.h, nsd/queue.c, nslog/nslog.c:
	extended experimental version of async writer to error.log (after
	fighting a while with stderr handling, at least on macOS)

2012-11-26 13:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f3b910583658)

	* nsd/driver.c, nslog/nslog.c:
	added async disk writer to reduce request latencies due to file
	system latencies. Currently just used to access log, can/should be
	optimized, cleaned up, used for error-log etc. shutdown handling
	should be added

2012-11-23 20:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (505410565d35)

	* nslog/nslog.c:
	Fix bug in rolling access log when rollfmt is specified. Previously
	the log file was closed but not reopened, log data was lost.

2012-11-22 12:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (12b9abcbdf6c)

	* include/ns.h, nsd/conn.c, nslog/nslog.c:
	Changed nslog parameter logqueuetime into logpartial times that
	includes accept time, queue time and run time of the request

2012-11-22 11:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (576c476f473d)

	* nsd/driver.c, nsd/nsd.h, nsd/return.c:
	When ns_writer is used explicitly, send the content via writer
	thread regardless of the config value "writersize"

2012-11-22 11:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (013ef1fa3624)

	* nsd/driver.c:
	setting accessTime just on positive accepts

2012-11-22 11:51 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c926f02d6e4f)

	* nsd/driver.c:
	reset sockPtr->flags when reusing a socket structure

2012-11-22 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (65a15e2b555e)

	* nsd/driver.c:
	don't try to accept more than one connection at a time on Darwin,
	since this fails always

2012-11-22 11:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a8239ad4bc3a)

	* nsd/driver.c:
	reset sockPtr->keep just in timeout case

2012-11-22 11:31 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55e79e96206f)

	* nsd/sock.c:
	report error message in sock accept, if the errno is different from
	EAGAIN

2012-11-21 16:21 +0100  gustafn  <gustafn>  (8dbfe498ef47)

	* m4/gettid.m4: new file.
	* configure.in, include/nsconfig.h.in, m4/gettid.m4,
	nsthread/thread.c:
	define gettid via systemcall

2012-11-19 19:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45c6864a48c3)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/fastpath.c, nsd/nsd.h,
	nsd/queue.c, nslog/nslog.c:
	Record for every request the acceptTime, requestQueueTime, and
	requestDequeueTime. Use acceptTime as startTime for a request (was
	requestQueueTime).

2012-11-19 14:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92b5a2b1a91a)

	* nsd/queue.c, nslog/nslog.c:
	measure accept time and queuing time separately

2012-11-19 13:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f404e0875d54)

	* include/ns.h, nsd/conn.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c,
	nslog/nslog.c:
	add experimental feature to record internally the queuing time and
	to allow its output to access log

2012-11-16 12:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0441437b8aed)

	* configure.in, include/nsconfig.h.in, nsthread/thread.c:
	get os-level thread id, which can be used to obtain os-info about
	the threads

2012-11-13 11:37 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6111e0a3424)

	* nsd/driver.c, nsd/queue.c:
	Adjusting server exit to new infrastructure; new function
	NsWakeupConnThreads(ConnPool *poolPtr) to wake up every idle conn
	thread during shutdown. Some cleanup.

2012-11-09 13:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4156c11fde10)

	* nsd/driver.c, nsd/queue.c:
	reduce wakeups, improve code ducumentation.

2012-11-09 12:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c2a1a243a7f0)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	New function NsWakeupDriver(); used in queue to signal conditions to
	the driver, when we might have to recreate threads.

2012-11-07 02:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (be31f2f0e488)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c, nsd/server.c:
	New parameter "lowwatermark" for controlling thread creation.
	Renamed "concurrentcreatethreshold" to "highwatermark". Extend
	"ns_server stats" to return as well the number of created connection
	threads since startup. Fix a bug showing up with nsssl (a driver has
	no NS_DRIVER_ASYNC flag set), where pollin says that data is
	available, but the read returns no data. This lead to a busy loop
	before.

2012-11-04 11:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1a3b22fbe08a)

	* nsd/driver.c:
	make reinitialized all fields of q request to zero; don't initialize
	request with zero after al calloc; take care of drivers without
	servers (during regression test).

2012-11-04 11:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5f6031cef286)

	* nsd/queue.c:
	make exit logic more clear

2012-11-03 15:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (80533c7e8b32)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	add "ns_server stats" to return number of requests, number of spools
	and number of requests added to the waiting queue; todo:
	documentation fix length computation in "ns_writer submitfile" when
	offset is specified

2012-11-02 11:09 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f45d9dac9a44)

	* doc/src/naviserver/ns_returnerror.man: deleted file.
	* doc/src/naviserver/ns_returnerror.man:
	rebased with naviserver tip

2012-11-02 01:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (35c8f6c8dcac)

	* nsd/driver.c, nsd/queue.c, nsthread/mutex.c:
	code cleanup

2012-11-02 01:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (16508ab4b3de)

	* configure.in, include/nsconfig.h.in, nsthread/time.c:
	use gettimeofday() if available instead of the rount trip to tcl

2012-11-02 00:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f213b05faa0d)

	* nsd/queue.c:
	remove spread factor, which is not needed due to connection thread
	queue

2012-11-01 19:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ed1f4b710869)

	* nsd/nsd.h, nsd/queue.c, nsd/request.c, nsd/server.c:
	Introduced separate locks for waiting queue (wqueue) and thread
	queue (tqueue) per pool. In classical naviserver there is a
	pollslock (covering all pools) used. The change leads too much finer
	lock granularity in improves scalability.

2012-11-01 19:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (cd0c9939b029)

	* nsd/httptime.c:
	Initialize mutex and provide a name for it.

2012-11-01 19:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0a44cbefbfca)

	* nsd/driver.c:
	Make sure to initialize mutex and provide a name for it for
	monitoring.

2012-10-29 12:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (85187775b22b)

	* nsd/nsd.h, nsd/queue.c, nsd/request.c, nsd/server.c, nsd/sls.c:
	First checkin of the experimental version of naviserver using
	connection thread queues. This version works fine on the naviserver
	regression test and playing around with OpenACS, but needs more work
	to reduce the contention on poll mutex, must likely by using less or
	different mutexes, and certainly more testing.

2012-12-27 16:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (18b46ca20f42)

	* .hgtags:
	Added tag naviserver-4.99.4 for changeset d34fc2681cf1

2012-11-01 20:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d34fc2681cf1 [naviserver-4.99.4])

	* doc/src/naviserver/ns_info.man, nsd/info.c, openacs-config.tcl,
	tests/http-test-config.tcl, tests/ns_info.test:
	added "ns_info pagedir", removed "ns_info pageroot" from 2 config
	files.

2012-11-01 12:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5230727567c9)

	* doc/src/naviserver/returnstatus-cmds.man: new file.
	* doc/src/naviserver/ns_returnerror.man: deleted file.
	* doc/src/naviserver/ns_internalredirect.man,
	doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_returnerror.man, doc/src/naviserver
	/returnstatus-cmds.man, include/ns.h, nsd/returnresp.c,
	nsd/tclcmds.c, nsd/tclresp.c, tests/ns_urlencode.test,
	tests/tclresp.test:
	added ns_returnmoved extended regression test updated documentation

2012-11-01 12:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (38f05a85a2ce)

	* Makefile:
	make sure to cleanup intermediary files of previous build-doc runs

2012-11-01 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e00ab13f650)

	* nsd/urlencode.c:
	make sure, variable is initialized

2012-10-31 03:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fbfcaea8cccc)

	* doc/src/naviserver/ns_charsets.man,
	doc/src/naviserver/ns_critsec.man, doc/src/naviserver/ns_crypt.man,
	doc/src/naviserver/ns_sha1.man, doc/src/naviserver/ns_shutdown.man,
	doc/src/naviserver/ns_urlcharset.man,
	doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man:
	vairous documentation updates/fixes

2012-10-31 03:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7b89b89802be)

	* doc/src/naviserver/ns_urldecode.man,
	doc/src/naviserver/ns_urlencode.man, nsd/urlencode.c,
	tests/ns_urlencode.test:
	adding charset option to ns_urlencde and ns_urldecode

2012-10-29 13:46 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (572f37cf0b56)

	* nsd/sls.c:
	slience one more version of gcc

2012-10-28 02:08 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a0a1e244268)

	* include/nsthread.h:
	Don't enforce upgrade of all drivers using SOCKET instead of
	NS_SOCKET

2012-10-28 01:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bb4ee0b2fa44)

	* nsd/connio.c:
	white space changes

2012-10-28 01:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d4ce447f306)

	* nsd/connio.c, tests/ns_adp_compress.test:
	in HTTP/1.0, allow gzip, when it is permitted, in HTTP/1.1, allow
	gzip, when it is not disallowed.

2012-10-27 21:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (860fa9aa4cf7)

	* nsd/connio.c, tests/ns_adp_compress.test:
	handle identity and * qvalue in accept-encoding; deactivate defauit
	gzip returning for http/1.1, since this would not allow explicit
	forbidding of gzip; remove known bugs from fregression test and
	extend it.

2012-10-27 13:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (065d34a2a24e)

	* nsd/connio.c, tests/ns_adp_compress.test:
	Handle qvalue in accept-encoding

2012-10-26 21:09 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b5717510802)

	* merged versions

2012-10-26 20:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6e9bf09642e)

	* nsd/sockfile.c:
	remove further warnings

2012-10-26 20:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (34872c4b88d2)

	* win/.DS_Store, win/nsd/x64/Release/CL.read.1.tlog,
	win/nsd/x64/Release/CL.write.1.tlog,
	win/nsd/x64/Release/cl.command.1.tlog,
	win/nsd/x64/Release/nsd.Build.CppClean.log,
	win/nsd/x64/Release/nsd.lastbuildstate, win/nsd/x64/Release/nsd.log,
	win/nsd/x64/Release/nsd.unsuccessfulbuild,
	win/nsthread/x64/Release/CL.read.1.tlog,
	win/nsthread/x64/Release/CL.write.1.tlog,
	win/nsthread/x64/Release/cl.command.1.tlog,
	win/nsthread/x64/Release/nsthread.lastbuildstate,
	win/nsthread/x64/Release/nsthread.log,
	win/nsthread/x64/Release/nsthread.unsuccessfulbuild,
	win/x64/.DS_Store: deleted file.
	* win/.DS_Store, win/nsd/x64/Release/CL.read.1.tlog,
	win/nsd/x64/Release/CL.write.1.tlog,
	win/nsd/x64/Release/cl.command.1.tlog,
	win/nsd/x64/Release/nsd.Build.CppClean.log,
	win/nsd/x64/Release/nsd.lastbuildstate, win/nsd/x64/Release/nsd.log,
	win/nsd/x64/Release/nsd.unsuccessfulbuild,
	win/nsthread/x64/Release/CL.read.1.tlog,
	win/nsthread/x64/Release/CL.write.1.tlog,
	win/nsthread/x64/Release/cl.command.1.tlog,
	win/nsthread/x64/Release/nsthread.lastbuildstate,
	win/nsthread/x64/Release/nsthread.log,
	win/nsthread/x64/Release/nsthread.unsuccessfulbuild,
	win/x64/.DS_Store:
	remove unneeded files

2012-10-26 20:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e2aa1aa0d9d3)

	* .hgignore:
	ignore .DS_Store files

2012-10-26 20:40 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (74e7d66d7567)

	* win/.DS_Store, win/cgitest/cgitest.dsp, win/cgitest/main.c,
	win/group/grpall.dsp, win/group/grpcore.dsp,
	win/group/grpopenacs.dsp, win/main/main.vcxproj,
	win/main/main.vcxproj.filters, win/main/main.vcxproj.user,
	win/naviserver.sln, win/nscgi/nscgi.vcxproj,
	win/nscgi/nscgi.vcxproj.filters, win/nscp/.DS_Store,
	win/nscp/nscp.vcxproj, win/nscp/nscp.vcxproj.filters,
	win/nscp/x64/.DS_Store, win/nsd/.DS_Store,
	win/nsd/Release/.DS_Store, win/nsd/nsd.vcxproj,
	win/nsd/nsd.vcxproj.filters, win/nsd/nsd.vcxproj.user,
	win/nsd/x64/Release/CL.read.1.tlog,
	win/nsd/x64/Release/CL.write.1.tlog,
	win/nsd/x64/Release/cl.command.1.tlog,
	win/nsd/x64/Release/nsd.Build.CppClean.log,
	win/nsd/x64/Release/nsd.lastbuildstate, win/nsd/x64/Release/nsd.log,
	win/nsd/x64/Release/nsd.unsuccessfulbuild, win/nsdb/nsdb.dsp,
	win/nsdb/nsdb.vcproj, win/nsdb/nsdb.vcxproj,
	win/nsdb/nsdb.vcxproj.filters, win/nsdb/nsdb.vcxproj.user,
	win/nsdbpg/nsdbpg.vcxproj, win/nsdbpg/nsdbpg.vcxproj.filters,
	win/nslog/nslog.vcxproj, win/nslog/nslog.vcxproj.filters,
	win/nsoracle/Project1.vcxproj.filters,
	win/nsoracle/Project1.vcxproj.user, win/nsoracle/nsoracle.vcxproj,
	win/nsperm/nsperm.vcxproj, win/nsperm/nsperm.vcxproj.filters,
	win/nssock/nssock.vcxproj, win/nssock/nssock.vcxproj.filters,
	win/nsthread/Release/vc110.pdb, win/nsthread/nsthread.vcxproj,
	win/nsthread/nsthread.vcxproj.filters,
	win/nsthread/nsthread.vcxproj.user,
	win/nsthread/x64/Release/CL.read.1.tlog,
	win/nsthread/x64/Release/CL.write.1.tlog,
	win/nsthread/x64/Release/cl.command.1.tlog,
	win/nsthread/x64/Release/nsthread.lastbuildstate,
	win/nsthread/x64/Release/nsthread.log,
	win/nsthread/x64/Release/nsthread.unsuccessfulbuild,
	win/test/nsd.tcl, win/test/servers/test/pages/cgitest.bat,
	win/test/servers/test/pages/index.adp,
	win/threadtest/threadtest.dsp, win/x64/.DS_Store: new file.
	* Makefile, include/ns.h, include/nsthread.h, nscp/nscp.c,
	nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c, nsd/auth.c,
	nsd/binder.c, nsd/conn.c, nsd/connio.c, nsd/cookies.c, nsd/dns.c,
	nsd/driver.c, nsd/encoding.c, nsd/event.c, nsd/exec.c, nsd/form.c,
	nsd/httptime.c, nsd/index.c, nsd/info.c, nsd/listen.c, nsd/log.c,
	nsd/nsd.h, nsd/nsmain.c, nsd/nswin32.c, nsd/pathname.c,
	nsd/pidfile.c, nsd/progress.c, nsd/queue.c, nsd/range.c,
	nsd/request.c, nsd/return.c, nsd/sched.c, nsd/sls.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/sockfile.c, nsd/str.c, nsd/task.c,
	nsd/tclcache.c, nsd/tclenv.c, nsd/tclfile.c, nsd/tclhttp.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobj.c, nsd/tclobjv.c,
	nsd/tclsock.c, nsd/tclthread.c, nsd/tcltime.c, nsd/tclvar.c,
	nsd/tclxkeylist.c, nsd/url2file.c, nsd/urlencode.c, nsd/urlopen.c,
	nsd/urlspace.c, nsd/uuencode.c, nssock/nssock.c, nsthread/memory.c,
	nsthread/mutex.c, nsthread/thread.c, nsthread/time.c,
	nsthread/winthread.c, win/.DS_Store, win/cgitest/cgitest.dsp,
	win/cgitest/main.c, win/group/grpall.dsp, win/group/grpcore.dsp,
	win/group/grpopenacs.dsp, win/main/main.vcxproj,
	win/main/main.vcxproj.filters, win/main/main.vcxproj.user,
	win/naviserver.sln, win/nscgi/nscgi.vcxproj,
	win/nscgi/nscgi.vcxproj.filters, win/nscp/.DS_Store,
	win/nscp/nscp.vcxproj, win/nscp/nscp.vcxproj.filters,
	win/nscp/x64/.DS_Store, win/nsd/.DS_Store,
	win/nsd/Release/.DS_Store, win/nsd/nsd.vcxproj,
	win/nsd/nsd.vcxproj.filters, win/nsd/nsd.vcxproj.user,
	win/nsd/x64/Release/CL.read.1.tlog,
	win/nsd/x64/Release/CL.write.1.tlog,
	win/nsd/x64/Release/cl.command.1.tlog,
	win/nsd/x64/Release/nsd.Build.CppClean.log,
	win/nsd/x64/Release/nsd.lastbuildstate, win/nsd/x64/Release/nsd.log,
	win/nsd/x64/Release/nsd.unsuccessfulbuild, win/nsdb/nsdb.dsp,
	win/nsdb/nsdb.vcproj, win/nsdb/nsdb.vcxproj,
	win/nsdb/nsdb.vcxproj.filters, win/nsdb/nsdb.vcxproj.user,
	win/nsdbpg/nsdbpg.vcxproj, win/nsdbpg/nsdbpg.vcxproj.filters,
	win/nslog/nslog.vcxproj, win/nslog/nslog.vcxproj.filters,
	win/nsoracle/Project1.vcxproj.filters,
	win/nsoracle/Project1.vcxproj.user, win/nsoracle/nsoracle.vcxproj,
	win/nsperm/nsperm.vcxproj, win/nsperm/nsperm.vcxproj.filters,
	win/nssock/nssock.vcxproj, win/nssock/nssock.vcxproj.filters,
	win/nsthread/Release/vc110.pdb, win/nsthread/nsthread.vcxproj,
	win/nsthread/nsthread.vcxproj.filters,
	win/nsthread/nsthread.vcxproj.user,
	win/nsthread/x64/Release/CL.read.1.tlog,
	win/nsthread/x64/Release/CL.write.1.tlog,
	win/nsthread/x64/Release/cl.command.1.tlog,
	win/nsthread/x64/Release/nsthread.lastbuildstate,
	win/nsthread/x64/Release/nsthread.log,
	win/nsthread/x64/Release/nsthread.unsuccessfulbuild,
	win/test/nsd.tcl, win/test/servers/test/pages/cgitest.bat,
	win/test/servers/test/pages/index.adp,
	win/threadtest/threadtest.dsp, win/x64/.DS_Store:
	- use size_t, ssize_t, off_t wherever appropriate
	- push casts to "int" as far as possible down the code (e.g. down to
	Tcl_* functions accepting sizes, but defined with "int", such as
	Tcl_WriteChars, Tcl_NewStringObj, Tcl_NewByteArrayObj)
	- be more careful on redefining macros (MSC seems a moving target)
	- provide base definition for inttypes for MSC WIN32 and WIN64
	- use NS_SOCKET instead of SOCKET (which is defined under Windows). We
	should stick with macros in our own namespace whenever possible.
	- added the project files and the solution file for visual studio

2012-10-24 17:09 -0700    <dvrsn@diphi.com>  (965904e0cd91)

	* tcl/tcloo.tcl: new file.
	* tcl/tcloo.tcl:
	exclude tcloo namespace from interp initialization

2012-10-24 16:32 -0700    <dvrsn@diphi.com>  (025c6ff25b40)

	* nsd/fastpath.c:
	Disable fastpath caching for recently changed files

	This fixes the bug highlighted by test tclresp-5.3. The fastpath
	cache can collide and send data that is out of date despite checking
	the modification time of the file. This fix disallows caching when
	the inode has changed too recently. The check is against ctime
	rather than mtime, as mtime is changable with utimes().

2012-10-21 01:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ad2d21e36f8d)

	* include/ns.h, include/nsthread.h, nsd/adpcmds.c, nsd/driver.c,
	nsd/nsd.h:
	use size_t more consequently; further windows cleanup

2012-10-19 09:00 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ca06740c782d)

	* include/ns.h, win32/nsd/nsd.dsp, win32/nsd/nsd.vcproj:
	remove unused NS_NOCOMPAT

2012-10-17 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1095fcd2317a)

	* nsd/adprequest.c, nsd/fd.c, nsd/random.c, nsd/range.c,
	nsd/tclxkeylist.c, nsperm/nsperm.c:
	further removal of unneeded assignments

2012-10-17 18:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (961d3092c8ab)

	* nsd/driver.c, nsd/queue.c, nsd/range.c, nsd/tclsock.c,
	nsd/tclxkeylist.c, nsd/urlopen.c, nsperm/nsperm.c:
	remove dead assignments

2012-10-17 18:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (88bd109020e3)

	* nsd/driver.c:
	value of reqPtr was never used

2012-10-17 18:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (62ab5a342763)

	* include/ns.h, nsd/callbacks.c, nsd/conn.c, nsd/pathname.c,
	nsd/proc.c, nsd/sched.c, nsd/sock.c, nsd/sockcallback.c,
	nsd/tclcallbacks.c, nsd/tclinit.c, nsd/tclrequest.c, nsd/tclsched.c,
	nsd/url2file.c, nsdb/dbinit.c, nsdb/nsdb.c, nsdb/nsdb.h,
	nsdbtest/nsdbtest.c, nslog/nslog.c, nsproxy/nsproxylib.c,
	nsproxy/nsproxymod.c:
	Remove all warnings when compiling with clang -Wall -pedantic
	(mixtures between data pointers and function pointers, remove
	arithmetic on void*, since this is a GNU extension)

2012-10-17 16:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8f338443d43)

	* include/nsthread.h, nsd/nsd.h:
	move printing macros to nsthread.h, where some more of these macros
	are already

2012-10-17 14:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7f6de0c8eaec)

	* nsd/nsd.h, nsd/tclcache.c:
	adding a print macro for PRIu64 and a print macro for printing
	size_t

2012-10-17 13:53 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (92877ff5b962)

	* nsd/nsd.h:
	Define PRId64 and PRIuMAX for visual studio, as these are apparently
	not defined there.

2012-10-17 13:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (74c12f3a6e7c)

	* nscp/nscp.c, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/binder.c, nsd/cache.c, nsd/config.c, nsd/dns.c, nsd/encoding.c,
	nsd/fastpath.c, nsd/form.c, nsd/limits.c, nsd/listen.c, nsd/log.c,
	nsd/mimetypes.c, nsd/nsd.h, nsd/op.c, nsd/proc.c, nsd/progress.c,
	nsd/returnresp.c, nsd/sched.c, nsd/sockcallback.c, nsd/tclcache.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclset.c, nsd/tclthread.c, nsd/tclvar.c,
	nsd/url2file.c, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c,
	nsperm/nsperm.c, nsproxy/nsproxylib.c:
	avoid usage of variable names "new", "bool" and "delete"

2012-10-16 10:00 -0700    <dvrsn@diphi.com>  (cdb99235f13c)

	* README:
	fixed url for tcler's wiki

2012-10-16 11:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0bccae152c62)

	* nsd/tclxkeylist.c:
	whitespace changes

2012-10-16 11:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d0de74a7e9f)

	* nsd/tclxkeylist.c:
	adding Maurizio's patches for removing K&R style function
	definitions

2012-10-16 10:52 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b2c8069dd0f0)

	* doc/src/naviserver/ns_mutex.man:
	improve man page of ns_mutex, document "ns_mutex eval"

2012-10-16 10:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (76c070ff3311)

	* nsd-config.tcl, nsd/nsd.h, nsd/queue.c, nsd/server.c, openacs-
	config.tcl:
	New config parameter "concurrentcreatethreshold" to control
	concurrent thread creation. Background: classical aolserver performs
	eager thread creation, leading to bursty thread creations and huge
	resource consumptions (e.g. a short database lock and a constant
	request stream can cause easily maxthreads to be created without
	helping to improve the situation. Furthermore, some modules have
	problems seem to have problem with parallel initializations that can
	lead to crashes.

	Naviserver can now control whether parallel connection thread
	creations are wanted or not via the degree (percentage) the request
	queue is full to allow cuncurrent connection thread createions. When
	concurrentcreatethreshold is to 0, concurrent thread creation is
	always allowed; When concurrentcreatethreshold is to 100,
	concurrent thread creation is not allowed; value inbetween allow
	parallel thread creations in certain stress situations.

2012-10-15 11:44 -0700    <dvrsn@diphi.com>  (750bf9863449)

	* tests/tclresp.test:
	add test for fastpath cache collision

	The fastpath cache uses a filename as a key and verifies the
	freshness by comparing modification times. In the rare circumstance
	that the contents of the file changes multiple times within the
	granularity of mtime (i.e., one second) a stale version of the file
	can be served out of the cache.

2012-10-14 11:57 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c5422b5454fc)

	* doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_ictl.man:
	documentation improvements

2012-10-13 12:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43442ec9859b)

	* nsd/queue.c:
	Add clause to continue to work on already queued requests when we
	might run out of requests. This clause weakens th thread exit rules
	determined by number of requests. Fix counter handling.

2012-10-13 11:29 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a7a0f36b972b)

	* nsd/queue.c:
	correct function documentation

2012-10-13 11:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e32b9979ee5)

	* nsd/driver.c:
	protect against situations, where the driver has no server
	associated

2012-10-12 16:24 -0700    <dvrsn@diphi.com>  (a6271e705b8f)

	* merge changes

2012-10-12 15:48 -0700    <dvrsn@diphi.com>  (79efb16a2f56)

	* nscgi/nscgi.c, nscp/nscp.c, nsdb/nsdb.c, nslog/nslog.c,
	nsperm/nsperm.c, nsproxy/nsproxymod.c, nssock/nssock.c:
	Add NS_EXPORT to modules

	Recent versions of gcc include visibility attributes. Tcl8.6 sets
	the '-fvisibility=hidden' flag when building, and naviserver
	inherits this. The effect is to keep all symbols with unspecified
	visibility hidden in shared objects. NS modules are shared objects
	and need to export the symbols Ns_ModuleVersion and Ns_ModuleInit,
	so these declarations need to have the NS_EXPORT declaration
	attached to them.

2012-10-12 10:20 -0700    <dvrsn@diphi.com>  (5d8eedfb8a92)

	* nsd/adpparse.c:
	Fix for parsing nested <% ... %> in adp files

	The previous code was counting how many levels deep the nesting of
	<% ... %> tags was, but would only count down into the first
	sequence of opening tags. It is simpler to find the next closing tag
	after the current closing tag each time an opening tag if found
	before the current closing tag. This handles an arbitrary nesting
	depth and non-heirarchical nesting equally.

2012-10-12 12:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4fc766c2a35f)

	* nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	add lifeliness check for bursty requests and shortlived connection
	threads

2012-10-12 09:20 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3e6df90e1eaa)

	* merge

2012-10-11 12:48 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1d62c628c9e8)

	* doc/src/naviserver/ns_adp_argc.man:
	remove some more commata from keywords

2012-10-11 12:42 -0700    <dvrsn@diphi.com>  (5c7dbd77923d)

	* tests/testserver/pages/deepnest.adp,
	tests/testserver/pages/nested.adp: new file.
	* tests/adp.test, tests/testserver/pages/deepnest.adp,
	tests/testserver/pages/nested.adp:
	Add tests for nested adp parsing

2012-10-11 20:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (689651bf594a)

	* nsd/queue.c:
	allow parallel connection thread creation under heavy load

2012-10-11 10:51 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fd8745f95c2a)

	* doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_mime.man,
	doc/src/naviserver/ns_adp_mimetype.man,
	doc/src/naviserver/ns_atclose.man,
	doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_browsermatch.man,
	doc/src/naviserver/ns_crypt.man, doc/src/naviserver/ns_sha1.man:
	fixing keywords in documentation

2012-10-11 10:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (045e73752084)

	* doc/src/naviserver/ns_atshutdown.man: new file.
	* doc/src/naviserver/ns_atshutdown.man:
	adding missing man page

2012-10-11 10:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1aabd914e4aa)

	* doc/src/naviserver/ns_atexit.man: new file.
	* doc/src/naviserver/ns_atexit.man:
	added missing man pages

2012-10-11 10:47 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eeb65e2b2e53)

	* doc/src/naviserver/ns_mutex.man:
	remove usage of ns_share in documentation

2012-10-08 17:10 -0700  jeffr  <jeffr>  (573093cb82ec)

	* include/nsconfig.h.in:
	back out accidental changes to nsconfig.h.in (?)

2012-10-08 17:01 -0700  jeffr  <jeffr>  (cd723a466cef)

	* nstclsh/Makefile, nstclsh/nstclsh.c: new file.
	* Makefile, include/nsconfig.h.in, nstclsh/Makefile,
	nstclsh/nstclsh.c:
	copied nstclsh from AOLserver

2012-10-08 16:43 -0700  jeffr  <jeffr>  (bbcada364908)

	* include/nsthread.h, nsd/adpeval.c:
	change errorLine to tcl8.6 api and add backward compatibility macro
	change definitions of NS_EXPORT for gcc >= 4 visibility attributes

2012-10-07 17:18 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (255059dd37c8)

	* nsd/exec.c, nsd/nswin32.c, nsd/tclcache.c, nsd/tclsock.c,
	nsthread/winthread.c:
	remove some more compiler warnings when compiling under windows

2012-10-07 12:55 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (45a5428ac720)

	* configure.in, include/nsconfig.h.in, nsperm/nsperm.c:
	use inet_pton() instead of inet_aton() if available

2012-10-07 12:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8d7e8b749397)

	* nsd/binder.c, nsd/dns.c, nsd/index.c, nsd/sockfile.c,
	nsperm/nsperm.c:
	use _WIN32 instead of WIN32 throughout the code

2012-10-07 06:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7085cab2e52c)

	* nsd/sockfile.c:
	Use ReadFile() as pread() replacement since this is atomic

2012-10-06 21:35 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e6e28a5a9f2e)

	* nsd/dns.c, nsd/index.c, nsd/sockfile.c, nslog/nslog.c,
	nsperm/nsperm.c:
	Fixes for compilation under windows

2012-10-06 21:31 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2f5e4c5933af)

	* Makefile:
	Fix spelling

2012-10-06 20:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7dadb7b77b27)

	* nsd/compress.c:
	Fix dummy-function when compiled without zlib support

2012-10-05 21:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d7958b434d47)

	* doc/src/naviserver/nsv.man:
	Document "-concomplain" option for nsv_unset

2012-10-05 12:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc82381c1a58)

	* nsd-config.tcl, openacs-config.tcl:
	Improve documentation on config files

2012-10-01 14:34 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e7d6838295db)

	* nsd/tclcmds.c, nsd/urlencode.c:
	revert changes that sneaked in during merge

2012-10-01 12:28 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d618f58363d5)

	* merge

2012-10-01 12:25 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c0eaa8f2cbbc)

	* nsd/tclcmds.c, nsd/urlencode.c:
	merged

2012-10-01 12:23 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (422fadc24f6f)

	* include/ns.h, nsd/compress.c:
	When the stream is already closed from the client side, don't kill
	the server via Fatal(). The stream might be already closed, when a
	huge number of requests was queued and the client gives up quickly.

2012-09-17 16:38 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5df3b1cb9ea6)

	* nsd/mimetypes.c:
	- update some mime types

2012-07-13 18:50 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ad595284990)

	* include/nsconfig.h.in: new file.
	* include/nsconfig.h.in:
	add missing file

2012-06-16 18:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ba492b81c412)

	* nsd/log.c:
	Fix a memory leak when the log buffer is truncated

2012-06-15 09:14 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (da5de850077f)

	* nsd/tclvar.c:
	tracking locks for arrays cached in Tcl_Objs

2012-06-12 20:17 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a45ad28fe32b)

	* doc/src/naviserver/nsv.man, nsd/tclvar.c:
	return in nsv_bucket additionally to each array element the lock
	count

2012-06-12 19:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4a9554c60879)

	* nsthread/memory.c:
	fix macro definition logic

2012-06-12 11:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1e671b0d963b)

	* doc/src/naviserver/nsv.man, nsd/tclcmds.c, nsd/tclvar.c:
	added nsv_bucket command to return names of the arrays kept in a
	bucket. This command is mainly useful for performance tuning, when
	the number of busy locks is high for a certain bucket.

2012-06-12 09:41 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10b49fc33295)

	* include/ns.h:
	Adding missing external references

2012-06-12 09:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4384fde9f14f)

	* include/nscheck.h, nscgi/nscgi.c, nscp/nscp.c, nsd/adpcmds.c,
	nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c, nsd/auth.c,
	nsd/binder.c, nsd/cache.c, nsd/callbacks.c, nsd/cls.c,
	nsd/compress.c, nsd/config.c, nsd/conn.c, nsd/connio.c,
	nsd/cookies.c, nsd/crypt.c, nsd/dns.c, nsd/driver.c, nsd/dstring.c,
	nsd/encoding.c, nsd/event.c, nsd/exec.c, nsd/fastpath.c, nsd/fd.c,
	nsd/filter.c, nsd/httptime.c, nsd/index.c, nsd/info.c, nsd/init.c,
	nsd/limits.c, nsd/lisp.c, nsd/listen.c, nsd/log.c, nsd/main.c,
	nsd/mimetypes.c, nsd/modload.c, nsd/nsconf.c, nsd/nsmain.c,
	nsd/nsthread.c, nsd/nswin32.c, nsd/op.c, nsd/pathname.c,
	nsd/pidfile.c, nsd/proc.c, nsd/progress.c, nsd/queue.c,
	nsd/quotehtml.c, nsd/random.c, nsd/range.c, nsd/request.c,
	nsd/return.c, nsd/returnresp.c, nsd/rollfile.c, nsd/sched.c,
	nsd/server.c, nsd/set.c, nsd/sls.c, nsd/sock.c, nsd/sockcallback.c,
	nsd/sockfile.c, nsd/str.c, nsd/task.c, nsd/tclcache.c,
	nsd/tclcallbacks.c, nsd/tclcmds.c, nsd/tclconf.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobj.c, nsd/tclobjv.c,
	nsd/tclrequest.c, nsd/tclresp.c, nsd/tclsched.c, nsd/tclset.c,
	nsd/tclsock.c, nsd/tclthread.c, nsd/tcltime.c, nsd/tclvar.c,
	nsd/tclxkeylist.c, nsd/unix.c, nsd/url.c, nsd/url2file.c,
	nsd/urlencode.c, nsd/urlopen.c, nsd/urlspace.c, nsd/uuencode.c,
	nsd/watchdog.c, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c,
	nsdb/dbutil.c, nsdb/nsdb.c, nsdbtest/nsdbtest.c, nslog/nslog.c,
	nsperm/nsperm.c, nsproxy/nsproxy.c, nsproxy/nsproxylib.c,
	nsproxy/nsproxymod.c, nssock/nssock.c, nsthread/cslock.c,
	nsthread/error.c, nsthread/fork.c, nsthread/master.c,
	nsthread/memory.c, nsthread/mutex.c, nsthread/nsthreadtest.c,
	nsthread/reentrant.c, nsthread/rwlock.c, nsthread/sema.c,
	nsthread/signal.c, nsthread/thread.c, nsthread/time.c,
	nsthread/tls.c, nsthread/winthread.c:
	remove static RCSID strings

2012-06-12 08:56 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d8c8a39167d5)

	* nsthread/memory.c:
	Add preprocessor flag to use system malloc directly (needs as well
	SYSTEM_MALLOC for Tcl)

2012-05-01 14:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bf0cca2f105b)

	* nsd/driver.c, openacs-config.tcl, sample-config.tcl.in:
	- alter default max length of request header field from 4096 to 8192
	(same value as in Apache 1.*/2.* and Tomcat 7.*)

2012-05-01 14:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9a47de15e0c6)

	* include/ns.h, nsd/driver.c, nsd/op.c, nsd/queue.c, nsd/returnresp.c,
	tests/http.test:
	- Handle error messages for too long request lines and too long
	header lines after the full request was processed. Previously client
	could experience a "broken pipe: 13" message due to the server
	closing the connection while the full request was not yet
	transmitted to the server.
	- Extended regression test

2012-05-01 14:11 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b373c48a458f)

	* tests/all.tcl:
	replace "vwait" by a delayed return after 2 secs, since vwait blocks
	sometimes

2012-04-12 09:12 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55e59387aee6)

	* nsthread/pthread.c:
	When the stack-size is specified in the config file, try to be
	friendly and round the stack-size to the next multiple of the page-
	size (when we know how to determine it)

2012-03-24 17:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8126bc4e9872)

	* nsd/form.c:
	fix spelling

2012-03-22 11:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2e15bcd2eb7b)

	* merged versions

2012-03-22 11:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8eda5d7f4cfb)

	* nsd/form.c, tests/http.test:
	Fix handling of escaped quotes in multi-input names (e.g. file-names
	in content disposition). Extend regression test.

2012-03-16 09:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7f57a27cd3fe)

	* tests/all.tcl:
	Invoke the cleanup handlers (e.g. for Tls) at the end of the tests

2012-03-16 08:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c59bdee4f47)

	* Makefile:
	Fix setup of environment variables for gdbtest and gdbruntest
	targets

2012-03-15 14:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (32d471fd3072)

	* nsd/tclinit.c:
	Revert previous changes in tclinit.c and fix accesses to freed
	memory differently: The exact timing of the interpData depends on
	several factors and is not easy to determine. Therefore, keep the
	freeing if itPtr as a final act in this function, but make sure
	that DeleteInterps() does not stumble over freed structures. The
	original code missed the fact that GetCacheEntry() was called as
	well with NULL serverPtr, and was keeping these entries in
	Ns_TclDestroyInterp() in the hash table of existing interps,
	although this function deletes this interps as well (with its
	associated data). Therefore, the final cleanup could crash.

2012-03-15 12:30 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c718909daa31)

	* nsd/adpeval.c:
	prevent potential double-frees of the adp cache

2012-03-13 19:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (89be3b7ac0da)

	* merged branch

2012-03-13 19:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (54d7d05e7d06)

	* nsd/tclinit.c:
	Avoid duplicate frees of itPtr->interp.

2012-03-12 18:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0684df5d6ce7)

	* nsd/server.c:
	remove trailing colon in mutex name

2012-03-13 12:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dcec74ed2609)

	* nsd/tclinit.c:
	Fix deallocation bug. Previously, FreeInterpData() deallocated itPtr
	and was called before DeleteInterps(). The latter function accesses
	members of itPtr, reading invalid values.

2012-03-13 11:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1ea5ac844829)

	* Makefile, nsd/driver.c:
	Further cleanup of the timeout management for writer & co. Not sure,
	if we do not want a finite timeout, but the current version is
	simply a cleanup of the version causing troubles.

2012-03-12 13:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (332e6aec4162)

	* nsd/driver.c:
	Simplify timeout logic for poll: the pre-existing logic could lead
	to negative timeouts other than -1 on the poll system call, which
	leads to an error (at least under mac os x 10.7.3). Since the
	timeout was used as a constant, make the timeout behavior explicit
	and set the poll timeout to -1 when intended.

2012-03-12 13:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1d7475cf298)

	* nsd/server.c:
	Provide name for metering contention rate for filter.lock;
	initialize mutexes for filter and pools in the server structure
	explicitly.

2012-03-10 14:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a029ee948d7a)

	* nsd/queue.c:
	finish commit for the copied variables (many thanks, Stephen!)

2012-03-09 11:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3dc33f925f4a)

	* nsd/queue.c:
	Removed race condition on ns_log notice line

2012-03-09 11:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (06b7ca265e61)

	* nsd/filter.c, nsd/nsd.h:
	Fix possible race condition in filters by adding a filter specific
	mutex to the NsServer structure

2012-03-08 21:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (55f7116680ae)

	* nsd/queue.c:
	remove race condition

2012-03-08 20:03 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (07863ee45550)

	* merge changes

2012-03-08 20:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10c8617158be)

	* nsd/driver.c:
	changed memcpy() into memmove() since source and target can overlap

2012-03-06 12:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (fe89bc53e23c)

	* doc/src/naviserver/ns_thread.man:
	Fix spacing in man page

2012-02-17 11:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8bf390838848)

	* doc/src/naviserver/ns_quotehtml.man:
	Fix broken man page (double escaping, wierd characters, missing
	items)

2012-02-17 11:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63cc28af9894)

	* sample-config.tcl.in:
	Use "localhost" as default address to ease instructions after
	installing via MacPorts

2012-01-16 16:04 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (68d4d55911e0)

	* doc/src/naviserver/ns_info.man:
	Completed "ns_info" man page (many subcommands were missing)

2012-01-16 14:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3a350c99762c)

	* nscp/nscp.c, nsd/adpcmds.c, nsd/nsmain.c:
	Removing string "CVS" constant when referring to the built revision
	id

2012-01-16 13:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (2c72263a1fdf)

	* tcl/aolserver-openacs.tcl:
	Improve configurability of loading either XOTcl 1 or XOTcl 2 by
	setting the preference in aolserver-openacs.tcl; one can now load
	XOTcl 1 even when XOTcl 2 is configured

2012-01-12 19:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (802b99cbcf70)

	* configure.in, nsd/info.c, tests/ns_info.test:
	Provide value for "ns_info tag" (which was earlier from CVS) from
	either mercurial, or - for builds from a tar ball - the tar-ball
	infos. Comment configure options better, adapt regression test.

2012-01-10 18:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3adfa5d0227c)

	* tcl/nstrace.tcl:
	Fix typo

2012-01-10 14:13 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8a99a1243dcd)

	* Makefile:
	Fix LD_LIBRARY_PATH for non-installed versions, make it work on macOS as well

2012-01-09 14:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b279b4138285)

	* openacs-config.tcl:
	Deleted some more obsolete sections

2012-01-09 12:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc0871127fed)

	* nsd/event.c, nsd/task.c, nsd/tclfile.c, nslog/nslog.c:
	Get rid warning about set-but-not-used variable values for modern
	gccs

2012-01-09 12:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (efd2f44b72ea)

	* openacs-config.tcl:
	Load Tcl Thread Library if available, provide feedback via error log

2012-01-09 11:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90c645b16cbf)

	* Makefile, include/Makefile.module.in, nsd/Makefile, nsperm/Makefile:
	Added DESTDIR to ease configuration with package managers (e.g.
	MacPorts)

2012-01-09 10:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b4c887f6539e)

	* nsthread/Makefile:
	Specify -lpthread for building nstrheadtest under newer Linux
	distributions (many thanks to Stefan Sobernig)

2012-01-06 19:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dd78db191854)

	* index.adp:
	Fix quoting in sample page

2012-01-06 19:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d1864743ede)

	* bitbucket-install.tcl, index.adp:
	Minor markup change for default pages for sample configuration

2012-01-06 19:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (34a6cb2aedbf)

	* doc/src/header.inc, doc/src/naviserver/ns_adp_registeradp.man,
	doc/src/naviserver/ns_adp_registertag.man,
	doc/src/naviserver/ns_register_adptag.man,
	doc/src/naviserver/ns_register_fastpath.man,
	doc/src/naviserver/ns_register_filter.man,
	doc/src/naviserver/ns_register_proxy.man,
	doc/src/naviserver/ns_register_url2file.man:
	Changed deprecated markup by preferred one

2012-01-06 16:32 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (697a52248436)

	* openacs-config.tcl, sample-config.tcl.in:
	Updated config files

2012-01-06 16:27 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63eb91695482)

	* bitbucket-install.tcl: new file.
	* bitbucket-install.tcl:
	Initial checkin of simple installer from Bitbucket (requires wget)

2012-01-06 16:26 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f7a34a606403)

	* index.adp:
	Beautify page, add simple mechanism for adding referenced modules

2012-01-06 16:25 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7d750b01f12e)

	* Makefile:
	Added openacs-config.tcl to files placed into ../conf/ direcory in
	installation; added bitbucket-install.tcl to files in
	distribution/installation (referenced by index.adp)

2012-01-06 15:48 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (732c7ae16c7c)

	* Makefile:
	Install contrib-logos in doc

2012-01-06 15:47 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ff7cd6c6dd91)

	* doc/src/naviserver/ns_httpget.man:
	Fix man page

2012-01-05 22:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc156ae491d0)

	* NEWS, m4/dns.m4:
	Fixed test to use preferred getaddrinfo()/getnameinfo() for macOS
	instead of gethostbyaddr()/gethostbyname() when working under the OS
	release.

2012-01-05 21:44 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ede279ffc672)

	* NEWS, nsd/tclmisc.c, nsdb/dbtcl.c, nslog/nslog.c, nsperm/nsperm.c,
	nsproxy/nsproxylib.c, nsthread/nsthreadtest.c, nsthread/pthread.c:
	Make compilation clean under clang, some code cleanups

2012-01-05 21:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d57c1f5ad3a0)

	* Makefile:
	Added missing file version_include.man.in into distfiles

2012-01-05 19:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3fc7d813889e)

	* doc/src/naviserver/ns_cache.man:
	Fixed documentation rendering

2012-01-05 18:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7787b037fe67)

	* NEWS:
	Fixed typo in NEWS file

2012-01-05 18:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (706a120039b7)

	* NEWS:
	Updated description of new features

2012-01-05 18:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (42ee5abb6f15)

	* README, configure.in, nsd/driver.c, nsproxy/nsproxylib.c:
	Bumped version number to 4.99.4 Provided support for platforms where
	time_t is long (e.g. macOS 10.7) Don't set Ns_Time.usec to
	LONG_MAX, since this is outside the expected range in Ns_AdjTime()

2012-01-05 18:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9615e1b55911)

	* autogen.sh:
	Remove non-existing flag

2012-01-05 14:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (078fba0bd700)

	* tests/http.test:
	Added test for crash in earlier versions

2012-01-04 18:40 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (450f04a66044)

	* nsd-config.tcl, nsd/connio.c, nsd/driver.c, nsd/nsd.h, openacs-
	config.tcl:
	Added parameters "keepalivemaxuploadsize" and
	"keepalivemaxdownloadsize" for controlling keep-alives for largish
	content. Since keep-alives causes sequentialization of requests, the
	upload/download of large content delays the start of transfer of
	later content sent over the same request queue. In such cases,
	parallel requests avoid these latencies.

	This feature is by default turned off (both values have the default
	of 0).

2012-01-04 12:11 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (eba58c60c4a9)

	* nsd/nsd.h, nsd/queue.c, nsd/server.c, openacs-config.tcl:
	Preallocated (warm) threads, less eager thread creation:

	Background: the bookkeeping of available/running threads did not
	account for threads already being created. This lead to situations
	where on peak loads (e.g. 5 more requests in the queue, all threads
	busy an arbitrary number of new threads was scheduled to be created,
	causing a heavy burden on the server. Often, when the threads are
	were ready and running, the queue situations was already quite
	different (often empty). This situation could be as observed as
	bulky thread creations and happened e.g. on file-system latencies
	(e.g. ext3 has several potential problems in this area).

	The changes correct bookkeeping and avoid the overeager thread
	creation by sequentialization of thread creates. Furthermore, it
	pre-initializes threads such that only initialized threads are in
	the waiting list (important, when thread create operations are
	expensive, e.g. on large blueprints). This reduces waiting time for
	clients esp. on multiprocessor/multicore machines. The server uses
	"minthreads" to control how many pre-initialized connection threads
	should be maintained.

2012-01-03 18:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f6a3620faff7)

	* openacs-config.tcl:
	Altered the default in the annotated config file (openacs-config)

2012-01-03 18:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e8de8f58792c)

	* nsd/driver.c:
	changed default dor keepwait to 5 seconds as suggested by Stephen

2012-01-03 18:06 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5561ea17e92b)

	* nsd/queue.c, openacs-config.tcl:
	New configure parameter "spread" (for the section server/${server} )
	to randomize thread recreation.

	Background: Requests are distributed to idle threads via CondSignal,
	which delivers subsequent signals to idle threads in a circular
	manner (i.e. thread t1, t2, .. tn, then t1 again) determined by the
	scheduling policy of the operating system. This round robin behavior
	has the consequences, that (a) the idle timeout will never be used
	on a sufficiently busy (server since round robin wakes it up
	regularly), and (b) the connsperthread value will be the same for
	every thread (every thread will get the same numbers of requests).
	As a consequence, multiple threads terminate about at the same time.
	This mass termination of threads is performance-wise bad, since
	these threads will be restarte as well at about the same time. This
	is especially bad when many connections threads are configured (e.g.
	100), since it is likely that about the same amount of threads will
	be recreated.

	The "spread" parameter introduces a random factor into threadtimeout
	and maxconnections to avoid these termination cycles. It adds +/-
	the specified percentage to maxconnections and threadtimeout (e.g. a
	spread of 20 means a random value between 0.80 to 1.20 of the
	specified value of maxconnections and threadtimeout for every
	connection thread).

2012-01-03 13:41 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9949a8ea723d)

	* tests/ns_cache.test:
	Update regression test for ns_cache_stats "saved"

2012-01-03 13:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6b36d0bc6271)

	* include/ns.h, nsd/cache.c, nsd/dns.c, nsd/tclcache.c:
	Added "saved" statistics to ns_cache_stats (total saved time in
	secods based on computation time for the entry when it was added).
	Let "ns_cache_eval" pass TCL_CONTINUE and TCL_BREAK back to Tcl.

2012-01-03 12:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7be4e2da409e)

	* nsd/driver.c:
	Reduce default keepwait to 2 seconds (similar to what's recommended
	for apache with large sites)

2012-01-03 11:53 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6259bac2a9cb)

	* tests/http_byteranges.test:
	Added a test that lead to a crash in earlier versions

2012-01-03 10:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c5b779659334)

	* tests/adp.test, tests/cookies.test, tests/encoding.test,
	tests/errordoc.test, tests/http.test, tests/http_byteranges.test,
	tests/http_chunked.test, tests/http_keep.test,
	tests/ns_adp_compress.test, tests/ns_conn_host.test,
	tests/ns_pagepath.test, tests/ns_register_filter.test,
	tests/ns_register_proc.test, tests/ns_serverpath.test,
	tests/ns_sls.test, tests/tclconnio.test, tests/tclresp.test,
	tests/testserver/modules/testhttp.tcl,
	tests/testserver/modules/vhost.tcl, tests/timeout.test,
	tests/url2file.test:
	Placed nstest_http and friends into namespace ::nstest (makeing this
	::nstest::http). Added "-verbose" flag to nstest::http to trace
	communication

2012-01-03 10:43 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (10154dd38d35)

	* tests/init.test:
	Namepaced variable persist in blueprints. Why should this be
	different here?

2012-01-02 19:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9c79c720ed0b)

	* tcl/aolserver-openacs.tcl:
	Load NX only if not running under the testserver (otherwise we see
	ugly messages upon exit)

2012-01-02 19:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3d00ef803af9)

	* tests/test.nscfg:
	Added config parameter "isTestServer" to make recognizable if one
	runs a script under the testserver

2012-01-02 18:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (dc80be3a0d70)

	* doc/src/naviserver/ns_upload_stats.man, nsd/progress.c:
	Make ns_upload_stats compliant with the conventions from nginx,
	lighttpd and by apache (mod_passenger) - and javascript files
	supporting this convention. This enhancement makes uploads in
	progress identifiable via the query parameter "X-Progress-ID". If
	present, use the value as key, otherwise use url + query (as
	before).

2012-01-02 13:05 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a5ac4f6fe172)

	* openacs-config.tcl:
	Added nsproxy to default configuration

2012-01-02 12:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc3554e7ed65)

	* NEWS, nsd/log.c:
	Fix typos

2012-01-02 12:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (635d571c1dd7)

	* nsd/conn.c:
	Fix typo in comment

2012-01-02 12:21 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (15b30eba4c0c)

	* tests/adp.test, tests/all.tcl, tests/compat.test,
	tests/cookies.test, tests/encoding.test, tests/errordoc.test, tests
	/http-test-config.tcl, tests/http_byteranges.test,
	tests/http_chunked.test, tests/http_keep.test, tests/init.test,
	tests/ns_accesslog.test, tests/ns_addrbyhost.test,
	tests/ns_adp_compress.test, tests/ns_base64encode.test,
	tests/ns_cache.test, tests/ns_config.test, tests/ns_conn.test,
	tests/ns_conn_host.test, tests/ns_crypt.test, tests/ns_env.test,
	tests/ns_gifsize.test, tests/ns_hashpath.test,
	tests/ns_hostbyaddr.test, tests/ns_hrefs.test,
	tests/ns_httptime.test, tests/ns_info.test, tests/ns_jpegsize.test,
	tests/ns_limits.test, tests/ns_log.test, tests/ns_mime.test,
	tests/ns_nsv.test, tests/ns_pagepath.test, tests/ns_parseargs.test,
	tests/ns_proxy.test, tests/ns_register_filter.test,
	tests/ns_register_proc.test, tests/ns_schedule.test,
	tests/ns_serverpath.test, tests/ns_set.test, tests/ns_sha1.test,
	tests/ns_sls.test, tests/ns_thread.test, tests/ns_urlencode.test,
	tests/ns_uuencode.test, tests/nsdb.test, tests/progress.test,
	tests/tclconnio.test, tests/tclresp.test, tests/testserver/modules
	/init-test.tcl, tests/testserver/modules/testhttp.tcl,
	tests/testserver/modules/vhost.tcl,
	tests/testserver/pages/helloworld.adp,
	tests/testserver/pages/helloworld.tcl, tests/timeout.test,
	tests/url2file.test:
	Added Editor hints for Tcl mode Removed $Header$ lines

2012-01-02 11:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5d30d6c1e714)

	* nsd/driver.c:
	Read the whole content of requests which are too large

2012-01-02 11:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (56551b69ec68)

	* tests/http.test:
	Add test substantially larger than maxinput

2012-01-02 10:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (907c8a2cfad4)

	* Merged versions

2012-01-02 10:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a828c63d86b2)

	* nsthread/thread.c:
	remove debug output

2012-01-02 00:52 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c541b65e0aeb)

	* .hgignore:
	Added *.dylib to ignored files

2012-01-02 00:42 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1c70ad68e28)

	* openacs-config.tcl:
	Ease configuration of logfiles

2012-01-02 00:19 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (47d2878d29cf)

	* nsd/driver.c:
	When keep-alive is set and more requests are already in the request
	queue, don't timeout but process the requests immediately.

2012-01-01 20:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (90bdae041d21)

	* tests/test.nscfg:
	Add editor hint for Tcl mode

2012-01-01 20:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c6187e614d49)

	* nsd/server.c:
	Deactivate seemingly unused parameter "flushcontent"

2012-01-01 20:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b913e52fc6ff)

	* nsd/connio.c:
	Improved comments

2012-01-01 19:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e88b3191373f)

	* openacs-config.tcl:
	Overworked sample script for OpenACS (deleted obsolete parameters,
	added undocumented ones, commented parameters, added default
	values), esp. on sections
	    * ns/server/${server}
	    * ns_section ns/server/${server}/redirects
	    * ns_section ns/server/${server}/adp
	    * ns_section ns/server/${server}/module/nssock
	    * ns_section ns/server/${server}/module/nslog

2011-12-31 19:50 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d2d1c8cc0fbc)

	* tests/http_chunked.test:
	Added test case for format used in macOS WebDav client in PUT
	operations with chunked encoding

2011-12-31 19:49 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b8ff699c9499)

	* tests/testserver/modules/testhttp.tcl:
	Added option "-omitcontentlength" to nstest_http for testing for
	uploads with chunked encoding

2011-12-31 18:45 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (128d415e9093)

	* nsd/log.c:
	Fix setting of new severity level (e.g. in all.tcl, "ns_logctl
	severity DriverDebug true")

2011-12-31 17:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (569c26b29698)

	* tests/all.tcl, tests/init.test, tests/test.nscfg:
	Revert escaped changes

2011-12-31 17:28 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5bf43a395e84)

	* tcl/nstrace.tcl, tests/all.tcl, tests/init.test, tests/test.nscfg:
	Make handling of XOTcl/NX more explicit

2011-12-31 17:20 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f8a7159a4d41)

	* include/ns.h, nsd/driver.c, nsd/op.c, nsd/queue.c, nsd/returnresp.c,
	nsd/tclresp.c:
	Fix race condition for handling of too large requests. The original
	code handled overlarge requests directly in the driver by sending an
	413 status code directly to the client and closes then the
	connections. In this case, it might happen that the close happens
	*before the complete request was sent* to the server. Many clients
	(e.g. firefox) will show in this case an error message that the
	server has closed unexpectedly the connection while sending the
	request.

2011-12-31 16:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (581adf92aba1)

	* nsthread/thread.c:
	Make code more silent

2011-12-31 16:36 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d6e13f47e53e)

	* tcl/aolserver-openacs.tcl:
	Fir behavior during "make test", for cases, where xotcl.tcl was not
	yet installed

2011-12-31 16:35 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (b672bf506d62)

	* tests/ns_hostbyaddr.test:
	- omit test for Darwin

2011-12-31 16:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c3721ea7d7ea)

	* tests/ns_thread.test:
	- fix test

2011-12-31 13:08 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (49f518b786cc)

	* nsd/tclobjv.c:
	In case the two arguments of NsTclParseArgsObjCmd() are shared,
	decouple these. otherwise the type conversions of
	Tcl_ListObjGetElements() and Tcl_ConvertToType() would overwrite the
	internal representation

2011-12-31 12:07 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1c0bcc4a2478)

	* nsd/log.c:
	Adding missing decoding of log severity

2011-12-30 19:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (57cfbdf986fb)

	* nsd/tclmisc.c:
	regularize spacing for function calls

2011-12-30 18:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (7aa700bd1dcb)

	* nsd/adpparse.c:
	reduce scope of variables

2011-12-30 18:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69c0313cbbe9)

	* nsd/binder.c:
	avoid compiler warning for unused variables

2011-12-30 18:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4089fa3c291e)

	* nsd/tclrequest.c:
	Avoid compiler warnings about uninitialized variables

2011-12-30 18:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a9217b2ff27a)

	* nsd/tclcache.c:
	avoid compiler warnings for uninitialized variables

2011-12-30 18:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e50cddfd1bb7)

	* nsd/unix.c:
	reduce scope of variable

2011-12-30 18:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e0a7fb35f0e8)

	* nsd/url2file.c:
	Avoid compiler warnings about uninitialized variables

2011-12-30 18:55 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec5d4948ccf7)

	* tests/ns_cache.test:
	Fix test

2011-12-30 14:23 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (210af0d2aa0d)

	* nsd/tclimg.c:
	Reduce scope of variable

2011-12-30 14:17 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (69a2ec02abfb)

	* nsd/encoding.c:
	Fix typo in comment

2011-12-30 14:12 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97f104b61d26)

	* nsd/dns.c:
	Fix typo, warning about unused var

2011-12-30 12:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (01ca774589b5)

	* tcl/nstrace.tcl-head: new file.
	* tcl/nstrace.tcl, tcl/nstrace.tcl-head:
	Add nstrace script working for XOTcl 1.* and XOTcl 2.*/NX

2011-12-29 14:34 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e14fc17eeb22)

	* tcl/aolserver-openacs.tcl: new file.
	* tcl/aolserver-openacs.tcl:
	Added aolserver compatibility layer for OpenACS

2011-12-29 11:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (122e5f2d66db)

	* openacs-config.tcl: new file.
	* openacs-config.tcl:
	Added config file for OpenACS

2011-12-29 11:54 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bc598ecfbbbe)

	* nsd-config.tcl:
	Remove obsolete config parameters "urlstats" and "maxurlstats"

2011-12-29 11:16 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3f14baebf2f4)

	* nsd-config.tcl:
	Remove unused parameter "globalstats"

2011-12-29 11:10 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bf6ceb8c6636)

	* doc/src/manual/admin-tuning.man, tests/http-test-config.tcl:
	Remove traces of unused config parameter "maxdropped"

2011-12-29 11:01 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f5055f7aca90)

	* - merged versions

2011-12-29 11:00 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ccc8a91b1235)

	* nsd/driver.c:
	- deavtivate unused driver parameter "keepallmethods"; should be
	probably removed

2011-10-27 07:05 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (8ec0dfe3bfd1)

	* nsd/log.c:
	- don't set stderr by default to linebuffered

2011-10-27 07:03 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (9e301ee55c7b)

	* nsd/log.c:
	- merged versions

2011-10-27 07:01 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ec2770211d9a)

	* nsd/log.c, nsthread/mutex.c:
	- added total_waiting_time and max_waiting_time to the mutex
	monitoring statistics

2011-09-13 22:49 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (419714382594)

	* nsd/log.c:
	- revert escaped change

2011-09-13 22:44 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ac81a7e2aa8f)

	* nsd/log.c, nsd/nsd.h, nslog/nslog.c:
	- improve concurrency: get rid of long mutex locks on writes to the
	access log. We obseverd per day often blocking times on a single
	mutex call larger than several seconds due to file system latencies.
	THis change moves the write operation out of the mutex lock if
	possible (small enough to guarnatee atomic writes)

2011-08-06 19:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (97e441f3682a)

	* include/ns.h, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/adprequest.c, nsd/config.c, nsd/conn.c, nsd/connio.c, nsd/dns.c,
	nsd/driver.c, nsd/event.c, nsd/exec.c, nsd/fastpath.c, nsd/fd.c,
	nsd/index.c, nsd/log.c, nsd/nsd.h, nsd/nsmain.c, nsd/pidfile.c,
	nsd/queue.c, nsd/rollfile.c, nsd/set.c, nsd/sock.c, nsd/str.c,
	nsd/task.c, nsd/tclcache.c, nsd/tclcallbacks.c, nsd/tclfile.c,
	nsd/tclhttp.c, nsd/tclimg.c, nsd/tcljob.c, nsd/tclsock.c,
	nsd/tcltime.c, nsd/tclvar.c, nsd/unix.c, nsd/urlopen.c,
	nsd/urlspace.c:
	Code Cleanup:
	- changed types of file descriptors for socket from "int" to "SOCKET"
	- remove superflous semicolons
	- moved local variables to the nearest scope
	- commented out noop-code
	- commented set but unused variables

2011-04-11 12:42 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4509c789a039)

	* nsd/driver.c:
	Naviserver did loop under linux in some situations where a client
	connection was closed unexpectedly (observed under vmware under
	intel 64bit). Treating HUPs explicitly fixed this problem.

2011-04-11 12:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (25056be464ec)

	* configure.in, nssock/nssock.c:
	Use poll() as well under Darwin. Per default, poll() returns
	writable even when the socket is not. However, setting SO_SNDLOWAT
	fixes this (added by this patch). The change makes it possible to
	quer POLLHUP for all platforms. Make sure to run autogen.sh on macOS to rebuild configure etc.

2011-03-03 13:59 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (e4dbd0bbabbf)

	* nsd/driver.c:
	Fixed another crash on POST requests, where the mmaped file ends
	exactly at a page boundary.

2011-03-03 12:29 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (5cbf84776529)

	* nsd/conn.c, nsd/form.c:
	- Fixed a crash when the content of a POST is mmapped and the script
	tries to access "ns_conn content" after a connection close. Example
	script: ====== ns_returnunauthorized ns_conn content ====== To
	access the content is probably a bug in the script, but it should
	not crash the server.

2011-03-01 13:02 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (ddd3c4c03cc8)

	* nsd/range.c:
	- Fix potential crash (analysis and example by Christoph
	Haberberger) The following query crashes Naviserver without this
	patch: GET /robots.txt HTTP/1.0 Range: bytes=1-1,3-3,5-5,7-7,9-9

2011-02-22 23:18 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (79b6113d4d2e)

	* nsd/cache.c:
	- change statistics counters from int too long

2011-01-28 11:14 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (d00967381fd6)

	* nsd/cache.c:
	- fix a crash during concurrent nscache_evals, when the purge for
	one new entry deletes new-born (but not yet finished) entries of
	some other threads. This happens easily, when a huge entry is added,
	which prunes the full cache.

2010-12-03 15:58 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (43b0f86fcdd4)

	* include/nsthread.h:
	- add omitted prototype

2010-12-03 15:57 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (aecebf15aec0)

	* nsthread/pthread.c:
	- make compilation clean under non-linux platforms

2010-12-03 15:56 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (bd171b95f61e)

	* nsthread/thread.c:
	- make compilation clean

2010-11-30 10:38 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (4642cc515a1c)

	* doc/src/naviserver/ns_thread.man, nsd/tclthread.c,
	nsthread/thread.c:
	- added [ns_thread stackinfo] to obtain size and usage information
	from the current thread

2010-09-10 09:24 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (6950d1fb3674)

	* nsd/cache.c, nslog/nslog.c:
	Quick fix to disallow terminal escape characters in the log file

2010-06-04 21:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (63c58bd034e5)

	* nsd/log.c:
	Avoid storage overwrites on 64 bit machines.

	GetSeverityFromObj() is based on Ns_TclSetOpaqueObj() which returns
	a pointer (on a 64-bit machine a 64bit quantity). If
	sizeof(Ns_LogSeverity) is smaller than the pointer which is
	overwritten, passing &severity will lead to an overwrite of the
	vicinity and invalid values in severity.

2010-06-04 21:39 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (1413ffd113f6)

	* nsd/tclcache.c:
	Improve wording in comment

2010-05-30 16:43 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3be3fadf6711)

	* doc/src/naviserver/ns_cache.man, nsd/tclcache.c:
	add option "-exact" to ns_cache_keys to enable exact lookups also in
	cases where glob characters are used in keys

2010-05-29 12:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a80164b3c919)

	* nsd/tclcache.c:
	Provide constat time lookup for "ns_cache_keys cache pattern", when
	"pattern" contains no glob characters

2010-04-27 13:46 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3738a0f3a298)

	* nsd/limits.c, nsd/tclinit.c:
	Provide names for Ns_Mutex to report meaningful output in naviserver
	statistics

2010-04-27 11:22 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (73c66ddf5b7c)

	* tcl/http.tcl:
	fix typo in error message

2010-04-26 10:02 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (33ca19409c94)

	* nsd/sched.c:
	Fix signedness of format statements in output messages of
	NsGetScheduled(). Problem showed up on 64bit POWER6 architecture
	under Linux

2010-04-14 14:33 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (f49803d54faf)

	* nsd/driver.c:
	Minor cleanup for unexpected client closes

2010-04-13 13:07 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (745bf2f8d7f4)

	* Merged Zoran's changes

2010-04-13 12:54 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (0ae805500160)

	* nsd/driver.c, nsd/nsd.h:
	Provide Chunked Encoding support for incoming requests
	  * Shortcomings: a) for chunked encodings, spooling to files is turned
	off (since decoding happens in memory) b) chunked encodings still
	require X-Expected-Entity-Length to terminate reliably

2010-04-12 23:06 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (850efcf4f46c)

	* nsd/driver.c, nsd/sock.c:
	Correct fix for blocking DriverAccepts when acceptsize>1 on 64-bit
	machines
	  * undo commit 3963e46562e8
	  * set argument for ioctl FIONBIO to int
	  * fix for bug http://www.mail-archive.com/naviserver-
	devel@lists.sourceforge.net/msg02210.html

2010-04-11 17:32 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (a1ccb0371eee)

	* nsd/driver.c, nsd/nsd.h:
	patch to let driver return non-zero content for PUT requests with
	chunked encoding

2010-04-11 17:16 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (3963e46562e8)

	* nsd/driver.c:
	- Fix to prevent multiple DriverAccepts on the same socket. The
	original coded relied on the fact that later accepts lead to an
	ERROR_STATE. Under RHEL 4 (Power, 64bit) the second accept blocks.

2010-04-11 16:59 +0200  Gustaf Neumann  <neumann@wu-wien.ac.at>  (895364f79643)

	* nsd/fd.c:
	- change for MAC OS X (observed with 10.6.3): kern.maxfiles might
	return a number larger than OPEN_MAX. In this case, one might
	observer a warning like e.g. "fd: setrlimit(RLIMIT_NOFILE, 12288)
	failed: Invalid argument"

2010-03-08 14:05 +0100  Zoran Vasiljevic  <zv@archiware.com>  (6aed159eef35)

	* Merged Gustf's changes

2010-03-08 14:03 +0100  Zoran Vasiljevic  <zv@archiware.com>  (dbc8443859bc)

	* nsthread/winthread.c:
	Implements "kill" with some basic functionality.

2010-03-08 14:02 +0100  Zoran Vasiljevic  <zv@archiware.com>  (6d2b483bb776)

	* nsd/index.c:
	Added private version of NsBsearch and re-define the "bsearch" to
	point to it for Windows builds. We found the Windows implementation
	of bsearch to be buggy.

2010-03-08 14:00 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3539dbf09a5d)

	* nsd/dns.c:
	Added some includes for Windows port

2010-03-08 13:59 +0100  Zoran Vasiljevic  <zv@archiware.com>  (7da4eb605841)

	* nsd/log.c:
	Open the log file with O_LARGEFILE if defined

2010-03-08 13:51 +0100  Zoran Vasiljevic  <zv@archiware.com>  (47cbb0b3c12e)

	* nsd/config.c:
	The section/key/value et.al. may be passed as NULL so make sure to
	handle that properly when passing the values to Ns_Log. The Ns_Log
	implementation on some platforms cannot handle NULL arguments passed
	over varargs.

2010-03-07 17:33 +0100  Gustaf Neumann  <neumann@wu-wien.ac.at>  (c6cb67c41e38)

	* nsd/tclcache.c:
	let "nscache eval" allow one to return TCL_BREAK and TCL_CONTINUE to
	tell naviserver from tcl to omit caching of the returned result

2010-03-07 12:34 +0100  Gustaf Neumann  <neumann@wuu-wien.ac.at>  (837647e120c5)

	* nsd/urlencode.c:
	- protection against path traversal attack

2010-03-06 14:57 +0100  Zoran Vasiljevic  <zv@archiware.com>  (6a5fa638207a)

	* nsd/tcljob.c:
	Rewritten cancellation logic. Cancelled jobs stay in the queue and
	get run on the thread as any other jobs. The differnce is only that
	we mark the cancellation state early (even before running the
	script) so the very first Tcl command in the script will be
	cancelled thus resulting in whole job cancellation. This fixes some
	weird races.

2009-07-15 13:44 -0400  vlad  <vlad@video.mpower.net>  (24ffa3e34a1b)

	* nsd/binder.c:
	Fixed sendmsg/recvmsg in binder for x64, it requires to use standard
	macros for accessing structure

2009-03-17 12:05 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (8b14e4c89581)

	* nsd/driver.c, nsd/tclobjv.c, tests/ns_parseargs.test:
	Change ns_parseargs syntax for script into native Tcl style, before
	it's been something weird and never been mentioned so i assume
	nobody used it much, so now it will be in the form {[..]}, like
	ns_parseargs {-flag {[script]}} $args

2009-03-16 22:12 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (fdac3e4c0a15)

	* Makefile:
	Updated documentation abour new repository, use common include in
	all docs, moved module specific docs under each module

2009-03-16 22:09 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (c7a35464f07f)

	* doc/src/manual/admin-db.man, doc/src/manual/admin-install.man,
	doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/manual/adp-overview.man,
	doc/src/manual/c-driverdb.man, doc/src/manual/c-urlspace.man,
	doc/src/manual/main-faq.man, doc/src/manual/main-features.man,
	doc/src/manual/main-history.man, doc/src/manual/main-standards.man,
	doc/src/manual/tcl-lib-file.man, doc/src/manual/tcl-lib-nstrace.man,
	doc/src/manual/tcl-libraries.man, doc/src/manual/tcl-overview.man,
	nscgi/doc/mann/nscgi.man, nscp/doc/mann/nscp.man,
	nsperm/doc/mann/ns_perm.man, nsperm/doc/mann/nsperm.man,
	version_include.man.in: new file.
	* doc/src/docs/admin-db.man, doc/src/docs/admin-install.man,
	doc/src/docs/admin-maintenance.man, doc/src/docs/admin-tuning.man,
	doc/src/docs/adp-overview.man, doc/src/docs/c-driverdb.man,
	doc/src/docs/c-urlspace.man, doc/src/docs/main-faq.man, doc/src/docs
	/main-features.man, doc/src/docs/main-history.man, doc/src/docs
	/main-standards.man, doc/src/docs/module-nscgi.man, doc/src/docs
	/module-nscp.man, doc/src/docs/module-nsperm.man, doc/src/docs/tcl-
	lib-file.man, doc/src/docs/tcl-lib-nstrace.man, doc/src/docs/tcl-
	libraries.man, doc/src/docs/tcl-overview.man,
	doc/src/naviserver/ns_perm.man, version_include.in: deleted file.
	* Makefile, configure.in, doc/src/docs/admin-db.man, doc/src/docs
	/admin-install.man, doc/src/docs/admin-maintenance.man, doc/src/docs
	/admin-tuning.man, doc/src/docs/adp-overview.man,
	doc/src/docs/c-driverdb.man, doc/src/docs/c-urlspace.man,
	doc/src/docs/main-faq.man, doc/src/docs/main-features.man,
	doc/src/docs/main-history.man, doc/src/docs/main-standards.man,
	doc/src/docs/module-nscgi.man, doc/src/docs/module-nscp.man,
	doc/src/docs/module-nsperm.man, doc/src/docs/tcl-lib-file.man,
	doc/src/docs/tcl-lib-nstrace.man, doc/src/docs/tcl-libraries.man,
	doc/src/docs/tcl-overview.man, doc/src/man3/Ns_Sls.man,
	doc/src/manual/admin-db.man, doc/src/manual/admin-install.man,
	doc/src/manual/admin-maintenance.man, doc/src/manual/admin-
	tuning.man, doc/src/manual/adp-overview.man,
	doc/src/manual/c-driverdb.man, doc/src/manual/c-urlspace.man,
	doc/src/manual/main-faq.man, doc/src/manual/main-features.man,
	doc/src/manual/main-history.man, doc/src/manual/main-standards.man,
	doc/src/manual/tcl-lib-file.man, doc/src/manual/tcl-lib-nstrace.man,
	doc/src/manual/tcl-libraries.man, doc/src/manual/tcl-overview.man,
	doc/src/naviserver/commandlist.man, doc/src/naviserver/keyl.man,
	doc/src/naviserver/ns_addrbyhost.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_adp_abort.man,
	doc/src/naviserver/ns_adp_append.man,
	doc/src/naviserver/ns_adp_argc.man,
	doc/src/naviserver/ns_adp_argv.man,
	doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_adp_break.man,
	doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_debug.man,
	doc/src/naviserver/ns_adp_dir.man,
	doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_eval.man,
	doc/src/naviserver/ns_adp_exception.man,
	doc/src/naviserver/ns_adp_include.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_adp_mime.man,
	doc/src/naviserver/ns_adp_mimetype.man,
	doc/src/naviserver/ns_adp_parse.man,
	doc/src/naviserver/ns_adp_puts.man,
	doc/src/naviserver/ns_adp_register.man,
	doc/src/naviserver/ns_adp_registeradp.man,
	doc/src/naviserver/ns_adp_registerproc.man,
	doc/src/naviserver/ns_adp_registertag.man,
	doc/src/naviserver/ns_adp_return.man,
	doc/src/naviserver/ns_adp_safeeval.man,
	doc/src/naviserver/ns_adp_stats.man,
	doc/src/naviserver/ns_adp_tell.man,
	doc/src/naviserver/ns_adp_trunc.man,
	doc/src/naviserver/ns_after.man, doc/src/naviserver/ns_atclose.man,
	doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_base64decode.man,
	doc/src/naviserver/ns_base64encode.man,
	doc/src/naviserver/ns_browsermatch.man,
	doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_cancel.man,
	doc/src/naviserver/ns_chan.man, doc/src/naviserver/ns_charsets.man,
	doc/src/naviserver/ns_checkurl.man,
	doc/src/naviserver/ns_choosecharset.man,
	doc/src/naviserver/ns_cond.man, doc/src/naviserver/ns_config.man,
	doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_conncptofp.man,
	doc/src/naviserver/ns_cookie.man,
	doc/src/naviserver/ns_cookiecharset.man,
	doc/src/naviserver/ns_cookietime.man,
	doc/src/naviserver/ns_critsec.man, doc/src/naviserver/ns_crypt.man,
	doc/src/naviserver/ns_encodingforcharset.man,
	doc/src/naviserver/ns_encodingfortype.man,
	doc/src/naviserver/ns_env.man, doc/src/naviserver/ns_event.man,
	doc/src/naviserver/ns_filestat.man,
	doc/src/naviserver/ns_findset.man,
	doc/src/naviserver/ns_fmttime.man,
	doc/src/naviserver/ns_formfieldcharset.man,
	doc/src/naviserver/ns_ftruncate.man,
	doc/src/naviserver/ns_getform.man,
	doc/src/naviserver/ns_getformfile.man,
	doc/src/naviserver/ns_geturl.man, doc/src/naviserver/ns_gifsize.man,
	doc/src/naviserver/ns_gmtime.man,
	doc/src/naviserver/ns_guesstype.man,
	doc/src/naviserver/ns_hashpath.man,
	doc/src/naviserver/ns_hostbyaddr.man,
	doc/src/naviserver/ns_hrefs.man,
	doc/src/naviserver/ns_htmlselect.man,
	doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_httpget.man,
	doc/src/naviserver/ns_httpopen.man,
	doc/src/naviserver/ns_httppost.man,
	doc/src/naviserver/ns_httptime.man, doc/src/naviserver/ns_ictl.man,
	doc/src/naviserver/ns_imgmime.man,
	doc/src/naviserver/ns_imgsize.man,
	doc/src/naviserver/ns_imgtype.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_internalredirect.man,
	doc/src/naviserver/ns_issmallint.man, doc/src/naviserver/ns_job.man,
	doc/src/naviserver/ns_jpegsize.man, doc/src/naviserver/ns_kill.man,
	doc/src/naviserver/ns_library.man, doc/src/naviserver/ns_limits.man,
	doc/src/naviserver/ns_localtime.man,
	doc/src/naviserver/ns_locationproc.man,
	doc/src/naviserver/ns_log.man, doc/src/naviserver/ns_memoize.man,
	doc/src/naviserver/ns_mktemp.man,
	doc/src/naviserver/ns_moduleload.man,
	doc/src/naviserver/ns_modulepath.man,
	doc/src/naviserver/ns_mutex.man,
	doc/src/naviserver/ns_normalizepath.man,
	doc/src/naviserver/ns_pagepath.man, doc/src/naviserver/ns_paren.man,
	doc/src/naviserver/ns_parseargs.man,
	doc/src/naviserver/ns_parseheader.man,
	doc/src/naviserver/ns_parsehttptime.man,
	doc/src/naviserver/ns_parsequery.man,
	doc/src/naviserver/ns_parsetime.man,
	doc/src/naviserver/ns_pause.man, doc/src/naviserver/ns_perm.man,
	doc/src/naviserver/ns_pngsize.man,
	doc/src/naviserver/ns_purgefiles.man,
	doc/src/naviserver/ns_puts.man,
	doc/src/naviserver/ns_queryexists.man,
	doc/src/naviserver/ns_queryget.man,
	doc/src/naviserver/ns_querygetall.man,
	doc/src/naviserver/ns_quotehtml.man, doc/src/naviserver/ns_rand.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_register_adp.man,
	doc/src/naviserver/ns_register_adptag.man,
	doc/src/naviserver/ns_register_fastpath.man,
	doc/src/naviserver/ns_register_filter.man,
	doc/src/naviserver/ns_register_proc.man,
	doc/src/naviserver/ns_register_proxy.man,
	doc/src/naviserver/ns_register_trace.man,
	doc/src/naviserver/ns_register_url2file.man,
	doc/src/naviserver/ns_requestauthorize.man,
	doc/src/naviserver/ns_resume.man, doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_returnerror.man,
	doc/src/naviserver/ns_rollfile.man,
	doc/src/naviserver/ns_runonce.man, doc/src/naviserver/ns_rwlock.man,
	doc/src/naviserver/ns_schedule.man,
	doc/src/naviserver/ns_schedule_daily.man,
	doc/src/naviserver/ns_schedule_proc.man,
	doc/src/naviserver/ns_schedule_weekly.man,
	doc/src/naviserver/ns_sema.man, doc/src/naviserver/ns_sendmail.man,
	doc/src/naviserver/ns_server.man,
	doc/src/naviserver/ns_serverpath.man,
	doc/src/naviserver/ns_serverrootproc.man,
	doc/src/naviserver/ns_set.man, doc/src/naviserver/ns_setexpires.man,
	doc/src/naviserver/ns_setformencoding.man,
	doc/src/naviserver/ns_setprivileges.man,
	doc/src/naviserver/ns_sha1.man,
	doc/src/naviserver/ns_shortcut_filter.man,
	doc/src/naviserver/ns_shutdown.man, doc/src/naviserver/ns_sleep.man,
	doc/src/naviserver/ns_sls.man, doc/src/naviserver/ns_sockaccept.man,
	doc/src/naviserver/ns_sockblocking.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockcheck.man,
	doc/src/naviserver/ns_socketpair.man,
	doc/src/naviserver/ns_socklisten.man,
	doc/src/naviserver/ns_socklistencallback.man,
	doc/src/naviserver/ns_socknonblocking.man,
	doc/src/naviserver/ns_socknread.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_striphtml.man,
	doc/src/naviserver/ns_symlink.man,
	doc/src/naviserver/ns_tagelement.man,
	doc/src/naviserver/ns_tagelementset.man,
	doc/src/naviserver/ns_thread.man, doc/src/naviserver/ns_time.man,
	doc/src/naviserver/ns_tmpnam.man,
	doc/src/naviserver/ns_truncate.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_url2file.man,
	doc/src/naviserver/ns_urlcharset.man,
	doc/src/naviserver/ns_urldecode.man,
	doc/src/naviserver/ns_urlencode.man,
	doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man, doc/src/naviserver/ns_write.man,
	doc/src/naviserver/ns_writecontent.man,
	doc/src/naviserver/ns_writer.man, doc/src/naviserver/nsv.man,
	nscgi/doc/mann/nscgi.man, nscp/doc/mann/nscp.man,
	nsdb/doc/mann/ns_buildsqldate.man, nsdb/doc/mann/ns_db.man,
	nsdb/doc/mann/ns_dbquotevalue.man, nslog/doc/mann/ns_accesslog.man,
	nsperm/doc/mann/ns_perm.man, nsperm/doc/mann/nsperm.man,
	nsproxy/doc/mann/ns_proxy.man, version_include.in,
	version_include.man.in:
	Updated documentation abour new repository, use common include in
	all docs, moved module specific docs under each module

2009-03-16 17:34 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (dedd859eb321)

	* nsd/driver.c:
	To make huge uploads easy to handle, we put query into content and
	change method to GET so Ns_ConnGetQuery will parse it and return as
	query parameters. If later the conn Tcl page will decide to parse
	multipart/data file manually it may replace query with new parsed
	data but in case of batch processing with external tools it is good
	to know additional info about the uploaded content beforehand.

2009-03-11 18:42 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (15ae70eb9d80)

	* Makefile:
	Updated makefile target build-doc. Now it collects all man pages
	into temporary dir and then build documentation so that directory
	structure stays simple and plain, no deep src/doc/mann stuff anymore

2009-03-10 11:48 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (d425ce49d6ff)

	* nsproxy/nsproxylib.c:
	Remove extra Tc_FindExecutable

2009-03-10 08:13 +0000  Stephen Deasey  <sdeasey@gmail.com>  (304e7cb55427)

	* .hgignore:
	Ignore generated docs

2009-03-10 08:11 +0000  Stephen Deasey  <sdeasey@gmail.com>  (8eaf28d18670)

	* nsd/mimetypes.c:
	Add RFC 5334 Ogg Media Types mimetypes

2009-03-08 20:32 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (231465b0dfa1)

	* doc/src/README.txt, doc/src/docs/admin-db.man, doc/src/docs/admin-
	install.man, doc/src/docs/admin-maintenance.man, doc/src/docs/admin-
	tuning.man, doc/src/docs/adp-overview.man,
	doc/src/docs/c-driverdb.man, doc/src/docs/c-urlspace.man,
	doc/src/docs/main-faq.man, doc/src/docs/main-features.man,
	doc/src/docs/main-history.man, doc/src/docs/main-standards.man,
	doc/src/docs/module-nscgi.man, doc/src/docs/module-nscp.man,
	doc/src/docs/module-nsperm.man, doc/src/docs/tcl-lib-file.man,
	doc/src/docs/tcl-lib-nstrace.man, doc/src/docs/tcl-libraries.man,
	doc/src/docs/tcl-overview.man, doc/src/naviserver/commandlist.man,
	doc/src/naviserver/keyl.man, doc/src/naviserver/ns_addrbyhost.man,
	doc/src/naviserver/ns_adp.man, doc/src/naviserver/ns_adp_abort.man,
	doc/src/naviserver/ns_adp_append.man,
	doc/src/naviserver/ns_adp_argc.man,
	doc/src/naviserver/ns_adp_argv.man,
	doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_adp_break.man,
	doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_debug.man,
	doc/src/naviserver/ns_adp_dir.man,
	doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_eval.man,
	doc/src/naviserver/ns_adp_exception.man,
	doc/src/naviserver/ns_adp_include.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_adp_mime.man,
	doc/src/naviserver/ns_adp_mimetype.man,
	doc/src/naviserver/ns_adp_parse.man,
	doc/src/naviserver/ns_adp_puts.man,
	doc/src/naviserver/ns_adp_register.man,
	doc/src/naviserver/ns_adp_registeradp.man,
	doc/src/naviserver/ns_adp_registerproc.man,
	doc/src/naviserver/ns_adp_registertag.man,
	doc/src/naviserver/ns_adp_return.man,
	doc/src/naviserver/ns_adp_safeeval.man,
	doc/src/naviserver/ns_adp_stats.man,
	doc/src/naviserver/ns_adp_tell.man,
	doc/src/naviserver/ns_adp_trunc.man,
	doc/src/naviserver/ns_after.man, doc/src/naviserver/ns_atclose.man,
	doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_base64decode.man,
	doc/src/naviserver/ns_base64encode.man,
	doc/src/naviserver/ns_browsermatch.man,
	doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_cancel.man,
	doc/src/naviserver/ns_chan.man, doc/src/naviserver/ns_charsets.man,
	doc/src/naviserver/ns_checkurl.man,
	doc/src/naviserver/ns_choosecharset.man,
	doc/src/naviserver/ns_cond.man, doc/src/naviserver/ns_config.man,
	doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_conncptofp.man,
	doc/src/naviserver/ns_cookie.man,
	doc/src/naviserver/ns_cookiecharset.man,
	doc/src/naviserver/ns_cookietime.man,
	doc/src/naviserver/ns_critsec.man, doc/src/naviserver/ns_crypt.man,
	doc/src/naviserver/ns_encodingforcharset.man,
	doc/src/naviserver/ns_encodingfortype.man,
	doc/src/naviserver/ns_env.man, doc/src/naviserver/ns_event.man,
	doc/src/naviserver/ns_filestat.man,
	doc/src/naviserver/ns_findset.man,
	doc/src/naviserver/ns_fmttime.man,
	doc/src/naviserver/ns_formfieldcharset.man,
	doc/src/naviserver/ns_ftruncate.man,
	doc/src/naviserver/ns_getform.man,
	doc/src/naviserver/ns_getformfile.man,
	doc/src/naviserver/ns_geturl.man, doc/src/naviserver/ns_gifsize.man,
	doc/src/naviserver/ns_gmtime.man,
	doc/src/naviserver/ns_guesstype.man,
	doc/src/naviserver/ns_hashpath.man,
	doc/src/naviserver/ns_hostbyaddr.man,
	doc/src/naviserver/ns_hrefs.man,
	doc/src/naviserver/ns_htmlselect.man,
	doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_httpget.man,
	doc/src/naviserver/ns_httpopen.man,
	doc/src/naviserver/ns_httppost.man,
	doc/src/naviserver/ns_httptime.man, doc/src/naviserver/ns_ictl.man,
	doc/src/naviserver/ns_imgmime.man,
	doc/src/naviserver/ns_imgsize.man,
	doc/src/naviserver/ns_imgtype.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_internalredirect.man,
	doc/src/naviserver/ns_issmallint.man, doc/src/naviserver/ns_job.man,
	doc/src/naviserver/ns_jpegsize.man, doc/src/naviserver/ns_kill.man,
	doc/src/naviserver/ns_library.man, doc/src/naviserver/ns_limits.man,
	doc/src/naviserver/ns_localtime.man,
	doc/src/naviserver/ns_locationproc.man,
	doc/src/naviserver/ns_log.man, doc/src/naviserver/ns_memoize.man,
	doc/src/naviserver/ns_mktemp.man,
	doc/src/naviserver/ns_moduleload.man,
	doc/src/naviserver/ns_modulepath.man,
	doc/src/naviserver/ns_mutex.man,
	doc/src/naviserver/ns_normalizepath.man,
	doc/src/naviserver/ns_pagepath.man, doc/src/naviserver/ns_paren.man,
	doc/src/naviserver/ns_parseargs.man,
	doc/src/naviserver/ns_parseheader.man,
	doc/src/naviserver/ns_parsehttptime.man,
	doc/src/naviserver/ns_parsequery.man,
	doc/src/naviserver/ns_parsetime.man,
	doc/src/naviserver/ns_pause.man, doc/src/naviserver/ns_perm.man,
	doc/src/naviserver/ns_pngsize.man,
	doc/src/naviserver/ns_purgefiles.man,
	doc/src/naviserver/ns_puts.man,
	doc/src/naviserver/ns_queryexists.man,
	doc/src/naviserver/ns_queryget.man,
	doc/src/naviserver/ns_querygetall.man,
	doc/src/naviserver/ns_quotehtml.man, doc/src/naviserver/ns_rand.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_register_adp.man,
	doc/src/naviserver/ns_register_adptag.man,
	doc/src/naviserver/ns_register_fastpath.man,
	doc/src/naviserver/ns_register_filter.man,
	doc/src/naviserver/ns_register_proc.man,
	doc/src/naviserver/ns_register_proxy.man,
	doc/src/naviserver/ns_register_trace.man,
	doc/src/naviserver/ns_register_url2file.man,
	doc/src/naviserver/ns_requestauthorize.man,
	doc/src/naviserver/ns_resume.man, doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_returnerror.man,
	doc/src/naviserver/ns_rollfile.man,
	doc/src/naviserver/ns_runonce.man, doc/src/naviserver/ns_rwlock.man,
	doc/src/naviserver/ns_schedule.man,
	doc/src/naviserver/ns_schedule_daily.man,
	doc/src/naviserver/ns_schedule_proc.man,
	doc/src/naviserver/ns_schedule_weekly.man,
	doc/src/naviserver/ns_sema.man, doc/src/naviserver/ns_sendmail.man,
	doc/src/naviserver/ns_server.man,
	doc/src/naviserver/ns_serverpath.man,
	doc/src/naviserver/ns_serverrootproc.man,
	doc/src/naviserver/ns_set.man, doc/src/naviserver/ns_setexpires.man,
	doc/src/naviserver/ns_setformencoding.man,
	doc/src/naviserver/ns_setprivileges.man,
	doc/src/naviserver/ns_sha1.man,
	doc/src/naviserver/ns_shortcut_filter.man,
	doc/src/naviserver/ns_shutdown.man, doc/src/naviserver/ns_sleep.man,
	doc/src/naviserver/ns_sls.man, doc/src/naviserver/ns_sockaccept.man,
	doc/src/naviserver/ns_sockblocking.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockcheck.man,
	doc/src/naviserver/ns_socketpair.man,
	doc/src/naviserver/ns_socklisten.man,
	doc/src/naviserver/ns_socklistencallback.man,
	doc/src/naviserver/ns_socknonblocking.man,
	doc/src/naviserver/ns_socknread.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_striphtml.man,
	doc/src/naviserver/ns_symlink.man,
	doc/src/naviserver/ns_tagelement.man,
	doc/src/naviserver/ns_tagelementset.man,
	doc/src/naviserver/ns_thread.man, doc/src/naviserver/ns_time.man,
	doc/src/naviserver/ns_tmpnam.man,
	doc/src/naviserver/ns_truncate.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_url2file.man,
	doc/src/naviserver/ns_urlcharset.man,
	doc/src/naviserver/ns_urldecode.man,
	doc/src/naviserver/ns_urlencode.man,
	doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man, doc/src/naviserver/ns_write.man,
	doc/src/naviserver/ns_writecontent.man,
	doc/src/naviserver/ns_writer.man, doc/src/naviserver/nsv.man: new
	file.
	* doc/src/README.doc, doc/src/admin-db.man, doc/src/admin-install.man,
	doc/src/admin-maintenance.man, doc/src/admin-tuning.man, doc/src
	/adp-overview.man, doc/src/c-driverdb.man, doc/src/c-urlspace.man,
	doc/src/commandlist.man, doc/src/keyl.man, doc/src/main-faq.man,
	doc/src/main-features.man, doc/src/main-history.man, doc/src/main-
	standards.man, doc/src/mann/ns_atsignal.man,
	doc/src/mann/ns_cache.man, doc/src/mann/ns_config.man,
	doc/src/mann/ns_cookie.man, doc/src/mann/ns_ictl.man,
	doc/src/mann/ns_limits.man, doc/src/mann/ns_log.man,
	doc/src/mann/ns_memoize.man, doc/src/mann/ns_register_adp.man,
	doc/src/mann/ns_return.man, doc/src/mann/ns_returnerror.man,
	doc/src/mann/ns_sls.man, doc/src/mann/ns_write.man, doc/src/module-
	nscgi.man, doc/src/module-nscp.man, doc/src/module-nsperm.man,
	doc/src/ns_addrbyhost.man, doc/src/ns_adp.man,
	doc/src/ns_adp_abort.man, doc/src/ns_adp_append.man,
	doc/src/ns_adp_argc.man, doc/src/ns_adp_argv.man,
	doc/src/ns_adp_bind_args.man, doc/src/ns_adp_break.man,
	doc/src/ns_adp_ctl.man, doc/src/ns_adp_debug.man,
	doc/src/ns_adp_dir.man, doc/src/ns_adp_dump.man,
	doc/src/ns_adp_eval.man, doc/src/ns_adp_exception.man,
	doc/src/ns_adp_include.man, doc/src/ns_adp_info.man,
	doc/src/ns_adp_mime.man, doc/src/ns_adp_mimetype.man,
	doc/src/ns_adp_parse.man, doc/src/ns_adp_puts.man,
	doc/src/ns_adp_register.man, doc/src/ns_adp_registeradp.man,
	doc/src/ns_adp_registerproc.man, doc/src/ns_adp_registertag.man,
	doc/src/ns_adp_return.man, doc/src/ns_adp_safeeval.man,
	doc/src/ns_adp_stats.man, doc/src/ns_adp_tell.man,
	doc/src/ns_adp_trunc.man, doc/src/ns_after.man,
	doc/src/ns_atclose.man, doc/src/ns_base64decode.man,
	doc/src/ns_base64encode.man, doc/src/ns_browsermatch.man,
	doc/src/ns_cancel.man, doc/src/ns_chan.man, doc/src/ns_charsets.man,
	doc/src/ns_checkurl.man, doc/src/ns_choosecharset.man,
	doc/src/ns_cond.man, doc/src/ns_conn.man, doc/src/ns_conncptofp.man,
	doc/src/ns_cookiecharset.man, doc/src/ns_cookietime.man,
	doc/src/ns_critsec.man, doc/src/ns_crypt.man,
	doc/src/ns_encodingforcharset.man, doc/src/ns_encodingfortype.man,
	doc/src/ns_env.man, doc/src/ns_event.man, doc/src/ns_filestat.man,
	doc/src/ns_findset.man, doc/src/ns_fmttime.man,
	doc/src/ns_formfieldcharset.man, doc/src/ns_ftruncate.man,
	doc/src/ns_getform.man, doc/src/ns_getformfile.man,
	doc/src/ns_geturl.man, doc/src/ns_gifsize.man,
	doc/src/ns_gmtime.man, doc/src/ns_guesstype.man,
	doc/src/ns_hashpath.man, doc/src/ns_hostbyaddr.man,
	doc/src/ns_hrefs.man, doc/src/ns_htmlselect.man,
	doc/src/ns_http.man, doc/src/ns_httpget.man,
	doc/src/ns_httpopen.man, doc/src/ns_httppost.man,
	doc/src/ns_httptime.man, doc/src/ns_imgmime.man,
	doc/src/ns_imgsize.man, doc/src/ns_imgtype.man, doc/src/ns_info.man,
	doc/src/ns_internalredirect.man, doc/src/ns_issmallint.man,
	doc/src/ns_job.man, doc/src/ns_jpegsize.man, doc/src/ns_kill.man,
	doc/src/ns_library.man, doc/src/ns_localtime.man,
	doc/src/ns_locationproc.man, doc/src/ns_mktemp.man,
	doc/src/ns_moduleload.man, doc/src/ns_modulepath.man,
	doc/src/ns_mutex.man, doc/src/ns_normalizepath.man,
	doc/src/ns_pagepath.man, doc/src/ns_paren.man,
	doc/src/ns_parseargs.man, doc/src/ns_parseheader.man,
	doc/src/ns_parsehttptime.man, doc/src/ns_parsequery.man,
	doc/src/ns_parsetime.man, doc/src/ns_pause.man, doc/src/ns_perm.man,
	doc/src/ns_pngsize.man, doc/src/ns_purgefiles.man,
	doc/src/ns_puts.man, doc/src/ns_queryexists.man,
	doc/src/ns_queryget.man, doc/src/ns_querygetall.man,
	doc/src/ns_quotehtml.man, doc/src/ns_rand.man,
	doc/src/ns_register.man, doc/src/ns_register_adp.man,
	doc/src/ns_register_adptag.man, doc/src/ns_register_fastpath.man,
	doc/src/ns_register_filter.man, doc/src/ns_register_proc.man,
	doc/src/ns_register_proxy.man, doc/src/ns_register_trace.man,
	doc/src/ns_register_url2file.man, doc/src/ns_requestauthorize.man,
	doc/src/ns_resume.man, doc/src/ns_rollfile.man,
	doc/src/ns_runonce.man, doc/src/ns_rwlock.man,
	doc/src/ns_schedule.man, doc/src/ns_schedule_daily.man,
	doc/src/ns_schedule_proc.man, doc/src/ns_schedule_weekly.man,
	doc/src/ns_sema.man, doc/src/ns_sendmail.man, doc/src/ns_server.man,
	doc/src/ns_serverpath.man, doc/src/ns_serverrootproc.man,
	doc/src/ns_set.man, doc/src/ns_setexpires.man,
	doc/src/ns_setformencoding.man, doc/src/ns_setprivileges.man,
	doc/src/ns_sha1.man, doc/src/ns_shortcut_filter.man,
	doc/src/ns_shutdown.man, doc/src/ns_sleep.man,
	doc/src/ns_sockaccept.man, doc/src/ns_sockblocking.man,
	doc/src/ns_sockcallback.man, doc/src/ns_sockcheck.man,
	doc/src/ns_socketpair.man, doc/src/ns_socklisten.man,
	doc/src/ns_socklistencallback.man, doc/src/ns_socknonblocking.man,
	doc/src/ns_socknread.man, doc/src/ns_sockopen.man,
	doc/src/ns_sockselect.man, doc/src/ns_striphtml.man,
	doc/src/ns_symlink.man, doc/src/ns_tagelement.man,
	doc/src/ns_tagelementset.man, doc/src/ns_thread.man,
	doc/src/ns_time.man, doc/src/ns_tmpnam.man, doc/src/ns_truncate.man,
	doc/src/ns_upload_stats.man, doc/src/ns_url2file.man,
	doc/src/ns_urlcharset.man, doc/src/ns_urldecode.man,
	doc/src/ns_urlencode.man, doc/src/ns_uudecode.man,
	doc/src/ns_uuencode.man, doc/src/ns_writecontent.man,
	doc/src/ns_writer.man, doc/src/nsv.man, doc/src/tcl-lib-file.man,
	doc/src/tcl-lib-nstrace.man, doc/src/tcl-libraries.man, doc/src/tcl-
	overview.man: deleted file.
	* Makefile, doc/src/README.doc, doc/src/README.txt, doc/src/admin-
	db.man, doc/src/admin-install.man, doc/src/admin-maintenance.man,
	doc/src/admin-tuning.man, doc/src/adp-overview.man,
	doc/src/c-driverdb.man, doc/src/c-urlspace.man,
	doc/src/commandlist.man, doc/src/docs/admin-db.man, doc/src/docs
	/admin-install.man, doc/src/docs/admin-maintenance.man, doc/src/docs
	/admin-tuning.man, doc/src/docs/adp-overview.man,
	doc/src/docs/c-driverdb.man, doc/src/docs/c-urlspace.man,
	doc/src/docs/main-faq.man, doc/src/docs/main-features.man,
	doc/src/docs/main-history.man, doc/src/docs/main-standards.man,
	doc/src/docs/module-nscgi.man, doc/src/docs/module-nscp.man,
	doc/src/docs/module-nsperm.man, doc/src/docs/tcl-lib-file.man,
	doc/src/docs/tcl-lib-nstrace.man, doc/src/docs/tcl-libraries.man,
	doc/src/docs/tcl-overview.man, doc/src/header.inc, doc/src/keyl.man,
	doc/src/main-faq.man, doc/src/main-features.man, doc/src/main-
	history.man, doc/src/main-standards.man,
	doc/src/mann/ns_atsignal.man, doc/src/mann/ns_cache.man,
	doc/src/mann/ns_config.man, doc/src/mann/ns_cookie.man,
	doc/src/mann/ns_ictl.man, doc/src/mann/ns_limits.man,
	doc/src/mann/ns_log.man, doc/src/mann/ns_memoize.man,
	doc/src/mann/ns_register_adp.man, doc/src/mann/ns_return.man,
	doc/src/mann/ns_returnerror.man, doc/src/mann/ns_sls.man,
	doc/src/mann/ns_write.man, doc/src/module-nscgi.man, doc/src/module-
	nscp.man, doc/src/module-nsperm.man,
	doc/src/naviserver/commandlist.man, doc/src/naviserver/keyl.man,
	doc/src/naviserver/ns_addrbyhost.man, doc/src/naviserver/ns_adp.man,
	doc/src/naviserver/ns_adp_abort.man,
	doc/src/naviserver/ns_adp_append.man,
	doc/src/naviserver/ns_adp_argc.man,
	doc/src/naviserver/ns_adp_argv.man,
	doc/src/naviserver/ns_adp_bind_args.man,
	doc/src/naviserver/ns_adp_break.man,
	doc/src/naviserver/ns_adp_ctl.man,
	doc/src/naviserver/ns_adp_debug.man,
	doc/src/naviserver/ns_adp_dir.man,
	doc/src/naviserver/ns_adp_dump.man,
	doc/src/naviserver/ns_adp_eval.man,
	doc/src/naviserver/ns_adp_exception.man,
	doc/src/naviserver/ns_adp_include.man,
	doc/src/naviserver/ns_adp_info.man,
	doc/src/naviserver/ns_adp_mime.man,
	doc/src/naviserver/ns_adp_mimetype.man,
	doc/src/naviserver/ns_adp_parse.man,
	doc/src/naviserver/ns_adp_puts.man,
	doc/src/naviserver/ns_adp_register.man,
	doc/src/naviserver/ns_adp_registeradp.man,
	doc/src/naviserver/ns_adp_registerproc.man,
	doc/src/naviserver/ns_adp_registertag.man,
	doc/src/naviserver/ns_adp_return.man,
	doc/src/naviserver/ns_adp_safeeval.man,
	doc/src/naviserver/ns_adp_stats.man,
	doc/src/naviserver/ns_adp_tell.man,
	doc/src/naviserver/ns_adp_trunc.man,
	doc/src/naviserver/ns_after.man, doc/src/naviserver/ns_atclose.man,
	doc/src/naviserver/ns_atsignal.man,
	doc/src/naviserver/ns_base64decode.man,
	doc/src/naviserver/ns_base64encode.man,
	doc/src/naviserver/ns_browsermatch.man,
	doc/src/naviserver/ns_cache.man, doc/src/naviserver/ns_cancel.man,
	doc/src/naviserver/ns_chan.man, doc/src/naviserver/ns_charsets.man,
	doc/src/naviserver/ns_checkurl.man,
	doc/src/naviserver/ns_choosecharset.man,
	doc/src/naviserver/ns_cond.man, doc/src/naviserver/ns_config.man,
	doc/src/naviserver/ns_conn.man,
	doc/src/naviserver/ns_conncptofp.man,
	doc/src/naviserver/ns_cookie.man,
	doc/src/naviserver/ns_cookiecharset.man,
	doc/src/naviserver/ns_cookietime.man,
	doc/src/naviserver/ns_critsec.man, doc/src/naviserver/ns_crypt.man,
	doc/src/naviserver/ns_encodingforcharset.man,
	doc/src/naviserver/ns_encodingfortype.man,
	doc/src/naviserver/ns_env.man, doc/src/naviserver/ns_event.man,
	doc/src/naviserver/ns_filestat.man,
	doc/src/naviserver/ns_findset.man,
	doc/src/naviserver/ns_fmttime.man,
	doc/src/naviserver/ns_formfieldcharset.man,
	doc/src/naviserver/ns_ftruncate.man,
	doc/src/naviserver/ns_getform.man,
	doc/src/naviserver/ns_getformfile.man,
	doc/src/naviserver/ns_geturl.man, doc/src/naviserver/ns_gifsize.man,
	doc/src/naviserver/ns_gmtime.man,
	doc/src/naviserver/ns_guesstype.man,
	doc/src/naviserver/ns_hashpath.man,
	doc/src/naviserver/ns_hostbyaddr.man,
	doc/src/naviserver/ns_hrefs.man,
	doc/src/naviserver/ns_htmlselect.man,
	doc/src/naviserver/ns_http.man, doc/src/naviserver/ns_httpget.man,
	doc/src/naviserver/ns_httpopen.man,
	doc/src/naviserver/ns_httppost.man,
	doc/src/naviserver/ns_httptime.man, doc/src/naviserver/ns_ictl.man,
	doc/src/naviserver/ns_imgmime.man,
	doc/src/naviserver/ns_imgsize.man,
	doc/src/naviserver/ns_imgtype.man, doc/src/naviserver/ns_info.man,
	doc/src/naviserver/ns_internalredirect.man,
	doc/src/naviserver/ns_issmallint.man, doc/src/naviserver/ns_job.man,
	doc/src/naviserver/ns_jpegsize.man, doc/src/naviserver/ns_kill.man,
	doc/src/naviserver/ns_library.man, doc/src/naviserver/ns_limits.man,
	doc/src/naviserver/ns_localtime.man,
	doc/src/naviserver/ns_locationproc.man,
	doc/src/naviserver/ns_log.man, doc/src/naviserver/ns_memoize.man,
	doc/src/naviserver/ns_mktemp.man,
	doc/src/naviserver/ns_moduleload.man,
	doc/src/naviserver/ns_modulepath.man,
	doc/src/naviserver/ns_mutex.man,
	doc/src/naviserver/ns_normalizepath.man,
	doc/src/naviserver/ns_pagepath.man, doc/src/naviserver/ns_paren.man,
	doc/src/naviserver/ns_parseargs.man,
	doc/src/naviserver/ns_parseheader.man,
	doc/src/naviserver/ns_parsehttptime.man,
	doc/src/naviserver/ns_parsequery.man,
	doc/src/naviserver/ns_parsetime.man,
	doc/src/naviserver/ns_pause.man, doc/src/naviserver/ns_perm.man,
	doc/src/naviserver/ns_pngsize.man,
	doc/src/naviserver/ns_purgefiles.man,
	doc/src/naviserver/ns_puts.man,
	doc/src/naviserver/ns_queryexists.man,
	doc/src/naviserver/ns_queryget.man,
	doc/src/naviserver/ns_querygetall.man,
	doc/src/naviserver/ns_quotehtml.man, doc/src/naviserver/ns_rand.man,
	doc/src/naviserver/ns_register.man,
	doc/src/naviserver/ns_register_adp.man,
	doc/src/naviserver/ns_register_adptag.man,
	doc/src/naviserver/ns_register_fastpath.man,
	doc/src/naviserver/ns_register_filter.man,
	doc/src/naviserver/ns_register_proc.man,
	doc/src/naviserver/ns_register_proxy.man,
	doc/src/naviserver/ns_register_trace.man,
	doc/src/naviserver/ns_register_url2file.man,
	doc/src/naviserver/ns_requestauthorize.man,
	doc/src/naviserver/ns_resume.man, doc/src/naviserver/ns_return.man,
	doc/src/naviserver/ns_returnerror.man,
	doc/src/naviserver/ns_rollfile.man,
	doc/src/naviserver/ns_runonce.man, doc/src/naviserver/ns_rwlock.man,
	doc/src/naviserver/ns_schedule.man,
	doc/src/naviserver/ns_schedule_daily.man,
	doc/src/naviserver/ns_schedule_proc.man,
	doc/src/naviserver/ns_schedule_weekly.man,
	doc/src/naviserver/ns_sema.man, doc/src/naviserver/ns_sendmail.man,
	doc/src/naviserver/ns_server.man,
	doc/src/naviserver/ns_serverpath.man,
	doc/src/naviserver/ns_serverrootproc.man,
	doc/src/naviserver/ns_set.man, doc/src/naviserver/ns_setexpires.man,
	doc/src/naviserver/ns_setformencoding.man,
	doc/src/naviserver/ns_setprivileges.man,
	doc/src/naviserver/ns_sha1.man,
	doc/src/naviserver/ns_shortcut_filter.man,
	doc/src/naviserver/ns_shutdown.man, doc/src/naviserver/ns_sleep.man,
	doc/src/naviserver/ns_sls.man, doc/src/naviserver/ns_sockaccept.man,
	doc/src/naviserver/ns_sockblocking.man,
	doc/src/naviserver/ns_sockcallback.man,
	doc/src/naviserver/ns_sockcheck.man,
	doc/src/naviserver/ns_socketpair.man,
	doc/src/naviserver/ns_socklisten.man,
	doc/src/naviserver/ns_socklistencallback.man,
	doc/src/naviserver/ns_socknonblocking.man,
	doc/src/naviserver/ns_socknread.man,
	doc/src/naviserver/ns_sockopen.man,
	doc/src/naviserver/ns_sockselect.man,
	doc/src/naviserver/ns_striphtml.man,
	doc/src/naviserver/ns_symlink.man,
	doc/src/naviserver/ns_tagelement.man,
	doc/src/naviserver/ns_tagelementset.man,
	doc/src/naviserver/ns_thread.man, doc/src/naviserver/ns_time.man,
	doc/src/naviserver/ns_tmpnam.man,
	doc/src/naviserver/ns_truncate.man,
	doc/src/naviserver/ns_upload_stats.man,
	doc/src/naviserver/ns_url2file.man,
	doc/src/naviserver/ns_urlcharset.man,
	doc/src/naviserver/ns_urldecode.man,
	doc/src/naviserver/ns_urlencode.man,
	doc/src/naviserver/ns_uudecode.man,
	doc/src/naviserver/ns_uuencode.man, doc/src/naviserver/ns_write.man,
	doc/src/naviserver/ns_writecontent.man,
	doc/src/naviserver/ns_writer.man, doc/src/naviserver/nsv.man,
	doc/src/ns_addrbyhost.man, doc/src/ns_adp.man,
	doc/src/ns_adp_abort.man, doc/src/ns_adp_append.man,
	doc/src/ns_adp_argc.man, doc/src/ns_adp_argv.man,
	doc/src/ns_adp_bind_args.man, doc/src/ns_adp_break.man,
	doc/src/ns_adp_ctl.man, doc/src/ns_adp_debug.man,
	doc/src/ns_adp_dir.man, doc/src/ns_adp_dump.man,
	doc/src/ns_adp_eval.man, doc/src/ns_adp_exception.man,
	doc/src/ns_adp_include.man, doc/src/ns_adp_info.man,
	doc/src/ns_adp_mime.man, doc/src/ns_adp_mimetype.man,
	doc/src/ns_adp_parse.man, doc/src/ns_adp_puts.man,
	doc/src/ns_adp_register.man, doc/src/ns_adp_registeradp.man,
	doc/src/ns_adp_registerproc.man, doc/src/ns_adp_registertag.man,
	doc/src/ns_adp_return.man, doc/src/ns_adp_safeeval.man,
	doc/src/ns_adp_stats.man, doc/src/ns_adp_tell.man,
	doc/src/ns_adp_trunc.man, doc/src/ns_after.man,
	doc/src/ns_atclose.man, doc/src/ns_base64decode.man,
	doc/src/ns_base64encode.man, doc/src/ns_browsermatch.man,
	doc/src/ns_cancel.man, doc/src/ns_chan.man, doc/src/ns_charsets.man,
	doc/src/ns_checkurl.man, doc/src/ns_choosecharset.man,
	doc/src/ns_cond.man, doc/src/ns_conn.man, doc/src/ns_conncptofp.man,
	doc/src/ns_cookiecharset.man, doc/src/ns_cookietime.man,
	doc/src/ns_critsec.man, doc/src/ns_crypt.man,
	doc/src/ns_encodingforcharset.man, doc/src/ns_encodingfortype.man,
	doc/src/ns_env.man, doc/src/ns_event.man, doc/src/ns_filestat.man,
	doc/src/ns_findset.man, doc/src/ns_fmttime.man,
	doc/src/ns_formfieldcharset.man, doc/src/ns_ftruncate.man,
	doc/src/ns_getform.man, doc/src/ns_getformfile.man,
	doc/src/ns_geturl.man, doc/src/ns_gifsize.man,
	doc/src/ns_gmtime.man, doc/src/ns_guesstype.man,
	doc/src/ns_hashpath.man, doc/src/ns_hostbyaddr.man,
	doc/src/ns_hrefs.man, doc/src/ns_htmlselect.man,
	doc/src/ns_http.man, doc/src/ns_httpget.man,
	doc/src/ns_httpopen.man, doc/src/ns_httppost.man,
	doc/src/ns_httptime.man, doc/src/ns_imgmime.man,
	doc/src/ns_imgsize.man, doc/src/ns_imgtype.man, doc/src/ns_info.man,
	doc/src/ns_internalredirect.man, doc/src/ns_issmallint.man,
	doc/src/ns_job.man, doc/src/ns_jpegsize.man, doc/src/ns_kill.man,
	doc/src/ns_library.man, doc/src/ns_localtime.man,
	doc/src/ns_locationproc.man, doc/src/ns_mktemp.man,
	doc/src/ns_moduleload.man, doc/src/ns_modulepath.man,
	doc/src/ns_mutex.man, doc/src/ns_normalizepath.man,
	doc/src/ns_pagepath.man, doc/src/ns_paren.man,
	doc/src/ns_parseargs.man, doc/src/ns_parseheader.man,
	doc/src/ns_parsehttptime.man, doc/src/ns_parsequery.man,
	doc/src/ns_parsetime.man, doc/src/ns_pause.man, doc/src/ns_perm.man,
	doc/src/ns_pngsize.man, doc/src/ns_purgefiles.man,
	doc/src/ns_puts.man, doc/src/ns_queryexists.man,
	doc/src/ns_queryget.man, doc/src/ns_querygetall.man,
	doc/src/ns_quotehtml.man, doc/src/ns_rand.man,
	doc/src/ns_register.man, doc/src/ns_register_adp.man,
	doc/src/ns_register_adptag.man, doc/src/ns_register_fastpath.man,
	doc/src/ns_register_filter.man, doc/src/ns_register_proc.man,
	doc/src/ns_register_proxy.man, doc/src/ns_register_trace.man,
	doc/src/ns_register_url2file.man, doc/src/ns_requestauthorize.man,
	doc/src/ns_resume.man, doc/src/ns_rollfile.man,
	doc/src/ns_runonce.man, doc/src/ns_rwlock.man,
	doc/src/ns_schedule.man, doc/src/ns_schedule_daily.man,
	doc/src/ns_schedule_proc.man, doc/src/ns_schedule_weekly.man,
	doc/src/ns_sema.man, doc/src/ns_sendmail.man, doc/src/ns_server.man,
	doc/src/ns_serverpath.man, doc/src/ns_serverrootproc.man,
	doc/src/ns_set.man, doc/src/ns_setexpires.man,
	doc/src/ns_setformencoding.man, doc/src/ns_setprivileges.man,
	doc/src/ns_sha1.man, doc/src/ns_shortcut_filter.man,
	doc/src/ns_shutdown.man, doc/src/ns_sleep.man,
	doc/src/ns_sockaccept.man, doc/src/ns_sockblocking.man,
	doc/src/ns_sockcallback.man, doc/src/ns_sockcheck.man,
	doc/src/ns_socketpair.man, doc/src/ns_socklisten.man,
	doc/src/ns_socklistencallback.man, doc/src/ns_socknonblocking.man,
	doc/src/ns_socknread.man, doc/src/ns_sockopen.man,
	doc/src/ns_sockselect.man, doc/src/ns_striphtml.man,
	doc/src/ns_symlink.man, doc/src/ns_tagelement.man,
	doc/src/ns_tagelementset.man, doc/src/ns_thread.man,
	doc/src/ns_time.man, doc/src/ns_tmpnam.man, doc/src/ns_truncate.man,
	doc/src/ns_upload_stats.man, doc/src/ns_url2file.man,
	doc/src/ns_urlcharset.man, doc/src/ns_urldecode.man,
	doc/src/ns_urlencode.man, doc/src/ns_uudecode.man,
	doc/src/ns_uuencode.man, doc/src/ns_writecontent.man,
	doc/src/ns_writer.man, doc/src/nsv.man, doc/src/tcl-lib-file.man,
	doc/src/tcl-lib-nstrace.man, doc/src/tcl-libraries.man, doc/src/tcl-
	overview.man:
	Updated documentation with correct vewrsion, moved around files and
	split generic docs and API commands into separate directories.

2009-03-08 12:12 -0400  Vlad Seryakov  <vseryakov@gmail.com>  (4b0584c5e64b)

	* nsproxy/nsproxylib.c:
	Added call to nsproxy Tcl_FindExecutable(argv[0]); to keep Tcl 8.5
	from crashing in thread related initialization.

2009-02-24 01:22 +0000  Stephen Deasey  <sdeasey@gmail.com>  (43cbf8f4f8ae)

	* tests/compat.test: new file.
	* tests/compat.test:
	Add test for ns_cp command

2009-02-18 16:17 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (db905915ea2a)

	* nsperm/htaccess.tcl: new file.
	* doc/src/module-nsperm.man, doc/src/ns_perm.man, nsperm/Makefile,
	nsperm/htaccess.tcl, nsperm/nsperm.c:
	Added .htaccess mode for nsperm module. Similar to Apache but only
	to allow access. This is disabled by default, can be enabled in the
	ns/server/servername/module/nsperm section. Doc is updated. In this
	version only current directory is checked for .htaccess file.

2009-02-18 18:00 +0000  Stephen Deasey  <sdeasey@gmail.com>  (8008af67c9c2)

	* ChangeLog: deleted file.
	* ChangeLog:
	Fix bad merge changeset 77a71927a2a3

2009-02-18 11:56 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (77a71927a2a3)

	* Fixed broken nsperm module

2009-02-18 11:55 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (9852a47876ca)

	* ChangeLog, nsperm/nsperm.c:
	Fix broken nsperm module

2009-02-18 16:47 +0000  Stephen Deasey  <sdeasey@gmail.com>  (5f4c62b0fa91)

	* Makefile, README:
	Fix default make target (all)

2009-02-18 16:41 +0000  Stephen Deasey  <sdeasey@gmail.com>  (99ae74fc80c7)

	* ChangeLog: deleted file.
	* ChangeLog, Makefile:
	Auto-generate ChangeLog for dist target

2009-02-18 11:21 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (a6954c8918c1)

	* NEWS:
	Minor additions to the NEWS about recent changes

2009-02-17 16:22 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (2647625a8f86)

	* ChangeLog, nsd/range.c:
	* nsd/range.c: Be more RFC compliant regarding HTTP date in If-Range
	header

2009-02-05 16:21 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (2494b5886578)

	* ChangeLog, nsd/range.c:
	* nsd/range.c: Check If-Range: header first and return the whole
	content if it was changed before checking ranges

2009-02-04 18:44 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (26dfae686727)

	* ChangeLog, nsd/fastpath.c, nsd/nsd.h, nsd/range.c:
	* nsd/nsd.h:
	        * nsd/fastpath.c: Added struct stat in the Conn struct to be reused by
	everyone. This will save extra stat call and i used in range.c to
	check last modified time

	 * nsd/range.c: Check for If-Range: header and return the whole file
	if it was changed

2009-02-04 21:49 +0000  Stephen Deasey  <sdeasey@gmail.com>  (3e1b132e7f42)

	* Makefile:
	Add 'help' target to Makefile with common usage hints

2009-02-04 21:49 +0000  Stephen Deasey  <sdeasey@gmail.com>  (be653f56dd67)

	* NEWS:
	Add some missing NEWS

2009-02-04 21:49 +0000  Stephen Deasey  <sdeasey@gmail.com>  (131a9f67c01b)

	* README:
	Update the README with new location of source code etc.

2008-03-20 23:18 +0000  Stephen Deasey  <sdeasey@gmail.com>  (37c7bfb09160)

	* .hgignore: new file.
	* .hgignore:
	Add .hgignore

2008-12-21 15:21 -0500  Vlad Seryakov  <vseryakov@gmail.com>  (79298e942fcc)

	* ChangeLog, nsd/mimetypes.c:
	nsd/mime.c: Added .flv extension into default MIME types

2008-11-24 22:53 +0000  Stephen Deasey  <sdeasey@gmail.com>  (5dde6a8da0f8)

	* nsproxy/nsproxylib.c:
	nsproxy: don't access interp result directly

2008-11-24 00:25 +0000  Stephen Deasey  <sdeasey@gmail.com>  (931b474ecd20)

	* nsd/nsd.h, nsd/tclinit.c, nsd/tclthread.c, tests/ns_thread.test:
	Manage lifetime of tcl synchronization objects without trampling
	memory

	The old scheme with both anonymous and named locks was makinf it
	difficult to know when to cleanup. The code was broken -- some
	memory corruption and some cases missed.

	With this change all locks are named, with anon locks receiving an
	auto- generated name. Also, we no longer destroy locks because we
	can't do it safely, and there seems little point.

2008-11-18 08:44 +0000  Zoran Vasiljevic  <zv@archiware.com>  (5e395980f472)

	* ChangeLog, nsproxy/nsproxylib.c:
	nsproxy: fix race-condition that could lead to starting more than
	one reaper thread

2008-11-08 22:39 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (15bbea4e4511)

	* ChangeLog, nsd/connio.c:
	Set the NS_CONN_SENT_LAST_CHUNK flag when last chunk is actually
	sent

	Fixes nsphp bug with chunked encoding and headers-only response
	triggered by PHP ext function.

2008-11-08 03:31 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (7d823989ff98)

	* nsd/sockfile.c:
	Change a stray SOCKET to Ns_Sock in Ns_SockSendFileBufs

2008-11-07 19:01 +0000  Stephen Deasey  <sdeasey@gmail.com>  (6ddcec6f75d0)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/nsd.h, nsd/sockfile.c,
	nssock/nssock.c:
	Drivers can now leave Ns_Driver.sendFileProc unimplemented - it is
	an optimization only

	The sendProc will be called as necessary to send files.

	Ns_SockSendFileBufsIndirect not exported.

	Ns_SockSendFile etc. now take an Ns_Sock rather than a plain file
	descriptor. This is kind of dissapointing because it breaks the
	symetry with Ns_SockSendBufs etc., so this call can only be used
	with connection sockets, not sockets in general. However, the
	Ns_Sock context is needed in the fallback case to pass on to the
	drivers Ns_DriverSend proc, and there looks like no other option.

2008-11-07 18:26 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (6935f2abe6fd)

	* ChangeLog, tcl/fastpath.tcl:
	Revert 0.0.0.0 fix back because it is bad and a security hole

2008-11-07 03:12 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (ffd7a04b7d0c)

	* ChangeLog, tcl/fastpath.tcl:
	Check for 0.0.0.0 address in nssock and generated urls, use Host:
	header instead

2008-10-30 16:58 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a66d83bf91a8)

	* ChangeLog, NEWS, configure.in:
	Change version to 4.99.3 to distinguish between incompatible
	versions

2008-10-22 20:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5eb0c2b251ab)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/driver.c:
	Remove Ns_ConnSockContext, Ns_ConnDriverContext; fix check on
	SockAccept return code

	Ns_Sock already exposes the socket and driver contexts.

2008-10-22 04:23 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f0c2f050e05d)

	* ChangeLog, include/ns.h, nsd/driver.c:
	Add NS_DRIVER_ACCEPT_QUEUE to queue on accept; allocate empty
	request to prevent crash

2008-10-22 03:14 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (515dfc8577e2)

	* ChangeLog, include/ns.h, nsd/conn.c:
	Add Ns_ConnSockContext, Ns_ConnDriverContext

2008-10-21 22:46 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (06ee949d1a6a)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/return.c, nssock/nssock.c:
	Add Ns_ConnContentSize; depreciate Ns_ConnSetRequiredHeaders;
	reformat ns.h

2008-10-20 01:06 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (835bab28a989)

	* ChangeLog, include/ns.h, nscp/nscp.c, nsd/adprequest.c, nsd/auth.c,
	nsd/conn.c, nsd/driver.c, nsd/filter.c, nsd/form.c, nsd/nsd.h,
	nsd/op.c, nsd/progress.c, nsd/queue.c, nsd/request.c, nsd/tclmisc.c,
	nsd/url2file.c, nsd/urlspace.c:
	Add Ns_DriverRequestProc callback for non-HTTP drivers; return
	binary from ns_conn content

	The result is the same as for regular filters but this is optional.
	No need to hack request anymore, it seemed very weird. All the code
	that handles request is now checking for not NULL values before
	using, mostly url space routines.

	Now, it is valid to have request structure NULL values, nothing will
	be called, not handlers will be invoked.

	Non HTTP drivers will have to provide requestProc, otherwise nothing
	will happen and nobody will notice this driver.

2008-10-15 06:21 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (548fe4d288e6)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/nsd.h, nsd/progress.c,
	nsd/queue.c, nsd/request.c, nsd/urlopen.c, nslog/nslog.c,
	nssock/nssock.c:
	Reintroduced Ns_DriverSetRequest as the way to set request by the
	non-HTTP driver

	This is questionable but at this moment i do not have other
	solution.

	Also added new NS_DRIVER_NOPARSE flag to tell the driver no to parse
	incoming data. This way driver thread still read data from the
	socket into its own buffers instead of a driver to allocate extra
	memory to keep data.

	* include/nsd.h:
	* nsd/urlopen.c:
	* nsd/progress.c:
	* nsd/queue.c:
	* nsd/request.c: Changes public function Ns_ParseRequest, now it
	accepts pointer to Ns_Request and fills it with values, returns
	NS_OK or NS_ERROR.

	Changed Request structure to include Ns_Reqeust instead of pointer:
	this saves extra Alloc/Free and because this is required structure
	we avoid possible access to its fields if it is NULL.

2008-10-15 03:05 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (8507e0926a52)

	* ChangeLog, include/ns.h, nsd/nsd.h:
	Update Ns_Sock/Sock structures to expose sockaddr_in sa, so drivers
	can update it

	This is the case for UDP drivers.

2008-10-08 22:06 +0100  Stephen Deasey  <sdeasey@gmail.com>  (48fd8359b818)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/nsd.h, nsd/tclvar.c,
	tests/ns_nsv.test:
	Fixup the new nsv C api to not require a conn

	So, Ns_ConnNsvSet(char *array, char *key, char *value) becomes
	Ns_VarSet(char *server, char *array, char *key, char *value) etc.

	Looks like this was just an accident of the way the nsphp module was
	implemented which only support an ns_register_proc-like api.

	Also, optimize the array lookup for Tcl commands.

2008-10-08 21:57 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7f65e5af40e6)

	* ChangeLog, nsd/tclset.c:
	Untabify and reformat nsd/tclset.c

2008-10-08 21:51 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1cbaf1acc094)

	* ChangeLog, include/ns.h, nsd/nsd.h, nsd/tclinit.c, nsd/tclset.c,
	tests/ns_set.test:
	Remove the -share option from ns_set

2008-10-08 21:42 +0100  Stephen Deasey  <sdeasey@gmail.com>  (33ad75b7c257)

	* nsd/tclshare.c: deleted file.
	* ChangeLog, nsd/Makefile, nsd/nsd.h, nsd/tclcmds.c, nsd/tclinit.c,
	nsd/tclshare.c:
	Remove the old ns_share command

2008-10-08 21:32 +0100  Stephen Deasey  <sdeasey@gmail.com>  (308a6cc56ffc)

	* ChangeLog, nsd/nsd.h, nsd/tclcmds.c, nsd/tclinit.c, nsd/tclvar.c,
	tcl/compat.tcl:
	Remove the old ns_var command; add a simple compatibilty wrapper in
	Tcl which uses nsv

2008-10-08 21:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3b3bd42fd490)

	* ChangeLog, include/ns.h, nsd/connio.c, nsd/driver.c, nsd/nsd.h,
	nsd/sock.c, nsd/sockfile.c, nssock/nssock.c:
	Add 'flags' arguments to the Send and Recv driver callbacks

	These are passed directly to the underlying recv() etc. system call.

2008-10-08 21:18 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a0f4e648d8fc)

	* ChangeLog, include/ns.h, nsd/sock.c, nsd/sockfile.c:
	Cast away some CONSTness in Ns_SetVec

2008-10-08 21:14 +0100  Stephen Deasey  <sdeasey@gmail.com>  (4534ad111282)

	* ChangeLog, doc/src/mann/ns_register_adp.man, include/ns.h,
	nsd/adpcmds.c, nsd/adpeval.c, nsd/adprequest.c, nsd/compress.c,
	nsd/conn.c, nsd/connio.c, nsd/nsd.h, nsd/queue.c, nsd/server.c,
	sample-config.tcl.in, tcl/compat.tcl, tests/ns_adp_compress.test,
	tests/ns_conn.test, tests/test.nscfg,
	tests/testserver/modules/testhttp.tcl,
	tests/testserver/pages/ns_adp_compress.adp:
	Add new Ns_CompressBufsGzip routine which can compress a stream,
	handling multiple buffers with each write

	* nsd/queue.c:
	* nsd/conn.c: ns_conn compress is now available to request/dissable
	compression for each request. Use this in preference to ns_adp_ctl
	gzip.

	* nsd/nsd.h:
	* nsd/server.c:
	* nsd/connio.c: Move the ADP compression code into Ns_ConnWriteVChars
	so that it is available for ns_return etc. Upgrade it to handle
	streaming and chunking.

	* nsd/tclcompat.tcl:
	* doc/src/man/mann/ns_register_adp.man
	* nsd/adpcmds.c: Remove the gzip option from some of the ADP commands.
	(these were a recent naviserver only thing).

	* nsd/adpeval.c:
	* nsd/adprequest.c: ADP pages are now also compressed when streaming.

	* sample-config.tcl.in: Add the compression params to config.

	* tests/testserver/modules/testhttp.tcl: Add new -getbinary option
	to nstest_http which returns the body as a list of hex characters.

	* tests/test.nscfg:
	* tests/ns_adp_compress.test:
	* tests/ns_conn.test:
	* tests/testserver/pages/ns_adp_compress.adp: Add extra tests for
	compressed streaming/chunking etc. and ns_return/ns_write.

2008-10-08 20:59 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1241cafb20e4)

	* ChangeLog, include/ns.h, nsd/connio.c, nsd/sock.c:
	Add Ns_SumVec utility routine and use it

2008-10-08 20:55 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3acd5f6b9cca)

	* ChangeLog, nsd/connio.c:
	Re-add some missing code to Ns_ConnSend which caused it break it's
	promise to send everything

2008-10-05 19:40 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9e15949aed91)

	* ChangeLog, include/nsthread.h, nslog/nslog.c:
	Remove O_LARGEFILE because configure will set FILE_OFFSET_BITS
	automatically

2008-10-05 18:03 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (3ce6781cc301)

	* ChangeLog, include/nsthread.h:
	OS X does not have O_LARGEFILE

2008-10-03 22:25 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a8e8873ca842)

	* ChangeLog, configure.in, nsd/sockfile.c:
	Add Linux native sendfie implementation

2008-10-03 00:32 +0100  Stephen Deasey  <sdeasey@gmail.com>  (40e45af87493)

	* ChangeLog, nsd/connio.c:
	Reorder the functions in connio.c; no code change

2008-10-02 23:39 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8ddc7ee6d880)

	* ChangeLog, nsd/connio.c:
	Clarify Ns_ConnWriteVData with Ns_SetVec

2008-10-02 23:31 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c1c0c9cb3aad)

	* ChangeLog, include/ns.h, nsd/driver.c, nssock/nssock.c:
	Pass timeouts to driver callbacks explicitly

	In the future non-blocking writes may be made if no timeout is
	given.

2008-10-02 23:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (77b049864687)

	* ChangeLog, include/ns.h, nsd/connio.c, nsd/sock.c:
	Ns_SockSendBufs now handles buffer shuffling for UIO_MAXIOV

	Ns_ConnSend now much simpler. Use Ns_SetVec and new Ns_ResetVec for
	clarity.

2008-10-02 02:56 +0100  Stephen Deasey  <sdeasey@gmail.com>  (e383b6034ff9)

	* ChangeLog, include/ns.h, nsd/connio.c, nsd/nsd.h, nsd/range.c,
	nsd/return.c, nsd/sockfile.c, tests/http.test,
	tests/http_byteranges.test:
	Expose the SendFile capability via new Ns_ConnSendFileVec(); use it
	for range requests

2008-10-02 02:36 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8ceb12c361c8)

	* ChangeLog, configure.in, include/nsthread.h, nssock/nssock.c,
	sample-config.tcl.in, tests/test.nscfg:
	Support the TCP_DEFER_ACCEPT option on the listen socket for Linux

	This causes the listen socket to return a newly connected socket
	only when data has also arrived, not when the initial TCP hanshake
	is complete. The kernel can also save one packet round trip time.
	The first effect saves a trip through the poll loop and seems
	faster.

	This also uses the second mode of the accept callback which is
	essential for UDP sockets. So it seems generally useful.

	Unfortunately the Linux implementation is currently broken in that
	it doesn't handle timeouts correctly so this is turned off by
	default :-(

2008-10-02 01:59 +0100  Stephen Deasey  <sdeasey@gmail.com>  (065db80c1c2b)

	* ChangeLog, nsd/conn.c, nsd/connio.c:
	Only set byterange headers if the programmer has not explicitly
	specified a length

	i.e. they are writing the data in pieces, but they are not
	'streaming'.

2008-10-02 01:49 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8c80065c429f)

	* ChangeLog, nsd/driver.c, sample-config.tcl.in, tests/all.tcl:
	Create new 'DriverDebug' logging level to replace numerous driver
	debugging toggles

	Limit logged content to 100 bytes. Turn it on by default when
	running tests.

2008-10-02 01:19 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f8492b15df6f)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/driver.c, nsd/nsd.h,
	nsd/queue.c, nsd/request.c, nsd/return.c, tests/ns_conn.test:
	Remove the NS_DRIVER_* options and the code that handles them

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/driver.c: Remove the NS_DRIVER_* options and the code that
	handles them. Should be possible to achieve the same effect with the
	new driver callbacks.

	* nsd/conn.c:
	* nsd/queue.c:
	* nsd/return.c:
	* tests/ns_conn.test: Remove the weird responseVersion string.
	Although it's called 'version' it actually includes the "HTTP/"
	string, which is surprising when it is being nulled with a literal
	0...

	* nsd/request.c: Remove the weird protocol-agnostic versionstring
	and it's parsing. The confusion doesn't seem worth it.

2008-10-01 15:39 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3b94f456f9da)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/nsd.h, nssock/nssock.c:
	Add new Ns_DriverAcceptProc callback which is responsible for
	accepting incoming socket connections from the driver listen socket

	It can opperate in two modes: in the first it accepts and returns
	the new socket (same as before), in the second it tells the driver
	thread it believes data is ready to be read from the socket. In this
	case the driver thread will skip pushing the socket onto the read
	queue and attempt the read immediately. This saves a trip throught
	the poll loop.

	The second mode could be used by UDP sockets where there is no
	accept phase.

2008-10-01 15:29 +0100  Stephen Deasey  <sdeasey@gmail.com>  (eab55a709897)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/nsd.h, nssock/nssock.c:
	Add new Ns_DriverListenProc callback which is responsible for opening
	the listening driver socket at server startup

2008-10-01 15:22 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1707e74ccb26)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/nsd.h, nssock/nssock.c:
	Convert the Ns_DriverProc callback into 5 individual callbacks

	New callbacks: Ns_DriverRecvProc, Ns_DriverSendProc,
	Ns_DriverSendFileProc, Ns_DriverKeepProc, and Ns_DriverCloseProc.

2008-09-11 22:12 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3718ac2bfe2f)

	* nsd/sockfile.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/sockfile.c:
	Add a sendfile() workalike

	* include/ns.h:
	* nsd/Makefile:
	* nsd/sockfile.c: Add a sendfile() workalike. Ns_SockSendFileBufs() is
	a library routine for nssock (or other interested driver) to call
	which sends the given file out the sock. It follows the Solaris
	style of sendfilev() and so takes an arbitrary mixture of
	memory/file offset/length pairs. Behind the scenes platform specific
	versions will use the native sendfile() implementation, although
	atm. there is only a fallback:

	Ns_SockSendFileBufsIndirect() is called if there is no native
	sendfile() implementation. It uses pread() and sendmsg(). The reason
	it is public is that drivers which do some transformation on the
	stream before sending, such as nsssl, can call this directly passing
	their SockSend callback.

	Ns_SetFileVec() is a handy utility analogous to Ns_SetVec() and
	Ns_ResetFileVec() is used to update the current position after a
	partial send.

	What's required now is a change in Ns_RegisterDriver etc. to add a
	new SendFile callback, all the drivers need updating to that new
	API, and native versions and related autoconf checks for Linux,
	BSD/OSX, Solaris, Windows (TransmitFile?) added. Then the conn
	routines can call NsDriverSendFile()...

2008-09-11 21:53 +0100  Stephen Deasey  <sdeasey@gmail.com>  (989f90615943)

	* ChangeLog, include/ns.h, nsd/sock.c:
	Add handy Ns_SetVec routine for manipulating struct iovec

2008-08-29 21:43 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d2bf969e631f)

	* ChangeLog, nsd/tclmisc.c:
	Revert ns_filestat to not raise exception and use native system call

2008-08-29 01:41 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f4e29293efe2)

	* nsd/range.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/conn.c, nsd/connio.c,
	nsd/driver.c, nsd/fastpath.c, nsd/nsd.h, nsd/range.c, nsd/return.c,
	nsd/returnresp.c, tests/http_byteranges.test:
	Cleanup and move byte-range code to own file

	* nsd/nsd.h:
	* nsd/Makefile:
	* nsd/fastpath.c:
	* nsd/range.c: Cleanup and move byte-range code to own file. Fix bug
	where numerous ranges in a request caused a dstring to be
	reallocated, invalidating the pointers we had into it.

	* nsd/connio.c: The ConnSend routines now no longer responsible for
	setting the length header. The old way meant that the passed length
	dictated the length of the whole file you were to send, but that's
	exactly what the Ns_ConnReturnF* routines do. Now we can send pieces
	of files in multiple goes. Also, remove the call to the writer
	thread from this low-level routine. Don't switch to chunking mode
	when streaming is requested and the mime-type is
	multipart/byteranges: they are self delimited and we may need to
	send them in muliple chunks.

	* nsd/driver.c: Need to set the length in the writer explicitly now
	that the low-level Ns_ConnSendFile does not.

	* include/ns.h:
	* nsd/conn.c: Add Ns_ConnUnmodifiedSince().

	* nsd/return.c: No longer send the 'accept-ranges' header with all
	responses. Generate it only from the range faspath. Range support
	now available to more public Ns_ConnReturn* routines.

	* nsd/returnresp.c: Had to remove a call to Ns_ConnReturnData here
	from Ns_ConnReturnStatus, as this is called in the error handling
	path of RangeReturn and would result in an infinite loop.

	* tests/http_byteranges.test: Add a couple of tests for ranges on
	larger files to exercise the file descriptor path rather than the in
	memory mmap or cache path. Unfortunately, this actually triggers the
	writer thread and this has no support of ranges, which I guess is
	where it's actually most needed. TODO...

2008-08-28 23:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1a11103a8067)

	* ChangeLog, configure.in, nsd/fastpath.c, nsd/nsd.h, nsd/rollfile.c,
	nsd/tclmisc.c:
	Remove calls to Tcl's VFS routines within the fastpath, as it adds a
	lot of noise

	For starkit users there is a new nsvfs module which provides pure
	Tcl VFS access to the file system for the fastpath, and wrappers for
	ns_return and ns_respond.

	This is actually more flexible: you can wrapp access to /admin*, for
	bundled starkit files, and native access to /fast*, for user added
	content.

	* nsd/rollfile.c:
	* nsd/tclmisc.c: Replace calls to the NsFast* wrappers with straight
	Tcl_* calls.

2008-08-28 23:10 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3024fab8cc00)

	* ChangeLog, configure.in, include/nsthread.h, nsd/fastpath.c,
	nsd/log.c, nsd/nsd.h:
	Use autoconf's AC_SYS_LARGEFILE macro to provide large file support

	With this system, the off_t and size_t types etc. are defined to be
	64bit wide on 32bit machines, so the normal calls such as stat()
	work for large files, resulting in cleaner code.

	* nsd/nsd.h:
	* nsd/log.c:
	* nsd/fastpath.c: Remove various #ifdef'ery.

2008-08-28 22:50 +0100  Stephen Deasey  <sdeasey@gmail.com>  (01548743e80b)

	* ChangeLog, nsd/tcltime.c:
	Use simple pointer copying inplace of memcpy

2008-08-28 22:30 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5491c891b4b5)

	* include/nsconfig.h.in: deleted file.
	* ChangeLog, include/nsconfig.h.in:
	Remove autogenerated file

2008-08-28 21:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (b9c73009e6c1)

	* ChangeLog, nsdb/dbdrv.c, nsdb/dbtcl.c, nsdb/doc/mann/ns_db.man,
	nsdb/nsdb.h:
	nsdb: add new API call rowcount and function Ns_DbGetRowCount to
	return number of affected rows

	All driver have this call implemented differently and it will not
	break old application but new code can use it.

2008-08-27 19:49 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5bfb1de22038)

	* ChangeLog, nsd/driver.c, nsd/nsd.h:
	Restructured driver polling code, use PollData structure to keep
	poll-related fields together

2008-08-27 01:59 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (913469dff622)

	* ChangeLog, nsd/tcltime.c:
	Fix the bug introduced earlier by using memcpy for silencing
	warnings

2008-08-26 22:31 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (49a0ab446456)

	* ChangeLog, nsd/driver.c, nsd/nsd.h:
	Update driver to run in separate threads, port from AOLserver 4.5

	Port some driver code from AOLserver 4.5 into our driver structure
	such as:

	- create separate thread for each driver
	- have driver thread create and shutdown its sockets and
	writer/spooler threads

	I made many tests comparing AS 4.5 driver and our based on 4.0.11
	driver and every time is see old code is more stable and fatser.

	New AS 4.5 driver logic seems very complicated and with pretty heavy
	tests it even fails to sustain the load.

	My latest test with LiteSpeed Web server which claims to be even
	faster than lighttpd shows that for simple small files with fastpath
	enabled we perform almost the same as LiteSpeed, a little bit slower
	but not much. Having separate threads for each driver made it a tiny
	little bit faster which just proves that it is not bad to have each
	driver in different threads.

2008-08-25 02:52 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f023e0d90a51)

	* ChangeLog, nsd-config.tcl, nsd/driver.c:
	Add new logging flag to driver for logging config errors

2008-08-25 01:54 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (1599cd783d2d)

	* sample-config.tcl.in:
	Update sample-config.tcl with fastpath actual default values

2008-08-24 21:30 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (1f805de9bdce)

	* ChangeLog, contrib/examples/upload.tcl, contrib/examples/writer.tcl,
	include/ns.h, nsd/adprequest.c, nsd/connio.c, nsd/driver.c,
	nsd/tclvar.c:
	Mark the connection which sent data via writer thread with specal
	flag which wil be honored by NsAdpFlush

	Updated examples with better description and fix writer example.

2008-08-24 17:59 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9c298678a307)

	* Makefile, include/nsconfig.h.in:
	Put install-examples back which was lost and breaks make install

2008-08-23 23:08 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (693e144caa36)

	* ChangeLog, nsd/driver.c, nsd/nsd.h, nsd/tcltime.c:
	Honor keep-alive flag in WriterThread; silence some compiler
	warnings

2008-08-23 22:21 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ee7b42abcc56)

	* doc/src/footer.inc, doc/src/header.inc, doc/src/man.css,
	nsdb/doc/mann/ns_buildsqldate.man, nsdb/doc/mann/ns_db.man,
	nsdb/doc/mann/ns_dbquotevalue.man, nslog/doc/mann/ns_accesslog.man,
	nsproxy/doc/mann/ns_proxy.man, version_include.in: new file.
	* doc/src/mann/ns_accesslog.man, doc/src/ns_buildsqldate.man,
	doc/src/ns_db.man, doc/src/ns_dbquotename.man,
	doc/src/ns_dbquotevalue.man, doc/src/ns_localsqltimestamp.man,
	doc/src/ns_proxy.man, doc/src/nsd.css, doc/src/version_include.in:
	deleted file.
	* ChangeLog, Makefile, configure.in, doc/src/footer.inc,
	doc/src/header.inc, doc/src/man.css, doc/src/mann/ns_accesslog.man,
	doc/src/ns_buildsqldate.man, doc/src/ns_db.man,
	doc/src/ns_dbquotename.man, doc/src/ns_dbquotevalue.man,
	doc/src/ns_localsqltimestamp.man, doc/src/ns_proxy.man,
	doc/src/nsd.css, doc/src/version_include.in,
	nsdb/doc/mann/ns_buildsqldate.man, nsdb/doc/mann/ns_db.man,
	nsdb/doc/mann/ns_dbquotevalue.man, nslog/doc/mann/ns_accesslog.man,
	nsproxy/doc/mann/ns_proxy.man, version_include.in:
	Convert some more documentation to new doctools syntax; fix cross-
	references; make module docs per-module

2008-08-19 04:03 +0100  Stephen Deasey  <sdeasey@gmail.com>  (977da2f22618)

	* ChangeLog, nsd/adpeval.c, nsd/fastpath.c, nsd/init.c, nsd/modload.c,
	nsd/nsd.h:
	fastpath: fix info leak with file name -> stat -> cache lookup

	The intermediate stage of using the inode as the cache key is not
	reliable, as when the file is replaced within the granularity of the
	mtime an inode may be assigned which has already been seen and is
	still in the cache.

	The result is an information leak: the old contents of file a.html
	may appear when file b.html is requested.

	Reported by John Caruso on the AOLserver mailing list.

	* nsd/init.c:
	* nsd/modload.c: Remove dead code.

2008-07-29 17:50 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (6720317781a1)

	* ChangeLog, nsd/conn.c:
	Fix bug in switch statement after Auth index, did not have break

2008-07-29 16:46 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5375a88ad7df)

	* doc/src/ns_conn.man:
	Add ns_conn auth description to docs

2008-07-25 23:01 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (603980b89713)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/nsd.h, nsd/tclvar.c:
	New public C API for NSV

	Made NSV API public, introduced new Ns_ConnNsv* and NsNsv* families
	of functions that can be used inside the server or a connection to
	access NSV arrays.

2008-05-27 15:50 +0100  Daniel P. Stasinski  <mooooooo@avenues.org>  (1f0001a7051b)

	* ChangeLog, Makefile, tests/ns_adp_compress.test:
	Fix ns_adp_compress.test to match new compression code

2008-05-23 18:30 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (cf13bd344e11)

	* ChangeLog, nsd/task.c, nsd/tclhttp.c:
	Fix socket shutdown bug with ns_http and short downloads

	Not sure i can explain it but on Linux with fast Internet connection
	ns_http does not work when after write shutdown(sock, 1) is called.
	All downloads are short, after a while recv returns 0. Without
	shutdown() it works fine.

	Also, fixed timeout bug in Ns_TaskWait, timeout was not adjusted to
	absolute value.

2008-05-21 15:21 +0100  Daniel P. Stasinski  <mooooooo@avenues.org>  (d7398060a677)

	* ChangeLog, nsd/compress.c:
	Gzip compression fixes

2008-05-17 10:07 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a6e8a6348da0)

	* ChangeLog, include/ns.h, nsd-config.tcl, nsd/driver.c, nsd/nsd.h,
	tests/test.nscfg:
	Remove sndbuf/rcvbuf parameters for setsockopt

	These should be auto-tuned by any modern OS.

2008-05-12 13:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (e761f5f6216f)

	* ChangeLog, include/ns.h, nsd/adpcmds.c, nsd/adprequest.c, nsd/nsd.h:
	Expose Ns_AdpAppend, Ns_AdpFlush; add new Ns_AdpGetOutput

	These are for the benefit of adp commands written in external
	modules.

2008-05-12 13:16 +0100  Zoran Vasiljevic  <zv@archiware.com>  (45bb266a1636)

	* ChangeLog, tests/ns_thread.test:
	Fix tests to handle recent change to format of job handles

	(using hyphens instead of blanks)

2008-05-12 09:33 +0100  Zoran Vasiljevic  <zv@archiware.com>  (50f975b1e4a5)

	* ChangeLog, nsd/driver.c:
	Initializes memory prior to usa to avoid UMR-kind of warnings in
	Purify

2008-05-11 19:58 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f716fcc6eb82)

	* ChangeLog, nsd/adprequest.c:
	Return 404 when ADP registered with absolute page fails to find
	file; don't log error

2008-05-10 16:36 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (711bcbf4c851)

	* ChangeLog, nsperm/nsperm.c:
	nsperm: Use inet_aton instead of inet_addr to parse netmask

	Thanks, Daniel Stasinski.

2008-05-09 19:11 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (352a1de1b83c)

	* ChangeLog, nsd/adprequest.c:
	Log an error when ADP registered with absolute path fails to find
	file

2008-05-05 22:19 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (1d07c307e3ba)

	* ChangeLog, nsd/driver.c, nsd/queue.c:
	Allow sockets to be queued with empty request structure

	This is the case for drivers without DRIVER_ASYNC flag.

	Moved assigning IP/port into queue.c:ConnRun where Request should be
	properly initialized already.

2008-05-01 14:04 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0b8cb89ff98b)

	* ChangeLog, nsd/log.c, nsd/tcljob.c:
	Fix deadlock in job thread; fix trampling freed memory in LogFlush()

	nsd/tcljob.c: Fixed deadlock in job thread caused by obscure locking
	strategy of the existing code. Also, did some cosmetic changes on
	variables.

	nsd/log.c: Fixed trampling over freed memory in LogFlush() when last
	cache entry has been processed and the server is shutting down,
	tearing the cache down.

2008-04-29 19:44 +0100  Zoran Vasiljevic  <zv@archiware.com>  (809d1119401a)

	* ChangeLog, nsd/tcljob.c:
	Fix wrong access to queuePtr variable in the worker thread (Bug
	introduced 2008-04-26)

	Made LookupQueue errors trigger Fatal exceptions when run from
	within the worker threads.

2008-04-29 12:36 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3e4269e9fd5b)

	* ChangeLog, nsd/log.c:
	Short-circuit LogToTcl for Fatal severity

	Otherwise we may get stucked in the depths of the memalloc.

2008-04-28 19:03 +0100  Zoran Vasiljevic  <zv@archiware.com>  (9efed8bdb5ed)

	* nsd/sched.c:
	Silence compiler warnings in 2 Ns_Log calls

2008-04-28 17:59 +0100  Zoran Vasiljevic  <zv@archiware.com>  (150377dc29f1)

	* include/nsthread.h:
	Conditionally include stdint.h as it is not present on older solaris
	versions (2.8, 2.9)

2008-04-28 17:55 +0100  Zoran Vasiljevic  <zv@archiware.com>  (7ba0dc349cb0)

	* include/nscheck.h:
	Make NS_GNUC_WARN_UNUSED_RESULT dependent on GCC 3.4 or above

2008-04-28 16:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (006f23cfce81)

	* nsd/tcljob.c:
	JobAbort sets errorCode of ECANCEL for callers to programatically
	check the cancellation event

2008-04-27 12:23 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a9007e0b2c51)

	* nsd/tcljob.c:
	JobThread: attempt to minimize access to Job elements w/o mutex
	protection

2008-04-27 11:55 +0100  Zoran Vasiljevic  <zv@archiware.com>  (af8e7cea32d3)

	* nsd/tcljob.c:
	Fixed locking of job record. It has to be within the pool lock.

2008-04-27 10:07 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0b9ea5878256)

	* ChangeLog, nsd/driver.c:
	Revert send/recv buffer change as it apparently works at least on one
	platform (Linux)

2008-04-26 20:50 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8220e44d94be)

	* ChangeLog, nsd/tcljob.c, nsd/tclobj.c:
	Use hyphens instead of spaces in Tcl handle format string

	Spaces create troubles with Tcl [eval].

2008-04-26 20:49 +0100  Zoran Vasiljevic  <zv@archiware.com>  (64b2552ca51b)

	* nsd/tcljob.c:
	Cancel jobs properly by means of Tcl_AsyncAlert() mechanism

	Job record as reported by the [ns_job joblist] contains the thread
	ID suitable for passing to the [loopctl] facility for finer-grained
	control.

2008-04-26 20:47 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3362cd1df273)

	* nsd/driver.c:
	Socket send/recv buffer setup moved to NsStartDrivers() and
	commented as real NO-OP; too late in startup sequence

	TCP honours the buffer-size setup prior to listen() or connect()
	only. Without significant API plumbing, the per-driver values for
	send and receive buffers are just useless.

2008-04-09 17:10 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9a240c12dbd9)

	* include/nsthread.h:
	Add definition of LLONG_MAX and LLONG_MIN for old gcc versions

2008-04-09 17:08 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5585b8ce565d)

	* ChangeLog, include/nsthread.h:
	Add definition of LLONG_MAX for old gcc versions

2008-03-27 17:25 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d2fcf4add10d)

	* nsd/sched.c:
	Convert to detachable threads in scheduler

2008-03-27 16:49 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (3da3a1a588af)

	* ChangeLog, nsd-config.tcl, nsd/nsconf.c, nsd/nsd.h, nsd/sched.c,
	sample-config.tcl.in, simple-config.tcl:
	Add config param schedsperthread, which causes thread to exit after
	n jobs

	This is for schedule taks with -thread flags only, schedule tasks
	which are executed inside the main sched thread still work as
	usuall.

	This new config parameter similar to jobsperthread will allow one to
	control threads allocation and memory usage by exiting thread and
	reclaiming memory back to the system in case of such memory
	allocator.

2008-03-24 15:00 +0000  Zoran Vasiljevic  <zv@archiware.com>  (0cfd4f1aa0a0)

	* ChangeLog, nsd/conn.c:
	(MakeConnChannel): Handle errors when Tcl_MakeTcpClientChannel fails

2008-03-21 22:51 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (50eb0ec5de29)

	* doc/src/ns_adp_register.man, doc/src/ns_schedule.man: new file.
	* doc/src/admin-db.man, doc/src/admin-install.man, doc/src/admin-
	maintenance.man, doc/src/adp-overview.man, doc/src/c-driverdb.man,
	doc/src/c-urlspace.man, doc/src/keyl.man, doc/src/main-features.man,
	doc/src/main-standards.man, doc/src/module-nscgi.man, doc/src
	/module-nscp.man, doc/src/module-nsperm.man,
	doc/src/ns_addrbyhost.man, doc/src/ns_adp.man,
	doc/src/ns_adp_ctl.man, doc/src/ns_adp_debug.man,
	doc/src/ns_adp_register.man, doc/src/ns_adp_safeeval.man,
	doc/src/ns_db.man, doc/src/ns_gmtime.man, doc/src/ns_guesstype.man,
	doc/src/ns_hashpath.man, doc/src/ns_hostbyaddr.man,
	doc/src/ns_http.man, doc/src/ns_httppost.man, doc/src/ns_job.man,
	doc/src/ns_localtime.man, doc/src/ns_locationproc.man,
	doc/src/ns_moduleload.man, doc/src/ns_parseargs.man,
	doc/src/ns_proxy.man, doc/src/ns_purgefiles.man,
	doc/src/ns_quotehtml.man, doc/src/ns_register.man,
	doc/src/ns_requestauthorize.man, doc/src/ns_runonce.man,
	doc/src/ns_schedule.man, doc/src/ns_sendmail.man,
	doc/src/ns_server.man, doc/src/ns_serverrootproc.man,
	doc/src/ns_sha1.man, doc/src/ns_shutdown.man,
	doc/src/ns_sockcallback.man, doc/src/ns_thread.man,
	doc/src/ns_truncate.man, doc/src/ns_upload_stats.man,
	doc/src/ns_writecontent.man, doc/src/ns_writer.man, doc/src/tcl-lib-
	nstrace.man, doc/src/tcl-libraries.man, doc/src/tcl-overview.man,
	doc/src/template.man:
	Update documentation to the latest doctools format

2008-03-20 18:59 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a04d181d7161)

	* doc/src/ns_internalredirect.man: new file.
	* ChangeLog, doc/src/ns_internalredirect.man, nsd/nswin32.c,
	nsd/tclcmds.c, nsd/tclresp.c:
	Add ns_internalredirect command

	Use PACKAGE_NAME consistently.

2008-03-18 20:10 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (cc8e284ca359)

	* ChangeLog, nsd/info.c, nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c:
	Use PACKAGE_XXXX macros for consistency

2008-03-11 15:29 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (ddfa4ab15c2c)

	* Makefile.win32, include/Makefile.win32: deleted file.
	* ChangeLog, Makefile.win32, include/Makefile.win32, nscgi/Makefile,
	nscp/Makefile, nsdb/Makefile, nslog/Makefile, nsperm/Makefile,
	nssock/Makefile:
	Remove old unsupported Makefile.win32 files

2008-03-09 23:27 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (239501fbb1dc)

	* include/nsconfig.h.in: new file.
	* ChangeLog, configure.in, include/nsconfig.h.in, include/nsthread.h,
	nsthread/nsthreadtest.c, nsthread/thread.h:
	Use nsconfig.h if HAVE_CONFIG_H is defined

	This way config file can be distributed and will not be reason for
	config.h collisions.

2008-03-09 23:17 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (cfeb2df75a62)

	* ChangeLog, include/ns.h, include/nsthread.h, nscgi/nscgi.c,
	nsd/nsd.h, nsd/nswin32.c, nslog/nslog.c, nsthread/nsthreadtest.c:
	Move all platform specific definitions into nsthread.h; fix Win32
	specific int64 and printf errors

2008-03-09 20:48 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (08ef10f3f8f7)

	* ChangeLog, include/ns.h, nsd/config.c, nsd/log.c, nsd/nsmain.c,
	nsd/pathname.c, nsd/pidfile.c, nslog/nslog.c, nsthread/thread.c:
	Add new public function Ns_HomePathExists

	Server now can be run from the current directlry if all required
	files are located in one place.

	This is for very small/embedded or test environments, previous
	functionality works as usual.

2008-03-09 08:09 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (6dce4dc4d578)

	* nsd-config.tcl:
	Updates to sample config file

2008-03-09 07:48 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d8f78dc01a00)

	* README:
	Instructions how to build using mingw

2008-03-09 07:34 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (7d0b4f1f90b2)

	* ChangeLog, Makefile, configure.in, include/Makefile.global.in,
	include/Makefile.module.in, include/ns.h, include/nsthread.h,
	nsd/Makefile, nsd/adpeval.c, nsd/adprequest.c, nsd/config.c,
	nsd/dns.c, nsd/fastpath.c, nsd/fd.c, nsd/nsd.h, nsd/nswin32.c,
	nsd/queue.c, nsd/sched.c, nsd/tclcache.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tcltime.c, nsd/unix.c, nsd/watchdog.c, nsdb/db.h,
	nslog/nslog.c, nsperm/nsperm.c, nsproxy/nsproxylib.c,
	nsthread/Makefile, nsthread/fork.c, nsthread/nsthreadtest.c,
	nsthread/pthread.c, nsthread/signal.c, nsthread/thread.c,
	nsthread/winthread.c:
	Port to Win32 platform using Mingw32/Msys environment

	Msys is what Tcl project using, same basic archive is what needed to
	conpile naviserver for win32. Works stable as oppose to MSVC
	compiled code which used to crash for unknown reasons. Same
	configure script is used and config.h.

2008-02-19 17:26 +0000  Zoran Vasiljevic  <zv@archiware.com>  (a58e4a138869)

	* ChangeLog, nsd/dstring.c:
	Fix Windows usage of vsnprintf() in Ns_DStringVPrintf()

2008-01-30 02:11 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b29f18a232b3)

	* ChangeLog, nscp/nscp.c:
	Use Tcl_GetStringResult to retrieve result

	In Tcl 8.5 accessing directly does not work anymore.

2008-01-11 15:14 +0000  Zoran Vasiljevic  <zv@archiware.com>  (e85ba289409b)

	* ChangeLog, nsd/nsmain.c:
	(NsMain): some platforms deliver RLIM_INFINITY on getrlimit call for
	RLIM_NOFILES

	Take that into consideration when generating log message.

2008-01-11 14:37 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d36142de8fa9)

	* nsd/fd.c:
	(NsInitFd): use OPEN_MAX only if defined, otherwise assume 256

2008-01-11 14:24 +0000  Zoran Vasiljevic  <zv@archiware.com>  (48c340a22760)

	* ChangeLog, nsd/fd.c:
	(NsInitFd): do not trust getrlimit on Darwin

	It returns bogus values (RLIM_INFINITY) for the query of
	RLIMIT_NOFILE. Instead, assume OPEN_MAX and obtain the value of the
	kernel parameter kern.maxfiles and use setrlimit to set that value.
	This usually works good.

2007-12-26 21:43 +0000  Zoran Vasiljevic  <zv@archiware.com>  (98e581dfe180)

	* ChangeLog, include/Makefile.module.in:
	Don't add $(UNIXOBJS) to PGM target

	This results in double inclusion of Unix object files, once in the
	libnsd and once on the command line during the program linking. Some
	platforms (Darwin) complain about duplicate symbols in such cases.

2007-12-20 13:08 +0000  Zoran Vasiljevic  <zv@archiware.com>  (1a5e07a4d069)

	* ChangeLog, nsd/watchdog.c:
	Fixed wrong test of alarm signal trigger that caused the watchdog to
	restart the worker even when the worker exited regularly

2007-12-18 18:21 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (92d0528e48b1)

	* ChangeLog, nsd/driver.c, nsd/queue.c:
	Fixed UDP drivers, async reads do not work with UDP packets

	Driver need to read packets as soon as possible and queue them
	instead of putting Sock into read/wait/close cycle like for TCP
	connections.

2007-12-08 17:32 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d969e30eebaf)

	* ChangeLog, nsd/nsd.h, nsd/nsmain.c, nsd/unix.c:
	When SIGQUIT signal is received make immediate shutdown by setting
	shutdowntimeout to 0

2007-12-02 18:55 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (ce10defa8745)

	* ChangeLog, nsd/tcljob.c:
	Temporarily change thread name to the queueId:id during callback
	execution for easier logging

	Thread name will clearly indicate which job is being executed.

2007-11-28 18:16 +0000  Zoran Vasiljevic  <zv@archiware.com>  (cbf129102b84)

	* nsd/tclconf.c:
	Fix broken isint parsing for default values in NsTclConfigObjCmd

2007-11-28 11:42 +0000  Zoran Vasiljevic  <zv@archiware.com>  (b9d5e5cccb96)

	* ChangeLog, nsd/tclconf.c:
	(NsTclConfigObjCmd): return canonical 1/0 true/false values

	Fixed NsTclConfigObjCmd() to correctly set the returned value of an
	default boolean param to 0/1 and not just blindly parrot what user
	has given (true/false for example) as this could (and it does!)
	break Tcl expressions.

2007-11-21 19:12 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (5e65fef92bc7)

	* ChangeLog, nsd/driver.c:
	Use WideInt version of config function when reading readahead value

2007-11-18 21:19 +0000  Zoran Vasiljevic  <zv@archiware.com>  (74f6e7f45687)

	* ChangeLog, nsd/fd.c:
	Do not attempt to set unlimited number of open files per process
	while this usually never succeeds

2007-11-18 19:13 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (eb5ba5e5cb24)

	* include/Makefile.win32:
	Use copy, not xcopy, because it is more portable and works
	everywhere

2007-11-18 05:43 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (69248cb49e66)

	* include/nsthread.h:
	Changes for final windows port settings

2007-11-18 04:58 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (5e51c16ed518)

	* ChangeLog, nsd/fastpath.c, nsd/nsd.h, nsd/rollfile.c, nsd/tclmisc.c:
	Bad move, revert NsFastStat changes back

	Windows port just needs proper flags setup to work with the same
	stat or stat64 structures.

2007-11-18 04:23 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (cbda51162e70)

	* ChangeLog, nsd/fastpath.c, nsd/nsd.h, nsd/rollfile.c, nsd/tclmisc.c:
	Add private function NsFastAllocStatBuf to follow Tcl VFS API

2007-11-18 03:51 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (4f91bee36b65)

	* ChangeLog, configure.in:
	Fix absence of semicolon between paths for linker in -rpath

2007-11-18 00:24 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b14919c2c413)

	* ChangeLog, include/Makefile.win32, nsd/fastpath.c, nsd/rollfile.c,
	nsd/tclmisc.c:
	Use Tcl_AllocStatBuf for Tcl_FSStat to be portable

	* include/Makefile.win32: Make sure src include goes first

	* nsd/tclmisc.c:
	* nsd/rollfile.c:
	* nsd/fastpath.c: Use Tcl_AllocStatBuf for Tcl_FSStat to be portable.
	On Windows using static struct corrupts stack.

2007-11-16 01:55 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e56f7c47ae91)

	* include/Makefile.win32, nsdb/Makefile:
	Makefile updates to support debug

2007-11-15 18:31 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (7e57dc90ff27)

	* Makefile.win32, include/Makefile.win32, include/nsthread.h,
	nsdb/Makefile, nsthread/winthread.c:
	Little update for win32 building process

2007-11-14 23:58 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (5e9b9988c3d4)

	* Makefile.win32, include/nsthread.h:
	Minor win32 updates; still big problem is nsdbpg driver

	nsd runs fine without it but when connecting to db stack is
	corrupted only when using pg driver.

2007-11-14 18:05 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d95fc1ec2972)

	* include/Makefile.win32:
	Add win32 makefiles for several modules

2007-11-14 16:18 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (c4591654d743)

	* ChangeLog, Makefile.win32, include/Makefile.win32, include/ns.h,
	include/nsthread.h, nsd/Makefile, nsd/nsd.h, nsd/op.c,
	nsd/url2file.c, nsd/urlspace.c, nsperm/Makefile, nsperm/nsperm.c,
	nsthread/nsthreadtest.c, nsthread/thread.h:
	Make Ns_UrlSpecificWalk public function

	It is used in many places already and thus should be public.

	* include/nsthread.h:
	* nsd/nsd.h: check HAVE_CONFIG_H before including config.h

	* Makefile.win32: Updated build process, put help instructions,
	removed automatic config/makefile generations

2007-11-14 00:50 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a3daf305359d)

	* Makefile.win32, include/Makefile.win32: new file.
	* ChangeLog, Makefile.win32, include/Makefile.module.in,
	include/Makefile.win32, include/nsthread.h, nscgi/Makefile,
	nscp/Makefile, nsd/Makefile, nsd/binder.c, nsd/nsmain.c,
	nsd/nswin32.c, nsd/sls.c, nsd/tclmisc.c, nsd/tcltime.c,
	nsdb/Makefile, nslog/Makefile, nssock/Makefile, nsthread/Makefile,
	nsthread/nsthreadtest.c, nsthread/winthread.c:
	Initial Windows port of build system, still work in progress

	New makefile added to perform compiling fromcommand line using the
	same top level makefile. To compile for windows, copy
	include/Makefile.win32 into include/Makefile.module, the rest stays
	the same, only every module needs to be compiled separately, root
	Makefile is still unix specific.

2007-10-23 23:35 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (aa492362662c)

	* ChangeLog, contrib/examples/upload.tcl, doc/src/ns_conn.man,
	include/ns.h, nsd/conn.c, nsd/driver.c, nsd/nsd.h, tcl/form.tcl,
	tests/ns_conn.test:
	Add driver parameter 'maxupload' -- upload disk spooling

	* nsd/driver.c:
	* nsd/nsd.h:
	* nsd/conn.c:
	* docs/src/ns_conn.man:
	* include/ns.h: Added new parameter maxupload to the driver which if >
	0 enables spooling of the whole request contents into regular temp
	file. After the content is put into the file, connection thread can
	access it using ns_conn contentfile command which will return name
	of temp file. Public function Ns_ConnContentFile and
	Ns_ConnContentFd added to access temprorary file.

	* tcl/form.tcl: added ns_parseformfile proc which will parse raw
	content file into query parameters and uploaded files if content was
	in multipart/form-data format

	* contrib/examples:upload.tcl: Updated to support new maxupload
	option

2007-10-23 19:43 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ec58f819f1cc)

	* ChangeLog, nsd/driver.c, nsd/nsd.h, nsd/progress.c:
	Support uploads larger than 2GB

	Length fields are Tcl_WideInt now, printf output modifiers updated.

2007-10-23 17:28 +0100  Ibrahim Tannir  <itannir@archiware.com>  (2550f3ace651)

	* ChangeLog, nsd/nswin32.c:
	(MsMemMap): it is necessary to map the file with the same flags
	with which it got opened on win32

2007-10-21 17:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (758b1179ee42)

	* ChangeLog, tests/ns_config.test, tests/test.nscfg:
	Add test for wide int

2007-10-21 17:20 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a4659ec1f623)

	* ChangeLog, include/ns.h, nsd/str.c, nsd/tclconf.c:
	ns_config -int now can handle wide integers

2007-10-21 16:49 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (98ba41557164)

	* nsd/unix.c:
	Fix for DString being freed before used

2007-10-21 16:44 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (23c3216070da)

	* ChangeLog, doc/src/ns_setprivileges.man, include/ns.h, nsd/nsmain.c,
	nsd/nswin32.c, nsd/str.c, nsd/tclcmds.c, nsd/tclmisc.c, nsd/unix.c,
	nsproxy/nsproxylib.c:
	Add Ns_SetUser, Ns_SetGroup (replaces Privelege routines); add
	ns_setuser ns_setgroup

	* include/ns.h:
	* nsproxy/nsproxylib.c:
	* nsd/nsmain.c:
	* nsd/unix.c: New public API functions Ns_SetUser/Ns_SetGroup instead
	of deleted Ns_SetPriveleges. New Tcl commands ns_setuser/ns_setgroup
	instead of ns_setprivileges

	* nsd/nswin32.c: No need for extra stubs

2007-10-20 18:20 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a7a303e67ac7)

	* doc/src/ns_setprivileges.man: new file.
	* ChangeLog, doc/src/ns_setprivileges.man, include/ns.h, nsd/nsmain.c,
	nsd/nswin32.c, nsd/tclcmds.c, nsd/tclmisc.c, nsd/unix.c,
	nsproxy/nsproxylib.c:
	Add Ns_SetPrivileges, Ns_GetPrivileges and ns_setprivileges

	* include/ns.h:
	* nsd/unix.c: Added 2 new public API functions Ns_SetPriveleges and
	Ns_GetPriveleges which are resolve and assign user uid/gid

	* nsproxy/nsproxylib.c:
	* nsd/nsmain.c: Switched to use new function that assign user real
	uid/gid

	* nsd/tclmisc.c: New Tcl command ns_setprivileges that sets real uid
	and gid

2007-10-19 22:56 +0100  Stephen Deasey  <sdeasey@gmail.com>  (86fc8bfe5c1d)

	* ChangeLog, nsd/driver.c:
	Mark driver shut down if none configured

	Fixes unclean shutdown in non-server situations when no drivers are
	configured listening.

2007-10-19 16:55 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (e26d281a6353)

	* ChangeLog, include/ns.h, nsd/config.c, nsd/fastpath.c, nsd/str.c:
	Add large file support to NsFastOpen; support Tcl_WideInt in config
	routines

	* include/ns.h:
	* nsd/config.c: Aded new public function for supporting Tcl_WideInt
	values: Ns_ConfigWideInt, Ns_ConfigWideIntRange. This is only for C
	API currently, for Tcl it needs to be evaluated how to do it

2007-10-19 13:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (557e63316ca4)

	* ChangeLog, configure.in:
	Disable file access through the Tcl VFS for the fastpath by default

	For make benefit glorious static file benchmark performance...

2007-10-18 18:16 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (44d01c8e6878)

	* ChangeLog, nsd/mimetypes.c:
	Added mime type for .pac files as application/x-ns-proxy-autoconfig

2007-10-15 06:04 +0100  Zoran Vasiljevic  <zv@archiware.com>  (1cb2e5bed49a)

	* ChangeLog, nsd/tcljob.c:
	Fixed seting of error related information to the caller of the
	[ns_job wait]

2007-10-15 02:05 +0100  Stephen Deasey  <sdeasey@gmail.com>  (981f5f6292db)

	* ChangeLog, include/Makefile.module.in:
	Enable modules to install more than one library header

2007-10-14 14:55 +0100  Stephen Deasey  <sdeasey@gmail.com>  (978516b20764)

	* ChangeLog, nsthread/pthread.c:
	(Nsthreads_LibInit): check for NPTL thread library on Linux and
	abort if not found

2007-10-14 14:04 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1d55cbc932ba)

	* ChangeLog, include/ns.h, nsd/adpparse.c, nsd/binder.c, nsd/connio.c,
	nsd/fastpath.c, nsd/httptime.c, nsd/nsd.h, nsd/pathname.c,
	nsd/server.c, nsd/sls.c, nsd/tclcmds.c, nsproxy/nsproxylib.c:
	Remove various bugs and ugliness found by strict compiler checking

	* include/ns.h: Add missing declaration for Ns_StopServer().

	* nsd/nsd.h: Add missing 'void' to function declaration.

	* nsd/adpparse.c: Quieten a compiler warning about int/char
	truncation.

	* nsd/binder.c: The file mode for unix domain sockets was being
	parsed but not used -- pass it on to Ns_SockBindUnix().

	* nsd/connio.c (Ns_ConnSend): Remove unused variable 'status'.

	* nsd/fastpath.c: Remove unused parameter servPtr.

	* nsd/httptime.c: Make sure UCHAR() macro is used consistently for
	all

	char checks. Add parentheses to disambiguate order of evaluation.

	* nsd/pathname.c: Remove unused 'path' variable. Make sure to use
	correct servPtr variable.

	* nsd/server.c: Remove unused 'spath' variable.

	* nsd/sls.c: Remove redundant comparison for < 0 on unsigned
	variable.

	* nsd/tclcmds.c: Add missing struct initializers.

	* nsproxy/nsproxylib.c: Fix confusion about return values from
	Eval(), Wait() and Send(). Eval() always returns a Tcl error code,
	the others always return proxy Err codes. Remove unused variable
	'incr' from Wait().

2007-10-13 20:41 +0100  Stephen Deasey  <sdeasey@gmail.com>  (724f3c7fcf7c)

	* ChangeLog, nsd/log.c, nsd/tclfile.c:
	Quieten some compiler warnings

2007-10-13 20:37 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1e0cabe2614e)

	* ChangeLog, configure.in, m4/tcl.m4:
	Update to latest (3.6) tcl.m4

2007-10-13 20:31 +0100  Stephen Deasey  <sdeasey@gmail.com>  (61f1515a73fe)

	* ChangeLog, include/Makefile.global.in, include/Makefile.module.in,
	include/ns.h, include/nsthread.h, nsd/Makefile, nsd/init.c,
	nsd/nsmain.c, nsd/nswin32.c, nsproxy/nsproxy.h,
	nsproxy/nsproxylib.c, nsproxy/nsproxymod.c, nsthread/Makefile,
	nsthread/nsthreadtest.c, nsthread/pthread.c:
	LIBINIT shared lib initialization scheme becomes Nslibname_LibInit()

	* nsthread/pthread.c: Abandon the old module LIBINIT system of
	redefining the initialization function to _init(). The loadable
	module _init scheme was only supported by gcc, and support was
	dropped a long time ago. Unfortunately, the _init() functions were
	clashing with other libraries, such as libgcc_s.

	New scheme: shared libraries explicitly export a
	Nswhateva_LibInit(), and programs and other libraries which depend
	on it call it during their own initialization.

2007-10-13 20:08 +0100  Stephen Deasey  <sdeasey@gmail.com>  (12440319c63f)

	* ChangeLog, nsd/dstring.c:
	Use va_copy() before calling vsnprintf() so that it doesn't clobber
	our original va_list

2007-10-12 20:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0d96b7d33465)

	* doc/src/mann/ns_config.man, tests/ns_config.test: new file.
	* doc/src/admin-config.man, doc/src/ns_config.man,
	doc/src/ns_configsection.man, doc/src/ns_configsections.man,
	doc/src/ns_param.man, doc/src/ns_section.man: deleted file.
	* ChangeLog, doc/src/admin-config.man, doc/src/mann/ns_config.man,
	doc/src/ns_config.man, doc/src/ns_configsection.man,
	doc/src/ns_configsections.man, doc/src/ns_param.man,
	doc/src/ns_section.man, nsd/tclcmds.c, nsd/tclconf.c,
	tests/ns_config.test, tests/test.nscfg:
	Make config commands Tcl obj based; clean up option parsing; catch
	type errors from config values; add -min and -max options for int
	types

	* tests/test.nscfg:
	* tests/ns_config.man: Add new config tests.

	* doc/src/ns_config.man:
	* doc/src/ns_configsection.man:
	* doc/src/ns_configsections.man:
	* doc/src/ns_section.man:
	* doc/src/ns_param.man:
	* doc/src/admin-config.man: Deleted.
	* doc/src/mann/ns_config.man: Add new consolidated config man page.

2007-10-09 22:16 +0100  Zoran Vasiljevic  <zv@archiware.com>  (008ec19d1e3d)

	* include/nsthread.h:
	Fixed 32/64bit integer formatting macros

2007-10-09 13:43 +0100  Zoran Vasiljevic  <zv@archiware.com>  (74c75f157372)

	* include/nsthread.h, nsd/auth.c:
	Add macro definitions for some formatted IO macros, if not defined

	This is the case for older Solaris versions (2.8-).

	* nsd/auth.c: Removed stray Ns_PrintSet() call from NsParseAuth()
	call (obviously checked in by mistake).

2007-10-07 01:10 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d29a9c022604)

	* ChangeLog, doc/src/mann/ns_register_adp.man, nsd/adprequest.c,
	nsd/tclcmds.c, nsd/tclrequest.c, tcl/compat.tcl, tests/adp.test,
	tests/ns_register_proc.test:
	Rename ns_unregister_proc ns_unregister_op

	Let it serve to unregister any kind of Ns_OpProc. Remove the aliases
	ns_unregister_adp and ns_unregister_tcl.

	* nsd/adprequest.c: Fix missing white space in ADP arg proc.

	* tests/adp.test:
	* test/ns_register_proc.test: Use ns_unregister_op.

	* doc/src/mann/ns_register_adp.man: Update. Mention configuration
	options.

2007-10-06 18:46 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5fa24a12ddcc)

	* ChangeLog, nslog/nslog.c:
	Use TCL_LL_MODIFIER for content-sent length

2007-10-06 18:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7288e60d9ddf)

	* ChangeLog, nsd/limits.c, nsd/nsd.h, nsd/queue.c, nsd/url2file.c,
	nsd/urlspace.c:
	Partition per-server urlspaces using an arrat of junctions rather
	than index nodes in the tree

	Add programmer notes about this tricky data structure.

	* nsd/limits.c:
	* nsd/queue.c:
	* nsd/url2file.c: Update to use internal convenience function
	NsUrlSpecificGet().

2007-10-04 16:33 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9f1abb87ebe0)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/connio.c, nsd/nsd.h,
	nsd/queue.c, nsd/return.c:
	Make file support over 2Gb working again

	Convert all response and content length variables into Tcl_WideInt.

2007-10-02 20:52 +0100  Stephen Deasey  <sdeasey@gmail.com>  (cecae84ec9a8)

	* ChangeLog, doc/src/man3/Ns_Sls.man, doc/src/mann/ns_accesslog.man,
	doc/src/mann/ns_atsignal.man, doc/src/mann/ns_cache.man,
	doc/src/mann/ns_cookie.man, doc/src/mann/ns_ictl.man,
	doc/src/mann/ns_limits.man, doc/src/mann/ns_log.man,
	doc/src/mann/ns_memoize.man, doc/src/mann/ns_register_adp.man,
	doc/src/mann/ns_return.man, doc/src/mann/ns_returnerror.man:
	Update docs to new tclllib-1.10 syntax

	Unfortunately, new tcllib complains voluminously about the old
	syntax, and old tcllib dies on the new.

	We love the bleeding edge...

2007-10-02 20:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d606a63dc8af)

	* tests/tclconnio.test: new file.
	* ChangeLog, doc/src/mann/ns_write.man, include/ns.h, nsd/conn.c,
	nsd/connio.c, nsd/queue.c, nsd/return.c, nsd/tclresp.c,
	tests/tclconnio.test, tests/tclresp.test:
	Differentiate between unspecified content-length and explicit zero
	length

	* include/ns.h:
	* nsd/connio.c:
	* nsd/queue.c:
	* nsd/return.c: Make sure we can tell the difference between an
	unspecified content-length and an explicit zero length body, such as
	a header flush. Shuffle the code around to try and make the
	relationship between length, streaming, chunking, keep-alive etc.
	clearer.

	* nsd/conn.c:
	* nsd/tclresp.c: Re-add the -binary switch to ns_headers. Binary
	streaming now possible.

	* tests/tclresp.test: Updates for mime-type/charset issues.
	* tests/tclconnio.test: Add tests for 'ns_conn chanel'.

	* doc/src/mann/ns_write.man: Explain the -binary switch.

2007-09-29 15:07 +0100  Zoran Vasiljevic  <zv@archiware.com>  (165c76482d00)

	* nsproxy/nsproxylib.c:
	Send/Wait/Recv functions now return internal errorcode instead of
	standard Tcl error codes

2007-09-29 14:14 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4bf1ee6ebf84)

	* ChangeLog, nsproxy/nsproxylib.c, nsthread/time.c:
	Ns_GetTime now relies on Tcl_GetTime to be platform-independent

	Also, untabified and formatted.

	* nsproxy/nsproxylib.c: send/receive timers now operate on absolute
	instead of relative time quantums.

2007-09-29 09:40 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3247ceb735d5)

	* ChangeLog, nsd/tclresp.c:
	(ns_headers): allow -1 as length, allowing binary streams of unknown
	size

2007-09-26 17:27 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (88146e5d1048)

	* ChangeLog, nsd/tcljob.c:
	Make sure -jobid parameters ignored if empty string is given

	Also, add error message to the log for detached and failed jobs.

2007-09-20 20:17 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7b5133463a46)

	* ChangeLog, doc/src/man3/Ns_Sls.man:
	Ns_Sls.man: fix stray curly-bracket and add extra markup around
	types, args etc.

2007-09-15 02:01 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d3bd111f67c6)

	* ChangeLog, nsd/log.c, tests/ns_log.test:
	Guard against disabling the Fatal log severity; make sure that Fatal
	log messages are always flushed, even when 'hold' is active

2007-09-15 01:48 +0100  Stephen Deasey  <sdeasey@gmail.com>  (e904dc07bb28)

	* ChangeLog, nsd/log.c:
	Call filters 'filters' instead of callbacks; remove some redundant
	wrappers; shuffle the code

2007-09-15 00:27 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a30ef740c179)

	* ChangeLog, doc/src/mann/ns_log.man, include/ns.h, nsd/callbacks.c,
	nsd/log.c, nsd/tclinit.c, tests/ns_log.test:
	Add names to numeric log severity levels

	* include/ns.h:
	* nsd/log.c: Drop the idea of maxloglevel auxiliary logging levels and
	instead add a new Ns_CreateLogSeverity() which creates a named
	severity level. C code still passes round an integer severity level,
	the severity name appears in the log file.

	ns_logctl severity can create new severity levels on the Tcl side
	and enable/disable them individually, unlike the old scheme in which
	to enable level 100 levels 0-99 also had to be enabled. A reasonable
	number of integer levels are still supported for backwards
	compatibility.

	ns_logctl severities lists all created severities.

	* nsd/callbacks.c:
	* nsd/tclinit.c: Update after renaming Ns_LogLevel() to
	Ns_LogSeverityEnabled().

	* doc/src/mann/ns_log.man:
	* tests/ns_log.test: Updated.

2007-09-12 20:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (889933a4f0f0)

	* ChangeLog, nsd/nsmain.c:
	(CmdThread): set the thread name for the command shell thread so
	that log messages are less ugly

2007-09-12 19:43 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7ebb7f195da3)

	* doc/src/mann/ns_log.man: new file.
	* doc/src/ns_log.man, doc/src/ns_logctl.man, doc/src/ns_logroll.man:
	deleted file.
	* ChangeLog, doc/src/mann/ns_log.man, doc/src/ns_log.man,
	doc/src/ns_logctl.man, doc/src/ns_logroll.man:
	Combine the error logging commands docs and move into place; update

2007-09-12 00:16 +0100  Stephen Deasey  <sdeasey@gmail.com>  (03fde7e6774d)

	* ChangeLog, nslog/nslog.c:
	(LogObjCmd): fix inconsistent use of CamelCase in return value of
	[ns_accesslog flags] command

2007-09-12 00:11 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ad107e78f54a)

	* ChangeLog, nslog/nslog.c:
	Remove redundant embedded documentation in nslog.c

2007-09-12 00:08 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7665bca263d7)

	* ChangeLog, nslog/nslog.c:
	Fix mix-up with static/dynamic memory and the result from the
	[ns_accesslog file] command

2007-09-12 00:03 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1e1db533df66)

	* doc/src/mann/ns_accesslog.man: new file.
	* doc/src/ns_accesslog.man: deleted file.
	* ChangeLog, doc/src/mann/ns_accesslog.man, doc/src/ns_accesslog.man:
	Update and move ns_accesslog man page

2007-09-11 20:37 +0100  Stephen Deasey  <sdeasey@gmail.com>  (50bca860f9e7)

	* ChangeLog, nslog/nslog.c:
	(LogFlush): remove redundant and annoying error logging

	Error occurred when a log-flush failed due to a previous error
	rolling and re-opening the file. Shuffle some code around to put
	public API at the top of the file.

2007-09-11 19:46 +0100  Stephen Deasey  <sdeasey@gmail.com>  (363fc739bba8)

	* doc/src/mann/ns_write.man: new file.
	* ChangeLog, doc/src/mann/ns_return.man, doc/src/mann/ns_write.man,
	nsd/nsd.h, nsd/tclresp.c, tests/tclresp.test:
	Enable ns_write to construct response headers

	* nsd/nsd.h:
	* nsd/tclresp.c: Re-enable the ability to use ns_write to manually
	construct headers or some other non-HTTP response. It does not now
	auto-generate a set of headers on first write -- ns_headers must be
	called first.

	* doc/src/mann/ns_return.man:
	* doc/src/mann/ns_write.man: Split ns_write, ns_headers and
	ns_connsendfp into their own man page, the distinction being that
	they all construct responses incrementally whereas ns_return,
	ns_respond, ns_returnfile and ns_returnfp return a fully formed HTTP
	response.

	* tests/tclresp.test: Test the headers/no-headers case for ns_write
	and ns_startcontent.

2007-08-22 17:17 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a4746e1ac1ec)

	* tests/testserver/pages/16480bytes: new file.
	* ChangeLog, nsd/connio.c, tests/http.test,
	tests/testserver/pages/16480bytes:
	Fix bug with missreported content-length of static files

	* nsd/connio.c (ConnSend):
	* tests/http.test:
	* tests/testserver/pages/16480bytes: Add a call to
	Ns_ConnSetLengthHeader() at the start of ConnSend() with the total
	length of the file to send, otherwise Content-Length gets reported
	as 8192 which is the size of the buffer (IOBUFSZ) used to read the
	file off disk.

2007-08-21 05:11 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ae588d272d23)

	* ChangeLog, nsd/adprequest.c, nsd/fastpath.c, nsd/nsd.h:
	Add support for stat64 in FastStat

	It uses TCL defined HAVE_STRUCT_STAT64.

2007-08-20 16:10 +0100  Zoran Vasiljevic  <zv@archiware.com>  (952ea30f556f)

	* ChangeLog, nsproxy/nsproxylib.c:
	Proxy ID is now allocated dynamically instead of having
	limited/fixed length of 16 characters

2007-08-14 09:49 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3a9133f6c875)

	* ChangeLog, nsd/tclmisc.c:
	Replaced uint32 with ns_uint32

2007-08-12 23:42 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a90f0b4c83e2)

	* ChangeLog, nsd/driver.c, nsd/nsd.h:
	Use Ns_ConfigFlag() for flags

2007-08-12 22:30 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d0771f4ec3b9)

	* ChangeLog, NEWS, doc/src/mann/ns_cookie.man, include/ns.h,
	nsd/cookies.c, tests/cookies.test:
	Set cookies with the HttpOnly option by default, making cookie data
	unavailable to client javascript engines

	(on those browsers which support it)

	A new -scriptable option is available to ns_setcookie to get the old
	behavior. HttpOnly cookies are not as susceptible to XSS attacks:
	secure by default.

	The C API has a couple of new flags: NS_COOKIE_SECURE and
	NS_COOKIE_SCRIPTABLE, which replace the old 1/0 flag to
	Ns_ConnSetCookieEx().

2007-08-12 21:22 +0100  Stephen Deasey  <sdeasey@gmail.com>  (da2424ce3a06)

	* ChangeLog, NEWS, doc/src/mann/ns_cookie.man, nsd/cookies.c,
	tests/cookies.test:
	(ns_cookie): rename -maxage -expires matching common usage
	throughout API; handle absolute and relative time values

2007-08-12 18:11 +0100  Stephen Deasey  <sdeasey@gmail.com>  (bcea7e2b2522)

	* ChangeLog, nsd/tclinit.c:
	Remove the async cancel stuff; see module: nsloopctl

2007-08-11 23:26 +0100  Stephen Deasey  <sdeasey@gmail.com>  (97fe7c60890b)

	* tests/testserver/pages/timeout-inc.adp,
	tests/testserver/pages/timeout.adp: new file.
	* ChangeLog, nsd/adpcmds.c, nsd/adpeval.c, nsd/adprequest.c,
	nsd/nsd.h, nsd/tclrequest.c, tests/testserver/pages/timeout-inc.adp,
	tests/testserver/pages/timeout.adp, tests/timeout.test:
	Catch NS_TIMEOUT errors for Tcl and ADP pages

	Fixes failing test timeout-1.1.

	* nsd/tclrequest.c: The timeout error code can now be a list, with
	NS_TIMEOUT as the first element and whatever else as the remaining
	elements.

2007-08-11 18:10 +0100  Stephen Deasey  <sdeasey@gmail.com>  (37f5821949fc)

	* ChangeLog, include/ns.h, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adprequest.c, nsd/conn.c, nsd/connio.c, nsd/encoding.c,
	nsd/nsd.h, nsd/queue.c, nsd/return.c, nsd/tclcmds.c, nsd/tclresp.c,
	tests/encoding.test, tests/tclresp.test, tests/test.nscfg:
	Fix encoding declaration in mime-type header

	* include/ns.h:
	* nsd/return.c: Add new Ns_ConnSetEncodedTypeHeader. The distinction
	between this and Ns_ConnSetTypeHeader is that the mime-type header
	is set in an encoding aware manner with a charset declaration.
	Either it is provided as part of the mime-type and the connection
	encoding is set accordingly, or a charset name is constructed
	according to current connection encoding (see Ns_ConnSetEncoding).

	This is a change from the old way of doing it in which whether to
	add a charset declaration depended on the mime-type being of type
	text/*. Unfortunately, this doesn't work with modern XML types which
	are often declared as application/xml+whatever.

	You usually know whether you're sending binary or character data
	anyway because you have to choose between Ns_ConnReturnData() and
	Ns_ConnReturnCharData().

	* nsd/tclresp.c: Add the -binary switch to ns_headers to signify
	that you intend sending binary data (probably with ns_write) and
	that the mime-type header should not have a charset declaration
	appended.

	* nsd/encoding.c: Depreciate Ns_GetEncoding(). There's never a
	situation in which you want can't use Ns_GetCharsetEncoding() which
	handles naviserver charset aliases as well as Tcl encoding names.

	Add Ns_GetEncodingCharset() which prefers to return a naviserver
	charset alias given a Tcl encoding, falling back to the Tcl encoding
	name.

	* nsd/conn.c: ns_conn encoding and urlencoding now correctly return
	a charset name, not Tcl encoding name.

	* nsd/nsd.h: Don't force iso-8859-1 encoding for the default
	text/html types via NSD_TEXTHTML.

	* nsd/tclcmds.c: ns_encodingforcharset is now an obj command.

	* nsd/adpcmds.c:
	* nsd/adpeval.c:
	* nsd/adprequest.c:
	* nsd/connio.c:
	* nsd/queue.c: Various updates to use Ns_ConnSetEncodedTypeHeader()
	etc.

	* tests/encoding.test:
	* tests/tclresp.test:
	* tests/test.nscfg: encoding-7.1 knownBug: not a bug any more. This
	was serving a static HTML file and adding an unneeded charset to the
	mime-type. Add some more tests, and some fix-ups.

2007-08-06 18:29 +0100  Stephen Deasey  <sdeasey@gmail.com>  (eed3aa8bebe4)

	* ChangeLog, tests/init.test, tests/testserver/modules/init-test.tcl:
	Test for namespace variables: should get duplicated or not?

2007-08-05 23:48 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (bce67b0e22d6)

	* ChangeLog, doc/src/ns_perm.man, nsperm/init.tcl, nsperm/nsperm.c:
	Add new ns_perm commands deluser, delgroup, delperm and reload

2007-08-04 22:58 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c7617b79c5d4)

	* nsproxy/test-nsproxy.sh: new file.
	* ChangeLog, nsproxy/test-nsproxy.sh, tests/test.nscfg:
	Really fix the nsproxy tests. For sure

2007-08-04 21:02 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c6f4607c1197)

	* tests/init.test, tests/testserver/modules/init-test.tcl: new file.
	* ChangeLog, tests/init.test, tests/testserver/modules/init-test.tcl:
	Add a couple of tests of the interp cloning code

2007-08-04 17:57 +0100  Stephen Deasey  <sdeasey@gmail.com>  (9d1e918443fa)

	* ChangeLog, Makefile:
	Fix nsproxy tests; add 'memcheck' valgrind make target

	* Makefile: Add the nsproxy directory to the library path so that
	tests run without being installed. Add 'memcheck' target to run
	valgrind with the memcheck tool.

2007-08-04 17:40 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ced266d7daac)

	* ChangeLog, tcl/config.tcl:
	Less verbose logging of default adp/tcl URL mappings

2007-08-04 17:26 +0100  Stephen Deasey  <sdeasey@gmail.com>  (4459b2a27fb7)

	* ChangeLog, nsd/init.tcl:
	Don't leave the Tcl system encoding to chance

	Either it's utf-8 or some one set it specifically in the config file
	using the new ns/server/$server:systemencoding parameter.

2007-08-01 00:33 +0100  Stephen Deasey  <sdeasey@gmail.com>  (e16bf64e472b)

	* ChangeLog, tests/ns_log.test:
	Make tests robust to unrelated logging activity

2007-07-31 18:21 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5b5b81dc3b86)

	* ChangeLog, nsd/driver.c, nsd/progress.c, tests/all.tcl,
	tests/http.test:
	Fix progress clobering and SLS cleanup callbacks (bug #1724222)

	* nsd/driver.c:
	* nsd/progress.c:
	* tests/http.tcl: Make sure progress for duplicate URLs don't clobber
	each other. Cleanup the reset handling. Make sure SLS callbacks run
	only when a socket actually closes, not when set aside for
	keepalive.

	* tests/all.tcl: Typo: s/Devel/Dev/

2007-07-22 19:18 +0100  Stephen Deasey  <sdeasey@gmail.com>  (029d5325ee3f)

	* ChangeLog, include/ns.h, nscgi/nscgi.c, nsd/adprequest.c,
	nsd/conn.c, nsd/connio.c, nsd/driver.c, nsd/encoding.c,
	nsd/fastpath.c, nsd/nsd.h, nsd/queue.c, nsd/return.c,
	nsd/returnresp.c, nsd/tclresp.c, tcl/compat.tcl,
	tests/encoding.test, tests/http_chunked.test, tests/ns_conn.test,
	tests/tclresp.test:
	Fix chunking by redesigning the output headers mechanism

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/return.c:
	* nsd/connio.c: Depreciated: Ns_ConnSetRequiredHeaders(),
	Ns_ConnQueueHeaders(), Ns_ConnFlushHeaders(). Default headers and
	flushing are now handled at last moment by Ns_ConnWriteVData() which
	knows exactly how many bytes are to be sent. The Ns_ConnWrite*
	routines now take a flags argument and an NS_CONN_STREAM flag which
	enables chunking if possible.

	This fixes streaming and chunking and enables it in more situations.
	We were also needlessly flushing headers early causing an extra TCP
	packet and corresponding RTT.

	Ns_ConnSend() no longer flushes headers. Don't call this directly
	unless you really need to skip all HTTP specific logic (and don't
	call it in a loop).

	* nsd/conn.c: ns_conn chunked*, Ns_Conn*Chunk* etc. removed.

	* nsd/encoding.c: New NsEncodingIsUtf8() to allow null utf8-to-utf8
	transformation to be skipped on write.

	* nsd/queue.c: No more write-behind buffer, which was header
	specific anyway.

	* nsd/adprequest.c:
	* nsd/driver.c:
	* nsd/fastpath.c:
	* nsd/returnresp.c:
	* nsd/tclresp.c:
	* nscgi/nscgi.c:
	* tcl/compat.tcl: Various old to new API updates, removing direct
	calls to flush headers etc.

	* tests/encoding.test:
	* tests/http_chunked.test:
	* tests/ns_conn.test:
	* tests/tclresp.test: Various extra tests for corner cases and
	removing knownBug constraints.

2007-07-22 18:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ec8cb88c3811)

	* tests/http_keep.test, tests/testserver/pages/hello.html,
	tests/testserver/pages/hello.xhtml: new file.
	* ChangeLog, tests/all.tcl, tests/http.test, tests/http_keep.test,
	tests/test.nscfg, tests/testserver/modules/testhttp.tcl,
	tests/testserver/pages/hello.html,
	tests/testserver/pages/hello.xhtml,
	tests/testserver/pages/http_chunked.adp:
	Various test cleanups and additions; some new bugs exposed

	* tests/all.tcl: Log a messages (Devel) as each test begins to help
	correlate other log messages to tests, when debugging.

	* tests/testserver/pages/hello.html:
	* tests/testserver/pages/hello.xhtml: Static pages to check mime-type
	header w/hackcontenttype enabled. (test encoding-7.1, currently
	failing).

	* tests/testserver/modules/testhttp.tcl: Handle case where content
	is returned chunked and keep-alive is enabled. i.e. connection-close
	can not be used as an end-of-message marker.

	* tests/testserver/pages/http_chunked.adp: Manipulate ADP buffer
	size if requested to force streaming with test-sized ADP pages.

	* tests/test.nscfg:
	* tests/http.test: Distinguish between writersize and uploadsize and
	add another test. (Two bugs here: long standing read-buffer
	misshandling causing endless loops, and new progress crash caused by
	multiple SockClose() from different threads (?) )

	* tests/http_keep.test: New tests for keep-alive logic for HTTP 1.0
	and 1.1 clients. (1 POST bug: is the test or the code broken?).

2007-07-10 14:03 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0b0ea5da8690)

	* ChangeLog, nsd/conn.c, nsd/tclresp.c:
	Move ns_startcontent to tclresp.c

	Command isn't documented in ns_return.man -- doesn't this overlap
	with ns_headers and ns_conn encoding?

2007-07-10 12:53 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d249e7aec553)

	* ChangeLog, doc/src/mann/ns_return.man, include/ns.h, nsd/conn.c,
	nsd/nsd.h, nsd/tclobj.c, nsd/tclresp.c, tests/http_chunked.test,
	tests/ns_conn.test, tests/tclresp.test:
	Auto detect binary data in ns_write, ns_return etc.; remove ns_conn
	write_encoded etc.

2007-07-05 14:22 +0100  Stephen Deasey  <sdeasey@gmail.com>  (64cc8c7f4890)

	* doc/src/mann/ns_register_adp.man, doc/src/ns_register.man: new file.
	* ChangeLog, doc/src/mann/ns_register_adp.man,
	doc/src/ns_register.man:
	Break out ns_register_adp etc. into own man page

2007-07-05 14:12 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8eac314f6556)

	* ChangeLog, include/ns.h, nsd/adpeval.c, nsd/adprequest.c, nsd/nsd.h,
	nsd/proc.c, nsd/tclrequest.c:
	Add ns_register_adp -options; rename -cache -expires; code cleanup
	and fixes

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/adprequest.c:
	* nsd/tclrequest.c:
	* nsd/adpeval.c:
	* nsd/proc.c: Public function Ns_AdpRequestEx() was defined to take a
	flags argument, but all the flags are private. Dropped the flags
	argument and added a private version for the benefit of
	ns_register_tcl, which was the only user of this.

	Add an -options switch to ns_register_adp which takes all the same
	options as ns_adp_ctl.

	Renamed -cache -expires.

	Dropped the public Ns_AdpRequestProc and Ns_TclRequestProc -- it
	doesn't make as much sense as exposing Ns_FatPathProc.

	Shuffled some code around: ns_register_adp etc. moved from
	tclrequest.c to adprequest.c.

2007-07-03 20:39 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a37bf01b89ed)

	* ChangeLog, nsd/str.c:
	Make Ns_StrToInt to convert hex and decimal numbers

2007-07-03 18:27 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (aa9e1aa7029f)

	* ChangeLog, contrib/examples/upload.tcl, doc/src/ns_upload_stats.man,
	nsd-config.tcl, nsd/progress.c:
	sample-config: use new parameter for progress reporting; examplepage
	fixed

2007-06-29 10:43 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b956015af6b4)

	* ChangeLog, nsd/urlencode.c:
	Remove URLDECODE_RELAXED ifdef as not needed any more

	Plus, it made ns_urldecode/ns_urlencode unsymetric.

2007-06-28 20:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6b98db23a87d)

	* ChangeLog, tests/adp.test:
	Add a couple of more ADP tests (ns_adp_ctl, ns_adp_append,
	ns_adp_puts, ns_adp_eval, ...)

2007-06-28 20:12 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c29c382da6f5)

	* doc/src/ns_adp_compress.man, doc/src/ns_adp_stream.man: deleted
	file.
	* ChangeLog, doc/src/ns_adp_compress.man, doc/src/ns_adp_stream.man:
	Delete some unneeded ADP man pages

2007-06-28 20:00 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ab40a75508e2)

	* ChangeLog, nsd/adpcmds.c, nsd/tclcmds.c, tcl/compat.tcl:
	ADP command cleanup

	Add a couple of missing ADP commands (ns_adp_close, ns_adp_flush) to
	the list.

	Remove a couple of deprecated commands (ns_adp_stream,
	ns_adp_compress) and add Tcl implementations to compat.tcl.

	Clean up the arg parsing of the ADP commands in adpcmds.c.

2007-06-28 19:16 +0100  Stephen Deasey  <sdeasey@gmail.com>  (101cf2de5c91)

	* ChangeLog, nsd/adprequest.c:
	Don't try to close a NULL conn

2007-06-27 17:44 +0100  Stephen Deasey  <sdeasey@gmail.com>  (60d899eec277)

	* doc/src/mann/ns_ictl.man: new file.
	* doc/src/ns_cleanup.man, doc/src/ns_cleanupchans.man,
	doc/src/ns_eval.man, doc/src/ns_ictl.man, doc/src/ns_init.man,
	doc/src/ns_markfordelete.man, doc/src/ns_reinit.man: deleted file.
	* ChangeLog, doc/src/mann/ns_ictl.man, doc/src/ns_cleanup.man,
	doc/src/ns_cleanupchans.man, doc/src/ns_eval.man,
	doc/src/ns_ictl.man, doc/src/ns_init.man,
	doc/src/ns_markfordelete.man, doc/src/ns_reinit.man:
	Update interp documentation

2007-06-26 17:44 +0100  Stephen Deasey  <sdeasey@gmail.com>  (b5f7ef2c1d7e)

	* ChangeLog, nslog/nslog.c:
	Add missing space before appending 'referer' log entry

2007-06-26 01:06 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6e63f8adf2fc)

	* ChangeLog, configure.in:
	Use modern autoconf macros to check for various integer types

	Define them if not provided by the host OS. This should be enough to
	kill off ns_int8/16/32 etc. in ns.h

	Add checks for intptr_t and intmax_t which we now use.

2007-06-26 00:48 +0100  Stephen Deasey  <sdeasey@gmail.com>  (4d620ac5351f)

	* ChangeLog, configure.in:
	Check compiler earlier in sequence to avoid redundant checks later

2007-06-26 00:31 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ffc0bc82a470)

	* ChangeLog, tests/test.nscfg:
	Log the request time in the access log, for testing

2007-06-26 00:18 +0100  Stephen Deasey  <sdeasey@gmail.com>  (12fca7c4a9b5)

	* nsd/dsprintf.c: deleted file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/dsprintf.c,
	nsd/dstring.c, nsd/sched.c, nsd/tclcache.c, nsd/tcltime.c:
	Implement Ns_DStringVPrintf() using OS vsnprintf() to pick up modern
	format specifiers and bug fixes

	(dsprintf.c was 7 year old NetBSD code)

	This is similar to the old AOLserver 3.x implementation except that
	instead of printing into a large stack buffer and ignoring
	overflows, taking the hit of always copying the result into the
	dstring, we manipulate the dstring buffer and print directly into
	it. (There are only 2 instances in the current test suite where we
	overflow static space and need to grow.)

	NB: Win32 is handled, but untested. I don't think we care about Irix
	any more, which seems to have been a concern of the old code.

	* nsd/tcltime.c: Quieten some compiler warnings when platform time_t
	is not a long.

2007-06-25 18:53 +0100  Stephen Deasey  <sdeasey@gmail.com>  (83701938285e)

	* ChangeLog, include/nsthread.h:
	Don't protect inttypes.h with an ifdef in a public header

	Unfortunately this will never be picked up from the private
	config.h. Explicitly include stdint.h which doesn't get dragged in
	by other means on freebsd.

2007-06-25 18:47 +0100  Stephen Deasey  <sdeasey@gmail.com>  (80ef3455fe12)

	* ChangeLog, nsd/config.c:
	An uninitialized variable was being read in a non-critical config
	routine

2007-06-11 21:55 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (912779709e6f)

	* ChangeLog, nsd/tcltime.c:
	Silence compier warning

	make test now fails on encoding tests after last updates

2007-06-09 20:48 +0100  Stephen Deasey  <sdeasey@gmail.com>  (9e9368318c7c)

	* ChangeLog, include/nsthread.h, nscp/nscp.c, nsd/adpcmds.c,
	nsd/adpeval.c, nsd/config.c, nsd/dns.c, nsd/driver.c,
	nsd/fastpath.c, nsd/fd.c, nsd/httptime.c, nsd/log.c, nsd/nswin32.c,
	nsd/pidfile.c, nsd/queue.c, nsd/return.c, nsd/sched.c,
	nsd/sockcallback.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tcljob.c,
	nsd/tclset.c, nsd/tclsock.c, nsd/tcltime.c, nsdb/dbtcl.c,
	nslog/nslog.c, nsperm/nsperm.c, nsproxy/nsproxylib.c,
	nsthread/mutex.c, nsthread/reentrant.c, nsthread/thread.c,
	nsthread/winthread.c:
	Replace various calls to sprintf() into fixed-sized buffers with
	safer routines

	Replace with calls to Ns_DStringPtrintf(), direct use of Tcl objects
	for return values, or use of bounded snprintf() calls. Make sure
	buffer sizes are reasonable and have well defined lifetimes.

2007-06-09 01:37 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7e0a3557f3df)

	* ChangeLog, nsd/driver.c, nsd/fastpath.c, nsd/return.c:
	Use TCL_LL_MODIFIER to format Tcl_WideInt types to prevent warnings
	on certain 64bit systems

2007-06-07 19:46 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (62f8f4bddb8f)

	* ChangeLog, nsd-config.tcl, sample-config.tcl.in:
	Update config parameters debug into logdebug

2007-06-04 19:57 +0100  Stephen Deasey  <sdeasey@gmail.com>  (790ad9196bc0)

	* ChangeLog, nsd/binder.c, nsd/cls.c, nsd/conn.c, nsd/limits.c,
	nsd/listen.c, nsd/returnresp.c, nsd/sched.c, nsd/sls.c,
	nsd/sockcallback.c, nsd/tclfile.c, nsd/tclobjv.c, nsd/tclsock.c,
	nsdb/dbinit.c, nsperm/nsperm.c, nsproxy/nsproxylib.c:
	Add a lot of ugly casting when passing int's through void pointer
	storage

	This prevent compiler warnings when an int and a pointer are not the
	same size.

	(mainly Tcl hash tables)

2007-06-04 18:41 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f63bf2cb5677)

	* nsthread/signal.c:
	Include pthread.h for definition of pthread_sigmask() on FreeBSD

2007-06-04 18:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (11cf91ec7594)

	* include/nsthread.h, nsd/log.c, nsd/tclinit.c, nsd/tclthread.c,
	nsthread/cslock.c, nsthread/nsthreadtest.c, nsthread/pthread.c,
	nsthread/thread.c, nsthread/tls.c, nsthread/winthread.c:
	Convert Ns_ThreadId() to return a uintptr_t

	An uintptr_t is an integral type which is as long as a pointer, so
	that it can accurately hold an opaque pthread_t whether it is
	implemented as an integer type, a pointer, and on 32/64 bit
	machines. This fixes many pointer/integer of different size
	warnings.

	Log messages now print the thread ID in hex, for brevity on 64bit
	machines.

	NB: depending on the architecture of your machine, the ABI may have
	changed and require a recompile.

2007-06-02 17:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1b7077008d93)

	* nsd/adpparse.c:
	Remove redundant code which was reading an uninitialized variable

2007-06-02 17:13 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c964b23d6189)

	* tests/ns_nsv.test:
	Match using globbing to handle different Tcl version error messages

2007-05-25 22:14 +0100  Stephen Deasey  <sdeasey@gmail.com>  (bd04837d8050)

	* tests/ns_gifsize.test, tests/ns_info.test, tests/ns_jpegsize.test,
	tests/test.nscfg, tests/timeout.test:
	Fixup a variety of tests

	* tests/ns_gifsize.test:
	* tests/ns_jpegsize.test: Remove redundant checks for sample files. Be
	more explicit about where the files live in the file system.

	* tests/ns_info.test: Be a little less brittle when checking the
	binary name.

	* tests/timeout.test: Temporarily mark a timeout test knownBug until
	I add support to the ADP code.

	* tests/test.nscfg: Add a log-level Devel placeholder (default off),
	which is handy for checking config values etc.

2007-05-25 19:43 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d2e921e14989)

	* nsd/adpeval.c, nsd/nsconf.c, nsd/nsd.h, nsd/server.c:
	Move the ADP config into a ServerInitProc callback within the ADP
	code

2007-05-25 15:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (18450f1faccf)

	* Makefile:
	Fixed install-doc target so it will not put .html in the top dir
	anymore

2007-05-25 14:15 +0100  Stephen Deasey  <sdeasey@gmail.com>  (18b2f2739098)

	* include/ns.h, nsd/config.c:
	Add Ns_ConfigFlags() to simplify setting flag options

2007-05-25 11:45 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3a7f0857b62c)

	* tcl/config.tcl: new file.
	* tcl/config.tcl:
	Move ADP and Tcl page mapping config, with existing semantics, from
	C to Tcl

2007-05-25 01:39 +0100  Stephen Deasey  <sdeasey@gmail.com>  (62dd041c71ef)

	* tests/adp.test: new file.
	* nsd/proc.c, nsd/tclcmds.c, nsd/tclrequest.c, tests/adp.test:
	Add ns_register_tcl, analogous to ns_register_adp; make mapped pages
	respect -cache; allow relative path names for mapped pages

2007-05-25 00:15 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ea62e5c45ce0)

	* tests/testserver/pages/helloworld.adp: new file.
	* tests/testserver/pages/helloworld.adp:
	(NsTclRegisterAdpObjCmd): add -cache option to ns_register_adp to
	enable output caching

	Add simple plain ADP page test.

2007-05-24 23:33 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a093af6b2070)

	* nsd/adprequest.c, nsd/fastpath.c:
	Make ADP and Tcl page handlers public (Ns_AdpPageProc,
	Ns_TclPageProc) and use them directly from ns_register_adp etc.

	Clean up arg handling -- get the NsServer via the Conn rather than
	explicitly passing it around.

2007-05-24 23:02 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (df19117f2927)

	* sample-config.tcl.in:
	Update config parameter because of dropping file.tcl; parameters
	moved to ns/server/servername/adp

2007-05-24 21:23 +0100  Stephen Deasey  <sdeasey@gmail.com>  (da32c487e249)

	* nsd/connio.c, tests/encoding.test:
	Use a more robust check for buffer full condition

	Tcl may not fill it all the way when it complains of lack of space.
	Fixes bug reported by Neophytos Demetriou, Thanks.

2007-05-24 21:16 +0100  Stephen Deasey  <sdeasey@gmail.com>  (b43f1e223319)

	* nsd/adpcmds.c:
	Remove tabs and re-indent

2007-05-24 18:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a4de12b69acf)

	* tests/testserver/pages/helloworld.tcl: new file.
	* tests/testserver/pages/helloworld.tcl:
	Add basic test of Tcl page processing, short and long pages

2007-05-24 00:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (38331ec256df)

	* ChangeLog, nsd/adpeval.c, nsd/encoding.c, nsd/nsconf.c, nsd/nsd.h,
	nsd/server.c, nsd/urlencode.c, tests/test.nscfg:
	Make global file encodings to per-server; make url and content
	encodings per-server only

2007-05-24 00:09 +0100  Stephen Deasey  <sdeasey@gmail.com>  (56d0d0167dce)

	* ChangeLog, nsd/encoding.c, nsd/init.c, nsd/nsconf.c, nsd/nsd.h,
	nsd/tclcmds.c:
	Consolidate encoding configuration; convert ns_charsets to Obj
	command

2007-05-23 18:19 +0100  Stephen Deasey  <sdeasey@gmail.com>  (da949b58c3c9)

	* tests/testserver/pages/encoding.iso-8859-2_adp: new file.
	* ChangeLog, nsd/encoding.c, tests/encoding.test, tests/test.nscfg,
	tests/testserver/pages/encoding.iso-8859-2_adp:
	Use the http charset aliases to convert ADP pages as they are read
	from disk; add a couple of tests

	This fixes the log warning "encoding: could not load: iso-8859-1",
	and unfortunately highlights another broken test: encoding-3.3 added
	to knownBug...

2007-05-23 18:03 +0100  Stephen Deasey  <sdeasey@gmail.com>  (72f6d1a973fe)

	* ChangeLog, tests/encoding.test:
	Re-enable some encoding tests which actually do work and reformat
	the tests for clarity

2007-05-23 14:16 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f08fd0d34039)

	* ChangeLog, tests/http.test, tests/http_chunked.test,
	tests/ns_adp_compress.test, tests/testserver/modules/testhttp.tcl:
	(nstest_http): revert to chunk-agnostic mode; fix chunk tests

	* tests/testserver/modules/testhttp.tcl: Revert the chunk handling
	code -- it obscures the test expectations for the chunk tests as
	worse: it hides bugs in various parts of the server.

	* tests/http_chunked.test: Revert to explicit chunk checking, and
	mark a couple of tests knownBug which are being chunked but
	shouldn't be.

	* tests/http.test: Mark some tests knownBug which are being sent
	back chunk encoded, but shouldn't be.

	* tests/ns_adp_compressed.test: Revert the sense of this test: we do
	in fact expect a newline byte as part of the binary byte stream, not
	a carriage return which we were accidentally converting.

2007-05-23 12:56 +0100  Stephen Deasey  <sdeasey@gmail.com>  (08ad76719a3c)

	* ChangeLog, nsd/progress.c:
	(NsTclProgressObjcmd): make sure progress monitoring is enabled
	before checking an uninitialized hash table

2007-05-23 10:36 +0100  Stephen Deasey  <sdeasey@gmail.com>  (25e32b708ee7)

	* ChangeLog, tests/encoding.test:
	Uncomment tests 3.5 and 3.6 and mark as knownBug

	They now show up in the test summary as skipped. Untabify code.

2007-05-21 20:46 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9ee1ddc01792)

	* ChangeLog, doc/src/ns_perm.man, nsperm/nsperm.c:
	nsperm: support clear text passwords

2007-05-21 06:28 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (47e0be8ba5ef)

	* ChangeLog, doc/src/ns_perm.man, include/ns.h, nsd/auth.c,
	nsd/conn.c, nsd/tclcmds.c, nsd/tclmisc.c, nsperm/nsperm.c:
	(ns_md5): new command using public domain md5 implementation

	* include/ns.h:
	* nsd/tclmisc.c: Added public domain MD5 implementation, new command
	ns_md5 created, new C API public functions added:
	Ns_CtxMD5Init(Ns_CtxMD5 *ctx) Ns_CtxMD5Update(Ns_CtxMD5 *ctx,
	unsigned const char *buf, unsigned len) Ns_CtxMD5Final(unsigned char
	digest[16], Ns_CtxMD5 *ctx) Ns_CtxSHAInit(Ns_CtxSHA1 *ctx)
	Ns_CtxSHAUpdate(Ns_CtxSHA1 *ctx, const unsigned char *buf, unsigned
	len) Ns_CtxSHAFinal(unsigned char digest[20], Ns_CtxSHA1 *ctx)

	* nsperm/nsperm.c: Added first pieces to support both Basic and
	Digest authentications

2007-05-21 00:16 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7d329a09dd4b)

	* ChangeLog, tests/ns_conn.test:
	Fix broken ns_conn test due to signature changing

2007-05-21 00:12 +0100  Stephen Deasey  <sdeasey@gmail.com>  (618f903c9488)

	* ChangeLog, nsd/callbacks.c:
	Log before running callbacks (making sure not to log an
	uninitialized pointer this time)

2007-05-20 22:40 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (c8b591c2344f)

	* ChangeLog, doc/src/ns_perm.man, include/ns.h, include/nsthread.h,
	nscgi/nscgi.c, nsd/auth.c, nsd/callbacks.c, nsd/conn.c, nsd/nsd.h,
	nsd/op.c, nsd/queue.c, nsd/set.c, nslog/nslog.c, nsperm/init.tcl,
	nsperm/nsperm.c, nsthread/memory.c:
	Redesign authentication mechanism

	* include/ns.h:
	* include/nsthread.h:
	* nsd/nsd.h:
	* nsd/auth.c:
	* nsd/queue.c:
	* nsd/callbacks.c:
	* nsd/op.c:
	* nsd/conn.c:
	* nsperm/nsperm.c: Changed the internal format of authentication
	mechanism. Instead of keeping jusr user/passwd in the Conn struct,
	there is Ns_Set *auth which keeps all auth related data as
	name/value pairs. By default for Basic auth 2 entries will be put
	there: User and Password. For Digest method there will be more. All
	references to authUser and authPassword in the code have been
	replaced with Ns_ConnAuthUser and Ns_ConnAuthPasswd.

	Added public function Ns_ConnAuth which returns Ns_Set with all
	securoty tokens.

	ns_info also got additional argument ns_info auth, return name os
	the set

	* nslog/nslog.c:
	* nscgi/nscgi.c: Updated not to use authUser directly but use
	Ns_ConnAuthUser function instead

	* nsd/set.c: Added public function Ns_SetPutSz that take additional
	parameter as size of the string to put into set

	* nsthread/memory.c: Added public function ns_strncopy for
	duplicating part of the string only

2007-05-20 22:10 +0100  Stephen Deasey  <sdeasey@gmail.com>  (9230e03b109b)

	* ChangeLog, nsd/init.tcl, nsd/nsd.h, nsd/tclcmds.c, nsd/tclinit.c:
	Cleanups and improvements to interp initialization, ns_ictl

	* nsd/nsd.h:
	* nsd/tclinit.c:
	* nsd/init.tcl:
	* nsd/tclcmds.c: Run interp finalization traces in LIFO order
	(initialization still FIFO) and drop the explicit calls to ns_init
	and ns_cleanup (which haven't existed in the code for a while). Re-
	create ns_init and ns_cleanup and register them as traces from the
	init.tcl bootstrap script. They should fire first and last on
	allocation/deallocation.

	Add the runtraces subcommand to ns_ictl which provides the trigger
	necessary to re-run the traces from ns_reinit for long running
	threads. Previously, module specific cleanup was not happening.

	Add the gettraces subcommand to ns_ictl for introspection of
	registered traces, and add some extra debug level logging.

	(Much of this is inspired by, and should be similar to AOLserver,
	although the trace implementation is a little different.)

2007-05-20 01:41 +0100  Stephen Deasey  <sdeasey@gmail.com>  (71d44878f1c5)

	* ChangeLog, nsd/callbacks.c:
	Rearrange code for clarity; add debug logging when at-startup, at-
	signal etc. callbacks are run

2007-05-20 01:24 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (4f6302c396ad)

	* ChangeLog, nsd/returnresp.c:
	(Ns_ConnReturnUnauthorized): check if header WWW-Authenticate
	already exists

	This is in anticipation of new Digest auth method to be implemented
	soon.

2007-05-20 01:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (15e142324259)

	* ChangeLog, nsd/tclcallbacks.c:
	(Ns_TclEvalCallback): don't log debug messages unconditionally for
	all callbacks

	This can cause infinite loops e.g. with log filter callbacks.

2007-05-20 01:03 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5ba32f5a606b)

	* ChangeLog, nsd/proc.c:
	Add introspection info for the ADP (and Tcl) page callbacks,
	including a new arg proc for Ns_Time values

2007-05-20 00:57 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d49ac208dc2c)

	* ChangeLog, nsdb/nsdb.c, nslog/nslog.c, nsproxy/nsproxymod.c:
	Add introspection info for nsproxy callbacks

2007-05-20 00:50 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6bd23fd99e8f)

	* ChangeLog, include/ns.h, nsd/log.c:
	(Ns_LogLevel): new function, return true if the given log severity
	level is enabled

	Sometimes the message you need to log is expensive to construct, so
	you'd like to construct it only if it's needed.

2007-05-16 17:04 +0100  Stephen Deasey  <sdeasey@gmail.com>  (4ca76cf73a4b)

	* ChangeLog, include/ns.h, nsd/fastpath.c, nsd/log.c, nsd/main.c,
	nsd/nsconf.c, nsd/nsd.h, nsd/op.c, nsd/pathname.c, nsd/returnresp.c,
	nsd/server.c, nsd/tclinit.c, nsd/tclvar.c, nsd/url2file.c:
	Add NsRegisterServerInit and use it throughout core

	* nsd/nsd.h:
	* nsd/server.c: Add new function NsRegisterServerInit() which
	registers an Ns_ServerInitProc callback. These are called once for
	each virtual server, after the config file has been parsed, to allow
	subsystems to configure themselves.

	Much of the 'crazy state' of NsInitServer() has been broken out into
	Ns_ServerInitProc callbacks within each subsystem.

	* nsd/op.c (ConfigServerProxy):
	* nsd/fastpath.c (ConfigServerFastpath):
	* nsd/url2file.c (ConfigServerUrl2File):
	* nsd/pathname.c (ConfigServerVhost):
	* nsd/returnresp.c (ConfigServerRedirects):
	* nsd/tclinit.c (ConfigServerTcl): Add Ns_ServerInitProc configuration
	callbacks. Code migrated from NsServerInit().

	* nsd/nsconf.c (NsConfUpdate): Add new hooks NsConfigRedirects() and
	NsConfigVhost() so that the per-server initialization callbacks can
	be registered.

	* nsd/log.c: Move existing initialization functions to top of source
	file.

	* include/ns.h (Ns_ServerInitProc):
	* nsd/main.c (ServerInit):
	* nsd/tclvar.c (NsTclCreateBuckets): Add CONST declarations.

2007-05-15 00:45 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3da5d5e878b5)

	* nsd/returnresp.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/return.c,
	nsd/returnresp.c:
	Move functions which return standard HTTP responses, and which may
	have the response HTML templated, together

2007-05-14 22:31 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f6d714c318b3)

	* naviserver.rdf.in: new file.
	* naviserver.rdf: deleted file.
	* .cvsignore, ChangeLog, Makefile, configure.in, naviserver.rdf,
	naviserver.rdf.in:
	Auto-generate DOAP release data

2007-05-14 16:03 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (0ef0efdbbf3a)

	* NEWS, sample-config.tcl.in:
	Update NEWS with stuff that has been added, not complete list yet

2007-05-14 02:34 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1107541ed5ef)

	* ChangeLog, nsd/nsd.h:
	Remove duplicate definition of public functions from private header

2007-05-14 02:25 +0100  Stephen Deasey  <sdeasey@gmail.com>  (868162ea4e34)

	* ChangeLog, nsd/dns.c, nsd/nsconf.c, nsd/nsd.h:
	Consolidate dns configuration into single NsConfigDNS() function

2007-05-14 02:00 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f7874ba800bb)

	* ChangeLog, Makefile:
	Cleanup the various variables needed to run the tests

2007-05-13 20:48 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0ec0a268a81d)

	* nsd/watchdog.c: new file.
	* ChangeLog, nsd/Makefile, nsd/nsd.h, nsd/nsmain.c, nsd/watchdog.c:
	Move the watchdog code into it's own file

2007-05-13 20:11 +0100  Stephen Deasey  <sdeasey@gmail.com>  (729147aa2699)

	* ChangeLog, nsd/fd.c, nsd/init.c, nsd/nsd.h, nsd/nsmain.c:
	Backport changes from AOLserver to cleanup stdin/stdout/stderr
	initialization

	Move it out of the crazy nsmain.c.

2007-05-13 18:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (3effa7cefdf8)

	* doc/src/nsv.man: new file.
	* doc/src/nsv_append.man, doc/src/nsv_array.man,
	doc/src/nsv_exists.man, doc/src/nsv_get.man, doc/src/nsv_incr.man,
	doc/src/nsv_lappend.man, doc/src/nsv_names.man, doc/src/nsv_set.man,
	doc/src/nsv_unset.man, doc/src/tcl-nsv.man: deleted file.
	* ChangeLog, doc/src/nsv.man, doc/src/nsv_append.man,
	doc/src/nsv_array.man, doc/src/nsv_exists.man, doc/src/nsv_get.man,
	doc/src/nsv_incr.man, doc/src/nsv_lappend.man,
	doc/src/nsv_names.man, doc/src/nsv_set.man, doc/src/nsv_unset.man,
	doc/src/tcl-nsv.man:
	Combine all nsv commands into one man page

2007-05-13 17:39 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (0e96d81933eb)

	* Makefile:
	Add first run tips to Makefile install notice

2007-05-13 15:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (55bbe8861532)

	* m4/zlib.m4: new file.
	* ChangeLog, configure.in, include/Makefile.global.in, m4/cmmsg.m4,
	m4/dns.m4, m4/zlib.m4:
	Autoconf macro cleanup; link only libnsd against libz, libcrypt

	* configure.in:
	* m4/cmmsg.m4:
	* m4/dns.m4:
	* m4/zlib.m4:
	* include/Makefile.global.in: Remove some deprecated autoconf macros
	and move more of the dns checks out of configure.in and into
	m4/dns.m4. Make sure only libnsd gets linked against libz and
	libcrypt.

2007-05-13 00:26 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (2c6d84650401)

	* ChangeLog, Makefile:
	Add missing files, including autogen.sh to 'make dist' target

2007-05-12 21:10 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (7e5af2d54ac5)

	* ChangeLog, sample-config.tcl.in:
	Reflect recent changes into sample-config.tcl

2007-05-12 20:49 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ceb86aac0edd)

	* ChangeLog, nsd/adpparse.c, nsd/tclhttp.c:
	Silence compiler warnings

2007-04-30 18:10 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (8f4ae5920c0f)

	* ChangeLog, doc/src/ns_perm.man, nsperm/init.tcl, nsperm/nsperm.c:
	Add missing ns_perm checkpass, setpass; add new listusers,
	listgroups

	Update all commands to use Tcl_Objs.

2007-04-27 18:23 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (3ae9c935ff50)

	* ChangeLog, include/ns.h:
	Similar to ns_int64, define same types for 8, 16, 32 bits

2007-04-24 17:06 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (6c4037ad858d)

	* ChangeLog, include/ns.h, nsd/adpparse.c, nsd/sockcallback.c,
	nsd/task.c, nsd/tclhttp.c:
	Changed NS_SOCK_DROP to NS_SOCK_DONE; call NS_SOCK_DONE for cleanup
	callbacks

2007-04-19 12:17 +0100  Zoran Vasiljevic  <zv@archiware.com>  (1e259e26ed7d)

	* ChangeLog, nsd/tclcallbacks.c:
	Add debug logging of the callback that is about to run

2007-04-19 12:16 +0100  Zoran Vasiljevic  <zv@archiware.com>  (7f352237256e)

	* nscp/nscp.c:
	Change size_t variable to int as size_t is unsigned on Windows and
	this makes troubles

2007-04-05 05:28 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (0d5af63e80e2)

	* ChangeLog, nsd/driver.c:
	Use poll in WriterThread instead of active pushing; faster, simpler

2007-03-27 04:18 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9e4fc4f33213)

	* ChangeLog, nsd/tclhttp.c:
	(ns_http): handle binary results properly

2007-03-24 15:27 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d80eebd11bb1)

	* nsproxy/nsproxylib.c:
	Silence some compiler warnings (how come I haven't seen them
	before?)

2007-03-24 14:19 +0000  Zoran Vasiljevic  <zv@archiware.com>  (40ce458fd40f)

	* Makefile:
	Old Solaris sh does not recognize [ == ] constructs...

2007-03-24 14:16 +0000  Zoran Vasiljevic  <zv@archiware.com>  (2f2cb013389d)

	* ChangeLog, Makefile:
	Remove check for "dtplite" as this is now mandatory part of build-
	doc

	Also, "which" utility, as provided by Solaris is very clumsy and
	emits spurious messages on stdout when the argument cannot be
	located. This makes it useless for programatic executable checks.

2007-03-24 13:40 +0000  Zoran Vasiljevic  <zv@archiware.com>  (ef7f8b7895bf)

	* Makefile:
	Make install-doc fault-tolerant: if no generated doc-files found, do
	not bark

2007-03-24 12:50 +0000  Zoran Vasiljevic  <zv@archiware.com>  (fc979bb04e20)

	* ChangeLog, Makefile:
	Separated build-doc from the install target

	Doc building has nothing to do with the installation. It must be
	performed as a separate step prior making the distribution file.

2007-03-24 12:47 +0000  Zoran Vasiljevic  <zv@archiware.com>  (269567454fa6)

	* include/Makefile.module.in, nsperm/Makefile:
	Silence mkdir during installation

2007-03-24 10:28 +0000  Zoran Vasiljevic  <zv@archiware.com>  (c052634e63b1)

	* m4/tcl.m4:
	Scrapped MACOSX_DEPLOYMENT_TARGET as this is not needed for 10.4

2007-03-24 09:54 +0000  Zoran Vasiljevic  <zv@archiware.com>  (1b44c4fd5bf5)

	* nsproxy/ns_proxy.man: deleted file.
	* nsproxy/ns_proxy.man:
	Move ns_proxy man page to docs directory

2007-03-23 17:12 +0000  Zoran Vasiljevic  <zv@archiware.com>  (6a99d495e118)

	* ChangeLog, nsthread/winthread.c:
	Remove home-brew windows mutex code in favour of Win CriticalSection

2007-03-22 16:19 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e8406181f899)

	* ChangeLog, Makefile:
	Copy .css files when installing .html docs

2007-03-21 15:58 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (8cb8acb75998)

	* ChangeLog:
	Ammend ChangeLog with API change warning for large-file support

	IMPORTANT API changes: (length, nsend) parameters are now
	Tcl_WideInt, so it requires to recompile all modules that use those
	functions:

	int Ns_ConnSendChannel(Ns_Conn *conn, Tcl_Channel chan, Tcl_WideInt
	nsend) int Ns_ConnSendFp(Ns_Conn *conn, FILE *fp, Tcl_WideInt nsend)
	int Ns_ConnSendFd(Ns_Conn *conn, int fd, Tcl_WideInt nsend)

	void Ns_ConnSetRequiredHeaders(Ns_Conn *conn, CONST char *type,
	Tcl_WideInt length) void Ns_ConnSetLengthHeader(Ns_Conn *conn,
	Tcl_WideInt length) int Ns_ConnReturnOpenChannel(Ns_Conn *conn, int
	status, CONST char *type, Tcl_Channel chan, Tcl_WideInt length) int
	Ns_ConnReturnOpenFile(Ns_Conn *conn, int status, CONST char *type,
	FILE *fp, Tcl_WideInt length) int Ns_ConnReturnOpenFd(Ns_Conn *conn,
	int status, CONST char *type, int fd, Tcl_WideInt length)

2007-03-18 18:52 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (9826b67e6b9a)

	* ChangeLog, include/nsthread.h, nsd/log.c, nsd/nsd.h, nslog/nslog.c:
	Add O_LARGEFILE flag to open calls in logging modules

	This will allow us to support files > 2Gb. If that is not supported,
	fake O_LARGEFILE is defined.

2007-03-17 20:25 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (697821ae6f33)

	* doc/src/ns_http.man:
	Updated ns_http command with correct parameters description

2007-03-17 20:15 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d4b2a183107e)

	* ChangeLog, include/ns.h, nsd/task.c, nsd/tclhttp.c, nsd/tclobjv.c:
	Port task system from AOLserver 4.5; add 'list' to ns_http; add
	Ns_ObjvSet

	* nsd/tclhttp.c: Ported task-based http retrieval facility from AS
	4.5 tree, changed to use Ns_ParseArgs. Added new subcommand list
	which shows currerntly running tasks with url and completion status

	* nsd/task.c: Added Ns_TaskCompleted function which just returns 0
	or 1 for any given task

	* nsd/tclobjv.c: Added new public function Ns_ObjvSet that retrieves
	ns_Set given as a parameter

2007-03-17 16:58 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (9a90b5149552)

	* ChangeLog, Makefile:
	Make build-doc detect dtplite when building documentation

2007-03-15 01:51 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a5c13d29fa11)

	* ChangeLog, nsd/binder.c:
	Changed type to size_t to be compatible with 64 bits systems, e.g.
	CentOS

2007-03-10 18:36 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (0f61290d6a40)

	* doc/src/main-history.man:
	Correct automatic sed replacament of licenseing

2007-03-10 18:25 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (552cb6528c61)

	* Makefile:
	Add clean-bak into main makefile to quickly remove backup files if
	needed

2007-03-10 18:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (7fb14b6eebe8)

	* doc/src/main-history.man, include/nscheck.h, m4/cmmsg.m4, m4/dns.m4,
	nscgi/Makefile, nscgi/nscgi.c, nscp/Makefile, nscp/nscp.c,
	nsd/Makefile, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/adprequest.c, nsd/auth.c, nsd/cache.c, nsd/cls.c,
	nsd/compress.c, nsd/connio.c, nsd/crypt.c, nsd/dsprintf.c,
	nsd/encoding.c, nsd/exec.c, nsd/fd.c, nsd/filter.c, nsd/form.c,
	nsd/httptime.c, nsd/index.c, nsd/lisp.c, nsd/listen.c, nsd/main.c,
	nsd/mimetypes.c, nsd/nsconf.c, nsd/nsthread.c, nsd/op.c,
	nsd/pathname.c, nsd/quotehtml.c, nsd/random.c, nsd/request.c,
	nsd/return.c, nsd/sched.c, nsd/sockcallback.c, nsd/stamp.c,
	nsd/tclcache.c, nsd/tclconf.c, nsd/tclenv.c, nsd/tclhttp.c,
	nsd/tclinit.c, nsd/tclsched.c, nsd/tclshare.c, nsd/tclthread.c,
	nsd/tclvar.c, nsd/url.c, nsd/url2file.c, nsd/urlencode.c,
	nsd/urlspace.c, nsd/uuencode.c, nsdb/db.h, nsdb/dbdrv.c,
	nsdb/dbinit.c, nsdb/dbutil.c, nsdb/nsdb.c, nslog/Makefile,
	nsperm/Makefile, nsperm/compat.tcl, nsperm/init.tcl,
	nsperm/nsperm.c, nssock/Makefile, nssock/nssock.c,
	nsthread/Makefile, nsthread/cslock.c, nsthread/error.c,
	nsthread/fork.c, nsthread/master.c, nsthread/memory.c,
	nsthread/mutex.c, nsthread/pthread.c, nsthread/reentrant.c,
	nsthread/rwlock.c, nsthread/sema.c, nsthread/signal.c,
	nsthread/thread.c, nsthread/thread.h, nsthread/time.c,
	nsthread/tls.c, nsthread/winthread.c, tests/all.tcl, tests/http-
	test-config.tcl, tests/http.test, tests/http_byteranges.test,
	tests/ns_addrbyhost.test, tests/ns_adp_compress.test,
	tests/ns_hostbyaddr.test, tests/ns_hrefs.test,
	tests/ns_uuencode.test, tests/progress.test,
	tests/testserver/modules/testhttp.tcl,
	tests/testserver/modules/vhost.tcl:
	Global change of all source files, replacing AOLserver license with
	Mozilla license

2007-02-24 05:07 +0000  Stephen Deasey  <sdeasey@gmail.com>  (7a287f9e275b)

	* doc/src/ns_stats.man: deleted file.
	* ChangeLog, doc/src/ns_stats.man:
	Remove doc for long-dead ns_stats command

2007-02-24 04:50 +0000  Stephen Deasey  <sdeasey@gmail.com>  (969be7b901e1)

	* doc/src/mann/ns_return.man: new file.
	* doc/src/ns_connsendfp.man, doc/src/ns_headers.man,
	doc/src/ns_respond.man, doc/src/ns_return.man,
	doc/src/ns_returnfile.man, doc/src/ns_returnfp.man,
	doc/src/ns_startcontent.man, doc/src/ns_write.man,
	doc/src/ns_writefp.man: deleted file.
	* ChangeLog, doc/src/mann/ns_return.man, doc/src/ns_connsendfp.man,
	doc/src/ns_headers.man, doc/src/ns_respond.man,
	doc/src/ns_return.man, doc/src/ns_returnfile.man,
	doc/src/ns_returnfp.man, doc/src/ns_startcontent.man,
	doc/src/ns_write.man, doc/src/ns_writefp.man:
	Consolidate response construction commands into one man page

2007-02-24 01:26 +0000  Stephen Deasey  <sdeasey@gmail.com>  (6e8e9a454c2a)

	* doc/src/mann/ns_returnerror.man: new file.
	* doc/src/ns_returnadminnotice.man, doc/src/ns_returnbadrequest.man,
	doc/src/ns_returnerror.man, doc/src/ns_returnforbidden.man,
	doc/src/ns_returnmoved.man, doc/src/ns_returnnotfound.man,
	doc/src/ns_returnnotice.man, doc/src/ns_returnok.man,
	doc/src/ns_returnredirect.man, doc/src/ns_returnunauthorized.man,
	doc/src/ns_returnunavailable.man: deleted file.
	* ChangeLog, doc/src/mann/ns_returnerror.man,
	doc/src/ns_returnadminnotice.man, doc/src/ns_returnbadrequest.man,
	doc/src/ns_returnerror.man, doc/src/ns_returnforbidden.man,
	doc/src/ns_returnmoved.man, doc/src/ns_returnnotfound.man,
	doc/src/ns_returnnotice.man, doc/src/ns_returnok.man,
	doc/src/ns_returnredirect.man, doc/src/ns_returnunauthorized.man,
	doc/src/ns_returnunavailable.man:
	Consolidate commands which return HTTP response codes into a single
	man page

2007-02-23 21:26 +0000  Stephen Deasey  <sdeasey@gmail.com>  (e545878f52f2)

	* doc/src/mann/ns_atsignal.man: new file.
	* doc/src/ns_atexit.man, doc/src/ns_atprestartup.man,
	doc/src/ns_atshutdown.man, doc/src/ns_atsignal.man,
	doc/src/ns_atstartup.man: deleted file.
	* ChangeLog, doc/src/mann/ns_atsignal.man, doc/src/ns_atexit.man,
	doc/src/ns_atprestartup.man, doc/src/ns_atshutdown.man,
	doc/src/ns_atsignal.man, doc/src/ns_atstartup.man:
	Consolidate the server callbacks into a single man page

2007-02-23 20:16 +0000  Stephen Deasey  <sdeasey@gmail.com>  (a117acd01512)

	* doc/src/mann/ns_memoize.man: new file.
	* doc/src/ns_memoize.man: deleted file.
	* ChangeLog, doc/src/mann/ns_memoize.man, doc/src/ns_memoize.man:
	Move the memoize command documentation into the mann directory

2007-02-23 19:53 +0000  Stephen Deasey  <sdeasey@gmail.com>  (b7875927e01d)

	* doc/src/mann/ns_cache.man: new file.
	* doc/src/ns_cache_append.man, doc/src/ns_cache_create.man,
	doc/src/ns_cache_eval.man, doc/src/ns_cache_flush.man,
	doc/src/ns_cache_incr.man, doc/src/ns_cache_keys.man,
	doc/src/ns_cache_lappend.man, doc/src/ns_cache_names.man,
	doc/src/ns_cache_stats.man: deleted file.
	* ChangeLog, doc/src/commandlist.man, doc/src/mann/ns_cache.man,
	doc/src/ns_cache_append.man, doc/src/ns_cache_create.man,
	doc/src/ns_cache_eval.man, doc/src/ns_cache_flush.man,
	doc/src/ns_cache_incr.man, doc/src/ns_cache_keys.man,
	doc/src/ns_cache_lappend.man, doc/src/ns_cache_names.man,
	doc/src/ns_cache_stats.man:
	Consolidate the Tcl cache commands documentations into one man page

2007-02-23 17:33 +0000  Stephen Deasey  <sdeasey@gmail.com>  (a582495cbdf2)

	* doc/src/ns_chmod.man, doc/src/ns_cp.man, doc/src/ns_getchannels.man,
	doc/src/ns_link.man, doc/src/ns_mkdir.man, doc/src/ns_rename.man,
	doc/src/ns_rmdir.man, doc/src/ns_share.man, doc/src/ns_var.man:
	deleted file.
	* ChangeLog, doc/src/commandlist.man, doc/src/ns_chmod.man,
	doc/src/ns_cp.man, doc/src/ns_getchannels.man, doc/src/ns_link.man,
	doc/src/ns_mkdir.man, doc/src/ns_rename.man, doc/src/ns_rmdir.man,
	doc/src/ns_share.man, doc/src/ns_var.man:
	Remove the documentation for old, deprecated commands

2007-02-23 17:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (232c6dc67b3c)

	* ChangeLog, nsd/tcljob.c:
	Initialise jobsperthread and jobtimeout correctly

2007-02-22 20:14 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (80f1115c21a7)

	* ChangeLog, tcl/sendmail.tcl:
	(ns_sendmail): check socket writable before sending each line, not
	just once

	In case of pretty big email it sometimes stuck because socket cannot
	accept data anymore and we do not check if it is ready.

2007-02-20 17:30 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7bbfc0e86fac)

	* ChangeLog, tcl/nstrace.tcl:
	Allow nstrace::excludensp to string-match registered namespaces

	This way we can exclude the whole namespace hierarchy if needed.

2007-02-20 17:12 +0000  Zoran Vasiljevic  <zv@archiware.com>  (46ffd4afa9e0)

	* Makefile:
	Suppress command echo during HTML files install

2007-02-20 16:42 +0000  Zoran Vasiljevic  <zv@archiware.com>  (840408d88aeb)

	* ChangeLog, nsd/connio.c, nsd/nsd.h:
	Add platform-specific def of UIO_MAXIOV; if not defined, set to 16

2007-02-20 16:40 +0000  Zoran Vasiljevic  <zv@archiware.com>  (47ffb26080e9)

	* configure.in:
	Simplify calculation of TCL_LIB

2007-02-20 16:37 +0000  Zoran Vasiljevic  <zv@archiware.com>  (377473d3d979)

	* nsproxy/nsproxylib.c:
	Use ns_poll instead of plain poll

2007-02-19 20:20 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (5d60ada7c535)

	* nsd/driver.c:
	Ooops, wrong version of driver.c got into CVS, reverting to original

2007-02-19 20:17 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (562bcb6182c8)

	* ChangeLog, nsd-config.tcl, nsd/adprequest.c, nsd/driver.c,
	nsd/return.c:
	Return chunked response to HTTP/1.1 clients, otherwise return as
	HTTP/1.0 without Content-Length header

2007-02-14 18:45 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (6e90e42212ad)

	* doc/src/keyl.man, doc/src/nsd.css: new file.
	* doc/src/keyldel.man, doc/src/keylget.man, doc/src/keylkeys.man,
	doc/src/keylset.man: deleted file.
	* Makefile, doc/src/admin-install.man, doc/src/keyl.man,
	doc/src/keyldel.man, doc/src/keylget.man, doc/src/keylkeys.man,
	doc/src/keylset.man, doc/src/man3/Ns_Sls.man,
	doc/src/mann/ns_sls.man, doc/src/nsd.css:
	Update documentation, add CSS stylesheet

2007-02-07 16:35 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (34975d490569)

	* ChangeLog, configure.in:
	Changed inet_ntop macro to use AC_CHECK_FUNC

2007-02-03 21:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (fd07315b3c2e)

	* doc/src/ns_register_fasturl2file.man, doc/src/ns_unregister_adp.man,
	doc/src/ns_unregister_proc.man, doc/src/ns_unregister_url2file.man,
	doc/src/ns_unschedule_proc.man: deleted file.
	* doc/src/man3/Ns_Sls.man, doc/src/mann/ns_limits.man,
	doc/src/mann/ns_sls.man, doc/src/ns_checkurl.man,
	doc/src/ns_http.man, doc/src/ns_kill.man,
	doc/src/ns_locationproc.man, doc/src/ns_memoize.man,
	doc/src/ns_moduleload.man, doc/src/ns_parseargs.man,
	doc/src/ns_proxy.man, doc/src/ns_purgefiles.man,
	doc/src/ns_puts.man, doc/src/ns_register_fastpath.man,
	doc/src/ns_register_fasturl2file.man, doc/src/ns_register_proc.man,
	doc/src/ns_register_url2file.man, doc/src/ns_requestauthorize.man,
	doc/src/ns_respond.man, doc/src/ns_schedule_proc.man,
	doc/src/ns_sendmail.man, doc/src/ns_shortcut_filter.man,
	doc/src/ns_startcontent.man, doc/src/ns_unregister_adp.man,
	doc/src/ns_unregister_proc.man, doc/src/ns_unregister_url2file.man,
	doc/src/ns_unschedule_proc.man, doc/src/ns_var.man:
	Documentation updates...

	Still a lot to do but it looks more or less filled now and not
	abandoned anymore.

2007-01-20 19:35 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (dd12f3cf4260)

	* ChangeLog, nsd/encoding.c:
	Change message about encoding loaded from Notice to Debug level

	This message is printed on server start before even log file is
	opened.

2007-01-16 15:49 +0000  Stephen Deasey  <sdeasey@gmail.com>  (4b5fe19b990c)

	* doc/src/mann/ns_cookie.man: new file.
	* doc/src/ns_deletecookie.man, doc/src/ns_getcookie.man,
	doc/src/ns_setcookie.man: deleted file.
	* ChangeLog, doc/src/mann/ns_cookie.man, doc/src/ns_deletecookie.man,
	doc/src/ns_getcookie.man, doc/src/ns_setcookie.man:
	Consolidate the cookie documentation.

2007-01-16 15:24 +0000  Stephen Deasey  <sdeasey@gmail.com>  (7e8767c90b87)

	* doc/src/mann/ns_limits.man: new file.
	* doc/src/ns_limits_get.man, doc/src/ns_limits_list.man,
	doc/src/ns_limits_register.man, doc/src/ns_limits_set.man: deleted
	file.
	* ChangeLog, doc/src/mann/ns_limits.man, doc/src/ns_limits_get.man,
	doc/src/ns_limits_list.man, doc/src/ns_limits_register.man,
	doc/src/ns_limits_set.man:
	Document the ns_limits commands

2007-01-16 11:43 +0000  Stephen Deasey  <sdeasey@gmail.com>  (32ac6f33a5cd)

	* ChangeLog, nsd/tcltime.c:
	(NsTclInitTimeType): Remove unneeded (and wrong on x86-64) int/long
	size test (bug #1636688)

	Thanks, Martin Matuska.

2007-01-09 23:22 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (1c8925e3a9ac)

	* ChangeLog, nsd/adprequest.c:
	Fix bug when ADP flag for processing .tcl files was not set
	correctly

2007-01-08 02:17 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (2bfe67f7e837)

	* doc/src/ns_cleanupchans.man, doc/src/ns_cp.man,
	doc/src/ns_normalizepath.man:
	Fix improper use of tag in docs

2007-01-07 04:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (8ad5b14c7e4b)

	* ChangeLog, nsd/nsconf.c, nsd/nsmain.c:
	If no config file is specified, try to find nsd.tcl in the conf/
	subdir, taking base path from executable

	This requirements looks very non-modern nowadays. Apache uses
	default but can take full path, for example.

2007-01-03 16:10 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (0e2fcfd1a78f)

	* nsd/adpcmds.c:
	Fixed bug in ns_adp_parse command line parsing

2007-01-02 22:24 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (df2021c04893)

	* ChangeLog, doc/src/ns_adp_include.man, doc/src/ns_adp_parse.man,
	nsd/adpcmds.c:
	Updated so flags can be set/unset using ns_adp_ctl command only

	ADP flags are saved before executing include or parse command and
	then restored.

2007-01-01 21:06 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b168b178e346)

	* doc/src/ns_adp_parse.man, nsd/adpcmds.c, nsd/adpeval.c:
	Minor updates to ADP commands regarding cache/nocache options

2006-12-30 02:42 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (523fac981b64)

	* ChangeLog, include/ns.h, nsd/sock.c:
	Add public functions Ns_SockWrite, Ns_SockWriteV which will try to
	send all data provided

2006-12-30 02:18 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (003b815a5cb8)

	* ChangeLog, doc/src/ns_adp_ctl.man, nsd-config.tcl, nsd/adpcmds.c,
	nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c, nsd/nsd.h,
	nsd/server.c:
	Don't cache ADP output by default

	Changed default mode of ADP to no cache, cache if enabled breaks all
	existing dynamic applications, with cache enabled special care must
	be taken in producing correct result and also cache does not account
	for query parameters, so dynamic ADP page cannot be cached if it
	depends on different query parameters.

	Setting it to no cache by default sets behavior to 4.0 ADP
	processing. Caching can be disabled also inside the script, AdpEval
	check for flags during page evaluation.

2006-12-29 17:02 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (760cef9bbc52)

	* ChangeLog, nsd/tcljob.c:
	Possible uninitialized usage of pointer

2006-12-29 16:55 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (c95cdfc72890)

	* ChangeLog, nsd/tclmisc.c:
	(ns_filestat): return correct ctime, mtime

2006-12-27 18:49 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (361cf22db325)

	* doc/src/ns_adp_info.man: new file.
	* ChangeLog, configure.in, doc/src/admin-config.man, doc/src/admin-
	db.man, doc/src/admin-install.man, doc/src/admin-maintenance.man,
	doc/src/admin-tuning.man, doc/src/adp-overview.man,
	doc/src/commandlist.man, doc/src/ns_adp_include.man,
	doc/src/ns_adp_info.man, doc/src/ns_adp_parse.man, doc/src/tcl-lib-
	file.man, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/adprequest.c, nsd/nsd.h:
	Evaluate Tcl scripts at the global level

	* nsd/adpcmds.c:
	* nsd/adpeval.c:
	* nsd/adpparse.c: In Tcl caching mode use uplevel with bytecode to
	evaluate proc on global level for easy integration with other ADP
	pages and other Tcl scripts running inside the same request

	* doc/src: Updated documentation files
	* configure.in: Updated the script to produce correct output on
	--help command

2006-12-26 17:09 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (4c7f57a23f1d)

	* ChangeLog, nsd-config.tcl, nsd/adpparse.c, nsd/nsd.h:
	Updated cached Tcl processing, make it conditional compilation if
	cache is enabled

2006-12-26 16:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (af982b10f779)

	* ChangeLog, nsd/nsconf.c, nsd/nsd.h, nsd/tcljob.c:
	Add ns_job configure -timeout parameter and config parameter
	jobtimeout

	They control how long an idle job thread can wait for a job to
	arrive.

2006-12-26 15:44 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (78e8686bf74e)

	* ChangeLog, nsd/nsconf.c, nsd/nsd.h, nsd/tcljob.c:
	Make jobsperthread a config parameter for easy system-wide
	configuration

2006-12-26 01:40 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (688f4e25e035)

	* ChangeLog, doc/src/ns_adp_include.man, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adpparse.c, nsd/adprequest.c, nsd/connio.c, nsd/nsd.h,
	nsd/server.c, nsd/tclcmds.c:
	Make ADP singlescript comlete in one pass without copying the whole
	page using temp buffer

	Added new ns_adp_info command that can be useful in the templating
	engines based on ADP.

2006-12-25 02:21 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (27986c50fbba)

	* ChangeLog, include/ns.h, include/nsthread.h, nsd/adpcmds.c,
	nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c, nsd/nsd.h,
	nsd/server.c:
	Update ADP engine to support .tcl files instead of Tcl based handler

	ADP engine will perform caching and compiling Tcl files into Tcl
	procs and automatic expiration if needed.

	New parameter enabletclpages in the ns/server/server1/adp section
	now can be used to turn this option on, the old Tcl-only handler is
	still in the file.tcl.

	Speed benchmarks show pretty significate speed boost using ADP
	engine for .tcl files along with less memory consumption.

2006-12-24 02:38 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a278bfac2d0e)

	* doc/src/ns_adp.man, doc/src/ns_adp_ctl.man: new file.
	* ChangeLog, doc/src/ns_adp.man, doc/src/ns_adp_ctl.man,
	doc/src/ns_adp_include.man, doc/src/ns_adp_parse.man,
	doc/src/ns_adp_registertag.man, include/ns.h, include/nsthread.h,
	nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/init.c, nsd/nsd.h, nsd/return.c, nsd/server.c, nsd/tclcmds.c,
	nsd/tclinit.c, nsd/tclrequest.c, tests/test.nscfg:
	Port ADP engine from AOLserver 4.5, with minor modifications

	This port brings much better performance to ADP pages and more
	options for controlling ADP behavior.

	Before the port, NS was much slower than AS in benchmarks with
	default index.adp page from AOLserver, now it is about 20-30% faster
	which I believe because of Naviserver driver.

2006-12-22 05:15 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (76982a4158e4)

	* ChangeLog, nsd/adpcmds.c, nsd/adpeval.c, nsd/adprequest.c,
	nsd/nsd.h:
	Simplify ADP processing and the way the parser outputs the result

	Almost all ns_adp_ functions now will return result to the caller as
	Tcl result. This will make it much easier and more effective to
	build templating or other engines on top of adp parser.

	All adp pages I could find works the same way as before.

2006-12-22 04:44 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (8583ea3f8596)

	* tests/ns_thread.test:
	Update test with new ns_mutex syntax

2006-12-22 02:16 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (f16e6ebca360)

	* ChangeLog, doc/src/ns_job.man, nsd/tcljob.c:
	Add ns_job configure, with -jobsperthread that defines how many jobs
	a thread can process and then gracefully exit

	This works the same way as connsperthread config parameter for
	connection threads to help reduce memory consumption and cleanup Tcl
	resources.

2006-12-19 14:57 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (fd0a954e1feb)

	* ChangeLog, nsdb/dbtcl.c:
	Remove extra definition of ns_getcsv command

2006-12-16 23:41 +0000  Stephen Deasey  <sdeasey@gmail.com>  (b99f43d5305d)

	* nsd/progress.c, tests/progress.test: new file.
	* ChangeLog, nsd/Makefile, nsd/driver.c, nsd/nsconf.c, nsd/nsd.h,
	nsd/progress.c, nsd/sls.c, nsd/tclcmds.c, tests/progress.test,
	tests/test.nscfg:
	Move the large file upload progress tracker from driver.c into it's
	own file

	Config knob is now: ns/parameters:progressminsize and works for both
	conventional and spooled uploads.

	* nsd/sls.c: Fix bug resizing memory for new sls slots.

2006-12-14 21:37 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (71eb1f833a47)

	* ChangeLog, nsd/adpeval.c, tcl/file.tcl:
	Optimize Tcl file handler, smaller and simpler now

2006-12-14 20:36 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (35fdae703d48)

	* doc/src/admin-install.man, doc/src/admin-tuning.man, doc/src/adp-
	overview.man, doc/src/ns_filestat.man, doc/src/ns_logctl.man:
	Update and correct documentation files

2006-12-14 15:23 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (8da15d167990)

	* doc/src/ns_filestat.man, nsd/tclmisc.c:
	Update ns_filestat to support optional varname

2006-12-14 15:13 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (594247ae58d0)

	* doc/src/ns_filestat.man: new file.
	* ChangeLog, doc/src/ns_filestat.man:
	Add new command and documentation file

2006-12-14 06:50 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (75dd39eedfc1)

	* ChangeLog, configure.in, nsd/adpeval.c, nsd/driver.c,
	nsd/fastpath.c, nsd/nsd.h, nsd/rollfile.c, nsd/tclcmds.c,
	nsd/tclmisc.c:
	Add configure option --disable-tclvfs; add file system wrappers

	Introduces several internal functions nsFastXXX which implement
	open, read, write, stat, close operations. Most of them are defines,
	open and stat are C wrapper functions. Testing showed 30% speed
	increase in serving static files using fatspath with native system
	calls. Same goes for adp reading.

	By default Tcl VFS is compiled in.

2006-12-12 15:24 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (cbec216407f2)

	* nsd/driver.c:
	Slightly changed acceptsize code to be more clear

2006-12-12 06:32 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (10a37d8cbf30)

	* ChangeLog, tcl/file.tcl:
	Split into separate cache and coookie procs, runs faster

2006-12-12 02:46 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (8d4505dcca77)

	* ChangeLog, nsd-config.tcl, nsd/driver.c, nsd/nsd.h, sample-
	config.tcl.in:
	Add driver parameter 'acceptsize'

	It is 1 by default, if set to higher number it will tell the driver
	to accept more than one request, which as tests showed helps to
	process more requests, because if we have many sockets in the
	driver's queue it takes time to scan all of them and new requests
	are waiting to be accepted. Some benchmarking showed that if set to
	10 it improves req/sec rate by 10% on simple ADP requests. If not
	set, driver works as usually.

2006-12-07 21:07 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (706951af2be9)

	* ChangeLog, nsd/init.tcl:
	Fixed bug in ns_eval initialization using non-existent nsv array

2006-12-05 05:02 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (8ea199a07ea2)

	* ChangeLog, Makefile, index.adp:
	Minor changes to make installation work; smoothed some edges

2006-11-29 17:27 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (0e276545995d)

	* ChangeLog, doc/src/ns_mutex.man, nsd/tclthread.c:
	Add ns_mutex trylock command to Tcl API

	This is valid C API function, return 0 on lock or < 0 if already
	locked.

2006-11-29 00:10 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (5ac46492b52c)

	* ChangeLog, include/ns.h, nsd/connio.c, nsd/driver.c, nsd/fastpath.c,
	nsd/return.c:
	Return files bigger than 2Gb in size

2006-11-28 23:29 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (8c8be60d4b8a)

	* ChangeLog, nsd/driver.c, nsd/nsd.h:
	Update Writer functions to Tcl_WideInt to support files over 2Gb in
	size

	Still a lot of routines need to be updated which return files, like
	Ns_ConnSend and etc.

	The minor obstacle also that GNU printf checker does not support new
	formats like %q in Ns_DStringPrintf.

2006-11-28 23:01 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (73a40629bd87)

	* contrib/examples/writer.tcl: new file.
	* ChangeLog, contrib/examples/index.adp, contrib/examples/writer.tcl,
	doc/src/ns_writer.man, nsd/driver.c:
	(ns_writer): fix submitfile command; add -headers, -offset, size
	options

	Add example of ns_writer usage.

2006-11-27 22:16 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (76ecbee9d877)

	* ChangeLog, doc/src/ns_job.man, nsd/tcljob.c:
	Add ns_job queue -head, place new job at beginning of queue

	By default all new jobs are added to the end.

2006-11-20 21:41 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (13514be49c8c)

	* doc/src/main-features.man, doc/src/man3/Ns_Sls.man,
	doc/src/mann/ns_sls.man:
	Minor changes to make build-doc work and docs fixes

2006-11-17 17:21 +0000  Bernd Eidenschink  <eidenschink@web.de>  (e470b07e2e5a)

	* ChangeLog, nsd/mimetypes.c:
	Added recommended MIME types for OpenDocument documents

2006-11-16 15:30 +0000  Stephen Deasey  <sdeasey@gmail.com>  (f5ed109405cd)

	* ChangeLog, nsd/tcltime.c:
	Remove excessive check for shared object when converting internal
	rep of time type

2006-11-14 16:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (db257b4dbd27)

	* ChangeLog, tcl/sendmail.tcl:
	(ns_sendmail): send data line-by-line for benefit of large
	attachments

	Because socket is nonblocking sending big chunk in one puts does not
	work, so need to do split and send line by line.

2006-11-14 06:07 +0000  Stephen Deasey  <sdeasey@gmail.com>  (8ef87ab4a648)

	* doc/src/man3/Ns_Sls.man: new file.
	* ChangeLog, doc/src/man3/Ns_Sls.man:
	Document the C API for SLS data

	Tcl doctools is hurting...

2006-11-13 04:16 +0000  Stephen Deasey  <sdeasey@gmail.com>  (e869bc061d84)

	* ChangeLog, Makefile, include/Makefile.module.in:
	Don't clobber editor backup files

2006-11-13 04:00 +0000  Stephen Deasey  <sdeasey@gmail.com>  (e55e360b9163)

	* ChangeLog, configure.in, nsd/sls.c, nsd/tcltime.c, nsd/unix.c:
	Quiten some compiler alias warnings, including some ugly casts in
	tcltime.c

2006-11-13 02:23 +0000  Stephen Deasey  <sdeasey@gmail.com>  (cd68537f5ca9)

	* ChangeLog, configure.in, nsd/info.c, nsthread/nsthreadtest.c:
	Check for presence of Tcl_GetMemoryInfo in Tcl library

	This isn't exported when Tcl is built with the custom memory
	allocator dissabled.

2006-11-12 19:33 +0000  Stephen Deasey  <sdeasey@gmail.com>  (208d5347647d)

	* doc/src/mann/ns_sls.man, nsd/sls.c, tests/ns_sls.test: new file.
	* ChangeLog, doc/src/mann/ns_sls.man, include/ns.h, nsd/Makefile,
	nsd/driver.c, nsd/init.c, nsd/nsd.h, nsd/sls.c, nsd/tclcmds.c,
	tests/ns_sls.test:
	Add Ns_Sls* and ns_sls commands supporting socket-local-storage (bug
	#1522162)

	(data which persists for the lifetime of an open TCP connection)

2006-11-09 17:55 +0000  Bernd Eidenschink  <eidenschink@web.de>  (bff8e6221e00)

	* ChangeLog, nsd-config.tcl, tcl/sendmail.tcl:
	Add config parameter smtpauthmode; check for it case-insensitively

2006-11-09 17:50 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (57e29a44cb78)

	* doc/src/ns_job.man:
	Updated ns_job docs regarding new API additions

2006-11-09 17:36 +0000  Bernd Eidenschink  <eidenschink@web.de>  (7f86221437b3)

	* ChangeLog, doc/src/ns_sendmail.man, tcl/sendmail.tcl:
	(ns_sendmail): add AUTH LOGIN support (which is very similar to AUTH
	PLAIN)

	* doc/src/ns_sendmail.man: Updated documentation for ns_sendmail

2006-11-09 03:08 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (0143bbfa5db3)

	* ChangeLog, nsd/tcljob.c:
	Add ns_job exists, add ns_job queue -jobid

2006-11-08 16:05 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (97d5e84dc093)

	* ChangeLog, nsd/driver.c:
	Fix bug in writer thread not handling partial writes

2006-11-06 14:30 +0000  Zoran Vasiljevic  <zv@archiware.com>  (c5b07df3bc37)

	* nsproxy/nsproxy.h, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c:
	Split even more the roles of Nsproxy_Init and Ns_ProxyInit

	The former role is to initialize per-process global data whereas the
	latter is used to initialize per-thread-interp only.

2006-11-06 13:44 +0000  Zoran Vasiljevic  <zv@archiware.com>  (f5121bb6ace9)

	* ChangeLog, nsproxy/nsproxylib.c:
	Nsproxy_Init initializes thread-wide data while Ns_ProxyInit
	initializes only the Tcl interface

2006-11-02 05:28 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (0f8f3486fca4)

	* doc/src/ns_accesslog.man, doc/src/ns_cond.man, doc/src/ns_conn.man,
	doc/src/ns_conncptofp.man, doc/src/ns_connsendfp.man,
	doc/src/ns_critsec.man, doc/src/ns_crypt.man, doc/src/ns_db.man,
	doc/src/ns_dbquotename.man, doc/src/ns_dbquotevalue.man,
	doc/src/ns_encodingforcharset.man, doc/src/ns_encodingfortype.man,
	doc/src/ns_env.man, doc/src/ns_eval.man, doc/src/ns_event.man,
	doc/src/ns_findset.man, doc/src/ns_fmttime.man,
	doc/src/ns_formfieldcharset.man, doc/src/ns_ftruncate.man,
	doc/src/ns_getchannels.man, doc/src/ns_getform.man,
	doc/src/ns_getformfile.man, doc/src/ns_geturl.man,
	doc/src/ns_gifsize.man, doc/src/ns_gmtime.man,
	doc/src/ns_guesstype.man, doc/src/ns_headers.man,
	doc/src/ns_hrefs.man, doc/src/ns_htmlselect.man,
	doc/src/ns_http.man, doc/src/ns_httpget.man,
	doc/src/ns_httpopen.man, doc/src/ns_httppost.man,
	doc/src/ns_ictl.man, doc/src/ns_imgmime.man, doc/src/ns_imgsize.man,
	doc/src/ns_imgtype.man, doc/src/ns_info.man, doc/src/ns_init.man,
	doc/src/ns_issmallint.man, doc/src/ns_job.man,
	doc/src/ns_jpegsize.man, doc/src/ns_kill.man,
	doc/src/ns_library.man, doc/src/ns_link.man,
	doc/src/ns_localsqltimestamp.man, doc/src/ns_localtime.man,
	doc/src/ns_logctl.man, doc/src/ns_logroll.man,
	doc/src/ns_markfordelete.man, doc/src/ns_mkdir.man,
	doc/src/ns_mktemp.man, doc/src/ns_modulepath.man,
	doc/src/ns_mutex.man, doc/src/ns_normalizepath.man,
	doc/src/ns_param.man, doc/src/ns_paren.man,
	doc/src/ns_parseargs.man, doc/src/ns_parseheader.man,
	doc/src/ns_parsequery.man, doc/src/ns_parsetime.man,
	doc/src/ns_pause.man, doc/src/ns_perm.man,
	doc/src/ns_queryexists.man, doc/src/ns_queryget.man,
	doc/src/ns_querygetall.man, doc/src/ns_quotehtml.man,
	doc/src/ns_rand.man, doc/src/ns_register_adp.man,
	doc/src/ns_register_adptag.man, doc/src/ns_register_filter.man,
	doc/src/ns_register_proc.man, doc/src/ns_register_trace.man,
	doc/src/ns_reinit.man, doc/src/ns_rename.man,
	doc/src/ns_requestauthorize.man, doc/src/ns_respond.man,
	doc/src/ns_resume.man, doc/src/ns_returnadminnotice.man,
	doc/src/ns_returnbadrequest.man, doc/src/ns_returnerror.man,
	doc/src/ns_returnfile.man, doc/src/ns_returnforbidden.man,
	doc/src/ns_returnfp.man, doc/src/ns_returnmoved.man,
	doc/src/ns_returnnotfound.man, doc/src/ns_returnnotice.man,
	doc/src/ns_returnok.man, doc/src/ns_returnredirect.man,
	doc/src/ns_returnunauthorized.man, doc/src/ns_returnunavailable.man,
	doc/src/ns_rmdir.man, doc/src/ns_rollfile.man,
	doc/src/ns_rwlock.man, doc/src/ns_schedule_daily.man,
	doc/src/ns_schedule_proc.man, doc/src/ns_schedule_weekly.man,
	doc/src/ns_section.man, doc/src/ns_sema.man, doc/src/ns_server.man,
	doc/src/ns_serverrootproc.man, doc/src/ns_set.man,
	doc/src/ns_setexpires.man, doc/src/ns_share.man,
	doc/src/ns_sleep.man, doc/src/ns_sockaccept.man,
	doc/src/ns_sockblocking.man, doc/src/ns_sockcallback.man,
	doc/src/ns_sockcheck.man, doc/src/ns_socketpair.man,
	doc/src/ns_socklisten.man, doc/src/ns_socklistencallback.man,
	doc/src/ns_socknonblocking.man, doc/src/ns_socknread.man,
	doc/src/ns_sockopen.man, doc/src/ns_sockselect.man,
	doc/src/ns_stats.man, doc/src/ns_striphtml.man,
	doc/src/ns_symlink.man, doc/src/ns_tagelement.man,
	doc/src/ns_tagelementset.man, doc/src/ns_thread.man,
	doc/src/ns_time.man, doc/src/ns_tmpnam.man,
	doc/src/ns_unregister_proc.man, doc/src/ns_url2file.man,
	doc/src/ns_write.man, doc/src/ns_writecontent.man,
	doc/src/ns_writefp.man, doc/src/ns_writer.man:
	Update src documentation with mode commands

2006-11-01 11:50 +0000  Zoran Vasiljevic  <zv@archiware.com>  (4d5d744e16b0)

	* ChangeLog, nsd/log.c:
	(LogFlush): accept an extra argument that controls internal locking

	Previously, the locking was done based on the value of the passed
	callback list and that was not correct.

2006-10-31 01:43 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (5728dfeb21ee)

	* ChangeLog, nsd/set.c:
	(Ns_SetGetValue, Ns_SetIGetValue): return default value if NULL or
	empty string

2006-10-20 15:55 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (486901f77c5a)

	* ChangeLog, tcl/http.tcl:
	(ns_proxy_handler_http):return after redirect; (ns_httpopen): don't
	overwrite Host header

2006-10-19 07:39 +0100  Bernd Eidenschink  <eidenschink@web.de>  (6c1f08fb25dc)

	* ChangeLog, contrib/start-scripts/naviserver.SuSE:
	Rename a variable that prohibited starting the server in chroot mode

2006-10-18 21:34 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (04e03111ae2b)

	* tcl/http.tcl:
	(ns_proxy_handler): fix bug with access denied not returning

2006-10-17 20:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a411c41dbfa2)

	* ChangeLog, tcl/http.tcl, tests/testserver/modules/testhttp.tcl:
	(ns_httpget): add chunked support

2006-10-09 16:00 +0100  Zoran Vasiljevic  <zv@archiware.com>  (bf047e5a2809)

	* ChangeLog, nsd/log.c, tests/ns_log.test:
	Drop per-thread private list of callbacks; use refcounting on the
	callback structure

	This avoids clashes with callback removal.

2006-10-09 14:25 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c03e7fe99cf8)

	* ChangeLog, nsd/log.c:
	Avoid holding locks in LogFlush by keeping private list of
	registered callbacks on per-thread basis

2006-10-09 13:56 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ac867c81d6b7)

	* tcl/file.tcl:
	(ns_sourcepproc): fix variable typo

2006-10-07 21:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (26723e71408c)

	* ChangeLog, tcl/file.tcl:
	Invalidate cache proc on Tcl error

2006-10-07 02:39 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c463fb1132ef)

	* ChangeLog, m4/tcl.m4:
	Update to latest tcl.m4 from Tcl CVS

	No more annoying messages about underquoted macros when generating
	the build scripts!

2006-10-06 16:17 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (fafbb9877bfa)

	* doc/src/ns_deletecookie.man, doc/src/ns_getcookie.man,
	doc/src/ns_setcookie.man:
	Update docs for cookie commands

2006-10-05 23:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7803b31a9222)

	* doc/src/version_include.in: new file.
	* ChangeLog, configure.in, doc/src/ns_memoize.man,
	doc/src/version_include.in:
	Set a variable "version" and substitute the PACKAGE_VERSION into it;
	use it in doc header

2006-10-05 23:23 +0100  Stephen Deasey  <sdeasey@gmail.com>  (bde3ee34fc7c)

	* doc/src/ns_memoize.man: new file.
	* ChangeLog, doc/src/ns_memoize.man:
	Add description of the memoize commands. (All 3 commands described
	in a single man page.)

2006-10-04 21:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (b97ad329acf6)

	* ChangeLog, nsd/binder.c:
	Make UDP sockets support broadcast option by default

2006-10-04 13:21 +0100  Zoran Vasiljevic  <zv@archiware.com>  (7bf3844e6d72)

	* ChangeLog, nsd/tclthread.c:
	(ns_cond wait): allow string-based mutex handles, as the rest of the
	code

2006-10-03 21:42 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5a1796899740)

	* ChangeLog, nsd/driver.c:
	Driver change to support Unix domain drivers of stream and udp types

2006-10-02 13:02 +0100  Bernd Eidenschink  <eidenschink@web.de>  (0860eac7b43e)

	* doc/src/ns_adp_safeeval.man, doc/src/ns_cache_append.man,
	doc/src/ns_cache_create.man, doc/src/ns_cache_eval.man,
	doc/src/ns_cache_incr.man, doc/src/ns_cache_lappend.man,
	doc/src/ns_pagepath.man, doc/src/ns_serverpath.man,
	doc/src/ns_upload_stats.man:
	Minor fixes for man pages to compile with dtplite

2006-09-27 23:13 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (35f0968187a7)

	* contrib/examples/index.adp, contrib/examples/upload.tcl: new file.
	* ChangeLog, Makefile, contrib/examples/index.adp,
	contrib/examples/upload.tcl, index.adp:
	Add examples dir under contrib and upload example test page

2006-09-27 22:42 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (7ef6b7da9657)

	* ChangeLog, nsd/driver.c:
	Fix bug in ns_upload_stats

2006-09-27 22:10 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (dec648850942)

	* ChangeLog, doc/src/ns_upload_stats.man, nsd/config.c:
	Change log Debug level to Dev level, cut down on excesive log
	chatter

2006-09-27 20:58 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ddffab83a4ee)

	* doc/src/ns_hashpath.man, doc/src/ns_pagepath.man,
	doc/src/ns_runonce.man, doc/src/ns_serverpath.man,
	doc/src/ns_truncate.man:
	Updating more documentation files

2006-09-27 17:37 +0100  Bernd Eidenschink  <eidenschink@web.de>  (b35c3439b109)

	* doc/src/ns_gifsize.man, doc/src/ns_imgmime.man,
	doc/src/ns_imgsize.man, doc/src/ns_imgtype.man,
	doc/src/ns_jpegsize.man, doc/src/ns_pngsize.man:
	Documentation for ns_gifsize, ns_imgmime, ns_imgsize, ns_imgtype,
	ns_jpegsize, ns_pngsize

2006-09-27 16:43 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (533d706a155e)

	* doc/src/ns_cache_size.man: deleted file.
	* doc/src/ns_adp_abort.man, doc/src/ns_adp_append.man,
	doc/src/ns_adp_argc.man, doc/src/ns_adp_bind_args.man,
	doc/src/ns_adp_break.man, doc/src/ns_adp_compress.man,
	doc/src/ns_adp_debug.man, doc/src/ns_adp_dir.man,
	doc/src/ns_adp_dump.man, doc/src/ns_adp_eval.man,
	doc/src/ns_adp_exception.man, doc/src/ns_adp_include.man,
	doc/src/ns_adp_mime.man, doc/src/ns_adp_mimetype.man,
	doc/src/ns_adp_parse.man, doc/src/ns_adp_puts.man,
	doc/src/ns_adp_registeradp.man, doc/src/ns_adp_registerproc.man,
	doc/src/ns_adp_registertag.man, doc/src/ns_adp_return.man,
	doc/src/ns_adp_safeeval.man, doc/src/ns_adp_stats.man,
	doc/src/ns_adp_stream.man, doc/src/ns_adp_tell.man,
	doc/src/ns_adp_trunc.man, doc/src/ns_after.man,
	doc/src/ns_atclose.man, doc/src/ns_atexit.man,
	doc/src/ns_atprestartup.man, doc/src/ns_atshutdown.man,
	doc/src/ns_atsignal.man, doc/src/ns_atstartup.man,
	doc/src/ns_base64decode.man, doc/src/ns_base64encode.man,
	doc/src/ns_buildsqldate.man, doc/src/ns_cache_append.man,
	doc/src/ns_cache_create.man, doc/src/ns_cache_eval.man,
	doc/src/ns_cache_incr.man, doc/src/ns_cache_keys.man,
	doc/src/ns_cache_lappend.man, doc/src/ns_cache_names.man,
	doc/src/ns_cache_size.man, doc/src/ns_cache_stats.man,
	doc/src/ns_cancel.man, doc/src/ns_chan.man, doc/src/ns_charsets.man,
	doc/src/ns_chmod.man, doc/src/ns_choosecharset.man,
	doc/src/ns_cleanup.man, doc/src/ns_cleanupchans.man,
	doc/src/ns_cond.man, doc/src/ns_config.man,
	doc/src/ns_configsection.man, doc/src/ns_configsections.man,
	doc/src/ns_conn.man, doc/src/ns_conncptofp.man,
	doc/src/ns_connsendfp.man, doc/src/ns_cookiecharset.man,
	doc/src/ns_cookietime.man, doc/src/ns_cp.man,
	doc/src/ns_critsec.man, doc/src/ns_crypt.man, doc/src/ns_db.man,
	doc/src/ns_uudecode.man, doc/src/ns_uuencode.man:
	Continue working on documentation...

2006-09-27 09:58 +0100  Zoran Vasiljevic  <zv@archiware.com>  (efe68e8fd88a)

	* ChangeLog, nsd/tclxkeylist.c, nsproxy/ns_proxy.man,
	nsproxy/nsproxylib.c, tests/ns_proxy.test:
	Add "-maxruns" parameter for proxy queue to limit number of runs in
	the proxy

	After reaching the limit the proxy slave process is automatically
	restarted.

	* nsproxy/ns_proxy.man: Updated docs.

	* tests/ns_proxy.test: Added tests to check -maxruns option.

	* nsd/tclxkeylist.c: Fix to avoid setting object in interp result.

2006-09-26 21:25 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (6393a7967f65)

	* doc/src/man.macros: deleted file.
	* doc/src/README.doc, doc/src/man.macros:
	Small corrections for makefile and remove unneeded file

2006-09-26 15:39 +0100  Bernd Eidenschink  <eidenschink@web.de>  (1dc1ddb71ae3)

	* contrib/banners/README, contrib/banners/msie.html,
	contrib/banners/ns_logobig.gif, contrib/banners/ns_logobig.png,
	contrib/banners/ns_logosmall.gif, contrib/banners/ns_logosmall.png,
	contrib/banners/ns_poweredby.gif, contrib/banners/ns_poweredby.png:
	new file.
	* ChangeLog, contrib/banners/README, contrib/banners/msie.html,
	contrib/banners/ns_logobig.gif, contrib/banners/ns_logobig.png,
	contrib/banners/ns_logosmall.gif, contrib/banners/ns_logosmall.png,
	contrib/banners/ns_poweredby.gif, contrib/banners/ns_poweredby.png:
	Add two sets of banners (GIF/PNG)for NaviServer

2006-09-25 20:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (015a04208828)

	* doc/src/tcl-lib-file.man, doc/src/tcl-lib-nstrace.man: new file.
	* Makefile, README, doc/src/admin-install.man, doc/src/admin-
	maintenance.man, doc/src/ns_log.man, doc/src/tcl-lib-file.man,
	doc/src/tcl-lib-nstrace.man:
	Update docs, all docs from Wiki are integrated into source docs

2006-09-25 15:26 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d93cc3eb51c4)

	* doc/install-doc, doc/man.macros: deleted file.
	* Makefile, doc/install-doc, doc/man.macros:
	Updated makefile with doc installation script

2006-09-23 22:11 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (763c6d0ecfdf)

	* doc/html/index.html, doc/html/ns_logo.gif, doc/html/ns_powered.gif,
	doc/html/ns_small.gif, doc/man/ns_sendmail.n,
	doc/src/ns_encrypt.man: deleted file.
	* Makefile, doc/html/index.html, doc/html/ns_logo.gif,
	doc/html/ns_powered.gif, doc/html/ns_small.gif,
	doc/man/ns_sendmail.n, doc/src/adp-overview.man,
	doc/src/c-driverdb.man, doc/src/c-urlspace.man,
	doc/src/commandlist.man, doc/src/keyldel.man, doc/src/keylget.man,
	doc/src/keylkeys.man, doc/src/keylset.man, doc/src/main-
	features.man, doc/src/main-history.man, doc/src/main-standards.man,
	doc/src/ns_accesslog.man, doc/src/ns_addrbyhost.man,
	doc/src/ns_adp_abort.man, doc/src/ns_adp_append.man,
	doc/src/ns_adp_argc.man, doc/src/ns_adp_argv.man,
	doc/src/ns_adp_bind_args.man, doc/src/ns_adp_break.man,
	doc/src/ns_adp_compress.man, doc/src/ns_adp_debug.man,
	doc/src/ns_adp_dir.man, doc/src/ns_adp_dump.man,
	doc/src/ns_adp_eval.man, doc/src/ns_adp_exception.man,
	doc/src/ns_adp_include.man, doc/src/ns_adp_mime.man,
	doc/src/ns_adp_mimetype.man, doc/src/ns_adp_parse.man,
	doc/src/ns_adp_puts.man, doc/src/ns_adp_registeradp.man,
	doc/src/ns_adp_registerproc.man, doc/src/ns_adp_registertag.man,
	doc/src/ns_adp_return.man, doc/src/ns_adp_safeeval.man,
	doc/src/ns_adp_stats.man, doc/src/ns_adp_stream.man,
	doc/src/ns_adp_tell.man, doc/src/ns_adp_trunc.man,
	doc/src/ns_after.man, doc/src/ns_atclose.man, doc/src/ns_atexit.man,
	doc/src/ns_atprestartup.man, doc/src/ns_atshutdown.man,
	doc/src/ns_atsignal.man, doc/src/ns_atstartup.man,
	doc/src/ns_base64decode.man, doc/src/ns_base64encode.man,
	doc/src/ns_browsermatch.man, doc/src/ns_buildsqldate.man,
	doc/src/ns_cache_append.man, doc/src/ns_cache_create.man,
	doc/src/ns_cache_eval.man, doc/src/ns_cache_flush.man,
	doc/src/ns_cache_incr.man, doc/src/ns_cache_keys.man,
	doc/src/ns_cache_lappend.man, doc/src/ns_cache_names.man,
	doc/src/ns_cache_size.man, doc/src/ns_cache_stats.man,
	doc/src/ns_cancel.man, doc/src/ns_chan.man, doc/src/ns_charsets.man,
	doc/src/ns_checkurl.man, doc/src/ns_chmod.man,
	doc/src/ns_choosecharset.man, doc/src/ns_cleanup.man,
	doc/src/ns_cleanupchans.man, doc/src/ns_cond.man,
	doc/src/ns_config.man, doc/src/ns_configsection.man,
	doc/src/ns_configsections.man, doc/src/ns_conn.man,
	doc/src/ns_conncptofp.man, doc/src/ns_connsendfp.man,
	doc/src/ns_cookiecharset.man, doc/src/ns_cookietime.man,
	doc/src/ns_cp.man, doc/src/ns_critsec.man, doc/src/ns_crypt.man,
	doc/src/ns_db.man, doc/src/ns_dbquotename.man,
	doc/src/ns_dbquotevalue.man, doc/src/ns_deletecookie.man,
	doc/src/ns_encodingforcharset.man, doc/src/ns_encodingfortype.man,
	doc/src/ns_encrypt.man, doc/src/ns_env.man, doc/src/ns_eval.man,
	doc/src/ns_event.man, doc/src/ns_findset.man,
	doc/src/ns_fmttime.man, doc/src/ns_formfieldcharset.man,
	doc/src/ns_ftruncate.man, doc/src/ns_getchannels.man,
	doc/src/ns_getcookie.man, doc/src/ns_getform.man,
	doc/src/ns_getformfile.man, doc/src/ns_geturl.man,
	doc/src/ns_gifsize.man, doc/src/ns_gmtime.man,
	doc/src/ns_guesstype.man, doc/src/ns_hashpath.man,
	doc/src/ns_headers.man, doc/src/ns_hostbyaddr.man,
	doc/src/ns_hrefs.man, doc/src/ns_htmlselect.man,
	doc/src/ns_http.man, doc/src/ns_httpget.man,
	doc/src/ns_httpopen.man, doc/src/ns_httppost.man,
	doc/src/ns_httptime.man, doc/src/ns_ictl.man,
	doc/src/ns_imgmime.man, doc/src/ns_imgsize.man,
	doc/src/ns_imgtype.man, doc/src/ns_info.man, doc/src/ns_init.man,
	doc/src/ns_issmallint.man, doc/src/ns_job.man,
	doc/src/ns_jpegsize.man, doc/src/ns_kill.man,
	doc/src/ns_library.man, doc/src/ns_limits_get.man,
	doc/src/ns_limits_list.man, doc/src/ns_limits_register.man,
	doc/src/ns_limits_set.man, doc/src/ns_link.man,
	doc/src/ns_localsqltimestamp.man, doc/src/ns_localtime.man,
	doc/src/ns_locationproc.man, doc/src/ns_log.man,
	doc/src/ns_logctl.man, doc/src/ns_logroll.man,
	doc/src/ns_markfordelete.man, doc/src/ns_mkdir.man,
	doc/src/ns_mktemp.man, doc/src/ns_moduleload.man,
	doc/src/ns_modulepath.man, doc/src/ns_mutex.man,
	doc/src/ns_normalizepath.man, doc/src/ns_pagepath.man,
	doc/src/ns_param.man, doc/src/ns_paren.man,
	doc/src/ns_parseargs.man, doc/src/ns_parseheader.man,
	doc/src/ns_parsehttptime.man, doc/src/ns_parsequery.man,
	doc/src/ns_parsetime.man, doc/src/ns_pause.man, doc/src/ns_perm.man,
	doc/src/ns_pngsize.man, doc/src/ns_proxy.man,
	doc/src/ns_purgefiles.man, doc/src/ns_puts.man,
	doc/src/ns_queryexists.man, doc/src/ns_queryget.man,
	doc/src/ns_querygetall.man, doc/src/ns_quotehtml.man,
	doc/src/ns_rand.man, doc/src/ns_register_adp.man,
	doc/src/ns_register_adptag.man, doc/src/ns_register_fastpath.man,
	doc/src/ns_register_fasturl2file.man,
	doc/src/ns_register_filter.man, doc/src/ns_register_proc.man,
	doc/src/ns_register_proxy.man, doc/src/ns_register_trace.man,
	doc/src/ns_register_url2file.man, doc/src/ns_reinit.man,
	doc/src/ns_rename.man, doc/src/ns_requestauthorize.man,
	doc/src/ns_respond.man, doc/src/ns_resume.man,
	doc/src/ns_return.man, doc/src/ns_returnadminnotice.man,
	doc/src/ns_returnbadrequest.man, doc/src/ns_returnerror.man,
	doc/src/ns_returnfile.man, doc/src/ns_returnforbidden.man,
	doc/src/ns_returnfp.man, doc/src/ns_returnmoved.man,
	doc/src/ns_returnnotfound.man, doc/src/ns_returnnotice.man,
	doc/src/ns_returnok.man, doc/src/ns_returnredirect.man,
	doc/src/ns_returnunauthorized.man, doc/src/ns_returnunavailable.man,
	doc/src/ns_rmdir.man, doc/src/ns_rollfile.man,
	doc/src/ns_runonce.man, doc/src/ns_rwlock.man,
	doc/src/ns_schedule_daily.man, doc/src/ns_schedule_proc.man,
	doc/src/ns_schedule_weekly.man, doc/src/ns_section.man,
	doc/src/ns_sema.man, doc/src/ns_server.man,
	doc/src/ns_serverpath.man, doc/src/ns_serverrootproc.man,
	doc/src/ns_set.man, doc/src/ns_setcookie.man,
	doc/src/ns_setexpires.man, doc/src/ns_setformencoding.man,
	doc/src/ns_share.man, doc/src/ns_shortcut_filter.man,
	doc/src/ns_shutdown.man, doc/src/ns_sleep.man,
	doc/src/ns_sockaccept.man, doc/src/ns_sockblocking.man,
	doc/src/ns_sockcallback.man, doc/src/ns_sockcheck.man,
	doc/src/ns_socketpair.man, doc/src/ns_socklisten.man,
	doc/src/ns_socklistencallback.man, doc/src/ns_socknonblocking.man,
	doc/src/ns_socknread.man, doc/src/ns_sockopen.man,
	doc/src/ns_sockselect.man, doc/src/ns_startcontent.man,
	doc/src/ns_stats.man, doc/src/ns_striphtml.man,
	doc/src/ns_symlink.man, doc/src/ns_tagelement.man,
	doc/src/ns_tagelementset.man, doc/src/ns_thread.man,
	doc/src/ns_time.man, doc/src/ns_tmpnam.man, doc/src/ns_truncate.man,
	doc/src/ns_unregister_adp.man, doc/src/ns_unregister_proc.man,
	doc/src/ns_unregister_url2file.man, doc/src/ns_unschedule_proc.man,
	doc/src/ns_upload_stats.man, doc/src/ns_url2file.man,
	doc/src/ns_urlcharset.man, doc/src/ns_urldecode.man,
	doc/src/ns_urlencode.man, doc/src/ns_uudecode.man,
	doc/src/ns_uuencode.man, doc/src/ns_var.man, doc/src/ns_write.man,
	doc/src/ns_writecontent.man, doc/src/ns_writefp.man,
	doc/src/ns_writer.man, doc/src/nsv_append.man,
	doc/src/nsv_array.man, doc/src/nsv_exists.man, doc/src/nsv_get.man,
	doc/src/nsv_incr.man, doc/src/nsv_lappend.man,
	doc/src/nsv_names.man, doc/src/nsv_set.man, doc/src/nsv_unset.man,
	doc/src/tcl-overview.man, doc/src/template.man:
	Documentation updates, formatting, testing crossreferencing

2006-09-23 21:22 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (547eb2d61cdd)

	* doc/html/ns_logo.gif, doc/html/ns_powered.gif,
	doc/html/ns_small.gif: new file.
	* doc/html/index.html, doc/html/ns_logo.gif, doc/html/ns_powered.gif,
	doc/html/ns_small.gif:
	Minor html index changes

2006-09-23 06:06 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ebcc2793ae68)

	* ChangeLog, nsd/connio.c, tests/encoding.test, tests/http.test,
	tests/http_chunked.test, tests/tclresp.test:
	(Ns_ConnWriteVChars): send multiple small buffers correctly

	Update test to mark encoding as knownBug until fixed and http
	chunked test according to updated ns_httptest.

2006-09-23 01:01 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (60c80fa55963)

	* doc/src/module-nscp.man, doc/src/ns_urlencode.man:
	Documentation minor fixes in doctools

2006-09-22 10:40 +0100  Zoran Vasiljevic  <zv@archiware.com>  (35f38d10d099)

	* ChangeLog, include/ns.h, nsd/adpcmds.c, nsd/conn.c, nsd/httptime.c,
	nsd/mimetypes.c, nsd/nsmain.c, nsd/random.c, nsd/tclcache.c,
	nsd/tclenv.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclthread.c, nsd/tcltime.c, nsd/tclvar.c, nsd/tclxkeylist.c:
	Avoid setting Tcl objects obtained from the interpreter result

	The result may contain objects that are shared. So constructs like
	this:

	 Tcl_SetIntObj(Tcl_GetObjResult(interp), n));

	are rewritten to read:

	 Tcl_SetObjResult(interp, Tcl_NewIntObj(n));

	This is done for all "known" Tcl object types like: int, string,
	boolean, long, and our custom object types like: time.

	* include/ns.h:
	* nsd/tcltime.c: Added Ns_TclNewTimeObj() exported API.

2006-09-20 19:24 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (431a0a32249a)

	* ChangeLog, nsd/driver.c:
	Add debug support for malformed requests; more detailed error
	loggging if enabled

	Introduced new parameter for nssock: badrequestlogging. If enabled
	all bad requests will be logged

2006-09-19 23:08 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5939248d87c6)

	* doc/src/ns_adp_compress.man, doc/src/ns_adp_debug.man,
	doc/src/ns_adp_registeradp.man, doc/src/ns_adp_registertag.man,
	doc/src/ns_atprestartup.man, doc/src/ns_atstartup.man,
	doc/src/ns_base64decode.man, doc/src/ns_base64encode.man,
	doc/src/ns_cache_append.man, doc/src/ns_cache_create.man,
	doc/src/ns_cache_eval.man, doc/src/ns_cache_incr.man,
	doc/src/ns_cache_lappend.man, doc/src/ns_cache_size.man,
	doc/src/ns_cache_stats.man, doc/src/ns_conncptofp.man,
	doc/src/ns_connsendfp.man, doc/src/ns_deletecookie.man,
	doc/src/ns_getcookie.man, doc/src/ns_geturl.man,
	doc/src/ns_hashpath.man, doc/src/ns_headers.man,
	doc/src/ns_imgmime.man, doc/src/ns_imgsize.man,
	doc/src/ns_imgtype.man, doc/src/ns_limits_get.man,
	doc/src/ns_limits_list.man, doc/src/ns_limits_register.man,
	doc/src/ns_limits_set.man, doc/src/ns_locationproc.man,
	doc/src/ns_moduleload.man, doc/src/ns_pagepath.man,
	doc/src/ns_parseargs.man, doc/src/ns_parseheader.man,
	doc/src/ns_perm.man, doc/src/ns_pngsize.man, doc/src/ns_proxy.man,
	doc/src/ns_purgefiles.man, doc/src/ns_register_adptag.man,
	doc/src/ns_register_fastpath.man,
	doc/src/ns_register_fasturl2file.man, doc/src/ns_register_proxy.man,
	doc/src/ns_register_trace.man, doc/src/ns_register_url2file.man,
	doc/src/ns_returnadminnotice.man, doc/src/ns_returnbadrequest.man,
	doc/src/ns_returnerror.man, doc/src/ns_returnfp.man,
	doc/src/ns_returnnotice.man, doc/src/ns_returnunavailable.man,
	doc/src/ns_rollfile.man, doc/src/ns_runonce.man,
	doc/src/ns_rwlock.man, doc/src/ns_serverpath.man,
	doc/src/ns_serverrootproc.man, doc/src/ns_setcookie.man,
	doc/src/ns_shortcut_filter.man, doc/src/ns_sockaccept.man,
	doc/src/ns_sockblocking.man, doc/src/ns_sockcallback.man,
	doc/src/ns_sockcheck.man, doc/src/ns_socketpair.man,
	doc/src/ns_socklisten.man, doc/src/ns_socklistencallback.man,
	doc/src/ns_socknonblocking.man, doc/src/ns_socknread.man,
	doc/src/ns_sockopen.man, doc/src/ns_sockselect.man,
	doc/src/ns_startcontent.man, doc/src/ns_truncate.man,
	doc/src/ns_unregister_adp.man, doc/src/ns_unregister_url2file.man,
	doc/src/ns_upload_stats.man, doc/src/ns_url2file.man,
	doc/src/ns_urlencode.man, doc/src/ns_var.man,
	doc/src/ns_writecontent.man, doc/src/ns_writefp.man,
	doc/src/ns_writer.man, doc/src/template.man:
	Update to be valid doctools files; next, figure out cross-
	referencing with [uri] tag

2006-09-19 23:02 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a157a062ed31)

	* doc/src/module-nscgi.man:
	Make it valid doctools format

2006-09-19 22:44 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (2edcd437d321)

	* doc/html/ns_sendmail.html: deleted file.
	* doc/html/ns_sendmail.html:
	.html files can be produced from .man file with doctools

2006-09-19 12:00 +0100  Zoran Vasiljevic  <zv@archiware.com>  (706da67ed0b6)

	* ChangeLog, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c:
	Remove unneeded broadcast on the pool condition variable

	Also, in PushProxy(), the pool condition variable is conditionally
	broadcasted.

	Renamed Proc to Slave to avoid name-clashes with the rest of the
	code where procPtr usually means something else.

	nsproxy/nsproxymod.c: Structure holding the server and module
	information is now allocated from the heap instead of being static.

2006-09-18 19:02 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (0f8d4707721e)

	* ChangeLog, tcl/http.tcl:
	Update and fix minor bugs in http proxy script

2006-09-17 21:41 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f5050fde6857)

	* Makefile, doc/src/admin-install.man, doc/src/admin-maintenance.man,
	doc/src/adp-overview.man, doc/src/c-driverdb.man,
	doc/src/c-urlspace.man, doc/src/main-history.man, doc/src/tcl-
	nsv.man, doc/src/tcl-overview.man:
	Make docs doctools parsable

2006-09-17 20:53 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (83da38348e5b)

	* doc/src/admin-config.man, doc/src/admin-db.man, doc/src/admin-
	install.man, doc/src/admin-maintenance.man, doc/src/admin-
	tuning.man, doc/src/adp-overview.man, doc/src/c-driverdb.man,
	doc/src/c-urlspace.man, doc/src/main-faq.man, doc/src/main-
	features.man, doc/src/main-history.man, doc/src/main-standards.man,
	doc/src/module-nscgi.man, doc/src/module-nscp.man, doc/src/module-
	nsperm.man, doc/src/tcl-libraries.man, doc/src/tcl-nsv.man, doc/src
	/tcl-overview.man: new file.
	* doc/html/admin-config.html, doc/html/admin-db.html, doc/html/admin-
	install.html, doc/html/admin-maintenance.html, doc/html/admin-
	tuning.html, doc/html/adp-overview.html, doc/html/c-driverdb.html,
	doc/html/c-urlspace.html, doc/html/main-faq.html, doc/html/main-
	features.html, doc/html/main-history.html, doc/html/main-
	standards.html, doc/html/module-nscgi.html, doc/html/module-
	nscp.html, doc/html/module-nsperm.html, doc/html/sample-
	config.tcl.txt, doc/html/tcl-libraries.html, doc/html/tcl-nsv.html,
	doc/html/tcl-overview.html: deleted file.
	* ChangeLog, doc/html/admin-config.html, doc/html/admin-db.html,
	doc/html/admin-install.html, doc/html/admin-maintenance.html,
	doc/html/admin-tuning.html, doc/html/adp-overview.html,
	doc/html/c-driverdb.html, doc/html/c-urlspace.html, doc/html/main-
	faq.html, doc/html/main-features.html, doc/html/main-history.html,
	doc/html/main-standards.html, doc/html/module-nscgi.html, doc/html
	/module-nscp.html, doc/html/module-nsperm.html, doc/html/sample-
	config.tcl.txt, doc/html/tcl-libraries.html, doc/html/tcl-nsv.html,
	doc/html/tcl-overview.html, doc/src/admin-config.man, doc/src/admin-
	db.man, doc/src/admin-install.man, doc/src/admin-maintenance.man,
	doc/src/admin-tuning.man, doc/src/adp-overview.man,
	doc/src/c-driverdb.man, doc/src/c-urlspace.man, doc/src/main-
	faq.man, doc/src/main-features.man, doc/src/main-history.man,
	doc/src/main-standards.man, doc/src/module-nscgi.man, doc/src
	/module-nscp.man, doc/src/module-nsperm.man, doc/src/tcl-
	libraries.man, doc/src/tcl-nsv.man, doc/src/tcl-overview.man:
	Converted .html fiels into doctools .man files

2006-09-15 21:23 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (cf7fb4b26c5f)

	* doc/Ns_Alloc.3, doc/Ns_CritSec.3, doc/Ns_Encrypt.3,
	doc/Ns_IntPrint.3, doc/Ns_Master.3, doc/Ns_Mime.3,
	doc/Ns_QuoteHtml.3, doc/Ns_String.3, doc/Ns_Uid.3, doc/Ns_Url.3,
	doc/html/tcl-examples.html, doc/mkLinks, doc/ns_adp.n,
	doc/ns_cache.n, doc/ns_crypt.n, doc/ns_filter.n, doc/ns_geturl.n,
	doc/ns_headers.n, doc/ns_info.n, doc/ns_sock.n, doc/ns_thread.n,
	doc/ns_time.n: deleted file.
	* doc/Ns_Alloc.3, doc/Ns_CritSec.3, doc/Ns_Encrypt.3,
	doc/Ns_IntPrint.3, doc/Ns_Master.3, doc/Ns_Mime.3,
	doc/Ns_QuoteHtml.3, doc/Ns_String.3, doc/Ns_Uid.3, doc/Ns_Url.3,
	doc/html/admin-config.html, doc/html/admin-db.html, doc/html/admin-
	install.html, doc/html/admin-maintenance.html, doc/html/admin-
	tuning.html, doc/html/adp-overview.html, doc/html/c-driverdb.html,
	doc/html/c-urlspace.html, doc/html/index.html, doc/html/main-
	faq.html, doc/html/main-features.html, doc/html/main-history.html,
	doc/html/main-standards.html, doc/html/module-nscgi.html, doc/html
	/module-nscp.html, doc/html/module-nsperm.html, doc/html/tcl-
	examples.html, doc/html/tcl-libraries.html, doc/html/tcl-nsv.html,
	doc/html/tcl-overview.html, doc/install-doc, doc/mkLinks,
	doc/ns_adp.n, doc/ns_cache.n, doc/ns_crypt.n, doc/ns_filter.n,
	doc/ns_geturl.n, doc/ns_headers.n, doc/ns_info.n, doc/ns_sock.n,
	doc/ns_thread.n, doc/ns_time.n:
	Cleaned up docs, reformatted HTML files, removed unsused files

2006-09-15 16:30 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (090bfd7051fd)

	* ChangeLog, nsd/log.c, nsd/nsconf.c, nsd/server.c:
	Regularize configuration paths

	Make all path related parameters work the same way:

	 - if not specified, use default
	 - if absolute, use as given
	 - if relative, construct under server home dir

	This affects the following parameters: home, pagedir, library,
	tcllibrary, initfile, serverlog

2006-09-15 14:11 +0100  Zoran Vasiljevic  <zv@archiware.com>  (5e6282ca541f)

	* ChangeLog, nsd/server.c:
	(NsInitServer): fix wrongly calculated path to the server-private
	Tcl library

	According to the new simplified schema, the path to the private tcl
	lib is "$home/modules/tcl" but the code calculated
	"$home/modules/modules/tcl" instead.

	This has now been fixed.

2006-09-15 11:29 +0100  Zoran Vasiljevic  <zv@archiware.com>  (1a08f9e821b4)

	* sample-config.tcl.in:
	Update nsproxy default parameters

2006-09-15 10:27 +0100  Zoran Vasiljevic  <zv@archiware.com>  (d5e39ab1b6ef)

	* ChangeLog, tests/ns_proxy.test:
	Add some new nsproxy tests

2006-09-15 10:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (6bdcba1eb2a3)

	* nsproxy/ns_proxy.man:
	Update documentation for new/changed commands

2006-09-15 10:24 +0100  Zoran Vasiljevic  <zv@archiware.com>  (09a3eff813eb)

	* nsproxy/nsproxylib.c:
	Add new command [ns_proxy stop] which kills slaves of the running
	proxies

	Changed format of the result of the [ns_proxy active] to be a list
	of lists. Each sublist is in key/value format containing information
	about the proxy handle, the pid of the slave, the start-time and the
	executing script.

	Also, the command now accepts one optional argument: the handle of
	the proxy for which to return the status report.

	Changed [ns_proxy clear] to require the pool argument. The [ns_proxy
	clear] and [ns_proxy stop] commands are now symetric where the
	former operates on the idle proxies and the latter on the running
	proxies.

2006-09-15 10:23 +0100  Zoran Vasiljevic  <zv@archiware.com>  (031d561cc935)

	* nsproxy/nsproxymod.c:
	Register Ns_Shutdown instead of Ns_Exit callback to teardown the
	proxy

2006-09-15 10:23 +0100  Zoran Vasiljevic  <zv@archiware.com>  (5fbcc271f2e8)

	* nsproxy/nsproxy.h:
	Export Ns_ProxyShutdown instead of Ns_ProxyExit

2006-09-15 04:33 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5e7d1584b315)

	* doc/html/admin-config.html, doc/html/admin-db.html, doc/html/admin-
	install.html, doc/html/admin-maintenance.html, doc/html/admin-
	tuning.html, doc/html/index.html, doc/html/main-faq.html, doc/html
	/main-features.html, doc/html/module-nscp.html:
	Updating documentation HTML files...

2006-09-14 18:35 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b856508e0b1c)

	* ChangeLog, nsproxy/ns_proxy.man, nsproxy/nsproxylib.c,
	tests/ns_proxy.test:
	Fix various MT-safeness issues all around the code; new commands

	Removed "-minslaves" pool configuration option, as it was both
	broken and meaningless.

	Returning a non-idle proxy back to the pool forcefully closes the
	corresponding slave process.

	Added new command [ns_proxy pools] to dynamically obtain the list of
	available pools.

	Fixed broken [ns_proxy active] which failed to report all but the
	first active proxy.

	nsproxy/ns_proxy.man: Added some flesh.

	tests/ns_proxy.test: Adjusted to match new command line and sytax.
	Added couple of tests to check [ns_proxy active] command.

2006-09-13 22:26 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (513933ca6511)

	* ChangeLog, nsd/init.tcl, tests/http.test, tests/test.nscfg,
	tests/testserver/modules/testhttp.tcl:
	Fixed bug in init.tcl not loading .tcl files on start

2006-09-13 09:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (39c0479df049)

	* ChangeLog, nsproxy/nsproxylib.c:
	(Ns_ProxyExit): avoid tearing down pools with slaves on the run list

	This may lead to memory violations. At the moment we just "leak"
	those pools.

2006-09-12 21:51 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (efe6f7e7ff24)

	* doc/html/tcl-general.html: deleted file.
	* doc/html/admin-config.html, doc/html/admin-install.html, doc/html
	/admin-maintenance.html, doc/html/admin-tuning.html, doc/html/adp-
	overview.html, doc/html/index.html, doc/html/main-faq.html, doc/html
	/main-features.html, doc/html/tcl-general.html, doc/html/tcl-
	overview.html:
	In progress work for updating documentation...

2006-09-12 10:36 +0100  Bernd Eidenschink  <eidenschink@web.de>  (26720f814e6c)

	* doc/src/ns_adp_compress.man, doc/src/ns_adp_debug.man,
	doc/src/ns_adp_registeradp.man, doc/src/ns_adp_registertag.man,
	doc/src/ns_atprestartup.man, doc/src/ns_atstartup.man,
	doc/src/ns_base64decode.man, doc/src/ns_base64encode.man,
	doc/src/ns_cache_append.man, doc/src/ns_cache_create.man,
	doc/src/ns_cache_eval.man, doc/src/ns_cache_incr.man,
	doc/src/ns_cache_lappend.man, doc/src/ns_cache_size.man,
	doc/src/ns_cache_stats.man, doc/src/ns_conncptofp.man,
	doc/src/ns_connsendfp.man, doc/src/ns_deletecookie.man,
	doc/src/ns_getcookie.man, doc/src/ns_geturl.man,
	doc/src/ns_hashpath.man, doc/src/ns_headers.man,
	doc/src/ns_imgmime.man, doc/src/ns_imgsize.man,
	doc/src/ns_imgtype.man, doc/src/ns_limits_get.man,
	doc/src/ns_limits_list.man, doc/src/ns_limits_register.man,
	doc/src/ns_limits_set.man, doc/src/ns_locationproc.man,
	doc/src/ns_moduleload.man, doc/src/ns_pagepath.man,
	doc/src/ns_parseargs.man, doc/src/ns_parseheader.man,
	doc/src/ns_perm.man, doc/src/ns_pngsize.man, doc/src/ns_proxy.man,
	doc/src/ns_purgefiles.man, doc/src/ns_register_adptag.man,
	doc/src/ns_register_fastpath.man,
	doc/src/ns_register_fasturl2file.man, doc/src/ns_register_proxy.man,
	doc/src/ns_register_trace.man, doc/src/ns_register_url2file.man,
	doc/src/ns_returnadminnotice.man, doc/src/ns_returnbadrequest.man,
	doc/src/ns_returnerror.man, doc/src/ns_returnfp.man,
	doc/src/ns_returnnotice.man, doc/src/ns_returnunavailable.man,
	doc/src/ns_rollfile.man, doc/src/ns_runonce.man,
	doc/src/ns_rwlock.man, doc/src/ns_serverpath.man,
	doc/src/ns_serverrootproc.man, doc/src/ns_setcookie.man,
	doc/src/ns_shortcut_filter.man, doc/src/ns_sockaccept.man,
	doc/src/ns_sockblocking.man, doc/src/ns_sockcallback.man,
	doc/src/ns_sockcheck.man, doc/src/ns_socketpair.man,
	doc/src/ns_socklisten.man, doc/src/ns_socklistencallback.man,
	doc/src/ns_socknonblocking.man, doc/src/ns_socknread.man,
	doc/src/ns_sockopen.man, doc/src/ns_sockselect.man,
	doc/src/ns_startcontent.man, doc/src/ns_truncate.man,
	doc/src/ns_unregister_adp.man, doc/src/ns_unregister_url2file.man,
	doc/src/ns_upload_stats.man, doc/src/ns_var.man,
	doc/src/ns_writecontent.man, doc/src/ns_writefp.man,
	doc/src/ns_writer.man: new file.
	* ChangeLog, doc/src/ns_adp_compress.man, doc/src/ns_adp_debug.man,
	doc/src/ns_adp_registeradp.man, doc/src/ns_adp_registertag.man,
	doc/src/ns_atprestartup.man, doc/src/ns_atstartup.man,
	doc/src/ns_base64decode.man, doc/src/ns_base64encode.man,
	doc/src/ns_cache_append.man, doc/src/ns_cache_create.man,
	doc/src/ns_cache_eval.man, doc/src/ns_cache_incr.man,
	doc/src/ns_cache_lappend.man, doc/src/ns_cache_size.man,
	doc/src/ns_cache_stats.man, doc/src/ns_conncptofp.man,
	doc/src/ns_connsendfp.man, doc/src/ns_deletecookie.man,
	doc/src/ns_getcookie.man, doc/src/ns_geturl.man,
	doc/src/ns_hashpath.man, doc/src/ns_headers.man,
	doc/src/ns_imgmime.man, doc/src/ns_imgsize.man,
	doc/src/ns_imgtype.man, doc/src/ns_limits_get.man,
	doc/src/ns_limits_list.man, doc/src/ns_limits_register.man,
	doc/src/ns_limits_set.man, doc/src/ns_locationproc.man,
	doc/src/ns_moduleload.man, doc/src/ns_pagepath.man,
	doc/src/ns_parseargs.man, doc/src/ns_parseheader.man,
	doc/src/ns_perm.man, doc/src/ns_pngsize.man, doc/src/ns_proxy.man,
	doc/src/ns_purgefiles.man, doc/src/ns_register_adptag.man,
	doc/src/ns_register_fastpath.man,
	doc/src/ns_register_fasturl2file.man, doc/src/ns_register_proxy.man,
	doc/src/ns_register_trace.man, doc/src/ns_register_url2file.man,
	doc/src/ns_returnadminnotice.man, doc/src/ns_returnbadrequest.man,
	doc/src/ns_returnerror.man, doc/src/ns_returnfp.man,
	doc/src/ns_returnnotice.man, doc/src/ns_returnunavailable.man,
	doc/src/ns_rollfile.man, doc/src/ns_runonce.man,
	doc/src/ns_rwlock.man, doc/src/ns_serverpath.man,
	doc/src/ns_serverrootproc.man, doc/src/ns_setcookie.man,
	doc/src/ns_shortcut_filter.man, doc/src/ns_sockaccept.man,
	doc/src/ns_sockblocking.man, doc/src/ns_sockcallback.man,
	doc/src/ns_sockcheck.man, doc/src/ns_socketpair.man,
	doc/src/ns_socklisten.man, doc/src/ns_socklistencallback.man,
	doc/src/ns_socknonblocking.man, doc/src/ns_socknread.man,
	doc/src/ns_sockopen.man, doc/src/ns_sockselect.man,
	doc/src/ns_startcontent.man, doc/src/ns_truncate.man,
	doc/src/ns_unregister_adp.man, doc/src/ns_unregister_url2file.man,
	doc/src/ns_upload_stats.man, doc/src/ns_var.man,
	doc/src/ns_writecontent.man, doc/src/ns_writefp.man,
	doc/src/ns_writer.man:
	Add missing documentation templates for commands

2006-09-12 02:45 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5d53a726ad98)

	* doc/html/admin-config.html, doc/html/admin-db.html, doc/html/admin-
	install.html, doc/html/admin-maintenance.html, doc/html/admin-
	tuning.html, doc/html/adp-overview.html, doc/html/c-driverdb.html,
	doc/html/c-urlspace.html, doc/html/index.html, doc/html/main-
	faq.html, doc/html/main-features.html, doc/html/main-history.html,
	doc/html/main-standards.html, doc/html/module-nscgi.html, doc/html
	/module-nscp.html, doc/html/module-nsperm.html, doc/html/sample-
	config.tcl.txt, doc/html/tcl-examples.html, doc/html/tcl-
	general.html, doc/html/tcl-libraries.html, doc/html/tcl-nsv.html,
	doc/html/tcl-overview.html: new file.
	* doc/Ns_Adp.3, doc/Ns_Auth.3, doc/Ns_Cache.3, doc/Ns_Cls.3,
	doc/Ns_Cond.3, doc/Ns_Config.3, doc/Ns_Conn.3, doc/Ns_ConnCopy.3,
	doc/Ns_ConnDriver.3, doc/Ns_ConnHeaders.3, doc/Ns_ConnRead.3,
	doc/Ns_ConnRequest.3, doc/Ns_ConnReturn.3, doc/Ns_ConnSend.3,
	doc/Ns_ConnWrite.3, doc/Ns_DString.3, doc/Ns_Db.3,
	doc/Ns_DbDriver.3, doc/Ns_DbPool.3, doc/Ns_DbSp.3, doc/Ns_DbUtil.3,
	doc/Ns_Driver.3, doc/Ns_Encoding.3, doc/Ns_Env.3, doc/Ns_Exec.3,
	doc/Ns_ExtDb.3, doc/Ns_Fd.3, doc/Ns_Fetch.3, doc/Ns_Filter.3,
	doc/Ns_HttpTime.3, doc/Ns_Htuu.3, doc/Ns_Index.3, doc/Ns_InetAddr.3,
	doc/Ns_Info.3, doc/Ns_List.3, doc/Ns_Location.3, doc/Ns_Log.3,
	doc/Ns_Module.3, doc/Ns_Mutex.3, doc/Ns_Nsd.3, doc/Ns_Pathname.3,
	doc/Ns_Pool.3, doc/Ns_ProcInfo.3, doc/Ns_RWLock.3, doc/Ns_Rand.3,
	doc/Ns_Reentrant.3, doc/Ns_Register.3, doc/Ns_Request.3,
	doc/Ns_RollFile.3, doc/Ns_Sched.3, doc/Ns_Sema.3,
	doc/Ns_ServerSpecific.3, doc/Ns_Set.3, doc/Ns_Signal.3,
	doc/Ns_Sock.3, doc/Ns_SockCallback.3, doc/Ns_SockErrno.3,
	doc/Ns_SockIO.3, doc/Ns_TclConn.3, doc/Ns_TclDbGetHandle.3,
	doc/Ns_TclFile.3, doc/Ns_TclInit.3, doc/Ns_TclInterp.3,
	doc/Ns_TclRegister.3, doc/Ns_TclSet.3, doc/Ns_TclThread.3,
	doc/Ns_TclTimeObj.3, doc/Ns_TempFile.3, doc/Ns_Thread.3,
	doc/Ns_Thread2.3, doc/Ns_ThreadAlloc.3, doc/Ns_Time.3, doc/Ns_Tls.3,
	doc/Ns_UrlEncode.3, doc/Ns_UrlSpecific.3, doc/Ns_UrlToFile.3,
	doc/ns_at.n, doc/ns_chan.n, doc/ns_checkurl.n, doc/ns_config.n,
	doc/ns_conn.n, doc/ns_crash.n, doc/ns_db.n, doc/ns_env.n,
	doc/ns_eval.n, doc/ns_file.n, doc/ns_getchannels.n,
	doc/ns_guesstype.n, doc/ns_html.n, doc/ns_http.n, doc/ns_httptime.n,
	doc/ns_img.n, doc/ns_init.n, doc/ns_job.n, doc/ns_kill.n,
	doc/ns_library.n, doc/ns_log.n, doc/ns_logroll.n,
	doc/ns_markfordelete.n, doc/ns_module.n, doc/ns_modulepath.n,
	doc/ns_normalizepath.n, doc/ns_parseheader.n, doc/ns_parsequery.n,
	doc/ns_proc.n, doc/ns_purgefiles.n, doc/ns_rand.n,
	doc/ns_requestauthorize.n, doc/ns_return.n, doc/ns_rollfile.n,
	doc/ns_sched.n, doc/ns_set.n, doc/ns_share.n, doc/ns_sleep.n,
	doc/ns_sync.n, doc/ns_tmp.n, doc/ns_url2file.n, doc/ns_urlencode.n,
	doc/ns_uuencode.n, doc/ns_writefp.n, doc/nsd.1: deleted file.
	* ChangeLog, Makefile, doc/Ns_Adp.3, doc/Ns_Auth.3, doc/Ns_Cache.3,
	doc/Ns_Cls.3, doc/Ns_Cond.3, doc/Ns_Config.3, doc/Ns_Conn.3,
	doc/Ns_ConnCopy.3, doc/Ns_ConnDriver.3, doc/Ns_ConnHeaders.3,
	doc/Ns_ConnRead.3, doc/Ns_ConnRequest.3, doc/Ns_ConnReturn.3,
	doc/Ns_ConnSend.3, doc/Ns_ConnWrite.3, doc/Ns_DString.3,
	doc/Ns_Db.3, doc/Ns_DbDriver.3, doc/Ns_DbPool.3, doc/Ns_DbSp.3,
	doc/Ns_DbUtil.3, doc/Ns_Driver.3, doc/Ns_Encoding.3, doc/Ns_Env.3,
	doc/Ns_Exec.3, doc/Ns_ExtDb.3, doc/Ns_Fd.3, doc/Ns_Fetch.3,
	doc/Ns_Filter.3, doc/Ns_HttpTime.3, doc/Ns_Htuu.3, doc/Ns_Index.3,
	doc/Ns_InetAddr.3, doc/Ns_Info.3, doc/Ns_List.3, doc/Ns_Location.3,
	doc/Ns_Log.3, doc/Ns_Module.3, doc/Ns_Mutex.3, doc/Ns_Nsd.3,
	doc/Ns_Pathname.3, doc/Ns_Pool.3, doc/Ns_ProcInfo.3,
	doc/Ns_RWLock.3, doc/Ns_Rand.3, doc/Ns_Reentrant.3,
	doc/Ns_Register.3, doc/Ns_Request.3, doc/Ns_RollFile.3,
	doc/Ns_Sched.3, doc/Ns_Sema.3, doc/Ns_ServerSpecific.3,
	doc/Ns_Set.3, doc/Ns_Signal.3, doc/Ns_Sock.3, doc/Ns_SockCallback.3,
	doc/Ns_SockErrno.3, doc/Ns_SockIO.3, doc/Ns_TclConn.3,
	doc/Ns_TclDbGetHandle.3, doc/Ns_TclFile.3, doc/Ns_TclInit.3,
	doc/Ns_TclInterp.3, doc/Ns_TclRegister.3, doc/Ns_TclSet.3,
	doc/Ns_TclThread.3, doc/Ns_TclTimeObj.3, doc/Ns_TempFile.3,
	doc/Ns_Thread.3, doc/Ns_Thread2.3, doc/Ns_ThreadAlloc.3,
	doc/Ns_Time.3, doc/Ns_Tls.3, doc/Ns_UrlEncode.3,
	doc/Ns_UrlSpecific.3, doc/Ns_UrlToFile.3, doc/html/admin-
	config.html, doc/html/admin-db.html, doc/html/admin-install.html,
	doc/html/admin-maintenance.html, doc/html/admin-tuning.html,
	doc/html/adp-overview.html, doc/html/c-driverdb.html,
	doc/html/c-urlspace.html, doc/html/index.html, doc/html/main-
	faq.html, doc/html/main-features.html, doc/html/main-history.html,
	doc/html/main-standards.html, doc/html/module-nscgi.html, doc/html
	/module-nscp.html, doc/html/module-nsperm.html, doc/html/sample-
	config.tcl.txt, doc/html/tcl-examples.html, doc/html/tcl-
	general.html, doc/html/tcl-libraries.html, doc/html/tcl-nsv.html,
	doc/html/tcl-overview.html, doc/ns_at.n, doc/ns_chan.n,
	doc/ns_checkurl.n, doc/ns_config.n, doc/ns_conn.n, doc/ns_crash.n,
	doc/ns_db.n, doc/ns_env.n, doc/ns_eval.n, doc/ns_file.n,
	doc/ns_getchannels.n, doc/ns_guesstype.n, doc/ns_html.n,
	doc/ns_http.n, doc/ns_httptime.n, doc/ns_img.n, doc/ns_init.n,
	doc/ns_job.n, doc/ns_kill.n, doc/ns_library.n, doc/ns_log.n,
	doc/ns_logroll.n, doc/ns_markfordelete.n, doc/ns_module.n,
	doc/ns_modulepath.n, doc/ns_normalizepath.n, doc/ns_parseheader.n,
	doc/ns_parsequery.n, doc/ns_proc.n, doc/ns_purgefiles.n,
	doc/ns_rand.n, doc/ns_requestauthorize.n, doc/ns_return.n,
	doc/ns_rollfile.n, doc/ns_sched.n, doc/ns_set.n, doc/ns_share.n,
	doc/ns_sleep.n, doc/ns_sync.n, doc/ns_tmp.n, doc/ns_url2file.n,
	doc/ns_urlencode.n, doc/ns_uuencode.n, doc/ns_writefp.n, doc/nsd.1,
	doc/src/ns_sleep.man, doc/src/ns_url2file.man,
	doc/src/ns_urlencode.man, index.adp:
	Cleanup of docs, added top level HTML files, removed empty man pages

2006-09-11 23:04 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f99d5daca4c8)

	* nsd-config.tcl: new file.
	* nsd-config.tcl:
	Move nsd.tcl from contrib into top as nsd-config.tcl

2006-09-10 20:35 +0100  Michael Cleverly  <michael@cleverly.com>  (0e44d382e6db)

	* ChangeLog:
	Add missing ChangeLog entries

2006-09-10 20:26 +0100  Michael Cleverly  <michael@cleverly.com>  (9300fc3fa3b4)

	* nsd/init.tcl:
	Add pedantic [list] quoting of commands being [eval]'ed

	Add -- to [glob] in case anyone ever mistakingly named a $sharedlib
	with a beginning hyphen.

2006-09-10 20:24 +0100  Michael Cleverly  <michael@cleverly.com>  (7591cbd9e313)

	* nsdb/util.tcl:
	Pedantic addition of -- to [switch] to signal end of switches

	On the off chance someone mistakingly passes an $opt that begins
	with a hyphen.

	Added a catch around [ns_db bouncepool] in ns_dbshutdown to any
	errors.

2006-09-10 20:20 +0100  Michael Cleverly  <michael@cleverly.com>  (46c3a164bb10)

	* nsperm/init.tcl:
	Use [file join] to construct filenames for maximum portability

	Add [list] quoting when building up a $cmd script to be [eval]'ed.

2006-09-10 05:55 +0100  cleverly  <cleverly>  (47f55f5621e2)

	* tcl/charsets.tcl:
	Add -- (end of switches) to the regexp in ns_cookiecharset

	In case the $name of the cookie ever happened to begin with a
	hyphen, we are safe.

2006-09-10 05:53 +0100  Michael Cleverly  <michael@cleverly.com>  (ea9df867408f)

	* tcl/util.tcl:
	Add -- (end of switches) in front of regexp/regsub where the regexp
	comes from a $variable

	Specifically specified the level-to-upvar in getformdata as 1 to
	avoid errors if the name of the formVar were ever an integer.

	Changed remaining instances of string comparisons using == and != to
	eq and ne.

2006-09-10 05:25 +0100  Michael Cleverly  <michael@cleverly.com>  (ae35e1106ee8)

	* tcl/nstrace.tcl:
	Pedantic additions of [list] quoting while constructing the
	script(s) used to initialize interp state

	This is so that they won't blow up if someone were ever foolish
	enough to create a namespace (or proc) that contains a space or
	other meaningful Tcl punctuation ($, [], \, etc.)

	Changed all instances of: uplevel <command> <args> to explicitly be
	uplevel 1 <command> <args> in case <command> were ever interpretable
	as an integer itself.

	Changed "switch -glob $nop" to "switch -glob -- $nop" in case $nop
	were to ever begin with a hyphen.

2006-09-10 04:50 +0100  Michael Cleverly  <michael@cleverly.com>  (c603ac259bb5)

	* tcl/limits.tcl:
	Replaced [expr 10*1024*1000] with the actual result of the
	computation

	(Alternatively, if it is desirable to have it as a calculation, it
	should be braced as [expr {10*1024*1000}]).

2006-09-10 04:47 +0100  Michael Cleverly  <michael@cleverly.com>  (4e1e5daf16d0)

	* tcl/http.tcl:
	(ns_httpget): follow redirects other than 302

	As per RFC 2616:

	 301 = Moved Permanently 303 = See Other 307 = Temporary Redirect

2006-09-10 04:31 +0100  Michael Cleverly  <michael@cleverly.com>  (dd2cc5af9272)

	* tcl/file.tcl:
	Change one instance of string comparisons using == and != to eq and
	ne

2006-09-10 04:25 +0100  Michael Cleverly  <michael@cleverly.com>  (b3e3e4fa3e4d)

	* tcl/compat.tcl:
	Add [list $dst] quoting to the final eval in [ns_cp -preserve]

	(in case $dst were ever a filename with spaces in it).

2006-09-08 19:27 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (92869c115daa)

	* contrib/nsd.tcl: deleted file.
	* Makefile, contrib/nsd.tcl:
	Rearranged config files, updated new paths

2006-09-08 11:19 +0100  Bernd Eidenschink  <eidenschink@web.de>  (7febdfdd139b)

	* ChangeLog, doc/src/keyldel.man, doc/src/keylget.man,
	doc/src/keylkeys.man, doc/src/keylset.man, doc/src/ns_accesslog.man,
	doc/src/ns_addrbyhost.man, doc/src/ns_adp_abort.man,
	doc/src/ns_adp_append.man, doc/src/ns_adp_argc.man,
	doc/src/ns_adp_argv.man, doc/src/ns_adp_bind_args.man,
	doc/src/ns_adp_break.man, doc/src/ns_adp_dir.man,
	doc/src/ns_adp_dump.man, doc/src/ns_adp_eval.man,
	doc/src/ns_adp_exception.man, doc/src/ns_adp_include.man,
	doc/src/ns_adp_mime.man, doc/src/ns_adp_mimetype.man,
	doc/src/ns_adp_parse.man, doc/src/ns_adp_puts.man,
	doc/src/ns_adp_registerproc.man, doc/src/ns_adp_return.man,
	doc/src/ns_adp_safeeval.man, doc/src/ns_adp_stats.man,
	doc/src/ns_adp_stream.man, doc/src/ns_adp_tell.man,
	doc/src/ns_adp_trunc.man, doc/src/ns_after.man,
	doc/src/ns_atclose.man, doc/src/ns_atexit.man,
	doc/src/ns_atshutdown.man, doc/src/ns_atsignal.man,
	doc/src/ns_browsermatch.man, doc/src/ns_buildsqldate.man,
	doc/src/ns_cache_flush.man, doc/src/ns_cache_keys.man,
	doc/src/ns_cache_names.man, doc/src/ns_cancel.man,
	doc/src/ns_chan.man, doc/src/ns_charsets.man,
	doc/src/ns_checkurl.man, doc/src/ns_chmod.man,
	doc/src/ns_choosecharset.man, doc/src/ns_cleanup.man,
	doc/src/ns_cleanupchans.man, doc/src/ns_cond.man,
	doc/src/ns_config.man, doc/src/ns_configsection.man,
	doc/src/ns_configsections.man, doc/src/ns_conn.man,
	doc/src/ns_cookiecharset.man, doc/src/ns_cookietime.man,
	doc/src/ns_cp.man, doc/src/ns_critsec.man, doc/src/ns_crypt.man,
	doc/src/ns_db.man, doc/src/ns_dbquotename.man,
	doc/src/ns_dbquotevalue.man, doc/src/ns_encodingforcharset.man,
	doc/src/ns_encodingfortype.man, doc/src/ns_encrypt.man,
	doc/src/ns_env.man, doc/src/ns_eval.man, doc/src/ns_event.man,
	doc/src/ns_findset.man, doc/src/ns_fmttime.man,
	doc/src/ns_formfieldcharset.man, doc/src/ns_ftruncate.man,
	doc/src/ns_getchannels.man, doc/src/ns_getform.man,
	doc/src/ns_getformfile.man, doc/src/ns_gifsize.man,
	doc/src/ns_gmtime.man, doc/src/ns_guesstype.man,
	doc/src/ns_hostbyaddr.man, doc/src/ns_hrefs.man,
	doc/src/ns_htmlselect.man, doc/src/ns_http.man,
	doc/src/ns_httpget.man, doc/src/ns_httpopen.man,
	doc/src/ns_httppost.man, doc/src/ns_httptime.man,
	doc/src/ns_ictl.man, doc/src/ns_info.man, doc/src/ns_init.man,
	doc/src/ns_issmallint.man, doc/src/ns_job.man,
	doc/src/ns_jpegsize.man, doc/src/ns_kill.man,
	doc/src/ns_library.man, doc/src/ns_link.man,
	doc/src/ns_localsqltimestamp.man, doc/src/ns_localtime.man,
	doc/src/ns_log.man, doc/src/ns_logctl.man, doc/src/ns_logroll.man,
	doc/src/ns_markfordelete.man, doc/src/ns_mkdir.man,
	doc/src/ns_mktemp.man, doc/src/ns_modulepath.man,
	doc/src/ns_mutex.man, doc/src/ns_normalizepath.man,
	doc/src/ns_param.man, doc/src/ns_paren.man,
	doc/src/ns_parsehttptime.man, doc/src/ns_parsequery.man,
	doc/src/ns_parsetime.man, doc/src/ns_pause.man, doc/src/ns_puts.man,
	doc/src/ns_queryexists.man, doc/src/ns_queryget.man,
	doc/src/ns_querygetall.man, doc/src/ns_quotehtml.man,
	doc/src/ns_rand.man, doc/src/ns_register_adp.man,
	doc/src/ns_register_filter.man, doc/src/ns_register_proc.man,
	doc/src/ns_reinit.man, doc/src/ns_rename.man,
	doc/src/ns_requestauthorize.man, doc/src/ns_respond.man,
	doc/src/ns_resume.man, doc/src/ns_return.man,
	doc/src/ns_returnfile.man, doc/src/ns_returnforbidden.man,
	doc/src/ns_returnmoved.man, doc/src/ns_returnnotfound.man,
	doc/src/ns_returnok.man, doc/src/ns_returnredirect.man,
	doc/src/ns_returnunauthorized.man, doc/src/ns_rmdir.man,
	doc/src/ns_schedule_daily.man, doc/src/ns_schedule_proc.man,
	doc/src/ns_schedule_weekly.man, doc/src/ns_section.man,
	doc/src/ns_sema.man, doc/src/ns_server.man, doc/src/ns_set.man,
	doc/src/ns_setexpires.man, doc/src/ns_setformencoding.man,
	doc/src/ns_share.man, doc/src/ns_shutdown.man, doc/src/ns_sleep.man,
	doc/src/ns_stats.man, doc/src/ns_striphtml.man,
	doc/src/ns_symlink.man, doc/src/ns_tagelement.man,
	doc/src/ns_tagelementset.man, doc/src/ns_thread.man,
	doc/src/ns_time.man, doc/src/ns_tmpnam.man,
	doc/src/ns_unregister_proc.man, doc/src/ns_unschedule_proc.man,
	doc/src/ns_url2file.man, doc/src/ns_urlcharset.man,
	doc/src/ns_urldecode.man, doc/src/ns_urlencode.man,
	doc/src/ns_uudecode.man, doc/src/ns_uuencode.man,
	doc/src/ns_write.man, doc/src/nsv_append.man, doc/src/nsv_array.man,
	doc/src/nsv_exists.man, doc/src/nsv_get.man, doc/src/nsv_incr.man,
	doc/src/nsv_lappend.man, doc/src/nsv_names.man, doc/src/nsv_set.man,
	doc/src/nsv_unset.man:
	Rewrote Vlads auto-imported documentation so that it compiles with
	dtplite

	Next step is to finetune the contents during the documentation
	process. doc/src/commandlist.man should finally become a TOC and
	reference the files.

2006-09-08 08:16 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b1b26d187296)

	* ChangeLog, nsd/log.c:
	(SeverityName):accept one more argument: the buffer where the result
	is to be returned

	Before we were just returning the pointer to a buffer allocated on
	the stack, which was a bad thing to do.

2006-09-07 22:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a8edfc794506)

	* doc/src/keyldel.man, doc/src/keylget.man, doc/src/keylkeys.man,
	doc/src/keylset.man, doc/src/ns_accesslog.man,
	doc/src/ns_addrbyhost.man, doc/src/ns_adp_abort.man,
	doc/src/ns_adp_append.man, doc/src/ns_adp_argc.man,
	doc/src/ns_adp_argv.man, doc/src/ns_adp_bind_args.man,
	doc/src/ns_adp_break.man, doc/src/ns_adp_dir.man,
	doc/src/ns_adp_dump.man, doc/src/ns_adp_eval.man,
	doc/src/ns_adp_exception.man, doc/src/ns_adp_include.man,
	doc/src/ns_adp_mime.man, doc/src/ns_adp_mimetype.man,
	doc/src/ns_adp_parse.man, doc/src/ns_adp_puts.man,
	doc/src/ns_adp_registerproc.man, doc/src/ns_adp_return.man,
	doc/src/ns_adp_safeeval.man, doc/src/ns_adp_stats.man,
	doc/src/ns_adp_stream.man, doc/src/ns_adp_tell.man,
	doc/src/ns_adp_trunc.man, doc/src/ns_after.man,
	doc/src/ns_atclose.man, doc/src/ns_atexit.man,
	doc/src/ns_atshutdown.man, doc/src/ns_atsignal.man,
	doc/src/ns_browsermatch.man, doc/src/ns_buildsqldate.man,
	doc/src/ns_cache_flush.man, doc/src/ns_cache_keys.man,
	doc/src/ns_cache_names.man, doc/src/ns_cancel.man,
	doc/src/ns_chan.man, doc/src/ns_charsets.man,
	doc/src/ns_checkurl.man, doc/src/ns_chmod.man,
	doc/src/ns_choosecharset.man, doc/src/ns_cleanup.man,
	doc/src/ns_cleanupchans.man, doc/src/ns_cond.man,
	doc/src/ns_config.man, doc/src/ns_configsection.man,
	doc/src/ns_configsections.man, doc/src/ns_conn.man,
	doc/src/ns_cookiecharset.man, doc/src/ns_cookietime.man,
	doc/src/ns_cp.man, doc/src/ns_critsec.man, doc/src/ns_crypt.man,
	doc/src/ns_db.man, doc/src/ns_dbquotename.man,
	doc/src/ns_dbquotevalue.man, doc/src/ns_encodingforcharset.man,
	doc/src/ns_encodingfortype.man, doc/src/ns_encrypt.man,
	doc/src/ns_env.man, doc/src/ns_eval.man, doc/src/ns_event.man,
	doc/src/ns_findset.man, doc/src/ns_fmttime.man,
	doc/src/ns_formfieldcharset.man, doc/src/ns_ftruncate.man,
	doc/src/ns_getchannels.man, doc/src/ns_getform.man,
	doc/src/ns_getformfile.man, doc/src/ns_gifsize.man,
	doc/src/ns_gmtime.man, doc/src/ns_guesstype.man,
	doc/src/ns_hostbyaddr.man, doc/src/ns_hrefs.man,
	doc/src/ns_htmlselect.man, doc/src/ns_http.man,
	doc/src/ns_httpget.man, doc/src/ns_httpopen.man,
	doc/src/ns_httppost.man, doc/src/ns_httptime.man,
	doc/src/ns_ictl.man, doc/src/ns_info.man, doc/src/ns_init.man,
	doc/src/ns_issmallint.man, doc/src/ns_job.man,
	doc/src/ns_jpegsize.man, doc/src/ns_kill.man,
	doc/src/ns_library.man, doc/src/ns_link.man,
	doc/src/ns_localsqltimestamp.man, doc/src/ns_localtime.man,
	doc/src/ns_log.man, doc/src/ns_logctl.man, doc/src/ns_logroll.man,
	doc/src/ns_markfordelete.man, doc/src/ns_mkdir.man,
	doc/src/ns_mktemp.man, doc/src/ns_modulepath.man,
	doc/src/ns_mutex.man, doc/src/ns_normalizepath.man,
	doc/src/ns_param.man, doc/src/ns_paren.man,
	doc/src/ns_parsehttptime.man, doc/src/ns_parsequery.man,
	doc/src/ns_parsetime.man, doc/src/ns_pause.man, doc/src/ns_puts.man,
	doc/src/ns_queryexists.man, doc/src/ns_queryget.man,
	doc/src/ns_querygetall.man, doc/src/ns_quotehtml.man,
	doc/src/ns_rand.man, doc/src/ns_register_adp.man,
	doc/src/ns_register_filter.man, doc/src/ns_register_proc.man,
	doc/src/ns_reinit.man, doc/src/ns_rename.man,
	doc/src/ns_requestauthorize.man, doc/src/ns_respond.man,
	doc/src/ns_resume.man, doc/src/ns_return.man,
	doc/src/ns_returnfile.man, doc/src/ns_returnforbidden.man,
	doc/src/ns_returnmoved.man, doc/src/ns_returnnotfound.man,
	doc/src/ns_returnok.man, doc/src/ns_returnredirect.man,
	doc/src/ns_returnunauthorized.man, doc/src/ns_rmdir.man,
	doc/src/ns_schedule_daily.man, doc/src/ns_schedule_proc.man,
	doc/src/ns_schedule_weekly.man, doc/src/ns_section.man,
	doc/src/ns_sema.man, doc/src/ns_server.man, doc/src/ns_set.man,
	doc/src/ns_setexpires.man, doc/src/ns_setformencoding.man,
	doc/src/ns_sha1.man, doc/src/ns_share.man, doc/src/ns_shutdown.man,
	doc/src/ns_sleep.man, doc/src/ns_stats.man,
	doc/src/ns_striphtml.man, doc/src/ns_symlink.man,
	doc/src/ns_tagelement.man, doc/src/ns_tagelementset.man,
	doc/src/ns_thread.man, doc/src/ns_time.man, doc/src/ns_tmpnam.man,
	doc/src/ns_unregister_proc.man, doc/src/ns_unschedule_proc.man,
	doc/src/ns_url2file.man, doc/src/ns_urlcharset.man,
	doc/src/ns_urldecode.man, doc/src/ns_urlencode.man,
	doc/src/ns_uudecode.man, doc/src/ns_uuencode.man,
	doc/src/ns_write.man, doc/src/nsv_append.man, doc/src/nsv_array.man,
	doc/src/nsv_exists.man, doc/src/nsv_get.man, doc/src/nsv_incr.man,
	doc/src/nsv_lappend.man, doc/src/nsv_names.man, doc/src/nsv_set.man,
	doc/src/nsv_unset.man: new file.
	* doc/ns_addr.n, doc/ns_shutdown.n: deleted file.
	* ChangeLog, Makefile, doc/ns_addr.n, doc/ns_shutdown.n,
	doc/src/keyldel.man, doc/src/keylget.man, doc/src/keylkeys.man,
	doc/src/keylset.man, doc/src/ns_accesslog.man,
	doc/src/ns_addrbyhost.man, doc/src/ns_adp_abort.man,
	doc/src/ns_adp_append.man, doc/src/ns_adp_argc.man,
	doc/src/ns_adp_argv.man, doc/src/ns_adp_bind_args.man,
	doc/src/ns_adp_break.man, doc/src/ns_adp_dir.man,
	doc/src/ns_adp_dump.man, doc/src/ns_adp_eval.man,
	doc/src/ns_adp_exception.man, doc/src/ns_adp_include.man,
	doc/src/ns_adp_mime.man, doc/src/ns_adp_mimetype.man,
	doc/src/ns_adp_parse.man, doc/src/ns_adp_puts.man,
	doc/src/ns_adp_registerproc.man, doc/src/ns_adp_return.man,
	doc/src/ns_adp_safeeval.man, doc/src/ns_adp_stats.man,
	doc/src/ns_adp_stream.man, doc/src/ns_adp_tell.man,
	doc/src/ns_adp_trunc.man, doc/src/ns_after.man,
	doc/src/ns_atclose.man, doc/src/ns_atexit.man,
	doc/src/ns_atshutdown.man, doc/src/ns_atsignal.man,
	doc/src/ns_browsermatch.man, doc/src/ns_buildsqldate.man,
	doc/src/ns_cache_flush.man, doc/src/ns_cache_keys.man,
	doc/src/ns_cache_names.man, doc/src/ns_cancel.man,
	doc/src/ns_chan.man, doc/src/ns_charsets.man,
	doc/src/ns_checkurl.man, doc/src/ns_chmod.man,
	doc/src/ns_choosecharset.man, doc/src/ns_cleanup.man,
	doc/src/ns_cleanupchans.man, doc/src/ns_cond.man,
	doc/src/ns_config.man, doc/src/ns_configsection.man,
	doc/src/ns_configsections.man, doc/src/ns_conn.man,
	doc/src/ns_cookiecharset.man, doc/src/ns_cookietime.man,
	doc/src/ns_cp.man, doc/src/ns_critsec.man, doc/src/ns_crypt.man,
	doc/src/ns_db.man, doc/src/ns_dbquotename.man,
	doc/src/ns_dbquotevalue.man, doc/src/ns_encodingforcharset.man,
	doc/src/ns_encodingfortype.man, doc/src/ns_encrypt.man,
	doc/src/ns_env.man, doc/src/ns_eval.man, doc/src/ns_event.man,
	doc/src/ns_findset.man, doc/src/ns_fmttime.man,
	doc/src/ns_formfieldcharset.man, doc/src/ns_ftruncate.man,
	doc/src/ns_getchannels.man, doc/src/ns_getform.man,
	doc/src/ns_getformfile.man, doc/src/ns_gifsize.man,
	doc/src/ns_gmtime.man, doc/src/ns_guesstype.man,
	doc/src/ns_hostbyaddr.man, doc/src/ns_hrefs.man,
	doc/src/ns_htmlselect.man, doc/src/ns_http.man,
	doc/src/ns_httpget.man, doc/src/ns_httpopen.man,
	doc/src/ns_httppost.man, doc/src/ns_httptime.man,
	doc/src/ns_ictl.man, doc/src/ns_info.man, doc/src/ns_init.man,
	doc/src/ns_issmallint.man, doc/src/ns_job.man,
	doc/src/ns_jpegsize.man, doc/src/ns_kill.man,
	doc/src/ns_library.man, doc/src/ns_link.man,
	doc/src/ns_localsqltimestamp.man, doc/src/ns_localtime.man,
	doc/src/ns_log.man, doc/src/ns_logctl.man, doc/src/ns_logroll.man,
	doc/src/ns_markfordelete.man, doc/src/ns_mkdir.man,
	doc/src/ns_mktemp.man, doc/src/ns_modulepath.man,
	doc/src/ns_mutex.man, doc/src/ns_normalizepath.man,
	doc/src/ns_param.man, doc/src/ns_paren.man,
	doc/src/ns_parsehttptime.man, doc/src/ns_parsequery.man,
	doc/src/ns_parsetime.man, doc/src/ns_pause.man, doc/src/ns_puts.man,
	doc/src/ns_queryexists.man, doc/src/ns_queryget.man,
	doc/src/ns_querygetall.man, doc/src/ns_quotehtml.man,
	doc/src/ns_rand.man, doc/src/ns_register_adp.man,
	doc/src/ns_register_filter.man, doc/src/ns_register_proc.man,
	doc/src/ns_reinit.man, doc/src/ns_rename.man,
	doc/src/ns_requestauthorize.man, doc/src/ns_respond.man,
	doc/src/ns_resume.man, doc/src/ns_return.man,
	doc/src/ns_returnfile.man, doc/src/ns_returnforbidden.man,
	doc/src/ns_returnmoved.man, doc/src/ns_returnnotfound.man,
	doc/src/ns_returnok.man, doc/src/ns_returnredirect.man,
	doc/src/ns_returnunauthorized.man, doc/src/ns_rmdir.man,
	doc/src/ns_schedule_daily.man, doc/src/ns_schedule_proc.man,
	doc/src/ns_schedule_weekly.man, doc/src/ns_section.man,
	doc/src/ns_sema.man, doc/src/ns_server.man, doc/src/ns_set.man,
	doc/src/ns_setexpires.man, doc/src/ns_setformencoding.man,
	doc/src/ns_sha1.man, doc/src/ns_share.man, doc/src/ns_shutdown.man,
	doc/src/ns_sleep.man, doc/src/ns_stats.man,
	doc/src/ns_striphtml.man, doc/src/ns_symlink.man,
	doc/src/ns_tagelement.man, doc/src/ns_tagelementset.man,
	doc/src/ns_thread.man, doc/src/ns_time.man, doc/src/ns_tmpnam.man,
	doc/src/ns_unregister_proc.man, doc/src/ns_unschedule_proc.man,
	doc/src/ns_url2file.man, doc/src/ns_urlcharset.man,
	doc/src/ns_urldecode.man, doc/src/ns_urlencode.man,
	doc/src/ns_uudecode.man, doc/src/ns_uuencode.man,
	doc/src/ns_write.man, doc/src/nsv_append.man, doc/src/nsv_array.man,
	doc/src/nsv_exists.man, doc/src/nsv_get.man, doc/src/nsv_incr.man,
	doc/src/nsv_lappend.man, doc/src/nsv_names.man, doc/src/nsv_set.man,
	doc/src/nsv_unset.man:
	Auto-import documentation from man pagea and wiki etc.

	Guys, we have a job to do with this Tcl API.

2006-09-07 21:02 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9b6aa45d9da9)

	* simple-config.tcl:
	Until decided, minimal config will have explicit definition of
	default server

2006-09-07 19:54 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (4dd713308030)

	* index.adp, simple-config.tcl: new file.
	* contrib/index.adp, contrib/nsconfig.tcl, contrib/nsd-min.tcl,
	contrib/nsstats.tcl: deleted file.
	* ChangeLog, Makefile, contrib/index.adp, contrib/nsconfig.tcl,
	contrib/nsd-min.tcl, contrib/nsstats.tcl, index.adp, simple-
	config.tcl:
	Make nsstats and nsconfig disabled by default

2006-09-07 19:50 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (65479481bd5d)

	* contrib/mimetypes.tcl: deleted file.
	* ChangeLog, contrib/mimetypes.tcl, contrib/nsconfig.tcl, contrib/nsd-
	min.tcl, contrib/nsd.tcl, contrib/nsstats.tcl, sample-config.tcl.in:
	Disable nscp; remove unnessary contrib/mime file

2006-09-07 18:40 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a4c5987319d6)

	* contrib/nsd-min.tcl:
	Added comments to minimal nsd.tcl config

2006-09-07 18:13 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5c69ba3bb6be)

	* Makefile:
	Makefile fixes during contrib install

2006-09-07 17:48 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (dcfdf4db41a1)

	* contrib/nsstats.tcl: new file.
	* tcl/stats.tcl: deleted file.
	* ChangeLog, Makefile, contrib/index.adp, contrib/nsconfig.tcl,
	contrib/nsstats.tcl, nscp/nscp.c, nsd/config.c, nsd/server.c,
	tcl/stats.tcl:
	Make it easy to track runtime confguration; simplify config and
	stats scripts

	* nsd/server.c:
	* nsd/config.c:
	* nsd/nsmain.c: This is experimental but i think it can stay in the
	core because i ran all tests and i do not see any problems but only
	benefits:

	Any call to Ns_ConfigXXX family will try to locate config parameter
	but if it does not exists it will auto-create section and parameter
	key. If default was given, it will assign default value. this way we
	have the whole config tree in the memory which can be view now more
	effectivelly with nsconfig.tcl script which will be installed now by
	default with make install. Ns_ConfigCreateSection will auto-create
	section during startup only, it does call Ns_InfoStarted() which is
	very quick and after server started, config behaves as ussual.

	contrib/nsconfig.tcl: contrib/nsstats.tcl: those script now act as
	page not tcl library file which makes it easy to administer without
	server restart

2006-09-07 17:35 +0100  Bernd Eidenschink  <eidenschink@web.de>  (e933fa2fd73b)

	* doc/src/commandlist.man: new file.
	* ChangeLog, doc/src/commandlist.man:
	First shot of a document listing all available server commands, to
	act as a TOC

	Alpha stage.

2006-09-07 15:04 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (3e576b0b9609)

	* doc/src/template.man:
	Added more options into template.man

2006-09-07 14:30 +0100  Zoran Vasiljevic  <zv@archiware.com>  (924e63825e0b)

	* doc/src/template.man:
	Removed some non-template strings (left from copy/paste)

2006-09-07 14:27 +0100  Zoran Vasiljevic  <zv@archiware.com>  (be2455b8998b)

	* doc/src/README.doc:
	Added more info where to find tcllib and how to write doc pages.

2006-09-07 14:27 +0100  Zoran Vasiljevic  <zv@archiware.com>  (33e1a4fd985f)

	* doc/src/template.man: new file.
	* doc/src/template.man:
	New file as template for the doc sources

2006-09-07 05:26 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (545ee56fbfb5)

	* contrib/nsd-min.tcl: new file.
	* ChangeLog, contrib/nsd-min.tcl, include/ns.h, nscp/nscp.c,
	nsd/config.c, nsd/nsmain.c, nsd/server.c:
	A lot of small changes enabling a minimal nsd.tcl config with
	working defaults

	* tcl/fastpath.tcl:
	* nsd/server.c: Make default diirectorylisting type as simple

	* nscp/nscp.c: If module enabled without any config, by default
	listen on 127.0.0.1:2080 and add empty user so locally it is
	possible to telnet without password

	* include/ns.h:
	* nsd/config.c: Added new public function Ns_ConfigCreateSection which
	works like Ns_ConfigGetSection but creates new section if it does
	not exist

	* nsd/nsmain.c: If no servers defined in the config, server with
	name "default" will be auto-created and started with default config
	values.

	* nsd/nsmain.c: If home parameter is not specified, installation
	path will be taken from executable binary, Unix support for now only

	* contrib/nsd-min.tcl: Added example of smallest and minimum config
	file that can be loaded and have working functional server

2006-09-06 20:08 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f61370030645)

	* ChangeLog, nsd/log.c, nsd/nsconf.c, nsd/pidfile.c, nsd/server.c,
	nslog/nslog.c, tests/test.nscfg:
	Various changes to path defaults to simplify default configuration

	* nsd/nsconf.c:
	* nsd/server.c: Make tcllibrary, library, serverdir to reflect defaults
	from the sample config according to simplified one-server
	configuration which is common and easy to understand for newcomers.

	This will also allow one to run server with minimal nsd.tcl which could
	be good to have with required settings only for easy maintainence.

	ns/parameters/tcllibrary points to [ns_info home]/tcl
	ns/server/${server}/tcl/library points to [ns_info home]/modules/tcl
	ns/server/${server}/fastpath/serverdir points to [ns_info home]
	ns/server/${server}/fastpath/directoryfile points to "index.adp
	index.tcl index.html index.htm" ns/server/${server}/adp/map points
	to "/*.adp"

	* nsd/pidfile.c: Make it thread safe and reflect default config
	value

	* nslog/nslog.c: Make it use default log file in logs/access.log if
	logs/ directory exists or create new directorty under
	servers/server/modules/nslog as fallback if no file config options
	is specified

2006-09-04 21:18 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d339700e6b5f)

	* ChangeLog, tests/testserver/modules/testhttp.tcl:
	Make nstest_http chunked-encoding aware

	i.e. it will concatenate all chunk sinto single body which will be
	returned.

	This solved a lot of http related errors in the tests but still
	multiple test are needed to be converted or encoding stuff needs to
	be corrected or improved.

2006-09-04 17:52 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (0cb6c48a7c0b)

	* ChangeLog, nsd/driver.c:
	Silence compiler and chnaged the way ready sockets are submitted to
	queue

	Removed limitation in the DriverThread/SpoolerThread during queueing
	read sockets. If one failed to queue it will not skip queuing other
	read sock but will try to submit all.

2006-08-31 22:13 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8619c027e77b)

	* ChangeLog, NEWS:
	NEWS: update with latest; add new section highlighting config
	changes

2006-08-31 22:08 +0100  Stephen Deasey  <sdeasey@gmail.com>  (05b139beb8ed)

	* ChangeLog, nsd/info.c, nsd/init.c, nsd/mimetypes.c, nsd/nsconf.c,
	nsd/nsd.h, tests/ns_info.test, tests/ns_mime.test:
	Merge in the mime-types from contrib; add new command ns_info
	mimetypes

	ns_info mimetypes returns the list of file extension to mime-type
	mappings at runtime.

2006-08-31 22:01 +0100  Stephen Deasey  <sdeasey@gmail.com>  (efe714d8e47b)

	* ChangeLog, nsd/tclresp.c:
	Don't update the interp result directly as under some circumstances
	it can be a shared object

2006-08-26 20:58 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (cc08d3e8b154)

	* ChangeLog, tcl/http.tcl:
	Fix http proxy bug; add simple IP access restrictions

2006-08-21 14:38 +0100  Zoran Vasiljevic  <zv@archiware.com>  (1dc4c30d0701)

	* ChangeLog, nsd/return.c:
	Use our own defined macros HTTP11_HDR_TE and HTTP11_HDR_TE_ENCODED
	instead of plain strings

2006-08-14 15:35 +0100  Zoran Vasiljevic  <zv@archiware.com>  (f0f58f6346ac)

	* ChangeLog, include/ns.h:
	Defined ETIMEDOUT to 1 for Windows

	The defined value for ETIMEDOUT has no other meaning then to be
	accepted by eventual strerror() so we had to "invent" something
	appropriate.

	Unfortunately the build-in set of errno values in Windows does not
	seem to have any "near" candidate to the Unix pendant so we just
	defined it to one (1). This way it will at least work, albeit not
	have too much sense in error messages.

2006-08-14 14:05 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0488d7e36dc0)

	* ChangeLog, include/ns.h:
	Win32: add definitions for poll() emulation, as we do not include
	poll.h there

2006-08-13 17:59 +0100  Zoran Vasiljevic  <zv@archiware.com>  (f6fa4521e076)

	* ChangeLog, nsd/log.c:
	(LogFlush): remove unused variable

2006-08-13 17:51 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a951c9df58da)

	* nsd/log.c:
	Rewritten caching of log entries to use separate caches for entry
	structures and log texts

	Attempt to stuff both in a dynamic string and cast when needed did
	not work on some architectures because of padding/alignment
	requirements.

2006-08-13 17:49 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8702a00f5eb1)

	* nsproxy/nsproxylib.c:
	(PushProxy): honour expiration for proxies without associated slave

2006-08-13 10:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c51fd8065db4)

	* ChangeLog, tests/ns_proxy.test:
	Add tests for [ns_proxy handles ?pool]

2006-08-12 10:33 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a4004b105c06)

	* nsproxy/nsproxylib.c:
	(ReaperThread): remove Ns_Log calls outside the global locks

	This may lead to deadlocks in Ns_ProxyInit() when somebody
	registered Tcl callbacks to the ns_log facility.

	If the current thread has never loaded a Tcl interpreter (and the
	reaper thread does not do that explicitly) one will be loaded at the
	latest at that point when first call to Ns_Log has been made and
	there is a Tcl callback registered.

	In this scenario, the Ns_ProxyInit will be called by the server Tcl
	tracing facility and this will lock the global proxy lock. If at
	that time somebody is already holding the global lock, we'll have a
	deadlock.

2006-08-08 17:07 +0100  Bernd Eidenschink  <eidenschink@web.de>  (69ba25827b30)

	* tests/testserver/pages/encoding.iso2iso_adp,
	tests/testserver/pages/encoding.iso2utf_adp,
	tests/testserver/pages/encoding.iso_adp,
	tests/testserver/pages/encoding.utf2iso_adp,
	tests/testserver/pages/encoding.utf2utf_adp,
	tests/testserver/pages/encoding.utf_adp: new file.
	* tests/encoding.test, tests/tclresp.test, tests/test.nscfg,
	tests/testserver/modules/testhttp.tcl,
	tests/testserver/pages/encoding.iso2iso_adp,
	tests/testserver/pages/encoding.iso2utf_adp,
	tests/testserver/pages/encoding.iso_adp,
	tests/testserver/pages/encoding.utf2iso_adp,
	tests/testserver/pages/encoding.utf2utf_adp,
	tests/testserver/pages/encoding.utf_adp:
	Many encoding fixes and enhancements to the test suite

	* tests/testserver/pages/encoding.*: Various helper files.
	* tests/testserver/modules/testhttp.tcl: nstest_http is now encoding
	aware.

	* tests/test.nscfg: Sections for mimetypes and encodings added,
	along with parameters URLCharset, OutputCharset and HackContentType.

	* tests/encoding.test: tests for ns_return and ns_write, changing
	charsets and verifying URL and ADP encoding.

	* tests/tclresp.test: minor modification in tests 3.1 and 4.2 after
	change in test.nscfg.

	Thanks to Michael Lex for writing the tests.

2006-08-04 13:40 +0100  Zoran Vasiljevic  <zv@archiware.com>  (908491fd126f)

	* nsproxy/nsproxylib.c:
	Update proxy expiry time every time we put it back to the list of
	free proxies

2006-08-04 13:07 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3bf9c5de67ea)

	* nsproxy/nsproxylib.c:
	Silenced some compiler warnings

2006-08-04 09:43 +0100  Zoran Vasiljevic  <zv@archiware.com>  (be32b7356bd9)

	* ChangeLog, nsproxy/nsproxylib.c:
	Improved teardown of nsproxy at process exit.

	Fixed teardown of idle proxies. Increased default max. count of
	proxies per pool to 8. Add ns_log's to monitor nsproxy teardown
	steps.

2006-08-03 16:23 +0100  Zoran Vasiljevic  <zv@archiware.com>  (bfaa46930332)

	* ChangeLog, nsproxy/nsproxylib.c:
	Force-fill in the last argument of the proxy command line with some
	string after the evaluation

	Otherwise the previously executed command is shown. This is observed
	only on Linux.

2006-08-03 15:08 +0100  Zoran Vasiljevic  <zv@archiware.com>  (21614ad8da0a)

	* ChangeLog, nsproxy/nsproxylib.c:
	Always use wrappers when operating on Tcl/Ns Dstrings; fix
	startup/encoding bug

	The Ns_ProxyMain explicitly calls Tcl_FindExectuable() so the
	default encoding is properly set. Otherwise troubles arise when
	sending scripts containing paths which in turn contain special
	multinational characters.

2006-08-03 07:21 +0100  Zoran Vasiljevic  <zv@archiware.com>  (9f19d466b1e2)

	* ChangeLog, nsproxy/nsproxymod.c:
	Calls Ns_ProxyExit with 30 seconds graceful timeout

2006-08-03 07:02 +0100  Zoran Vasiljevic  <zv@archiware.com>  (9a9cb9f7e4dd)

	* ChangeLog, nsproxy/nsproxylib.c:
	Define 30 seconds grace period to wait for proxies cleanup on
	application exit

2006-08-02 17:42 +0100  Zoran Vasiljevic  <zv@archiware.com>  (cd46d695eff8)

	* ChangeLog, nsproxy/nsproxylib.c:
	Set pipes in the child proxy to close-on-exec

	Otherwise we may block forever if we attempt to kill the proxy
	running "exec" Tcl command.

	Redesigned reaper thread not to block the caller by waiting on slave
	proxy processes to exit.

	The [ns_proxy handle] command accepts one optional argument which is
	interpreted as pool name and only those handles belonging to the
	given pool are reported.

2006-08-02 17:41 +0100  Zoran Vasiljevic  <zv@archiware.com>  (5f257adc88ad)

	* nsd/exec.c:
	(Ns_WaitForProcess): log also the signal name in addition to signal
	number

2006-07-30 01:35 +0100  Zoran Vasiljevic  <zv@archiware.com>  (9ee1ac33e619)

	* nsproxy/nsproxylib.c:
	Damn uint typedefs are just not possible to get w/o braking the leg
	so we opt to provide our own definition

2006-07-30 01:00 +0100  Zoran Vasiljevic  <zv@archiware.com>  (40565a6ecf29)

	* ChangeLog, include/nsthread.h:
	Always include poll.h as we assume it is present on all supported
	platforms so far

2006-07-30 00:50 +0100  Zoran Vasiljevic  <zv@archiware.com>  (80aecabf5dc8)

	* nsproxy/nsproxylib.c:
	Do not use u_int8/16/32_t typedefs as some platforms (Solaris) do
	not declare them

	Use uint8/16/32_t instead as they are defined everywhere in
	sys/types.h.

2006-07-30 00:49 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a9e31cc5d483)

	* include/ns.h, include/nsthread.h, nsd/nsd.h:
	config.h is now (again) only included in nsd.h

	It otherwise causes trouble when linking another TEA compatible
	packages with the server as it re-declares PACKAGE_* definitions

2006-07-29 13:00 +0100  Zoran Vasiljevic  <zv@archiware.com>  (653438654e1d)

	* nsproxy/nsproxylib.c:
	Remove debugging code checked-in by mistake

2006-07-29 12:54 +0100  Zoran Vasiljevic  <zv@archiware.com>  (d8d261ec2af1)

	* ChangeLog, tests/ns_proxy.test:
	Fix enumeration of tests

2006-07-29 12:54 +0100  Zoran Vasiljevic  <zv@archiware.com>  (033a042b5c4d)

	* nsproxy/nsproxylib.c:
	List of free proxies could get corrupted under some circumstances --
	fixed

2006-07-25 15:32 +0100  Zoran Vasiljevic  <zv@archiware.com>  (17219f714d8e)

	* configure.in, nsproxy/nsproxylib.c:
	Add tests for u_int16_t and correspondig use corresponding defines
	in the nsproxylib.c

2006-07-25 14:54 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4f8d1df23ba6)

	* include/ns.h, nsd/nsd.h:
	ns.h includes config.h directly

2006-07-25 14:31 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ef295ee781db)

	* ChangeLog, configure.in, include/ns.h, include/nsthread.h,
	nsd/driver.c, nsd/nsd.h, nsd/nswin32.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/unix.c, nsproxy/nsproxylib.c:
	Replace poll() with ns_poll which defaults to poll() on all
	platforms except Darwin

2006-07-25 10:11 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a142e6c09ff8)

	* nsproxy/ns_proxy.man, nsproxy/nsproxylib.c, tests/ns_proxy.test:
	Add ns_proxt send, wait, recv; synch error codes with AS

	Improved error codes (made them match the nsproxy module from AS).
	Added [ns_proxy send] [ns_proxy wait] and [ns_proxy recv] and made
	the [ns_proxy eval] wrap those three. Adjusted test suite.

2006-07-22 09:56 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c36ab5188dcf)

	* ChangeLog, nsthread/pthread.c:
	Add PTHREAD_STACK_MIN definition for Solaris

2006-07-22 03:24 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d28dafdf6871)

	* ChangeLog, tcl/file.tcl:
	Fix request-.tcl file cache so that it actually caches Tcl byte-
	code, per-interp

2006-07-19 15:55 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (04b6041d4c82)

	* sample-config.tcl.in:
	nscp listens on localhost only, so having know password is not a
	problem

2006-07-19 02:19 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a840b2a8a288)

	* contrib/nsd.tcl, sample-config.tcl.in:
	Minor config files changes

2006-07-18 01:16 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d49e647b9ecc)

	* ChangeLog, nsd/dns.c:
	Make sure given ttl and timeout are saved and used by dns cache

2006-07-17 10:01 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4bfd8b201597)

	* ChangeLog, tests/ns_log.test:
	Adjust tests for expanded syntax of ns_logctl command

2006-07-13 23:17 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d54d75ba8ce6)

	* ChangeLog, nsd/driver.c:
	Make sure upload stats lock is always unlocked

2006-07-13 22:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (b95e8c599224)

	* ChangeLog, nsd/nsconf.c, nsthread/pthread.c, nsthread/thread.c:
	Don't enforce an upper bound on thread stack size, use the OS
	provided default

	It only makes sense to *reduce* the size of the stack if you have
	many threads and you know for sure you have low stack usage. As this
	is (currently) a process-wide setting, you never can be sure...

2006-07-13 22:09 +0100  Stephen Deasey  <sdeasey@gmail.com>  (662803317c9c)

	* tests/cookies.test: new file.
	* ChangeLog, nsd/cookies.c, tests/cookies.test:
	Fix bug with missing path when setting cookies

	Add tests so this doesn't happen again...

2006-07-13 08:10 +0100  Bernd Eidenschink  <eidenschink@web.de>  (29cfc3d264d1)

	* ChangeLog, nsd/return.c:
	(ReturnCharData): return chunked when output encoding is not default
	UTF-8 (hack)

2006-07-12 13:09 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b77ad4c3985a)

	* ChangeLog, nsd/log.c:
	(LogToTcl): fix command building when registered script contains
	blanks

2006-07-12 09:04 +0100  Zoran Vasiljevic  <zv@archiware.com>  (98aa3b10b9d8)

	* ChangeLog, nsd/log.c:
	(LogToTcl): pass timestamp in [clock seconds], not Ns_Time format

	We still do not have proper ns_time commands/wrappers.

2006-07-10 21:57 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a10a9df77410)

	* ChangeLog, nsd/driver.c:
	Fix driver crash; put back functionality to make nsopenssl work again

	In one of the previous changes that got broken.

2006-07-10 21:50 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (db31959badf1)

	* nsd/driver.c:
	Another fix for potential crash when spooler sock is submitted

2006-07-10 21:47 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (342f52d0ab9c)

	* ChangeLog, nsd/driver.c:
	Fix crash when accessing writer sock after it has been submitted to
	the queue

2006-07-10 19:48 +0100  Stephen Deasey  <sdeasey@gmail.com>  (1acfa58371ca)

	* ChangeLog, nsd/connio.c, nsd/driver.c, nsd/nsd.h:
	Create wrappers for the driver callback functions and document

	Wrap some of the messy error reporting code.

2006-07-10 13:24 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3bd2710cc641)

	* nsd/conn.c:
	Removed some unused variables

2006-07-08 23:47 +0100  Stephen Deasey  <sdeasey@gmail.com>  (2bfaf345eb45)

	* nsd/limits.c, tcl/limits.tcl, tests/ns_limits.test: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/conn.c, nsd/init.c,
	nsd/limits.c, nsd/nsd.h, nsd/tclcmds.c, tcl/limits.tcl,
	tests/ns_conn.test, tests/ns_limits.test, tests/test.nscfg:
	Add new ns_limits_ commands to manipulate per-request limits

	Not hooked up to request processing yet, requires some work to move
	conn allocation back into the driver code.

2006-07-08 22:43 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d27ab8acb8a0)

	* ChangeLog, include/nsthread.h, nsd/tclcache.c, nsthread/time.c,
	tests/ns_cache.test:
	Add per-tcl-cache default timeouts; -timeout can be absolute or
	relative

	Timeout values passed using the -timeout switch can now be absolute
	or relative to the current time. Large values are assumed to be
	absolute, small values relative.

2006-07-07 15:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (39ba2be1b039)

	* ChangeLog, nsd/log.c:
	(LogAdd): fix wrong struct arithmetic writing over already freed
	memory

2006-07-07 02:09 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f90b7281c017)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/connio.c, nsd/nsd.h,
	nsd/queue.c, nsd/return.c:
	Make ns_conn keepliave 0|1 to enable or disable keep-alive on
	current connection

	Removed flag NS_CONN_KEEPALIVE and instead connPtr->keep is used to
	control keepailve behavior.

2006-07-06 19:57 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (26ba42094464)

	* ChangeLog, tests/nsdb.test:
	Updated with new error message

2006-07-05 14:24 +0100  Zoran Vasiljevic  <zv@archiware.com>  (e10bd029838c)

	* ChangeLog, nsd/log.c:
	Uses internal Ns_Fatal wrapper for Ns_SetLogFlushProc and
	Ns_SetNsLogProc

2006-07-05 13:25 +0100  Bernd Eidenschink  <eidenschink@web.de>  (4f9dcc20d3ff)

	* contrib/start-scripts/naviserver.SuSE: new file.
	* ChangeLog, contrib/start-scripts/naviserver.SuSE:
	Add init.d script for SuSE

	contrib/start-scripts/naviserver.SuSE: Added start script suitable
	for /etc/init.d which implements start, stop, restart, try-restart,
	realstop, version, probe, status.

	Configurable for use with or without watchdog and chroot
	environment.

2006-07-05 08:33 +0100  Zoran Vasiljevic  <zv@archiware.com>  (92c93beabd94)

	* ChangeLog, include/ns.h:
	Fixed so the compilation works again after cache.c and related
	changes

2006-07-04 18:33 +0100  Zoran Vasiljevic  <zv@archiware.com>  (7078c465f531)

	* ChangeLog, include/ns.h, nsd/log.c, nsd/tclcallbacks.c:
	Rewritten to support any number of user-assigned callbacks

	* nsd/tclcallbacks.c: Use our own wrapper Ns_TclCallbackProc() in
	ShutdownProc().

	* include/ns.h: Some cosmetic formatting to honour the 80-chars
	margin-width. Declared Ns_SetLogFlushProc() and Ns_SetNsLogProc()
	deprecated in favour of Ns_AddLogFilter() and Ns_RemoveLogFilter().

	* nsd/log.c: Make Ns_SetLogFlushProc() and Ns_SetNsLogProc() issue
	fatal message when used. Added Ns_AddLogFilter() and
	Ns_RemoveLogFilter() C-API calls as hook into new log processing.

	The log processing/cache is now always handled by the server. Users
	can register log callbacks and those will be invoked in the LIFO
	fashion for each log entry added by the Ns_Log() function or
	[ns_log] Tcl command. Each callback can prevent execution of all
	registered callbacks below by triggering Tcl error.

	One predefined callback is always registered: the callback to write
	to the standard error file-descriptor (routed to the server log
	file). Any log entries are always emitted there.

	The [ns_logctl] is extended to include [ns_log logctl register] and
	[ns_log logctl unregister] commands which in turn call the C-API
	calls from above. Those two serve for doing registration and
	unregistration of Tcl-based log callbacks. Each Tcl based log
	callbacck is called by the C-code as follows:

	 <callback> severity timestamp logmsg ?args?

	Example: # Declare Tcl callback proc logclbk {severity stamp logmsg
	myarg} { # do something } # Register it with NsLog ns_log logctl
	register logclbk my_own_arg

	 # Emit some log line ns_log notice "The test"

	 # The callback will be executed as follows logclbk
	1152034107:2399005 Notice "The test" my_own_arg

	 The timestamp is in the string representation of the Ns_Time
	structure (<seconds>:<microseconds>).

	The [ns_log logctl truncate] semantic is changed: before it was used
	to truncate the log cache to a given number of bytes; now it
	truncates the log cache to the given number of cache entries.

2006-06-30 21:14 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (1de03d96e072)

	* ChangeLog, nsdb/dbtcl.c:
	Add -delimiter parameter to ns_getcsv that will allow parsing CSV
	files with different delimiters

2006-06-30 00:26 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (b0626d5ae95b)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/queue.c:
	Update the driver module callback interface with new functions,
	remove old ones

	* include/ns.h:
	* nsd/driver.c: Redefine driver hooks, remove not very well defined
	API functions.

	Add 2 new flags, NS_DRIVER_QUEUE_ONACCEPT and
	NS_DRIVER_QUEUE_ONREAD. They will tell driver when to queue socket,
	just after accept or after first netwrok read. Primary purpose to
	cut driver processing early for TCP driver that need its own
	protocol (e.g. SMTP, POP3) or for others and UDP protocols, driver
	will read the request and will try to queue the socket after first
	read.

	Add new driver command DriverQueue, which will be called just before
	socket queue. Only special drivers that need to setup request
	url/protocol will use it, that's why new public API
	Ns_DriverSetRequest.

	Module installed request proc for method/url/protocol, like:

	 Ns_RegisterRequest(server, "SYSLOG", "/", RequestProc, NULL,
	srvPtr, 0);

	In order this proc will be called, socket need to set request line
	with "SYSLOG /", so it will be set in DriverQueue call just before
	driver will put the socket into connection queue. This change does
	not affect existing HTTP request processing.

	* nsd/queue.c: Removed old and unused API function.

2006-06-29 03:45 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (889d4a146d85)

	* nsd/tclinit.c:
	Clear hash entry on interp delete

2006-06-29 02:06 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (4467c778a722)

	* ChangeLog, nsd/driver.c, nsd/tclinit.c:
	Port ns_ictl cancel and threads commands from AOLserver 4.5

	* nsd/driver.c: Removed meaningless Ns_Log call

2006-06-28 01:59 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ce1213c384eb)

	* ChangeLog, nsdb/dbtcl.c, tcl/stats.tcl:
	Converted all Tcl string commands into object commands

2006-06-25 17:39 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (dab76e5fefab)

	* ChangeLog, nsd/driver.c:
	(ns_writer): use TclVFS open call

2006-06-25 17:05 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (fe2aaee2cb24)

	* ChangeLog, nsd/driver.c, nsd/sock.c:
	(Ns_SockTimedWait): NULL timeout now means infinite; (WriterThread):
	poll sockets with 0 timeout

2006-06-21 20:50 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (bdd62e8092d3)

	* contrib/nsconfig.tcl:
	Add online help for each parameter

2006-06-21 00:01 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (6226622a28c1)

	* contrib/nsconfig.tcl: new file.
	* contrib/nsconfig.tcl:
	Add simple nsd.tcl configurator similar to stats.tcl which
	implements _nsconfig and allows one to browse and replace nsd.tcl
	entries

2006-06-19 22:16 +0100  Stephen Deasey  <sdeasey@gmail.com>  (2f2d96f0287e)

	* ChangeLog, include/ns.h, nsd/adpeval.c, nsd/cache.c, nsd/dns.c,
	nsd/fastpath.c, nsd/nsconf.c, nsd/nsd.h, nsd/server.c,
	nsd/tclcache.c, nsd/tclcmds.c, nsd/tclobjv.c, nsd/tcltime.c,
	tcl/cache.tcl, tests/ns_cache.test:
	Various cache additions and removals, particularly timeouts and
	flushing

	* nsd/fastpath.c:
	* nsd/adpeval.c: Use Ns_CacheDeleteEntry instead of Ns_CacheFlushEntry
	to prevent genuine flush stats being inflated.

	* tcl/cache.tcl:
	* nsd/nsconf.c:
	* nsd/dns.c: Update to new API.

	* nsd/nsd.h:
	* nsd/server.c: Remove tcl cache timeout param in anticipation of new
	limits API.

	* nsd/tclcmds.c: Remove ns_cache _get _set _exists _info commands.
	The first three are racey and can be emulated with _eval and the new
	-force switch. The new -contents switch to the _stats command
	replaces _info, discouraging racey check-and-set usage.

	* nsd/tcltime.c:
	* nsd/tclobjv.c: New Ns_ObjvTime parse callback for the Ns_Time type.
	Handy for passing absolute time deadlines to routines which timeout.

	* include/ns.h:
	* nsd/cache.c: New Ns_CacheResetStats routine.

	Ns_CacheGetConfig removed -- caches are immutable; the current
	settings can be looked up in the config file.

	Directly expire entries from within all routines which return one,
	but but only if the value is not null, indicating no concurrent
	update is in progress.

	Use Ns_CacheDeleteEntry to remove an entry from the cache without
	updating the stats. Flush stats should reflect explicit flushes
	only.

	Log stats when a cache is destroyed.

	* nsd/tclcache.c: ns_cache_create now takes a -maxentry option which
	is the maximum size of an entry allowed in the cache. This prevents
	one large entry completely emptying anotherwise usefuly full
	cache.

	The ns_cache_create -timeout switch has been removed in anticipation
	of a general purpose limits scheme.

	The -timeout option is now expected to be an absolute time in the
	future, not an offset from the current time. This is awkward to use
	manually, but should not be needed with the above mentioned limits
	scheme. The -ttl option has been renamed -expires and is also an
	absolute time.

	ns_cache_eval now takes a -force switch which will unconditioanly
	replace any exiting entry, whether it has expired or not. Replaces
	_set.

	ns_cache_stats -content dumps the size and expirey for each entry in
	the cache. Adding the -reset switch to either mode resets the stats
	to zero.

	* tests/ns_cache.test: Try to exercise the underlying Ns_CacheFind
	harder with some more flush tests.

2006-06-19 20:05 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (e158a11f81b2)

	* ChangeLog, nsd/tclobjv.c, tests/ns_parseargs.test:
	Changed ns_parseargs format to {-param {=$script}}

	Keeping it this cryptic will ensure backward compatibility and guard
	against accidental Tcl evals.

2006-06-19 19:03 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (fad648b4e06b)

	* ChangeLog, include/ns.h, nsd/tclimg.c, nsd/tclobjv.c,
	tests/ns_parseargs.test:
	Add Ns_ObjvEval for runtime argument evaluation; extend ns_parseargs

	Extend ns_parseargs so that params in form:

	 {-$name {script}}

	will be assigned with default value of the script result.

2006-06-19 00:03 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d009958fb17c)

	* ChangeLog, nsd/sched.c:
	Make scheduler queue Events in increments of 50, not 1000 in order
	to save memory

2006-06-15 20:57 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (4f4f3d90af1d)

	* tests/testserver/pages/400return.adp,
	tests/testserver/pages/timeout.tcl: new file.
	* ChangeLog, include/ns.h, nsd/driver.c, nsd/nsd.h, nsd/return.c,
	nsd/sock.c, tests/errordoc.test,
	tests/testserver/pages/400return.adp,
	tests/testserver/pages/timeout.tcl:
	Improved WriterThread to not to block on sending data and honor
	timeout if socket still not ready

	* nsd/sock.c: Make Ns_SockTimedWait have NULL as timeoutPtr so it
	will check for immediate condition of the socket without waiting.

	* nsd/nsd.h:
	* nsd/driver.c: Improved WriterThread to not to block on sending data
	and honor timeout if socket still not ready.

	* nsd/return.c: Added Accept-Ranges header as default to inform
	clients that we support range requests. Tested with mplayer HTTP
	streaming.

	* tests/testserver/pages/timeout.tcl:
	* tests/testserver/pages/400return.adp: Added missing files

2006-06-14 21:16 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (c0211f38532c)

	* ChangeLog, include/ns.h, nsd/cache.c, nsd/tclcache.c, nsd/tclcmds.c:
	Add Ns_CacheGetExpiration; add ns_cache_info that returns entry size
	and expiration if set

2006-06-14 18:03 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (96e4bb3cf9de)

	* ChangeLog, tests/ns_cache.test:
	Updated test ns_cache.test to the new API check

2006-06-14 17:45 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (695921d53063)

	* nsd/tclcache.c:
	Get rid of extra timeout2 by converting pointer into (void*) to get
	rid of type-punned error messages

2006-06-14 17:35 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (cb11f4a05c75)

	* ChangeLog, include/ns.h, nsd/cache.c, nsd/tclcache.c:
	Introduce new API function Ns_CacheGetConfig that returns configured
	cache parameters

2006-06-14 17:12 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (12eb6e77b8d4)

	* ChangeLog, include/ns.h, nsd/cache.c, nsd/dns.c, nsd/nsconf.c,
	nsd/nsd.h, nsd/tclcache.c:
	Add timeout parameter to Ns_CacheCreateEx to assign cache-specific
	timeout

	This will be used instead of global config.tcl.cachetimeout and will
	eliminate specifying -timeout on every ns_cache_eval call.

	If specified as 0 on cache create, cache will behave as before,
	taking -timeout or using global value from the config.

	* nsd/nsconf.c:
	* nsd/dns.c: Updated to reflect API change and added new config
	parameter dnswaittimeout which is set to 0 by default

2006-06-14 14:55 +0100  Zoran Vasiljevic  <zv@archiware.com>  (83ae82cca993)

	* nsproxy/nsproxylib.c:
	Add typedefs for u_int32_t, u_int16_t if the platform does not
	include stdint.h or declare those elsewhere

2006-06-14 14:16 +0100  Zoran Vasiljevic  <zv@archiware.com>  (192a5086d286)

	* ChangeLog, nsd/cache.c:
	(Ns_CacheSetValueExpires): correctly set expiry time

	Changed Ns_CacheFindEntry NOT to auto-expire expired entries as this
	collides with Ns_CacheWaitCreateEntry API call.

2006-06-14 08:53 +0100  Zoran Vasiljevic  <zv@archiware.com>  (e30d488715b8)

	* nsd/tclinit.c:
	Fix return value of non-void call

2006-05-26 20:25 +0100  Stephen Deasey  <sdeasey@gmail.com>  (4d52c4b6a10d)

	* tests/timeout.test: new file.
	* ChangeLog, include/ns.h, nsd/conn.c, nsd/return.c, nsd/tclcache.c,
	nsd/tclcallbacks.c, nsd/tclcmds.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclrequest.c, nsd/tclresp.c, tests/timeout.test:
	Tcl error code NS_TIMEOUT now sends HTTP status code 503 Unavailable

	Catch Tcl errors with error code NS_TIMEOUT and return an HTTP 503
	Unavailable response. Update some Tcl commande to set the NS_TIMEOUT
	error code.

2006-05-26 20:09 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a02a21bf283d)

	* tests/errordoc.test: new file.
	* ChangeLog, nsd/queue.c, nsd/return.c, tests/errordoc.test,
	tests/test.nscfg:
	Make sure custom error documents return the correct HTTP error code

2006-05-13 17:12 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8b7039d9349d)

	* nsproxy/nsproxylib.c:
	Fix short typo re stdint

2006-05-13 17:00 +0100  Zoran Vasiljevic  <zv@archiware.com>  (072c75f3db41)

	* configure.in, nsproxy/nsproxylib.c:
	Added checking for stdint.h header (this defines uint32_t on some
	OS'es)

2006-05-13 16:41 +0100  Zoran Vasiljevic  <zv@archiware.com>  (19caed95d2f2)

	* ChangeLog, configure.in, nsd/tclenv.c:
	Use unsetenv() if present to unset the env variable instead of doing
	some dirty tricks

2006-05-13 15:39 +0100  Zoran Vasiljevic  <zv@archiware.com>  (169569b215fa)

	* ChangeLog, nsd/tclenv.c:
	Fixed PutEnv to work correctly on all platforms we support

	The problem was that it was not simple to unset an env variable w/o
	empolying some dirty tricks.

2006-05-13 13:09 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8d4ce0b9eece)

	* nsproxy/nsproxylib.c:
	Include stdint.h for uint32_t definition on macOS < 10.4

2006-05-13 12:57 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ef172aea0c6e)

	* nsproxy/nsproxylib.c:
	(Ns_ProxyExit): broadcast the cond variable to prevent hang on exit

2006-05-13 12:30 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ad41d9fae3b8)

	* nsproxy/nsproxylib.c:
	Fixed pickieness of the compiler and of the Sun thread library

2006-05-13 11:59 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8cdd7ab2fabc)

	* NEWS:
	NEWS: nsproxy module

2006-05-13 11:56 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a2157ab1057c)

	* tests/ns_proxy.test: new file.
	* tests/ns_proxy.test:
	New file for testing ns_proxy module

2006-05-13 10:45 +0100  Zoran Vasiljevic  <zv@archiware.com>  (f31abd62e587)

	* ChangeLog, nsproxy/ns_proxy.man, nsproxy/nsproxy.c,
	nsproxy/nsproxy.h, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c,
	sample-config.tcl.in:
	Many fixes to nsproxy; include in sample config file; add docs

	* sampe-config.tcl.in: Loads nsproxy module and initializes with all
	the default values. The default values are the same as ones compiled
	in the code. Those are just listed for the illustration purposes.

	* nsproxy/Makefile
	* nsproxy/ns_proxy.man:
	* nsproxy/ns_proxy.test:
	* nsproxy/nsproxy.c:
	* nsproxy/nsproxy.h:
	* nsproxy/nsproxylib.c:
	* nsproxy/nsproxymod.c: Summary of changes below:

	o. Fixed deadly embrace between the reaper and user threads. o
	.Improved reaper functionality and made -minslaves/-maxslaves behave
	properly. o. Made all pool config options now settable over the
	configuration file. The config command now properly returns result
	dependent on the command arguments in style of other similar Tcl
	commands, like [fconfigure] for example. o. Added rudimentary but
	sufficient C-API for evaluating Tcl code over the proxy from within
	of the C-code. One must include nsproxy.h and link with -lnsproxy
	library. See nsproxy.h for the list of supported calls.

	Code is now fairly tested and can be evaluated in lab environment;
	consider feature full but still beta-quality for now.

	* tests/ns_proxy.test: First couple of tests. Still more to come...

	* tests/test.nscfg: Added loading of nsproxy in the test server.

2006-05-13 10:44 +0100  Zoran Vasiljevic  <zv@archiware.com>  (38c3738dce2e)

	* tests/test.nscfg:
	Add nsproxy to list of loaded modules for the test server

2006-05-13 10:05 +0100  Zoran Vasiljevic  <zv@archiware.com>  (75fb921bef0d)

	* tests/ns_tls.test: deleted file.
	* tests/ns_tls.test:
	Remove unneeded ns_tls tests

2006-05-12 14:59 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (49853277389b)

	* ChangeLog, nsd/return.c:
	(ReturnCharData): use Ns_WriteConn when sendRaw is specified,
	enabling binary data

2006-05-08 03:45 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a617f46044da)

	* ChangeLog, tests/ns_adp_compress.test:
	Update compress test; checked against Firefox

2006-05-08 01:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (86d6fc44a17d)

	* ChangeLog, nsd/conn.c, nsd/return.c, nsd/tclinit.c,
	tests/ns_conn.test:
	Add keepalive command to ns_conn for easy keepliave manipulation

2006-05-07 09:03 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0683a76941ae)

	* ChangeLog, Makefile:
	Include nsproxy into make process

2006-05-06 17:48 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b2e27fee8f9a)

	* nsproxy/nsproxylib.c:
	Include grp.h so it compiles cleanly on Linux

2006-05-06 17:30 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b4c5ceb2c2a5)

	* ChangeLog, include/ns.h, nsd/pathname.c:
	Add Ns_BinPath() (was it deleted by somebody before?, was it me?)

2006-05-06 17:29 +0100  Zoran Vasiljevic  <zv@archiware.com>  (12f88bf1cea4)

	* nsproxy/Makefile, nsproxy/ns_proxy.man, nsproxy/nsproxy.c,
	nsproxy/nsproxy.h, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c: new
	file.
	* nsproxy/Makefile, nsproxy/ns_proxy.man, nsproxy/nsproxy.c,
	nsproxy/nsproxy.h, nsproxy/nsproxylib.c, nsproxy/nsproxymod.c:
	New files with improved version of ns_proxy; appeared first in
	AOLserver 4.5

	Improvements vs. the original code:

	 o. proxy handles can be used as Tcl commands for simpler OO- like
	programming o. proxy slaves can be told to expire automatically
	after some predefined idle time o proxy slaves can setuid() to some
	other user ID if the parent process runs as superuser. o. proxy
	subsystem is garbage-collected properly on exit

	NOTE: ns_proxy module is work in progress and is this not included
	in the standard make machinery. There are still things to do:
	complete the doc, write testsuite.

2006-05-02 15:14 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (9b75edef5c7d)

	* ChangeLog, Makefile:
	Add contrib directory to the distfiles

2006-05-02 04:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (84d3166a684b)

	* ChangeLog, contrib/nsd.tcl, nsdb/util.tcl:
	Add dbcloseonexit optional parameter for closing db connections on
	exit

2006-04-30 20:46 +0100  Zoran Vasiljevic  <zv@archiware.com>  (10e03b5d5dc1)

	* ChangeLog, nsd/binder.c:
	Make ifdef _WIN32 more clear and unified

	At some point we should create separate file in order not to
	obfuscate code with numerous ifdef's.

2006-04-30 20:45 +0100  Zoran Vasiljevic  <zv@archiware.com>  (497ac025da47)

	* nsd/nsmain.c:
	Call Tcl_FindExecutable before fork(); assure Tcl version is logged

	Reorganize so first call to a Tcl_FindExecutable() is done after all
	ns_fork's - see large comment in-place.

	Assure Tcl version is logged to the log-file.

	Add descriptive run state enumerator so run states can now be easier
	tracked by looking at the code.

2006-04-30 17:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (8651fbc877c3)

	* Makefile:
	Add helpful description to make install command

2006-04-22 22:45 +0100  Stephen Deasey  <sdeasey@gmail.com>  (004e2bfe9d0d)

	* nsd/event.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/event.c:
	Add new event driven I/O API

	Unlike the existing task and sockcallback mechanisms, this deals
	only with IO, not threads, and allocates no memory at runtime,
	making it suitable for the main driver thread, spooler etc.

	Things should be merged at some point.

2006-04-19 21:13 +0100  Stephen Deasey  <sdeasey@gmail.com>  (647f46ff8d3e)

	* ChangeLog, nsd/fastpath.c, nsd/nsconf.c, nsd/nsd.h, nsd/server.c,
	tests/test.nscfg:
	Make page cache process global rather than per virtual server

2006-04-19 17:29 +0100  Zoran Vasiljevic  <zv@archiware.com>  (5fa7b532a1a4)

	* ChangeLog, nsd/driver.c:
	Only reverse look-up hostname at startup if not given in config

	Perform reverse lookup on hostname given the IP address only if
	hostname param not specified in nssock section for the socket
	driver.

	In some situations, reverse lookup will not be successful which
	inhibits us to start properly, when we could.

2006-04-18 22:49 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (805e83acbfbc)

	* ChangeLog, nsd/tclcmds.c, nsd/tclinit.c:
	Remove ns_tls implementation from the core

2006-04-18 20:47 +0100  Stephen Deasey  <sdeasey@gmail.com>  (76f71db725e9)

	* tests/ns_schedule.test: new file.
	* ChangeLog, tests/ns_schedule.test:
	Add a couple of tests for scheduled procs

2006-04-18 20:42 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ae2b847398f8)

	* ChangeLog, nsd/cache.c, nsd/dns.c, nsd/nsconf.c:
	Use new API for DNS cache code

2006-04-18 20:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0d992c157e9a)

	* ChangeLog, nsd/nsmain.c, nsd/tclinit.c:
	Run command interpreter in separate thread

	This leavs the main thread free to shut down the server cleanly when
	the exit command is run.

2006-04-15 23:16 +0100  Stephen Deasey  <sdeasey@gmail.com>  (e4fdca6f79c7)

	* ChangeLog, nsd/nsmain.c:
	(Ns_Main): Copy executable name as memory is freed and reused later
	during Tcl initialization

2006-04-15 22:48 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f22296cb1a28)

	* ChangeLog, nsd/tclcache.c, nsd/tclcmds.c:
	ns_cache_* commands require a server; don't inflate flush stats

	* nsd/tclcmds.c: Cache commands require a virtual server context.

	* nsd/tclcache.c: Don't artificially inflate flush stats when a Tcl
	script under evaluation errors.

2006-04-15 22:14 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7c02d9c9a006)

	* ChangeLog, nsd/cache.c, tests/ns_cache.test:
	Clarify responsibilities of Ns_CacheCreateEntry and
	Ns_CacheWaitCreateEntry

	The first guarantees an Ns_Entry as a result and handles expirey,
	the second can return NULL only on timeout waiting for another
	thread to update the same entry. Previously a simultaneous flush
	would also cause a NULL return -- now however the entry is
	recreated.

	Fix bug with ExpireEntry: unset the value but do not delete the
	entry.

2006-04-15 18:04 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (93d4704c2918)

	* ChangeLog, include/nsthread.h, nsd/driver.c:
	Add NS_FATAL error code; make driver thread handle error and DoS
	attacks more reliably

	Update all UDP-based drivers.

2006-04-14 16:56 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (666fa340df34)

	* tests/ns_tls.test: new file.
	* ChangeLog, nsd/tclcmds.c, nsd/tclinit.c, tests/ns_tls.test:
	Add new Tcl command ns_tls for thread specific local caches

	Tcl tls is ns_set structure, so thread specific storage is key value
	pairs.

2006-04-14 12:56 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4928667ee9b2)

	* ChangeLog, nsd/cache.c:
	(Ns_CacheWaitCreateEntry): don't delete expired entry

	This is one possible fix for this call, as it was trashing memory by
	reusing already deleted (expired) entries before. Another possible
	fix is to delete and re-create expired entry, but this costs more
	time, although it may be a more correct thing to do.

2006-04-14 10:18 +0100  Zoran Vasiljevic  <zv@archiware.com>  (155480b53a19)

	* ChangeLog, tests/ns_gifsize.test, tests/ns_jpegsize.test:
	Update tests to match new image command error codes

2006-04-13 23:55 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (7cdc2f08d4c0)

	* ChangeLog, nsd/tclcache.c:
	Make sure cache value is zero ended

2006-04-13 12:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b4c1f7c99dc8)

	* ChangeLog, nsd/tclcmds.c, nsd/tclimg.c:
	Add support for PNG images; add commands to compute image type,
	mimetype and size regardless of type

2006-04-07 00:20 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (f6d0c4e7c9ad)

	* tests/ns_cache.test:
	Add cache test -- works for old ns_cache module, core dumps
	ns_cache_eval

2006-04-07 00:17 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (75f0c3c9eea3)

	* nsd/sock.c:
	(Ns_SockWait): small typo oops fixed

2006-04-07 00:05 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (918d21d30096)

	* ChangeLog, include/ns.h, nsd/sock.c, nsd/tclcache.c:
	Add Ns_SockWait (nsopenssl compatibility); remove extra byte from
	allocating in Tcl cache API

2006-04-05 19:24 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (78903194f873)

	* ChangeLog, tests/http.test, tests/ns_cache.test:
	Disable spooler tests for now; add 2 new tests for ns_cache_get/set

2006-04-05 18:52 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (fdc60c965d8c)

	* ChangeLog, nsd/tclcache.c, nsd/tclcmds.c:
	Add ns_cache_get, ns_cache_set for easier cache manipulation

2006-03-30 08:44 +0100  Ibrahim Tannir  <itannir@archiware.com>  (a0b8f171705d)

	* ChangeLog, nsd/adpeval.c:
	(ParseFile): read adp files with binary translation

	Otherwise reading Windows files may break (size != n).

2006-03-28 17:12 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4dda8d8225e5)

	* ChangeLog, nsd/tclresp.c:
	Ensure result of ns_write* etc. commands is 0 success, 1 failure

	Reformatted and indented

2006-03-27 09:42 +0100  Bernd Eidenschink  <eidenschink@web.de>  (2cd1357bc3f0)

	* ChangeLog, contrib/nsd.tcl:
	Add smtp configuration parameters to example config file

2006-03-23 18:35 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (258a19b21e90)

	* ChangeLog, include/ns.h, nsd/conn.c:
	Add new public API Ns_ConnSetPeer

2006-03-21 23:09 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d07dadba63b5)

	* ChangeLog, include/ns.h, nsd/binder.c:
	Add DGRAM socket types for Unix domain sockets

2006-03-21 21:42 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (6957b91249e8)

	* ChangeLog, include/ns.h, nsd/binder.c, nsd/driver.c:
	(Ns_SockListenUnix): accept 'mode' arg for unix domain socket file

2006-03-21 16:36 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (c4a13adb5eb3)

	* ChangeLog, nsd/binder.c:
	(Ns_SockBindUnix): don't delete socket file

2006-03-20 02:00 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (74edacff3aa4)

	* nsd/conn.c:
	(Ns_ConnSockConnect): cleanup unneeded dstring

2006-03-20 01:34 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d273baf45719)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/driver.c:
	Add Ns_DriverSockContent, Ns_ConnSockContent and
	Ns_ConnSetContentSent; improved UDP driver support

2006-03-19 01:21 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (0d295e9c2f37)

	* ChangeLog, nsd/driver.c:
	Set spoolerthreads to 0 by default

2006-03-18 22:43 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (ec13c54e7ef6)

	* ChangeLog, include/ns.h, nsd/sockcallback.c, nsd/tclsock.c:
	(Ns_SockCallbackEx): change timeout handling; poll every 5 secs

2006-03-18 11:14 +0000  Zoran Vasiljevic  <zv@archiware.com>  (591255705781)

	* ChangeLog:
	Ammend ChangeLog

2006-03-18 06:34 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (1040aafd70e1)

	* ChangeLog, nsd/sockcallback.c, nsd/task.c:
	Update to support timeouts in socket callbacks, minor reformats

2006-03-18 04:13 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (41a78482ff94)

	* ChangeLog, configure.in, include/ns.h, nscp/nscp.c, nsd/crypt.c,
	nsperm/nsperm.c:
	(ns_crypt): use native crypt() on Linux (md5 support);
	NS_ENCRYPT_BUFSIZE increased

2006-03-13 14:47 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (69979fcc8443)

	* ChangeLog, Makefile:
	Made install modular to be able to install only parts

2006-03-13 14:47 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (56991080a58f)

	* Makefile:
	Make install more modular

2006-03-13 00:53 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b63fba735933)

	* ChangeLog, tcl/util.tcl:
	(ns_setexpires): fix typo

2006-03-12 18:32 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7c316f652e43)

	* ChangeLog, tests/http.test:
	Remove warnings when running http tests 4.4, 4.5, 4.6

2006-03-12 18:29 +0000  Zoran Vasiljevic  <zv@archiware.com>  (8fcf548d92f3)

	* tests/testserver/modules/testhttp.tcl:
	Correctly report HTTP status as often as possible

2006-03-12 16:07 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7e9ae50638be)

	* ChangeLog:
	Add missing ChangeLog entries

2006-03-12 15:45 +0000  Zoran Vasiljevic  <zv@archiware.com>  (9c7bcb192fad)

	* nsd/nsd.h, nsd/nsmain.c, nsd/nswin32.c, nsd/unix.c:
	Block SIGPIPE for interactive shell

	Otherwise, our process gets killed during tests.

2006-03-12 14:11 +0000  Zoran Vasiljevic  <zv@archiware.com>  (06e6f29438a4)

	* tests/ns_thread.test:
	ns_thread id's can be very small (single digit numbers) on solaris

2006-03-12 14:05 +0000  Zoran Vasiljevic  <zv@archiware.com>  (1bd42c2a8590)

	* tests/ns_thread.test:
	Make regexp for checking thread/mutex handles platform-independent

2006-03-11 17:23 +0000  Zoran Vasiljevic  <zv@archiware.com>  (00febf587b79)

	* nsd/driver.c:
	Reformatted, newly indented and made more readable

2006-03-11 17:21 +0000  Zoran Vasiljevic  <zv@archiware.com>  (88addbf06669)

	* nsd/nsd.h:
	Add typedefs for some internally used structures; cosmetic cleanup

2006-03-11 17:17 +0000  Zoran Vasiljevic  <zv@archiware.com>  (3682671a23fd)

	* tcl/http.tcl, tests/testserver/modules/testhttp.tcl:
	Add nstest_http_write function to upload content

2006-03-11 15:28 +0000  Zoran Vasiljevic  <zv@archiware.com>  (696d164dce5f)

	* nsd/driver.c:
	Fix endless loop in SpoolerThread when adding more connections from
	the spooler queue

2006-03-11 06:34 +0000  Stephen Deasey  <sdeasey@gmail.com>  (467e27e52678)

	* ChangeLog, include/ns.h, nsd/callbacks.c, nsd/tclcallbacks.c,
	nslog/nslog.c:
	(Ns_RegisterAtShutdown): pass timeout to callbacks; remove obsolete
	AtShutdown* API

	Remove old variants of shutdown registration:

	 Ns_RegisterServerShutdown() Ns_RegisterAtServerShutdown()
	Ns_RegisterShutdown()

	Ns_RegisterAtShutdown() now takes a Ns_ShutdownProc callback, whos
	signature includes an absolute timeout arg. This callback will be
	run twice: First with a NULL timeout to indicate shutdown processing
	should be initiated. If shutdown work can be completed quickly, it
	should be done here. Second, with a timeout parameter which can be
	passed to e.g. Ns_CondTimedWait() etc.

	The idea is to make the pattern NsStartFooShutdown(),
	NsWaitFooShutdown(toPtr) cleaner to implement.

2006-03-10 16:26 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (7521bdaf1d21)

	* ChangeLog, tests/http.test, tests/testserver/modules/testhttp.tcl:
	(nstest_http): handle network errors, report them; re-enable HTTP
	tests

2006-03-10 10:26 +0000  Zoran Vasiljevic  <zv@archiware.com>  (4f79cc771ec6)

	* ChangeLog, tests/http_byteranges.test, tests/http_chunked.test:
	Fix tests to accommodate nstest_http eol changes

	Data returned from nstest_http calls is now in standard internal
	newline format and not in the network format, so we had to fix some
	regexps which check returned results accordingly.

2006-03-10 10:23 +0000  Zoran Vasiljevic  <zv@archiware.com>  (f264cefb5346)

	* tcl/http.tcl:
	(_ns_http_readable): refresh nbutes pending after wait

	The _ns_http_readable was broken as it did not correctly refresh the
	number of bytes in the socket after waiting for the data to arrive.

2006-03-10 10:21 +0000  Zoran Vasiljevic  <zv@archiware.com>  (86c0f5e934eb)

	* tests/testserver/modules/testhttp.tcl:
	Make self-consistent; do not attempt to use unpublished Tcl APIs

	Also, preform implicit network-line-end translations by Tcl sock
	handling instead of passing this task to user. Means: data sent and
	received are always in normalized internal new-line format instead
	of the network new-line/carriage-return format.

2006-03-09 21:46 +0000  Zoran Vasiljevic  <zv@archiware.com>  (33c54e7a1f34)

	* nsd/queue.c:
	Untabified, re-indented, fixed some comments

2006-03-09 21:15 +0000  Zoran Vasiljevic  <zv@archiware.com>  (63767c0dac51)

	* ChangeLog, nsd/queue.c:
	Fix argument type to Ns_ConnClearQuery()

2006-03-09 21:13 +0000  Zoran Vasiljevic  <zv@archiware.com>  (b2caf07ce31d)

	* tcl/nstrace.tcl:
	Remove _serializeproc, _serializevar; remove includeproc wrapper

2006-03-09 21:11 +0000  Zoran Vasiljevic  <zv@archiware.com>  (1cd92b0198f4)

	* nsd/init.tcl:
	Replace ns_init, ns_cleanup with ns_ictl trace allocate, deallocate

2006-03-09 21:10 +0000  Zoran Vasiljevic  <zv@archiware.com>  (96e7c1a0042e)

	* tcl/form.tcl:
	Add clarifying comments about useless connection form caching

2006-03-09 21:09 +0000  Zoran Vasiljevic  <zv@archiware.com>  (15a61d78d568)

	* nsd/queue.c:
	Use Ns_ConnClearQuery() in ConnRun() to avoid code duplication

2006-03-09 12:31 +0000  Zoran Vasiljevic  <zv@archiware.com>  (e608172e2c6c)

	* tcl/nstrace.tcl:
	Fix some typos in comments

2006-03-09 11:25 +0000  Zoran Vasiljevic  <zv@archiware.com>  (0db6c96faf97)

	* ChangeLog, tcl/cache.tcl, tcl/charsets.tcl, tcl/compat.tcl,
	tcl/fastpath.tcl, tcl/file.tcl, tcl/form.tcl, tcl/http.tcl,
	tcl/nstrace.tcl, tcl/sendmail.tcl, tcl/stats.tcl, tcl/util.tcl:
	Various bug fixes and cleanups to Tcl files

	Reformat, add proper function headers, newly indented.

	The http.tcl and sendmail.tcl are rewritten to take advantage of
	automatic end-of-line handling of Tcl channels. Also, fix some bugs
	in EOF handling in both files.

	Fix bug in line-break algorythm for quoted-printable MIME content
	with non-ascii data in sendmail.tcl.

	The nstrace.tcl is now self-contained and requires nor loads no
	external modules.

2006-03-09 11:25 +0000  Zoran Vasiljevic  <zv@archiware.com>  (8a3fc309293a)

	* nsd/init.tcl:
	Move introspective script to tcl/nstrace.tcl

	The nstrace is now the sole interface for handling script generation
	for interp initializations.

2006-03-08 15:09 +0000  Zoran Vasiljevic  <zv@archiware.com>  (8799f6d33eb0)

	* nsd/sock.c:
	(Ns_SockTimedConnect2): set errno to ETIMEDOUT if unable to connect
	and optional timer expired

2006-03-08 15:08 +0000  Zoran Vasiljevic  <zv@archiware.com>  (4b477ab791e7)

	* tcl/debug.tcl, tcl/prodebug.tcl: deleted file.
	* tcl/debug.tcl, tcl/prodebug.tcl:
	Remove ancient TclPro support files

	I doubt that anybody is still using this.

2006-03-07 19:36 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (75f715e5a695)

	* ChangeLog, nsd/driver.c, tests/http.test,
	tests/testserver/modules/testhttp.tcl:
	More experiments in attempt to narrow down spooler bug

2006-03-04 16:13 +0000  Zoran Vasiljevic  <zv@archiware.com>  (da6cee8b808e)

	* ChangeLog:
	Add missing ChangeLog entries

2006-03-04 16:04 +0000  Zoran Vasiljevic  <zv@archiware.com>  (c29059c510f3)

	* nsd/init.tcl:
	Reorganize for better readability

	All temporary procs are now prepended "_" instead of "_ns_" prefix.

	Added clarification comment about possible choices for interp
	initialization strategy.

	Always load nstrace.tcl library even if not configured for use. This
	allows extensions to use nstrace::isenabled procedure to find out if
	the trace is active or not.

2006-03-04 16:00 +0000  Zoran Vasiljevic  <zv@archiware.com>  (1c1ced08f018)

	* sample-config.tcl.in:
	Fix comment about default username/password for stats interface

2006-03-04 15:59 +0000  Zoran Vasiljevic  <zv@archiware.com>  (0e22ac8ebc46)

	* tcl/stats.tcl:
	Fix some broken expressions, perhaps due to a bug in Tcl expression
	evaluator

2006-03-04 15:57 +0000  Zoran Vasiljevic  <zv@archiware.com>  (0da04074fe0b)

	* tcl/nstrace.tcl: new file.
	* tcl/ttrace.tcl: deleted file.
	* tcl/nstrace.tcl, tcl/ttrace.tcl:
	New version of trace feature in nstrace.tcl from ttrace.tcl

2006-03-03 23:59 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (9c44aa6cfa53)

	* ChangeLog, nsd/driver.c:
	UDP driver improved, streaming of packets added

2006-03-03 20:15 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (605deb374ed9)

	* ChangeLog, nsd/driver.c:
	Use driver proc in WriterThread to ensure proper driver's protocol
	processing

2006-03-03 02:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (50cb13a5c511)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/driver.c, nsd/request.c,
	tests/http.test, tests/ns_conn.test, tests/test.nscfg:
	Add versionstring field to Ns_Request struct for more general
	protocol parsing

	* include/ns.h:
	* nsd/request.c:
	* nsd.conn.c: Add versionstring into Ns_Request struct and made
	request parser more generic regarding protocol version to allow
	other http-like protocols to be parsed by same code

	* nsd/driver.c: Some minor cleanups and temp hack in SpoolerThread
	until the real bug will be discovered

2006-03-02 02:03 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (25da79139b02)

	* tests/testserver/modules/testhttp.tcl:
	Make test harness more robust agaist network errors

2006-03-01 23:21 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (78ce8c8bb8a2)

	* nsd/driver.c:
	Update SockParse to check Content-Length header for maxinput limit

2006-03-01 17:08 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e75589df4fab)

	* ChangeLog, nsd/driver.c, tests/http.test, tests/test.nscfg,
	tests/testserver/modules/testhttp.tcl:
	Fix error reporting during request parsing

	Now server returns 414/400 return codes and honors
	maxinput/maxheaders parameters.

	Test http-4.5 does not hang actually but with sndbuf/rcvbug set to
	so small values it takes very logn time to read the request, by
	putting Ns_Log in SockRead i was seeing reading by 64/192 bytes but
	the server was operational.

2006-03-01 05:24 +0000  Stephen Deasey  <sdeasey@gmail.com>  (ee1a03fbef1b)

	* tests/encoding.test: new file.
	* ChangeLog, tests/encoding.test:
	Add test which exposes off by 1 bug in encoding buffer management

	Bug reported by Vlad on the 24th.

2006-03-01 04:30 +0000  Stephen Deasey  <sdeasey@gmail.com>  (d856c45c4b2b)

	* tests/testserver/pages/2048bytes: new file.
	* ChangeLog, nsd/driver.c, tests/http.test, tests/tclresp.test,
	tests/test.nscfg, tests/testserver/modules/testhttp.tcl,
	tests/testserver/pages/2048bytes:
	Add some test which verify basic HTTP read/write operations and
	limits

	Highlights some bugs...

2006-02-28 21:00 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e7a83e28d3f9)

	* ChangeLog, tcl/http.tcl:
	Add a simple http proxy, disabled by default

2006-02-28 20:02 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e0d066a3f563)

	* ChangeLog, include/ns.h, nsd/tclcmds.c, nsd/tclrequest.c:
	(ns_register_proxy): new command; make Ns_RegisterProxyRequest
	public

2006-02-27 16:25 +0000  Zoran Vasiljevic  <zv@archiware.com>  (2e56d69574f1)

	* ChangeLog, nsd/init.tcl:
	Reverted recent change about when global modules are being loaded

2006-02-27 08:31 +0000  Stephen Deasey  <sdeasey@gmail.com>  (f6193413fd1a)

	* ChangeLog, nsd/connio.c, tests/tclresp.test:
	(Ns_ConnSend): fix multi-buffer send bug; reduce data copying

	Fix bug with buffer management triggered by data too large to be
	sent in a single call to the OS. Don't copy unsent iovec's around if
	there are no additional ones to be added to the set.

2006-02-25 21:40 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d1272708e54f)

	* ChangeLog, nsd/init.tcl:
	Global modules loaded before per-server modules

2006-02-25 20:06 +0000  Stephen Deasey  <sdeasey@gmail.com>  (19b813497d20)

	* ChangeLog, nsd/dns.c:
	Untabify and reformat

2006-02-25 16:25 +0000  Zoran Vasiljevic  <zv@archiware.com>  (61da43adff25)

	* ChangeLog, tcl/ttrace.tcl:
	ttrace: handle XOTcl automatically

	Auto [package req XOTcl 1.3] and [package req xotcl::serializer] to
	enable/disable tracing of XOTcl classes during runtime.

	Add implicit [package req XOTcl] in tcl/ttrace.tcl so we can turn on
	automatic class tracing. Also, the load-tracer is now loading
	packages which were not traced.

2006-02-25 14:03 +0000  Zoran Vasiljevic  <zv@archiware.com>  (6d7d576bca28)

	* tcl/ttrace.tcl:
	ttrace: better handle non-ttraced modules

	Modified load-script-generator to emit load commands for modules
	loaded w/o trace control in addition to those known to ttrace.

2006-02-24 20:30 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (c2ad8e632681)

	* ChangeLog, nsd/connio.c:
	Fix hang in connio.c due to incorrect return size

2006-02-24 07:05 +0000  Stephen Deasey  <sdeasey@gmail.com>  (e82368bbcae0)

	* ChangeLog, nsd/init.tcl:
	Use 'eq', 'ne' tests; add debug logging to module loading; untabify,
	reindent

2006-02-24 06:36 +0000  Stephen Deasey  <sdeasey@gmail.com>  (10a015947c83)

	* ChangeLog, nsd/tclresp.c, tests/http_chunked.test,
	tests/tclresp.test:
	(ns_headers): queue, don't flush; (ns_write): scatter/gather args;
	(ns_return): cleanup char i/o

	* nsd/tclresp.c:
	* tests/tclresp.test:
	* tests/http_chunked.test: ns_headers now queues, but does not flush,
	the headers. Headers are sent when the first data packet.

	ns_write will send multiple args efficiently using scatter/gather
	IO.

	ns_return no longer handles character encoding redundantly. Now
	handled by the underlying Ns_WriteCharConn().

2006-02-24 06:04 +0000  Stephen Deasey  <sdeasey@gmail.com>  (2d1335dc66fc)

	* ChangeLog, nsd/return.c:
	Let connio.c handle character encoding

2006-02-24 05:52 +0000  Stephen Deasey  <sdeasey@gmail.com>  (3488b5a742dd)

	* ChangeLog, nsd/conn.c:
	(ns_conn): use Tcl boolean objects instead of ints

2006-02-24 05:48 +0000  Stephen Deasey  <sdeasey@gmail.com>  (7ad8919c9bbc)

	* include/config.h.in: deleted file.
	* include/.cvsignore, include/config.h.in:
	Remove config.h.in which should be autogenerated; add to .cvsignore

2006-02-24 05:35 +0000  Stephen Deasey  <sdeasey@gmail.com>  (ca0a840ec11c)

	* ChangeLog, configure.in, include/ns.h, nsd/connio.c:
	(Ns_ConnSend): remove send limit of 16 iovec buffers; optimizations

	* configure.in:
	* include/ns.h:
	* nsd/connio.c: Make Ns_ConnSend() write all the buffers it is given
	to the connection, writing in batches up to the OS limit for max
	number of iovec buffs. Previous behavior was to give up after
	buffer 16.

	UIO_MAXIOV is now detected as on some OS' it is significantly larger
	than the old default of 16 (e.g. on Linux it is 1024).

	Increased the IO buffer size used for encoding character data before
	sending and for transferring data from disk to network. Up from 2k to
	8k. This is allocated on the stack so can't be too big. It is
	important for this buffer to be large as it controls the number of
	network packets used to send common items such as ADP pages when the
	encoding != utf-8.

	New routines Ns_ConnWriteV() and Ns_ConnWriteVChars() expose a
	scatter/gather interface for sending data. WriteVChars encodes
	character data as required and calls down to WriteV. WriteV performs
	HTTP chunked encoding if required and calls down to Ns_ConnSend().

	Ns_ConnClose now flushes unsent queued headers/data before closing,
	allowing headers and first data to be sent as a single packet in
	some cases.

2006-02-24 05:15 +0000  Stephen Deasey  <sdeasey@gmail.com>  (301f171a28b3)

	* ChangeLog, nsd/sock.c:
	Add debug logging for socket send timeouts; code cleanup

	Untabify, reformat and move code around. Add new comments and
	clarify existing ones. Add some debug logging for socket send
	timeouts.

2006-02-21 19:25 +0000  Stephen Deasey  <sdeasey@gmail.com>  (f40ed372a81f)

	* ChangeLog, nsd/tclthread.c, tests/ns_thread.test:
	(ns_mutex): add 'eval' subcommand which ensures lock release after
	script return

	Add "eval" subcommand to ns_mutex etc. which takes a lock, evals the
	given script, then ensures the lock is unlocked before returning.
	Useful when the script has an error.

2006-02-21 18:31 +0000  Stephen Deasey  <sdeasey@gmail.com>  (758745d5a775)

	* ChangeLog, nsd/nsd.h, nsd/server.c, nsd/tclcmds.c, nsd/tclthread.c,
	tests/ns_thread.test:
	Tcl thread synch commands now accept names; objects auto-
	created/initialized

2006-02-21 03:33 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (2d2807f123ae)

	* ChangeLog, nsd/connio.c, nsd/driver.c, nsd/nsd.h:
	Update writer to be threadsafe; rename NsQueueWriter NsWriterQueue

	Changed writer to duplicate given memory buffer because using
	Tcl_Obj between threads is not thread-safe.

	Renamed NSQueueWriter into NsWriterQueue to be in the same
	convention with Tcl API.

2006-02-19 23:26 +0000  Stephen Deasey  <sdeasey@gmail.com>  (c0ed4e529e37)

	* nsd/getopt.h: deleted file.
	* ChangeLog, nsd/getopt.h:
	Remove unused getopt.h header

2006-02-19 17:03 +0000  Zoran Vasiljevic  <zv@archiware.com>  (5caaaec593b2)

	* nsd/nswin32.c:
	Win32: (NsConnectService): simplify stdio setup

	Just freopen() stdio streams instead of close'ing them in advance
	(useless step).

	Also, all stdio streams are bound to NUL device as they will be
	later re-bound to log-file in LogReOpen.

2006-02-19 14:23 +0000  Zoran Vasiljevic  <zv@archiware.com>  (fa980f2794a8)

	* ChangeLog, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c,
	nsd/adprequest.c, nsd/connio.c, nsd/driver.c, nsd/dstring.c,
	nsd/fastpath.c, nsd/form.c, nsd/log.c, nsd/pathname.c,
	nsd/request.c, nsd/return.c, nsd/server.c, nsd/tclcallbacks.c,
	nsd/tclhttp.c, nsd/tclobjv.c, nsd/url2file.c, nsd/urlopen.c:
	Replace Ns_DStringTrunc with Ns_DStringSetLength; fix double-free in
	LogFlush/LogFreeCache sequence

2006-02-18 20:00 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (82a4a27a2376)

	* ChangeLog, nsd/driver.c, nsd/nsd.h, nsd/tclcmds.c:
	(ns_writer): renamed from ns_queue_writer; add options submit,
	submitfile, list

2006-02-16 06:37 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (061308d9abbc)

	* ChangeLog, nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/tclcmds.c:
	(ns_queue_writer): new command that submits data to the writer
	thread

	Writer thread will send this Tcl object to the client.

2006-02-16 05:40 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (80afe777bc04)

	* ChangeLog, include/ns.h, nsd/nsd.h:
	Make struct sockaddr_in publicly available to driver modules in
	Ns_Sock

2006-02-15 21:37 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (1a78a8ee352a)

	* ChangeLog, include/config.h.in, nsd/driver.c, nsd/nsd.h:
	Add maxqueuesize parameter to limit incoming socket queue size

	Prevents a possible DoS attack. Default size set to 256.

2006-02-13 13:18 +0000  Ibrahim Tannir  <itannir@archiware.com>  (d48c4bb7a339)

	* ChangeLog, nsd/nswin32.c:
	Win32: fix stdin, stdout, stderr channels for interp/thread creation

2006-02-08 18:32 +0000  Zoran Vasiljevic  <zv@archiware.com>  (af20649e67db)

	* doc/src/man.macros: new file.
	* ChangeLog, doc/src/README.doc, doc/src/man.macros:
	Clarified that "man -l" will only work on Linux

2006-02-08 15:32 +0000  Zoran Vasiljevic  <zv@archiware.com>  (4bb1ea3779b2)

	* ChangeLog, nsd/cache.c, tests/ns_cache.test:
	Reduce number of threads testing cache stability from 100 to 16

	It was blowing up smaller machines.

2006-02-08 15:31 +0000  Zoran Vasiljevic  <zv@archiware.com>  (1da9218a1bbf)

	* tests/test.nscfg:
	Set cachetimeout to 360 secs

2006-02-08 15:30 +0000  Zoran Vasiljevic  <zv@archiware.com>  (501493ee78c2)

	* nsd/cache.c:
	Gather npruned, nexpired cache stats (rfe #1427620)

2006-02-08 13:27 +0000  Zoran Vasiljevic  <zv@archiware.com>  (93d650547866)

	* ChangeLog, configure.in, m4/tcl.m4:
	Add TEA3.5

2006-02-07 19:05 +0000  Bernd Eidenschink  <eidenschink@web.de>  (a1dd015126f3)

	* ChangeLog, nsdb/util.tcl, nsperm/init.tcl, tcl/cache.tcl,
	tcl/charsets.tcl, tcl/fastpath.tcl, tcl/file.tcl, tcl/form.tcl,
	tcl/http.tcl, tcl/sendmail.tcl, tcl/stats.tcl, tcl/ttrace.tcl,
	tcl/util.tcl:
	Fix non-braced expressions and standardized comparisons with TCL
	string operators

	Thanks to Gustaf Neumann for providing the fixes! There are still
	some legacy files left.

2006-02-07 09:48 +0000  Zoran Vasiljevic  <zv@archiware.com>  (ed06d3f5e0ad)

	* ChangeLog, tcl/ttrace.tcl:
	Set to load only once, at startup

2006-02-07 08:51 +0000  Zoran Vasiljevic  <zv@archiware.com>  (16774622d061)

	* nsd/init.tcl, sample-config.tcl.in:
	Trace inits now controlled under ns/section/$server/tcl and
	lazyloader ns_param

2006-02-07 08:46 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7aa45ea019e3)

	* tcl/ttrace.tcl:
	Remove compatibility code for Tcl threading extension; changed
	license to Mozilla

2006-02-07 08:30 +0000  Zoran Vasiljevic  <zv@archiware.com>  (37f5d843a7fb)

	* nsthread/nsthreadtest.c:
	Change to Mozilla License

2006-02-07 08:22 +0000  Zoran Vasiljevic  <zv@archiware.com>  (e2794095ad9a)

	* nsthread/nsthreadtest.c:
	Include "config.h" to get STATIC_BUILD defined

2006-02-06 18:40 +0000  Zoran Vasiljevic  <zv@archiware.com>  (64f8b709063f)

	* include/Makefile.global.in:
	Add DL_LIBS and MATH_LIBS as those are expected by TCL_LIBS

	Also, accumulate all required libraries to link with in NSLIBS
	variable, as LIBS is used by TCL_LIBS as well.

2006-02-06 18:35 +0000  Zoran Vasiljevic  <zv@archiware.com>  (86998993803a)

	* Makefile:
	The "distclean" target removes auto-generated sample-config.tcl

2006-02-06 11:38 +0000  Zoran Vasiljevic  <zv@archiware.com>  (9c8ba3d16044)

	* tcl/init.tcl:
	Replaced AOLserver->Naviserver

2006-02-06 10:16 +0000  Zoran Vasiljevic  <zv@archiware.com>  (8d4ecfa7bbb7)

	* ChangeLog, NEWS:
	NEWS: mention trace based interp inits

2006-02-06 10:13 +0000  Zoran Vasiljevic  <zv@archiware.com>  (03eec3b1426a)

	* sample-config.tcl.in:
	Add remark about ttrace

2006-02-06 10:09 +0000  Zoran Vasiljevic  <zv@archiware.com>  (12f18b55bcf3)

	* nsd/init.tcl:
	Change to Mozilla license

2006-02-06 10:07 +0000  Zoran Vasiljevic  <zv@archiware.com>  (3c0c25dbbe3d)

	* Makefile:
	Tell "make dist" to Include sample-configin the distribution
	file

2006-02-06 10:05 +0000  Zoran Vasiljevic  <zv@archiware.com>  (3584367a8f82)

	* nsd/init.tcl:
	Add optional trace-based interp init

2006-02-06 10:03 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7d8a7264bec4)

	* tcl/ttrace.tcl: new file.
	* tcl/ttrace.tcl:
	New file implemeting Tcl-trace based interp initialization

2006-02-05 23:32 +0000  Stephen Deasey  <sdeasey@gmail.com>  (8d18df4c4ee8)

	* tests/testserver/.cvsignore: new file.
	* .cvsignore, tests/testserver/.cvsignore:
	Make cvs not complain about some more auto-generated files

2006-02-05 23:29 +0000  Stephen Deasey  <sdeasey@gmail.com>  (e11c384b1c79)

	* include/nsversion.h.in: new file.
	* ChangeLog, include/.cvsignore, include/nsversion.h.in:
	Add missing file include/nsversion.h.in

2006-02-05 20:11 +0000  Stephen Deasey  <sdeasey@gmail.com>  (c9f185455af6)

	* ChangeLog, nsd/urlspace.c:
	Remove 'doit' variables with local scope

	Prevents warning about unused variable with same name in function
	scope.

2006-02-05 20:06 +0000  Stephen Deasey  <sdeasey@gmail.com>  (cfbc285fe209)

	* ChangeLog, naviserver.rdf:
	Update version info in DOAP project description

2006-02-05 20:03 +0000  Stephen Deasey  <sdeasey@gmail.com>  (d2af176526ab)

	* ChangeLog, configure.in:
	Emit a warning if zlib compression support requested (default) but
	the zlib.h header or compress2 function not found

2006-02-05 19:47 +0000  Stephen Deasey  <sdeasey@gmail.com>  (97f278b9686c)

	* include/config.h.in: new file.
	* ChangeLog, Makefile, configure.in, include/.cvsignore,
	include/config.h.in, include/ns.h, include/nsthread.h,
	nsd/compress.c, nsd/main.c, nsd/nsd.h, nsd/tclcallbacks.c,
	nsd/tclobjv.c, nsthread/thread.h:
	Move nsd version info to private nsversion.h header

	* Makefile:
	* configure.in:
	* include/config.h.in:
	* include/nsconfig.h.in:
	* include/ns.h:
	* include/nsthread.h:
	* nsthread/thread.h:
	* include/.cvsignore: Autoconf config defs now saved in private
	config.h which is not installed so we don't pollute the namespace of
	modules. Version info now substituted into nsversion.h.

	* nsd/compress.c:
	* nsd/main.c:
	* nsd/nsd.h:
	* nsd/tclcallbacks.c:
	* nsd/tclobjv.c: Include the private nsd.h header to pick up config
	definitions.

2006-02-05 08:05 +0000  Stephen Deasey  <sdeasey@gmail.com>  (cccebb6d2196)

	* ChangeLog, tests/ns_info.test:
	Fix test for ns_info pools when Tcl built with --enable-symbols; fix
	test for ns_info builddate, for night owls

2006-02-04 17:59 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7b63b8fb4f82)

	* ChangeLog, configure.in:
	Bumped working version to 4.99.2

2006-02-04 16:41 +0000  Zoran Vasiljevic  <zv@archiware.com>  (ffb0da17115a)

	* .hgtags:
	Tag naviserver-4.99.1

2006-02-04 16:41 +0000  Zoran Vasiljevic  <zv@archiware.com>  (5dde5dce1393 [naviserver-4.99.1])

	* ChangeLog:
	Tag naviserver-4.99.1-release

2006-02-03 15:54 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (2265781c5c0f)

	* ChangeLog, include/Makefile.module.in:
	Add clean-bak Makefile target

2006-02-03 15:30 +0000  Zoran Vasiljevic  <zv@archiware.com>  (bac4cf2906b6)

	* ChangeLog, nsd/nsmain.c:
	(LogTclVersion): new, log Tcl version after initialsing library

2006-02-03 14:58 +0000  Zoran Vasiljevic  <zv@archiware.com>  (204e0482b6c5)

	* sample-config.tcl.in: new file.
	* sample-config.tcl: deleted file.
	* ChangeLog, configure.in, sample-config.tcl, sample-config.tcl.in:
	Pre-process the sample-config.tcl file for installation directory

2006-02-03 08:07 +0000  Ibrahim Tannir  <itannir@archiware.com>  (9dacd92d8a86)

	* nsthread/thread.c:
	Win32: define vsnprintf as _vsnprintf

2006-02-03 08:06 +0000  Ibrahim Tannir  <itannir@archiware.com>  (b2a2bba169dc)

	* nsd/pidfile.c:
	(NsCreatePidFile): open channel in binary mode

	Otherwise the Windows pidfile is garbled with a CR at the end.

2006-02-03 08:01 +0000  Ibrahim Tannir  <itannir@archiware.com>  (889f94241cc4)

	* nsd/binder.c:
	Make binder compile on Windows

2006-02-03 08:00 +0000  Ibrahim Tannir  <itannir@archiware.com>  (22a3eabea09d)

	* nsd/urlspace.c:
	(JunctionFind): add missing variable declaration

2006-02-02 17:12 +0000  Zoran Vasiljevic  <zv@archiware.com>  (ac44c8ab50dc)

	* ChangeLog, nsthread/nsthreadtest.c:
	Malloc test now uses random block-sizes up to 16K max to test the
	speed difference between the malloc and ns_malloc

2006-02-02 09:23 +0000  Bernd Eidenschink  <eidenschink@web.de>  (0245e2dac778)

	* ChangeLog, README:
	README: synch Tcl and NaviServer ./configure args in compile
	example; add note for use of autogen.sh

2006-02-01 15:42 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d93d1814ae99)

	* Makefile:
	dist target now depends on clean, otherwise we get objects in
	tarball

2006-02-01 15:30 +0000  Zoran Vasiljevic  <zv@archiware.com>  (b62ed54d7282)

	* ChangeLog, README:
	Reflect 4.99.1 and latest 8.4.12 Tcl

2006-02-01 15:26 +0000  Zoran Vasiljevic  <zv@archiware.com>  (5f54f23ff358)

	* NEWS:
	Add hint about new runtime dir structure

2006-02-01 15:24 +0000  Zoran Vasiljevic  <zv@archiware.com>  (6dd7e6e39a70)

	* NEWS:
	NEWS: new things and code changes since 4.99.0

2006-02-01 14:54 +0000  Zoran Vasiljevic  <zv@archiware.com>  (21ad3c74852c)

	* configure.in:
	Revert back to 4.99.1 as we did not release this one yet

2006-02-01 14:46 +0000  Zoran Vasiljevic  <zv@archiware.com>  (94f7b71e2840)

	* include/Makefile.global.in:
	Omit -P option for cp as it is not supported on Solaris

2006-02-01 13:32 +0000  Zoran Vasiljevic  <zv@archiware.com>  (306355f4c4e7)

	* include/Makefile.global.in:
	Make CP using -pPR and not -a as this is only the Linux option

2006-02-01 13:29 +0000  Zoran Vasiljevic  <zv@archiware.com>  (859dc07ca493)

	* Makefile:
	Purge some junk files before generating distribution

2006-02-01 12:51 +0000  Zoran Vasiljevic  <zv@archiware.com>  (936e439b698d)

	* configure.in:
	Bumped version to 4.99.2 for an interim release

2006-01-28 22:14 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a5a7229b3b97)

	* sample-config.tcl:
	Fix comment typo in sample-config.tcl

2006-01-24 16:40 +0000  Zoran Vasiljevic  <zv@archiware.com>  (806d71cdf599)

	* ChangeLog, nsd/urlspace.c:
	(JunctionFind): fix typo causing compile failure for standard C

2006-01-24 15:35 +0000  Zoran Vasiljevic  <zv@archiware.com>  (afe705479956)

	* nsd/tcljob.c:
	Untabified, indented

2006-01-24 14:12 +0000  Zoran Vasiljevic  <zv@archiware.com>  (10cb50a92e0c)

	* nsd/tclsock.c:
	Untabified, indented

2006-01-24 13:44 +0000  Zoran Vasiljevic  <zv@archiware.com>  (726b560251a8)

	* nsd/sock.c:
	Untabified, indented

2006-01-24 13:24 +0000  Zoran Vasiljevic  <zv@archiware.com>  (beab227ea964)

	* ChangeLog, include/ns.h, nsd/sock.c, nsd/tcljob.c, nsd/tclsock.c,
	nssock/nssock.c:
	Accept Ns_Time ptr instead of integer timeout in secs (rfe #1413620)

2006-01-23 15:57 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (f3db8b3c6329)

	* ChangeLog, nsd/tclcache.c, nsd/tclcmds.c, tests/ns_cache.test,
	tests/ns_info.test:
	Add ns_cache_exists

	Used for cases when just existence needed without retrieving the
	whole cache entry.

2006-01-23 15:20 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (35235fc8f08c)

	* ChangeLog, m4/tcl.m4:
	Fix bug with extra single quote for bash 3.1

2006-01-23 10:09 +0000  Bernd Eidenschink  <eidenschink@web.de>  (5e30c5d8fa88)

	* doc/html/ns_sendmail.html, doc/man/ns_sendmail.n,
	doc/src/README.doc, doc/src/ns_sendmail.man: new file.
	* ChangeLog, doc/html/ns_sendmail.html, doc/man/ns_sendmail.n,
	doc/src/README.doc, doc/src/ns_sendmail.man, tcl/sendmail.tcl:
	(ns_sendmail): add character encoding of subject, body; quoted-
	printable; AUTH-PLAIN

	* tcl/sendmail.tcl: Added character encoding for subject and body,
	message-id creation, quoted printable text and AUTH PLAIN mechanism
	(all optional).

	* doc/src/ns_sendmail.man:
	* doc/src/README.doc:
	* doc/man/ns_sendmail.n:
	* doc/html/ns_sendmail.html: Doctools documentation file for new
	ns_sendmail functionality as well as examples created with dtplite

2006-01-21 15:53 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d946bf525e20)

	* contrib/nsd.tcl, sample-config.tcl:
	Massage sample-config.tcl

2006-01-20 22:34 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (ca0d48146778)

	* ChangeLog, tcl/file.tcl, tcl/util.tcl:
	Use new ns_cache_* procs in fastpath code; add ns_fileread,
	ns_filewrite utils

2006-01-20 21:40 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b03ae7507cf7)

	* contrib/index.adp, contrib/mimetypes.tcl, contrib/nsd.tcl: new file.
	* ChangeLog, Makefile, README, contrib/index.adp,
	contrib/mimetypes.tcl, contrib/nsd.tcl, include/Makefile.global.in,
	m4/tcl.m4, sample-config.tcl:
	Various installation layout changes; enhance sample-config.tcl

	* m4/tcl.m4: check for USE_THREAD_ALLOC in tclConfig.sh

	* Makefile: simplify installation structure, create conf/, logs/,
	tcl/ directories.

	* sample-config.tcl: re-formatted and make it run, added more
	descriptions

	* contrib/nsd.tcl:
	* contrib/mimetypes.tcl: added new example configs

	* include/Makefile.global.in: chanage to simpler installation
	structure

	* contrib/index.adp: Added default index page

2006-01-20 18:57 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (aa3d4ed82e4a)

	* ChangeLog, tcl/stats.tcl:
	Fix all stats bugs; now runs under naviserver properly

2006-01-20 15:40 +0000  Bernd Eidenschink  <eidenschink@web.de>  (2ba27efa67c5)

	* README:
	Update README with latest info

2006-01-20 06:04 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (600f98d8a7ec)

	* ChangeLog, include/ns.h, nsd/driver.c:
	(Ns_DriverSockRequest): fix struct reuse bug; return NS_ERROR if URL
	unparsable

2006-01-18 19:47 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (ccdf7d4450f3)

	* ChangeLog, sample-config.tcl:
	Add spooler/writer related options to sample-config.tcl

2006-01-18 17:17 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (07f9391eddef)

	* ChangeLog, nsd/driver.c, nsd/nsd.h:
	Cleanup spooler/writer thread code; fix bug when multiple drivers
	loaded

	Rewrote driver's spooler/writer support to make them cleaner and to
	support multiple spooler/writer threads for each driver. Before
	that, global spooler variables got overwritten if multiple drivers
	are loaded.

	Also, simplified driver thread, removed rotating driver's list, in
	case of usual one driver operation that was just waste of CPU
	cycles. For multiple drivers, spawning separate thread for each
	would be better solution, it can be considered for future driver
	encancements.

2006-01-18 03:02 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (a7a5099c4c2e)

	* nsd/driver.c:
	Remove spurious debug log message

2006-01-18 02:26 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (0cfb09376863)

	* ChangeLog, include/nsthread.h, nsd/driver.c, nsd/nsd.h, nsd/queue.c,
	nsd/sched.c, nsd/task.c, nsd/tcljob.c, nsthread/thread.c:
	(Ns_ThreadSetName): accept sprintf-like arg list

2006-01-17 23:21 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b4d4fed888c2)

	* ChangeLog, nsd/connio.c, nsd/driver.c:
	Writer support improved with thread pool

2006-01-16 08:12 +0000  Bernd Eidenschink  <eidenschink@web.de>  (66e7f48014fb)

	* tests/ns_base64encode.test: new file.
	* ChangeLog, nsd/uuencode.c, tests/ns_base64encode.test:
	(ns_base64encode): fix appending of extra newline in certain line
	break situations (bug #1407112)

2006-01-16 04:29 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (eab9bbad9699)

	* ChangeLog, nsd/connio.c, nsd/driver.c, nsd/nsd.h:
	Use pool of independent threads to write large files (dissabled)

	* nsd/driver.c:
	* nsd/connio.c:
	* nsd.nsd.h: This is experimental feature to use separate writer
	thread for sending large files to multiple clients. By default it is
	disabled so nobody should be affected by this feature. Still need
	more testing but can be very useful, keeping it in CVS makes it
	easier to track then in local copy, i keep losing local
	modifications all the time.

	* nsd/driver.c: Changes poolto from -1 to 60 seconds in DriverThread
	and SpolerThread to wake up from pool. Once a minute will not kill
	the server but will ensure it will never get into race condition.

2006-01-14 18:45 +0000  Zoran Vasiljevic  <zv@archiware.com>  (3f708f281968)

	* nsd/driver.c:
	Made all places related to spooler shutdown conditional on
	spoolerDisabled

2006-01-14 18:40 +0000  Zoran Vasiljevic  <zv@archiware.com>  (267db4b92290)

	* ChangeLog, nsd/driver.c:
	Do not trigger spooler pipe on NsStopDrivers if spooler thread
	disabled

2006-01-14 18:07 +0000  Zoran Vasiljevic  <zv@archiware.com>  (015f72ad8ad2)

	* nsd/tclmisc.c:
	Indented

2006-01-14 17:45 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7e476a792901)

	* ChangeLog, nsd/tclmisc.c:
	(NsTclHTUUEncodeObjCmd): properly handle binary strings (bug
	#1405988)

2006-01-13 15:49 +0000  Zoran Vasiljevic  <zv@archiware.com>  (c2c5b72bbf7c)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/pathname.c,
	nsd/tclcallbacks.c, nsd/tclinit.c, nsd/tclrequest.c, nsd/tclsched.c,
	nsd/url2file.c, tests/ns_register_filter.test,
	tests/ns_register_proc.test, tests/url2file.test:
	Tcl callbacks accept multiple args (rfe #1404901)

2006-01-12 01:17 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (22e384702ed2)

	* ChangeLog, nsd/driver.c, nsd/nsd.h, nsd/tclcmds.c:
	Handle large uploads in independent spooler thread; add
	ns_upload_stats

2006-01-11 10:40 +0000  Zoran Vasiljevic  <zv@archiware.com>  (f793ccd224d4)

	* ChangeLog, nsd/set.c:
	Fixed off-by-one error in Ns_SetDelete

2006-01-10 12:43 +0000  Zoran Vasiljevic  <zv@archiware.com>  (0974df640bce)

	* ChangeLog, nsd/driver.c:
	Added some clarifying comments

2006-01-07 22:26 +0000  Stephen Deasey  <sdeasey@gmail.com>  (9949f0c3c54d)

	* ChangeLog, nsd/driver.c:
	(DriverThread): add Push() macro to clarify list processing of
	sockets and drivers

2006-01-06 09:29 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d01c037cc7c4)

	* ChangeLog, tests/ns_conn.test:
	Fix ns_conn.test to recognize new contentsentlength option during
	basic command test

2006-01-04 14:08 +0000  Zoran Vasiljevic  <zv@archiware.com>  (06562715d5fb)

	* ChangeLog, configure.in, nsd/conn.c, nsthread/reentrant.c:
	Fix ns_conn contentsentlength logging; fix 64bit inet_ntop bug

	* configure.in: added test for inet_ntop.
	* nsthread/reentrant.c: use inet_ntop when available which fixes a bug
	on 64 bit ppc, at least under linux.

	* nsd/conn.c: added option to [ns_conn] to set/query
	contentsentlength for getting the correct length into the logfile,
	when files are delivered via event driven I/O.

	Thanks to Gustaf Neumann for providing above fixes.

2006-01-04 10:15 +0000  Stephen Deasey  <sdeasey@gmail.com>  (48e604dd257b)

	* nsd/task.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/nsd.h, nsd/nsmain.c,
	nsd/sock.c, nsd/task.c:
	Backport AOLserver 4.5 task queues

	Callbacks are registered to run in a separate thread in response to
	socket read/write events.

2005-12-30 11:26 +0000  Stephen Deasey  <sdeasey@gmail.com>  (2d27b95fd75f)

	* ChangeLog, include/ns.h, nsd/init.c, nsd/op.c, nsd/url2file.c,
	nsd/urlspace.c, tests/url2file.test:
	Remove global urlspace lock; cleanup NsUrlSpecificWalk output (rfe
	#1377113)

	* include/ns.h:
	* nsd/init.c:
	* nsd/urlspace.c:
	* tests/url2file.test: Split the urlspace by key ID and remove the
	global lock. Remove unused Ns_ServerSpecific*() routines.

	Make NsUrlSpecificWalk() emit an entry for both inherit and
	noinherit data, identifying each with a keyword. Don't emit the
	server name, which is redundant, and separate the URL from the
	filter. (RFE: 1377113)

2005-12-30 11:07 +0000  Stephen Deasey  <sdeasey@gmail.com>  (b771579c88a6)

	* nsd/tclcache.c, tcl/cache.tcl, tests/ns_cache.test: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/cache.c, nsd/init.c,
	nsd/nsd.h, nsd/proc.c, nsd/server.c, nsd/tclcache.c, nsd/tclcmds.c,
	tcl/cache.tcl, tests/ns_cache.test:
	Add ns_cache_*, ns_memoize; various tweaks to the guts of cache
	system

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/init.c:
	* nsd/proc.c:
	* nsd/cache.c: Global hash of cache names removed; access no longer
	available via Ns_CacheFind() or ns_cache_names. Caches have unique
	locking requirements and lifetimes which could be violated by e.g.
	running ns_cache_stats on a thread local cache as the thread is
	exiting.

	New Ns_CacheCreateEx() allows creating a cache which has both a size
	and a time limit.

	Caches with time limits are calculated differently. Previous
	behavior was to periodically check the last access time of each
	cache entry and flush those which had expired. A busy cache could
	grow without bound. New behavior is to check for expirey each time
	an entry is retrieved from the cache. All caches can (and should) be
	size limited. Timeouts may be specified per cache and per entry
	using new Ns_CacheSetValueExpires().

	Ns_CacheFlush() now returns the number of entries flushed.

	New Ns_CacheStats() takes over from ns_cache_stats for non-Tcl
	caches. Stats are returned in Tcl "array get" format.

	Removed Ns_CacheMalloc(), Ns_CacheFree() and Ns_CacheName().

	Move Tcl commands to tclcache.c.

	* nsd/Makefile:
	* nsd/tclcmds.c:
	* nsd/tclcache.c:
	* tests/ns_cache.test: Add new Tcl commands ns_cache_create, _eval,
	_append, _lappend, and _incr. (RFE# 1119257)

	Old commands ns_cache_names, _keys, _flush and _stats now only work
	on Tcl caches. ns_cache_size has been removed; the size is now
	reported along with other statistics. These commands now only work
	on Tcl caches.

	* tcl/cache.tcl: New ns_memoize and related commands which act just
	like ns_cache_eval but use the script as a key into the memoize
	cache.

2005-12-23 04:27 +0000  Stephen Deasey  <sdeasey@gmail.com>  (a477940deb97)

	* ChangeLog, nsd/tclrequest.c, tests/ns_info.test,
	tests/ns_register_filter.test:
	Don't pass "" as arg to filter/trace callbacks when no arg
	registered

2005-12-11 11:19 +0000  Stephen Deasey  <sdeasey@gmail.com>  (820a47350faa)

	* ChangeLog, include/ns.h, nsd/filter.c, nsd/nsd.h, nsd/proc.c,
	nsd/tclcmds.c, nsd/tclrequest.c, tests/ns_register_filter.test:
	Add -first to ns_register_filter; add ns_shortcut_filter (rfe
	#1012103)

	Add switch -first to ns_register_filter command, allowing filters to
	be registered at the head of the queue.

	Add new command ns_shortcut_filter which registers a C filter
	callback which simply returns NS_FILTER_BREAK, preventing any other
	filters of the same type from running.

	For further explanation, see:

	http://sf.net/tracker/index.php?func=detail&aid=1012103&group_id=315
	2&atid=353152

2005-12-11 10:17 +0000  Stephen Deasey  <sdeasey@gmail.com>  (f90bb61cc582)

	* tests/ns_register_filter.test: new file.
	* ChangeLog, nsd/tclrequest.c, tests/ns_register_filter.test:
	Don't log filter errors twice; handle inline script callbacks
	correctly

	* tests/ns_register_filter.test: Add tests for registered filters
	and traces.

	* nsd/tclrequest.c: Fix bug where filter errors were being logged
	twice. Fix bug where filter callback procs were being constructed
	incorrectly, making it impossible to register inline script
	fragments, rather than proc names.

2005-12-11 10:10 +0000  Stephen Deasey  <sdeasey@gmail.com>  (cf002798425e)

	* ChangeLog, tests/ns_nsv.test:
	Typo: s/-setup/-body/

2005-12-11 10:01 +0000  Stephen Deasey  <sdeasey@gmail.com>  (b112377e153b)

	* ChangeLog, nsd/tclvar.c, tests/ns_nsv.test:
	Add -nocomplain switch to nsv_unset, matching Tcl unset command

2005-12-11 08:20 +0000  Stephen Deasey  <sdeasey@gmail.com>  (fe605dd00aee)

	* ChangeLog, nsd/tclvar.c:
	Untabify and reformat

2005-12-11 04:44 +0000  Stephen Deasey  <sdeasey@gmail.com>  (7cc14d41c061)

	* ChangeLog, include/ns.h, nsd/fastpath.c, nsd/nsd.h, nsd/proc.c,
	nsd/server.c, nsd/tclcmds.c, nsd/tclrequest.c,
	tests/ns_register_proc.test:
	Add ns_register_fastpath (rfe #1012770)

	Add new Tcl command ns_register_fastpath which re-register the
	original fastpath proc for static file serving, for the specified
	method and URL. This allows e.g. a Tcl proc to be registered as the
	default handler for the URL / and then override this with the
	fastpath proc for /images.

	The fastpath proc invokes no Tcl and therefore does not allocate an
	interp. Non-Tcl using threads can be segregated using the conn pool
	mechanism.

	(RFE: http://sf.net/tracker/index.php?func=detail&aid=1012770&group_
	id=3152&atid=353152)

2005-12-11 03:33 +0000  Stephen Deasey  <sdeasey@gmail.com>  (5237a303aa23)

	* ChangeLog, nsd/httptime.c, tests/ns_httptime.test:
	(ns_httptime): format date using snprintf to ensure English used
	(bug #1340755)

	* nsd/httptime.c:
	* tests/hs_httptime.test: Use snprintf to format the date to ensure
	the English week and month names are always used, no matter which
	locale is in effect. (Bug# 1340755)

2005-12-11 03:17 +0000  Stephen Deasey  <sdeasey@gmail.com>  (43a4de1f7763)

	* ChangeLog, nsd/httptime.c, tests/ns_httptime.test:
	Add tests for ns_parsehttptime; untabify and reformat httptime.c

2005-12-05 08:40 +0000  Stephen Deasey  <sdeasey@gmail.com>  (182da301994b)

	* tests/ns_register_proc.test: new file.
	* ChangeLog, include/ns.h, nsd/op.c, nsd/tclrequest.c,
	tests/ns_register_proc.test:
	Add Ns_UnregisterProcEx; add -recurse to ns_unregister_proc

	* include/ns.h:
	* nsd/op.c: Add new function Ns_UnRegisterProcEx which allows all
	urlspace flags to be set.

	* nsd/tclrequest.c: Fix bug where noinherit procs were not being
	deleted. Add new -recurse flag to ns_unregister_proc which deletes
	all registered procs below the given URL.

	* tests/ns_register_proc.test: Exercise the ns_register_proc API.

2005-12-04 01:53 +0000  Stephen Deasey  <sdeasey@gmail.com>  (eea16a82d291)

	* ChangeLog, tests/ns_info.test:
	Add new sub-commands to failing ns_info test

2005-11-24 19:36 +0000  Zoran Vasiljevic  <zv@archiware.com>  (0dcb7b1a0cbd)

	* ChangeLog, nsd/nsmain.c:
	(NsMain): remove Tcl_ExitThread() as it changes exit behavior in
	incompatbile way

2005-11-24 19:07 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d98a61889de9)

	* nsd/nsmain.c:
	Removed unused variable in NsMain()

2005-11-24 15:20 +0000  Zoran Vasiljevic  <zv@archiware.com>  (4ef2163e3331)

	* ChangeLog, nsd/nsmain.c:
	(NsMain): call Tcl_ThreadExit() instead of returning to caller,
	triggering exit handlers

	This triggers invocation of exit handlers registered by Tcl
	extensions loaded into the main thread and cleanup of TLS slots
	(indirectly, from the therad library exit call, pthread_exit or
	_endthreadex).

2005-11-24 15:19 +0000  Zoran Vasiljevic  <zv@archiware.com>  (9b19a4cc9376)

	* nsd/exec.c:
	(Ns_WaitForProcess): ignor EINTR in waitpid

2005-11-15 21:26 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (fb1007250412)

	* ChangeLog, nsd/info.c:
	(ns_info): add 'started' and 'shutdownpending' sub-commands

2005-11-12 21:40 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (76c0a6136552)

	* include/ns.h:
	Don't use C++ reserved keyword 'delete'

2005-11-12 20:50 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e3b9a40ccdb4)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/driver.c, nsd/sock.c:
	Add new DriverAccept callback; add Ns_DriverSetRequest to allocat
	Sock's; add Ns_ConnSockPtr

	* include/ns.h: Add new DriverAccept call for drivers to be called
	after accept the connection. If request struct will be provided by
	the driver, connection will be queued immediately and driver will
	handle it completely. This is temporary until more generic driver
	support will be designed.

	* nsd/driver.c: add new Ns_DriverSetRequest function that allocates
	request struct for new connection socket.

	* nsd.conn.c: New Ns_ConnSockPtr function

2005-11-12 18:30 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (4419d644e2e6)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/info.c, nsd/sock.c,
	nssock/nssock.c, tests/ns_info.test:
	Rewrite driver SockRead/SockParse; make Ns_SockRecvBufs,
	Ns_SockSendBufs public

	* nsd/driver.c: Split SockRead into SockRead and SockParse, added
	new SetRequest static function that allocates request struct for new
	connection socket.

	* nssock/nssock.c:
	* include/ns.h:
	* nsd/sock.c: Moved and made as public two functions from sock driver:
	Ns_SockRecvBufs, Ns_SockSendBufs. for new drivers, now it will be
	easy to re-use send/recv data from within driver's proc.

	* nsd/info.c: Fixed sockcallbacks as unrecognosed error

2005-11-07 14:04 +0000  Zoran Vasiljevic  <zv@archiware.com>  (62a4ba2f3da6)

	* ChangeLog, nsd/info.c:
	(ns_info): handle non server-specific sub-commands

2005-11-07 03:17 +0000  Stephen Deasey  <sdeasey@gmail.com>  (2ddb25bf4391)

	* nsd/url2file.c, tests/url2file.test: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/fastpath.c, nsd/info.c,
	nsd/init.c, nsd/nsd.h, nsd/proc.c, nsd/server.c, nsd/tclcmds.c,
	nsd/tclfile.c, nsd/url2file.c, tests/ns_info.test,
	tests/url2file.test:
	Add new, flexible urlspace-based Url2File C API and matching Tcl
	commands (rfe #1333811)

2005-11-03 16:17 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b27419da874f)

	* ChangeLog, nsd/binder.c:
	All Ns_SockListen* routines support forked binder if direct socket
	allocation failed

2005-11-03 07:15 +0000  Zoran Vasiljevic  <zv@archiware.com>  (a2784286743f)

	* nsd/binder.c:
	Untabify, reindent

2005-11-02 23:07 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (4f80edd6e8ac)

	* m4/cmmsg.m4: new file.
	* configure.in, m4/cmmsg.m4, nsd/binder.c:
	Minor fixes regarding new binder support

2005-11-02 21:18 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (f93f991c04ec)

	* ChangeLog, configure.in, include/ns.h, nsd/binder.c, nsd/nsmain.c:
	Add support for binder as separate process, forked before dropping
	root privs

	In this mode, no need to specify all ports in the command line
	parameter -b. For now all modules have to call new API function in
	order to create sockets if they are not specified using -b command
	line parameter.

2005-11-02 20:19 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (641120933176)

	* ChangeLog, tests/ns_info.test:
	Add 1 second delay to test to make 'ns_info uptime' report uptime >
	0

2005-10-28 17:00 +0100  Bernd Eidenschink  <eidenschink@web.de>  (1dd86a7eea71)

	* ChangeLog, tcl/compat.tcl:
	(ns_rename): do not delete file if "from" and "to" match

2005-10-27 11:34 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ebdbce3b8ba7)

	* ChangeLog, include/ns.h, nsd/log.c:
	Add Ns_VALog with varargs interface

2005-10-24 17:08 +0100  Bernd Eidenschink  <eidenschink@web.de>  (f8efe6cca94e)

	* tests/ns_set.test: new file.
	* ChangeLog, tests/ns_set.test:
	Add basic tests for ns_set command

2005-10-22 13:50 +0100  Stephen Deasey  <sdeasey@gmail.com>  (96b29b51ed3f)

	* ChangeLog, nsd/tclcmds.c, nsd/tclenv.c, tests/ns_env.test:
	(ns_env): fix bugs with -nocomplain switch and unset command (bug#
	1333280)

	Untabify and reformat code, convert to Tcl objects.

2005-10-22 10:31 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c03e186d497a)

	* ChangeLog, configure.in, nsd/nsmain.c, nsd/tclmisc.c:
	Make watchdog wake up every 10 minutes on all platforms; add
	platform neutral checking for u_int32_t and u_int8_t types

2005-10-22 09:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a1a1db9ef5a8)

	* ChangeLog, nsd/modload.c:
	Make the passed file path absolute before attempting to load the
	module

2005-10-22 09:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (983f810ae9fc)

	* nsd/nsmain.c:
	Initialize Tcl library in the server process only; fix broken SIGINT
	hadling

	Previous signal handling all allowed us to CTRL-C the booting
	process at any time.

2005-10-21 13:01 +0100  Zoran Vasiljevic  <zv@archiware.com>  (1f71aaf0e8a1)

	* ChangeLog, configure.in, include/Makefile.global.in, m4/tcl.m4,
	nsdbtest/Makefile:
	Build fixes for nsdbtest; build fixes for Darwin

	Add MODNAME of nsdbtest so we can do more checks when linking the
	module.

	Link against libnsd library when linking new nsdbstest driver.

	Removed "-prebind" for Darwin builds.

2005-10-21 11:07 +0100  Zoran Vasiljevic  <zv@archiware.com>  (22a3e87d8a8c)

	* ChangeLog, nsd/tclcmds.c, nsd/tclfile.c, tcl/compat.tcl:
	Re-born ns_normalizepath as C command

2005-10-21 08:38 +0100  Bernd Eidenschink  <eidenschink@web.de>  (8b91191f800f)

	* ChangeLog, tests/ns_info.test:
	Minor fix for test 2.27.1

2005-10-21 08:03 +0100  Stephen Deasey  <sdeasey@gmail.com>  (18738602818f)

	* ChangeLog:
	Add mising tracker RFE numbers to ChangeLog entries

2005-10-21 07:50 +0100  Stephen Deasey  <sdeasey@gmail.com>  (95445f95068f)

	* ChangeLog, nsd/modload.c:
	(Ns_ModuleLoad): don't use per-thread cache for interp of unknown
	vserver

	* nsd/modload.c (Ns_ModuleLoad): Although the first two arguments to
	Ns_ModuleLoad are called server and module, they're really just two
	arbitrary strings passed to the module. The nsdb module for examples
	passes the driver name and configuration path. For this reason we
	cannot rely on knowing the current virtual server and so cannot
	allocate an interp from the per-thread cache.

2005-10-21 07:22 +0100  Stephen Deasey  <sdeasey@gmail.com>  (594dbfdf0a60)

	* tests/ns_thread.test: new file.
	* ChangeLog, include/ns.h, nsd/tclcmds.c, nsd/tclobj.c,
	nsd/tclthread.c, tests/ns_thread.test:
	Add new generalised struct->object mapping code, derived from
	ns_thread

	* include/ns.h:
	* nsd/tclobj.c: Generalise the ns_thread routines for wrapping a C
	structs with a Tcl obj handle. Slighlty enhanced: also allows
	wrapping of statically allocated C structs which always have a
	direct string name -> struct relationship.

	* nsd/tclcmds.c:
	* nsd/tclthread.c: Convert to Tcl objects, remove some duplicated code
	and convert to the new ns:addr Tcl object type interface.

	* tests/ns_thread.test: Exercise the ns_thread command and the new
	ns:addr Tcl object type.

2005-10-21 06:58 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8ec8a265b87f)

	* ChangeLog, nsdbtest/nsdbtest.c:
	Remove unused function declaration

2005-10-21 06:38 +0100  Stephen Deasey  <sdeasey@gmail.com>  (47f477f7ad80)

	* ChangeLog, nsd/tclinit.c:
	(Ns_TclRegisterTrace): Remove debug logging code

2005-10-21 06:25 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d4ebaf689ade)

	* tests/ns_accesslog.test: new file.
	* ChangeLog, nsd/init.tcl, nsd/tclinit.c, nsdb/db.h, nsdb/dbtcl.c,
	nsdb/nsdb.c, tests/ns_accesslog.test, tests/test.nscfg:
	(Ns_TclTraceCreate): Run CREATE traces as they are registered

	* nsd/nsd.h:
	* nsd/tclinit.c (Ns_TclTraceCreate): Run CREATE traces as they are
	registered in order to make Tcl comamnds registered by binary module
	available to the boot script and Tcl module files.

	* nsd/init.tcl: Rename use of depraciated api.

	* nsdb/db.h:
	* nsdb/nsdb.c:
	* nsdb/dbtcl.c: Fix bug where Ns_TclRegisterTrace was being called
	after server startup.

	* tests/test.nscfg:
	* tests/ns_accesslog.test: Add stub tests for the nslog module.

2005-10-21 00:38 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8671f4a0db00)

	* nsdbtest/Makefile, nsdbtest/nsdbtest.c, tests/nsdb.test: new file.
	* ChangeLog, Makefile, nsdbtest/Makefile, nsdbtest/nsdbtest.c,
	tests/nsdb.test, tests/test.nscfg:
	Implement a simple nsdb driver for testing and add the beginnings of
	some tests

2005-10-20 19:30 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (897525d217fb)

	* ChangeLog, include/ns.h:
	Don't use C++ reserved keyword 'delete'

2005-10-20 18:56 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5b8c1adeee57)

	* ChangeLog, nsd/init.tcl:
	Fix Tcl module loading problem

2005-10-20 18:02 +0100  Bernd Eidenschink  <eidenschink@web.de>  (38adee9ee0dd)

	* tests/images/broken.gif, tests/images/broken.jpg,
	tests/images/color5x200.gif, tests/images/color5x200.jpg,
	tests/images/color5x200_progressive.jpg, tests/images/empty.gif,
	tests/images/empty.jpg, tests/images/small.gif, tests/ns_conn.test,
	tests/ns_crypt.test, tests/ns_env.test, tests/ns_gifsize.test,
	tests/ns_httptime.test, tests/ns_info.test, tests/ns_jpegsize.test,
	tests/ns_mime.test, tests/ns_sha1.test: new file.
	* ChangeLog, tests/images/broken.gif, tests/images/broken.jpg,
	tests/images/color5x200.gif, tests/images/color5x200.jpg,
	tests/images/color5x200_progressive.jpg, tests/images/empty.gif,
	tests/images/empty.jpg, tests/images/small.gif, tests/ns_conn.test,
	tests/ns_crypt.test, tests/ns_env.test, tests/ns_gifsize.test,
	tests/ns_httptime.test, tests/ns_info.test, tests/ns_jpegsize.test,
	tests/ns_mime.test, tests/ns_sha1.test:
	Add variety of new tests for images, mime, env, conn, info etc.

2005-10-20 17:50 +0100  Zoran Vasiljevic  <zv@archiware.com>  (f195600864d7)

	* nsd/callbacks.c:
	Untabified, indented...

2005-10-20 17:41 +0100  Zoran Vasiljevic  <zv@archiware.com>  (d08277bc5bb5)

	* ChangeLog, nsd/callbacks.c:
	Add options to run registered callbacks in both FIFO and LIFO
	fashion

	All of the start-type callbacks are now executed in FIFO and all
	stop-type in LIFO.

2005-10-20 16:03 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (34d863016095)

	* tests/ns_uuencode.test: new file.
	* ChangeLog, nsd/tclmisc.c, nsd/uuencode.c, tests/ns_uuencode.test:
	Fix bug with ns_uuencode segfault on a 1 byte string

2005-10-19 14:25 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a5a2335d9ab5)

	* ChangeLog, nslog/nslog.c:
	Ns_ModuleInit failed to create the log file if given relative path
	to the file

2005-10-17 12:43 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d5e6547344a2)

	* ChangeLog, nsd/log.c, tests/ns_log.test:
	Add new sub-command: ns_logctl severity, for run-time control

	With this you can query and set the status of any of the log levels
	at runtime. For example, you could log into the control port --
	ns_logctl severity debug on -- to track down a problem.

2005-10-17 12:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c0e868e29ddf)

	* ChangeLog, nslog/nslog.c:
	Fix missed initialization of logfile descriptor

	This caused us to close invalid descriptor in LogOpen. As the
	result, the interactive NS mode assumed non-interactive use and
	prematurely exited.

2005-10-17 12:25 +0100  Stephen Deasey  <sdeasey@gmail.com>  (2295384f5e22)

	* ChangeLog, nscgi/nscgi.c, nscp/nscp.c, nsdb/dbinit.c, nslog/nslog.c:
	Use new config routines

2005-10-16 09:52 +0100  Stephen Deasey  <sdeasey@gmail.com>  (37df6a21776f)

	* ChangeLog, nsd/config.c, nsd/driver.c, nsd/log.c, nsd/nsconf.c,
	nsd/nsd.h, nsd/nsmain.c:
	Log config values at startup; initialize logging earlier

	* nsd/config.c: Log the section, key, value and any default, min or
	max whenever a configuration value is looked up. Log at level Debug
	which by default is off. Can now quickly determine which config keys
	are valid/used.

	* nsd/nsmain.c:
	* nsd/nsconf.c:
	* nsd/log.c: Initialise log system earlier -- dissable Dev and Debug
	log levels during early boot up.

	* nsd/driver.c:
	* nsd/nsd.h: Some logging cleanup.

2005-10-16 09:38 +0100  Stephen Deasey  <sdeasey@gmail.com>  (9bc767b23c1c)

	* m4/dns.m4: new file.
	* acinclude.m4: deleted file.
	* ChangeLog, Makefile, acinclude.m4, configure.in, m4/dns.m4,
	nsd/dns.c:
	Drop acinclude.m4 and move dns checking macros into own file in m4
	directory; use built-in AC_CHECK_MEMBERS macro

2005-10-15 17:01 +0100  Zoran Vasiljevic  <zv@archiware.com>  (51822f42330d)

	* ChangeLog, include/nsthread.h:
	Add MIN/MAX macros since Solaris does not define those in
	sys/param.h like other OS'es

2005-10-15 15:47 +0100  Zoran Vasiljevic  <zv@archiware.com>  (10467b185f39)

	* ChangeLog, nsd/tclfile.c:
	Reformatted, untabified...

2005-10-15 14:58 +0100  Zoran Vasiljevic  <zv@archiware.com>  (96747952516f)

	* ChangeLog, configure.in, nsd/dns.c:
	Fix multithreaded DNS bugs, espescially on Darwin

	Added checking for HAVE_MTSAFE_DNS and add protective locks if not
	(Darwin)

	Added checking for HAVE_SOCKADDRIN_SIN_LEN because Darwin version of
	getnameinfo fails if sin_len has unsane values.

	Fixed bug while processing results of gethostbyname.

2005-10-15 14:57 +0100  Zoran Vasiljevic  <zv@archiware.com>  (37f59577af50)

	* configure.in:
	Added checking for sin_len in sockaddr_in

2005-10-15 14:57 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8b09333d33bc)

	* acinclude.m4:
	Removed m4 checking for structure members

2005-10-15 08:18 +0100  Zoran Vasiljevic  <zv@archiware.com>  (46bf447276c1)

	* ChangeLog, nsd/tclfile.c:
	(UnspliceChannel): disable ready-to-fire events in the event queue
	prior detachment of the channel

2005-10-11 22:19 +0100  Zoran Vasiljevic  <zv@archiware.com>  (d03ef33a4484)

	* ChangeLog, nsd/nsmain.c:
	(StartWatchedServer): clear signal handlers before re-starting the
	server

2005-10-10 14:33 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4d07f619b3b9)

	* nsd/fastpath.c:
	Fixed one Tcl_Stat() usage which was wrong

2005-10-10 14:20 +0100  Zoran Vasiljevic  <zv@archiware.com>  (bdafe6607a99)

	* nsd/adpeval.c, nsd/fastpath.c:
	Use Tcl_FSStat and Tcl_StatBuf instead of the Tcl_Stat compat
	wrapper

2005-10-10 10:32 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b0835ccd13d4)

	* ChangeLog, nsd/adpeval.c, nsd/adprequest.c, nsd/fastpath.c,
	nsd/urlopen.c:
	Remove OS/FS fallbacks, use TclVFS wrappers always for ADP

	This simplifies code and (hopefully) does not introduce any
	(perceivable) speed penalties.

2005-10-10 00:43 +0100  Stephen Deasey  <sdeasey@gmail.com>  (34860a57ddc0)

	* acinclude.m4, autogen.sh, m4/tcl.m4, missing: new file.
	* aclocal.m4, configure, include/nsconfig.h.in, tcl.m4: deleted file.
	* .cvsignore, ChangeLog, Makefile, acinclude.m4, aclocal.m4,
	autogen.sh, configure, configure.in, include/.cvsignore,
	include/nsconfig.h.in, m4/tcl.m4, missing, tcl.m4:
	Various build fixes and additions to remove generated scripts from
	CVS control

	* Makefile:
	* autogen.sh: New script to run the various autotools to generate the
	build system.

	* missing: Add this default automake helper script.
	* configure.in: Initialise automake, even though we don't use it, so
	that we can use aclocal to manage our m4 scripts.

	* aclocal.m4:
	* acinclude.m4: Contents of aclocal.m4 now moved to acinclude.m4.
	aclocal.m4 is now autogenerated by the aclocal tool, called from
	within autogen.

	* configure:
	* include/nsconfig.h.in: Remove autogenerated scripts from cvs. New
	strategy is to call autogen.sh on first checkout to intialise the
	build environment.

	* tcl.m4:
	* m4/tcl.m4: Move into m4 subdirectory. Upgrade to revision 1.74 from
	Tcl cvs. Fully quote macro names (needs to go upstream).

	* .cvsignore:
	* include/.cvsignore: Ignore some new autogenerated build scripts, and
	some old ones we no longer keep in cvs.

2005-10-09 23:27 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f6af29cbe4fb)

	* ChangeLog, nsd/init.tcl, nsd/modload.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/server.c, nsd/tclcallbacks.c, nsd/tclcmds.c, nsd/tclmisc.c:
	(ns_moduleload): new command to load a binary module; add
	ns_atprestartup

	* nsd/nsd.h:
	* nsd/modload.c:
	* nsd/nsmain.c:
	* nsd/server.c:
	* nsd/init.tcl: Add new Tcl command ns_moduleload which loads a binary
	module into the server and calls it's initialising function. Remove
	NsLoadModules and instead call ns_moduleload from the init.tcl
	bootstrap. Policy about where modules are located and when they are
	loaded is now easily accessible to Tcl.

	* nsd/tclcallbacks.c:
	* nsd/tclmisc.c:
	* nsd/tclcmds.c: Add new command ns_atprestartup as a simple wrapper
	for the C equivalent. Add new command ns_runonce which ensures that
	the given script is run only once, either globally or per virtual
	server, during the lifetime of the server process. This simplifies
	initialization.

2005-10-09 23:14 +0100  Stephen Deasey  <sdeasey@gmail.com>  (fc1bd48c3623)

	* ChangeLog, include/ns.h, include/nsthread.h, nsd/modload.c:
	MIN and MAX are defined after all, in sys/param.h; don't delete
	interp, de-allocate

2005-10-09 07:09 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c680688ec3fc)

	* ChangeLog, nsd/rollfile.c, nsd/tclimg.c:
	Quiten some compiler complaints

	* nsd/rollfile.c (Ns_PurgeFiles): Quiet compiler complaints about an
	uninitialized variable, which was fine. Add missing error return
	statement.

	* nsd/tclimg.c (NsTclGifSizeObjCmd): Clarify signedness of character
	comparisons to quiten compiler.

2005-10-09 06:41 +0100  Stephen Deasey  <sdeasey@gmail.com>  (aa4113ff16bd)

	* ChangeLog, nsd/modload.c:
	(Ns_ModuleLoad): Quiet compiler complaints about pointer aliasing;
	allocate interp from per-thread cache

2005-10-09 05:42 +0100  Stephen Deasey  <sdeasey@gmail.com>  (42c72814ae69)

	* ChangeLog, include/ns.h, nsd/config.c, nsd/driver.c:
	Add definition of MIN and MAX macros used by fastpath.c if not
	already defined, which aren't standard on e.g. Linux

	Convert config.c and driver.c to use this common definition.

2005-10-09 05:39 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6627d2259561)

	* ChangeLog, include/.cvsignore:
	Ignore generated nsconfig.h

2005-10-08 23:03 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3d014d231b09)

	* nsd/dns.c:
	Fixed GetHost to compile in Linux

2005-10-08 17:37 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c3d0a035a98d)

	* nsd/nsmain.c:
	Tightened check on process existence in WaitSIGALRMHandler

2005-10-08 17:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0287fc09afe8)

	* ChangeLog, nsd/nsmain.c:
	Add alarm of 300 seconds for the watchdog on Darwin

	When the alarm triggers, the watchdog re-checks the existence of the
	server process (by sending kill 0) and clears nsconf-pid value if
	the process is gone. This is the signal to re-start the server
	again.

	All this mess is needed because under some strange circumstances,
	the WaitForServer() never returns although the server process is
	already gone.

	This smells of a broken signal delivery to me...

2005-10-08 13:06 +0100  Zoran Vasiljevic  <zv@archiware.com>  (501778726750)

	* ChangeLog, include/ns.h, include/nscheck.h, nsd/adpeval.c,
	nsd/adprequest.c, nsd/binder.c, nsd/config.c, nsd/conn.c,
	nsd/driver.c, nsd/fastpath.c, nsd/init.c, nsd/log.c, nsd/modload.c,
	nsd/nsconf.c, nsd/nsmain.c, nsd/pidfile.c, nsd/rollfile.c,
	nsd/tclcmds.c, nsd/tclfile.c, nsd/tclimg.c, nsd/urlopen.c,
	tcl/compat.tcl, tests/http_byteranges.test:
	Use (where possible) Tcl_FS wrappers when handling files on the
	filesystem

	Exceptions are: temp files and logs.

	Special cases are in fastpath.c, adpeval.c, adprequest.c and
	urlopen.c where the native call is performed first, and if failed,
	the Tcl companion is tried next. This way the simple but effective
	VFS fallback is assured.

2005-10-08 10:31 +0100  Zoran Vasiljevic  <zv@archiware.com>  (468ac107698f)

	* ChangeLog, tests/ns_hostbyaddr.test:
	Resolving 0.0.0.0 on Darwin always succeeds hence this test is
	constrainted on "nonDarwin"

2005-10-08 10:27 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4dac24044fad)

	* ChangeLog, configure:
	Regenerated configure

2005-10-08 10:27 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0ee84069cfef)

	* configure.in:
	Emit warning for Darwin builds about MT-unsafeness of DNS calls
	(getnameinfo, getaddrinfo)

2005-10-08 10:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (5c5e67d940f0)

	* nsd/dns.c:
	Add critical sections in GetHost/GetAddr when using
	getnameinfo/getaddrinfo on Darwin

	Also, in GetHost(), explicitly initialize the struct sockaddr_in
	sin_len element because this is needed for the Darwin getnameinfo
	implementation.

2005-10-05 21:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ff3157a911ba)

	* nsd/dns.c:
	Fixed typo in GetAddr using non-mt-safe gethostnbyname

2005-10-05 10:40 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0c99579aef0d)

	* ChangeLog, nslog/nslog.c:
	LogObjCmd rewritten with Tcl_Obj interface and using TclVFS wrappers
	for handling files; proper locking when accessing the Log structure
	elements in the LogObjCmd

	Untabified, reformatted, improved comments.

2005-10-02 23:39 +0100  Stephen Deasey  <sdeasey@gmail.com>  (94ce926fcf8c)

	* nsd/nsconf.h: deleted file.
	* ChangeLog, nsd/driver.c, nsd/log.c, nsd/nsconf.c, nsd/nsconf.h,
	nsd/nsd.h, nsd/queue.c, nsd/server.c:
	Remove NsParam* wrapper macros, directly using Ns_Config* is clearer
	(and grep-able)

	* nsd/server.c:
	* nsd/nsconf.c:
	* nsd/queue.c: Use new Ns_Config* routines which handle defaults and
	range checking. Note: config file values which are less than the
	lower bound of a range are rounded up and not converted to the
	default value, as before.

	* nsd/driver.c: Some config defaults have changed.
	* nsd/nsconf.h: Removed. Incroporated default values directly into
	code.

2005-10-02 23:23 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6929412ad3e1)

	* ChangeLog, include/ns.h, nsd/adpeval.c, nsd/adprequest.c,
	nsd/connio.c, nsd/encoding.c, nsd/fastpath.c, nsd/form.c,
	nsd/mimetypes.c, nsd/nsd.h, nsd/nswin32.c, nsd/op.c, nsd/request.c,
	nsd/return.c, nsd/rollfile.c, nsd/str.c, nsd/tclrequest.c,
	nsd/unix.c, nsd/url.c, nsd/urlspace.c:
	Untabify, reformat, add CONST declarations and GNUC attributes

2005-10-02 06:27 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a44fc031fdab)

	* ChangeLog, nsd/adprequest.c, nsd/op.c, nsd/return.c, nsd/urlspace.c:
	Untabify and reformat

2005-10-01 20:50 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3ab7acf89ffe)

	* .cvsignore, include/.cvsignore, nsd/.cvsignore, nsthread/.cvsignore:
	new file.
	* .cvsignore, ChangeLog, include/.cvsignore, nsd/.cvsignore,
	nsthread/.cvsignore:
	Tell cvs about files which it should ignore

2005-08-19 10:01 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f6d7189d5eba)

	* ChangeLog, nsd/dns.c:
	Don't log host/address not found error messages; these aren't really
	errors

2005-08-19 09:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (070a610313fe)

	* ChangeLog, nsd/fastpath.c, nsd/nsmain.c, nsd/pathname.c, nsd/str.c:
	Make sure ctype functions are always passed an unsigned char

2005-08-19 08:50 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8f7ef81b02cd)

	* ChangeLog, include/ns.h, nsd/str.c:
	(Ns_StrToInt): Convenience function for parsing integers

	atoi is not always threadsafe (e.g. Darwin) and makes it impossible
	to handle errors, strtol makes it difficult.

2005-08-19 06:49 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0c7677c531f7)

	* ChangeLog, include/ns.h, nsd/str.c:
	Untabify and add attributes

2005-08-04 23:17 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (390b04fe9358)

	* ChangeLog, nsd/log.c, nsd/nsd.h:
	Finish log localization by removing usage of the global nsconf.log
	structure

2005-08-04 22:58 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (31a846dbf064)

	* nsd/tclset.c:
	Tcl API changed back for non-default functions to check number of
	arguments

2005-08-04 22:54 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ac4f4bbb63af)

	* ChangeLog, include/ns.h, nsd/set.c, nsd/tclset.c:
	Add Ns_SetGetValue|Ns_SetIGetValue wrappers which handle defaults

2005-08-04 06:29 +0100  Stephen Deasey  <sdeasey@gmail.com>  (83b76c3eb913)

	* tests/ns_log.test: new file.
	* ChangeLog, nsd/log.c, nsd/nsconf.c, nsd/nsconf.h, nsd/nsd.h,
	tests/all.tcl, tests/ns_log.test:
	Use efficient table lookups to convert from severity strings to
	severity levels and back

	Localize global log configuration into log.c.

	* tests/ns_log.test: Add some simple tests for the ns_log and
	ns_logctl commands.

	* tests/all.tcl: tcltest does not actually get confused by log
	messages...

2005-08-04 05:52 +0100  Stephen Deasey  <sdeasey@gmail.com>  (2f3ae8f80dc7)

	* ChangeLog, include/ns.h, nsd/config.c, nsd/nsd.h:
	Add config value wrappers which handle defaults and in the case of
	integer values, range checking

2005-08-02 05:59 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a047517f488c)

	* ChangeLog, nsd/driver.c:
	Log a warning when no drivers are configured to listen (bug
	#1231853)

	Driver errors during startup continue to be a non-fatal error.

2005-08-02 04:51 +0100  Stephen Deasey  <sdeasey@gmail.com>  (cc8af34950c0)

	* ChangeLog, include/ns.h, nsd/log.c, nsd/unix.c:
	Send panic messages to the server log; add some CONST declarations
	and GCC attributes

	Call Tcl Panic directly from fatal signal handler. Remove unneeded
	call to pthread_kill_other_threads_np.

2005-08-02 02:45 +0100  Stephen Deasey  <sdeasey@gmail.com>  (80ac8477b96a)

	* ChangeLog, include/ns.h, nsd/dsprintf.c, nsd/dstring.c:
	Untabify, reformat and add CONST declarations

2005-08-02 01:29 +0100  Stephen Deasey  <sdeasey@gmail.com>  (9db3226617d3)

	* nsd/log.c:
	Untabify, reformat and touch up comments

2005-08-01 21:39 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (3de0a80ffebf)

	* ChangeLog, include/ns.h:
	Fix bug preventing sockcallbacks to be used

	NS_SOCK_ANY should be 0xff otherwise callback is removed from the
	queue.

2005-08-01 17:22 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (84ed0ec860cb)

	* ChangeLog, include/ns.h, nsd/adprequest.c, nsd/conn.c, nsd/nsd.h,
	nsd/queue.c, nsd/return.c, tests/http_chunked.test,
	tests/testserver/pages/http_chunked.adp:
	Add 'ns_conn responseversion' and Ns_ConnResponseVersion

	Add ns_conn responseversion to manually set response protocol and
	version to have full control about returned HTTP format.

	For C API 2 functiosn are added: Ns_ConnResponseVersion and
	Ns_ConnSetResponseVersion. Added responseVersion char* pointer to
	Conn structure. To enable response version tests ns_httptest needs
	to be changed to return response protocol/version.

	* nsd/adprequest.c:
	* tests/http_chunked.test:
	* tests/testserver/pages/http_chunked.adp: detects now whether client
	is HTTP/1.1 and therefore handles chunked encoding.

2005-07-30 10:08 +0100  Stephen Deasey  <sdeasey@gmail.com>  (26b59f803abc)

	* ChangeLog, include/ns.h:
	Untabify and reformat some definitions; remove unused/unneeded
	NS_AOLSERVER_3_PLUS, NS_SHUTDOWN, NS_REGISTER_SERVER_TRACE

2005-07-30 05:27 +0100  Stephen Deasey  <sdeasey@gmail.com>  (de3bdfc0f138)

	* ChangeLog, nslog/nslog.c:
	Fix use of ex-compat macro Ns_ConfigGet

2005-07-30 05:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6a0ef9676519)

	* ChangeLog, include/nsthread.h, nsthread/memory.c:
	Ensure callers of ns_realloc check the rerturn value; use ckalloc
	etc. macros consistently for debugging

2005-07-30 05:06 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7b4bf50571db)

	* nsthread/compat.c: deleted file.
	* ChangeLog, include/ns.h, include/nsthread.h, nscgi/nscgi.c,
	nsd/tclfile.c, nsd/tclthread.c, nsthread/Makefile,
	nsthread/compat.c:
	Remove a bunch of truly ancient compatibility macros and functions

2005-07-30 04:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0bfdf4aef53d)

	* ChangeLog, nsd/init.tcl, nsd/tclcmds.c, nsd/tclinit.c:
	Remove ns_markfordelete and roll into ns_ictl as ns_ictl
	markfordelete

2005-07-30 04:17 +0100  Stephen Deasey  <sdeasey@gmail.com>  (bd18d6d5ccce)

	* ChangeLog, include/ns.h, nsd/nsd.h, nsd/server.c, nsd/tclinit.c,
	nsd/tclmisc.c:
	Add Ns_TclLogErrorInfo and allow admin to configure which conenction
	headers to log for Tcl errors (rfe #1241432)

2005-07-30 04:10 +0100  Stephen Deasey  <sdeasey@gmail.com>  (52647e784c8d)

	* ChangeLog, nsd/nsd.h, nsd/nsmain.c, nsd/tclinit.c:
	Allocate interps efficiently, max 1 per-thread per-server (rfe
	#1241351)

2005-07-22 07:46 +0100  Stephen Deasey  <sdeasey@gmail.com>  (4de1d4579089)

	* ChangeLog, include/ns.h, nsd/modload.c, nsd/nsd.h:
	Untabify and reformat; add CONST declarations

2005-07-22 07:41 +0100  Stephen Deasey  <sdeasey@gmail.com>  (b7252a1a180a)

	* ChangeLog, include/ns.h, nsd/config.c, nsd/nsd.h:
	Untabify and reformat; add CONST declarations

2005-07-21 11:43 +0100  Stephen Deasey  <sdeasey@gmail.com>  (69b090da166e)

	* tests/http_chunked.test, tests/testserver/pages/http_chunked.adp:
	new file.
	* tests/ns_adp_chunked.test,
	tests/testserver/pages/ns_adp_chunked.adp,
	tests/testserver/pages/ns_tcl_chunked.tcl: deleted file.
	* ChangeLog, tests/http_chunked.test, tests/ns_adp_chunked.test,
	tests/testserver/pages/http_chunked.adp,
	tests/testserver/pages/ns_adp_chunked.adp,
	tests/testserver/pages/ns_tcl_chunked.tcl:
	Cleanup chunk testing; add some more tests

	* tests/ns_adp_chunked.test:
	* tests/http_chunked.test: Rename tests which handle both Tcl and ADP.
	Add some more tests which highlight a few bugs.

	* tests/testserver/pages/ns_adp_chunked.tcl:
	* tests/testserver/pages/http_chunked.adp: Rename file. Handle
	streaming and non-streaming situations, and actually write out the
	data in two goes. Add a workaround for a bug in the ns_conn chunked
	switch: detect whether client is HTTP/1.1 and therefore handles
	chunked encoding. This needs to disappear altogether.

	* tests/testserver/pages/ns_tcl_chunked.tcl: Incorporate code
	directly into test file using ns_register_proc.

2005-07-20 06:31 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0121cdbccd54)

	* ChangeLog, Makefile:
	Add gdbruntest target to run a naviserver command shell under gdb

2005-07-13 02:04 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (c104d4ed1e4a)

	* ChangeLog, NEWS:
	Updated NEWS with latest features and changes

2005-07-12 17:00 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (1305819b8af0)

	* ChangeLog, include/ns.h, nsd/driver.c, nsd/nsd.h:
	Spool large uploaded content to temp file; 'maxsize' config controls
	threshold

2005-07-12 12:19 +0100  Stephen Deasey  <sdeasey@gmail.com>  (81e686ef81fc)

	* ChangeLog, nsd/adprequest.c, nsd/nsd.h, nsd/proc.c, nsd/server.c,
	nsd/tclrequest.c:
	Fix confusion around the default adp request handler and
	ns_register_adp; add the missing proc callback info

	ns_info requestprocs now gets things right. ns_register_adp will
	also now register the default adp request handler if you don't
	specify an optional file to map.

2005-07-12 09:26 +0100  Stephen Deasey  <sdeasey@gmail.com>  (d4e8310e0e55)

	* nsd/tcltime.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/tclmisc.c, nsd/tclobj.c,
	nsd/tcltime.c:
	Consolidate Tcl time functions and object type into one place

2005-07-12 08:31 +0100  Stephen Deasey  <sdeasey@gmail.com>  (62190f80c431)

	* nsd/tclatclose.c: deleted file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/adprequest.c,
	nsd/connio.c, nsd/nsd.h, nsd/nsmain.c, nsd/proc.c, nsd/queue.c,
	nsd/tclatclose.c, nsd/tclcmds.c, nsd/tclinit.c, nsd/tclmisc.c,
	nsd/tclset.c, nsd/tclshare.c, nsd/tclthread.c, nsdb/db.h,
	nsdb/dbtcl.c, nsdb/nsdb.c, nslog/nslog.c, nsperm/nsperm.c:
	Add generalised interp tracing mechanism which replaces
	Ns_TclInitInterps

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/nsmain.c:
	* nsd/queue.c:
	* nsd/tclcmds.c:
	* nsd/proc.c:
	* nsd/tclinit.c: Add generalised interp tracing mechanism which
	replaces Ns_TclInitInterps, Ns_TclRegisterDeferred etc. Restructured
	code for clarity.

	* nsd/tclset.c:
	* nsd/tclshare.c:
	* nsd/tclthread.c:
	* nsd/adprequest.c: s/NsGetInterp/NsGetInterpData/g

	* nsd/Makefile:
	* nsd/connio.c:
	* nsd/tclatclose.c: Moved at-close traces into tclinit.c.

	* nsd/tclmisc.c: Move Ns_TclPrintfResult into misc.

	* nsdb/db.h:
	* nsdb/nsdb.h:
	* nslog/nslog.c:
	* nsperm/nsperm.c: Remove usage of deprecated functions.

2005-07-12 04:16 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (66f6c9b2075a)

	* tests/testserver/pages/ns_tcl_chunked.tcl: new file.
	* ChangeLog, tests/ns_adp_chunked.test,
	tests/testserver/pages/ns_tcl_chunked.tcl:
	Add tests for chunked encoding from adp files

2005-07-12 04:16 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (bbd1800995a4)

	* tests/ns_adp_chunked.test,
	tests/servers/server1/pages/ns_adp_chunked.adp,
	tests/testserver/pages/ns_adp_chunked.adp: new file.
	* ChangeLog, include/ns.h, nsd/conn.c, nsd/connio.c, nsd/return.c,
	tests/ns_adp_chunked.test,
	tests/servers/server1/pages/ns_adp_chunked.adp,
	tests/testserver/pages/ns_adp_chunked.adp:
	Refactor chunked support to use Ns_ConnClose to send last zero chunk

	This makes chunked support universal and can be used in ADP as well.

2005-07-10 08:27 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (66198511d019)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/connio.c, nsd/fastpath.c,
	nsd/return.c:
	Support chunked output encoding

	Added support for chunked encoding using conn flag NS_CONN_CHUNKED.

	Once set, output routines (Ns_ConnReturnOpenFd|File|Channel and
	Ns_ReturnData) will perform chunked encoding automatically instead
	of raw data output.

	From Tcl, ns_conn chunked command is available and if called with
	third parameter 0 or 1 can set/unset conn flag.

2005-07-08 19:18 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (69c9a03e1ca0)

	* ChangeLog, include/ns.h, nsd/connio.c, nsd/fastpath.c,
	tests/test.nscfg:
	Small bufgfix for non-mmap mode

2005-07-08 17:24 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (ca0d5a803294)

	* ChangeLog, nsd/fastpath.c, tests/http_byteranges.test:
	Use iovec buffers from stack, size is not that big and memory
	fragmentation will cost more

2005-07-08 16:38 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (65bbabb0f0d5)

	* ChangeLog, nsd/fastpath.c, nsd/nsd.h, tests/http_byteranges.test:
	Implement full byte-range support, including if-range and multiple-
	ranges

2005-07-07 04:31 +0100  Stephen Deasey  <sdeasey@gmail.com>  (309808a5ebfe)

	* ChangeLog, nsd/tclinit.c, nsthread/tls.c:
	Moved call to Tcl_FinalizeThread to end of TLS cleanup to better
	catch any cases of Tcl being used outside expected interfaces

2005-07-07 02:29 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a2b277bcc75d)

	* ChangeLog, nsd/tclcmds.c:
	Alphabetize list of Tcl commands

2005-07-06 10:15 +0100  Stephen Deasey  <sdeasey@gmail.com>  (9add65c46a41)

	* ChangeLog, nsd/return.c:
	Clean up some string buffer usage

2005-07-06 09:45 +0100  Stephen Deasey  <sdeasey@gmail.com>  (2887546dfc10)

	* ChangeLog, include/ns.h, nsd/binder.c, nsd/driver.c:
	Add backlog arg to Ns_SockListenUnix()

2005-07-06 09:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (56bf568a21f2)

	* ChangeLog, nsd/binder.c, nsd/driver.c:
	Localize Windows ifdefs as much as possible

2005-07-06 08:12 +0100  Stephen Deasey  <sdeasey@gmail.com>  (853e936aab46)

	* ChangeLog, nsd/connio.c, nsd/driver.c, nsd/nsconf.c, nsd/nsconf.h,
	nsd/nsd.h, nsd/queue.c, nsd/return.c, nsd/server.c:
	Cleanup config defaults handling; some per-server limits made per-
	driver

2005-07-06 01:47 +0100  Stephen Deasey  <sdeasey@gmail.com>  (fe72d25fe429)

	* ChangeLog, NEWS, nsd/fastpath.c, tests/http_byteranges.test:
	Add back preliminary support for HTTP range requests

2005-07-06 01:37 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8b6e2ceec2e3)

	* ChangeLog, configure, configure.in:
	Update version to 4.99.1 and regenerate configure script

2005-07-06 01:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c5f3c9a3727e)

	* .hgtags:
	Tag naviserver-4.99.0

2005-07-06 01:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8df31985e171 [naviserver-4.99.0])

	* ChangeLog:
	TAG naviserver-4.99.0-release

2005-07-06 00:49 +0100  Stephen Deasey  <sdeasey@gmail.com>  (2bb1d9d015f1)

	* ChangeLog, Makefile:
	Add DOAP file to list of files to be included in release tarball

2005-07-06 00:36 +0100  Stephen Deasey  <sdeasey@gmail.com>  (46a6f6922cb5)

	* ChangeLog, nsd/fastpath.c, tests/http_byteranges.test:
	Temporarily remove in-progress support for HTTP Range requests

2005-07-06 00:18 +0100  Stephen Deasey  <sdeasey@gmail.com>  (775e832b6292)

	* ChangeLog, NEWS:
	Mention new Ns_ConnPrintfHeaders() function

2005-07-06 00:14 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3e75e6abd2dc)

	* ChangeLog, NEWS:
	Add release date and remove reference to byte ranges

2005-07-06 00:07 +0100  Stephen Deasey  <sdeasey@gmail.com>  (34eab1db9ee3)

	* ChangeLog, include/nscheck.h:
	Microsoft's feeble compiler can't handle macro varargs, new usage
	is: NS_GNUC_NONNULL((x, y, z))

2005-07-06 00:02 +0100  Stephen Deasey  <sdeasey@gmail.com>  (70fb51612d64)

	* ChangeLog, naviserver.rdf:
	Add license and category information to DOAP file and fix default
	namespace so it validates

2005-07-03 17:15 +0100  Bernd Eidenschink  <eidenschink@web.de>  (48c5399e3f59)

	* naviserver.rdf: new file.
	* naviserver.rdf:
	Added a Description-of-a-Project (DOAP) file for NaviServer in
	XML/RDF notation

2005-07-01 00:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a7bb9959c851)

	* ChangeLog, nsd/cookies.c:
	No longer check whether the response headers have already been sent
	for Tcl commands

	The check was broken and not useful.

2005-06-30 08:57 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4ea1b259b17e)

	* ChangeLog, nsd/conn.c:
	(ns_startcontent): fix crash bug when no connection (bug #1230179)

2005-06-30 02:14 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d748c41c7f48)

	* ChangeLog, nsd/fastpath.c:
	Support multiple ranges

2005-06-30 00:27 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (508e708b0734)

	* ChangeLog, nsd/fastpath.c:
	Fix failing byte-range tests

2005-06-29 23:27 +0100  Stephen Deasey  <sdeasey@gmail.com>  (84e96cec8594)

	* ChangeLog, tests/http_byteranges.test:
	Use the 'knownBug' test constraint to dissable multiple-range tests

	Use the 'knownBug' test constraint to dissable multiple-range tests
	so that they are counted in the 'Skipped' column of the test results
	and are not forgottena about.

	Added a new, temporary test for multiple ranges to ensure that
	multiple-range requests are ignored, not half fulfilled.

	Re-added test 2.3 which tests multiple, overlapping ranges (non
	canonical in RFC speak); dissabled as a 'knownBug'.

	Reverted tests 3.1 and 3.2 which check syntactically invalid
	requests are ignored by the server. An end byte before the start
	byte is never going to work and so is a syntactic error, not an
	unsatisfiable request.

	Renamed tests byteranges- from http-.

2005-06-29 16:53 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (85011bf47e27)

	* ChangeLog, nsd/fastpath.c, tests/http_byteranges.test:
	Disable multiple ranges test, this can be added in the future

2005-06-29 04:45 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (32ac7b29b7c7)

	* ChangeLog, NEWS, include/ns.h, nsd/fastpath.c, nsd/return.c,
	tests/http_byteranges.test:
	Add missing ChangeLog entries

2005-06-29 02:56 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a46276502d15)

	* tests/http_byteranges.test: new file.
	* ChangeLog, tests/http_byteranges.test:
	Test HTTP byte ranges

2005-06-28 21:15 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a886b3b83f4b)

	* ChangeLog, include/ns.h, nsd/fastpath.c, nsd/return.c:
	(Ns_ConnVSetHeaders): prtinf-style set-headers; support HTTP Range
	requests

2005-06-27 18:50 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3a211ed8fb94)

	* ChangeLog, include/nscheck.h:
	Define __GNUC_PREREQ to false if not using GCC compiler

	This will automatically disable all GCC-related optimizations.

2005-06-27 18:48 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ad8d2bf43831)

	* nsd/return.c:
	Remove unneeded Ns_ConnReturnPath(), use existing
	Ns_ConnReturnFile()

2005-06-27 18:47 +0100  Zoran Vasiljevic  <zv@archiware.com>  (2d9a87fb45e7)

	* nsd/nsmain.c:
	Improved clarity of code handling nsconf.home path rewritten for the
	Windows platform

2005-06-27 18:46 +0100  Zoran Vasiljevic  <zv@archiware.com>  (248325699900)

	* nsd/nswin32.c, nsd/tclcmds.c:
	Remove ns_failservice, use SIGINT instead; remove experimental
	ReportException

	Removed NsTclFailServiceObjCmd() and tied the processing to the
	NS_SIGINT signal as sent by the -restart option of the "ns_shutdown"
	command, hence avoiding different ways to force server restarts on
	different platforms.

	Removed experimental ReportException() call since it does not really
	seem to prevent the default handling in Windows where a Window pops
	up and the user has to confirm (such behavior prevents the service
	control manager to restart the service).

2005-06-27 17:22 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d1404d18af9e)

	* ChangeLog, nsd/tclcmds.c:
	ifdef-ed NsTclFailServiceObjCmd with WIN32 to allow nsd to be
	compiled on Unix again

2005-06-24 09:58 +0100  Ibrahim Tannir  <itannir@archiware.com>  (16ba0614075f)

	* win32/naviserver.dsw, win32/naviserver.sln: new file.
	* win32/naviserver.dsw, win32/naviserver.sln:
	Introduced naviserver projects for Visual Studios 6 & 7

2005-06-24 09:46 +0100  Ibrahim Tannir  <itannir@archiware.com>  (5112abde1274)

	* ChangeLog:
	Add missing ChangeLog entries

2005-06-24 09:45 +0100  Ibrahim Tannir  <itannir@archiware.com>  (8211efad0d72)

	* win32/cgitest/main.c:
	Removed superflous CRs at end of lines

2005-06-24 09:44 +0100  Ibrahim Tannir  <itannir@archiware.com>  (95c5b75a687b)

	* nsthread/compat.c:
	Add missing NS_EXPORTs so that the Windows DLL can get loaded

2005-06-24 09:43 +0100  Ibrahim Tannir  <itannir@archiware.com>  (aa46bfc95a0b)

	* nsd/tclcmds.c:
	Added the ns_failservice command which affects Windows only (see
	also changes in nswin32.c)

2005-06-24 09:42 +0100  Ibrahim Tannir  <itannir@archiware.com>  (2c4b3e734496)

	* nsd/return.c:
	Add Ns_ConnReturnPath to open a file and send its contents via the
	connection

2005-06-24 09:40 +0100  Ibrahim Tannir  <itannir@archiware.com>  (1b47d9a6bb18)

	* nsd/nswin32.c:
	Fake nsd-as-a-service failure on Windows in order for the Service
	Control Manager to restart it automatically

2005-06-24 09:38 +0100  Ibrahim Tannir  <itannir@archiware.com>  (58e268193090)

	* nsd/nsmain.c:
	Corrected normalizing the home path on Windows

2005-06-24 09:37 +0100  Ibrahim Tannir  <itannir@archiware.com>  (0c207cba9bac)

	* nsd/dns.c:
	Added missing header for Windows

2005-06-24 09:36 +0100  Ibrahim Tannir  <itannir@archiware.com>  (7071ce506891)

	* nsd/binder.c, nsd/driver.c:
	Excluded Unix calls from Windows code since some of the structs
	needed to compile them are missing in Windows

2005-06-24 09:35 +0100  Ibrahim Tannir  <itannir@archiware.com>  (774b9d80c5d7)

	* include/nscheck.h:
	VC for Windows cannot handle GNU preprocessor directives and macros
	(fixed)

2005-06-24 09:29 +0100  Ibrahim Tannir  <itannir@archiware.com>  (f2e878d80e2a)

	* win32/main/main.dsp, win32/nscgi/nscgi.dsp, win32/nscp/nscp.dsp,
	win32/nsd/nsd.dsp, win32/nsdb/nsdb.dsp, win32/nslog/nslog.dsp,
	win32/nsperm/nsperm.dsp, win32/nssock/nssock.dsp,
	win32/nsthread/nsthread.dsp:
	Changed projects to compile for, and link with, mutithreading and
	debug-enabled libs

	(MTd instead of MDd)

2005-06-24 09:26 +0100  Ibrahim Tannir  <itannir@archiware.com>  (1b6bb06ce16f)

	* win32/main/main.vcproj, win32/nscgi/nscgi.vcproj,
	win32/nscp/nscp.vcproj, win32/nsd/nsd.vcproj,
	win32/nsdb/nsdb.vcproj, win32/nslog/nslog.vcproj,
	win32/nsperm/nsperm.vcproj, win32/nssock/nssock.vcproj,
	win32/nsthread/nsthread.vcproj: new file.
	* win32/main/main.vcproj, win32/nscgi/nscgi.vcproj,
	win32/nscp/nscp.vcproj, win32/nsd/nsd.vcproj,
	win32/nsdb/nsdb.vcproj, win32/nslog/nslog.vcproj,
	win32/nsperm/nsperm.vcproj, win32/nssock/nssock.vcproj,
	win32/nsthread/nsthread.vcproj:
	Added Visual Studio 7 project for Windows

2005-06-24 09:07 +0100  Ibrahim Tannir  <itannir@archiware.com>  (4cf4ce49190a)

	* nsd/tclset.c:
	Changed banner from AOL to Mozilla Public License

2005-06-23 15:20 +0100  Ibrahim Tannir  <itannir@archiware.com>  (c3600f28f8ae)

	* nsd/set.c:
	Changed AOLserver to Mozilla wording in the license header

2005-06-19 17:37 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (058796667a6f)

	* ChangeLog, nsd/connio.c:
	Fix bad return code for Ns_ConnReadLine

2005-06-19 17:31 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (cb178463d9ac)

	* ChangeLog, nsd/driver.c, nsd/nsd.h, sample-config.tcl:
	Add maxline parameter for checking request line size (default 4k)

2005-06-18 02:03 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0620e11ead46)

	* tests/harness.tcl: deleted file.
	* ChangeLog, tests/harness.tcl, tests/ns_urlencode.test:
	Use Tcl style tests and remove old harness

2005-06-17 20:56 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (444735341a61)

	* ChangeLog, sample-config.tcl:
	Add maxinput and bufsize parameters for nsssock section of sample-
	config.tcl

2005-06-16 20:42 +0100  Zoran Vasiljevic  <zv@archiware.com>  (6ad49cd1bb0b)

	* nsd/driver.c, nsd/server.c:
	Reformatted, untabified and adjusted to match style code

2005-06-16 19:31 +0100  Zoran Vasiljevic  <zv@archiware.com>  (e587e1b424e2)

	* ChangeLog, nsd/driver.c, nsd/nsd.h, nsd/server.c:
	Remove the "maxpost" configuration option (rfe #1222107)

2005-06-15 05:14 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (80ce6cf02177)

	* ChangeLog, nsd/binder.c:
	Add missing listen call to Ns_SockListenUnix function

2005-06-14 19:13 +0100  Zoran Vasiljevic  <zv@archiware.com>  (9e1348884bea)

	* ChangeLog, nsd/adpeval.c:
	Reformat to NaviServer coding style (no functional changes)

2005-06-13 11:17 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a5b5487b9b01)

	* ChangeLog, nsd/nswin32.c:
	Added (untested) implementation of NsMemMap() and NsMemUmap()

2005-06-13 09:50 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c7c46ecee640)

	* ChangeLog, nsd/compress.c:
	(Ns_CompressGzip): add missing const qualifier when --without-zlib
	used

2005-06-13 07:14 +0100  Stephen Deasey  <sdeasey@gmail.com>  (638bbc5e0cbc)

	* ChangeLog, include/ns.h, nscp/nscp.c, nsd/adpparse.c,
	nsd/compress.c, nsd/listen.c, nsd/sock.c, nsd/tclimg.c,
	nsd/tclmisc.c, nsd/tclresp.c, nsd/uuencode.c, tests/tclresp.test:
	Fix compiler warnings: signed/unsigned confusion, uninitialsed
	variables

2005-06-13 05:32 +0100  Stephen Deasey  <sdeasey@gmail.com>  (731f6aa7e112)

	* ChangeLog, nsd/tclobjv.c:
	Simplify code and clarify comment

2005-06-13 02:58 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0c19a9927bd4)

	* ChangeLog, nscgi/nscgi.c:
	Don't use deprecated functions

2005-06-13 02:55 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7beb7ad0ac95)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/driver.c, nsd/nsd.h,
	nsd/pathname.c, nsd/server.c, nsd/str.c:
	Add Ns_StrIsHost and use it to check host header for virt server
	path construction

	* nsd/str.c: Add new function Ns_StrIsHost.

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/driver.c: Save the protocol separate from the location in the
	driver structure and ensure the location always begins with a
	"protocol://" string.

	* nsd/server.c:
	* nsd/conn.c:
	* nsd/pathname.c: Simplify code by using protocol direct from driver
	structure and checking Host header with Ns_StrIsHost.

2005-06-13 02:47 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c045b244c44f)

	* ChangeLog, nsd/tclsock.c:
	Remove unused static function SockSetBlocking

2005-06-12 15:42 +0100  Zoran Vasiljevic  <zv@archiware.com>  (aaff7df22e1b)

	* ChangeLog, nsd/conn.c, nsd/info.c, nsd/log.c, nsd/queue.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclthread.c, nsd/tclvar.c,
	nsthread/nsthreadtest.c:
	Silence "dereferencing type-punned pointer will break strict-
	aliasing rules" types of warnings

2005-06-11 21:04 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (46cfc1eeaf5b)

	* ChangeLog, nsd/return.c:
	Got rid of another compiler warning

2005-06-11 21:00 +0100  Stephen Deasey  <sdeasey@gmail.com>  (8929a34a0908)

	* ChangeLog, include/ns.h, include/nscheck.h, nsd/urlspace.c,
	nslog/nslog.c:
	Add and use new attribute NS_GNUC_SENTINEL; say NULL rather than 0
	when talking about null pointers

	* include/nscheck: Add new attribute NS_GNUC_SENTINEL which ensures
	that a NULL is passed as the last arg to a varargs function. Also,
	make sure that the format arg in a printf-like function is non-NULL.

	* include/ns.h: Markup up with NS_GNUC_SENTINEL.

	* nsd/urlspace.c:
	* nsd/nslog.c: Say NULL rather than 0 when talking about null
	pointers.

2005-06-11 19:40 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ca656ffd7d82)

	* ChangeLog, nsd/fastpath.c, nsd/nsd.h, nsd/nswin32.c, nsd/unix.c:
	Added wrappers for mem-mapping files in a platform-neutral way

	The implementation maps read or write and files are mapped as
	shared. The unix part is implemented. The Windows is still no-op.

2005-06-11 18:17 +0100  Zoran Vasiljevic  <zv@archiware.com>  (e915f529af67)

	* nsd/nsd.h:
	First pass: untabified and formatted so that it can be read by
	normal humans; no functional changes

2005-06-11 16:53 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ee89f137cd25)

	* nsd/fastpath.c:
	First pass: reformatted and untabified

2005-06-11 11:00 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4824794e662a)

	* ChangeLog, nsd/driver.c, nsd/exec.c, nsd/nsmain.c:
	Fixed various log calls with wrong number or wrong types of
	arguments

2005-06-10 22:52 +0100  Stephen Deasey  <sdeasey@gmail.com>  (0578db728843)

	* include/nsconfig.h.in: new file.
	* include/config.h.in: deleted file.
	* ChangeLog, configure, configure.in, include/config.h.in,
	include/nsconfig.h.in, include/nsthread.h:
	Rename config.h nsconfig.h to prevent clashes wth module/library
	config.h files; rebuild configure

2005-06-10 21:53 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5a937d2871f9)

	* ChangeLog, include/ns.h, include/nsthread.h, nsd/conn.c, nsd/nsd.h,
	nsd/pathname.c, nsd/rollfile.c, nsd/server.c, nsd/set.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclsock.c, nslog/nslog.c,
	nsthread/mutex.c:
	Use CONST declarations to silence compiler

2005-06-10 20:18 +0100  Stephen Deasey  <sdeasey@gmail.com>  (e6456c424a9d)

	* ChangeLog, include/ns.h, include/nsthread.h:
	Add a variety of NS_GNUC_* annotations

2005-06-10 18:58 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6ad726edd9b3)

	* ChangeLog, nscgi/nscgi.c, nscp/nscp.c, nsd/adpcmds.c, nsd/adpeval.c,
	nsd/adpparse.c, nsd/adprequest.c, nsd/auth.c, nsd/binder.c,
	nsd/cache.c, nsd/callbacks.c, nsd/cls.c, nsd/compress.c,
	nsd/config.c, nsd/conn.c, nsd/connio.c, nsd/cookies.c, nsd/crypt.c,
	nsd/dns.c, nsd/driver.c, nsd/dsprintf.c, nsd/dstring.c,
	nsd/encoding.c, nsd/exec.c, nsd/fastpath.c, nsd/fd.c, nsd/filter.c,
	nsd/form.c, nsd/httptime.c, nsd/index.c, nsd/info.c, nsd/init.c,
	nsd/lisp.c, nsd/listen.c, nsd/log.c, nsd/main.c, nsd/mimetypes.c,
	nsd/modload.c, nsd/nsconf.c, nsd/nsmain.c, nsd/nsthread.c,
	nsd/nswin32.c, nsd/op.c, nsd/pathname.c, nsd/pidfile.c, nsd/proc.c,
	nsd/queue.c, nsd/quotehtml.c, nsd/random.c, nsd/request.c,
	nsd/return.c, nsd/rollfile.c, nsd/sched.c, nsd/server.c, nsd/set.c,
	nsd/sock.c, nsd/sockcallback.c, nsd/str.c, nsd/tclatclose.c,
	nsd/tclcallbacks.c, nsd/tclcmds.c, nsd/tclconf.c, nsd/tclenv.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclobj.c, nsd/tclobjv.c,
	nsd/tclrequest.c, nsd/tclresp.c, nsd/tclsched.c, nsd/tclset.c,
	nsd/tclshare.c, nsd/tclsock.c, nsd/tclthread.c, nsd/tclvar.c,
	nsd/tclxkeylist.c, nsd/unix.c, nsd/url.c, nsd/urlencode.c,
	nsd/urlopen.c, nsd/urlspace.c, nsd/uuencode.c, nsdb/dbdrv.c,
	nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/dbutil.c, nsdb/nsdb.c,
	nslog/nslog.c, nsperm/nsperm.c, nssock/nssock.c, nsthread/compat.c,
	nsthread/cslock.c, nsthread/error.c, nsthread/fork.c,
	nsthread/master.c, nsthread/memory.c, nsthread/mutex.c,
	nsthread/nsthreadtest.c, nsthread/pthread.c, nsthread/reentrant.c,
	nsthread/rwlock.c, nsthread/sema.c, nsthread/signal.c,
	nsthread/thread.c, nsthread/time.c, nsthread/tls.c,
	nsthread/winthread.c:
	Use NS_RCSD() macro to quieten compiler

2005-06-10 18:23 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (6164a22c8134)

	* ChangeLog, nsd/binder.c, nsd/driver.c:
	Use Ns_PathIsAbsolute for determining valid pathname

2005-06-10 17:56 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (a065ebe12c63)

	* ChangeLog, nsd/tclcmds.c, nsd/tclresp.c, tests/tclresp.test:
	Remove ns_returnbinary; add -binary flag to ns_return

2005-06-10 15:39 +0100  Zoran Vasiljevic  <zv@archiware.com>  (4707d80f3f63)

	* ChangeLog, nsd/binder.c:
	Attempt to unify usage and call-conventions on various
	Ns_SockListenXXX and Ns_SockBindXXX

	Also, parts not needed for windows build (pre-binding) are ifdef'ed
	out.

	Still open: handling of Unix-domain sockets on Windows. It might
	compile but will definitely not work because of the address parsing
	issues (windows files do not begin with slash).

2005-06-10 15:30 +0100  Zoran Vasiljevic  <zv@archiware.com>  (180064cd8a2c)

	* include/ns.h:
	Ns_SockBindUdp(), Ns_SockBindRaw() and Ns_SockBindUnix() are now
	exported from binder.c

2005-06-10 15:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (33a125e3e5cf)

	* nsd/init.c:
	NsInitBinder is also done for Windows as for Unix

2005-06-10 15:09 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (4a3f9ddea91f)

	* ChangeLog, include/ns.h, nsd/binder.c:
	Make Ns_SockListenUnix use prebound sockets

2005-06-10 14:53 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (c8555e004df9)

	* ChangeLog, tests/tclresp.test:
	Update tests to deal with ns_respond -binary flag

2005-06-10 11:12 +0100  Zoran Vasiljevic  <zv@archiware.com>  (151d29c14817)

	* nsd/binder.c:
	First pass: reformatted and untabified

2005-06-10 08:44 +0100  Zoran Vasiljevic  <zv@archiware.com>  (34af3a7fe1e2)

	* ChangeLog:
	Add missing ChangeLog entries

2005-06-10 08:35 +0100  Stephen Deasey  <sdeasey@gmail.com>  (58e6b7073981)

	* ChangeLog, NEWS:
	Add latest news; remove news which belongs to other modules

2005-06-10 08:29 +0100  Zoran Vasiljevic  <zv@archiware.com>  (59d34b3f08f5)

	* nsd/nswin32.c:
	Add NsRestoreSignals as no-op for symetry with Unix; replaced GNU
	poll implementation

2005-06-10 08:29 +0100  Stephen Deasey  <sdeasey@gmail.com>  (67d17214f438)

	* include/nscheck.h: new file.
	* ChangeLog, include/Makefile.global.in, include/nscheck.h,
	include/nsthread.h:
	Enable Tcl CONST checking; add support for extra GCC checks (rfe
	#1215725)

2005-06-10 08:25 +0100  Zoran Vasiljevic  <zv@archiware.com>  (794774779e08)

	* nsd/nswin32.c:
	Cosmetic changes (reformatted function comments, untabified).

2005-06-10 08:03 +0100  Zoran Vasiljevic  <zv@archiware.com>  (d8d15c430dd9)

	* nsd/unix.c:
	Cosmetic cleanup (reformat some function comments, untabified)

2005-06-10 07:47 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a806dc716d72)

	* nsd/tclxkeylist.c:
	Silence some compiler warnings

2005-06-10 03:42 +0100  Stephen Deasey  <sdeasey@gmail.com>  (7b30faf37fb7)

	* ChangeLog, configure, configure.in, include/Makefile.global.in,
	include/config.h.in:
	TCL_DEFS not needed now that autoheader used; call TEA_TIME_HANDLER
	for time defs; rebuild configure

2005-06-09 22:07 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d0cdccc0f43d)

	* ChangeLog, include/Makefile.global.in:
	Add missing TCL_DEFS in the global makefile

2005-06-09 01:01 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (0cdc8de27513)

	* ChangeLog, sample-config.tcl:
	Add example of virtual hosting to sample-config.tcl

2005-06-08 21:27 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (c5e797068f44)

	* ChangeLog, include/ns.h, nsd/tclobjv.c, nsd/tclresp.c:
	Add -binary flag to ns_respond to return binary data without
	encoding conversion

2005-06-08 21:13 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (42d6e5f01770)

	* ChangeLog, nsd/tclcmds.c, nsd/tclresp.c:
	Add ns_returnbinary which returns binary data without
	conversion/encoding

2005-06-08 17:41 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (d216f0c6343a)

	* NEWS:
	Add new modules section into NEWS

2005-06-08 17:29 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ccbea27c0899)

	* ChangeLog, Makefile:
	Make sure derived files don't end up in the tarball

2005-06-08 17:14 +0100  Stephen Deasey  <sdeasey@gmail.com>  (950f12a16dad)

	* ChangeLog, NEWS:
	Add some missing RFE numbers to ChangeLog entries

2005-06-08 17:07 +0100  Stephen Deasey  <sdeasey@gmail.com>  (293e3394a409)

	* NEWS: new file.
	* ChangeLog, Makefile, NEWS:
	Add latest NEWS

2005-06-04 16:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (f59a6a877a2d)

	* ChangeLog, Makefile, configure, configure.in,
	include/Makefile.global.in:
	Add 'dist' Makefile target; rebuild configure

2005-06-04 14:33 +0100  Stephen Deasey  <sdeasey@gmail.com>  (ea858a5db5b8)

	* ChangeLog, configure, configure.in, include/config.h.in,
	include/ns.h:
	Move definition of version information from main header into
	configure script; rebuild configure

2005-06-04 14:27 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5f995fa0314a)

	* ChangeLog, Makefile:
	Also remove include/config.h on distclean

2005-06-04 12:42 +0100  Stephen Deasey  <sdeasey@gmail.com>  (591b83804920)

	* include/config.h.in: new file.
	* ChangeLog, configure, configure.in, include/Makefile.global.in,
	include/config.h.in, include/nsthread.h:
	Update configure.in to use an autoheader generated config.h.in;
	rebuild configure

2005-06-04 12:04 +0100  Stephen Deasey  <sdeasey@gmail.com>  (b6e67daf9248)

	* ChangeLog, configure, tcl.m4:
	Update to revision 1.64 of tcl.m4 from Tcl cvs; rebuild configure

2005-05-21 15:17 +0100  Zoran Vasiljevic  <zv@archiware.com>  (98ae834e01b1)

	* ChangeLog, nsd/driver.c:
	(NsStartDrivers): fix coredump when bindaddr not set (i.e. it is
	NULL)

2005-05-20 21:30 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (142aa01adc04)

	* ChangeLog, include/ns.h, nsd/driver.c:
	Support HTTP over udp/unix sockets; remove obsolete driver functions

2005-05-16 07:57 +0100  Stephen Deasey  <sdeasey@gmail.com>  (99ec98741f3d)

	* tcl.m4: new file.
	* ChangeLog, aclocal.m4, configure, configure.in,
	include/Makefile.global.in, include/Makefile.module.in, tcl.m4:
	Include tc.m4 macros and convert to Tcl TEA build system

	Add messages to all autoconf feature tests. Remove unneeded feature
	tests. Rebuild configure script using autoconf 2.59.

2005-05-16 02:25 +0100  Stephen Deasey  <sdeasey@gmail.com>  (14fc53da7721)

	* ChangeLog, include/ns.h, nscp/nscp.c, nsd/info.c, nsd/nsd.h,
	nsd/nsmain.c:
	Remove redundant Ns_InfoLabel(); use Ns_InfoTag() instead

2005-05-16 02:00 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5ba32ae58e9e)

	* ChangeLog, include/ns.h:
	Bump version to 4.99.0 alpha

2005-05-16 01:53 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a98afe4d4d9e)

	* ChangeLog, include/ns.h, nscp/nscp.c, nsd/adpeval.c, nsd/conn.c,
	nsd/driver.c, nsd/info.c, nsd/sock.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclmisc.c, nsd/tclset.c, nsd/urlopen.c, nsthread/nsthreadtest.c:
	Silence some compiler warnings

2005-05-15 08:47 +0100  Stephen Deasey  <sdeasey@gmail.com>  (61a633324fb1)

	* ChangeLog, nsd/tcljob.c, nsd/tclobjv.c, nsd/tclxkeylist.c,
	nsd/unix.c:
	Hide global symbols which shouldn't be exported

2005-05-15 08:45 +0100  Stephen Deasey  <sdeasey@gmail.com>  (95b0b24822c7)

	* ChangeLog, Makefile:
	Add new "checkexports" target which prints out a list of global
	symbols which shouldn't be

2005-05-14 11:28 +0100  Stephen Deasey  <sdeasey@gmail.com>  (fc810557a343)

	* nsdb/util.tcl: new file.
	* tcl/nsdb.tcl: deleted file.
	* ChangeLog, nsdb/Makefile, nsdb/util.tcl, tcl/nsdb.tcl:
	Move nsdb module's Tcl file into module directory and add to module
	shared Tcl install target

2005-05-14 11:24 +0100  Stephen Deasey  <sdeasey@gmail.com>  (efc6dd8f4fd6)

	* ChangeLog, nsperm/Makefile:
	Use new TCL variable to install shared Tcl files

2005-05-14 11:22 +0100  Stephen Deasey  <sdeasey@gmail.com>  (b71bb041d9c3)

	* ChangeLog, include/Makefile.module.in:
	Add new MODNAME and TCL Makefile variables which modules can use to
	specify a list of shared tcl files to install

2005-05-14 06:39 +0100  Stephen Deasey  <sdeasey@gmail.com>  (98ebecb0228a)

	* ChangeLog, nsd/init.tcl:
	(_ns_sourcemodule): module's shared tcl directory was incorrectly
	set to private directory

2005-05-11 06:54 +0100  Zoran Vasiljevic  <zv@archiware.com>  (2fdb545f3038)

	* ChangeLog, nsd/urlencode.c:
	Add URLDECODE_RELAXED so we can decode '+' to ' ' for compatibility
	with (broken) AOLserver urlencoder

	Disabled by default.

2005-05-04 13:43 +0100  Zoran Vasiljevic  <zv@archiware.com>  (1a5d550410af)

	* ChangeLog, nsd/tclmisc.c:
	Conditionally define u_int32_t and u_int8_t for Darwin builds

	Some earlier versions (6.x) have those already defined.

2005-05-04 13:34 +0100  Zoran Vasiljevic  <zv@archiware.com>  (2266f81e613d)

	* ChangeLog, nsd/unix.c:
	Modify poll() compatibility wrapper to work on Darwin 10.2 and less

	Also, heavily reformatted to be easily readable.

2005-04-30 10:22 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5926bac69a0d)

	* ChangeLog, nsd/nsmain.c:
	Don't assign chroot directory as default server name; simplify
	option parsing error messages

2005-04-30 10:15 +0100  Stephen Deasey  <sdeasey@gmail.com>  (27d8661274d3)

	* ChangeLog:
	Add missing ChangeLog entry

2005-04-27 21:54 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (cf5a35fdbdc2)

	* ChangeLog, nsd/tclmisc.c:
	(ns_uudecode): return data as Tcl binary, not string

2005-04-27 07:18 +0100  Stephen Deasey  <sdeasey@gmail.com>  (4a761e36b518)

	* nsdb/nsdb.h: new file.
	* include/nsdb.h: deleted file.
	* include/nsdb.h, nsdb/Makefile, nsdb/nsdb.h:
	Move nsdb public header file into module directory

2005-04-27 06:55 +0100  Stephen Deasey  <sdeasey@gmail.com>  (37465d69d8d5)

	* include/nsextmsg.h, include/nspd.h: deleted file.
	* ChangeLog, include/nsextmsg.h, include/nspd.h:
	Move stray headers into external modules

2005-04-27 06:30 +0100  Stephen Deasey  <sdeasey@gmail.com>  (fb4079c8caeb)

	* ChangeLog, Makefile, include/Makefile.global.in,
	include/Makefile.module.in:
	Add new module variable LIBHDRS which is the list of headers which
	should be installed for other modules to link against (e.g. nsdb.h)

2005-04-27 06:01 +0100  Stephen Deasey  <sdeasey@gmail.com>  (c249ec77b5a0)

	* ChangeLog, include/Makefile.global.in, include/Makefile.module.in:
	Reindent code for consistency prior to making changes

2005-04-27 02:58 +0100  Stephen Deasey  <sdeasey@gmail.com>  (e7c22fdcc1e2)

	* tests/testserver/pages/ns_adp_compress.adp: new file.
	* ChangeLog, tests/testserver/pages/ns_adp_compress.adp:
	Add missing file for gzip compression tests

2005-04-27 02:55 +0100  Stephen Deasey  <sdeasey@gmail.com>  (5c1cbfa54b99)

	* tests/testserver/modules/vhost.tcl: new file.
	* ChangeLog, tests/testserver/modules/vhost.tcl:
	Add supporting procs for virtual hosting tests

2005-04-27 01:20 +0100  Stephen Deasey  <sdeasey@gmail.com>  (40c4286699dc)

	* ChangeLog, nsd/tclresp.c:
	Cleanup and reformat code; clarify comments

2005-04-27 01:19 +0100  Stephen Deasey  <sdeasey@gmail.com>  (9895564f2277)

	* tests/ns_conn_host.test, tests/ns_pagepath.test,
	tests/ns_serverpath.test:
	Convert to new nstest_http command and use separate virtual hosts
	for tests

2005-04-27 01:17 +0100  Stephen Deasey  <sdeasey@gmail.com>  (420bdfb4563c)

	* tests/http.test, tests/ns_adp_compress.test, tests/tclresp.test:
	Convert to new nstest_http command for testing http responses

2005-04-27 01:13 +0100  Stephen Deasey  <sdeasey@gmail.com>  (a5a802f05e08)

	* tests/test.nscfg:
	Create separate virtual servers for virtual host tests and custom
	serverroot and conn host tests

2005-04-27 01:12 +0100  Stephen Deasey  <sdeasey@gmail.com>  (69762073a30e)

	* tests/testserver/pages/10bytes: new file.
	* tests/testserver/pages/10bytes:
	Add missing 10bytes file for tclresp.test

2005-04-27 01:11 +0100  Stephen Deasey  <sdeasey@gmail.com>  (75fb95e812c5)

	* tests/testserver/modules/testhttp.tcl: new file.
	* tests/testserver/modules/http.tcl: deleted file.
	* tests/testserver/modules/http.tcl,
	tests/testserver/modules/testhttp.tcl:
	Fix test suite module naming clash

	Rename http.tcl testhttp.tcl so that it doesn't override the standard
	tcl/http.tcl file. Command now correctly only sets default headers
	once so that e.g. the Host header can be overridden. Retrieve host
	and port to connect to from config file.

2005-04-26 16:59 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (b6c852177631)

	* ChangeLog, tcl/file.tcl:
	Add support for caching tcl bytecode if ns_cache module is loaded

2005-04-21 21:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (2288ca8b0aa1)

	* ChangeLog, nsd/httptime.c:
	Fixed non-mt-safe usage of timegm() call

2005-04-18 17:02 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b518c99ee6d5)

	* ChangeLog, nsd/conn.c:
	Removed the "ns_conn flush". The trick is done with "ns_headers" cmd

2005-04-18 14:04 +0100  Stephen Deasey  <sdeasey@gmail.com>  (6edd5eba5499)

	* tests/tclresp.test: new file.
	* ChangeLog, Makefile, nsd/nsd.h, nsd/tclcmds.c, nsd/tclresp.c,
	tests/tclresp.test:
	Remove support for connid parameter to tcl response commands (rfe
	#1156107)

2005-04-18 13:57 +0100  Stephen Deasey  <sdeasey@gmail.com>  (eb7a08628249)

	* ChangeLog, nsd/conn.c, tests/ns_conn_host.test:
	(Ns_ConnLocationAppend): prevent truncation of content already in
	dstring when location is appended

2005-04-18 13:52 +0100  Stephen Deasey  <sdeasey@gmail.com>  (2007a43aef0c)

	* tests/testserver/modules/http.tcl: new file.
	* ChangeLog, nsd/nsconf.c, tests/test.nscfg,
	tests/testserver/modules/http.tcl:
	Add helper command nstest_http for test suite; new config parameter
	ns/parameters/tcllibrary

	Tcl shared library can now be set to an arbitrary path.

2005-04-17 19:37 +0100  Bernd Eidenschink  <b.eidenschink@kinetiqa.de>  (4a5aa1929c43)

	* tests/ns_nsv.test: new file.
	* ChangeLog, tests/ns_nsv.test:
	Add nsv tests

2005-04-17 09:10 +0100  Zoran Vasiljevic  <zv@archiware.com>  (c8a8f3666773)

	* ChangeLog, nsd/conn.c:
	ns_conn status <value> will now return the previous status before
	setting the new status as it did before

2005-04-16 15:51 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3df30940fea0)

	* nsd/conn.c:
	Untabify, re-ident and cleanup (make it looks more decent than it
	was)

2005-04-16 15:05 +0100  Zoran Vasiljevic  <zv@archiware.com>  (23d4890f912a)

	* ChangeLog, nsd/conn.c:
	Add "ns_conn flush" (rfe #1184271); improve "ns_conn status"
	argument checking

2005-04-16 10:20 +0100  Zoran Vasiljevic  <zv@archiware.com>  (9abd7c001466)

	* ChangeLog, nsd/nsmain.c:
	Removed extra colon in variable declaration which caused older gcc
	compilers to break

2005-04-12 07:21 +0100  Stephen Deasey  <sdeasey@gmail.com>  (55ba1ef12f22)

	* tests/ns_conn_host.test, tests/ns_hashpath.test,
	tests/ns_pagepath.test, tests/ns_serverpath.test: new file.
	* ChangeLog, include/ns.h, nsd/conn.c, nsd/fastpath.c, nsd/info.c,
	nsd/nsd.h, nsd/pathname.c, nsd/proc.c, nsd/return.c, nsd/server.c,
	nsd/tclcmds.c, tests/ns_conn_host.test, tests/ns_hashpath.test,
	tests/ns_pagepath.test, tests/ns_serverpath.test, tests/test.nscfg:
	Add callbacks for virtual server support (rfe #1159471)

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/info.c:
	* nsd/proc.c:
	* nsd/return.c:
	* nsd/server.c:
	* nsd/fastpath.c:
	* nsd/pathname.c: New concept: server root. Callback can be registered
	to create the server root, defaults to statically assigned
	'serverroot' from config, or host-based if enabled. Many virtual
	hosting options added. (RFE #1159471)

	* nsd/conn.c: Add callback to generate current location. If none
	registered, uses host-header and falls back to driver's location.
	Add new Ns_ConnAppendLocation() as preferred method of access,
	deprecated Ns_ConnLocation().

	* nsd/tclcmds.c: Add vhost related Tcl commands: ns_serverpath
	ns_pagepath ns_hashpath ns_serverrootproc ns_locationproc.

	* ns_pagepath.test:
	* ns_conn_host.test:
	* ns_serverpath.test:
	* ns_hashpath.test:
	* tests/test.nscfg: Add tests for vhost related commands. More
	location tests needed...

2005-04-12 06:09 +0100  Stephen Deasey  <sdeasey@gmail.com>  (34bf0c6508dd)

	* ChangeLog, nsd/proc.c:
	Add proc info for NsFastGet; cleanup source code formatting

2005-04-12 04:53 +0100  Stephen Deasey  <sdeasey@gmail.com>  (b9d7918beb4f)

	* tests/ns_urlencode.test: new file.
	* ChangeLog, tests/ns_urlencode.test:
	Add missing tests for urlencode fix

2005-04-09 18:44 +0100  Stephen Deasey  <sdeasey@gmail.com>  (71116a2c243b)

	* ChangeLog, tests/ns_parseargs.test:
	Re-enable test for corrupted literal table

2005-04-09 17:35 +0100  Zoran Vasiljevic  <zv@archiware.com>  (cf0ec098863d)

	* ChangeLog, nsd/nsmain.c:
	More cleanup in arguments parsing (cosmetic nature)

2005-04-09 17:30 +0100  Zoran Vasiljevic  <zv@archiware.com>  (3e416c97fed8)

	* nsd/nsmain.c:
	Cleanup command help text and parsing of args between Win/unix

2005-04-09 15:30 +0100  Zoran Vasiljevic  <zv@archiware.com>  (a2a85252ca41)

	* ChangeLog, nsd/tclobjv.c:
	Do not wholesale invalidate string rep of the object at SetXXFromAny

	Doing this seem to corrupt the interp literal table.

2005-04-09 15:28 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b82cb0e084a7)

	* nsd/tclobj.c:
	(Ns_TclResetObjType): fix broken pointer deref

2005-04-09 10:16 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8c2d7539a5f7)

	* ChangeLog, nsd/dns.c:
	(GetAddr): fix infinite loop bug when calling gethostbyname_r

2005-04-08 20:59 +0100  Zoran Vasiljevic  <zv@archiware.com>  (21c672afee31)

	* ChangeLog, nsd/nsd.h, nsd/unix.c:
	Add non-gnu implementation of poll() for compatibility (Darwin 8.0
	a.k.a. macOS 10.3)

2005-04-04 03:39 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (54cc654a7ff2)

	* ChangeLog, nsd/nsmain.c:
	Fix make test: arguments now processed until first non dash
	parameter

2005-04-04 00:37 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (3e75161f08a1)

	* nsd/getopt.c: deleted file.
	* ChangeLog, nsd/getopt.c, nsd/nsmain.c:
	Remove imported getopt.c; parse command line manually

2005-04-03 07:38 +0100  Stephen Deasey  <sdeasey@gmail.com>  (3c2393e48bb7)

	* tests/test.nscfg: new file.
	* ChangeLog, Makefile, nsd/driver.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/tclinit.c, tests/all.tcl, tests/http.test,
	tests/ns_addrbyhost.test, tests/ns_adp_compress.test,
	tests/ns_hostbyaddr.test, tests/ns_hrefs.test,
	tests/ns_parseargs.test, tests/test.nscfg:
	Add -c command line option to run server in 'shell' mode; add test
	suite

	* nsd/nsd.h:
	* nsd/driver.c:
	* nsd/tclinit.c:
	* nsd/nsmain.c: Add -c command line option which causes the server to
	start in command mode, reading commands from stdin and executing
	them like a tclsh.

	* Makefile:
	* tests/test.nscfg:
	* tests/all.tcl: Add new Makefile targets test, runtest and gdb which
	start the server in command mode. Modify the test runner and add a
	test server config file.

	* tests/http.test:
	* tests/ns_addrbyhost.test:
	* tests/ns_adp_compress.test:
	* tests/ns_hostbyaddr.test:
	* tests/ns_hrefs.test:
	* tests/ns_parseargs.test: Update tests to use tlctest syntax and
	features.

2005-04-02 21:31 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (3f6c06f86082)

	* ChangeLog, nsd/tclcmds.c:
	Add ns_base64encode, ns_base64decode as synonyms for ns_uuencode,
	ns_uudecode

2005-04-02 21:29 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (7fa55a7a852f)

	* ChangeLog, nsd/tclmisc.c, nsd/uuencode.c:
	(ns_uuencode, ns_uudecode): handle buffer > 40 chars; wrap lines at
	60 chars, parse wrapped lines

2005-03-28 18:02 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (27ad4d8dd6c0)

	* ChangeLog, nsd/filter.c, nsd/info.c, nsd/nsd.h, nsd/op.c,
	nsd/urlspace.c:
	Add ns_info filters, traces, requestprocs using new Tcl callback
	interface (rfe #1161597)

	New commands show information about registered filters/procs same
	way as ns_info scheduled does.

2005-03-27 20:24 +0100  Vlad Seryakov  <vlad@crystalballinc.com>  (5d1cb5295c08)

	* ChangeLog, nsd/tclrequest.c:
	(Ns_RegisterFilterObj): fix bug with uninitialized 'when' flags

2005-03-26 17:42 +0000  Stephen Deasey  <sdeasey@gmail.com>  (6ca2bc0a8fe1)

	* ChangeLog, include/ns.h, nsd/nsd.h, nsd/proc.c, nsd/tclrequest.c,
	tcl/file.tcl, tcl/util.tcl:
	Remove support for old AOLserver connId parameter in request procs

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/proc.c:
	* nsd/tclrequest.c: Convert to new callback and parse proc APIs.
	Remove support for old connId parameter.

	* tcl/file.tcl:
	* tcl/util.tcl: Remove support for old connId parameter.

2005-03-26 16:40 +0000  Stephen Deasey  <sdeasey@gmail.com>  (5e7e70abd343)

	* nsd/tclcallbacks.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/nsd.h, nsd/proc.c,
	nsd/tclcallbacks.c, nsd/tclcmds.c, nsd/tclsched.c:
	Add utility routines for calling Tcl code from C callbacks; use new
	API in scheduler

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/Makefile:
	* nsd/tclcallbacks.c: Add routines to support calling Tcl code from C
	for callback events.

	* nsd/proc.c:
	* nsd/tclcmds.c:
	* nsd/tclsched.c: Update to use new callback and parse proc APIs.

2005-03-26 15:53 +0000  Stephen Deasey  <sdeasey@gmail.com>  (ed30f9e9367d)

	* nsd/cookies.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/cookies.c, nsd/tclcmds.c:
	Add cookie routines and commands (rfe #1145957)

2005-03-26 14:25 +0000  Stephen Deasey  <sdeasey@gmail.com>  (d591d5005492)

	* tests/ns_parseargs.test: new file.
	* ChangeLog, include/ns.h, nsd/nsd.h, nsd/tclcmds.c, nsd/tclinit.c,
	nsd/tclobj.c, nsd/tclobjv.c, tests/ns_parseargs.test:
	(Ns_ParseObjv): simplify code, fixing an option counting bug; add
	ns_parseargs; add more parse callbacks; add Ns_TclPrintfResult

	* include/ns.h:
	* nsd/nsd.h:
	* nsd/tclobjv.c:
	* nsd/tclcmds.c:
	* tests/ns_parseargs.test: Change the signature of Ns_ObjvProc()s to
	return either TCL_OK, TCL_ERROR or TCL_BREAK. Fixes a bug where
	options were being double-counted as args. Also simplified the
	Ns_ObjvProc interface by passing the Ns_ObjvSpec directly.

	Added a new Tcl command: ns_parseargs specification args. It parses
	options, args and handles defaults.

	* nsd/tclobj.c: Added some wrapper procs for handling Tcl obj types.

	* nsd/tclinit.c: Added Ns_TclPrintfResult() as a convenience for
	writing ints into a formatted string result.

2005-03-24 01:17 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (e16bc43ffeb9)

	* ChangeLog, include/ns.h:
	Add missing pubic Ns_SockBindUdp declaration

2005-03-22 20:49 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (335447f25601)

	* ChangeLog, nsd/driver.c:
	Ensure that socket driver's DriverClose callback gets executed when
	the socket is released

	This was causing a memory leak for HTTPS connections with nsopenssl
	when a Keep-Alive HTTP request timed out.

2005-03-18 08:21 +0000  Zoran Vasiljevic  <zv@archiware.com>  (214d6dbe0544)

	* ChangeLog, nsd/nsd.h, nsd/return.c, nsd/server.c, tcl/fastpath.tcl:
	Remove AOLpress code (rfe #1165562)

2005-03-18 08:12 +0000  Zoran Vasiljevic  <zv@archiware.com>  (eccb7121323d)

	* nsd/conn.c:
	(NsTclWriteContentObjCmd): check reqPtr->avail instead of
	conn->contentLength

2005-03-17 20:21 +0000  Zoran Vasiljevic  <zv@archiware.com>  (6ad4a64b4073)

	* ChangeLog, nsd/conn.c:
	Add [ns_conncptofp ?-bytes toCopy? channel] (rfe #1156899)

2005-03-17 18:24 +0000  Zoran Vasiljevic  <zv@archiware.com>  (5b50a03e92d5)

	* ChangeLog, nsd/conn.c:
	Add ns_conn channel (rfe #1156141)

2005-03-17 17:49 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d8ce0e59fdb9)

	* ChangeLog, nsd/nsd.h, nsd/nsmain.c, nsd/unix.c:
	Add watchdog implementation (rfe #1156875)

2005-03-13 02:09 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (dd21cb3ff217)

	* ChangeLog, Makefile:
	Remove modules nspd and nsext (now in modules repository)

2005-03-08 20:15 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (bffcb9aa391e)

	* ChangeLog, nslog/nslog.c:
	(LogTrace): use lock for extendeded headers; remove call to sleep(1)
	in ns_accesslog

2005-03-08 04:59 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (c116c0659280)

	* ChangeLog, include/ns.h, nsd/conn.c:
	(Ns_ConnSetResponseStatus): return void

2005-03-07 08:34 +0000  Zoran Vasiljevic  <zv@archiware.com>  (827e3d17c055)

	* ChangeLog, nslog/nslog.c:
	Fix segfault in handling of 'rollfmt' parameter

2005-03-06 22:48 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (1520fa8c65bd)

	* ChangeLog, nsd/tclcmds.c, nsd/tclmisc.c:
	Add ns_sha1 command

2005-03-06 18:37 +0000  Zoran Vasiljevic  <zv@archiware.com>  (2a9e85c3fa0e)

	* ChangeLog, nsd/tclcmds.c, nsd/tclxkeylist.c:
	Add objectified interface to TclX keyed lists, string interface
	backwards compatible

2005-03-05 23:28 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (c3dc11c70d1c)

	* ChangeLog, doc/Ns_Conn.3, include/ns.h, nsd/conn.c, nslog/nslog.c:
	(Ns_ConnSetResponseStatus): new routine to set status code, ns_conn
	status ?status? added

2005-03-04 09:24 +0000  Stephen Deasey  <sdeasey@gmail.com>  (75f44f736808)

	* ChangeLog, nsd/tclobjv.c:
	(Ns_ParseObjv): support boolean options which take no argument,
	truth is determined by presence of the option

2005-03-01 21:39 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d586d715cbba)

	* ChangeLog, nslog/nslog.c:
	(ns_accesslog): can change logging parameters at runtime

2005-02-28 07:15 +0000  Stephen Deasey  <sdeasey@gmail.com>  (f22d586f47eb)

	* ChangeLog, nsd/tclobjv.c:
	(Ns_ParseObjv): short circuit option processing when "--" found;
	accurately describe optional arguments as optional in error messages

2005-02-28 05:04 +0000  Stephen Deasey  <sdeasey@gmail.com>  (4a84e1f9134e)

	* ChangeLog, include/ns.h, nsd/form.c, nsd/request.c, nsd/urlencode.c:
	Decode + and other characters in URL paths correctly (bug #1145277)

2005-02-28 04:34 +0000  Stephen Deasey  <sdeasey@gmail.com>  (97a2aec7e656)

	* ChangeLog, nsd/mimetypes.c:
	XML mime types changed to application/xml from text/xml (bug
	#1145927)

	Add a handful of new mime mappings.

2005-02-26 17:15 +0000  Stephen Deasey  <sdeasey@gmail.com>  (9c5c6cca59ff)

	* nsd/tclobjv.c: new file.
	* ChangeLog, include/ns.h, nsd/Makefile, nsd/tclobjv.c:
	(Ns_ParseObjv): new command option/arg parsing routines for C code

2005-02-26 13:22 +0000  Zoran Vasiljevic  <zv@archiware.com>  (0fa8b85e3cda)

	* ChangeLog, nsd/nsmain.c:
	Allow server to run as root if '-u root' given explicitly

	Allows server to be started as uid == 0 if both of the following are
	true:

	- the caller process is running as root (getuid() == 0)
	- "-u root" or "-u 0" was given on the command line

	Also, improved and tightented verification of passed user and/or
	group information.

2005-02-26 13:21 +0000  Zoran Vasiljevic  <zv@archiware.com>  (80abb44f8236)

	* include/ns.h, nsd/unix.c:
	Add Ns_GetNameForUid(), Ns_GetNameForGid()

2005-02-24 17:24 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (01260785e9c2)

	* ChangeLog, include/ns.h, nsd/binder.c, nsd/nsd.h:
	(ns_info): report NaviServer as NSD_NAME; add missing Ns_SockListen*
	defs

2005-02-22 20:33 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (497be16326da)

	* ChangeLog, doc/ns_at.n, nsd/tclcmds.c, nsd/tclsched.c:
	(ns_atstartup): new command runs callbacks after server fully
	initialized

2005-02-17 14:19 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (d72b0d59818f)

	* ChangeLog:
	Add missing ChangeLog entries

2005-02-17 09:43 +0000  Zoran Vasiljevic  <zv@archiware.com>  (7b2f93e06eaf)

	* ChangeLog, nsd/tclfile.c:
	(NsTclChanObjCmd): fix crash when moving channel between threads
	using Tcl 8.4+

2005-02-16 16:45 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (c22a36bdb662)

	* tcl/modlog.tcl: deleted file.
	* Makefile, configure.in, include/Makefile.build,
	include/Makefile.global.in, include/Makefile.module.in,
	include/ns.h, include/nsdb.h, include/nsextmsg.h, include/nspd.h,
	include/nsthread.h, sample-config.tcl, tcl/charsets.tcl,
	tcl/compat.tcl, tcl/debug.tcl, tcl/fastpath.tcl, tcl/file.tcl,
	tcl/form.tcl, tcl/http.tcl, tcl/init.tcl, tcl/modlog.tcl,
	tcl/nsdb.tcl, tcl/sendmail.tcl, tcl/util.tcl:
	Specify MPL licence in headers; add cc to ns_sendmail; ns_getform
	returns "" when no conn

	License terms in the headers are changed to Mozilla.

	sendmail proc extended to support cc as argument and possibly ignore
	error on receiving QUIT response, some mail servers just drop the
	connection and then sendmail generate error.

	ns_getform checks for connection and if no connection returns empty
	instead of generate error, to be used safely in schedule scripts
	when same code runs on the Web frontend and backend.

2005-02-16 15:59 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (b2592cc7b724)

	* nsd/init.c:
	Initialize logging system earlier to fix crash bug when hostname not
	found

2005-02-16 15:05 +0000  Vlad Seryakov  <vlad@crystalballinc.com>  (3d984c89b332)

	* configure, include/Makefile.global.in, include/Makefile.module.in,
	nsd/binder.c, nsd/tclsock.c, nsdb/dbdrv.c:
	Binder supports TCP/UDP/ICMP/UNIX; new Ns_SockListen* routines;
	ns_sockopen -localhost, -localport

	Binder suppport for different protocols added, supported
	TCP/UDP/ICMP/UNIX protocols.

	Added Ns_SockListenUdp,Ns_SockListenRaw,Ns_SockListenUnix functions.

	Backported sockopen command from 4.1 tree with -localhost/-localport
	options.

	db select will reuse exception which driver set otherwise will set
	standard error about wrong query.

2005-02-16 08:38 +0000  Zoran Vasiljevic  <zv@archiware.com>  (8e130eec8fbc)

	* tests/all.tcl, tests/harness.tcl, tests/http-test-config.tcl,
	tests/http.test, tests/ns_addrbyhost.test,
	tests/ns_adp_compress.test, tests/ns_hostbyaddr.test,
	tests/ns_hrefs.test,
	tests/servers/server1/pages/ns_adp_compress.adp: new file.
	* index.html, ini2tcl.tcl, nscgi/nscgi.html, nscp/nscp.html,
	nsd/nsd.html, nsext/Makefile, nsext/msg.c, nsext/nsext.c,
	nsext/nsext.html, nslog/nslog.html, nspd/Makefile, nspd/listen.c,
	nspd/log.c, nspd/main.c, nspd/nspd.html, nspd/pd.h,
	nsperm/nsperm.html, nssock/nssock.html, nsssl/Makefile, nsssl
	/certfile-sample.pem, nsssl/keyfile-sample.pem, nsssl/keygen.tcl,
	nsssl/nsssl.c, nsssl/nsssl.html, nsssl/ssl.c, nsssl/ssl.h,
	nsssl/ssltcl.c, nsssl/ssltcl.h, nsssl/t_stdlib.c, nsssl/x509.c,
	nsssl/x509.h, tcl2ini.tcl, tests/README-tests.txt,
	tests/adp/test1.adp, tests/adp/test2.adp, tests/adp/test3.adp,
	tests/adp/test4.adp, tests/adp/test4.inc, tests/adp/test5.adp,
	tests/adp/test5a.adp, tests/adp/test6.adp, tests/adp/test7.adp,
	tests/adp/test7b.adp, tests/adp/test7c.adp, tests/adp/test8.adp,
	tests/adp/test8a.adp, tests/adp/test8b.adp, tests/adp/test9.adp,
	tests/adp/test9.inc, tests/api/ns_conn.adp, tests/api/ns_job.adp,
	tests/api/ns_localtime.adp, tests/cdev/test1.adp,
	tests/dbase/test1.adp, tests/index.adp, tests/new/all.tcl,
	tests/new/harness.tcl, tests/new/http-test-config.tcl,
	tests/new/http.test, tests/new/ns_addrbyhost.test,
	tests/new/ns_adp_compress.test, tests/new/ns_hostbyaddr.test,
	tests/new/ns_hrefs.test,
	tests/new/servers/server1/pages/ns_adp_compress.adp,
	tests/nstelemetry.adp, tests/sec/test1.adp, tests/tcl/test1.tcl,
	tests/tcl/test1a.tcl, tests/tcl/test1b.tcl, tests/tests.html:
	deleted file.
	* ChangeLog, Makefile, README, index.html, ini2tcl.tcl,
	nscgi/nscgi.html, nscp/nscp.html, nsd/binder.c, nsd/conn.c,
	nsd/form.c, nsd/nsd.html, nsd/tclinit.c, nsd/tclset.c,
	nsext/Makefile, nsext/msg.c, nsext/nsext.c, nsext/nsext.html,
	nslog/nslog.html, nspd/Makefile, nspd/listen.c, nspd/log.c,
	nspd/main.c, nspd/nspd.html, nspd/pd.h, nsperm/nsperm.html,
	nssock/nssock.c, nssock/nssock.html, nsssl/Makefile, nsssl/certfile-
	sample.pem, nsssl/keyfile-sample.pem, nsssl/keygen.tcl,
	nsssl/nsssl.c, nsssl/nsssl.html, nsssl/ssl.c, nsssl/ssl.h,
	nsssl/ssltcl.c, nsssl/ssltcl.h, nsssl/t_stdlib.c, nsssl/x509.c,
	nsssl/x509.h, sample-config.tcl, tcl2ini.tcl, tests/README-
	tests.txt, tests/adp/test1.adp, tests/adp/test2.adp,
	tests/adp/test3.adp, tests/adp/test4.adp, tests/adp/test4.inc,
	tests/adp/test5.adp, tests/adp/test5a.adp, tests/adp/test6.adp,
	tests/adp/test7.adp, tests/adp/test7b.adp, tests/adp/test7c.adp,
	tests/adp/test8.adp, tests/adp/test8a.adp, tests/adp/test8b.adp,
	tests/adp/test9.adp, tests/adp/test9.inc, tests/all.tcl,
	tests/api/ns_conn.adp, tests/api/ns_job.adp,
	tests/api/ns_localtime.adp, tests/cdev/test1.adp,
	tests/dbase/test1.adp, tests/harness.tcl, tests/http-test-
	config.tcl, tests/http.test, tests/index.adp, tests/new/all.tcl,
	tests/new/harness.tcl, tests/new/http-test-config.tcl,
	tests/new/http.test, tests/new/ns_addrbyhost.test,
	tests/new/ns_adp_compress.test, tests/new/ns_hostbyaddr.test,
	tests/new/ns_hrefs.test,
	tests/new/servers/server1/pages/ns_adp_compress.adp,
	tests/ns_addrbyhost.test, tests/ns_adp_compress.test,
	tests/ns_hostbyaddr.test, tests/ns_hrefs.test,
	tests/nstelemetry.adp, tests/sec/test1.adp,
	tests/servers/server1/pages/ns_adp_compress.adp,
	tests/tcl/test1.tcl, tests/tcl/test1a.tcl, tests/tcl/test1b.tcl,
	tests/tests.html:
	Initial revision

2005-01-18 21:10 +0000  Dossy Shiobara  <dossy@panoptic.com>  (e9c50ae686b5)

	* .hgtags:
	Tag aolserver-4.0.10

2005-01-18 21:10 +0000  Dossy Shiobara  <dossy@panoptic.com>  (8536f58f4a3f [aolserver-4.0.10])

	* ChangeLog, include/ns.h:
	Add missing prototype for Ns_CompressGzip

	BUMP: 4.0.10

2005-01-12 19:11 +0000  Dossy Shiobara  <dossy@panoptic.com>  (e159817ddf51)

	* tests/new/ns_adp_compress.test,
	tests/new/servers/server1/pages/ns_adp_compress.adp: new file.
	* ChangeLog, nsd/adpcmds.c, nsd/adprequest.c, nsd/compress.c,
	nsd/nsd.h, nsd/server.c, nsd/tclcmds.c, tests/new/http-test-
	config.tcl, tests/new/ns_adp_compress.test,
	tests/new/servers/server1/pages/ns_adp_compress.adp:
	Support on-the-fly gzip compression of ADP page responses

	Based on HTTP request's Accept-Encoding header and ns_adp_compress
	control mechanism.

2004-12-06 16:33 +0000  Dossy Shiobara  <dossy@panoptic.com>  (89882a8e77bc)

	* include/ns.h, nsd/dns.c, nsd/tclsock.c:
	Implement Ns_GetAllAddrByHost() and [ns_addrbyhost -all] (RFE
	#999452)

	Backport from HEAD for 4.0.10.

2004-12-06 16:24 +0000  Dossy Shiobara  <dossy@panoptic.com>  (11799d3d3825)

	* tests/new/http-test-config.tcl, tests/new/http.test,
	tests/new/ns_addrbyhost.test, tests/new/ns_hostbyaddr.test: new
	file.
	* tests/new/test-ns_addrbyhost.adp, tests/new/test-ns_hostbyaddr.adp,
	tests/new/test-ns_hrefs.adp: deleted file.
	* tests/new/all.tcl, tests/new/harness.tcl, tests/new/http-test-
	config.tcl, tests/new/http.test, tests/new/ns_addrbyhost.test,
	tests/new/ns_hostbyaddr.test, tests/new/ns_hrefs.test, tests/new
	/test-ns_addrbyhost.adp, tests/new/test-ns_hostbyaddr.adp, tests/new
	/test-ns_hrefs.adp:
	Backport tests from HEAD

2004-12-01 05:39 +0000  Dossy Shiobara  <dossy@panoptic.com>  (f40c07ba6d53)

	* ChangeLog, include/ns.h:
	Provide NS_VERSION_NUM to make conditionalized testing of version at
	build time easy

2004-11-22 20:45 +0000  Dossy Shiobara  <dossy@panoptic.com>  (c4a200044bdf)

	* ChangeLog, include/ns.h:
	BUMP: 4.0.10a

2004-11-22 20:43 +0000  Dossy Shiobara  <dossy@panoptic.com>  (63f0f4172f0a)

	* .hgtags:
	Tag aolserver-4.0.9

2004-11-22 20:43 +0000  Dossy Shiobara  <dossy@panoptic.com>  (24c48eefd740 [aolserver-4.0.9])

	* ChangeLog, include/ns.h:
	BUMP: 4.0.9

2004-11-20 08:26 +0000  Dossy Shiobara  <dossy@panoptic.com>  (5919a30dde36)

	* ChangeLog, nsd/tclsched.c:
	(ns_schedule_*): fix segfault in option parsing (bug #1068836)

	Backport from HEAD.

2004-11-20 03:12 +0000  Dossy Shiobara  <dossy@panoptic.com>  (bdd95f444600)

	* ChangeLog, configure, configure.in:
	Detect if libgcc is built shared and add -lgcc_s to LIBS

	Without it, the nsd binary will fail to link because of unresolved
	symbols __umoddi3 and __udivdi3 in nsd/dsprintf.c.

2004-11-20 02:01 +0000  Dossy Shiobara  <dossy@panoptic.com>  (8adfb5b92c29)

	* ChangeLog, nsd/Makefile:
	Adding -lz to LIBS is now redundant

2004-11-20 01:54 +0000  Dossy Shiobara  <dossy@panoptic.com>  (b4cc2f675c9d)

	* ChangeLog, include/nsthread.h:
	Include <inttypes.h> on OS X, Solaris 10 etc. to get C99 "uint32_t"
	and other types

	Backport from HEAD.

2004-11-20 01:49 +0000  Dossy Shiobara  <dossy@panoptic.com>  (2659059643c3)

	* ChangeLog, configure, configure.in, include/Makefile.global.in,
	nsd/compress.c:
	Add --with-zlib configure option (on by default) and add ifdef's to
	nsd/compress.c

	Backport from HEAD.

2004-11-19 14:01 +0000  Dossy Shiobara  <dossy@panoptic.com>  (f7d01fc6e7b3)

	* nsd/compress.c: new file.
	* include/ns.h, nsd/Makefile, nsd/compress.c:
	Add new Ns_Compress() function to gzip data using Zlib

	Backport from HEAD.

2004-11-17 21:53 +0000  Dossy Shiobara  <dossy@panoptic.com>  (cfa146ffee58)

	* ChangeLog, nsd/adprequest.c:
	Don't send Content-Length if streaming is on

	Backport from HEAD.

2004-11-15 16:14 +0000  Dossy Shiobara  <dossy@panoptic.com>  (1866d057c7ea)

	* ChangeLog, nsd/nsmain.c:
	Raise fd limit above FD_SETSIZE if specified, logging a warning

	AOLserver will now allow setting the fd limit (via "ulimit -Hn",
	etc.) and only log a warning if it exceeds FD_SETSIZE. Do this at
	your own risk, as things which still use select(), i.e., Tcl, are
	likely to break.

	Backported from HEAD.

2004-11-15 13:38 +0000  Dossy Shiobara  <dossy@panoptic.com>  (087448ec08aa)

	* include/Makefile.module.in:
	Use AOLSERVER not @prefix@ for module build

	Using @prefix@ means you must install to the path specified by
	--prefix otherwise you can't use the install for building extra
	modules.

	Backport from HEAD.

2004-11-06 03:31 +0000  Dossy Shiobara  <dossy@panoptic.com>  (ed1f07996989)

	* ChangeLog, nsd/sockcallback.c:
	(SockCallbackThread): dereferencing cbPtr->nextPtr is dangerous
	since cbPtr could have been freed

2004-09-30 20:48 +0100  Dossy Shiobara  <dossy@panoptic.com>  (c5178171793f)

	* ChangeLog, include/ns.h:
	BUMP: 4.0.9b

2004-09-30 20:47 +0100  Dossy Shiobara  <dossy@panoptic.com>  (a95f91859f79)

	* include/ns.h, nsd/sockcallback.c, nsd/tclhttp.c:
	Implement Ns_SockCancelCallbackEx() to cancel actions in the
	SockCallbackThread (bug #1037196)

	Backported from HEAD for 4.0.9.

2004-09-29 19:59 +0100  Dossy Shiobara  <dossy@panoptic.com>  (db25b3fafc8c)

	* ChangeLog, include/ns.h, nsd/sockcallback.c, nsd/tclhttp.c:
	(ns_http): fix hang when 'cancel' fails to run (bug #1037196)

	Fix a thread hang issue when ns_http fails but HttpCancel() never
	executes because poll() returns revent == POLLPRI.

	Backported from HEAD for 4.0.9.

2004-09-24 18:49 +0100  Dossy Shiobara  <dossy@panoptic.com>  (9e0d7d30c953)

	* ChangeLog, include/nsthread.h:
	Win32 supports the get{addr,name}info() API, so use it

	Backported from HEAD for 4.0.9.

2004-09-24 14:58 +0100  Dossy Shiobara  <dossy@panoptic.com>  (cb0aef1be707)

	* ChangeLog, nsd/dns.c:
	Fix memory leak introduced on platforms w/ getaddrinfo (bug
	#1033575)

	Backport from HEAD for 4.0.9.

2004-09-22 19:03 +0100  Dossy Shiobara  <dossy@panoptic.com>  (0307d5064e4d)

	* ChangeLog, configure, configure.in:
	get{addr,name}info on Solaris 9 is in -lsocket

	Backported from HEAD.

2004-09-22 02:02 +0100  Dossy Shiobara  <dossy@panoptic.com>  (ad9d185abe7e)

	* ChangeLog, configure, configure.in:
	Use compiler from Tcl build unless explicitly overridden during
	AOLserver build

	Backported from HEAD for 4.0.9.

2004-09-22 01:47 +0100  Dossy Shiobara  <dossy@panoptic.com>  (161b7ee02356)

	* configure:
	Regenerated configure script

2004-09-22 00:27 +0100  Dossy Shiobara  <dossy@panoptic.com>  (a2991b7b21f6)

	* ChangeLog, aclocal.m4:
	Make detection of gethostby{addr,name}_r more robust (bug #1032231)

	Backported from HEAD for 4.0.9.

2004-09-21 01:47 +0100  Dossy Shiobara  <dossy@panoptic.com>  (8f785cc4e0ac)

	* ChangeLog, nsd/nsd.h, nsd/nsmain.c, nsd/unix.c:
	Set the dumpable flag on Linux to get a core file after uid/gid is
	changed (bug #1031599)

	Backported from HEAD for 4.0.9a.

2004-09-17 16:58 +0100  Dossy Shiobara  <dossy@panoptic.com>  (29f56aca6820)

	* ChangeLog, nsd/connio.c:
	Ns_ConnSend() now bubbles up the error from NsSockSend() on first
	send (bug #1029512)

	This is what the C API documentation says.

	Backported from HEAD for 4.0.9a.

2004-09-17 16:30 +0100  Dossy Shiobara  <dossy@panoptic.com>  (fdb9bc97ce25)

	* ChangeLog, nsd/driver.c:
	Fix driver shutdown: don't initialize 'stop' to true (bug #1029918)

	"stopped" already initialized to 1, which means
	NsWaitDriversShutdown() will never timeout even when it should,
	which means trigPipe always gets closed immediately which causes
	DriverThread to Ns_Fatal() on line 848.

2004-09-08 19:39 +0100  Dossy Shiobara  <dossy@panoptic.com>  (d0dafe2b87f9)

	* ChangeLog, nslog/nslog.html:
	Updated nslog module documentation (bug #466236)

	Backported from HEAD.

2004-09-08 19:37 +0100  Dossy Shiobara  <dossy@panoptic.com>  (347a9a0462ef)

	* nscgi/nscgi.html:
	Add datatype for config options to doc

	Backported from HEAD.

2004-09-07 18:46 +0100  Dossy Shiobara  <dossy@panoptic.com>  (3f7045780df5)

	* ChangeLog, include/ns.h:
	BUMP: 4.0.9a

2004-09-07 18:28 +0100  Dossy Shiobara  <dossy@panoptic.com>  (b73895be67a6)

	* .hgtags:
	Tag aolserver-4.0.8

2004-09-07 18:28 +0100  Dossy Shiobara  <dossy@panoptic.com>  (18961ae1220a [aolserver-4.0.8])

	* ChangeLog, include/ns.h:
	BUMP: 4.0.8

2004-09-07 18:27 +0100  Dossy Shiobara  <dossy@panoptic.com>  (cbe60d174af4)

	* README:
	README: updated for 4.0.8

2004-09-03 05:37 +0100  Dossy Shiobara  <dossy@panoptic.com>  (2c9d9823cc60)

	* ChangeLog, nscgi/nscgi.html:
	Updated nscgi module documentation for 4.0 (bug #465907)

	Backported from HEAD.

2004-08-25 20:52 +0100  Dossy Shiobara  <dossy@panoptic.com>  (4cdd5e449004)

	* ChangeLog, nsd/queue.c:
	queue.c: if reqPtr is NULL, close the connection too

2004-08-25 20:51 +0100  Dossy Shiobara  <dossy@panoptic.com>  (1a47f2fb78d2)

	* nsd/driver.c:
	(SockRead): eat stray LF as well as CR/LF pairs after headers

	Previous code to eat leading blanks assumed CR/LF, but some clients
	only send LF. Code has been cleaned up and corrected to handle this
	properly.

2004-08-20 22:48 +0100  Dossy Shiobara  <dossy@panoptic.com>  (c5e5974cd51a)

	* tests/new/all.tcl, tests/new/harness.tcl, tests/new/ns_hrefs.test,
	tests/new/test-ns_addrbyhost.adp, tests/new/test-ns_hostbyaddr.adp,
	tests/new/test-ns_hrefs.adp: new file.
	* ChangeLog, Makefile, tests/new/all.tcl, tests/new/harness.tcl,
	tests/new/ns_hrefs.test, tests/new/test-ns_addrbyhost.adp, tests/new
	/test-ns_hostbyaddr.adp, tests/new/test-ns_hrefs.adp:
	Implement automated tests that can be run from a stand-alone tclsh

	New Makefile target added called "test" which runs the tests.

2004-08-18 05:00 +0100  Dossy Shiobara  <dossy@panoptic.com>  (34faac5c8b22)

	* ChangeLog, tcl/fastpath.tcl:
	(_ns_dirlist): add missing slash to directory URLs and redirect (bug
	#935907)

	Backported from HEAD.

2004-08-17 20:46 +0100  Dossy Shiobara  <dossy@panoptic.com>  (e2339ed334c4)

	* ChangeLog, nsd/fastpath.c:
	Minor change to eliminate Win32 compile-time warning (bug #696806)

	Backported from HEAD.

2004-08-14 17:51 +0100  Dossy Shiobara  <dossy@panoptic.com>  (f3aa368073f2)

	* ChangeLog, aclocal.m4, configure, nsd/dns.c:
	Solaris 7 uses gethostbyaddr_r and the autoconf and GetHost versions
	didn't work

	Backported from HEAD.

2004-08-14 05:19 +0100  Dossy Shiobara  <dossy@panoptic.com>  (c67196437f57)

	* ChangeLog, aclocal.m4, configure, configure.in, nsd/dns.c:
	Thread-safe host/name lookup (bug #1008721)

	gethostbyaddr() and gethostbyname() are not thread-safe. Use the new
	getaddrinfo() and getnameinfo() API where available, otherwise use
	gethostbyaddr_r() and gethostbyname_r() if available. Otherwise,
	continue to use the non-safe versions but emit a warning at
	configure time. Fixes SF Bug #1008721.

	Backported from HEAD.

2004-08-13 16:20 +0100  Dossy Shiobara  <dossy@panoptic.com>  (a05313f94016)

	* ChangeLog, win32/nscgi/nscgi.dsp, win32/nscp/nscp.dsp,
	win32/nsd/nsd.dsp, win32/nsdb/nsdb.dsp, win32/nslog/nslog.dsp,
	win32/nsperm/nsperm.dsp, win32/nssock/nssock.dsp,
	win32/nsthread/nsthread.dsp, win32/threadtest/threadtest.dsp:
	Change Win32 .dsp files to reflect change in Tcl from "tcl84td.lib"
	to "tcl84tg.lib" (bug #996342)

	Backported from HEAD.

2004-08-13 16:04 +0100  Dossy Shiobara  <dossy@panoptic.com>  (dc6cff02e8c5)

	* ChangeLog, nsd/tclmisc.c:
	ns_hrefs is now more robust -- fixes SF Bug #995078

	Backported from HEAD.

2004-08-11 23:22 +0100  Dossy Shiobara  <dossy@panoptic.com>  (5db7af6d03b6)

	* ChangeLog, nsd/nsconf.c:
	nsconf.address defaults to 0.0.0.0, fixing crash bug #994072

	Backported from HEAD.

2004-08-11 20:52 +0100  Dossy Shiobara  <dossy@panoptic.com>  (39c1bde3bf60)

	* ChangeLog, nsd/driver.c:
	Fix crash bug when virtual servers are configured but "hostname"
	parameter didn't match any virtual servers

	Fixed by introducing new "defaultserver" parameter in the comm.
	config that must refer to one of the virtual servers being defined.

	Backported from HEAD.

2004-08-11 20:40 +0100  Dossy Shiobara  <dossy@panoptic.com>  (894f85d1e866)

	* sample-config.tcl:
	Add "defaultserver" parameter in sample config

	Backported from HEAD.

2004-08-05 16:29 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (99c8367a3100)

	* ChangeLog, nsd/tclhttp.c:
	Add -servicetime option to ns_http wait so you can capture how long
	the request took

2004-07-29 04:39 +0100  Dossy Shiobara  <dossy@panoptic.com>  (e61655a77db3)

	* ChangeLog, include/ns.h:
	BUMP: 4.0.8a

2004-07-29 04:36 +0100  Dossy Shiobara  <dossy@panoptic.com>  (3846b24e858a)

	* configure, configure.in:
	Clean up configure.in; regenerate configure w/ autoconf2.13; clear
	CCRPATH/LDRPATH if CCRFLAGS/LDRFLAGS are empty (bug #640754)

	Backported from HEAD.

2004-07-19 19:24 +0100  Dossy Shiobara  <dossy@panoptic.com>  (48def2914c13)

	* .hgtags:
	Tag aolserver-4.0.7

2004-07-19 19:24 +0100  Dossy Shiobara  <dossy@panoptic.com>  (45526f37f20f [aolserver-4.0.7])

	* ChangeLog, include/ns.h:
	BUMP: 4.0.7

2004-07-19 03:47 +0100  Dossy Shiobara  <dossy@panoptic.com>  (acfeb2bc3fb2)

	* ChangeLog, nsd/return.c:
	(Ns_ConnReturnUnauthorized): add WWW-Authenticate header for
	templated 401 pages (bug #674033)

	Backported from HEAD.

2004-07-19 03:43 +0100  Dossy Shiobara  <dossy@panoptic.com>  (1efa711ff874)

	* ChangeLog, nsd/init.c, nsd/nsconf.c, nsd/nsd.h:
	(Ns_InitInfo): initialize conf structures before Ns_Log is used (bug
	#868362)

	Ns_GetAddrByHost() reports errors via Ns_Log(), so calls to it
	should be done after Ns_Log has been initialized, otherwise very
	unhelpful error messages are produced. In particular, this happens
	when the server is started and the hostname as returned by
	gethostname() cannot be resolved, because the network interface is
	down AND no entry exists in /etc/hosts. Closes SF Bug #868362.

	Backported from HEAD.

2004-07-16 20:49 +0100  Dossy Shiobara  <dossy@panoptic.com>  (c3f11ad2e758)

	* ChangeLog, nsd/driver.c:
	Fix crash bug freeing static storage on bad request

2004-07-16 14:29 +0100  Dossy Shiobara  <dossy@panoptic.com>  (e791341571c8)

	* ChangeLog, include/ns.h:
	BUMP: 4.0.7a

2004-07-16 14:25 +0100  Dossy Shiobara  <dossy@panoptic.com>  (26f809a1f027)

	* .hgtags:
	Tag aolserver-4.0.6

2004-07-16 14:25 +0100  Dossy Shiobara  <dossy@panoptic.com>  (6dd42b56f396 [aolserver-4.0.6])

	* ChangeLog, include/ns.h:
	BUMP: 4.0.6

2004-07-15 22:27 +0100  Tim Suh  <suhti@aol.com>  (840c5f4f9ba6)

	* ChangeLog, nsd/return.c:
	Enable keep-alive for more response codes: 201, 207, 300

2004-07-14 01:36 +0100  Dossy Shiobara  <dossy@panoptic.com>  (cfac1ece84da)

	* ChangeLog, nsd/driver.c, nsd/op.c:
	Host header mandatory for HTTP/1.1 (bug #787728); map default server
	(bug #812036)

	Change to make HTTP request "Host:" header mandatory for HTTP/1.1
	connections by returning 400 Bad Request response. Closes SF Bug
	#787728.

	Also, changed virtual server code to use the "hostname" param from
	the "ns/module/nssock" section to map the default virtual server
	based on the value (hostname) from the "ns/module/nssock/servers"
	section, when the "Host:" header is either not specified (HTTP/1.0)
	or is not found in the virtual server table. Closes SF Bug #812036.

	Backport from HEAD, but not straight patch due to difference in
	conn/request handling in 4.0 vs. 4.1.

2004-07-13 22:01 +0100  Dossy Shiobara  <dossy@panoptic.com>  (47bfcfe5bea1)

	* ChangeLog, nslog/nslog.c:
	(LogTrace): check for conn->headers == NULL, segfault (bug #990439)

	Backported from HEAD.

2004-07-13 21:38 +0100  Dossy Shiobara  <dossy@panoptic.com>  (99a437205001)

	* ChangeLog, include/nsthread.h:
	Define ENOTSUP for benefit of OpenBSD 3.5 (bug #985076)

	Backported from HEAD.

2004-07-02 18:44 +0100  Dossy Shiobara  <dossy@panoptic.com>  (4863de973791)

	* ChangeLog, nsd/mimetypes.c:
	(Ns_GetMimeType): return correct mime-type when dir has . but
	filename doesn't (bug #739049)

	Backported from HEAD.

2004-07-02 17:25 +0100  Dossy Shiobara  <dossy@panoptic.com>  (a6668e8e8976)

	* ChangeLog, nsd/fastpath.c, nsd/return.c:
	(ns_respond): enable override Last-Modified header when -heades and
	-file given, bug #879076

	Backport from HEAD, for 4.0.6.

2004-07-02 17:24 +0100  Dossy Shiobara  <dossy@panoptic.com>  (272b85983cb1)

	* nsd/tclresp.c:
	Lots of refactoring of ns_respond code to remove duplication.

	Backport from HEAD.

2004-07-02 05:11 +0100  Dossy Shiobara  <dossy@panoptic.com>  (480e2ef34b2c)

	* ChangeLog, nsd/init.tcl:
	Fix bug #833940: ns_eval chokes on comments

	ns_eval of script containing comments (i.e., lines starting with
	"#") cause an error because $args is a list, which gets evaluated
	differently than a plain string script.

	Backported from HEAD.

2004-07-01 20:34 +0100  Dossy Shiobara  <dossy@panoptic.com>  (2badede37cb2)

	* ChangeLog, nsd/nsd.h, nsd/nsmain.c:
	Fix supplementry groups when -u specified, closes bug #425401

	Ensure that supplementary groups from /etc/group are set if -u
	username is specified, or dropped if a uid is specified so that the
	nsd doesn't run with root's supplementary groups.

	Backport from HEAD.

2004-07-01 19:59 +0100  Dossy Shiobara  <dossy@panoptic.com>  (0808b007a4d9)

	* nsd/nsd.h:
	Trivial - eliminate compiler warning for nsd/nsmain.c

2004-07-01 19:13 +0100  Dossy Shiobara  <dossy@panoptic.com>  (f6fc232c11a6)

	* nsthread/tls.c:
	Include full function name in Tcl_Panic call within Ns_TclSet

	(Backport from HEAD.)

2004-06-30 22:20 +0100  Dossy Shiobara  <dossy@panoptic.com>  (6f286b1ee322)

	* nsd/unix.c:
	Fix synchronous signals under LinuxThreads, possible fix for Bug
	#982955

	Backported from HEAD for 4.0.6.

2004-06-30 06:24 +0100  Dossy Shiobara  <dossy@panoptic.com>  (e12aaf6921ee)

	* include/ns.h:
	Fix build on alpha removing extra INT64 typedef, closes bug #896962

	(Backport from HEAD.)

2004-06-23 19:54 +0100  Dossy Shiobara  <dossy@panoptic.com>  (ca3c288e65c4)

	* nscgi/nscgi.c:
	Ns_ConnSetRequiredHeaders now requires length < 0 for no Content-
	Length header

	(Backport from HEAD.)

2004-06-23 16:16 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (94cf5402dabf)

	* ChangeLog, nsd/log.c:
	Make ns_log use a custom logger as well as Ns_Log

	Moved the custom logger code from Ns_Log into Log so that Ns_Fatal
	also works properly.

2004-06-15 01:41 +0100  Dossy Shiobara  <dossy@panoptic.com>  (c67d69f64f4c)

	* ChangeLog, nsd/return.c:
	Fix bug #971016 -- unflushed headers with zero-length file and mmap

	unnecessary test for data != NULL actually caused part of bug
	#971016 when fastpath.cache=false and fastpath.mmap=true and the
	file requested is zero bytes, mmap() returns 0 which gets passed
	along as data == NULL, causing ReturnCharData() to not flush the
	queued headers. removing the if is safe as Ns_WriteConn will simply
	flush any queued data

2004-06-15 01:40 +0100  Dossy Shiobara  <dossy@panoptic.com>  (83d6b70e0c8f)

	* nsd/connio.c:
	Fix bug #971016 -- flush headers with zero-length file and dissabled
	cache

	If nsend == 0, we would never call Ns_WriteConn to flush the queued
	headers. This could happen when we're sending zero bytes of data as
	a response. This fixes bug #971016 in the case where
	fastpath.cache=false and fastpath.mmap=false and a zero byte file is
	requested.

2004-06-14 21:40 +0100  Dossy Shiobara  <dossy@panoptic.com>  (da980d625ef6)

	* ChangeLog, nsd/return.c:
	Fix Content-Length header for content of zero bytes (bug #971016)

2004-06-03 19:28 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (d6f27d273181)

	* include/ns.h:
	Become AOLserver 4.0.5

2004-06-03 19:03 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (22f29f6ca8d3)

	* ChangeLog, nsd/str.c:
	Don't try to trim empty strings

2004-06-03 19:02 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (0282089ffe64)

	* nsd/driver.c, nsd/nsconf.c, nsd/nsd.h, nsd/return.c:
	Allow HTTP/1.0 Connection: keep-alive for all methods

	Add new bool config option, keepaliveallmethods, to enable this. By
	default this is false (disabled).

2004-06-03 19:01 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (f58131309387)

	* include/ns.h, nsd/log.c:
	Provide override functions for Ns_Log and LogFlush

	Gives the user more control over how server logging works.

2004-06-03 18:58 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (747d6b95d30f)

	* .hgtags:
	Tag aolserver-4.0.5

2004-06-03 18:58 +0100  Rob Crittenden  <rcrittenden0569@aol.com>  (38adb56e8b8d [aolserver-4.0.5])

	* Makefile:
	Remove include/Makefile.module on make distclean

2004-03-26 20:58 +0000  Mark Page  <mpagenva@aol.com>  (200224d4dc23)

	* .hgtags:
	Tag aolserver-4.0.3

2004-03-26 20:58 +0000  Mark Page  <mpagenva@aol.com>  (fcd04f894641 [aolserver-4.0.3])

	* ChangeLog, nsd/driver.c, nsd/nsd.h, sample-config.tcl:
	Add configurable error logging which cause the driver to drop an
	incoming connection

	Logging goes to the server log. Following new bool config params are
	added to the socket driver's section (e.g., nssock, etc):

	 readtimeoutlogging serverrejectlogging sockerrorlogging
	sockshuterrorlogging

2004-02-27 19:14 +0000  Dossy Shiobara  <dossy@panoptic.com>  (ab03ab05f5be)

	* ChangeLog, include/ns.h:
	Bump version to 4.0.3 (bug #906011)

2004-02-26 19:36 +0000  Dossy Shiobara  <dossy@panoptic.com>  (6036bfa3031f)

	* ChangeLog, nsd/unix.c:
	uid_t is supposed to be unsigned, but apparently isn't on OSX,
	apparently

2004-02-19 18:22 +0000  Dossy Shiobara  <dossy@panoptic.com>  (4deddce9a2ed)

	* ChangeLog, nsdb/dbinit.c, nsdb/dbtcl.c:
	Fix ns_db gethandle -timeout so that when timeout < 0 it blocks
	forever

	Timeout == 0 is poll and timeout > 0 times out after timeout
	seconds.

2004-02-18 16:35 +0000  Dossy Shiobara  <dossy@panoptic.com>  (941355320c34)

	* ChangeLog, nsperm/nsperm.c:
	Restore old nsperm functionality as it was in 3.x (bug #899364)

2003-11-23 16:31 +0000  Mark Page  <mpagenva@aol.com>  (8505af489478)

	* .hgtags:
	Tag aolserver-4.0.2

2003-11-23 16:31 +0000  Mark Page  <mpagenva@aol.com>  (2f92dc002568 [aolserver-4.0.2])

	* ChangeLog, nsd/tclhttp.c, tcl/fastpath.tcl:
	(ns_http): allow methods other than get, put, post; create
	directories on http put

	* nsd/tclhttp.c: remove validity check on method param to ns_http
	queue, since methods in addition to put and post can be valid.

	* tcl/fastpath.tcl: make configuable: a) logging to serverlog
	fastpath update requests (some configs may be fine with the logging
	to the access log which can be easily obtained). b) automatic
	backfill of implied directory tree on put.

2003-11-20 02:32 +0000  Pramod Khincha  <pkhincha@aol.com>  (790d37aebc1c)

	* .hgtags:
	Tag aolserver-4.0.1

2003-11-20 02:32 +0000  Pramod Khincha  <pkhincha@aol.com>  (f93bde2848d1 [aolserver-4.0.1])

	* ChangeLog, nsd/driver.c:
	Fixed ns_shutdown problem of hanging

2003-11-20 02:13 +0000  Pramod Khincha  <pkhincha@aol.com>  (78552d92180d)

	* ChangeLog, nsd/driver.c, nsd/nsd.h:
	Potential DoS attack fixes; limit the # of bytes on request using
	maxinput parameter

2003-11-16 17:54 +0000  Jim Davidson  <jgdavidson@aol.com>  (d6bc17c739f5)

	* ChangeLog, nsd/nsmain.c:
	Fixed order of driver shutdown wait

2003-11-16 15:15 +0000  Jim Davidson  <jgdavidson@aol.com>  (3a63e502dccd)

	* ChangeLog:
	Add missing ChangeLog entries, mostly pre-queue

2003-11-16 15:05 +0000  Jim Davidson  <jgdavidson@aol.com>  (f270d34d9d67)

	* nssock/nssock.c:
	Added new async option to socket driver

2003-11-16 15:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (05aca88cc337)

	* nsd/tclset.c, nsd/tclsock.c:
	Removed unused static functions

2003-11-16 15:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (6e2cc0636ae1)

	* nsd/tclinit.c:
	Added general interp tracing API

2003-11-16 15:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (7c289f47b016)

	* nsd/server.c:
	Removed Conn pre-alloc and maxconns option

2003-11-16 15:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (76fd0dabd336)

	* nsd/init.c:
	Fixed order of init calls

2003-11-16 15:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (d00ade174cf3)

	* nsd/driver.c:
	Restructured mostly to support pre-queue API

2003-11-16 15:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (5d58d57a8bf2)

	* nsd/conn.c, nsd/connio.c, nsd/form.c, nsd/nsd.h, nsd/queue.c,
	nsd/return.c:
	Moved I/O buffers to Conn from Sock

2003-11-16 15:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (e42732289149)

	* nsd/binder.c, nsd/dns.c:
	Named binder mutex

2003-11-16 15:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (54053f4d0e1e)

	* include/ns.h:
	Updated version, added some defs and functions

2003-11-03 19:23 +0000  Pramod Khincha  <pkhincha@aol.com>  (90d2af245412)

	* .hgtags:
	Tag aolserver-4.0.0

2003-11-03 19:23 +0000  Pramod Khincha  <pkhincha@aol.com>  (3340cce1bd1a [aolserver-4.0.0])

	* ChangeLog, nsd/nsmain.c, nsd/urlspace.c:
	Call NsWaitDriversShutdown; remove unnecessary mutex init

2003-11-03 02:08 +0000  Paul Moosman  <pwmoosman@aol.com>  (b1273a45551e)

	* nsd/tcljob.c:
	Remove various asserts -- they are not needed in release version

2003-11-01 16:42 +0000  Zoran Vasiljevic  <zv@archiware.com>  (f2dfd8d275fc)

	* ChangeLog, tcl/file.tcl:
	Fix broken argument signature for ns_sourceproc

	It causes headaches when called as registered proc.

2003-10-28 08:29 +0000  Zoran Vasiljevic  <zv@archiware.com>  (b145e5a82d84)

	* ChangeLog, nsd/tclatclose.c:
	Fixed typo in usage text of ns_atclose

2003-10-21 19:24 +0100  Mark Page  <mpagenva@aol.com>  (b0563db1c26d)

	* ChangeLog, doc/ns_job.n, nsd/tcljob.c, nsd/tclobj.c,
	tests/api/ns_job.adp:
	Make ns_job use Ns_Time

2003-10-21 18:36 +0100  Paul Moosman  <pwmoosman@aol.com>  (faa284d0d101)

	* doc/ns_job.n:
	Typo in ns_job docs

2003-10-21 14:54 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (3e56da5840bf)

	* ChangeLog, nsd/init.tcl:
	Removing lazyproc code from 4.0 to enable it to be declared GM

	Solution is being refined and may be provided in later release or in
	add-on module.

2003-10-17 22:04 +0100  Paul Moosman  <pwmoosman@aol.com>  (9b15273bebd1)

	* nsd/tcljob.c:
	Fix bug with -timeout option for ns_job wait and waitany

	I was passing relative time instead of absolute time and this caused
	pthread_cond_timedwait to return "EINVAL".

2003-10-14 02:29 +0100  Paul Moosman  <pwmoosman@aol.com>  (b9fd1e287c3b)

	* ChangeLog, nsd/tcljob.c:
	Fix bug where JobThread was accessing a deleted queue

2003-10-09 21:18 +0100  Paul Moosman  <pwmoosman@aol.com>  (f03a0c94c948)

	* nsd/tcljob.c:
	Fix a bug with -timeout option of ns_job waitany

2003-10-09 14:00 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (c00dc86c6d37)

	* ChangeLog, nsd/init.tcl:
	Fix syntax error in check for null proc; tag aolserver_v4_r0_beta_18

2003-10-08 18:07 +0100  Mark Page  <mpagenva@aol.com>  (60e9280c438b)

	* ChangeLog, nsd/init.tcl:
	Tracking change to ns_job joblist return

	Tag aolserver_v4_r0_beta_17

2003-10-08 17:32 +0100  Paul Moosman  <pwmoosman@aol.com>  (d6efb4476a9e)

	* doc/ns_job.n, nsd/tcljob.c, tests/api/ns_job.adp:
	ns_job: start-time becomes epoch seconds; lower-case array names and
	return values

2003-10-07 21:38 +0100  Mark Page  <mpagenva@aol.com>  (47245e93226e)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_16

2003-10-07 21:08 +0100  Mark Page  <mpagenva@aol.com>  (2dbcbc3073f5)

	* ChangeLog, nsd/init.tcl:
	Add ns_eval async completion

	The early 4.0 ns_eval had been waiting for the completion of
	integrating script changes into the server's init script.

	This change adds the ability to return without waiting for the init
	script integration completion (as the default). A new switch
	modifies this behavior to force it to wait for the completion of
	init script integration.

	Added another switch to request a report of ns_eval backlog.

2003-10-07 16:08 +0100  Mark Page  <mpagenva@aol.com>  (a8a783199306)

	* ChangeLog, nsd/adpeval.c:
	(LogError): limit amount of script text added to error info

	Keeps from flowing adp script texts of unlimited length into the
	server log.

2003-10-06 15:07 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (5683c1020aa1)

	* ChangeLog, nsd/init.tcl:
	Protect against infinite loop in lazyproc processing when null
	command is attempted

2003-10-01 18:42 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (c0cac547a6a9)

	* ChangeLog, nsd/init.tcl:
	(_ns_lzproc_load): handle namesapced commands

	When loading a command from the global namespace while executing
	from a different namespace, the test in _ns_lzproc_load using the
	'info proc' was failing. However, it succeeds as expected when using
	'info command'

2003-09-25 13:40 +0100  Paul Moosman  <pwmoosman@aol.com>  (6c18fe84af6c)

	* include/ns.h:
	Define snprintf _snprintf on win32

2003-09-24 16:24 +0100  Paul Moosman  <pwmoosman@aol.com>  (3f9e96f2bbf4)

	* nsd/tcljob.c:
	Replace ctime_r with ns_ctime: fixes win32 compile problem: bug
	#811802

2003-09-23 15:50 +0100  Paul Moosman  <pwmoosman@aol.com>  (599ce0be1bd9)

	* nsd/tcljob.c:
	Fix deadlock in ns_job code; don't ignore maxthreads option

2003-09-23 02:46 +0100  Mark Page  <mpagenva@aol.com>  (96bd960d4fa0)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_15; add missing ChangeLog entries

2003-09-22 23:32 +0100  Paul Moosman  <pwmoosman@aol.com>  (f0890471f667)

	* nsd/tcljob.c:
	(getNextJob): cleanup list handling

2003-09-22 18:29 +0100  Paul Moosman  <pwmoosman@aol.com>  (c83aa3a9b0fe)

	* doc/ns_job.n:
	Minor updates to ns_job docs

2003-09-19 19:14 +0100  Mark Page  <mpagenva@aol.com>  (3394a74a6cfc)

	* ChangeLog, nsd/adpeval.c, nsd/adprequest.c:
	Fix ns_adp_include to direct its results to the current output
	buffer

2003-09-19 15:21 +0100  Paul Moosman  <pwmoosman@aol.com>  (b3d5397b98b0)

	* doc/ns_job.n, tests/api/ns_job.adp:
	Add new APIs threadlist, delete, and genid to docs

2003-09-19 15:20 +0100  Paul Moosman  <pwmoosman@aol.com>  (5df07f18e828)

	* nsd/tcljob.c:
	Job pools now global; queues created at runtime; add 'delete' and
	'threadlist' sub-commands

2003-09-16 18:49 +0100  Paul Moosman  <pwmoosman@aol.com>  (2cb5e15d25a1)

	* tests/api/ns_job.adp:
	Updated ns_job tests to latest API additions

2003-09-16 18:48 +0100  Paul Moosman  <pwmoosman@aol.com>  (3f6152c7a216)

	* nsd/tcljob.c:
	Add ns_job genID command; add description field to queue; return
	job's start time

2003-09-16 16:03 +0100  Paul Moosman  <pwmoosman@aol.com>  (90dc3267ae03)

	* tests/api/ns_job.adp: new file.
	* tests/api/ns_job.adp:
	ns_job unit test

2003-09-16 16:00 +0100  Paul Moosman  <pwmoosman@aol.com>  (bb83dce1954a)

	* nsd/tcljob.c:
	Fix locking problem with "ns_job wait"; return ID not script result

	Fixed the "ns_job jobs" API so that it returns the Job's ID rather
	than Job's results.

	Changed "?detached?" to "-detached".

	Fixed a problem with thread name by adding a queue "next" thread id.

	Moved the job creation outside the queue lock.

	Added a separate field for the script.

	Added Job Start/End time.

	Added timed wait.

2003-09-12 14:25 +0100  Mark Page  <mpagenva@aol.com>  (85ed9f79305d)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_14

2003-09-11 22:50 +0100  Paul Moosman  <pwmoosman@aol.com>  (a7b194983713)

	* doc/ns_job.n, nsd/tcljob.c:
	Minor cleanup to ns_job docs

2003-09-11 22:34 +0100  Paul Moosman  <pwmoosman@aol.com>  (06f16bb226fc)

	* doc/ns_job.n, nsd/tcljob.c:
	Add job_list and queue_list to man page

2003-09-11 18:55 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (2c2a65bacc82)

	* ChangeLog, nsd/init.tcl:
	Add 'lazyproc' functionality

	Optional configuration allows us to avoid putting all proc
	definitions in the init script for every interpreter. By wrapping
	the tcl 'unknown' command, we initialize procs the first time they
	are referenced.

2003-09-05 15:52 +0100  Paul Moosman  <pwmoosman@aol.com>  (96fb0b345c40)

	* nsd/tcljob.c:
	Fix typo in error message of ns_job command

2003-09-05 15:46 +0100  Paul Moosman  <pwmoosman@aol.com>  (878c4dbcdcea)

	* doc/ns_job.n:
	Fill out man page for ns_job

2003-09-04 03:18 +0100  Mark Page  <mpagenva@aol.com>  (c6a738c8f51c)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_13

2003-09-03 15:55 +0100  Mark Page  <mpagenva@aol.com>  (efddc845d517)

	* ChangeLog, nsd/tclinit.c:
	(NsTclICtlObjCmd): Fix intermittant core dump during oncleanup
	processing

	The error is in the Tcl_Obj for the script passed into ns_ictl on*
	callbacks was being saved and passed to the callbacks (this Tcl_Obj
	was then being shared among Interps, which is not allowed). Now,
	extract a copy of the script string, and pass that to the callbacks.

2003-08-27 17:30 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (fccb3e369235)

	* ChangeLog, nsd/adprequest.c:
	Do not log error for ns_adp_break

2003-08-26 19:12 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (66450f787b4a)

	* ChangeLog, nsd/tclinit.c:
	Fix 'oncleanup' and add 'ondelete' option for ns_ictl

2003-08-26 12:38 +0100  Mark Page  <mpagenva@aol.com>  (58e487dd3d51)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_12

2003-08-25 21:41 +0100  Mark Page  <mpagenva@aol.com>  (0be4ec3a1c7e)

	* ChangeLog, nsd/adprequest.c, nsd/return.c:
	Fix for HEAD requests

2003-08-21 21:11 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0368593e9c40)

	* ChangeLog, nsd/tclfile.c:
	Correctly detach/attach Tcl channels from and to Tcl interp

2003-08-19 23:30 +0100  Nathan Folkman  <nathan.folkman@gmail.com>  (7871b1e2fe3e)

	* nsd/return.c:
	Add more WebDAV status codes: 102, 422, 424, 425; further formatting
	tweaks

2003-08-19 23:17 +0100  Nathan Folkman  <nathan.folkman@gmail.com>  (fa467714cf7d)

	* ChangeLog:
	Formatting tweaks to ChangeLog

2003-08-19 23:14 +0100  Nathan Folkman  <nathan.folkman@gmail.com>  (705061d0b10c)

	* nsd/return.c:
	Fixed camel-case issues in status code description

2003-08-19 22:44 +0100  Rahul Bhargava  <rahul032213@aol.com>  (4e792aae5c2e)

	* ChangeLog, nsd/return.c:
	Add support for Transfer Encoding Chunked

	This allows nsd to send the Http 1.1 headers with transfer chunk
	encoding. Upper modules still have to do the job of generating the
	correct chunks etc.

	In future we can move this down into connio.c

2003-08-19 22:23 +0100  Nathan Folkman  <nathan.folkman@gmail.com>  (3ae9eda6cb4a)

	* ChangeLog, nsd/return.c:
	Add HTTP status codes 100, 101, 203, 207, 300, 307, 402, 416, 417,
	423, 507

	RFC 2616 (Hypertext Transfer Protocol -- HTTP/1.1) RFC 2518 (HTTP
	Extensions for Distributed Authoring -- WEBDAV)

2003-08-12 21:01 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (52ffec150351)

	* ChangeLog, nsd/adprequest.c:
	Do not log ns_adp_abort or ns_adp_break as errors

2003-08-08 16:02 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (2f5decb826f9)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_11

2003-08-08 15:52 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (1a4fa6961c74)

	* ChangeLog, nsd/mimetypes.c, sample-config.tcl:
	Add support for XHTML MIME Type (RFE: 563417)

2003-08-06 21:30 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (c75adb04d444)

	* ChangeLog, nsd/tclset.c:
	Fix ns_set split argument checking (bug 757849)

2003-08-06 20:25 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (25732435753d)

	* nslog/nslog.c:
	Fix formatting of usecs on logreqtime

2003-08-05 20:56 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (bb34c5a69daf)

	* ChangeLog, include/ns.h, nsd/conn.c, nslog/nslog.c, sample-
	config.tcl:
	Log request execution time in access log

	Merged in feature from 3.5 branch (with simpler implementation).

2003-07-18 19:01 +0100  Elizabeth Thomas  <eathomas93@aol.com>  (88827df1d315)

	* ChangeLog, nsd/nsconf.c, nsd/nsconf.h, nsd/nsd.h, nsd/tclinit.c:
	Add optional mutex around interp initialization via new config parm
	'tclinitlock'

	Useful on servers with large init scripts and many threads to avoid
	malloc lock contention which occurs while tcl evaluates the init
	script and populates its memory pool.

2003-07-18 14:47 +0100  Mark Page  <mpagenva@aol.com>  (db376b6afe05)

	* ChangeLog, nsd/adpeval.c:
	AdpEval needs to check outputPtr before use

2003-07-12 09:49 +0100  Zoran Vasiljevic  <zv@archiware.com>  (b3f80c226012)

	* ChangeLog, nslog/nslog.c:
	The "X-Forwarded-For" header existence is examined when logging the
	remote user

	Thus improving logs when users come from proxy servers and/or load
	balancers.

2003-07-10 14:17 +0100  Mark Page  <mpagenva@aol.com>  (33136331745e)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_9

2003-07-01 22:08 +0100  Mark Page  <mpagenva@aol.com>  (eced7782bf44)

	* ChangeLog, nsd/init.tcl:
	Protect against deadlock with nested ns_eval calls

2003-06-26 18:01 +0100  Mark Page  <mpagenva@aol.com>  (cb191346ab5e)

	* ChangeLog, nsd/adpeval.c:
	Fix problem where ns_adp_include was not propagating errors

2003-06-25 22:50 +0100  Mark Page  <mpagenva@aol.com>  (be1f14836f3c)

	* ChangeLog, nsd/init.tcl:
	(_ns_getscript): don't save the special env variable in the init
	script

2003-06-25 22:34 +0100  Mark Page  <mpagenva@aol.com>  (2d1a27b1585e)

	* ChangeLog, nsd/init.tcl:
	Serialize the non-init usages of ns_eval

2003-06-18 22:37 +0100  Mark Page  <mpagenva@aol.com>  (d97a7b3e03f0)

	* ChangeLog, nsthread/thread.c:
	Fix typo in Ns_ThreadCreate that was causing it to ignore the
	stacksize param

2003-06-18 21:51 +0100  Mark Page  <mpagenva@aol.com>  (5c7ecc9e2195)

	* ChangeLog, nsd/init.tcl:
	Fix problem with ns_eval where it was bleeding unintended changes to
	the global interp state

2003-06-06 19:34 +0100  Zoran Vasiljevic  <zv@archiware.com>  (93f2d182b445)

	* ChangeLog, nsd/queue.c:
	Fixed bug #749801: connsperthread

2003-06-03 16:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (80ef17bece6e)

	* nspd/Makefile:
	ALIBOBJS now set to LIBOBJS since it simplifies static/dynamic
	linking

2003-06-03 13:08 +0100  Zoran Vasiljevic  <zv@archiware.com>  (ead1f43de23a)

	* include/Makefile.global.in:
	Fixed to build static server images for Darwin platform

2003-06-02 18:24 +0100  Zoran Vasiljevic  <zv@archiware.com>  (38d475285663)

	* include/Makefile.global.in:
	Just leave some paths/flags for both static/dynamic builds since
	they don't hurt

2003-06-02 17:51 +0100  Zoran Vasiljevic  <zv@archiware.com>  (12ebd7e6800e)

	* include/Makefile.global.in, include/Makefile.module.in:
	Minor tweaks for seamless dynamic/static linking

2003-06-02 15:46 +0100  Zoran Vasiljevic  <zv@archiware.com>  (8b26fd9b8024)

	* ChangeLog, nsd/info.c, nsd/nsmain.c:
	Allows static linking of nsd executable in addition to dynamic

2003-06-02 15:42 +0100  Zoran Vasiljevic  <zv@archiware.com>  (d165e25557d4)

	* configure, configure.in, include/Makefile.module.in,
	nsthread/nsthreadtest.c:
	Added --disable-shared option and STATIC_BUILD variable

	This is mainly for being able to check with purify memtool.

2003-06-02 15:33 +0100  Zoran Vasiljevic  <zv@archiware.com>  (36cf46445fe0)

	* nsd/config.c:
	Replaced call to Tcl_DeleteInterp with the proper call to
	Ns_TclDestroyInterp

2003-05-31 21:42 +0100  Zoran Vasiljevic  <zv@archiware.com>  (493de24ed56a)

	* ChangeLog, doc/Ns_Cache.3, include/ns.h, nsd/cache.c:
	Added Ns_CacheTryLock as in RFE #725704

2003-05-30 20:31 +0100  Mark Page  <mpagenva@aol.com>  (5ef6d6c344d4)

	* ChangeLog, nsd/tclthread.c:
	Fix to 'ns_thread begindetached' to allow it to create detached
	threads

2003-05-28 19:56 +0100  Mark Page  <mpagenva@aol.com>  (f0758b2a517e)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_8

2003-05-28 19:19 +0100  Mark Page  <mpagenva@aol.com>  (99cecdf38698)

	* ChangeLog, tcl/form.tcl:
	Fix to ns_querygetall to suppress null sublists

2003-05-28 18:07 +0100  Mark Page  <mpagenva@aol.com>  (e63cb5ebf7f7)

	* ChangeLog, nsd/tclimg.c:
	Use binary channel to read img; eliminate double error string;
	correct compiler warning

2003-05-24 16:26 +0100  Zoran Vasiljevic  <zv@archiware.com>  (af4f0167a29b)

	* ChangeLog, nsd/info.c, nsd/tclinit.c:
	Workaround undefined Tcl_GetMemoryInfo(); call Tcl_FinalizeThread()
	from DeleteInterps()

	Added workaround for Tcl_GetMemoryInfo() which is not defined in Tcl
	if somebody undefines USE_THREAD_ALLOC. Generally, this call should
	be avoided altogether.

	Added call to Tcl_FinalizeThread() in the DeleteInterps() to
	properly finalize Tcl data on thread exit, thus closing the re-
	appearing memory leak from V3.3 nsd.

2003-05-21 14:36 +0100  Mark Page  <mpagenva@aol.com>  (d2bf8e4677f8)

	* ChangeLog, nsd/tclinit.c:
	Log warnings on bad calls to Ns_TclGetConn and Ns_TclInterpServer

2003-05-21 02:14 +0100  Mark Page  <mpagenva@aol.com>  (8cc3044ffeae)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_7

2003-05-21 01:47 +0100  Mark Page  <mpagenva@aol.com>  (54c735f6f05a)

	* ChangeLog, nsd/adpcmds.c:
	Error checking calls to ns_adp funcs

2003-05-20 21:12 +0100  Mark Page  <mpagenva@aol.com>  (671c25909b66)

	* ChangeLog, nsd/tclimg.c:
	Additional error check on gif reads

2003-05-20 05:32 +0100  Mark Page  <mpagenva@aol.com>  (56843e3cf464)

	* ChangeLog, nsd/tclinit.c, nsd/tclthread.c:
	Suppress byte-code compile for init scripts, fix fmr ref

2003-05-16 08:44 +0100  Zoran Vasiljevic  <zv@archiware.com>  (0a68aea14a74)

	* ChangeLog, nsdb/dbinit.c:
	Fixed hash table initialization in IncrCount to TCL_ONE_WORD_KEYS
	instead of TCL_STRING_KEYS

2003-05-14 21:13 +0100  Zoran Vasiljevic  <zv@archiware.com>  (617a4775d1c4)

	* ChangeLog, nsd/tclthread.c:
	Fixed compatibility to the 3.x ns_event command

	Fixed NsTclCondObjCmd to be compatible to the 3.x pendant in way it
	threats the optional timeout argument. The 3.x reverted to
	indefinite (i.e. non-timewait) condvar waits when the optional
	"timeout" argument was given as zero.

	The 4.x version just exited with NS_TIMEOUT (= 0) in such cases
	breaking Tcl scripts written for 3.x.

	The corrective measure is to check the passed timeout value and if
	== 0, revert to non-timewait condition waits as the 3.x does (did).

2003-05-13 17:56 +0100  Mark Page  <mpagenva@aol.com>  (b7198081e7f2)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_6

2003-05-12 13:36 +0100  Mark Page  <mpagenva@aol.com>  (4f4a905fdac0)

	* ChangeLog, nsd/urlencode.c:
	More ctrs get urlencoded, including +

2003-04-25 20:35 +0100  Mark Page  <mpagenva@aol.com>  (2793dac0116b)

	* ChangeLog, nsd/tclvar.c:
	Fix nsv_array exists to return true for empty nsvs

2003-04-24 12:36 +0100  Mark Page  <mpagenva@aol.com>  (6b37f06b5171)

	* ChangeLog, nsd/queue.c:
	Return error status to client on pre-auth error return

2003-04-23 19:53 +0100  Mark Page  <mpagenva@aol.com>  (7880ad643c91)

	* ChangeLog, nsd/log.c:
	Suppress trailing space on log message

2003-04-22 19:17 +0100  Nathan Folkman  <nathan.folkman@gmail.com>  (0cf944edd2a9)

	* ChangeLog, nsd/log.c:
	Fix bug causing first two args to "ns_log" to be improperly
	concatenated

2003-04-16 21:20 +0100  Mark Page  <mpagenva@aol.com>  (3f122dc18200)

	* ChangeLog, nsd/modload.c:
	Fixed parsing of explicit module init symbol

2003-04-10 23:00 +0100  Nathan Folkman  <nathan.folkman@gmail.com>  (81a97daadc5d)

	* doc/Ns_Adp.3, doc/Ns_Alloc.3, doc/Ns_Auth.3, doc/Ns_Cache.3,
	doc/Ns_Cond.3, doc/Ns_Config.3, doc/Ns_ConnCopy.3,
	doc/Ns_ConnDriver.3, doc/Ns_ConnRead.3, doc/Ns_ConnRequest.3,
	doc/Ns_ConnReturn.3, doc/Ns_ConnSend.3, doc/Ns_CritSec.3,
	doc/Ns_DString.3, doc/Ns_Db.3, doc/Ns_DbDriver.3, doc/Ns_DbPool.3,
	doc/Ns_DbSp.3, doc/Ns_DbUtil.3, doc/Ns_Encrypt.3, doc/Ns_Exec.3,
	doc/Ns_ExtDb.3, doc/Ns_Fd.3, doc/Ns_Fetch.3, doc/Ns_Filter.3,
	doc/Ns_HttpTime.3, doc/Ns_Htuu.3, doc/Ns_Index.3, doc/Ns_InetAddr.3,
	doc/Ns_Info.3, doc/Ns_IntPrint.3, doc/Ns_List.3, doc/Ns_Location.3,
	doc/Ns_Log.3, doc/Ns_Master.3, doc/Ns_Mime.3, doc/Ns_Module.3,
	doc/Ns_Mutex.3, doc/Ns_Nsd.3, doc/Ns_Pathname.3, doc/Ns_Pool.3,
	doc/Ns_ProcInfo.3, doc/Ns_QuoteHtml.3, doc/Ns_RWLock.3,
	doc/Ns_Rand.3, doc/Ns_Reentrant.3, doc/Ns_Register.3,
	doc/Ns_Request.3, doc/Ns_RollFile.3, doc/Ns_Sched.3, doc/Ns_Sema.3,
	doc/Ns_ServerSpecific.3, doc/Ns_Set.3, doc/Ns_Signal.3,
	doc/Ns_SockCallback.3, doc/Ns_SockErrno.3, doc/Ns_SockIO.3,
	doc/Ns_String.3, doc/Ns_TclDbGetHandle.3, doc/Ns_TclFile.3,
	doc/Ns_TclInit.3, doc/Ns_TclRegister.3, doc/Ns_TclSet.3,
	doc/Ns_TclThread.3, doc/Ns_Thread.3, doc/Ns_Thread2.3,
	doc/Ns_ThreadAlloc.3, doc/Ns_Time.3, doc/Ns_Tls.3, doc/Ns_Uid.3,
	doc/Ns_Url.3, doc/Ns_UrlEncode.3, doc/Ns_UrlSpecific.3,
	doc/Ns_UrlToFile.3, doc/ns_addr.n, doc/ns_adp.n, doc/ns_at.n,
	doc/ns_cache.n, doc/ns_checkurl.n, doc/ns_config.n, doc/ns_conn.n,
	doc/ns_crash.n, doc/ns_crypt.n, doc/ns_db.n, doc/ns_env.n,
	doc/ns_eval.n, doc/ns_file.n, doc/ns_filter.n, doc/ns_getchannels.n,
	doc/ns_geturl.n, doc/ns_html.n, doc/ns_img.n, doc/ns_kill.n,
	doc/ns_library.n, doc/ns_markfordelete.n, doc/ns_module.n,
	doc/ns_modulepath.n, doc/ns_parseheader.n, doc/ns_parsequery.n,
	doc/ns_purgefiles.n, doc/ns_rand.n, doc/ns_requestauthorize.n,
	doc/ns_rollfile.n, doc/ns_share.n, doc/ns_shutdown.n,
	doc/ns_sleep.n, doc/ns_sock.n, doc/ns_sync.n, doc/ns_tmp.n,
	doc/ns_uuencode.n, doc/ns_writefp.n:
	Updated .TH to "4.0 AOLserver"

2003-04-10 21:17 +0100  Mark Page  <mpagenva@aol.com>  (5e1f76190242)

	* ChangeLog:
	Add ChangeLog entry for AOLserver_v4_r0_beta_5 tag

2003-04-10 17:09 +0100  Nathan Folkman  <nathan.folkman@gmail.com>  (bc12a9c8caa0)

	* doc/Ns_Adp.3, doc/Ns_Alloc.3, doc/Ns_Auth.3, doc/Ns_Cache.3,
	doc/Ns_Cond.3, doc/Ns_Config.3, doc/Ns_ConnCopy.3,
	doc/Ns_ConnDriver.3, doc/Ns_ConnRead.3, doc/Ns_ConnRequest.3,
	doc/Ns_ConnReturn.3, doc/Ns_ConnSend.3, doc/Ns_CritSec.3,
	doc/Ns_DString.3, doc/Ns_Db.3, doc/Ns_DbDriver.3, doc/Ns_DbPool.3,
	doc/Ns_DbSp.3, doc/Ns_DbUtil.3, doc/Ns_Encrypt.3, doc/Ns_Exec.3,
	doc/Ns_ExtDb.3, doc/Ns_Fd.3, doc/Ns_Fetch.3, doc/Ns_Filter.3,
	doc/Ns_HttpTime.3, doc/Ns_Htuu.3, doc/Ns_Index.3, doc/Ns_InetAddr.3,
	doc/Ns_Info.3, doc/Ns_IntPrint.3, doc/Ns_List.3, doc/Ns_Location.3,
	doc/Ns_Log.3, doc/Ns_Master.3, doc/Ns_Mime.3, doc/Ns_Module.3,
	doc/Ns_Mutex.3, doc/Ns_Nsd.3, doc/Ns_Pathname.3, doc/Ns_Pool.3,
	doc/Ns_ProcInfo.3, doc/Ns_QuoteHtml.3, doc/Ns_RWLock.3,
	doc/Ns_Rand.3, doc/Ns_Reentrant.3, doc/Ns_Register.3,
	doc/Ns_Request.3, doc/Ns_RollFile.3, doc/Ns_Sched.3, doc/Ns_Sema.3,
	doc/Ns_ServerSpecific.3, doc/Ns_Set.3, doc/Ns_Signal.3,
	doc/Ns_SockCallback.3, doc/Ns_SockErrno.3, doc/Ns_SockIO.3,
	doc/Ns_String.3, doc/Ns_TclDbGetHandle.3, doc/Ns_TclFile.3,
	doc/Ns_TclInit.3, doc/Ns_TclRegister.3, doc/Ns_TclSet.3,
	doc/Ns_TclThread.3, doc/Ns_Thread.3, doc/Ns_Thread2.3,
	doc/Ns_ThreadAlloc.3, doc/Ns_Time.3, doc/Ns_Tls.3, doc/Ns_Uid.3,
	doc/Ns_Url.3, doc/Ns_UrlEncode.3, doc/Ns_UrlSpecific.3,
	doc/Ns_UrlToFile.3, doc/ns_addr.n, doc/ns_adp.n, doc/ns_at.n,
	doc/ns_cache.n, doc/ns_checkurl.n, doc/ns_config.n, doc/ns_conn.n,
	doc/ns_crash.n, doc/ns_crypt.n, doc/ns_db.n, doc/ns_env.n,
	doc/ns_eval.n, doc/ns_file.n, doc/ns_filter.n, doc/ns_getchannels.n,
	doc/ns_html.n, doc/ns_httptime.n, doc/ns_img.n, doc/ns_info.n,
	doc/ns_kill.n, doc/ns_library.n, doc/ns_log.n, doc/ns_logroll.n,
	doc/ns_markfordelete.n, doc/ns_module.n, doc/ns_modulepath.n,
	doc/ns_normalizepath.n, doc/ns_parseheader.n, doc/ns_parsequery.n,
	doc/ns_proc.n, doc/ns_purgefiles.n, doc/ns_rand.n,
	doc/ns_requestauthorize.n, doc/ns_return.n, doc/ns_rollfile.n,
	doc/ns_sched.n, doc/ns_set.n, doc/ns_share.n, doc/ns_shutdown.n,
	doc/ns_sleep.n, doc/ns_sock.n, doc/ns_sync.n, doc/ns_thread.n,
	doc/ns_time.n, doc/ns_tmp.n, doc/ns_url2file.n, doc/ns_urlencode.n,
	doc/ns_uuencode.n, doc/ns_writefp.n:
	Synch documentation from aolserver_v35_bp; newer docs were not over-
	written

2003-04-10 15:37 +0100  Mark Page  <mpagenva@aol.com>  (9960ce4343cf)

	* nsd/init.tcl:
	Fix 'rename' when sourcing Tcl library files

2003-04-07 22:08 +0100  Mark Page  <mpagenva@aol.com>  (25551fdba7f4)

	* nsd/nsmain.c, nsd/tclthread.c:
	Cleanup and consolidate use of conf.started flag

2003-04-07 21:10 +0100  Mark Page  <mpagenva@aol.com>  (337905d19e3e)

	* ChangeLog, nsd/tclthread.c:
	Sync tclthread startup with server start

2003-04-04 14:17 +0100  Mark Page  <mpagenva@aol.com>  (7bae269bf7cc)

	* ChangeLog, nsd/tclcmds.c, nsd/tclinit.c:
	Moved interp trace functionality into ns_ictl

2003-04-03 20:45 +0100  Mark Page  <mpagenva@aol.com>  (eb090e0526a3)

	* ChangeLog, nsd/tclcmds.c, nsd/tclinit.c:
	Define ns_register_interptrace

2003-04-01 02:47 +0100  Scott S. Goodwin  <scott@scottg.net>  (3b0bcf86b7fa)

	* nsd/driver.c, nssock/nssock.c, nsssl/nsssl.c:
	Improved Ns_DriverInit changes made earlier per Jim's input

2003-03-31 20:45 +0100  Scott S. Goodwin  <scott@scottg.net>  (d71615e76ef5)

	* ChangeLog, include/ns.h, nsd/driver.c, nssock/nssock.c,
	nsssl/nsssl.c:
	Modified Ns_DriverInit to take new Ns_DriverInitData structure

	Instead of passing all args as parameters to Ns_DriverInit, a comm
	module must now create an Ns_DriverInitData structure and populate
	it with appropriate values (see include/ns.h) and pass that in the
	call to Ns_DriverInit. The Ns_DriverInitData structure is versioned
	so that we can extend it later without affecting other modules.

2003-03-28 21:39 +0000  Mark Page  <mpagenva@aol.com>  (3affde02f8f5)

	* ChangeLog, nsd/tclhttp.c:
	Fix to tclhttp.c, unitialized var hdrs

2003-03-21 22:29 +0000  Mark Page  <mpagenva@aol.com>  (5d08522fd081)

	* ChangeLog:
	beta4 tag

2003-03-19 23:34 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (12bd74a2c4cb)

	* ChangeLog:
	Add missing ChangeLog entry about aolserver_v4_r0_beta_3 tag

2003-03-19 17:06 +0000  Mark Page  <mpagenva@aol.com>  (32e2670bfa6f)

	* ChangeLog, nsd/tclhttp.c:
	Add method arg to ns_http queue api to allow sending POST as well as
	GET

	Also fixed some minor formatting.

2003-03-19 13:54 +0000  Mark Page  <mpagenva@aol.com>  (dae9ed53cf3b)

	* ChangeLog, nsext/nsext.c:
	Change back to ns_socketpair for local proxies

2003-03-19 09:18 +0000  Zoran Vasiljevic  <zv@archiware.com>  (be47e0c1a7ed)

	* ChangeLog, nsd/modload.c:
	Added fallback for loading shared libs in addition to bundles for
	Darwin

2003-03-19 09:00 +0000  Zoran Vasiljevic  <zv@archiware.com>  (860fa200b284)

	* include/ns.h, nsd/config.c:
	Added Ns_GetVersion similar to Tcl_GetVersion and set of supporting
	macros

2003-03-13 17:18 +0000  Zoran Vasiljevic  <zv@archiware.com>  (2999895d9292)

	* include/ns.h:
	Bugfix for #703061

2003-03-11 05:46 +0000  Scott S. Goodwin  <scott@scottg.net>  (ba2ab56b3e84)

	* ChangeLog, nscgi/nscgi.c:
	Set SERVER_NAME correctly for cgi programs

2003-03-10 16:02 +0000  Mark Page  <mpagenva@aol.com>  (e866f0102695)

	* nsd/sched.c:
	Additional change to control loop for sched thread shutdown of event
	threads

2003-03-10 15:31 +0000  Mark Page  <mpagenva@aol.com>  (5f96b3b416fe)

	* ChangeLog, nsd/sched.c:
	Fix problem with shutting down Sched's event threads on shutdown

2003-03-07 18:08 +0000  Zoran Vasiljevic  <zv@archiware.com>  (c16fa0c32184)

	* ChangeLog, include/Makefile.global.in, include/ns.h, nscgi/nscgi.c,
	nscp/nscp.c, nsd/adpeval.c, nsd/adpparse.c, nsd/binder.c,
	nsd/config.c, nsd/conn.c, nsd/connio.c, nsd/dns.c, nsd/driver.c,
	nsd/dstring.c, nsd/encoding.c, nsd/fastpath.c, nsd/index.c,
	nsd/info.c, nsd/init.tcl, nsd/lisp.c, nsd/listen.c, nsd/log.c,
	nsd/modload.c, nsd/nsmain.c, nsd/pidfile.c, nsd/queue.c,
	nsd/request.c, nsd/rollfile.c, nsd/sched.c, nsd/sockcallback.c,
	nsd/tclatclose.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c,
	nsd/tclinit.c, nsd/tcljob.c, nsd/tclmisc.c, nsd/tclshare.c,
	nsd/tclsock.c, nsd/tclvar.c, nsd/tclxkeylist.c, nsd/urlencode.c,
	nsd/urlspace.c, nsdb/dbinit.c, nsdb/dbtcl.c, nsext/nsext.c,
	nslog/nslog.c, nspd/log.c, nspd/main.c, nsperm/nsperm.c,
	nsthread/mutex.c, nsthread/nsthreadtest.c, nsthread/pthread.c,
	tcl/init.tcl:
	Remove unused variables; fix warnings about non-initialized vars;
	CONST-ified according to Tcl 8.4+ rules

	bin/init.tcl: _ns_getscript forces import of namespaced commands

	tcl/init.tcl: sets auto_path to start with our private library first

	include/Makefile.global.in: allows for building with Solaris 2.6 and
	later

2003-03-06 22:31 +0000  Mark Page  <mpagenva@aol.com>  (66124686b17d)

	* ChangeLog, nsd/adpeval.c:
	Define Variable length array component of InterpPage as 1 rather than 0 to avoid some picky compiler's complaints

2003-03-06 20:12 +0000  Mark Page  <mpagenva@aol.com>  (2c8d76088628)

	* sample-config.tcl:
	Add additional i18n example parameters

2003-03-06 19:39 +0000  Mark Page  <mpagenva@aol.com>  (56b72b6d69f6)

	* tcl/charsets.tcl: new file.
	* ChangeLog, include/ns.h, nsd/adprequest.c, nsd/conn.c,
	nsd/encoding.c, nsd/form.c, nsd/nsd.h, nsd/queue.c, nsd/server.c,
	nsd/urlencode.c, tcl/charsets.tcl, tcl/form.tcl:
	Added Tcl I18N support functions from OACS, with some changes to
	work within 4.0

2003-03-05 19:56 +0000  Mark Page  <mpagenva@aol.com>  (de9a2d623d09)

	* ChangeLog, nsd/adpeval.c:
	Correctly handle Tcl errors thrown from within an ADP script block

2003-03-05 17:15 +0000  Zoran Vasiljevic  <zv@archiware.com>  (ce673db945cd)

	* ChangeLog, nsd/init.tcl:
	(_ns_getscript): handle commands imported from other namespaces

2003-03-05 15:58 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (e6c4c618b52e)

	* ChangeLog:
	Add missing ChangeLog entry for nscgi fix

2003-03-05 14:40 +0000  Mark Page  <mpagenva@aol.com>  (e89f578f1f90)

	* ChangeLog, nsd/adpcmds.c, nsd/adpeval.c, nsd/nsd.h:
	Add optional switches to ns_adp_parse: -cwd <path>, -savedresult
	<varname>

	savedresult supports usages which require the adp script's result
	separate from the output buffer (which is the func result).

	cwd supports prespecifying the initial cwd that the script will be
	executed from.

2003-03-03 14:42 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (431d1106ca63)

	* ChangeLog, nscgi/nscgi.c:
	Pass SCRIPT_NAME as an environment variable to the CGI script

2003-02-25 17:34 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (ae3ae9b257d0)

	* ChangeLog, nsd/tclimg.c:
	Fixed bug in ns_jegsize for images that included a DHT

	Removed AppendDims command which has been replaced with
	AppendObjDims.

2003-02-25 17:12 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (1fe959f1185c)

	* ChangeLog, tcl/fastpath.tcl:
	(_ns_dirlist): fix bug adding extra slash to directory links

2003-02-25 17:12 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (ce40ba9a3599)

	* sample-config.tcl:
	Added fast path config example and comments

2003-02-25 15:34 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (8c34b19e2997)

	* ChangeLog, nsd/init.tcl:
	Add logging of errorInfo and errorCode globals to _ns_sourcefile

2003-02-07 16:29 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (fb17963a6ff7)

	* ChangeLog:
	Tag aolserver_v4_r0_beta_2

2003-02-07 16:27 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (41ea12e047c6)

	* configure:
	Fix rest of cc defaults to gcc

2003-02-07 16:21 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (2a0e6b456c33)

	* tcl/sendmail.tcl:
	Apply patch 669230 for bugs 669217/669844: fix stripping of e-mail
	addressees so that headers still have the pretty address name

2003-02-07 14:41 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (ad3c2f5a73cb)

	* nsthread/winthread.c:
	Fix incorrect win32 thread patch

2003-02-07 03:05 +0000  Mark Page  <mpagenva@aol.com>  (5412c7c43c20)

	* ChangeLog, nsd/return.c:
	Fix bug #674033: status code for 'Bad Request' is 400 not 401

2003-02-06 23:21 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (fa0d7b08bc30)

	* ChangeLog, nsthread/winthread.c:
	Fix crash on tclsh close: don't create suspended threads

2003-02-05 14:28 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (16013db39618)

	* ChangeLog, nsext/nsext.c:
	Fix LocalProxy so that Ns_CloseOnExec is called after the file
	descriptors are open

2003-02-04 23:28 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (9310bb2c1702)

	* win32/aolserver.dsw, win32/cgitest/cgitest.dsp,
	win32/cgitest/main.c, win32/group/grpall.dsp,
	win32/group/grpcore.dsp, win32/group/grpopenacs.dsp,
	win32/main/main.dsp, win32/nscgi/nscgi.dsp, win32/nscp/nscp.dsp,
	win32/nsd/nsd.dsp, win32/nsdb/nsdb.dsp, win32/nslog/nslog.dsp,
	win32/nsperm/nsperm.dsp, win32/nssock/nssock.dsp,
	win32/nsthread/nsthread.dsp, win32/test/nsd.tcl,
	win32/test/servers/test/pages/cgitest.bat,
	win32/test/servers/test/pages/index.adp,
	win32/threadtest/threadtest.dsp: new file.
	* ChangeLog, win32/aolserver.dsw, win32/cgitest/cgitest.dsp,
	win32/cgitest/main.c, win32/group/grpall.dsp,
	win32/group/grpcore.dsp, win32/group/grpopenacs.dsp,
	win32/main/main.dsp, win32/nscgi/nscgi.dsp, win32/nscp/nscp.dsp,
	win32/nsd/nsd.dsp, win32/nsdb/nsdb.dsp, win32/nslog/nslog.dsp,
	win32/nsperm/nsperm.dsp, win32/nssock/nssock.dsp,
	win32/nsthread/nsthread.dsp, win32/test/nsd.tcl,
	win32/test/servers/test/pages/cgitest.bat,
	win32/test/servers/test/pages/index.adp,
	win32/threadtest/threadtest.dsp:
	Bring back Win32 build files

2003-02-04 23:27 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (52f22e13b088)

	* ChangeLog, nsd/tclmisc.c:
	Fixed arg checking in NsTclStrftimeObjCmd which implements
	ns_fmttime

2003-02-04 23:10 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (7f46abd7135d)

	* nscp/nscp.c, nsd/adpeval.c, nsd/driver.c, nsd/encoding.c,
	nsd/exec.c, nsd/fastpath.c, nsd/fd.c, nsd/info.c, nsd/init.c,
	nsd/listen.c, nsd/modload.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/pathname.c, nsd/request.c, nsd/server.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/tclenv.c, nsd/tclfile.c, nsd/tclhttp.c,
	nsd/tclimg.c, nsd/tclsock.c, nsd/tclxkeylist.c, nsd/urlencode.c,
	nsd/urlopen.c, nssock/nssock.c:
	Changes for Win32 support

2003-02-04 23:04 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (ec5e94c51eeb)

	* nsd/getopt.c, nsd/getopt.h, nsd/nswin32.c: new file.
	* nsd/getopt.c, nsd/getopt.h, nsd/nswin32.c:
	getopt.c imported for Win32 support

2003-02-04 22:59 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (3f34b2961faf)

	* include/ns.h, nscgi/nscgi.c:
	Added Win32 support

2003-02-04 22:55 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (82a963e35c00)

	* include/nsthread.h:
	Use _WIN32 instead of WIN32

2003-02-03 16:07 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (c131691558d9)

	* ChangeLog, nsd/auth.c, nsd/conn.c, nsd/server.c, nsd/tclmisc.c,
	nsd/urlencode.c, nsthread/pthread.c, nsthread/winthread.c,
	tcl/http.tcl:
	Minor comment cleanup

2003-02-03 14:35 +0000  Jamie Rasmussen  <jrasmuss@mle.i.e.>  (4b267112ebf5)

	* tcl/sendmail.tcl:
	Fix bug #632265: some mail servers fail when presented with a HELO
	with a space

2003-02-01 23:52 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (c4dc537173fe)

	* tcl/tcl.html: deleted file.
	* tcl/tcl.html:
	Delete empty documentation

2003-02-01 23:45 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (be5ea1da9990)

	* ChangeLog, sample-config.tcl:
	Added configuration example for web stats

2003-02-01 23:44 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (1961c161ba37)

	* tcl/stats.tcl:
	Fixed href bug with index.adp page; changed 'directory' parameter to
	'url'

2003-02-01 23:13 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (570bc0bd1edd)

	* tcl/stats.tcl: new file.
	* tcl/stats.tcl:
	Web based stats interface

2003-01-31 22:47 +0000  Mark Page  <mpagenva@aol.com>  (e3c8fcd8d3cd)

	* ChangeLog, include/ns.h, nsd/conn.c, nsd/connio.c, nsd/encoding.c,
	nsd/form.c, nsd/nsconf.c, nsd/nsd.h, nsd/queue.c, nsd/return.c,
	nsd/tclcmds.c, nsd/tclresp.c, nsd/urlencode.c, sample-config.tcl:
	Add in I18N capabilities derived from the OACS I18N design

	This set of changes is just those which are supported within the nsd
	C-code.

2003-01-29 04:38 +0000  Peter Jansson  <petej@clickvision.com>  (307916d54f0d)

	* nsd/return.c:
	Since I/O system was fixed elsewhere, the previous rev was no longer
	necessary

2003-01-29 04:34 +0000  Peter Jansson  <petej@clickvision.com>  (7c4e727d9eb9)

	* nsd/return.c:
	In Ns_ConnReturnData, always write the queued data

	If the queued data is only written if SKIPBODY is not set, then HEAD
	requests generate no data, not even the headers.

2003-01-29 01:09 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (52963638bfb5)

	* ChangeLog, tcl/fastpath.tcl:
	Changed path for configuration parameters to be
	ns/server/<server>/fastpath

	This change is needed to support a corresponding change in
	nsd/server.c.

2003-01-28 19:21 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (b79ee14651fe)

	* ChangeLog, nsd/init.tcl:
	Interp is now marked for delete only in the case of a TCL_ERROR

2003-01-27 22:28 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (230d02383d09)

	* nsd/init.tcl:
	Made changes to ns_eval suggested by Jeff Hobbs to address bug
	#675506

2003-01-24 20:57 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (5bb0a1b20e37)

	* ChangeLog, configure:
	Make the default compiler for the configure script gcc

2003-01-24 18:29 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (1d45ff9f0298)

	* README, include/Makefile.global.in:
	Add support for purify

2003-01-24 01:19 +0000  Jim Davidson  <jgdavidson@aol.com>  (da919c9d7730)

	* nsd/adpeval.c:
	No longer invalidate strings of adp script chunk objs

	Was causing problems with error messages. Bummer, waste of memory.

2003-01-23 20:28 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (eeb5d798a8c7)

	* ChangeLog:
	First 4.0 beta tag

2003-01-23 18:29 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (b8fc677eedcf)

	* nsd/init.tcl:
	Reinitialize ::errorCode and ::errorInfo and end of variable cleanup

	The default Tcl unknown command expects them to exist. This fixes a
	bug where they were both being unset at the end of a connection
	during variable cleanup.

2003-01-20 23:15 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (68a29ea18688)

	* nsd/tcljob.c:
	Added ns_job queues command

2003-01-19 17:01 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (8ca5b78e5ed3)

	* sample-config.tcl:
	Updated password creation instructions to be a little clearer

2003-01-19 15:37 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (8639b3857048)

	* ChangeLog, sample-config.tcl:
	Added new section for control port configuration

2003-01-19 14:40 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (a9330e0100b1)

	* ChangeLog, nscp/nscp.c:
	Control port logging now defaults to off

2003-01-18 19:56 +0000  Jim Davidson  <jgdavidson@aol.com>  (b87ff1ca7adb)

	* nsthread/pthread.c, nsthread/winthread.c: new file.
	* nsthread/cond.c: deleted file.
	* ChangeLog, include/nsthread.h, nsthread/Makefile, nsthread/cond.c,
	nsthread/error.c, nsthread/memory.c, nsthread/mutex.c,
	nsthread/nsthreadtest.c, nsthread/pthread.c, nsthread/reentrant.c,
	nsthread/thread.c, nsthread/thread.h, nsthread/time.c,
	nsthread/tls.c, nsthread/winthread.c:
	Brought forward nsthread library from 3.5

2003-01-18 19:24 +0000  Jim Davidson  <jgdavidson@aol.com>  (a2dad63ce3db)

	* ChangeLog, nsd/auth.c, nsd/conn.c, nsd/form.c, nsd/httptime.c,
	nsd/info.c, nsd/log.c, nsd/mimetypes.c, nsd/nsconf.c, nsd/nsd.h,
	nsd/nsmain.c, nsd/pathname.c, nsd/random.c, nsd/tclcmds.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclinit.c,
	nsd/tclmisc.c, nsd/tclrequest.c, nsd/tclresp.c, nsd/tclset.c,
	nsd/tclsock.c, nsd/tclthread.c, nsd/urlencode.c, nsd/urlopen.c:
	Remove string commands

2003-01-18 18:24 +0000  Jim Davidson  <jgdavidson@aol.com>  (b10b1ef9dc91)

	* ChangeLog, nsd/conn.c, nsd/connio.c, nsd/driver.c, nsd/init.c,
	nsd/nsd.h, nsd/queue.c, nsd/return.c, nsd/server.c, nsd/tclinit.c:
	Fix handling of servPtr and location between the Sock, Driver, and
	Conn structures for Host header based connections

2003-01-18 11:42 +0000  Zoran Vasiljevic  <zv@archiware.com>  (d8a511fdb6e3)

	* ChangeLog, nsd/init.tcl:
	Enable "package require" in initialzing interp; fix ns_eval
	return/error value

	* added _ns_getpackages to enable "package require".

	* fixed various issues in ns_getscript related to loading Tcl
	modules which define namespaced alternatives of standard Tcl
	commands.

	* fixed ns_eval to return value/error and made compatible with
	standard Tcl "eval" and AOLserver "ns_eval" from 3.x.

	* made the entire file little more readable.

2003-01-17 22:33 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (5ad4851e9251)

	* nscp/nscp.c:
	Moved user from thread name to log notice; more log notice format
	changes

2003-01-17 21:29 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (cb7f9fedb24d)

	* nscp/nscp.c:
	Cleaned up command logging notices to be more consistent:

	Notice: nscp:<num> <script> Notice: nscp:<num> done

2003-01-17 19:56 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (4dc9244585f2)

	* nsd/init.tcl:
	Removed curly braces preventing ns_ictcl from being evaluated
	correctly

2003-01-17 18:42 +0000  Mark Page  <mpagenva@aol.com>  (ed277ab5c6e1)

	* ChangeLog, nsd/driver.c:
	(SockRead): null-terminate the content at the specified content-
	length

	This fixes a problem when some browsers add extra CRLF characters
	beyond the specified content-length on a POST. (See this by using IE
	to POST data).

2003-01-16 16:41 +0000  Elizabeth Thomas  <eathomas93@aol.com>  (22c4148414fb)

	* ChangeLog, nsd/tclmisc.c:
	Fix WordEndsInSemi so that ns_striphtml correctly handles ampersands
	that are not followed by a space or semicolon

2003-01-15 21:04 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (c610a846aeac)

	* nsd/adpcmds.c:
	Fix to provide backwards compatibility for ns_adp_argv command with
	argv's which point to NULL data

2003-01-14 22:08 +0000  Nathan Folkman  <nathan.folkman@gmail.com>  (fccd428b2ac4)

	* nsd/log.c:
	Updated ns_logctl get and ns_logctl flush to set count to 0

2002-12-14 18:25 +0000  Jim Davidson  <jgdavidson@aol.com>  (fe552590890b)

	* nsd/tclmisc.c:
	ns_sleep now uses Tcl_Sleep instead of select()

2002-11-06 19:11 +0000  Jeremy Collins  <jcollins@phpsource.net>  (1b5754d4a699)

	* ChangeLog, nsd/init.tcl:
	Fixed namespace bug

2002-11-06 15:18 +0000  Jeremy Collins  <jcollins@phpsource.net>  (df434c83f459)

	* ChangeLog, nsd/adpparse.c:
	Changed ParseAtts to make it compatible with how parsing works in
	3.x

2002-11-06 06:06 +0000  Jeremy Collins  <jcollins@phpsource.net>  (2733c7a4cd57)

	* ChangeLog, nsd/tclset.c:
	Make ns_set idelkey|delkey actually delete the key

2002-11-06 05:27 +0000  Jeremy Collins  <jcollins@phpsource.net>  (1f460b26e01c)

	* ChangeLog, nsd/adpparse.c:
	(Parse): handle registered tags inside of html tags e.g. <td
	bgcolor='<tag n='v'>'>

2002-11-05 20:24 +0000  Dan Bradley  <danb@aol.net>  (73a3a5d5f2f6)

	* doc/ns_geturl.n, doc/ns_guesstype.n, doc/ns_headers.n:
	Initial documentation

2002-11-03 20:20 +0000  Jim Davidson  <jgdavidson@aol.com>  (ee7694363958)

	* ChangeLog, nsd/fastpath.c:
	Fixed bug with non-server specific cache names

2002-11-02 18:05 +0000  Jeremy Collins  <jcollins@phpsource.net>  (a7b9da76b08c)

	* ChangeLog, nsd/adpparse.c:
	(ParseAtts): parse ADP attribute values with spaces

2002-10-30 00:41 +0000  Jim Davidson  <jgdavidson@aol.com>  (6460a22c2263)

	* ChangeLog:
	Add missing ChangeLog entries

2002-10-30 00:41 +0000  Jim Davidson  <jgdavidson@aol.com>  (a16ed2d7fc2b)

	* sample-config.tcl:
	Added examples for connection thread pools and Host header virtual
	servers

2002-10-30 00:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (1e85222f357e)

	* nsd/conn.c:
	Changed "ns_conn files" command to return names of file upload
	widgets

	Moved access to other meta data to new fileoffset, filelength, and
	fileheaders subcommands. Also, removed the ns_conn string command
	instead of updating.

2002-10-30 00:02 +0000  Jim Davidson  <jgdavidson@aol.com>  (4548d076ffc8)

	* tcl/form.tcl:
	Updat to use new ns_conn fileoffset, filelength, and fileheaders for
	file uploads

2002-10-30 00:02 +0000  Jim Davidson  <jgdavidson@aol.com>  (5fafe6c91316)

	* nsd/tclcmds.c:
	Removed NsTclConnCmd and NsTclServerCmd string commands

2002-10-30 00:02 +0000  Jim Davidson  <jgdavidson@aol.com>  (d257ab577352)

	* nsd/server.c:
	Support for configuring multiple named thread pools for virtual
	servers

2002-10-30 00:02 +0000  Jim Davidson  <jgdavidson@aol.com>  (b523a9c92bbb)

	* nsd/queue.c:
	Implement multiple named thread pools for virtual servers and Host
	header based virtual servers

	The ns_server command now takes an optional pool parameter to get
	connection data by thread pool.

2002-10-30 00:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (50b5fc026278)

	* nsd/nsmain.c:
	Add call to load non-virtual server modules (listed in config
	ns/modules section)

2002-10-30 00:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (124d085a52d6)

	* nsd/nsd.h:
	Add FormFile and ConnPool structures; remove thread pool struct from
	NsServer

2002-10-30 00:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (737063ee0ef7)

	* nsd/info.c:
	Fixed crash bug with NULL server

2002-10-30 00:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (b1f18724d6a8)

	* nsd/form.c:
	File upload headers, offsets, and lengths now saved to be accessible
	via ns_conn options

2002-10-30 00:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (c674cd567fc1)

	* nsd/driver.c:
	Added Host header based virtual server support

2002-10-30 00:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (9c8fb6b67ed6)

	* doc/install-doc:
	Use /bin/sh to invoke mkLinks

2002-10-30 00:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (111bdd2bd737)

	* Makefile:
	Uses /bin/sh to invoke install-doc

2002-10-25 22:31 +0100  Jeremy Collins  <jcollins@phpsource.net>  (cf39004438a2)

	* nsd/conn.c:
	Bug: [ns_conn isconnected] was returning 0 when there is a
	connection and 1 when there is not

2002-10-15 00:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (7340e12e136d)

	* nsd/nsmain.c:
	Set server started state to 0 at start of Ns_Main; move Tcl object
	init to tclinit.c

2002-10-15 00:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (4b94dcbd3550)

	* tcl/form.tcl:
	Fix bug handling binary upload files; add ns_getformfile proc and
	some notes on usage

2002-10-15 00:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (dc953b62e3d9)

	* nsd/tclthread.c:
	Added new Tcl object type to handle the various thread objects

2002-10-15 00:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (4acedf9c7be6)

	* nsd/tclsock.c:
	Updated to work without a server

2002-10-15 00:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (8ef97cfce61b)

	* nsd/tclset.c:
	Updated to work outside a server for ordinary, non-shared sets

2002-10-15 00:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (d5e5b6fcf8b6)

	* nsd/tclobj.c:
	Minor cleanups

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (19954bd6f6ab)

	* nsd/tclinit.c:
	Updated interp create/init to support use of libnsd.so in tclsh's

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (4a9afcf0bc3d)

	* nsd/tclcmds.c:
	Move many commmands from per-server to generic, e.g., ns_set

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (2568f9314a4c)

	* nsd/sched.c:
	Threaded events now processed by a thread pool

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (7cfc407865b4)

	* nsd/nsd.h, nsd/server.c, nsd/tcljob.c:
	Remove ns_job related info from NsServer structure

	The ns_job command now works with named queues.

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (e8a5dcaf4f39)

	* nsd/nsconf.c:
	Server mark started and with objcmds by default for benefit of
	libnsd.so shells

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (8137d7bde761)

	* nsd/log.c:
	Format thread ids as unsigned long

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (3201949269ff)

	* nsd/form.c:
	Fix bug handling binary uploaded files; ns_conn files now returns
	mimetype

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (61b35bd56d36)

	* nsd/conn.c:
	Switched ns_conn copy to use Tcl_Write

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (343549d96155)

	* include/ns.h:
	Added Ns_TclInit and Nsd_Init

2002-10-15 00:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (04ba6f776b35)

	* Makefile, include/Makefile.module.in:
	Added manpage install and .PHONY targets

2002-10-15 00:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (d98e0da0cfca)

	* ChangeLog:
	Add missing ChangeLog entries

2002-10-15 00:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (4ae1b765d433)

	* tcl/adp.tcl: deleted file.
	* tcl/adp.tcl:
	Single ns_adp_include proc moved to nsd/init.tcl

2002-10-15 00:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (3996203081f7)

	* doc/install-doc: new file.
	* doc/install-doc:
	New install/crosslink script

2002-10-10 20:25 +0100  Mark Page  <mpagenva@aol.com>  (75a162f1de32)

	* nscp/nscp.c:
	Include user's login name in any logging by augmenting the thread
	name with the login name

	Provide configurable logging of all control port commands. Be more
	accepting of telnet echo ack commands (within limits), to get past
	problem when no-echo is enabled.

2002-10-07 19:29 +0100  Jim Davidson  <jgdavidson@aol.com>  (a1be6a6d9527)

	* configure, configure.in:
	Removed redundant LD/CCRFLAG from LSLIB

2002-10-04 17:17 +0100  Jim Davidson  <jgdavidson@aol.com>  (d81196890e76)

	* nsd/adpeval.c:
	Fixed bug #618010: initialize 'tries' to 0 when reading ADP file

2002-10-03 23:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (54628b41f2ee)

	* nsssl/Makefile:
	Fixed install bugs

2002-10-03 23:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (67c9b5561f40)

	* Makefile:
	Switched from prefix to AOLSERVER for install directory

2002-10-03 23:29 +0100  Jim Davidson  <jgdavidson@aol.com>  (caf1dd681a65)

	* include/ns.h:
	Added missing Ns_TclInitModule

2002-10-03 23:27 +0100  Jim Davidson  <jgdavidson@aol.com>  (2f7affca1d91)

	* nsthread/memory.c:
	Switched to ckalloc/ckfree for minor benefit of debug alloc build

2002-10-03 23:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (bd0d37d375b8)

	* nsssl/nsssl.c:
	Switched to struct iovec from Ns_Buf which is no longer defined

2002-10-03 23:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (a3c43ade5139)

	* configure, configure.in, nsssl/Makefile:
	Missed one rpath thing

2002-10-03 23:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (d319489e072a)

	* configure, configure.in, include/Makefile.global.in,
	include/Makefile.module.in:
	Updated config/make to support setting CFLAGS and RPATHS in modules
	makefiles

2002-09-28 21:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (f230786345f5)

	* nsd/conn.c, nsd/dns.c, nsd/fastpath.c, nsd/nsd.h, nsd/queue.c,
	nsd/server.c, nsd/tclthread.c:
	Silenced some compiler warnings

2002-09-28 21:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (e97689fb385b)

	* nsd/tclenv.c:
	Fixed bug not defining/using _NSGetEnviron correctly

2002-09-28 20:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (509077198753)

	* doc/Ns_Adp.3, doc/Ns_Alloc.3, doc/Ns_Auth.3, doc/Ns_Cache.3,
	doc/Ns_Cls.3, doc/Ns_Cond.3, doc/Ns_Config.3, doc/Ns_Conn.3,
	doc/Ns_ConnCopy.3, doc/Ns_ConnDriver.3, doc/Ns_ConnHeaders.3,
	doc/Ns_ConnRead.3, doc/Ns_ConnRequest.3, doc/Ns_ConnReturn.3,
	doc/Ns_ConnSend.3, doc/Ns_ConnWrite.3, doc/Ns_CritSec.3,
	doc/Ns_DString.3, doc/Ns_Db.3, doc/Ns_DbDriver.3, doc/Ns_DbPool.3,
	doc/Ns_DbSp.3, doc/Ns_DbUtil.3, doc/Ns_Driver.3, doc/Ns_Encoding.3,
	doc/Ns_Encrypt.3, doc/Ns_Env.3, doc/Ns_Exec.3, doc/Ns_ExtDb.3,
	doc/Ns_Fd.3, doc/Ns_Fetch.3, doc/Ns_Filter.3, doc/Ns_HttpTime.3,
	doc/Ns_Htuu.3, doc/Ns_Index.3, doc/Ns_InetAddr.3, doc/Ns_Info.3,
	doc/Ns_IntPrint.3, doc/Ns_List.3, doc/Ns_Location.3, doc/Ns_Log.3,
	doc/Ns_Master.3, doc/Ns_Mime.3, doc/Ns_Module.3, doc/Ns_Mutex.3,
	doc/Ns_Nsd.3, doc/Ns_Pathname.3, doc/Ns_Pool.3, doc/Ns_ProcInfo.3,
	doc/Ns_QuoteHtml.3, doc/Ns_RWLock.3, doc/Ns_Rand.3,
	doc/Ns_Reentrant.3, doc/Ns_Register.3, doc/Ns_Request.3,
	doc/Ns_RollFile.3, doc/Ns_Sched.3, doc/Ns_Sema.3,
	doc/Ns_ServerSpecific.3, doc/Ns_Set.3, doc/Ns_Signal.3,
	doc/Ns_Sock.3, doc/Ns_SockCallback.3, doc/Ns_SockErrno.3,
	doc/Ns_SockIO.3, doc/Ns_String.3, doc/Ns_TclConn.3,
	doc/Ns_TclDbGetHandle.3, doc/Ns_TclFile.3, doc/Ns_TclInit.3,
	doc/Ns_TclInterp.3, doc/Ns_TclRegister.3, doc/Ns_TclSet.3,
	doc/Ns_TclThread.3, doc/Ns_TclTimeObj.3, doc/Ns_TempFile.3,
	doc/Ns_Thread.3, doc/Ns_Thread2.3, doc/Ns_ThreadAlloc.3,
	doc/Ns_Time.3, doc/Ns_Tls.3, doc/Ns_Uid.3, doc/Ns_Url.3,
	doc/Ns_UrlEncode.3, doc/Ns_UrlSpecific.3, doc/Ns_UrlToFile.3,
	doc/man.macros, doc/mkLinks, doc/ns_addr.n, doc/ns_adp.n,
	doc/ns_at.n, doc/ns_cache.n, doc/ns_chan.n, doc/ns_checkurl.n,
	doc/ns_config.n, doc/ns_conn.n, doc/ns_crash.n, doc/ns_crypt.n,
	doc/ns_db.n, doc/ns_env.n, doc/ns_eval.n, doc/ns_file.n,
	doc/ns_filter.n, doc/ns_getchannels.n, doc/ns_geturl.n,
	doc/ns_guesstype.n, doc/ns_headers.n, doc/ns_html.n, doc/ns_http.n,
	doc/ns_httptime.n, doc/ns_img.n, doc/ns_info.n, doc/ns_init.n,
	doc/ns_job.n, doc/ns_kill.n, doc/ns_library.n, doc/ns_log.n,
	doc/ns_logroll.n, doc/ns_markfordelete.n, doc/ns_module.n,
	doc/ns_modulepath.n, doc/ns_normalizepath.n, doc/ns_parseheader.n,
	doc/ns_parsequery.n, doc/ns_proc.n, doc/ns_purgefiles.n,
	doc/ns_rand.n, doc/ns_requestauthorize.n, doc/ns_return.n,
	doc/ns_rollfile.n, doc/ns_sched.n, doc/ns_set.n, doc/ns_share.n,
	doc/ns_shutdown.n, doc/ns_sleep.n, doc/ns_sock.n, doc/ns_sync.n,
	doc/ns_thread.n, doc/ns_time.n, doc/ns_tmp.n, doc/ns_url2file.n,
	doc/ns_urlencode.n, doc/ns_uuencode.n, doc/ns_writefp.n, doc/nsd.1:
	new file.
	* doc/Ns_Adp.3, doc/Ns_Alloc.3, doc/Ns_Auth.3, doc/Ns_Cache.3,
	doc/Ns_Cls.3, doc/Ns_Cond.3, doc/Ns_Config.3, doc/Ns_Conn.3,
	doc/Ns_ConnCopy.3, doc/Ns_ConnDriver.3, doc/Ns_ConnHeaders.3,
	doc/Ns_ConnRead.3, doc/Ns_ConnRequest.3, doc/Ns_ConnReturn.3,
	doc/Ns_ConnSend.3, doc/Ns_ConnWrite.3, doc/Ns_CritSec.3,
	doc/Ns_DString.3, doc/Ns_Db.3, doc/Ns_DbDriver.3, doc/Ns_DbPool.3,
	doc/Ns_DbSp.3, doc/Ns_DbUtil.3, doc/Ns_Driver.3, doc/Ns_Encoding.3,
	doc/Ns_Encrypt.3, doc/Ns_Env.3, doc/Ns_Exec.3, doc/Ns_ExtDb.3,
	doc/Ns_Fd.3, doc/Ns_Fetch.3, doc/Ns_Filter.3, doc/Ns_HttpTime.3,
	doc/Ns_Htuu.3, doc/Ns_Index.3, doc/Ns_InetAddr.3, doc/Ns_Info.3,
	doc/Ns_IntPrint.3, doc/Ns_List.3, doc/Ns_Location.3, doc/Ns_Log.3,
	doc/Ns_Master.3, doc/Ns_Mime.3, doc/Ns_Module.3, doc/Ns_Mutex.3,
	doc/Ns_Nsd.3, doc/Ns_Pathname.3, doc/Ns_Pool.3, doc/Ns_ProcInfo.3,
	doc/Ns_QuoteHtml.3, doc/Ns_RWLock.3, doc/Ns_Rand.3,
	doc/Ns_Reentrant.3, doc/Ns_Register.3, doc/Ns_Request.3,
	doc/Ns_RollFile.3, doc/Ns_Sched.3, doc/Ns_Sema.3,
	doc/Ns_ServerSpecific.3, doc/Ns_Set.3, doc/Ns_Signal.3,
	doc/Ns_Sock.3, doc/Ns_SockCallback.3, doc/Ns_SockErrno.3,
	doc/Ns_SockIO.3, doc/Ns_String.3, doc/Ns_TclConn.3,
	doc/Ns_TclDbGetHandle.3, doc/Ns_TclFile.3, doc/Ns_TclInit.3,
	doc/Ns_TclInterp.3, doc/Ns_TclRegister.3, doc/Ns_TclSet.3,
	doc/Ns_TclThread.3, doc/Ns_TclTimeObj.3, doc/Ns_TempFile.3,
	doc/Ns_Thread.3, doc/Ns_Thread2.3, doc/Ns_ThreadAlloc.3,
	doc/Ns_Time.3, doc/Ns_Tls.3, doc/Ns_Uid.3, doc/Ns_Url.3,
	doc/Ns_UrlEncode.3, doc/Ns_UrlSpecific.3, doc/Ns_UrlToFile.3,
	doc/man.macros, doc/mkLinks, doc/ns_addr.n, doc/ns_adp.n,
	doc/ns_at.n, doc/ns_cache.n, doc/ns_chan.n, doc/ns_checkurl.n,
	doc/ns_config.n, doc/ns_conn.n, doc/ns_crash.n, doc/ns_crypt.n,
	doc/ns_db.n, doc/ns_env.n, doc/ns_eval.n, doc/ns_file.n,
	doc/ns_filter.n, doc/ns_getchannels.n, doc/ns_geturl.n,
	doc/ns_guesstype.n, doc/ns_headers.n, doc/ns_html.n, doc/ns_http.n,
	doc/ns_httptime.n, doc/ns_img.n, doc/ns_info.n, doc/ns_init.n,
	doc/ns_job.n, doc/ns_kill.n, doc/ns_library.n, doc/ns_log.n,
	doc/ns_logroll.n, doc/ns_markfordelete.n, doc/ns_module.n,
	doc/ns_modulepath.n, doc/ns_normalizepath.n, doc/ns_parseheader.n,
	doc/ns_parsequery.n, doc/ns_proc.n, doc/ns_purgefiles.n,
	doc/ns_rand.n, doc/ns_requestauthorize.n, doc/ns_return.n,
	doc/ns_rollfile.n, doc/ns_sched.n, doc/ns_set.n, doc/ns_share.n,
	doc/ns_shutdown.n, doc/ns_sleep.n, doc/ns_sock.n, doc/ns_sync.n,
	doc/ns_thread.n, doc/ns_time.n, doc/ns_tmp.n, doc/ns_url2file.n,
	doc/ns_urlencode.n, doc/ns_uuencode.n, doc/ns_writefp.n, doc/nsd.1:
	Added new empty man pages

2002-09-28 20:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (6e3ed0ef7f6c)

	* license.terms: new file.
	* INSTALL, doc/config.txt, doc/default-home.html, doc/faq.html,
	doc/install.html, doc/license.txt, doc/tcl-changes.txt,
	doc/tuning.html: deleted file.
	* INSTALL, README, doc/config.txt, doc/default-home.html,
	doc/faq.html, doc/install.html, doc/license.txt, doc/tcl-
	changes.txt, doc/tuning.html, license.terms:
	Updated README and other files to match AOLserver 3.x

2002-09-28 20:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (74d6e0f1b0dd)

	* ChangeLog:
	Add missing ChangeLog entries

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (90e143e845ce)

	* nsd/tclthread.c:
	Implemented AOLserver 3.x Ns_TclThread and Ns_TclDetachedThread

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (e5aa8a888e0f)

	* nsd/tclinit.c:
	Implement more missing AOLserver 3.x routines; ns_ictl
	addmodule/getmodules

	Implemented AOLserver 3.x Ns_TclRegisterAtCreate/Cleanup/Delete,
	Ns_TclInitModule, Ns_TclLogErrorRequest, and Ns_TclDestroyInterp.
	Also, added "addmodule" and "getmodules" options to ns_ictl to
	facilitate Tcl module init including with static modules.

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (0360ef7dfbc8)

	* nsd/tclenv.c:
	Renamed Ns_GetEnvironment Ns_CopyEnviron and GetEnviron
	Ns_GetEnviron, now an exported function

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (1413edea4b6c)

	* nsd/server.c:
	Add NsGetInitServer to support various 3.x init procs; support
	static server inits

	Added NsGetInitServer to support various AOLserver 3.x
	initialization procs which did not pass the virtual server (e.g.,
	Ns_RegisterReturn). Also added support for static server init procs.

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (4d9abbb1625e)

	* nsd/return.c:
	Implemented AOLserver 3.x Ns_RegisterReturn

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (8afe9b23d740)

	* nsd/queue.c:
	Add NsInitQueue to support AOLserver 3.x Ns_GetConn; implemented
	AOLserver 3.x Ns_QueueConn stub (returns NS_ERROR)

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (07afebe94675)

	* nsd/nsmain.c:
	Implemented AOLserver 3.x Ns_StopServer and added support for static
	server init procs

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (281964701394)

	* nsd/nsd.h:
	Added defs for Tcl traces, server init procs, and Tcl module list

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (c6210807474b)

	* nsd/modload.c:
	Implemented AOLserver 3.x Ns_RegisterModule and Ns_GetSymbol

2002-09-28 20:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (90ca07895756)

	* nsd/main.c:
	Restored AOLserver 3.x Ns_Main which allows optional static module
	init

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (ef66fb98e38e)

	* nsd/log.c:
	Implemented AOLserver 3.x Ns_LogTime2

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (35f3d68ceb36)

	* nsd/init.tcl:
	Uses new "ns_ictl modules" instead of iterating over config section
	which would miss static modules (if any)

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (60952b39967f)

	* nsd/init.c:
	Added NsInitQueue

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (3faafc8f0f11)

	* nsd/filter.c:
	Implemented AOLserver 3.x Ns_RegisterCleanup

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (a7564611b994)

	* nsd/exec.c:
	Removed strange USE_PROCTHREAD stuff and use Ns_CopyEnviron instead
	of Ns_GetEnvironment

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (dd920ebfd53e)

	* nsd/dstring.c:
	Implemented AOLserver 3.x Ns_DStringPop/Push (no actual dstring
	cache, just direct alloc/free now)

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (bc6f0aa9923e)

	* nsd/driver.c:
	Implemented for AOLserver 3.x stub Ns_RegisterDriver and
	Ns_GetDrivercontext (always return NULL)

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (ed0af55890b0)

	* nsd/connio.c:
	Implemented AOLserver 3.x Ns_ConnInit, Ns_ConnFlushContent, and
	Ns_ConnGets

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (06d66398a66a)

	* nsd/conn.c:
	Implemented AOLserver 3.x Ns_SetConnLocationProc

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (821258c9affc)

	* nsd/auth.c:
	Implemented AOLserver 3.x Ns_AuthorizeUser (no known uses)

2002-09-28 20:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (142d9e2336b5)

	* nsd/adpparse.c:
	Implemented AOLserver 3.x stub Ns_AdpRegisterParser (always returns
	NS_ERROR)

2002-09-28 20:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (ab599cd00857)

	* include/ns.h, nscgi/nscgi.c:
	Restored various AOLserver 3.x defs and set patch level to 4.0

	Also, renamed Ns_GetEnvironment to Ns_CopyEnviron.

2002-09-28 20:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (0f36ff78ce61)

	* configure, configure.in:
	Removed weird USE_PROCTHREAD for Linux

2002-09-28 20:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (c0866a9c4331)

	* Makefile:
	Fixed bug installing the install-sh script (wasn't executable)

2002-09-21 19:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (4544c07ec69d)

	* nsd/nsconf.c:
	Fixed bug return non-static char buffer

2002-09-21 18:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (36c6757e9972)

	* include/ns.h, nsd/nsd.h, nsd/queue.c:
	Added Ns_FreeConnInterp to go with Ns_GetConnInterp

2002-09-21 18:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (ef8df3a9a1d7)

	* nsd/sock.c:
	Returned the dup-high behavior for new sockets

2002-09-21 18:53 +0100  Jim Davidson  <jgdavidson@aol.com>  (5706d5cc4b15)

	* Makefile:
	Added all dependency for install

2002-09-21 18:52 +0100  Jim Davidson  <jgdavidson@aol.com>  (a6c1b751a496)

	* nsd/init.tcl, nsd/tclcmds.c, nsd/tclinit.c:
	Restructure interp alloc/dealloc and init/cleanup to expose all
	cleanup and state maintenance with new Tcl command ns_ictl

2002-09-21 18:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (907cf2de0790)

	* nsd/adpeval.c:
	ADP cache names now unique to interp, not thread

2002-09-21 18:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (f80109f5fd13)

	* include/Makefile.global.in:
	Fixed bug of not passing TCL_SHLIB_CFLAGS

2002-09-21 18:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (8d86d047c83a)

	* include/Makefile.module.in: new file.
	* include/Makefile.module.in:
	New Makefile.module template to set install directory during config

2002-09-21 18:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (42ea155be018)

	* include/Makefile.build, install-sh: new file.
	* include/Makefile.module: deleted file.
	* Makefile, configure, configure.in, include/Makefile.build,
	include/Makefile.global.in, include/Makefile.module, install-sh,
	nscgi/Makefile, nscp/Makefile, nsd/Makefile, nsdb/Makefile,
	nsext/Makefile, nslog/Makefile, nspd/Makefile, nsperm/Makefile,
	nssock/Makefile, nsssl/Makefile, nsthread/Makefile:
	Support --enable-symbols; use the Tcl install-sh install script; and
	new Makefile.build

	Better separates aolserver build from user module build using
	installed directories.

2002-09-19 23:27 +0100  Jim Davidson  <jgdavidson@aol.com>  (e7f6e2ecc32d)

	* configure, configure.in, include/Makefile.global.in:
	Bug fix for Solaris /usr/lib/lwp rpath

2002-09-19 22:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (6ab6c3523a0b)

	* Makefile, configure, configure.in, include/Makefile.global.in:
	More make/configure updates

2002-09-19 22:29 +0100  Jim Davidson  <jgdavidson@aol.com>  (01c80abd7eb9)

	* nsd/exec.c:
	Cleaned up formatting

2002-09-19 00:54 +0100  Jim Davidson  <jgdavidson@aol.com>  (d9d38d29ba60)

	* configure, configure.in, include/Makefile.global.in:
	Updated configure to correctly set TCL_SHLIB_LD

2002-09-16 23:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (ff105cef520e)

	* configure, configure.in, include/Makefile.global.in:
	Created a special test for USE_DUPHIGH and eliminated need for
	platform-specific USE_DLSYMPREFIX

2002-09-16 23:05 +0100  Jim Davidson  <jgdavidson@aol.com>  (d6afd9f2f913)

	* nsd/modload.c:
	Eliminated compile-time check for prepending underscore to symbols

	Now works like Tcl and simply tries without and with if necessary on
	all platforms.

2002-09-16 20:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (efe97a6b0469)

	* configure, configure.in, include/Makefile.global.in:
	Added configure tests for fork1, module loading, and random number
	generation

2002-09-16 20:48 +0100  Jim Davidson  <jgdavidson@aol.com>  (63b3f369e06b)

	* nsd/random.c:
	Updated to use configure HAVE_DRAND48 and HAVE_RANDOM test results

2002-09-16 20:44 +0100  Jim Davidson  <jgdavidson@aol.com>  (c0c4c2f92568)

	* nsd/nsd.h, nsd/unix.c:
	Moved poll() code from ../nsthread/osxcompat.c compiled via
	HAVE_POLL configure test

2002-09-16 20:43 +0100  Jim Davidson  <jgdavidson@aol.com>  (209de95f7f5b)

	* nsthread/osxcompat.c, nsthread/osxcompat.h: deleted file.
	* nsthread/Makefile, nsthread/osxcompat.c, nsthread/osxcompat.h,
	nsthread/thread.h:
	Removed Mac 10.1 hacks, moving the remaining poll() code to
	../nsd/unix.c

	AOLserver now requires 10.2.

2002-09-11 04:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (52ed5b3c1bf5)

	* configure, configure.in, include/Makefile.global.in, nsd/httptime.c,
	nsd/tclenv.c, nsthread/osxcompat.c:
	Fixed autconf build bugs with OS/X

2002-09-11 01:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (0ff512023e5f)

	* ChangeLog:
	Add missing ChangeLog entries

2002-09-11 01:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (a6396f908dcd)

	* include/Makefile.global.in:
	Build hacks for Solaris

2002-09-11 01:20 +0100  Jim Davidson  <jgdavidson@aol.com>  (d4c5b8fd8815)

	* Makefile:
	Added install mkdir's for bin and lib directories

2002-09-11 01:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (c2757c5ae3e9)

	* include/Makefile.global: deleted file.
	* include/Makefile.global:
	Now created from Makefile.global.in by configure

2002-09-11 01:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (44be479c3f13)

	* Makefile:
	Removed Tcl build targets

2002-09-11 01:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (9eb12dfa9c53)

	* INSTALL: new file.
	* INSTALL:
	Added simple instructions for new autoconf based build

2002-09-11 00:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (5e004c70ced2)

	* include/Makefile.module:
	Updated use of LIBEXT and RPATH's

2002-09-11 00:40 +0100  Jim Davidson  <jgdavidson@aol.com>  (70eabe353cc0)

	* aclocal.m4, configure, configure.in, include/Makefile.global.in: new
	file.
	* aclocal.m4, configure, configure.in, include/Makefile.global.in:
	New files for simple autoconf style config based on Tcl
	configuration

2002-09-11 00:32 +0100  Jim Davidson  <jgdavidson@aol.com>  (85c2dd0240f7)

	* nsd/log.c:
	Switch to Tcl config HAVE_TM_GMTOFF from old manual NO_TIMEZONE

2002-09-11 00:25 +0100  Jim Davidson  <jgdavidson@aol.com>  (870b35643ce9)

	* nsd/tclenv.c:
	Added routine to return environment vector to isolate access to
	**environ or NsGetEnviron on OS/X

2002-09-11 00:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (9ec7a1d4eb6e)

	* nsthread/thread.c:
	Eliminated the compile time system scope code, instead just ignore
	any unsupported error result from pthread_attr_setscope at runtime

2002-08-26 03:05 +0100  Jim Davidson  <jgdavidson@aol.com>  (0918bcb6787f)

	* ChangeLog, nsd/conn.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c:
	Connection I/O times now maintained with Ns_Time microsecond
	resolution

2002-08-26 03:03 +0100  Jim Davidson  <jgdavidson@aol.com>  (a31a61934582)

	* include/nsthread.h, nsthread/time.c:
	Ns_DiffTime now returns -1, 0, or 1 if t1 is before, equal, or after
	to

2002-08-25 23:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (0cbcf6e74249)

	* ChangeLog:
	Add missing ChangeLog entries

2002-08-25 23:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (fb28aaa92ab6)

	* nsd/config.c, nsd/init.tcl, nsd/nsd.h, nsd/tclcmds.c, nsd/tclinit.c:
	Further simplified Tcl init at startup and interp allocation

2002-08-25 21:11 +0100  Jim Davidson  <jgdavidson@aol.com>  (97eb51c930fa)

	* nsd/tclinit.c:
	Moved Ns_TclRegisterDeferred from tclatclose, removed NsTclEval in
	favor of Tcl_EvalEx, and added ns_init command

2002-08-25 21:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (b8e7aeb48a33)

	* nsd/tclcmds.c:
	Added ns_init command

2002-08-25 21:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (3d7849676b76)

	* nsd/nsd.h, nsd/server.c, nsd/tcljob.c, nsd/tclvar.c:
	Moved private struct definitions out of nsd.h

2002-08-25 21:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (81fdfa7ed400)

	* nsd/log.c, nsd/nsconf.c, nsd/nsconf.h:
	Removed undocumented and complicated log buffering feature

2002-08-25 21:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (cf37f8ed2cc4)

	* nsd/tclsock.c:
	Use of Tcl_EvalEx instead of NsTclEval

2002-08-25 20:56 +0100  Jim Davidson  <jgdavidson@aol.com>  (9fc71454c7d0)

	* nsd/filter.c:
	Moved Filter and Trace struct definitions from nsd.h

2002-08-25 20:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (48e1feccc3e2)

	* nsd/adpeval.c:
	Use Tcl_EvalEx instead of NsTclEval which no longer requires the
	temporary null bytes during direct adp evaluation..

2002-08-25 20:53 +0100  Jim Davidson  <jgdavidson@aol.com>  (6ad4f544d5e3)

	* nsd/tclatclose.c:
	Moved Ns_TclRegisterDeferred to tclinit.c and definition of AtClose
	struct from nsd.h

2002-08-25 20:52 +0100  Jim Davidson  <jgdavidson@aol.com>  (e28e4a7b41cd)

	* nsd/tclshare.c:
	Code cleanup, e.g., removed old references to Tcl 7.6

2002-08-10 18:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (7a4149076942)

	* include/Makefile.global, nsthread/osxcompat.c, nsthread/osxcompat.h:
	Added NEED_OSXCOMPAT (on by default) for Mac OS/X 10.1 compat
	routines now in 10.2

2002-08-10 17:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (74f0389bc8d1)

	* include/Makefile.global:
	Updated to Tcl 8.4b2 and added -DNO_CONST for now

2002-08-10 17:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (aad8e9c43646)

	* include/ns.h:
	Updated some const's to CONST

2002-08-10 17:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (82aa93ea1dec)

	* nsd/dsprintf.c, nsd/tclatclose.c, nsd/tclhttp.c, nsd/tclinit.c,
	nsd/tcljob.c:
	Changes various const's to CONST's (more to do)

2002-08-10 17:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (2fd58a05e84a)

	* nsd/tclresp.c:
	Fixed multi-line string literal

2002-08-10 17:03 +0100  Jim Davidson  <jgdavidson@aol.com>  (93551357f50c)

	* nsd/tclrequest.c:
	Fix for bug #587394

2002-08-10 17:01 +0100  Jim Davidson  <jgdavidson@aol.com>  (74bee3f43a26)

	* nsd/init.c, nsd/nsd.h, nsd/op.c, nsd/server.c:
	Added NsInitRequests and proper locking for proxy requests

2002-07-23 16:04 +0100  Jim Davidson  <jgdavidson@aol.com>  (5bcc4e1741ab)

	* nsd/conn.c:
	Proper fix for bug #584941

2002-07-23 13:03 +0100  Jim Davidson  <jgdavidson@aol.com>  (0a781b93e81a)

	* nsd/conn.c:
	Fix for bug #584941: crash when no connection

2002-07-15 00:46 +0100  Jim Davidson  <jgdavidson@aol.com>  (0c3f33c4e1cd)

	* ChangeLog:
	Latest notes for past week plus a retro note for 12/5/2001 on
	ns_thread

2002-07-15 00:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (8efcb692f0af)

	* nsd/nsmain.c:
	Fixed NsClosePreBindbinder type (should be NsClosePreBound)

2002-07-15 00:15 +0100  Jim Davidson  <jgdavidson@aol.com>  (25903b8bded0)

	* nsd/Makefile:
	Formatted LIBOBJ list

2002-07-15 00:15 +0100  Jim Davidson  <jgdavidson@aol.com>  (af23daa062df)

	* nsd/nsmain.c:
	Cleaned up comments riddled with various lies

2002-07-15 00:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (2106cdbda086)

	* nsd/binder.c, nsd/nsd.h:
	Renamed NsStopBinder NsClosePreBound to better reflect what it
	actually does now

2002-07-15 00:13 +0100  Jim Davidson  <jgdavidson@aol.com>  (aac34d74e9f7)

	* nsd/adpcmds.c, nsd/urlopen.c:
	Switched to more object-correct Tcl_ObjSetVar2

2002-07-15 00:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (a42254543567)

	* nsd/tclmisc.c:
	ns_sleep command now understands microsecond resolution timespecs
	from ns_time

2002-07-15 00:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (dacfb70f1235)

	* nsd/log.c, nsd/tclcmds.c:
	Added ns_logctl object command to buffer log messages generated by a
	thread

	This should allow dumping log messages at the end of an ADP page,
	for example. Also, removed the ns_log string command.

2002-07-15 00:05 +0100  Jim Davidson  <jgdavidson@aol.com>  (1559065171d1)

	* nsd/nsconf.c, nsd/nsconf.h, nsd/nsd.h:
	Add ns/parameters "logusec" config option to add microsecond times
	to log entries

	(off by default)

2002-07-15 00:01 +0100  Jim Davidson  <jgdavidson@aol.com>  (6e3a6b7d0c9a)

	* nsd/tclsock.c:
	Added microsecond resolution to ns_sockselect via ns_time-based
	times

2002-07-08 04:00 +0100  Jim Davidson  <jgdavidson@aol.com>  (258fef850964)

	* ChangeLog:
	Add missing ChangeLog entries for upcoming beta4 release

2002-07-08 03:59 +0100  Jim Davidson  <jgdavidson@aol.com>  (50140cdec2da)

	* Makefile, include/Makefile.global, include/ns.h:
	Updated for beta 4 release to coincide with Tcl beta 1 release

2002-07-08 03:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (948d3b14ed17)

	* nsd/tclvar.c:
	Removed string commands, added NsTclVarObjCmd

2002-07-08 03:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (646739c6491a)

	* nsd/tclset.c:
	Added NsTclSetObjCmd

2002-07-08 03:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (8b4712be7383)

	* nsd/tclobj.c:
	Modified Ns_Time type code to more efficiently maintain int/long
	based times without microseconds

2002-07-08 03:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (1b2b70ebabad)

	* nsd/tclmisc.c:
	Added seconds, microseconds, and make ns_time options; removed TZ
	env setting code from TmObjCmd

2002-07-08 03:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (742c3c2150c7)

	* nsd/tclcmds.c:
	Updated with latest object commands

2002-07-08 03:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (18faa5903991)

	* nsd/tclatclose.c:
	Removed NsTclAtCloseObjCmd for now

2002-07-08 03:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (7570ffbac90a)

	* nsd/pathname.c:
	Fixed ns_modulepath

2002-07-08 03:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (f94f6b1bf74a)

	* nsd/conn.c, nsd/info.c, nsd/nsmain.c, nsd/queue.c, nsd/random.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclthread.c:
	Cleaned up new object commands

2002-07-08 03:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (ec092f7921ec)

	* nsd/auth.c, nsd/form.c, nsd/httptime.c, nsd/urlencode.c:
	Minor cleanups

2002-07-06 17:25 +0100  Jim Davidson  <jgdavidson@aol.com>  (edd7583e56a6)

	* nsd/info.c:
	Sorted option list for NsTclInfoObjCmd

2002-07-06 17:25 +0100  Jim Davidson  <jgdavidson@aol.com>  (366787743dea)

	* nsd/queue.c, nsd/tclcmds.c:
	Added NsTclServerObjCmd

2002-07-06 00:30 +0100  Jim Davidson  <jgdavidson@aol.com>  (2397ffe934e9)

	* nsd/tclcmds.c:
	Updated with new ADP and ns_info object commmands

2002-07-06 00:30 +0100  Jim Davidson  <jgdavidson@aol.com>  (e155220c4e2c)

	* nsd/info.c:
	Added NsTclInfoObjCmd

2002-07-06 00:29 +0100  Jim Davidson  <jgdavidson@aol.com>  (d40525f342aa)

	* nsd/adpcmds.c:
	Updated ADP commands to be object based

2002-07-06 00:28 +0100  Jim Davidson  <jgdavidson@aol.com>  (b5d393a67f77)

	* nsd/adpeval.c:
	Made NsAdpSource, NsAdpInclude, and NsAdpEval object based

	Side effect is "ns_adp_argv 0" now returns text of ns_adp_eval
	object instead of just "<inlined-script>".

2002-07-06 00:27 +0100  Jim Davidson  <jgdavidson@aol.com>  (9ef9f712af23)

	* nsd/adprequest.c:
	Updated for new Tcl_Obj-based NsAdpInclude

2002-07-06 00:27 +0100  Jim Davidson  <jgdavidson@aol.com>  (883f399f3c67)

	* nsd/nsd.h:
	Update the NsInterp struct and NsAdpSource, NsAdpInclude, NsAdpEval
	routines to maintain Tcl_Obj instead of string args

2002-07-06 00:17 +0100  Jim Davidson  <jgdavidson@aol.com>  (986040b46615)

	* nsd/tclthread.c:
	Updated NsTclMutexObjCmd to use Tcl_GetIndexFromObj

2002-07-06 00:15 +0100  uid24488  <uid24488@users.sf.net>  (46eab1100b03)

	* nsd/httptime.c:
	Fixed unused variable warning

2002-06-25 18:51 +0100  Scott S. Goodwin  <scott@scottg.net>  (873e12d07e99)

	* ChangeLog, nsd/tclcmds.c, nsd/tclvar.c:
	Reimplemented nsv as object commands

2002-06-19 11:25 +0100  Jim Davidson  <jgdavidson@aol.com>  (ff8902e0f3b2)

	* ChangeLog, nsd/tclcmds.c:
	Thread and cache related commands no longer require a server

	This exposes them in the config interp.

2002-06-19 11:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (539aa2a67236)

	* nsd/tclthread.c:
	Tcl threads can now be created without a server

2002-06-19 11:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (8d1318ac5228)

	* nsd/server.c:
	NsGetServer handles NULL server

2002-06-19 11:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (b6e5d78a95fc)

	* nsd/config.c:
	Uses new Ns_TclCreateInterp for the config interp

2002-06-19 11:18 +0100  Jim Davidson  <jgdavidson@aol.com>  (ba6ed5babe8c)

	* include/ns.h, nsd/tclinit.c:
	Added Ns_TclCreateInterp()

2002-06-17 18:56 +0100  Jim Davidson  <jgdavidson@aol.com>  (0b10bd20726a)

	* nsthread/cond.c:
	Remove conditional code to work around ETIME bug on Solaris

	This should no longer occur now that we're using process private
	objects once again. The use of process shared objects surfaced this
	bug in Solaris 7 and below.

2002-06-17 18:53 +0100  Jim Davidson  <jgdavidson@aol.com>  (b7c3f6c9587a)

	* include/Makefile.global:
	Remove the HAVE_ETIME_BUG and USE_PTHREAD_PSHARED compile flags on
	Solaris and fixed /usr/lib/lwp RPATH directory

	In general these changes assumes AOLserver is compiled/run on
	Solaris 8 or above for best performance.

2002-06-14 02:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (54dad6c20148)

	* nsd/tclfile.c, nsd/tclresp.c:
	Silence compiler warnings

2002-06-13 05:41 +0100  Jeremy Collins  <jcollins@phpsource.net>  (a88284482803)

	* ChangeLog, nsd/auth.c, nsd/conn.c, nsd/form.c, nsd/log.c,
	nsd/nsmain.c, nsd/pathname.c, nsd/random.c, nsd/tclatclose.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c, nsd/tclmisc.c,
	nsd/tclrequest.c, nsd/tclresp.c, nsd/tclsock.c, nsd/tclthread.c,
	nsd/urlopen.c:
	Cleaned up the way the result was getting set on tcl errors

2002-06-13 01:04 +0100  Jeremy Collins  <jcollins@phpsource.net>  (8df83e99003d)

	* ChangeLog, nsd/conn.c, nsd/tclcmds.c:
	Reimplemented "ns_conn" as an obj based command

	In the process I also modified NsTclConnObjCmd to use
	Tcl_GetIndexFromObj. This should improve performance as well as the
	readability of the code.

2002-06-13 00:08 +0100  Jeremy Collins  <jcollins@phpsource.net>  (65d92e36e0df)

	* nsd/auth.c, nsd/conn.c, nsd/form.c, nsd/httptime.c, nsd/log.c,
	nsd/mimetypes.c, nsd/nsmain.c, nsd/pathname.c, nsd/random.c,
	nsd/tclatclose.c, nsd/tclcmds.c, nsd/tclfile.c, nsd/tclhttp.c,
	nsd/tclimg.c, nsd/tclinit.c, nsd/tclmisc.c, nsd/tclrequest.c,
	nsd/tclresp.c, nsd/tclsock.c, nsd/tclthread.c, nsd/urlencode.c,
	nsd/urlopen.c:
	Convert many commands to Tcl_Obj format

2002-06-13 00:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (4ec7559827c3)

	* nsd/nsconf.c, nsd/nsd.h:
	Add [ns/parameter]objcmds bool to turn new object commands on or off

	(on by default)

2002-06-12 23:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (45c678aa55d9)

	* Makefile:
	Added target for building aolserver only

2002-06-12 23:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (d24d6e8afc19)

	* sample-config.tcl:
	Removed old invalid config options

2002-06-12 12:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (a509a6771978)

	* ChangeLog:
	Add missing ChangeLog entries; cleanup format of old entries

2002-06-12 12:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (2669cc44620c)

	* nsthread/nsthreadtest.c: new file.
	* nsthread/Makefile, nsthread/nsthreadtest.c:
	Added nsthreadtest program to exercise the thread interface

2002-06-12 12:32 +0100  Jim Davidson  <jgdavidson@aol.com>  (5cdd73f145e5)

	* include/nsthread.h, nsd/info.c, nsthread/thread.c:
	Rename Ns_MutexEnum, Ns_ThreadEnum, and Ns_ThreadEnumProc to avoid
	conflict with AOLserver 3.x defs

2002-06-12 12:30 +0100  Jim Davidson  <jgdavidson@aol.com>  (b125cd87f362)

	* nsthread/cslock.c, nsthread/mutex.c, nsthread/rwlock.c,
	nsthread/sema.c, nsthread/thread.h:
	Use NsMutexInitNext() to set underlying mutex name

2002-06-11 22:48 +0100  Jim Davidson  <jgdavidson@aol.com>  (f20c78ad1211)

	* include/Makefile.global:
	Fixed build bug with RANLIB var

2002-06-11 22:47 +0100  Jim Davidson  <jgdavidson@aol.com>  (831095645067)

	* nsd/exec.c:
	Removed some unused vars

2002-06-11 02:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (9c0ea1229132)

	* nsthread/thread.c:
	Removed debug printf

2002-06-10 23:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (c5670d519d86)

	* nsd/init.c: new file.
	* ChangeLog, nsd/Makefile, nsd/binder.c, nsd/cache.c, nsd/config.c,
	nsd/encoding.c, nsd/exec.c, nsd/info.c, nsd/init.c, nsd/listen.c,
	nsd/log.c, nsd/mimetypes.c, nsd/modload.c, nsd/nsconf.c, nsd/nsd.h,
	nsd/nsmain.c, nsd/proc.c, nsd/sched.c, nsd/server.c, nsd/tclinit.c,
	nsd/urlspace.c:
	Core initialization is now via the NsdInit dynamic library init
	routines which calls other inits throughout the core..

2002-06-10 23:33 +0100  Jim Davidson  <jgdavidson@aol.com>  (ed85bc6fccbc)

	* include/Makefile.global:
	Restore nsthread as a default link library; add support for dynamic
	library init routines via the LIBINIT variable

2002-06-10 23:30 +0100  Jim Davidson  <jgdavidson@aol.com>  (2c4351e53d9b)

	* nsthread/Makefile, nsthread/compat.c, nsthread/cond.c,
	nsthread/cslock.c, nsthread/error.c, nsthread/fork.c,
	nsthread/master.c, nsthread/memory.c, nsthread/mutex.c,
	nsthread/osxcompat.c, nsthread/osxcompat.h, nsthread/reentrant.c,
	nsthread/rwlock.c, nsthread/sema.c, nsthread/signal.c,
	nsthread/thread.c, nsthread/thread.h, nsthread/time.c,
	nsthread/tls.c: new file.
	* nsd/compat.c, nsd/cond.c, nsd/cslock.c, nsd/error.c, nsd/fork.c,
	nsd/master.c, nsd/memory.c, nsd/mutex.c, nsd/osxcompat.c,
	nsd/osxcompat.h, nsd/reentrant.c, nsd/rwlock.c, nsd/sema.c,
	nsd/signal.c, nsd/thread.c, nsd/time.c, nsd/tls.c: deleted file.
	* Makefile, nsd/compat.c, nsd/cond.c, nsd/cslock.c, nsd/error.c,
	nsd/fork.c, nsd/master.c, nsd/memory.c, nsd/mutex.c,
	nsd/osxcompat.c, nsd/osxcompat.h, nsd/reentrant.c, nsd/rwlock.c,
	nsd/sema.c, nsd/signal.c, nsd/thread.c, nsd/time.c, nsd/tls.c,
	nsthread/Makefile, nsthread/compat.c, nsthread/cond.c,
	nsthread/cslock.c, nsthread/error.c, nsthread/fork.c,
	nsthread/master.c, nsthread/memory.c, nsthread/mutex.c,
	nsthread/osxcompat.c, nsthread/osxcompat.h, nsthread/reentrant.c,
	nsthread/rwlock.c, nsthread/sema.c, nsthread/signal.c,
	nsthread/thread.c, nsthread/thread.h, nsthread/time.c,
	nsthread/tls.c:
	Moved thread API from nsd back into nsthread library

2002-06-10 23:28 +0100  Jim Davidson  <jgdavidson@aol.com>  (3e383127bd72)

	* include/ns.h, include/nsthread.h:
	Move tcl.h include to nsthread.h; remove Ns_CheckStack; add
	Ns_ThreadEnum and Ns_MutexEnum

2002-06-08 17:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (6ac17e986495)

	* doc/tcl-changes.txt:
	All new notes of Tcl and AOLserver

2002-06-08 16:53 +0100  Jim Davidson  <jgdavidson@aol.com>  (6adc4a321fc1)

	* nsosx/Makefile, nsosx/README, nsosx/nsosx.c, nsosx/nsosx.h: deleted
	file.
	* ChangeLog, nsosx/Makefile, nsosx/README, nsosx/nsosx.c,
	nsosx/nsosx.h:
	Routines no longer required for Tcl, moved remainder into nsd

2002-06-08 16:52 +0100  Jim Davidson  <jgdavidson@aol.com>  (bd98096768f1)

	* nsd/osxcompat.c, nsd/osxcompat.h: new file.
	* nsd/Makefile, nsd/nsd.h, nsd/osxcompat.c, nsd/osxcompat.h:
	Moved OS/X compat functions into nsd

2002-06-08 15:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (38968f8dc1c5)

	* ChangeLog:
	Add missing ChangeLog entries

2002-06-08 15:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (3d511678db67)

	* include/nsthread.h, nscgi/nscgi.c, nsd/conn.c, nsd/memory.c,
	nsd/tclfile.c, nsd/tclhttp.c, nsd/tclinit.c, nsd/tcljob.c,
	nsd/tclobj.c, nsd/tclrequest.c, nsd/tclvar.c, nsdb/dbtcl.c:
	Minor updates to silence compiler warnings, mostly around the const
	char changes in 8.4

2002-06-08 15:46 +0100  Jim Davidson  <jgdavidson@aol.com>  (ff6ac479b6f7)

	* nsd/Makefile:
	Now uses Makefile.module for dynamic library and program

2002-06-08 15:45 +0100  Jim Davidson  <jgdavidson@aol.com>  (c6a468e5b761)

	* include/Makefile.global:
	Added -Wall for Apple and INCDIR for Makefile.module depend

2002-06-08 15:45 +0100  Jim Davidson  <jgdavidson@aol.com>  (3e001d4feadf)

	* include/Makefile.module:
	Added support for building programs along with dynamic libraries
	and/or modules

	Also, objects depend on ns.h and nsthread.h by default.

2002-06-08 14:54 +0100  Jim Davidson  <jgdavidson@aol.com>  (df39e27a8d87)

	* include/ns.h:
	Set patch level to 4.0b3

2002-06-06 19:29 +0100  Jim Davidson  <jgdavidson@aol.com>  (9734e3af692b)

	* nsosx/README:
	Fixed typo

2002-06-06 01:00 +0100  Jim Davidson  <jgdavidson@aol.com>  (3aaa5f14aa02)

	* nsext/nsext.c:
	Removed unused function ExtFreeElement()

2002-06-06 00:54 +0100  Jim Davidson  <jgdavidson@aol.com>  (3891f606f2c8)

	* ChangeLog:
	Change notes for 6/5/2002

2002-06-06 00:46 +0100  Jim Davidson  <jgdavidson@aol.com>  (4b66dba4fd9d)

	* nsd/adpparse.c, nsd/config.c, nsd/nsd.h, nsd/rollfile.c,
	nsd/sched.c, nsd/tclobj.c:
	Silenced various minor compiler warnings

2002-06-06 00:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (2abded7c2a77)

	* nsd/server.c:
	Switch to rwlock for registered tags to allow change after startup

2002-06-06 00:25 +0100  Jim Davidson  <jgdavidson@aol.com>  (5c8ba99bfd8e)

	* nsd/adpparse.c, nsd/tclcmds.c:
	Fix parsing bug; allow registered tags to change after startup;
	support new ns_adp_safeeval, ns_adp_registerproc

2002-06-06 00:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (232a5ce79138)

	* nsd/adpcmds.c, nsd/adpeval.c:
	Add ns_adp_safeeval which only allows execution of registered tags

	In this mode, script blocks i.e. <% ... %>, are ignored.

2002-06-06 00:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (6b1fd5f3879e)

	* nsosx/README: new file.
	* nsosx/README:
	Added instructions for building on OS/X

2002-06-05 23:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (dc7810e8dcb0)

	* nsosx/Makefile, nsosx/nsosx.c, nsosx/nsosx.h: new file.
	* nsd/nsd.h, nsd/unix.c, nsosx/Makefile, nsosx/nsosx.c, nsosx/nsosx.h:
	Moved Apple specific compat code needed for Tcl and AOLserver into a
	single object file

2002-06-05 23:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (c6a4d50fc40d)

	* nsd/fastpath.c:
	Moved Apple specific undef to nsd.h

2002-06-05 23:57 +0100  Jim Davidson  <jgdavidson@aol.com>  (f736067b1cb1)

	* nsdb/nsdb.c: new file.
	* nsdb/Makefile, nsdb/dbinit.c, nsdb/nsdb.c:
	Broke out public functions in libnsdb.so with simple stub nsdb.so
	module

2002-06-05 23:56 +0100  Jim Davidson  <jgdavidson@aol.com>  (22c5a3aaaccd)

	* nsext/msg.c: new file.
	* nspd/msg.c: deleted file.
	* nsext/Makefile, nsext/msg.c, nspd/Makefile, nspd/msg.c:
	Moved Ns_Ext API from ../nspd to libnsext.so

2002-06-05 23:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (783e2746ace8)

	* include/Makefile.module:
	Add support for building a dynamic library of public functions to go
	with the module

	e.g., libnsdb.dylib with nsdbo.so

2002-06-05 23:54 +0100  Jim Davidson  <jgdavidson@aol.com>  (7f8c15c4581b)

	* Makefile, include/Makefile.global:
	Added tclmemdbg variable in Makefile.global to enable building with
	TCL_MEM_DEBUG flag

2002-05-16 00:38 +0100  Jim Davidson  <jgdavidson@aol.com>  (1f813ffc7bab)

	* nscgi/nscgi.c, nsd/adpeval.c, nsd/connio.c, nsd/modload.c,
	nsd/pathname.c, nsd/return.c, nsd/tclrequest.c, nsd/tclresp.c,
	nsd/tclvar.c, nsd/thread.c, nsd/unix.c, nsext/nsext.c:
	Removed some unused variables

2002-05-16 00:38 +0100  Jim Davidson  <jgdavidson@aol.com>  (95fb14e6c661)

	* include/Makefile.global:
	Added -Wall to build flags

2002-05-16 00:16 +0100  Jim Davidson  <jgdavidson@aol.com>  (4f0d3dc0746a)

	* ChangeLog, Makefile:
	Updates for building with unmodified Tcl 8.4 sources

2002-05-16 00:15 +0100  Jim Davidson  <jgdavidson@aol.com>  (82c609e97d42)

	* tcl8.3.4/ChangeLog, tcl8.3.4/README, tcl8.3.4/changes,
	tcl8.3.4/compat/README, tcl8.3.4/compat/dirent.h,
	tcl8.3.4/compat/dirent2.h, tcl8.3.4/compat/dlfcn.h,
	tcl8.3.4/compat/fixstrtod.c, tcl8.3.4/compat/float.h,
	tcl8.3.4/compat/gettod.c, tcl8.3.4/compat/license.terms,
	tcl8.3.4/compat/limits.h, tcl8.3.4/compat/memcmp.c,
	tcl8.3.4/compat/opendir.c, tcl8.3.4/compat/stdlib.h,
	tcl8.3.4/compat/strftime.c, tcl8.3.4/compat/string.h,
	tcl8.3.4/compat/strncasecmp.c, tcl8.3.4/compat/strstr.c,
	tcl8.3.4/compat/strtod.c, tcl8.3.4/compat/strtol.c,
	tcl8.3.4/compat/strtoul.c, tcl8.3.4/compat/tclErrno.h,
	tcl8.3.4/compat/tmpnam.c, tcl8.3.4/compat/unistd.h,
	tcl8.3.4/compat/waitpid.c, tcl8.3.4/doc/Access.3,
	tcl8.3.4/doc/AddErrInfo.3, tcl8.3.4/doc/Alloc.3,
	tcl8.3.4/doc/AllowExc.3, tcl8.3.4/doc/AppInit.3,
	tcl8.3.4/doc/AssocData.3, tcl8.3.4/doc/Async.3,
	tcl8.3.4/doc/BackgdErr.3, tcl8.3.4/doc/Backslash.3,
	tcl8.3.4/doc/BoolObj.3, tcl8.3.4/doc/ByteArrObj.3,
	tcl8.3.4/doc/CallDel.3, tcl8.3.4/doc/ChnlStack.3,
	tcl8.3.4/doc/CmdCmplt.3, tcl8.3.4/doc/Concat.3,
	tcl8.3.4/doc/CrtChannel.3, tcl8.3.4/doc/CrtChnlHdlr.3,
	tcl8.3.4/doc/CrtCloseHdlr.3, tcl8.3.4/doc/CrtCommand.3,
	tcl8.3.4/doc/CrtFileHdlr.3, tcl8.3.4/doc/CrtInterp.3,
	tcl8.3.4/doc/CrtMathFnc.3, tcl8.3.4/doc/CrtObjCmd.3,
	tcl8.3.4/doc/CrtSlave.3, tcl8.3.4/doc/CrtTimerHdlr.3,
	tcl8.3.4/doc/CrtTrace.3, tcl8.3.4/doc/DString.3,
	tcl8.3.4/doc/DetachPids.3, tcl8.3.4/doc/DoOneEvent.3,
	tcl8.3.4/doc/DoWhenIdle.3, tcl8.3.4/doc/DoubleObj.3,
	tcl8.3.4/doc/DumpActiveMemory.3, tcl8.3.4/doc/Encoding.3,
	tcl8.3.4/doc/Eval.3, tcl8.3.4/doc/Exit.3, tcl8.3.4/doc/ExprLong.3,
	tcl8.3.4/doc/ExprLongObj.3, tcl8.3.4/doc/FindExec.3,
	tcl8.3.4/doc/GetCwd.3, tcl8.3.4/doc/GetHostName.3,
	tcl8.3.4/doc/GetIndex.3, tcl8.3.4/doc/GetInt.3,
	tcl8.3.4/doc/GetOpnFl.3, tcl8.3.4/doc/GetStdChan.3,
	tcl8.3.4/doc/GetVersion.3, tcl8.3.4/doc/Hash.3, tcl8.3.4/doc/Init.3,
	tcl8.3.4/doc/InitStubs.3, tcl8.3.4/doc/IntObj.3,
	tcl8.3.4/doc/Interp.3, tcl8.3.4/doc/LinkVar.3,
	tcl8.3.4/doc/ListObj.3, tcl8.3.4/doc/Notifier.3,
	tcl8.3.4/doc/Object.3, tcl8.3.4/doc/ObjectType.3,
	tcl8.3.4/doc/OpenFileChnl.3, tcl8.3.4/doc/OpenTcp.3,
	tcl8.3.4/doc/ParseCmd.3, tcl8.3.4/doc/PkgRequire.3,
	tcl8.3.4/doc/Preserve.3, tcl8.3.4/doc/PrintDbl.3,
	tcl8.3.4/doc/RecEvalObj.3, tcl8.3.4/doc/RecordEval.3,
	tcl8.3.4/doc/RegExp.3, tcl8.3.4/doc/SaveResult.3,
	tcl8.3.4/doc/SetErrno.3, tcl8.3.4/doc/SetRecLmt.3,
	tcl8.3.4/doc/SetResult.3, tcl8.3.4/doc/SetVar.3,
	tcl8.3.4/doc/Sleep.3, tcl8.3.4/doc/SourceRCFile.3,
	tcl8.3.4/doc/SplitList.3, tcl8.3.4/doc/SplitPath.3,
	tcl8.3.4/doc/StaticPkg.3, tcl8.3.4/doc/StrMatch.3,
	tcl8.3.4/doc/StringObj.3, tcl8.3.4/doc/TCL_MEM_DEBUG.3,
	tcl8.3.4/doc/Tcl.n, tcl8.3.4/doc/Tcl_Main.3, tcl8.3.4/doc/Thread.3,
	tcl8.3.4/doc/ToUpper.3, tcl8.3.4/doc/TraceVar.3,
	tcl8.3.4/doc/Translate.3, tcl8.3.4/doc/UpVar.3, tcl8.3.4/doc/Utf.3,
	tcl8.3.4/doc/WrongNumArgs.3, tcl8.3.4/doc/after.n,
	tcl8.3.4/doc/append.n, tcl8.3.4/doc/array.n, tcl8.3.4/doc/bgerror.n,
	tcl8.3.4/doc/binary.n, tcl8.3.4/doc/break.n, tcl8.3.4/doc/case.n,
	tcl8.3.4/doc/catch.n, tcl8.3.4/doc/cd.n, tcl8.3.4/doc/clock.n,
	tcl8.3.4/doc/close.n, tcl8.3.4/doc/concat.n,
	tcl8.3.4/doc/continue.n, tcl8.3.4/doc/dde.n,
	tcl8.3.4/doc/encoding.n, tcl8.3.4/doc/eof.n, tcl8.3.4/doc/error.n,
	tcl8.3.4/doc/eval.n, tcl8.3.4/doc/exec.n, tcl8.3.4/doc/exit.n,
	tcl8.3.4/doc/expr.n, tcl8.3.4/doc/fblocked.n,
	tcl8.3.4/doc/fconfigure.n, tcl8.3.4/doc/fcopy.n,
	tcl8.3.4/doc/file.n, tcl8.3.4/doc/fileevent.n,
	tcl8.3.4/doc/filename.n, tcl8.3.4/doc/flush.n, tcl8.3.4/doc/for.n,
	tcl8.3.4/doc/foreach.n, tcl8.3.4/doc/format.n, tcl8.3.4/doc/gets.n,
	tcl8.3.4/doc/glob.n, tcl8.3.4/doc/global.n, tcl8.3.4/doc/history.n,
	tcl8.3.4/doc/http.n, tcl8.3.4/doc/if.n, tcl8.3.4/doc/incr.n,
	tcl8.3.4/doc/info.n, tcl8.3.4/doc/interp.n, tcl8.3.4/doc/join.n,
	tcl8.3.4/doc/lappend.n, tcl8.3.4/doc/library.n,
	tcl8.3.4/doc/license.terms, tcl8.3.4/doc/lindex.n,
	tcl8.3.4/doc/linsert.n, tcl8.3.4/doc/list.n, tcl8.3.4/doc/llength.n,
	tcl8.3.4/doc/load.n, tcl8.3.4/doc/lrange.n, tcl8.3.4/doc/lreplace.n,
	tcl8.3.4/doc/lsearch.n, tcl8.3.4/doc/lsort.n,
	tcl8.3.4/doc/man.macros, tcl8.3.4/doc/memory.n,
	tcl8.3.4/doc/msgcat.n, tcl8.3.4/doc/namespace.n,
	tcl8.3.4/doc/open.n, tcl8.3.4/doc/package.n,
	tcl8.3.4/doc/packagens.n, tcl8.3.4/doc/pid.n,
	tcl8.3.4/doc/pkgMkIndex.n, tcl8.3.4/doc/proc.n, tcl8.3.4/doc/puts.n,
	tcl8.3.4/doc/pwd.n, tcl8.3.4/doc/re_syntax.n, tcl8.3.4/doc/read.n,
	tcl8.3.4/doc/regexp.n, tcl8.3.4/doc/registry.n,
	tcl8.3.4/doc/regsub.n, tcl8.3.4/doc/rename.n,
	tcl8.3.4/doc/resource.n, tcl8.3.4/doc/return.n, tcl8.3.4/doc/safe.n,
	tcl8.3.4/doc/scan.n, tcl8.3.4/doc/seek.n, tcl8.3.4/doc/set.n,
	tcl8.3.4/doc/socket.n, tcl8.3.4/doc/source.n, tcl8.3.4/doc/split.n,
	tcl8.3.4/doc/string.n, tcl8.3.4/doc/subst.n, tcl8.3.4/doc/switch.n,
	tcl8.3.4/doc/tclsh.1, tcl8.3.4/doc/tcltest.n,
	tcl8.3.4/doc/tclvars.n, tcl8.3.4/doc/tell.n, tcl8.3.4/doc/time.n,
	tcl8.3.4/doc/trace.n, tcl8.3.4/doc/unknown.n, tcl8.3.4/doc/unset.n,
	tcl8.3.4/doc/update.n, tcl8.3.4/doc/uplevel.n, tcl8.3.4/doc/upvar.n,
	tcl8.3.4/doc/variable.n, tcl8.3.4/doc/vwait.n, tcl8.3.4/doc/while.n,
	tcl8.3.4/generic/README, tcl8.3.4/generic/regc_color.c,
	tcl8.3.4/generic/regc_cvec.c, tcl8.3.4/generic/regc_lex.c,
	tcl8.3.4/generic/regc_locale.c, tcl8.3.4/generic/regc_nfa.c,
	tcl8.3.4/generic/regcomp.c, tcl8.3.4/generic/regcustom.h,
	tcl8.3.4/generic/rege_dfa.c, tcl8.3.4/generic/regerror.c,
	tcl8.3.4/generic/regerrs.h, tcl8.3.4/generic/regex.h,
	tcl8.3.4/generic/regexec.c, tcl8.3.4/generic/regfree.c,
	tcl8.3.4/generic/regfronts.c, tcl8.3.4/generic/regguts.h,
	tcl8.3.4/generic/tcl.decls, tcl8.3.4/generic/tcl.h,
	tcl8.3.4/generic/tclAlloc.c, tcl8.3.4/generic/tclAlloc.c.orig,
	tcl8.3.4/generic/tclAsync.c, tcl8.3.4/generic/tclBasic.c,
	tcl8.3.4/generic/tclBinary.c, tcl8.3.4/generic/tclCkalloc.c,
	tcl8.3.4/generic/tclClock.c, tcl8.3.4/generic/tclCmdAH.c,
	tcl8.3.4/generic/tclCmdIL.c, tcl8.3.4/generic/tclCmdMZ.c,
	tcl8.3.4/generic/tclCompCmds.c, tcl8.3.4/generic/tclCompExpr.c,
	tcl8.3.4/generic/tclCompile.c, tcl8.3.4/generic/tclCompile.h,
	tcl8.3.4/generic/tclDate.c, tcl8.3.4/generic/tclDecls.h,
	tcl8.3.4/generic/tclEncoding.c, tcl8.3.4/generic/tclEnv.c,
	tcl8.3.4/generic/tclEvent.c, tcl8.3.4/generic/tclExecute.c,
	tcl8.3.4/generic/tclFCmd.c, tcl8.3.4/generic/tclFileName.c,
	tcl8.3.4/generic/tclGet.c, tcl8.3.4/generic/tclGetDate.y,
	tcl8.3.4/generic/tclHash.c, tcl8.3.4/generic/tclHistory.c,
	tcl8.3.4/generic/tclIO.c, tcl8.3.4/generic/tclIO.h,
	tcl8.3.4/generic/tclIOCmd.c, tcl8.3.4/generic/tclIOGT.c,
	tcl8.3.4/generic/tclIOSock.c, tcl8.3.4/generic/tclIOUtil.c,
	tcl8.3.4/generic/tclIndexObj.c, tcl8.3.4/generic/tclInitScript.h,
	tcl8.3.4/generic/tclInt.decls, tcl8.3.4/generic/tclInt.h,
	tcl8.3.4/generic/tclInt.h.orig, tcl8.3.4/generic/tclIntDecls.h,
	tcl8.3.4/generic/tclIntPlatDecls.h, tcl8.3.4/generic/tclInterp.c,
	tcl8.3.4/generic/tclLink.c, tcl8.3.4/generic/tclListObj.c,
	tcl8.3.4/generic/tclLiteral.c, tcl8.3.4/generic/tclLoad.c,
	tcl8.3.4/generic/tclLoadNone.c, tcl8.3.4/generic/tclMain.c,
	tcl8.3.4/generic/tclMath.h, tcl8.3.4/generic/tclNamesp.c,
	tcl8.3.4/generic/tclNotify.c, tcl8.3.4/generic/tclObj.c,
	tcl8.3.4/generic/tclObj.c.orig, tcl8.3.4/generic/tclPanic.c,
	tcl8.3.4/generic/tclParse.c, tcl8.3.4/generic/tclParseExpr.c,
	tcl8.3.4/generic/tclPipe.c, tcl8.3.4/generic/tclPkg.c,
	tcl8.3.4/generic/tclPlatDecls.h, tcl8.3.4/generic/tclPort.h,
	tcl8.3.4/generic/tclPosixStr.c, tcl8.3.4/generic/tclPreserve.c,
	tcl8.3.4/generic/tclProc.c, tcl8.3.4/generic/tclRegexp.c,
	tcl8.3.4/generic/tclRegexp.h, tcl8.3.4/generic/tclResolve.c,
	tcl8.3.4/generic/tclResult.c, tcl8.3.4/generic/tclScan.c,
	tcl8.3.4/generic/tclStringObj.c, tcl8.3.4/generic/tclStubInit.c,
	tcl8.3.4/generic/tclStubInit.c.orig, tcl8.3.4/generic/tclStubLib.c,
	tcl8.3.4/generic/tclTest.c, tcl8.3.4/generic/tclTestObj.c,
	tcl8.3.4/generic/tclTestProcBodyObj.c, tcl8.3.4/generic/tclThread.c,
	tcl8.3.4/generic/tclThreadTest.c, tcl8.3.4/generic/tclTimer.c,
	tcl8.3.4/generic/tclUniData.c, tcl8.3.4/generic/tclUtf.c,
	tcl8.3.4/generic/tclUtil.c, tcl8.3.4/generic/tclVar.c,
	tcl8.3.4/library/auto.tcl, tcl8.3.4/library/dde1.1/pkgIndex.tcl,
	tcl8.3.4/library/encoding/ascii.enc,
	tcl8.3.4/library/encoding/big5.enc,
	tcl8.3.4/library/encoding/cp1250.enc,
	tcl8.3.4/library/encoding/cp1251.enc,
	tcl8.3.4/library/encoding/cp1252.enc,
	tcl8.3.4/library/encoding/cp1253.enc,
	tcl8.3.4/library/encoding/cp1254.enc,
	tcl8.3.4/library/encoding/cp1255.enc,
	tcl8.3.4/library/encoding/cp1256.enc,
	tcl8.3.4/library/encoding/cp1257.enc,
	tcl8.3.4/library/encoding/cp1258.enc,
	tcl8.3.4/library/encoding/cp437.enc,
	tcl8.3.4/library/encoding/cp737.enc,
	tcl8.3.4/library/encoding/cp775.enc,
	tcl8.3.4/library/encoding/cp850.enc,
	tcl8.3.4/library/encoding/cp852.enc,
	tcl8.3.4/library/encoding/cp855.enc,
	tcl8.3.4/library/encoding/cp857.enc,
	tcl8.3.4/library/encoding/cp860.enc,
	tcl8.3.4/library/encoding/cp861.enc,
	tcl8.3.4/library/encoding/cp862.enc,
	tcl8.3.4/library/encoding/cp863.enc,
	tcl8.3.4/library/encoding/cp864.enc,
	tcl8.3.4/library/encoding/cp865.enc,
	tcl8.3.4/library/encoding/cp866.enc,
	tcl8.3.4/library/encoding/cp869.enc,
	tcl8.3.4/library/encoding/cp874.enc,
	tcl8.3.4/library/encoding/cp932.enc,
	tcl8.3.4/library/encoding/cp936.enc,
	tcl8.3.4/library/encoding/cp949.enc,
	tcl8.3.4/library/encoding/cp950.enc,
	tcl8.3.4/library/encoding/dingbats.enc,
	tcl8.3.4/library/encoding/ebcdic.enc, tcl8.3.4/library/encoding/euc-
	cn.enc, tcl8.3.4/library/encoding/euc-jp.enc,
	tcl8.3.4/library/encoding/euc-kr.enc,
	tcl8.3.4/library/encoding/gb12345.enc,
	tcl8.3.4/library/encoding/gb1988.enc,
	tcl8.3.4/library/encoding/gb2312.enc,
	tcl8.3.4/library/encoding/iso2022-jp.enc,
	tcl8.3.4/library/encoding/iso2022-kr.enc,
	tcl8.3.4/library/encoding/iso2022.enc,
	tcl8.3.4/library/encoding/iso8859-1.enc,
	tcl8.3.4/library/encoding/iso8859-10.enc,
	tcl8.3.4/library/encoding/iso8859-13.enc,
	tcl8.3.4/library/encoding/iso8859-14.enc,
	tcl8.3.4/library/encoding/iso8859-15.enc,
	tcl8.3.4/library/encoding/iso8859-16.enc,
	tcl8.3.4/library/encoding/iso8859-2.enc,
	tcl8.3.4/library/encoding/iso8859-3.enc,
	tcl8.3.4/library/encoding/iso8859-4.enc,
	tcl8.3.4/library/encoding/iso8859-5.enc,
	tcl8.3.4/library/encoding/iso8859-6.enc,
	tcl8.3.4/library/encoding/iso8859-7.enc,
	tcl8.3.4/library/encoding/iso8859-8.enc,
	tcl8.3.4/library/encoding/iso8859-9.enc,
	tcl8.3.4/library/encoding/jis0201.enc,
	tcl8.3.4/library/encoding/jis0208.enc,
	tcl8.3.4/library/encoding/jis0212.enc,
	tcl8.3.4/library/encoding/koi8-r.enc,
	tcl8.3.4/library/encoding/koi8-u.enc,
	tcl8.3.4/library/encoding/ksc5601.enc,
	tcl8.3.4/library/encoding/macCentEuro.enc,
	tcl8.3.4/library/encoding/macCroatian.enc,
	tcl8.3.4/library/encoding/macCyrillic.enc,
	tcl8.3.4/library/encoding/macDingbats.enc,
	tcl8.3.4/library/encoding/macGreek.enc,
	tcl8.3.4/library/encoding/macIceland.enc,
	tcl8.3.4/library/encoding/macJapan.enc,
	tcl8.3.4/library/encoding/macRoman.enc,
	tcl8.3.4/library/encoding/macRomania.enc,
	tcl8.3.4/library/encoding/macThai.enc,
	tcl8.3.4/library/encoding/macTurkish.enc,
	tcl8.3.4/library/encoding/macUkraine.enc,
	tcl8.3.4/library/encoding/shiftjis.enc,
	tcl8.3.4/library/encoding/symbol.enc,
	tcl8.3.4/library/encoding/tis-620.enc, tcl8.3.4/library/history.tcl,
	tcl8.3.4/library/http/http.tcl, tcl8.3.4/library/http/pkgIndex.tcl,
	tcl8.3.4/library/http1.0/http.tcl,
	tcl8.3.4/library/http1.0/pkgIndex.tcl, tcl8.3.4/library/init.tcl,
	tcl8.3.4/library/ldAout.tcl, tcl8.3.4/library/license.terms,
	tcl8.3.4/library/msgcat/msgcat.tcl,
	tcl8.3.4/library/msgcat/pkgIndex.tcl,
	tcl8.3.4/library/opt/optparse.tcl,
	tcl8.3.4/library/opt/pkgIndex.tcl, tcl8.3.4/library/package.tcl,
	tcl8.3.4/library/parray.tcl, tcl8.3.4/library/reg1.0/pkgIndex.tcl,
	tcl8.3.4/library/safe.tcl, tcl8.3.4/library/tclIndex,
	tcl8.3.4/library/tcltest1.0/pkgIndex.tcl,
	tcl8.3.4/library/tcltest1.0/tcltest.tcl, tcl8.3.4/library/word.tcl,
	tcl8.3.4/license.terms, tcl8.3.4/mac/AppleScript.html,
	tcl8.3.4/mac/Background.doc, tcl8.3.4/mac/MW_TclAppleScriptHeader.h,
	tcl8.3.4/mac/MW_TclAppleScriptHeader.pch,
	tcl8.3.4/mac/MW_TclBuildLibHeader.h,
	tcl8.3.4/mac/MW_TclBuildLibHeader.pch, tcl8.3.4/mac/MW_TclHeader.h,
	tcl8.3.4/mac/MW_TclHeader.pch, tcl8.3.4/mac/MW_TclHeaderCommon.h,
	tcl8.3.4/mac/MW_TclStaticHeader.h,
	tcl8.3.4/mac/MW_TclStaticHeader.pch,
	tcl8.3.4/mac/MW_TclTestHeader.h, tcl8.3.4/mac/MW_TclTestHeader.pch,
	tcl8.3.4/mac/README, tcl8.3.4/mac/bugs.doc,
	tcl8.3.4/mac/libmoto.doc, tcl8.3.4/mac/license.terms,
	tcl8.3.4/mac/morefiles.doc, tcl8.3.4/mac/porting.notes,
	tcl8.3.4/mac/tclMac.h, tcl8.3.4/mac/tclMacAETE.r,
	tcl8.3.4/mac/tclMacAlloc.c, tcl8.3.4/mac/tclMacAppInit.c,
	tcl8.3.4/mac/tclMacApplication.r, tcl8.3.4/mac/tclMacBOAAppInit.c,
	tcl8.3.4/mac/tclMacBOAMain.c, tcl8.3.4/mac/tclMacChan.c,
	tcl8.3.4/mac/tclMacCommonPch.h, tcl8.3.4/mac/tclMacDNR.c,
	tcl8.3.4/mac/tclMacEnv.c, tcl8.3.4/mac/tclMacExit.c,
	tcl8.3.4/mac/tclMacFCmd.c, tcl8.3.4/mac/tclMacFile.c,
	tcl8.3.4/mac/tclMacInit.c, tcl8.3.4/mac/tclMacInt.h,
	tcl8.3.4/mac/tclMacInterupt.c, tcl8.3.4/mac/tclMacLibrary.c,
	tcl8.3.4/mac/tclMacLibrary.r, tcl8.3.4/mac/tclMacLoad.c,
	tcl8.3.4/mac/tclMacMath.h, tcl8.3.4/mac/tclMacNotify.c,
	tcl8.3.4/mac/tclmacOSA.c, tcl8.3.4/mac/tclmacOSA.r,
	tcl8.3.4/mac/tclMacPanic.c, tcl8.3.4/mac/tclMacPort.h,
	tcl8.3.4/mac/tclMacProjects.sea.hqx, tcl8.3.4/mac/tclMacResource.c,
	tcl8.3.4/mac/tclMacResource.r, tcl8.3.4/mac/tclMacSock.c,
	tcl8.3.4/mac/tclMacTclCode.r, tcl8.3.4/mac/tclMacTest.c,
	tcl8.3.4/mac/tclMacThrd.c, tcl8.3.4/mac/tclMacThrd.h,
	tcl8.3.4/mac/tclMacTime.c, tcl8.3.4/mac/tclMacUnix.c,
	tcl8.3.4/mac/tclMacUtil.c, tcl8.3.4/tests/README,
	tcl8.3.4/tests/all.tcl, tcl8.3.4/tests/append.test,
	tcl8.3.4/tests/assocd.test, tcl8.3.4/tests/async.test,
	tcl8.3.4/tests/autoMkindex.tcl, tcl8.3.4/tests/autoMkindex.test,
	tcl8.3.4/tests/basic.test, tcl8.3.4/tests/binary.test,
	tcl8.3.4/tests/case.test, tcl8.3.4/tests/clock.test,
	tcl8.3.4/tests/cmdAH.test, tcl8.3.4/tests/cmdIL.test,
	tcl8.3.4/tests/cmdInfo.test, tcl8.3.4/tests/cmdMZ.test,
	tcl8.3.4/tests/compExpr-old.test, tcl8.3.4/tests/compExpr.test,
	tcl8.3.4/tests/compile.test, tcl8.3.4/tests/concat.test,
	tcl8.3.4/tests/dcall.test, tcl8.3.4/tests/dstring.test,
	tcl8.3.4/tests/encoding.test, tcl8.3.4/tests/env.test,
	tcl8.3.4/tests/error.test, tcl8.3.4/tests/eval.test,
	tcl8.3.4/tests/event.test, tcl8.3.4/tests/exec.test,
	tcl8.3.4/tests/execute.test, tcl8.3.4/tests/expr-old.test,
	tcl8.3.4/tests/expr.test, tcl8.3.4/tests/fCmd.test,
	tcl8.3.4/tests/fileName.test, tcl8.3.4/tests/for-old.test,
	tcl8.3.4/tests/for.test, tcl8.3.4/tests/foreach.test,
	tcl8.3.4/tests/format.test, tcl8.3.4/tests/get.test,
	tcl8.3.4/tests/history.test, tcl8.3.4/tests/http.test,
	tcl8.3.4/tests/httpd, tcl8.3.4/tests/httpold.test, tcl8.3.4/tests
	/if-old.test, tcl8.3.4/tests/if.test, tcl8.3.4/tests/incr-old.test,
	tcl8.3.4/tests/incr.test, tcl8.3.4/tests/indexObj.test,
	tcl8.3.4/tests/info.test, tcl8.3.4/tests/init.test,
	tcl8.3.4/tests/interp.test, tcl8.3.4/tests/io.test,
	tcl8.3.4/tests/ioCmd.test, tcl8.3.4/tests/ioUtil.test,
	tcl8.3.4/tests/iogt.test, tcl8.3.4/tests/join.test,
	tcl8.3.4/tests/license.terms, tcl8.3.4/tests/lindex.test,
	tcl8.3.4/tests/link.test, tcl8.3.4/tests/linsert.test,
	tcl8.3.4/tests/list.test, tcl8.3.4/tests/listObj.test,
	tcl8.3.4/tests/llength.test, tcl8.3.4/tests/load.test,
	tcl8.3.4/tests/lrange.test, tcl8.3.4/tests/lreplace.test,
	tcl8.3.4/tests/lsearch.test, tcl8.3.4/tests/macFCmd.test,
	tcl8.3.4/tests/misc.test, tcl8.3.4/tests/msgcat.test, tcl8.3.4/tests
	/namespace-old.test, tcl8.3.4/tests/namespace.test,
	tcl8.3.4/tests/obj.test, tcl8.3.4/tests/opt.test,
	tcl8.3.4/tests/osa.test, tcl8.3.4/tests/package.test,
	tcl8.3.4/tests/parse.test, tcl8.3.4/tests/parseExpr.test,
	tcl8.3.4/tests/parseOld.test, tcl8.3.4/tests/pid.test,
	tcl8.3.4/tests/pkg.test, tcl8.3.4/tests/pkg/circ1.tcl,
	tcl8.3.4/tests/pkg/circ2.tcl, tcl8.3.4/tests/pkg/circ3.tcl,
	tcl8.3.4/tests/pkg/global.tcl, tcl8.3.4/tests/pkg/import.tcl,
	tcl8.3.4/tests/pkg/license.terms, tcl8.3.4/tests/pkg/magicchar.tcl,
	tcl8.3.4/tests/pkg/magicchar2.tcl, tcl8.3.4/tests/pkg/pkg1.tcl,
	tcl8.3.4/tests/pkg/pkg2_a.tcl, tcl8.3.4/tests/pkg/pkg2_b.tcl,
	tcl8.3.4/tests/pkg/pkg3.tcl, tcl8.3.4/tests/pkg/pkg4.tcl,
	tcl8.3.4/tests/pkg/pkg5.tcl, tcl8.3.4/tests/pkg/pkga.tcl,
	tcl8.3.4/tests/pkg/samename.tcl, tcl8.3.4/tests/pkg/simple.tcl,
	tcl8.3.4/tests/pkg/spacename.tcl, tcl8.3.4/tests/pkg/std.tcl,
	tcl8.3.4/tests/pkgMkIndex.test, tcl8.3.4/tests/platform.test,
	tcl8.3.4/tests/proc-old.test, tcl8.3.4/tests/proc.test,
	tcl8.3.4/tests/pwd.test, tcl8.3.4/tests/reg.test,
	tcl8.3.4/tests/regexp.test, tcl8.3.4/tests/registry.test,
	tcl8.3.4/tests/remote.tcl, tcl8.3.4/tests/rename.test,
	tcl8.3.4/tests/resource.test, tcl8.3.4/tests/result.test,
	tcl8.3.4/tests/safe.test, tcl8.3.4/tests/scan.test,
	tcl8.3.4/tests/security.test, tcl8.3.4/tests/set-old.test,
	tcl8.3.4/tests/set.test, tcl8.3.4/tests/socket.test,
	tcl8.3.4/tests/source.test, tcl8.3.4/tests/split.test,
	tcl8.3.4/tests/stack.test, tcl8.3.4/tests/string.test,
	tcl8.3.4/tests/stringObj.test, tcl8.3.4/tests/subst.test,
	tcl8.3.4/tests/switch.test, tcl8.3.4/tests/tcltest.test,
	tcl8.3.4/tests/thread.test, tcl8.3.4/tests/timer.test,
	tcl8.3.4/tests/trace.test, tcl8.3.4/tests/unixFCmd.test,
	tcl8.3.4/tests/unixFile.test, tcl8.3.4/tests/unixInit.test,
	tcl8.3.4/tests/unixNotfy.test, tcl8.3.4/tests/unknown.test,
	tcl8.3.4/tests/uplevel.test, tcl8.3.4/tests/upvar.test,
	tcl8.3.4/tests/utf.test, tcl8.3.4/tests/util.test,
	tcl8.3.4/tests/var.test, tcl8.3.4/tests/while-old.test,
	tcl8.3.4/tests/while.test, tcl8.3.4/tests/winConsole.test,
	tcl8.3.4/tests/winDde.test, tcl8.3.4/tests/winFCmd.test,
	tcl8.3.4/tests/winFile.test, tcl8.3.4/tests/winNotify.test,
	tcl8.3.4/tests/winPipe.test, tcl8.3.4/tests/winTime.test,
	tcl8.3.4/tools/Makefile.in, tcl8.3.4/tools/README,
	tcl8.3.4/tools/checkLibraryDoc.tcl, tcl8.3.4/tools/configure,
	tcl8.3.4/tools/configure.in, tcl8.3.4/tools/cvtEOL.tcl,
	tcl8.3.4/tools/genStubs.tcl, tcl8.3.4/tools/genWinImage.tcl,
	tcl8.3.4/tools/index.tcl, tcl8.3.4/tools/man2help.tcl,
	tcl8.3.4/tools/man2help2.tcl, tcl8.3.4/tools/man2html.tcl,
	tcl8.3.4/tools/man2html1.tcl, tcl8.3.4/tools/man2html2.tcl,
	tcl8.3.4/tools/man2tcl.c, tcl8.3.4/tools/regexpTestLib.tcl,
	tcl8.3.4/tools/tcl.hpj.in, tcl8.3.4/tools/tcl.wse.in,
	tcl8.3.4/tools/tclSplash.bmp, tcl8.3.4/tools/tcltk-man2html.tcl,
	tcl8.3.4/tools/uniClass.tcl, tcl8.3.4/tools/uniParse.tcl,
	tcl8.3.4/tools/white.bmp, tcl8.3.4/unix/Makefile.in,
	tcl8.3.4/unix/README, tcl8.3.4/unix/aclocal.m4,
	tcl8.3.4/unix/configure, tcl8.3.4/unix/configure.in,
	tcl8.3.4/unix/configure.orig, tcl8.3.4/unix/dltest/Makefile.in,
	tcl8.3.4/unix/dltest/README, tcl8.3.4/unix/dltest/configure,
	tcl8.3.4/unix/dltest/configure.in, tcl8.3.4/unix/dltest/pkga.c,
	tcl8.3.4/unix/dltest/pkgb.c, tcl8.3.4/unix/dltest/pkgc.c,
	tcl8.3.4/unix/dltest/pkgd.c, tcl8.3.4/unix/dltest/pkge.c,
	tcl8.3.4/unix/dltest/pkgf.c, tcl8.3.4/unix/install-sh,
	tcl8.3.4/unix/ldAix, tcl8.3.4/unix/mkLinks, tcl8.3.4/unix/tcl.m4,
	tcl8.3.4/unix/tcl.m4.orig, tcl8.3.4/unix/tcl.spec,
	tcl8.3.4/unix/tclAppInit.c, tcl8.3.4/unix/tclConfig.sh.in,
	tcl8.3.4/unix/tclLoadAix.c, tcl8.3.4/unix/tclLoadAout.c,
	tcl8.3.4/unix/tclLoadDl.c, tcl8.3.4/unix/tclLoadDld.c,
	tcl8.3.4/unix/tclLoadDyld.c, tcl8.3.4/unix/tclLoadDyld.c.orig,
	tcl8.3.4/unix/tclLoadNext.c, tcl8.3.4/unix/tclLoadOSF.c,
	tcl8.3.4/unix/tclLoadShl.c, tcl8.3.4/unix/tclMtherr.c,
	tcl8.3.4/unix/tclUnixChan.c, tcl8.3.4/unix/tclUnixEvent.c,
	tcl8.3.4/unix/tclUnixFCmd.c, tcl8.3.4/unix/tclUnixFile.c,
	tcl8.3.4/unix/tclUnixInit.c, tcl8.3.4/unix/tclUnixNotfy.c,
	tcl8.3.4/unix/tclUnixPipe.c, tcl8.3.4/unix/tclUnixPort.h,
	tcl8.3.4/unix/tclUnixPort.h.orig, tcl8.3.4/unix/tclUnixSock.c,
	tcl8.3.4/unix/tclUnixTest.c, tcl8.3.4/unix/tclUnixThrd.c,
	tcl8.3.4/unix/tclUnixThrd.c.orig, tcl8.3.4/unix/tclUnixThrd.h,
	tcl8.3.4/unix/tclUnixTime.c, tcl8.3.4/unix/tclXtNotify.c,
	tcl8.3.4/unix/tclXtTest.c, tcl8.3.4/win/Makefile.in,
	tcl8.3.4/win/README, tcl8.3.4/win/aclocal.m4, tcl8.3.4/win/cat.c,
	tcl8.3.4/win/configure, tcl8.3.4/win/configure.in,
	tcl8.3.4/win/license.terms, tcl8.3.4/win/makefile.vc,
	tcl8.3.4/win/mkd.bat, tcl8.3.4/win/rmd.bat, tcl8.3.4/win/stub16.c,
	tcl8.3.4/win/tcl.hpj.in, tcl8.3.4/win/tcl.m4, tcl8.3.4/win/tcl.rc,
	tcl8.3.4/win/tclAppInit.c, tcl8.3.4/win/tclConfig.sh.in,
	tcl8.3.4/win/tclWin32Dll.c, tcl8.3.4/win/tclWinChan.c,
	tcl8.3.4/win/tclWinConsole.c, tcl8.3.4/win/tclWinDde.c,
	tcl8.3.4/win/tclWinError.c, tcl8.3.4/win/tclWinFCmd.c,
	tcl8.3.4/win/tclWinFile.c, tcl8.3.4/win/tclWinInit.c,
	tcl8.3.4/win/tclWinInt.h, tcl8.3.4/win/tclWinLoad.c,
	tcl8.3.4/win/tclWinMtherr.c, tcl8.3.4/win/tclWinNotify.c,
	tcl8.3.4/win/tclWinPipe.c, tcl8.3.4/win/tclWinPort.h,
	tcl8.3.4/win/tclWinReg.c, tcl8.3.4/win/tclWinSerial.c,
	tcl8.3.4/win/tclWinSock.c, tcl8.3.4/win/tclWinTest.c,
	tcl8.3.4/win/tclWinThrd.c, tcl8.3.4/win/tclWinThrd.h,
	tcl8.3.4/win/tclWinTime.c, tcl8.3.4/win/tclsh.ico,
	tcl8.3.4/win/tclsh.rc: deleted file.
	* tcl8.3.4/ChangeLog, tcl8.3.4/README, tcl8.3.4/changes,
	tcl8.3.4/compat/README, tcl8.3.4/compat/dirent.h,
	tcl8.3.4/compat/dirent2.h, tcl8.3.4/compat/dlfcn.h,
	tcl8.3.4/compat/fixstrtod.c, tcl8.3.4/compat/float.h,
	tcl8.3.4/compat/gettod.c, tcl8.3.4/compat/license.terms,
	tcl8.3.4/compat/limits.h, tcl8.3.4/compat/memcmp.c,
	tcl8.3.4/compat/opendir.c, tcl8.3.4/compat/stdlib.h,
	tcl8.3.4/compat/strftime.c, tcl8.3.4/compat/string.h,
	tcl8.3.4/compat/strncasecmp.c, tcl8.3.4/compat/strstr.c,
	tcl8.3.4/compat/strtod.c, tcl8.3.4/compat/strtol.c,
	tcl8.3.4/compat/strtoul.c, tcl8.3.4/compat/tclErrno.h,
	tcl8.3.4/compat/tmpnam.c, tcl8.3.4/compat/unistd.h,
	tcl8.3.4/compat/waitpid.c, tcl8.3.4/doc/Access.3,
	tcl8.3.4/doc/AddErrInfo.3, tcl8.3.4/doc/Alloc.3,
	tcl8.3.4/doc/AllowExc.3, tcl8.3.4/doc/AppInit.3,
	tcl8.3.4/doc/AssocData.3, tcl8.3.4/doc/Async.3,
	tcl8.3.4/doc/BackgdErr.3, tcl8.3.4/doc/Backslash.3,
	tcl8.3.4/doc/BoolObj.3, tcl8.3.4/doc/ByteArrObj.3,
	tcl8.3.4/doc/CallDel.3, tcl8.3.4/doc/ChnlStack.3,
	tcl8.3.4/doc/CmdCmplt.3, tcl8.3.4/doc/Concat.3,
	tcl8.3.4/doc/CrtChannel.3, tcl8.3.4/doc/CrtChnlHdlr.3,
	tcl8.3.4/doc/CrtCloseHdlr.3, tcl8.3.4/doc/CrtCommand.3,
	tcl8.3.4/doc/CrtFileHdlr.3, tcl8.3.4/doc/CrtInterp.3,
	tcl8.3.4/doc/CrtMathFnc.3, tcl8.3.4/doc/CrtObjCmd.3,
	tcl8.3.4/doc/CrtSlave.3, tcl8.3.4/doc/CrtTimerHdlr.3,
	tcl8.3.4/doc/CrtTrace.3, tcl8.3.4/doc/DString.3,
	tcl8.3.4/doc/DetachPids.3, tcl8.3.4/doc/DoOneEvent.3,
	tcl8.3.4/doc/DoWhenIdle.3, tcl8.3.4/doc/DoubleObj.3,
	tcl8.3.4/doc/DumpActiveMemory.3, tcl8.3.4/doc/Encoding.3,
	tcl8.3.4/doc/Eval.3, tcl8.3.4/doc/Exit.3, tcl8.3.4/doc/ExprLong.3,
	tcl8.3.4/doc/ExprLongObj.3, tcl8.3.4/doc/FindExec.3,
	tcl8.3.4/doc/GetCwd.3, tcl8.3.4/doc/GetHostName.3,
	tcl8.3.4/doc/GetIndex.3, tcl8.3.4/doc/GetInt.3,
	tcl8.3.4/doc/GetOpnFl.3, tcl8.3.4/doc/GetStdChan.3,
	tcl8.3.4/doc/GetVersion.3, tcl8.3.4/doc/Hash.3, tcl8.3.4/doc/Init.3,
	tcl8.3.4/doc/InitStubs.3, tcl8.3.4/doc/IntObj.3,
	tcl8.3.4/doc/Interp.3, tcl8.3.4/doc/LinkVar.3,
	tcl8.3.4/doc/ListObj.3, tcl8.3.4/doc/Notifier.3,
	tcl8.3.4/doc/Object.3, tcl8.3.4/doc/ObjectType.3,
	tcl8.3.4/doc/OpenFileChnl.3, tcl8.3.4/doc/OpenTcp.3,
	tcl8.3.4/doc/ParseCmd.3, tcl8.3.4/doc/PkgRequire.3,
	tcl8.3.4/doc/Preserve.3, tcl8.3.4/doc/PrintDbl.3,
	tcl8.3.4/doc/RecEvalObj.3, tcl8.3.4/doc/RecordEval.3,
	tcl8.3.4/doc/RegExp.3, tcl8.3.4/doc/SaveResult.3,
	tcl8.3.4/doc/SetErrno.3, tcl8.3.4/doc/SetRecLmt.3,
	tcl8.3.4/doc/SetResult.3, tcl8.3.4/doc/SetVar.3,
	tcl8.3.4/doc/Sleep.3, tcl8.3.4/doc/SourceRCFile.3,
	tcl8.3.4/doc/SplitList.3, tcl8.3.4/doc/SplitPath.3,
	tcl8.3.4/doc/StaticPkg.3, tcl8.3.4/doc/StrMatch.3,
	tcl8.3.4/doc/StringObj.3, tcl8.3.4/doc/TCL_MEM_DEBUG.3,
	tcl8.3.4/doc/Tcl.n, tcl8.3.4/doc/Tcl_Main.3, tcl8.3.4/doc/Thread.3,
	tcl8.3.4/doc/ToUpper.3, tcl8.3.4/doc/TraceVar.3,
	tcl8.3.4/doc/Translate.3, tcl8.3.4/doc/UpVar.3, tcl8.3.4/doc/Utf.3,
	tcl8.3.4/doc/WrongNumArgs.3, tcl8.3.4/doc/after.n,
	tcl8.3.4/doc/append.n, tcl8.3.4/doc/array.n, tcl8.3.4/doc/bgerror.n,
	tcl8.3.4/doc/binary.n, tcl8.3.4/doc/break.n, tcl8.3.4/doc/case.n,
	tcl8.3.4/doc/catch.n, tcl8.3.4/doc/cd.n, tcl8.3.4/doc/clock.n,
	tcl8.3.4/doc/close.n, tcl8.3.4/doc/concat.n,
	tcl8.3.4/doc/continue.n, tcl8.3.4/doc/dde.n,
	tcl8.3.4/doc/encoding.n, tcl8.3.4/doc/eof.n, tcl8.3.4/doc/error.n,
	tcl8.3.4/doc/eval.n, tcl8.3.4/doc/exec.n, tcl8.3.4/doc/exit.n,
	tcl8.3.4/doc/expr.n, tcl8.3.4/doc/fblocked.n,
	tcl8.3.4/doc/fconfigure.n, tcl8.3.4/doc/fcopy.n,
	tcl8.3.4/doc/file.n, tcl8.3.4/doc/fileevent.n,
	tcl8.3.4/doc/filename.n, tcl8.3.4/doc/flush.n, tcl8.3.4/doc/for.n,
	tcl8.3.4/doc/foreach.n, tcl8.3.4/doc/format.n, tcl8.3.4/doc/gets.n,
	tcl8.3.4/doc/glob.n, tcl8.3.4/doc/global.n, tcl8.3.4/doc/history.n,
	tcl8.3.4/doc/http.n, tcl8.3.4/doc/if.n, tcl8.3.4/doc/incr.n,
	tcl8.3.4/doc/info.n, tcl8.3.4/doc/interp.n, tcl8.3.4/doc/join.n,
	tcl8.3.4/doc/lappend.n, tcl8.3.4/doc/library.n,
	tcl8.3.4/doc/license.terms, tcl8.3.4/doc/lindex.n,
	tcl8.3.4/doc/linsert.n, tcl8.3.4/doc/list.n, tcl8.3.4/doc/llength.n,
	tcl8.3.4/doc/load.n, tcl8.3.4/doc/lrange.n, tcl8.3.4/doc/lreplace.n,
	tcl8.3.4/doc/lsearch.n, tcl8.3.4/doc/lsort.n,
	tcl8.3.4/doc/man.macros, tcl8.3.4/doc/memory.n,
	tcl8.3.4/doc/msgcat.n, tcl8.3.4/doc/namespace.n,
	tcl8.3.4/doc/open.n, tcl8.3.4/doc/package.n,
	tcl8.3.4/doc/packagens.n, tcl8.3.4/doc/pid.n,
	tcl8.3.4/doc/pkgMkIndex.n, tcl8.3.4/doc/proc.n, tcl8.3.4/doc/puts.n,
	tcl8.3.4/doc/pwd.n, tcl8.3.4/doc/re_syntax.n, tcl8.3.4/doc/read.n,
	tcl8.3.4/doc/regexp.n, tcl8.3.4/doc/registry.n,
	tcl8.3.4/doc/regsub.n, tcl8.3.4/doc/rename.n,
	tcl8.3.4/doc/resource.n, tcl8.3.4/doc/return.n, tcl8.3.4/doc/safe.n,
	tcl8.3.4/doc/scan.n, tcl8.3.4/doc/seek.n, tcl8.3.4/doc/set.n,
	tcl8.3.4/doc/socket.n, tcl8.3.4/doc/source.n, tcl8.3.4/doc/split.n,
	tcl8.3.4/doc/string.n, tcl8.3.4/doc/subst.n, tcl8.3.4/doc/switch.n,
	tcl8.3.4/doc/tclsh.1, tcl8.3.4/doc/tcltest.n,
	tcl8.3.4/doc/tclvars.n, tcl8.3.4/doc/tell.n, tcl8.3.4/doc/time.n,
	tcl8.3.4/doc/trace.n, tcl8.3.4/doc/unknown.n, tcl8.3.4/doc/unset.n,
	tcl8.3.4/doc/update.n, tcl8.3.4/doc/uplevel.n, tcl8.3.4/doc/upvar.n,
	tcl8.3.4/doc/variable.n, tcl8.3.4/doc/vwait.n, tcl8.3.4/doc/while.n,
	tcl8.3.4/generic/README, tcl8.3.4/generic/regc_color.c,
	tcl8.3.4/generic/regc_cvec.c, tcl8.3.4/generic/regc_lex.c,
	tcl8.3.4/generic/regc_locale.c, tcl8.3.4/generic/regc_nfa.c,
	tcl8.3.4/generic/regcomp.c, tcl8.3.4/generic/regcustom.h,
	tcl8.3.4/generic/rege_dfa.c, tcl8.3.4/generic/regerror.c,
	tcl8.3.4/generic/regerrs.h, tcl8.3.4/generic/regex.h,
	tcl8.3.4/generic/regexec.c, tcl8.3.4/generic/regfree.c,
	tcl8.3.4/generic/regfronts.c, tcl8.3.4/generic/regguts.h,
	tcl8.3.4/generic/tcl.decls, tcl8.3.4/generic/tcl.h,
	tcl8.3.4/generic/tclAlloc.c, tcl8.3.4/generic/tclAlloc.c.orig,
	tcl8.3.4/generic/tclAsync.c, tcl8.3.4/generic/tclBasic.c,
	tcl8.3.4/generic/tclBinary.c, tcl8.3.4/generic/tclCkalloc.c,
	tcl8.3.4/generic/tclClock.c, tcl8.3.4/generic/tclCmdAH.c,
	tcl8.3.4/generic/tclCmdIL.c, tcl8.3.4/generic/tclCmdMZ.c,
	tcl8.3.4/generic/tclCompCmds.c, tcl8.3.4/generic/tclCompExpr.c,
	tcl8.3.4/generic/tclCompile.c, tcl8.3.4/generic/tclCompile.h,
	tcl8.3.4/generic/tclDate.c, tcl8.3.4/generic/tclDecls.h,
	tcl8.3.4/generic/tclEncoding.c, tcl8.3.4/generic/tclEnv.c,
	tcl8.3.4/generic/tclEvent.c, tcl8.3.4/generic/tclExecute.c,
	tcl8.3.4/generic/tclFCmd.c, tcl8.3.4/generic/tclFileName.c,
	tcl8.3.4/generic/tclGet.c, tcl8.3.4/generic/tclGetDate.y,
	tcl8.3.4/generic/tclHash.c, tcl8.3.4/generic/tclHistory.c,
	tcl8.3.4/generic/tclIO.c, tcl8.3.4/generic/tclIO.h,
	tcl8.3.4/generic/tclIOCmd.c, tcl8.3.4/generic/tclIOGT.c,
	tcl8.3.4/generic/tclIOSock.c, tcl8.3.4/generic/tclIOUtil.c,
	tcl8.3.4/generic/tclIndexObj.c, tcl8.3.4/generic/tclInitScript.h,
	tcl8.3.4/generic/tclInt.decls, tcl8.3.4/generic/tclInt.h,
	tcl8.3.4/generic/tclInt.h.orig, tcl8.3.4/generic/tclIntDecls.h,
	tcl8.3.4/generic/tclIntPlatDecls.h, tcl8.3.4/generic/tclInterp.c,
	tcl8.3.4/generic/tclLink.c, tcl8.3.4/generic/tclListObj.c,
	tcl8.3.4/generic/tclLiteral.c, tcl8.3.4/generic/tclLoad.c,
	tcl8.3.4/generic/tclLoadNone.c, tcl8.3.4/generic/tclMain.c,
	tcl8.3.4/generic/tclMath.h, tcl8.3.4/generic/tclNamesp.c,
	tcl8.3.4/generic/tclNotify.c, tcl8.3.4/generic/tclObj.c,
	tcl8.3.4/generic/tclObj.c.orig, tcl8.3.4/generic/tclPanic.c,
	tcl8.3.4/generic/tclParse.c, tcl8.3.4/generic/tclParseExpr.c,
	tcl8.3.4/generic/tclPipe.c, tcl8.3.4/generic/tclPkg.c,
	tcl8.3.4/generic/tclPlatDecls.h, tcl8.3.4/generic/tclPort.h,
	tcl8.3.4/generic/tclPosixStr.c, tcl8.3.4/generic/tclPreserve.c,
	tcl8.3.4/generic/tclProc.c, tcl8.3.4/generic/tclRegexp.c,
	tcl8.3.4/generic/tclRegexp.h, tcl8.3.4/generic/tclResolve.c,
	tcl8.3.4/generic/tclResult.c, tcl8.3.4/generic/tclScan.c,
	tcl8.3.4/generic/tclStringObj.c, tcl8.3.4/generic/tclStubInit.c,
	tcl8.3.4/generic/tclStubInit.c.orig, tcl8.3.4/generic/tclStubLib.c,
	tcl8.3.4/generic/tclTest.c, tcl8.3.4/generic/tclTestObj.c,
	tcl8.3.4/generic/tclTestProcBodyObj.c, tcl8.3.4/generic/tclThread.c,
	tcl8.3.4/generic/tclThreadTest.c, tcl8.3.4/generic/tclTimer.c,
	tcl8.3.4/generic/tclUniData.c, tcl8.3.4/generic/tclUtf.c,
	tcl8.3.4/generic/tclUtil.c, tcl8.3.4/generic/tclVar.c,
	tcl8.3.4/library/auto.tcl, tcl8.3.4/library/dde1.1/pkgIndex.tcl,
	tcl8.3.4/library/encoding/ascii.enc,
	tcl8.3.4/library/encoding/big5.enc,
	tcl8.3.4/library/encoding/cp1250.enc,
	tcl8.3.4/library/encoding/cp1251.enc,
	tcl8.3.4/library/encoding/cp1252.enc,
	tcl8.3.4/library/encoding/cp1253.enc,
	tcl8.3.4/library/encoding/cp1254.enc,
	tcl8.3.4/library/encoding/cp1255.enc,
	tcl8.3.4/library/encoding/cp1256.enc,
	tcl8.3.4/library/encoding/cp1257.enc,
	tcl8.3.4/library/encoding/cp1258.enc,
	tcl8.3.4/library/encoding/cp437.enc,
	tcl8.3.4/library/encoding/cp737.enc,
	tcl8.3.4/library/encoding/cp775.enc,
	tcl8.3.4/library/encoding/cp850.enc,
	tcl8.3.4/library/encoding/cp852.enc,
	tcl8.3.4/library/encoding/cp855.enc,
	tcl8.3.4/library/encoding/cp857.enc,
	tcl8.3.4/library/encoding/cp860.enc,
	tcl8.3.4/library/encoding/cp861.enc,
	tcl8.3.4/library/encoding/cp862.enc,
	tcl8.3.4/library/encoding/cp863.enc,
	tcl8.3.4/library/encoding/cp864.enc,
	tcl8.3.4/library/encoding/cp865.enc,
	tcl8.3.4/library/encoding/cp866.enc,
	tcl8.3.4/library/encoding/cp869.enc,
	tcl8.3.4/library/encoding/cp874.enc,
	tcl8.3.4/library/encoding/cp932.enc,
	tcl8.3.4/library/encoding/cp936.enc,
	tcl8.3.4/library/encoding/cp949.enc,
	tcl8.3.4/library/encoding/cp950.enc,
	tcl8.3.4/library/encoding/dingbats.enc,
	tcl8.3.4/library/encoding/ebcdic.enc, tcl8.3.4/library/encoding/euc-
	cn.enc, tcl8.3.4/library/encoding/euc-jp.enc,
	tcl8.3.4/library/encoding/euc-kr.enc,
	tcl8.3.4/library/encoding/gb12345.enc,
	tcl8.3.4/library/encoding/gb1988.enc,
	tcl8.3.4/library/encoding/gb2312.enc,
	tcl8.3.4/library/encoding/iso2022-jp.enc,
	tcl8.3.4/library/encoding/iso2022-kr.enc,
	tcl8.3.4/library/encoding/iso2022.enc,
	tcl8.3.4/library/encoding/iso8859-1.enc,
	tcl8.3.4/library/encoding/iso8859-10.enc,
	tcl8.3.4/library/encoding/iso8859-13.enc,
	tcl8.3.4/library/encoding/iso8859-14.enc,
	tcl8.3.4/library/encoding/iso8859-15.enc,
	tcl8.3.4/library/encoding/iso8859-16.enc,
	tcl8.3.4/library/encoding/iso8859-2.enc,
	tcl8.3.4/library/encoding/iso8859-3.enc,
	tcl8.3.4/library/encoding/iso8859-4.enc,
	tcl8.3.4/library/encoding/iso8859-5.enc,
	tcl8.3.4/library/encoding/iso8859-6.enc,
	tcl8.3.4/library/encoding/iso8859-7.enc,
	tcl8.3.4/library/encoding/iso8859-8.enc,
	tcl8.3.4/library/encoding/iso8859-9.enc,
	tcl8.3.4/library/encoding/jis0201.enc,
	tcl8.3.4/library/encoding/jis0208.enc,
	tcl8.3.4/library/encoding/jis0212.enc,
	tcl8.3.4/library/encoding/koi8-r.enc,
	tcl8.3.4/library/encoding/koi8-u.enc,
	tcl8.3.4/library/encoding/ksc5601.enc,
	tcl8.3.4/library/encoding/macCentEuro.enc,
	tcl8.3.4/library/encoding/macCroatian.enc,
	tcl8.3.4/library/encoding/macCyrillic.enc,
	tcl8.3.4/library/encoding/macDingbats.enc,
	tcl8.3.4/library/encoding/macGreek.enc,
	tcl8.3.4/library/encoding/macIceland.enc,
	tcl8.3.4/library/encoding/macJapan.enc,
	tcl8.3.4/library/encoding/macRoman.enc,
	tcl8.3.4/library/encoding/macRomania.enc,
	tcl8.3.4/library/encoding/macThai.enc,
	tcl8.3.4/library/encoding/macTurkish.enc,
	tcl8.3.4/library/encoding/macUkraine.enc,
	tcl8.3.4/library/encoding/shiftjis.enc,
	tcl8.3.4/library/encoding/symbol.enc,
	tcl8.3.4/library/encoding/tis-620.enc, tcl8.3.4/library/history.tcl,
	tcl8.3.4/library/http/http.tcl, tcl8.3.4/library/http/pkgIndex.tcl,
	tcl8.3.4/library/http1.0/http.tcl,
	tcl8.3.4/library/http1.0/pkgIndex.tcl, tcl8.3.4/library/init.tcl,
	tcl8.3.4/library/ldAout.tcl, tcl8.3.4/library/license.terms,
	tcl8.3.4/library/msgcat/msgcat.tcl,
	tcl8.3.4/library/msgcat/pkgIndex.tcl,
	tcl8.3.4/library/opt/optparse.tcl,
	tcl8.3.4/library/opt/pkgIndex.tcl, tcl8.3.4/library/package.tcl,
	tcl8.3.4/library/parray.tcl, tcl8.3.4/library/reg1.0/pkgIndex.tcl,
	tcl8.3.4/library/safe.tcl, tcl8.3.4/library/tclIndex,
	tcl8.3.4/library/tcltest1.0/pkgIndex.tcl,
	tcl8.3.4/library/tcltest1.0/tcltest.tcl, tcl8.3.4/library/word.tcl,
	tcl8.3.4/license.terms, tcl8.3.4/mac/AppleScript.html,
	tcl8.3.4/mac/Background.doc, tcl8.3.4/mac/MW_TclAppleScriptHeader.h,
	tcl8.3.4/mac/MW_TclAppleScriptHeader.pch,
	tcl8.3.4/mac/MW_TclBuildLibHeader.h,
	tcl8.3.4/mac/MW_TclBuildLibHeader.pch, tcl8.3.4/mac/MW_TclHeader.h,
	tcl8.3.4/mac/MW_TclHeader.pch, tcl8.3.4/mac/MW_TclHeaderCommon.h,
	tcl8.3.4/mac/MW_TclStaticHeader.h,
	tcl8.3.4/mac/MW_TclStaticHeader.pch,
	tcl8.3.4/mac/MW_TclTestHeader.h, tcl8.3.4/mac/MW_TclTestHeader.pch,
	tcl8.3.4/mac/README, tcl8.3.4/mac/bugs.doc,
	tcl8.3.4/mac/libmoto.doc, tcl8.3.4/mac/license.terms,
	tcl8.3.4/mac/morefiles.doc, tcl8.3.4/mac/porting.notes,
	tcl8.3.4/mac/tclMac.h, tcl8.3.4/mac/tclMacAETE.r,
	tcl8.3.4/mac/tclMacAlloc.c, tcl8.3.4/mac/tclMacAppInit.c,
	tcl8.3.4/mac/tclMacApplication.r, tcl8.3.4/mac/tclMacBOAAppInit.c,
	tcl8.3.4/mac/tclMacBOAMain.c, tcl8.3.4/mac/tclMacChan.c,
	tcl8.3.4/mac/tclMacCommonPch.h, tcl8.3.4/mac/tclMacDNR.c,
	tcl8.3.4/mac/tclMacEnv.c, tcl8.3.4/mac/tclMacExit.c,
	tcl8.3.4/mac/tclMacFCmd.c, tcl8.3.4/mac/tclMacFile.c,
	tcl8.3.4/mac/tclMacInit.c, tcl8.3.4/mac/tclMacInt.h,
	tcl8.3.4/mac/tclMacInterupt.c, tcl8.3.4/mac/tclMacLibrary.c,
	tcl8.3.4/mac/tclMacLibrary.r, tcl8.3.4/mac/tclMacLoad.c,
	tcl8.3.4/mac/tclMacMath.h, tcl8.3.4/mac/tclMacNotify.c,
	tcl8.3.4/mac/tclmacOSA.c, tcl8.3.4/mac/tclmacOSA.r,
	tcl8.3.4/mac/tclMacPanic.c, tcl8.3.4/mac/tclMacPort.h,
	tcl8.3.4/mac/tclMacProjects.sea.hqx, tcl8.3.4/mac/tclMacResource.c,
	tcl8.3.4/mac/tclMacResource.r, tcl8.3.4/mac/tclMacSock.c,
	tcl8.3.4/mac/tclMacTclCode.r, tcl8.3.4/mac/tclMacTest.c,
	tcl8.3.4/mac/tclMacThrd.c, tcl8.3.4/mac/tclMacThrd.h,
	tcl8.3.4/mac/tclMacTime.c, tcl8.3.4/mac/tclMacUnix.c,
	tcl8.3.4/mac/tclMacUtil.c, tcl8.3.4/tests/README,
	tcl8.3.4/tests/all.tcl, tcl8.3.4/tests/append.test,
	tcl8.3.4/tests/assocd.test, tcl8.3.4/tests/async.test,
	tcl8.3.4/tests/autoMkindex.tcl, tcl8.3.4/tests/autoMkindex.test,
	tcl8.3.4/tests/basic.test, tcl8.3.4/tests/binary.test,
	tcl8.3.4/tests/case.test, tcl8.3.4/tests/clock.test,
	tcl8.3.4/tests/cmdAH.test, tcl8.3.4/tests/cmdIL.test,
	tcl8.3.4/tests/cmdInfo.test, tcl8.3.4/tests/cmdMZ.test,
	tcl8.3.4/tests/compExpr-old.test, tcl8.3.4/tests/compExpr.test,
	tcl8.3.4/tests/compile.test, tcl8.3.4/tests/concat.test,
	tcl8.3.4/tests/dcall.test, tcl8.3.4/tests/dstring.test,
	tcl8.3.4/tests/encoding.test, tcl8.3.4/tests/env.test,
	tcl8.3.4/tests/error.test, tcl8.3.4/tests/eval.test,
	tcl8.3.4/tests/event.test, tcl8.3.4/tests/exec.test,
	tcl8.3.4/tests/execute.test, tcl8.3.4/tests/expr-old.test,
	tcl8.3.4/tests/expr.test, tcl8.3.4/tests/fCmd.test,
	tcl8.3.4/tests/fileName.test, tcl8.3.4/tests/for-old.test,
	tcl8.3.4/tests/for.test, tcl8.3.4/tests/foreach.test,
	tcl8.3.4/tests/format.test, tcl8.3.4/tests/get.test,
	tcl8.3.4/tests/history.test, tcl8.3.4/tests/http.test,
	tcl8.3.4/tests/httpd, tcl8.3.4/tests/httpold.test, tcl8.3.4/tests
	/if-old.test, tcl8.3.4/tests/if.test, tcl8.3.4/tests/incr-old.test,
	tcl8.3.4/tests/incr.test, tcl8.3.4/tests/indexObj.test,
	tcl8.3.4/tests/info.test, tcl8.3.4/tests/init.test,
	tcl8.3.4/tests/interp.test, tcl8.3.4/tests/io.test,
	tcl8.3.4/tests/ioCmd.test, tcl8.3.4/tests/ioUtil.test,
	tcl8.3.4/tests/iogt.test, tcl8.3.4/tests/join.test,
	tcl8.3.4/tests/license.terms, tcl8.3.4/tests/lindex.test,
	tcl8.3.4/tests/link.test, tcl8.3.4/tests/linsert.test,
	tcl8.3.4/tests/list.test, tcl8.3.4/tests/listObj.test,
	tcl8.3.4/tests/llength.test, tcl8.3.4/tests/load.test,
	tcl8.3.4/tests/lrange.test, tcl8.3.4/tests/lreplace.test,
	tcl8.3.4/tests/lsearch.test, tcl8.3.4/tests/macFCmd.test,
	tcl8.3.4/tests/misc.test, tcl8.3.4/tests/msgcat.test, tcl8.3.4/tests
	/namespace-old.test, tcl8.3.4/tests/namespace.test,
	tcl8.3.4/tests/obj.test, tcl8.3.4/tests/opt.test,
	tcl8.3.4/tests/osa.test, tcl8.3.4/tests/package.test,
	tcl8.3.4/tests/parse.test, tcl8.3.4/tests/parseExpr.test,
	tcl8.3.4/tests/parseOld.test, tcl8.3.4/tests/pid.test,
	tcl8.3.4/tests/pkg.test, tcl8.3.4/tests/pkg/circ1.tcl,
	tcl8.3.4/tests/pkg/circ2.tcl, tcl8.3.4/tests/pkg/circ3.tcl,
	tcl8.3.4/tests/pkg/global.tcl, tcl8.3.4/tests/pkg/import.tcl,
	tcl8.3.4/tests/pkg/license.terms, tcl8.3.4/tests/pkg/magicchar.tcl,
	tcl8.3.4/tests/pkg/magicchar2.tcl, tcl8.3.4/tests/pkg/pkg1.tcl,
	tcl8.3.4/tests/pkg/pkg2_a.tcl, tcl8.3.4/tests/pkg/pkg2_b.tcl,
	tcl8.3.4/tests/pkg/pkg3.tcl, tcl8.3.4/tests/pkg/pkg4.tcl,
	tcl8.3.4/tests/pkg/pkg5.tcl, tcl8.3.4/tests/pkg/pkga.tcl,
	tcl8.3.4/tests/pkg/samename.tcl, tcl8.3.4/tests/pkg/simple.tcl,
	tcl8.3.4/tests/pkg/spacename.tcl, tcl8.3.4/tests/pkg/std.tcl,
	tcl8.3.4/tests/pkgMkIndex.test, tcl8.3.4/tests/platform.test,
	tcl8.3.4/tests/proc-old.test, tcl8.3.4/tests/proc.test,
	tcl8.3.4/tests/pwd.test, tcl8.3.4/tests/reg.test,
	tcl8.3.4/tests/regexp.test, tcl8.3.4/tests/registry.test,
	tcl8.3.4/tests/remote.tcl, tcl8.3.4/tests/rename.test,
	tcl8.3.4/tests/resource.test, tcl8.3.4/tests/result.test,
	tcl8.3.4/tests/safe.test, tcl8.3.4/tests/scan.test,
	tcl8.3.4/tests/security.test, tcl8.3.4/tests/set-old.test,
	tcl8.3.4/tests/set.test, tcl8.3.4/tests/socket.test,
	tcl8.3.4/tests/source.test, tcl8.3.4/tests/split.test,
	tcl8.3.4/tests/stack.test, tcl8.3.4/tests/string.test,
	tcl8.3.4/tests/stringObj.test, tcl8.3.4/tests/subst.test,
	tcl8.3.4/tests/switch.test, tcl8.3.4/tests/tcltest.test,
	tcl8.3.4/tests/thread.test, tcl8.3.4/tests/timer.test,
	tcl8.3.4/tests/trace.test, tcl8.3.4/tests/unixFCmd.test,
	tcl8.3.4/tests/unixFile.test, tcl8.3.4/tests/unixInit.test,
	tcl8.3.4/tests/unixNotfy.test, tcl8.3.4/tests/unknown.test,
	tcl8.3.4/tests/uplevel.test, tcl8.3.4/tests/upvar.test,
	tcl8.3.4/tests/utf.test, tcl8.3.4/tests/util.test,
	tcl8.3.4/tests/var.test, tcl8.3.4/tests/while-old.test,
	tcl8.3.4/tests/while.test, tcl8.3.4/tests/winConsole.test,
	tcl8.3.4/tests/winDde.test, tcl8.3.4/tests/winFCmd.test,
	tcl8.3.4/tests/winFile.test, tcl8.3.4/tests/winNotify.test,
	tcl8.3.4/tests/winPipe.test, tcl8.3.4/tests/winTime.test,
	tcl8.3.4/tools/Makefile.in, tcl8.3.4/tools/README,
	tcl8.3.4/tools/checkLibraryDoc.tcl, tcl8.3.4/tools/configure,
	tcl8.3.4/tools/configure.in, tcl8.3.4/tools/cvtEOL.tcl,
	tcl8.3.4/tools/genStubs.tcl, tcl8.3.4/tools/genWinImage.tcl,
	tcl8.3.4/tools/index.tcl, tcl8.3.4/tools/man2help.tcl,
	tcl8.3.4/tools/man2help2.tcl, tcl8.3.4/tools/man2html.tcl,
	tcl8.3.4/tools/man2html1.tcl, tcl8.3.4/tools/man2html2.tcl,
	tcl8.3.4/tools/man2tcl.c, tcl8.3.4/tools/regexpTestLib.tcl,
	tcl8.3.4/tools/tcl.hpj.in, tcl8.3.4/tools/tcl.wse.in,
	tcl8.3.4/tools/tclSplash.bmp, tcl8.3.4/tools/tcltk-man2html.tcl,
	tcl8.3.4/tools/uniClass.tcl, tcl8.3.4/tools/uniParse.tcl,
	tcl8.3.4/tools/white.bmp, tcl8.3.4/unix/Makefile.in,
	tcl8.3.4/unix/README, tcl8.3.4/unix/aclocal.m4,
	tcl8.3.4/unix/configure, tcl8.3.4/unix/configure.in,
	tcl8.3.4/unix/configure.orig, tcl8.3.4/unix/dltest/Makefile.in,
	tcl8.3.4/unix/dltest/README, tcl8.3.4/unix/dltest/configure,
	tcl8.3.4/unix/dltest/configure.in, tcl8.3.4/unix/dltest/pkga.c,
	tcl8.3.4/unix/dltest/pkgb.c, tcl8.3.4/unix/dltest/pkgc.c,
	tcl8.3.4/unix/dltest/pkgd.c, tcl8.3.4/unix/dltest/pkge.c,
	tcl8.3.4/unix/dltest/pkgf.c, tcl8.3.4/unix/install-sh,
	tcl8.3.4/unix/ldAix, tcl8.3.4/unix/mkLinks, tcl8.3.4/unix/tcl.m4,
	tcl8.3.4/unix/tcl.m4.orig, tcl8.3.4/unix/tcl.spec,
	tcl8.3.4/unix/tclAppInit.c, tcl8.3.4/unix/tclConfig.sh.in,
	tcl8.3.4/unix/tclLoadAix.c, tcl8.3.4/unix/tclLoadAout.c,
	tcl8.3.4/unix/tclLoadDl.c, tcl8.3.4/unix/tclLoadDld.c,
	tcl8.3.4/unix/tclLoadDyld.c, tcl8.3.4/unix/tclLoadDyld.c.orig,
	tcl8.3.4/unix/tclLoadNext.c, tcl8.3.4/unix/tclLoadOSF.c,
	tcl8.3.4/unix/tclLoadShl.c, tcl8.3.4/unix/tclMtherr.c,
	tcl8.3.4/unix/tclUnixChan.c, tcl8.3.4/unix/tclUnixEvent.c,
	tcl8.3.4/unix/tclUnixFCmd.c, tcl8.3.4/unix/tclUnixFile.c,
	tcl8.3.4/unix/tclUnixInit.c, tcl8.3.4/unix/tclUnixNotfy.c,
	tcl8.3.4/unix/tclUnixPipe.c, tcl8.3.4/unix/tclUnixPort.h,
	tcl8.3.4/unix/tclUnixPort.h.orig, tcl8.3.4/unix/tclUnixSock.c,
	tcl8.3.4/unix/tclUnixTest.c, tcl8.3.4/unix/tclUnixThrd.c,
	tcl8.3.4/unix/tclUnixThrd.c.orig, tcl8.3.4/unix/tclUnixThrd.h,
	tcl8.3.4/unix/tclUnixTime.c, tcl8.3.4/unix/tclXtNotify.c,
	tcl8.3.4/unix/tclXtTest.c, tcl8.3.4/win/Makefile.in,
	tcl8.3.4/win/README, tcl8.3.4/win/aclocal.m4, tcl8.3.4/win/cat.c,
	tcl8.3.4/win/configure, tcl8.3.4/win/configure.in,
	tcl8.3.4/win/license.terms, tcl8.3.4/win/makefile.vc,
	tcl8.3.4/win/mkd.bat, tcl8.3.4/win/rmd.bat, tcl8.3.4/win/stub16.c,
	tcl8.3.4/win/tcl.hpj.in, tcl8.3.4/win/tcl.m4, tcl8.3.4/win/tcl.rc,
	tcl8.3.4/win/tclAppInit.c, tcl8.3.4/win/tclConfig.sh.in,
	tcl8.3.4/win/tclWin32Dll.c, tcl8.3.4/win/tclWinChan.c,
	tcl8.3.4/win/tclWinConsole.c, tcl8.3.4/win/tclWinDde.c,
	tcl8.3.4/win/tclWinError.c, tcl8.3.4/win/tclWinFCmd.c,
	tcl8.3.4/win/tclWinFile.c, tcl8.3.4/win/tclWinInit.c,
	tcl8.3.4/win/tclWinInt.h, tcl8.3.4/win/tclWinLoad.c,
	tcl8.3.4/win/tclWinMtherr.c, tcl8.3.4/win/tclWinNotify.c,
	tcl8.3.4/win/tclWinPipe.c, tcl8.3.4/win/tclWinPort.h,
	tcl8.3.4/win/tclWinReg.c, tcl8.3.4/win/tclWinSerial.c,
	tcl8.3.4/win/tclWinSock.c, tcl8.3.4/win/tclWinTest.c,
	tcl8.3.4/win/tclWinThrd.c, tcl8.3.4/win/tclWinThrd.h,
	tcl8.3.4/win/tclWinTime.c, tcl8.3.4/win/tclsh.ico,
	tcl8.3.4/win/tclsh.rc:
	Removed the hacked 8.3.4 sources because 8.4 requires no
	modifications for AOLserver

2002-05-16 00:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (ae0a7b9b85ef)

	* include/Makefile.global:
	Few build fixes; updated to build with Tcl 8.4 sources

2002-05-15 22:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (beb6acce6ce8)

	* nsext/nsext.c:
	Include new nsdb.h header and set mutex name

2002-05-15 21:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (838bf360efdb)

	* nscgi/nscgi.c:
	Update mutex name; fix bug with printing null exec name on wait
	error; add loop to catch interrupted read()'s

2002-05-15 21:18 +0100  Jim Davidson  <jgdavidson@aol.com>  (db748925ac77)

	* nslog/nslog.c:
	Updated nslog mutex name to be virtual server specific

2002-05-15 21:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (f48fafe81a52)

	* nsd/exec.c:
	Added support for a process manager thread to allow exec and wait
	from different threads on Linux

2002-05-15 21:13 +0100  Jim Davidson  <jgdavidson@aol.com>  (8616aa286f63)

	* nsd/adpeval.c:
	Fixed ADP bug referencing freed memory

2002-05-15 21:11 +0100  Jim Davidson  <jgdavidson@aol.com>  (042b23a73c68)

	* nsd/tclinit.c:
	Call Tcl_InitMemory to support compiling with Tcl debug allocator;
	fix interp cleanup crash bug

2002-05-15 21:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (9dfc06dd1137)

	* include/nsdb.h, nsdb/Makefile, nsdb/db.h, nsdb/dbdrv.c,
	nsdb/dbinit.c, nsdb/dbtcl.c, nsdb/dbutil.c: new file.
	* nsd/dbdrv.c, nsd/dbinit.c, nsd/dbtcl.c, nsd/dbutil.c: deleted file.
	* Makefile, include/ns.h, include/nsdb.h, nsd/Makefile, nsd/dbdrv.c,
	nsd/dbinit.c, nsd/dbtcl.c, nsd/dbutil.c, nsd/init.tcl, nsd/nsd.h,
	nsd/nsmain.c, nsd/proc.c, nsd/server.c, nsd/tclcmds.c,
	nsdb/Makefile, nsdb/db.h, nsdb/dbdrv.c, nsdb/dbinit.c, nsdb/dbtcl.c,
	nsdb/dbutil.c:
	Moved the database interface to the new nsdb module

2002-05-15 21:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (b79d63ccfc08)

	* nsd/cache.c, nsd/callbacks.c, nsd/listen.c, nsd/nsconf.c, nsd/op.c,
	nsd/sched.c, nsd/sockcallback.c, nsd/urlspace.c:
	Cleaned up some mutex names

2002-03-03 16:14 +0000  Jim Davidson  <jgdavidson@aol.com>  (5dcbe45683c4)

	* nsd/Makefile:
	Force recompile of stamp.o on each link for updated ns_info build
	time

2002-03-03 16:07 +0000  Jim Davidson  <jgdavidson@aol.com>  (54d4a56827cb)

	* nsd/osx.c: deleted file.
	* nsd/osx.c:
	Code integrated into unix.c and Tcl source

2002-03-03 15:33 +0000  Jim Davidson  <jgdavidson@aol.com>  (b8d8e3678984)

	* tcl8.3.4/Makefile: deleted file.
	* Makefile, include/Makefile.global, tcl8.3.4/Makefile:
	Make it easier to build unmodified Tcl from some other directory

	Eliminated tcl8.3.4/Makefile, moving rules to Makefile and
	include/Makefile.global.

2002-03-03 15:30 +0000  Jim Davidson  <jgdavidson@aol.com>  (abbd86782fd4)

	* include/Makefile.module:
	Added HDRS rule and usage comments

2002-02-28 21:57 +0000  Jim Davidson  <jgdavidson@aol.com>  (53f8ab0232c1)

	* include/Makefile.global:
	Fixed AR makefile variable for Solaris

2002-02-24 21:45 +0000  Jim Davidson  <jgdavidson@aol.com>  (1372f7d4054a)

	* ini2tcl.tcl, sample-config.tcl, tcl2ini.tcl: new file.
	* ChangeLog, Makefile, ini2tcl.tcl, sample-config.tcl, tcl2ini.tcl:
	Simplified install steps a bit

2002-02-24 21:45 +0000  Jim Davidson  <jgdavidson@aol.com>  (18e77766696f)

	* nsmain/tcl2ini.tcl: deleted file.
	* nsmain/tcl2ini.tcl:
	Moved tcl2ini to top level

2002-02-24 21:33 +0000  Jim Davidson  <jgdavidson@aol.com>  (3fc772870d40)

	* nsd/init.tcl, nsd/main.c: new file.
	* nsmain/Makefile, nsmain/init.tcl, nsmain/main.c, nsmain/sample-
	config.tcl, nsmain/translate-ini: deleted file.
	* nsd/Makefile, nsd/init.tcl, nsd/main.c, nsmain/Makefile,
	nsmain/init.tcl, nsmain/main.c, nsmain/sample-config.tcl, nsmain
	/translate-ini:
	Moved build of nsd main into ../nsd from ../nsmain

2002-02-24 20:33 +0000  Jim Davidson  <jgdavidson@aol.com>  (db996388b4df)

	* compat/osx.c, compat/poll.h: deleted file.
	* compat/osx.c, compat/poll.h, nsd/nsd.h, nsd/unix.c,
	tcl8.3.4/unix/tclLoadDyld.c:
	Better isolated the hacks for OS/X into nsd and tcl directly

2002-02-24 02:21 +0000  Jim Davidson  <jgdavidson@aol.com>  (6bd84ea212b6)

	* include/Makefile.global:
	Yet more fixes for RPATH weirdness, this time for OSX

2002-02-24 02:13 +0000  Jim Davidson  <jgdavidson@aol.com>  (2c4f43540e75)

	* tcl8.3.4/unix/tclLoadDyld.c.orig: new file.
	* tcl8.3.4/unix/tclLoadDyld.c, tcl8.3.4/unix/tclLoadDyld.c.orig:
	Hack to include the osx.c compat routines in the Tcl library

2002-02-24 02:11 +0000  Jim Davidson  <jgdavidson@aol.com>  (8f5141eeef0b)

	* compat/osx.c, compat/poll.h: new file.
	* compat/osx.c, compat/poll.h:
	Code for missing functions on OSX including poll, sigwait, and
	others

2002-02-24 02:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (f2892c987d85)

	* nsmain/Makefile:
	No longer specifies -lnsd directly, now included in $(LIBS)

2002-02-24 02:00 +0000  Jim Davidson  <jgdavidson@aol.com>  (6687be73cad6)

	* include/Makefile.module:
	Modules now link against the various dynamic libraries

2002-02-24 01:59 +0000  Jim Davidson  <jgdavidson@aol.com>  (3ecf06041542)

	* nsd/nsd.h:
	Includes ../compat/poll.h on OSX among other minor updates

2002-02-24 01:58 +0000  Jim Davidson  <jgdavidson@aol.com>  (16f22b29be30)

	* Makefile:
	Reversed order of nsext and nspd because nsext now links against
	static libnspd.a library

2002-02-24 01:57 +0000  Jim Davidson  <jgdavidson@aol.com>  (2084ad58cc13)

	* nsd/Makefile:
	Implements rules of ../include/Makefile.library which was removed

2002-02-24 01:56 +0000  Jim Davidson  <jgdavidson@aol.com>  (fa2da680f35e)

	* nspd/Makefile:
	nspd library is now a simple static library

2002-02-24 01:56 +0000  Jim Davidson  <jgdavidson@aol.com>  (1276180480f7)

	* nsext/Makefile:
	Now links against static ../nspd/libnspd.a library

2002-02-24 01:55 +0000  Jim Davidson  <jgdavidson@aol.com>  (e375dedc7dfe)

	* nsext/nsextmsg.c: deleted file.
	* nsext/nsextmsg.c:
	Moved to ../nspd/msg.c for libnspd.a library

2002-02-24 01:54 +0000  Jim Davidson  <jgdavidson@aol.com>  (be92f875b76f)

	* include/Makefile.global:
	Now better supports systems where dynamic library filenames do not
	end in .so

	e.g., OSX and HP, among other linker related updates.

2002-02-24 01:53 +0000  Jim Davidson  <jgdavidson@aol.com>  (1301c72b11f3)

	* include/Makefile.library: deleted file.
	* include/Makefile.library:
	Moved functionality to nsd/Makefile directly, now the only makefile
	which creates a dynamic library

2002-02-24 01:32 +0000  Jim Davidson  <jgdavidson@aol.com>  (0e52e49a0e29)

	* nspd/msg.c: new file.
	* nspd/msg.c:
	Moved from ../nsext/nsextmsg.c

2002-02-24 01:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (16ad280116a8)

	* nsext/nsext.c:
	Switched to ns_pipe for local proxy

2002-02-24 00:44 +0000  Jim Davidson  <jgdavidson@aol.com>  (a25b0874a8f3)

	* nsd/fastpath.c:
	Undef of Tcl's panic to avoid conflict on OS/X

2002-02-16 00:41 +0000  Jim Davidson  <jgdavidson@aol.com>  (362087d9d91c)

	* include/Makefile.global:
	More RPATH struggles, this time with FreeBSD

2002-02-16 00:22 +0000  Jim Davidson  <jgdavidson@aol.com>  (d741633558c3)

	* nsd/info.c:
	(Ns_InfoPlatform): OS/X support

2002-02-16 00:22 +0000  Jim Davidson  <jgdavidson@aol.com>  (50759aff9d52)

	* nsd/pathname.c:
	Cleaned up MakePath()

2002-02-16 00:21 +0000  Jim Davidson  <jgdavidson@aol.com>  (fd7d93bfd11a)

	* nsd/modload.c:
	OS/X support and dev/ino caching of loaded modules

2002-02-16 00:16 +0000  Jim Davidson  <jgdavidson@aol.com>  (58c089ff4fda)

	* nsmain/tcl2ini.tcl: new file.
	* nsmain/tcl2ini.tcl:
	Added simple script to dump .tcl config files in old .ini format

2002-02-16 00:13 +0000  Jim Davidson  <jgdavidson@aol.com>  (51a9b59290df)

	* include/Makefile.global:
	More RPATH weirdness fixed

2002-02-16 00:12 +0000  Jim Davidson  <jgdavidson@aol.com>  (f9f880e7a4fd)

	* nsd/cslock.c, nsd/mutex.c, nsd/rwlock.c: new file.
	* nsd/locks.c: deleted file.
	* nsd/Makefile, nsd/cslock.c, nsd/locks.c, nsd/master.c, nsd/mutex.c,
	nsd/rwlock.c:
	Broke the Ns_RWLock and Ns_Cs code back out of the overly complex
	mutex code

2002-02-08 07:56 +0000  Jeff Hobbs  <jeffh@activestate.com>  (68c9aff4378d)

	* ChangeLog, nsmain/init.tcl, nsmain/sample-config.tcl,
	nsssl/keygen.tcl, tcl/debug.tcl, tcl/fastpath.tcl, tcl/file.tcl,
	tcl/form.tcl, tcl/http.tcl, tcl/nsdb.tcl, tcl/sendmail.tcl,
	tcl/util.tcl:
	Code cleanup to brace exprs and fix indentation

2002-01-14 01:07 +0000  Jim Davidson  <jgdavidson@aol.com>  (0ee0e358867d)

	* nslog/nslog.c:
	Fixed formatting bug for connections which don't read a valid
	request

	i.e., conn->request is NULL.

2001-12-20 16:15 +0000  Scott S. Goodwin  <scott@scottg.net>  (74d61f7c3eb1)

	* ChangeLog, include/Makefile.library:
	Changed RFLAG to RPATH, and took out $(AOLSERVER)/lib

	$(LDSO) -o $(LIB) $(OBJS) $(LIBS) $(RFLAG) $(AOLSERVER)/lib

	now reads:

	$(LDSO) -o $(LIB) $(OBJS) $(LIBS) $(RPATH)

	which is what I think was intended. Still have the problem that
	$(AOLSERVER)/lib must already exist.

2001-12-18 22:34 +0000  Jim Davidson  <jgdavidson@aol.com>  (209352ac468f)

	* nsd/adpeval.c, nsd/adpparse.c, nsd/nsd.h, nsd/server.c:
	New implementation of ADP parse/eval to minimize duplicate overhead
	of per-thread bytecode caches

2001-12-18 22:33 +0000  Jim Davidson  <jgdavidson@aol.com>  (95f6c9c290d0)

	* nsd/fastpath.c:
	Use of standard FileKey hash keys

2001-12-18 22:32 +0000  Jim Davidson  <jgdavidson@aol.com>  (69df4ce68ed8)

	* nsd/tclcmds.c:
	Added ns_adp_stats command

2001-12-18 22:32 +0000  Jim Davidson  <jgdavidson@aol.com>  (f33d7be97002)

	* nsd/op.c:
	Used ref counts to avoid freeing a request structure in use

2001-12-18 22:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (82a4c15b30fb)

	* nsd/cache.c:
	Fixed possible crash bug with same-named caches

2001-12-11 23:48 +0000  Jim Davidson  <jgdavidson@aol.com>  (3bb2d460713e)

	* include/ns.h, nsd/Makefile, nsd/info.c, nsd/nsd.h:
	Add NS_MAJOR_VERSION, NS_MINOR_VERSION, NS_VERSION, NS_PATCH_LEVEL
	constants

	Modeled after Tcl.

2001-12-11 23:47 +0000  Jim Davidson  <jgdavidson@aol.com>  (d2eb798ae636)

	* include/Makefile.global:
	Minor makefile cleanup

2001-12-11 23:47 +0000  Jim Davidson  <jgdavidson@aol.com>  (8844a0ee2fdb)

	* include/Makefile.library:
	Added rpath to library link

2001-12-08 00:14 +0000  Jim Davidson  <jgdavidson@aol.com>  (899b87ea1245)

	* nsd/proc.c:
	Fixed bug with wrong ns_thread info callback

2001-12-08 00:14 +0000  Jim Davidson  <jgdavidson@aol.com>  (01c249106d5f)

	* nsd/tclthread.c:
	Fixed crash bug with ns_rwlock error message

2001-12-05 22:49 +0000  Jim Davidson  <jgdavidson@aol.com>  (d540f436b96c)

	* include/ns.h:
	Removed undocumented Ns_TclThread and Ns_TclDetachedThread

2001-12-05 22:46 +0000  Jim Davidson  <jgdavidson@aol.com>  (ce75f83abfd0)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/cache.c, nsd/conn.c, nsd/dbtcl.c,
	nsd/httptime.c, nsd/info.c, nsd/log.c, nsd/nsmain.c, nsd/queue.c,
	nsd/random.c, nsd/tclconf.c, nsd/tclfile.c, nsd/tclinit.c,
	nsd/tcljob.c, nsd/tclmisc.c, nsd/tclrequest.c, nsd/tclset.c,
	nsd/tclsock.c, nsd/tclvar.c, nsd/urlopen.c:
	Removed direct access of interp->result

2001-12-05 22:45 +0000  Jim Davidson  <jgdavidson@aol.com>  (4b022f87b26c)

	* nsd/nsd.h, nsd/tclsched.c, nsd/tclthread.c:
	Tcl threads now return string result as exit arg

2001-12-05 22:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (de56c5b9340e)

	* nsd/config.c:
	Now stores clean names for sets, among other cleanups

2001-12-05 21:00 +0000  Jim Davidson  <jgdavidson@aol.com>  (26dcbac761f5)

	* nsmain/translate-ini: new file.
	* nsmain/translate-ini:
	Moved from nsd

2001-12-05 20:59 +0000  Jim Davidson  <jgdavidson@aol.com>  (e34b4204ed91)

	* Makefile, include/Makefile.global, include/Makefile.library,
	include/Makefile.module, nsd/Makefile:
	Restored previous support for NSHOME build directory variable

2001-12-05 20:58 +0000  Jim Davidson  <jgdavidson@aol.com>  (ea7d8b34a13b)

	* nsd/init.tcl, nsd/main.c, nsd/sample-config.tcl, nsd/translate-ini:
	deleted file.
	* nsd/init.tcl, nsd/main.c, nsd/sample-config.tcl, nsd/translate-ini:
	Moved to nsmain

2001-12-05 20:58 +0000  Jim Davidson  <jgdavidson@aol.com>  (187d801df83b)

	* nsmain/Makefile, nsmain/init.tcl, nsmain/main.c, nsmain/sample-
	config.tcl: new file.
	* nsmain/Makefile, nsmain/init.tcl, nsmain/main.c, nsmain/sample-
	config.tcl:
	Stub main and install files moved from nsd

2001-11-27 00:26 +0000  Jim Davidson  <jgdavidson@aol.com>  (4f2a3a9fe510)

	* nsd/binder.c:
	Fixed crash bug when binding listen sockets after startup

2001-11-25 22:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (4a96817ea8b8)

	* nsd/urlencode.c:
	Fix for bug #466398: urlencoding

2001-11-25 22:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (0bfe8421a071)

	* nsd/urlencode.c:
	Fix for 3.4 bug #448921: urlencoding

2001-11-25 21:46 +0000  Jim Davidson  <jgdavidson@aol.com>  (3e60fecfb43f)

	* nsd/adpparse.c:
	Fix for 3.4 bug #479667: handle double-quote in adp attributes

2001-11-25 20:59 +0000  Jim Davidson  <jgdavidson@aol.com>  (9311132c41f0)

	* nsd/adpcmds.c:
	Fix for bug #434722: ns_adp_parse argument handling

2001-11-25 20:24 +0000  Jim Davidson  <jgdavidson@aol.com>  (65963d1a3cdb)

	* nsd/tclresp.c:
	(CheckId) Fix for bug #437324: return 0/1 not TCL_OK/TCL_ERROR

2001-11-25 20:13 +0000  Jim Davidson  <jgdavidson@aol.com>  (6d3030b17635)

	* nsd/urlopen.c:
	(Ns_FetchUrl) Fix for bug # 444657: socket not closed on error

2001-11-13 00:07 +0000  Jim Davidson  <jgdavidson@aol.com>  (5351f3274c1a)

	* nsperm/Makefile:
	Fixed confusion with module and tcl dir vars

2001-11-13 00:05 +0000  Jim Davidson  <jgdavidson@aol.com>  (7a41ed800a79)

	* nsd/sockcallback.c:
	Fixed bug maintaining nfds

2001-11-08 14:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (35c40521b55e)

	* include/tcl.h, include/tclDecls.h: deleted file.
	* Makefile, include/Makefile.global, include/Makefile.library,
	include/Makefile.module, include/tcl.h, include/tclDecls.h,
	nsd/Makefile, nsperm/Makefile, tcl8.3.4/Makefile:
	Cleaned up and simplified build environment

2001-11-08 14:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (80cd3136125c)

	* tcl8.3.4/generic/tclAlloc.c:
	Switch to pthread_once for initialization

2001-11-07 00:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (0b5d9cc6cc24)

	* nsmain/Makefile, nsmain/main.c: deleted file.
	* nsmain/Makefile, nsmain/main.c:
	Integrated into nsd

2001-11-07 00:24 +0000  Jim Davidson  <jgdavidson@aol.com>  (ce61378ba147)

	* include/Makefile.win32: deleted file.
	* include/Makefile.win32:
	Removed Win32 support

2001-11-06 01:12 +0000  Jim Davidson  <jgdavidson@aol.com>  (7d01463c6674)

	* nsd/driver.c, nsd/sock.c, nsd/sockcallback.c:
	Fixed bug of not clearing poll revents

2001-11-06 01:12 +0000  Jim Davidson  <jgdavidson@aol.com>  (e9bce031a66b)

	* tcl8.3.4/generic/tclAlloc.c:
	Fixed crash bug caused by incorrect pre-defined constants nmove for
	16k bucket (was 0, should be 1)

2001-11-05 23:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (16119d05287c)

	* ChangeLog:
	Add missing ChangeLog entries for 4.0b2 including removal of Win32

2001-11-05 23:02 +0000  Jim Davidson  <jgdavidson@aol.com>  (81fd3f668167)

	* tcl8.3.4/Makefile:
	Removed _POSIX_PTHREAD_SEMANTICS, now in tcl.m4

2001-11-05 22:57 +0000  Jim Davidson  <jgdavidson@aol.com>  (2190e7b50439)

	* nsd/getopt.c, nsd/getopt.h, nsd/win32.c: deleted file.
	* nsd/getopt.c, nsd/getopt.h, nsd/win32.c:
	Removed win32 support

2001-11-05 21:52 +0000  Jim Davidson  <jgdavidson@aol.com>  (08b58a53ac94)

	* thread/Makefile, thread/compat.c, thread/cond.c, thread/cs.c,
	thread/debug.c, thread/error.c, thread/fork.c, thread/memory.c,
	thread/mutex.c, thread/osthread.c, thread/pool.c,
	thread/pthread.cpp, thread/reentrant.c, thread/rwlock.c,
	thread/sema.c, thread/signal.c, thread/sproc.cpp, thread/test.c,
	thread/thread.c, thread/thread.h, thread/thread.html, thread/time.c,
	thread/tls.c, thread/win32.cpp, thread/windir.cpp, win32/README,
	win32/aolserver.dsw, win32/cgitest/cgitest.dsp,
	win32/cgitest/main.c, win32/main/Makefile, win32/main/main.dsp,
	win32/nscgi/Makefile, win32/nscgi/nscgi.dsp, win32/nscp/Makefile,
	win32/nscp/nscp.dsp, win32/nsd/Makefile, win32/nsd/nsd.dsp,
	win32/nslog/Makefile, win32/nslog/nslog.dsp,
	win32/nsodbc/nsodbc.dsp, win32/nsperm/Makefile,
	win32/nsperm/nsperm.dsp, win32/nssock/Makefile,
	win32/nssock/nssock.dsp, win32/nsssl/nsssl.dsp,
	win32/nstcl/Makefile, win32/nstcl/nstcl.dsp,
	win32/nsthread/Makefile, win32/nsthread/nsthread.dsp,
	win32/test/nsd.tcl, win32/test/servers/test/pages/cgitest.bat,
	win32/test/servers/test/pages/index.adp,
	win32/threadtest/threadtest.dsp, win32/win32.html: deleted file.
	* tcl8.3.4/Makefile, thread/Makefile, thread/compat.c, thread/cond.c,
	thread/cs.c, thread/debug.c, thread/error.c, thread/fork.c,
	thread/memory.c, thread/mutex.c, thread/osthread.c, thread/pool.c,
	thread/pthread.cpp, thread/reentrant.c, thread/rwlock.c,
	thread/sema.c, thread/signal.c, thread/sproc.cpp, thread/test.c,
	thread/thread.c, thread/thread.h, thread/thread.html, thread/time.c,
	thread/tls.c, thread/win32.cpp, thread/windir.cpp, win32/README,
	win32/aolserver.dsw, win32/cgitest/cgitest.dsp,
	win32/cgitest/main.c, win32/main/Makefile, win32/main/main.dsp,
	win32/nscgi/Makefile, win32/nscgi/nscgi.dsp, win32/nscp/Makefile,
	win32/nscp/nscp.dsp, win32/nsd/Makefile, win32/nsd/nsd.dsp,
	win32/nslog/Makefile, win32/nslog/nslog.dsp,
	win32/nsodbc/nsodbc.dsp, win32/nsperm/Makefile,
	win32/nsperm/nsperm.dsp, win32/nssock/Makefile,
	win32/nssock/nssock.dsp, win32/nsssl/nsssl.dsp,
	win32/nstcl/Makefile, win32/nstcl/nstcl.dsp,
	win32/nsthread/Makefile, win32/nsthread/nsthread.dsp,
	win32/test/nsd.tcl, win32/test/servers/test/pages/cgitest.bat,
	win32/test/servers/test/pages/index.adp,
	win32/threadtest/threadtest.dsp, win32/win32.html:
	Removed nsthread library, tcl8.3.3 distribution, and win32
	build/test environment

2001-11-05 21:36 +0000  Jim Davidson  <jgdavidson@aol.com>  (d035e746102f)

	* tcl8.3.4/unix/tclUnixThrd.c:
	Replace standard inet_ntop not available on Solaris with simple
	sprintf

2001-11-05 21:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (92d307458407)

	* tcl8.3.4/unix/configure.orig, tcl8.3.4/unix/tcl.m4.orig: new file.
	* tcl8.3.4/unix/configure, tcl8.3.4/unix/configure.orig,
	tcl8.3.4/unix/tcl.m4, tcl8.3.4/unix/tcl.m4.orig:
	Fix for proper FreeBSD and Solaris builds

2001-11-05 21:12 +0000  Jim Davidson  <jgdavidson@aol.com>  (5060996e772f)

	* nscgi/nscgi.c:
	Updated old Ns_UrlDecode macro

2001-11-05 21:11 +0000  Jim Davidson  <jgdavidson@aol.com>  (51e740fb64ba)

	* nsd/driver.c, nsd/nsd.h, nsd/sock.c, nsd/sockcallback.c:
	Use basic POLLIN, POLLOUT, and POLLPRI instead of POLLRDNORM,
	POLLWRNORM, and POLLRDBAND

2001-11-05 21:10 +0000  Jim Davidson  <jgdavidson@aol.com>  (db446a1fc241)

	* nsd/Makefile:
	Bug fix - tls.c, not specific.c

2001-11-05 20:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (196185c9c316)

	* nsd/cond.c: new file.
	* nsd/cond.c:
	Incorporated from the nsthread library

2001-11-05 20:30 +0000  Jim Davidson  <jgdavidson@aol.com>  (5ecf60c1a34f)

	* Makefile:
	Removed nsthread library

2001-11-05 20:29 +0000  Jim Davidson  <jgdavidson@aol.com>  (285248cfbd8c)

	* include/ns.h, include/nsthread.h:
	Remove Win32 support along with other cleanup

2001-11-05 20:29 +0000  Jim Davidson  <jgdavidson@aol.com>  (bd1f0b4ba1ba)

	* include/Makefile.global:
	Updated to Tcl 8.3.4; removed various old compile defines no longer
	required

2001-11-05 20:26 +0000  Jim Davidson  <jgdavidson@aol.com>  (36fc271f2b7e)

	* nsd/compat.c, nsd/error.c, nsd/fork.c, nsd/locks.c, nsd/main.c,
	nsd/master.c, nsd/memory.c, nsd/osx.c, nsd/reentrant.c, nsd/sema.c,
	nsd/signal.c, nsd/thread.c, nsd/time.c, nsd/tls.c: new file.
	* nsd/compat.c, nsd/error.c, nsd/fork.c, nsd/locks.c, nsd/main.c,
	nsd/master.c, nsd/memory.c, nsd/osx.c, nsd/reentrant.c, nsd/sema.c,
	nsd/signal.c, nsd/thread.c, nsd/time.c, nsd/tls.c:
	Files incorporated from the nsthreads library

2001-11-05 20:26 +0000  Jim Davidson  <jgdavidson@aol.com>  (2533f0f8cd14)

	* nscgi/nscgi.c, nscp/nscp.c, nsd/listen.c, nsext/nsext.c,
	nslog/nslog.c, nsperm/nsperm.c, nssock/nssock.c:
	Removed Win32 support

2001-11-05 20:26 +0000  Jim Davidson  <jgdavidson@aol.com>  (6906ea2049ce)

	* nsd/tclthread.c:
	Hack for compiling old Ns_Event support

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (e6560512a826)

	* nsd/tls.c: deleted file.
	* nsd/dbinit.c, nsd/log.c, nsd/tclinit.c, nsd/tls.c:
	Moved tls data structures from the single NsTls structure to related
	code in log.c, tclinit.c, and dbinit.c

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (1e62a8a1d2ba)

	* nsd/pidfile.c, nsd/unix.c:
	Removed support for the -k and -K server kill/restart code which
	wasn't entirely safe

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (f2c4c47186e3)

	* nsd/info.c:
	Changed overly complicated Ns_MutexEnum, Ns_ThreadEnum, and
	Ns_PoolEnum calls to the simple NsLockInfo, NsThreadInfo and
	Tcl_GetMemoryInfo routines

	Basically, the simple API's are now possible because Tcl no longer
	depends on nsthreads which kept nsthreads from relying on Tcl.

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (204aec8077f2)

	* nsd/form.c:
	Updated old function name Ns_UrlDecode to Ns_DecodeUrl

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (b2eec854f9eb)

	* nsd/exec.c:
	Removed Win32 support code; made the non-zero status checking code
	mandatory

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (376e7b273e96)

	* nsd/sched.c:
	Removed the NsWaitSchedIdle code which wasn't exactly correct

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (b5fad8acccaa)

	* nsd/sockcallback.c:
	Switched from select() to poll(); removed the NsWaitSockIdle code
	which wasn't exactly correct

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (d0bc6cde3c12)

	* nsd/driver.c, nsd/sock.c:
	Removed various Win32 support code and switched from select() to
	poll()

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (448ffefd45f1)

	* nsd/connio.c:
	Changed Ns_Buf structure to standard Unix struct iovec

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (f940bbbe7bf2)

	* nsd/config.c, nsd/dbdrv.c, nsd/dbtcl.c, nsd/server.c, nsd/tclconf.c:
	Cleaned up sloppy use of old config macros and removed support for
	undocumented Ns_ServerInitProc callback

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (8a040490ca6a)

	* nsd/cache.c:
	Ns_CacheMalloc/Ns_CacheFree now simply call ns_malloc/ns_free

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (40a7b2cb9c6f)

	* nsd/adpeval.c, nsd/fastpath.c:
	Removed support for Win32 which required pathname instead of
	dev/inode cache hash keys

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (3dd2bef6d573)

	* nsd/nsmain.c:
	Removed Win32 startup code, the -k and -K flags, and the startup
	idle wait code

	Also, the -p and -z flags have no effect as the zippy allocator is
	now in Tcl and always on by default.

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (ed6e3f429f8d)

	* nsd/fd.c, nsd/modload.c, nsd/nsd.h, nsd/pathname.c, nsd/random.c,
	nsd/tclenv.c, nsd/tclfile.c, nsd/tclhttp.c, nsd/tclimg.c,
	nsd/tclsock.c, nsd/urlopen.c:
	Removed various Win32 support code

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (6f4dc3a38b9f)

	* nsd/nsconf.c, nsd/nsconf.h:
	Removed mutexmeter option (now always on), moved stacksize to nsconf
	structure from nsThreadStackSize variable, and removed the
	exec.checkexit and exec.vfork options

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (eabb290fe62b)

	* nsd/binder.c:
	Removed support for complex child binder process

	Binding privileged ports now require the -b or -B command line
	methods.

2001-11-05 20:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (a9e8bed440e7)

	* nsd/Makefile:
	Integrated nsthread library and nsmain files

2001-11-05 20:06 +0000  Jim Davidson  <jgdavidson@aol.com>  (fd17a6a6f4b4)

	* tcl8.3.4/ChangeLog, tcl8.3.4/Makefile, tcl8.3.4/README,
	tcl8.3.4/changes, tcl8.3.4/compat/README, tcl8.3.4/compat/dirent.h,
	tcl8.3.4/compat/dirent2.h, tcl8.3.4/compat/dlfcn.h,
	tcl8.3.4/compat/fixstrtod.c, tcl8.3.4/compat/float.h,
	tcl8.3.4/compat/gettod.c, tcl8.3.4/compat/license.terms,
	tcl8.3.4/compat/limits.h, tcl8.3.4/compat/memcmp.c,
	tcl8.3.4/compat/opendir.c, tcl8.3.4/compat/stdlib.h,
	tcl8.3.4/compat/strftime.c, tcl8.3.4/compat/string.h,
	tcl8.3.4/compat/strncasecmp.c, tcl8.3.4/compat/strstr.c,
	tcl8.3.4/compat/strtod.c, tcl8.3.4/compat/strtol.c,
	tcl8.3.4/compat/strtoul.c, tcl8.3.4/compat/tclErrno.h,
	tcl8.3.4/compat/tmpnam.c, tcl8.3.4/compat/unistd.h,
	tcl8.3.4/compat/waitpid.c, tcl8.3.4/doc/Access.3,
	tcl8.3.4/doc/AddErrInfo.3, tcl8.3.4/doc/Alloc.3,
	tcl8.3.4/doc/AllowExc.3, tcl8.3.4/doc/AppInit.3,
	tcl8.3.4/doc/AssocData.3, tcl8.3.4/doc/Async.3,
	tcl8.3.4/doc/BackgdErr.3, tcl8.3.4/doc/Backslash.3,
	tcl8.3.4/doc/BoolObj.3, tcl8.3.4/doc/ByteArrObj.3,
	tcl8.3.4/doc/CallDel.3, tcl8.3.4/doc/ChnlStack.3,
	tcl8.3.4/doc/CmdCmplt.3, tcl8.3.4/doc/Concat.3,
	tcl8.3.4/doc/CrtChannel.3, tcl8.3.4/doc/CrtChnlHdlr.3,
	tcl8.3.4/doc/CrtCloseHdlr.3, tcl8.3.4/doc/CrtCommand.3,
	tcl8.3.4/doc/CrtFileHdlr.3, tcl8.3.4/doc/CrtInterp.3,
	tcl8.3.4/doc/CrtMathFnc.3, tcl8.3.4/doc/CrtObjCmd.3,
	tcl8.3.4/doc/CrtSlave.3, tcl8.3.4/doc/CrtTimerHdlr.3,
	tcl8.3.4/doc/CrtTrace.3, tcl8.3.4/doc/DString.3,
	tcl8.3.4/doc/DetachPids.3, tcl8.3.4/doc/DoOneEvent.3,
	tcl8.3.4/doc/DoWhenIdle.3, tcl8.3.4/doc/DoubleObj.3,
	tcl8.3.4/doc/DumpActiveMemory.3, tcl8.3.4/doc/Encoding.3,
	tcl8.3.4/doc/Eval.3, tcl8.3.4/doc/Exit.3, tcl8.3.4/doc/ExprLong.3,
	tcl8.3.4/doc/ExprLongObj.3, tcl8.3.4/doc/FindExec.3,
	tcl8.3.4/doc/GetCwd.3, tcl8.3.4/doc/GetHostName.3,
	tcl8.3.4/doc/GetIndex.3, tcl8.3.4/doc/GetInt.3,
	tcl8.3.4/doc/GetOpnFl.3, tcl8.3.4/doc/GetStdChan.3,
	tcl8.3.4/doc/GetVersion.3, tcl8.3.4/doc/Hash.3, tcl8.3.4/doc/Init.3,
	tcl8.3.4/doc/InitStubs.3, tcl8.3.4/doc/IntObj.3,
	tcl8.3.4/doc/Interp.3, tcl8.3.4/doc/LinkVar.3,
	tcl8.3.4/doc/ListObj.3, tcl8.3.4/doc/Notifier.3,
	tcl8.3.4/doc/Object.3, tcl8.3.4/doc/ObjectType.3,
	tcl8.3.4/doc/OpenFileChnl.3, tcl8.3.4/doc/OpenTcp.3,
	tcl8.3.4/doc/ParseCmd.3, tcl8.3.4/doc/PkgRequire.3,
	tcl8.3.4/doc/Preserve.3, tcl8.3.4/doc/PrintDbl.3,
	tcl8.3.4/doc/RecEvalObj.3, tcl8.3.4/doc/RecordEval.3,
	tcl8.3.4/doc/RegExp.3, tcl8.3.4/doc/SaveResult.3,
	tcl8.3.4/doc/SetErrno.3, tcl8.3.4/doc/SetRecLmt.3,
	tcl8.3.4/doc/SetResult.3, tcl8.3.4/doc/SetVar.3,
	tcl8.3.4/doc/Sleep.3, tcl8.3.4/doc/SourceRCFile.3,
	tcl8.3.4/doc/SplitList.3, tcl8.3.4/doc/SplitPath.3,
	tcl8.3.4/doc/StaticPkg.3, tcl8.3.4/doc/StrMatch.3,
	tcl8.3.4/doc/StringObj.3, tcl8.3.4/doc/TCL_MEM_DEBUG.3,
	tcl8.3.4/doc/Tcl.n, tcl8.3.4/doc/Tcl_Main.3, tcl8.3.4/doc/Thread.3,
	tcl8.3.4/doc/ToUpper.3, tcl8.3.4/doc/TraceVar.3,
	tcl8.3.4/doc/Translate.3, tcl8.3.4/doc/UpVar.3, tcl8.3.4/doc/Utf.3,
	tcl8.3.4/doc/WrongNumArgs.3, tcl8.3.4/doc/after.n,
	tcl8.3.4/doc/append.n, tcl8.3.4/doc/array.n, tcl8.3.4/doc/bgerror.n,
	tcl8.3.4/doc/binary.n, tcl8.3.4/doc/break.n, tcl8.3.4/doc/case.n,
	tcl8.3.4/doc/catch.n, tcl8.3.4/doc/cd.n, tcl8.3.4/doc/clock.n,
	tcl8.3.4/doc/close.n, tcl8.3.4/doc/concat.n,
	tcl8.3.4/doc/continue.n, tcl8.3.4/doc/dde.n,
	tcl8.3.4/doc/encoding.n, tcl8.3.4/doc/eof.n, tcl8.3.4/doc/error.n,
	tcl8.3.4/doc/eval.n, tcl8.3.4/doc/exec.n, tcl8.3.4/doc/exit.n,
	tcl8.3.4/doc/expr.n, tcl8.3.4/doc/fblocked.n,
	tcl8.3.4/doc/fconfigure.n, tcl8.3.4/doc/fcopy.n,
	tcl8.3.4/doc/file.n, tcl8.3.4/doc/fileevent.n,
	tcl8.3.4/doc/filename.n, tcl8.3.4/doc/flush.n, tcl8.3.4/doc/for.n,
	tcl8.3.4/doc/foreach.n, tcl8.3.4/doc/format.n, tcl8.3.4/doc/gets.n,
	tcl8.3.4/doc/glob.n, tcl8.3.4/doc/global.n, tcl8.3.4/doc/history.n,
	tcl8.3.4/doc/http.n, tcl8.3.4/doc/if.n, tcl8.3.4/doc/incr.n,
	tcl8.3.4/doc/info.n, tcl8.3.4/doc/interp.n, tcl8.3.4/doc/join.n,
	tcl8.3.4/doc/lappend.n, tcl8.3.4/doc/library.n,
	tcl8.3.4/doc/license.terms, tcl8.3.4/doc/lindex.n,
	tcl8.3.4/doc/linsert.n, tcl8.3.4/doc/list.n, tcl8.3.4/doc/llength.n,
	tcl8.3.4/doc/load.n, tcl8.3.4/doc/lrange.n, tcl8.3.4/doc/lreplace.n,
	tcl8.3.4/doc/lsearch.n, tcl8.3.4/doc/lsort.n,
	tcl8.3.4/doc/man.macros, tcl8.3.4/doc/memory.n,
	tcl8.3.4/doc/msgcat.n, tcl8.3.4/doc/namespace.n,
	tcl8.3.4/doc/open.n, tcl8.3.4/doc/package.n,
	tcl8.3.4/doc/packagens.n, tcl8.3.4/doc/pid.n,
	tcl8.3.4/doc/pkgMkIndex.n, tcl8.3.4/doc/proc.n, tcl8.3.4/doc/puts.n,
	tcl8.3.4/doc/pwd.n, tcl8.3.4/doc/re_syntax.n, tcl8.3.4/doc/read.n,
	tcl8.3.4/doc/regexp.n, tcl8.3.4/doc/registry.n,
	tcl8.3.4/doc/regsub.n, tcl8.3.4/doc/rename.n,
	tcl8.3.4/doc/resource.n, tcl8.3.4/doc/return.n, tcl8.3.4/doc/safe.n,
	tcl8.3.4/doc/scan.n, tcl8.3.4/doc/seek.n, tcl8.3.4/doc/set.n,
	tcl8.3.4/doc/socket.n, tcl8.3.4/doc/source.n, tcl8.3.4/doc/split.n,
	tcl8.3.4/doc/string.n, tcl8.3.4/doc/subst.n, tcl8.3.4/doc/switch.n,
	tcl8.3.4/doc/tclsh.1, tcl8.3.4/doc/tcltest.n,
	tcl8.3.4/doc/tclvars.n, tcl8.3.4/doc/tell.n, tcl8.3.4/doc/time.n,
	tcl8.3.4/doc/trace.n, tcl8.3.4/doc/unknown.n, tcl8.3.4/doc/unset.n,
	tcl8.3.4/doc/update.n, tcl8.3.4/doc/uplevel.n, tcl8.3.4/doc/upvar.n,
	tcl8.3.4/doc/variable.n, tcl8.3.4/doc/vwait.n, tcl8.3.4/doc/while.n,
	tcl8.3.4/generic/README, tcl8.3.4/generic/regc_color.c,
	tcl8.3.4/generic/regc_cvec.c, tcl8.3.4/generic/regc_lex.c,
	tcl8.3.4/generic/regc_locale.c, tcl8.3.4/generic/regc_nfa.c,
	tcl8.3.4/generic/regcomp.c, tcl8.3.4/generic/regcustom.h,
	tcl8.3.4/generic/rege_dfa.c, tcl8.3.4/generic/regerror.c,
	tcl8.3.4/generic/regerrs.h, tcl8.3.4/generic/regex.h,
	tcl8.3.4/generic/regexec.c, tcl8.3.4/generic/regfree.c,
	tcl8.3.4/generic/regfronts.c, tcl8.3.4/generic/regguts.h,
	tcl8.3.4/generic/tcl.decls, tcl8.3.4/generic/tcl.h,
	tcl8.3.4/generic/tclAlloc.c, tcl8.3.4/generic/tclAlloc.c.orig,
	tcl8.3.4/generic/tclAsync.c, tcl8.3.4/generic/tclBasic.c,
	tcl8.3.4/generic/tclBinary.c, tcl8.3.4/generic/tclCkalloc.c,
	tcl8.3.4/generic/tclClock.c, tcl8.3.4/generic/tclCmdAH.c,
	tcl8.3.4/generic/tclCmdIL.c, tcl8.3.4/generic/tclCmdMZ.c,
	tcl8.3.4/generic/tclCompCmds.c, tcl8.3.4/generic/tclCompExpr.c,
	tcl8.3.4/generic/tclCompile.c, tcl8.3.4/generic/tclCompile.h,
	tcl8.3.4/generic/tclDate.c, tcl8.3.4/generic/tclDecls.h,
	tcl8.3.4/generic/tclEncoding.c, tcl8.3.4/generic/tclEnv.c,
	tcl8.3.4/generic/tclEvent.c, tcl8.3.4/generic/tclExecute.c,
	tcl8.3.4/generic/tclFCmd.c, tcl8.3.4/generic/tclFileName.c,
	tcl8.3.4/generic/tclGet.c, tcl8.3.4/generic/tclGetDate.y,
	tcl8.3.4/generic/tclHash.c, tcl8.3.4/generic/tclHistory.c,
	tcl8.3.4/generic/tclIO.c, tcl8.3.4/generic/tclIO.h,
	tcl8.3.4/generic/tclIOCmd.c, tcl8.3.4/generic/tclIOGT.c,
	tcl8.3.4/generic/tclIOSock.c, tcl8.3.4/generic/tclIOUtil.c,
	tcl8.3.4/generic/tclIndexObj.c, tcl8.3.4/generic/tclInitScript.h,
	tcl8.3.4/generic/tclInt.decls, tcl8.3.4/generic/tclInt.h,
	tcl8.3.4/generic/tclInt.h.orig, tcl8.3.4/generic/tclIntDecls.h,
	tcl8.3.4/generic/tclIntPlatDecls.h, tcl8.3.4/generic/tclInterp.c,
	tcl8.3.4/generic/tclLink.c, tcl8.3.4/generic/tclListObj.c,
	tcl8.3.4/generic/tclLiteral.c, tcl8.3.4/generic/tclLoad.c,
	tcl8.3.4/generic/tclLoadNone.c, tcl8.3.4/generic/tclMain.c,
	tcl8.3.4/generic/tclMath.h, tcl8.3.4/generic/tclNamesp.c,
	tcl8.3.4/generic/tclNotify.c, tcl8.3.4/generic/tclObj.c,
	tcl8.3.4/generic/tclObj.c.orig, tcl8.3.4/generic/tclPanic.c,
	tcl8.3.4/generic/tclParse.c, tcl8.3.4/generic/tclParseExpr.c,
	tcl8.3.4/generic/tclPipe.c, tcl8.3.4/generic/tclPkg.c,
	tcl8.3.4/generic/tclPlatDecls.h, tcl8.3.4/generic/tclPort.h,
	tcl8.3.4/generic/tclPosixStr.c, tcl8.3.4/generic/tclPreserve.c,
	tcl8.3.4/generic/tclProc.c, tcl8.3.4/generic/tclRegexp.c,
	tcl8.3.4/generic/tclRegexp.h, tcl8.3.4/generic/tclResolve.c,
	tcl8.3.4/generic/tclResult.c, tcl8.3.4/generic/tclScan.c,
	tcl8.3.4/generic/tclStringObj.c, tcl8.3.4/generic/tclStubInit.c,
	tcl8.3.4/generic/tclStubInit.c.orig, tcl8.3.4/generic/tclStubLib.c,
	tcl8.3.4/generic/tclTest.c, tcl8.3.4/generic/tclTestObj.c,
	tcl8.3.4/generic/tclTestProcBodyObj.c, tcl8.3.4/generic/tclThread.c,
	tcl8.3.4/generic/tclThreadTest.c, tcl8.3.4/generic/tclTimer.c,
	tcl8.3.4/generic/tclUniData.c, tcl8.3.4/generic/tclUtf.c,
	tcl8.3.4/generic/tclUtil.c, tcl8.3.4/generic/tclVar.c,
	tcl8.3.4/library/auto.tcl, tcl8.3.4/library/dde1.1/pkgIndex.tcl,
	tcl8.3.4/library/encoding/ascii.enc,
	tcl8.3.4/library/encoding/big5.enc,
	tcl8.3.4/library/encoding/cp1250.enc,
	tcl8.3.4/library/encoding/cp1251.enc,
	tcl8.3.4/library/encoding/cp1252.enc,
	tcl8.3.4/library/encoding/cp1253.enc,
	tcl8.3.4/library/encoding/cp1254.enc,
	tcl8.3.4/library/encoding/cp1255.enc,
	tcl8.3.4/library/encoding/cp1256.enc,
	tcl8.3.4/library/encoding/cp1257.enc,
	tcl8.3.4/library/encoding/cp1258.enc,
	tcl8.3.4/library/encoding/cp437.enc,
	tcl8.3.4/library/encoding/cp737.enc,
	tcl8.3.4/library/encoding/cp775.enc,
	tcl8.3.4/library/encoding/cp850.enc,
	tcl8.3.4/library/encoding/cp852.enc,
	tcl8.3.4/library/encoding/cp855.enc,
	tcl8.3.4/library/encoding/cp857.enc,
	tcl8.3.4/library/encoding/cp860.enc,
	tcl8.3.4/library/encoding/cp861.enc,
	tcl8.3.4/library/encoding/cp862.enc,
	tcl8.3.4/library/encoding/cp863.enc,
	tcl8.3.4/library/encoding/cp864.enc,
	tcl8.3.4/library/encoding/cp865.enc,
	tcl8.3.4/library/encoding/cp866.enc,
	tcl8.3.4/library/encoding/cp869.enc,
	tcl8.3.4/library/encoding/cp874.enc,
	tcl8.3.4/library/encoding/cp932.enc,
	tcl8.3.4/library/encoding/cp936.enc,
	tcl8.3.4/library/encoding/cp949.enc,
	tcl8.3.4/library/encoding/cp950.enc,
	tcl8.3.4/library/encoding/dingbats.enc,
	tcl8.3.4/library/encoding/ebcdic.enc, tcl8.3.4/library/encoding/euc-
	cn.enc, tcl8.3.4/library/encoding/euc-jp.enc,
	tcl8.3.4/library/encoding/euc-kr.enc,
	tcl8.3.4/library/encoding/gb12345.enc,
	tcl8.3.4/library/encoding/gb1988.enc,
	tcl8.3.4/library/encoding/gb2312.enc,
	tcl8.3.4/library/encoding/iso2022-jp.enc,
	tcl8.3.4/library/encoding/iso2022-kr.enc,
	tcl8.3.4/library/encoding/iso2022.enc,
	tcl8.3.4/library/encoding/iso8859-1.enc,
	tcl8.3.4/library/encoding/iso8859-10.enc,
	tcl8.3.4/library/encoding/iso8859-13.enc,
	tcl8.3.4/library/encoding/iso8859-14.enc,
	tcl8.3.4/library/encoding/iso8859-15.enc,
	tcl8.3.4/library/encoding/iso8859-16.enc,
	tcl8.3.4/library/encoding/iso8859-2.enc,
	tcl8.3.4/library/encoding/iso8859-3.enc,
	tcl8.3.4/library/encoding/iso8859-4.enc,
	tcl8.3.4/library/encoding/iso8859-5.enc,
	tcl8.3.4/library/encoding/iso8859-6.enc,
	tcl8.3.4/library/encoding/iso8859-7.enc,
	tcl8.3.4/library/encoding/iso8859-8.enc,
	tcl8.3.4/library/encoding/iso8859-9.enc,
	tcl8.3.4/library/encoding/jis0201.enc,
	tcl8.3.4/library/encoding/jis0208.enc,
	tcl8.3.4/library/encoding/jis0212.enc,
	tcl8.3.4/library/encoding/koi8-r.enc,
	tcl8.3.4/library/encoding/koi8-u.enc,
	tcl8.3.4/library/encoding/ksc5601.enc,
	tcl8.3.4/library/encoding/macCentEuro.enc,
	tcl8.3.4/library/encoding/macCroatian.enc,
	tcl8.3.4/library/encoding/macCyrillic.enc,
	tcl8.3.4/library/encoding/macDingbats.enc,
	tcl8.3.4/library/encoding/macGreek.enc,
	tcl8.3.4/library/encoding/macIceland.enc,
	tcl8.3.4/library/encoding/macJapan.enc,
	tcl8.3.4/library/encoding/macRoman.enc,
	tcl8.3.4/library/encoding/macRomania.enc,
	tcl8.3.4/library/encoding/macThai.enc,
	tcl8.3.4/library/encoding/macTurkish.enc,
	tcl8.3.4/library/encoding/macUkraine.enc,
	tcl8.3.4/library/encoding/shiftjis.enc,
	tcl8.3.4/library/encoding/symbol.enc,
	tcl8.3.4/library/encoding/tis-620.enc, tcl8.3.4/library/history.tcl,
	tcl8.3.4/library/http/http.tcl, tcl8.3.4/library/http/pkgIndex.tcl,
	tcl8.3.4/library/http1.0/http.tcl,
	tcl8.3.4/library/http1.0/pkgIndex.tcl, tcl8.3.4/library/init.tcl,
	tcl8.3.4/library/ldAout.tcl, tcl8.3.4/library/license.terms,
	tcl8.3.4/library/msgcat/msgcat.tcl,
	tcl8.3.4/library/msgcat/pkgIndex.tcl,
	tcl8.3.4/library/opt/optparse.tcl,
	tcl8.3.4/library/opt/pkgIndex.tcl, tcl8.3.4/library/package.tcl,
	tcl8.3.4/library/parray.tcl, tcl8.3.4/library/reg1.0/pkgIndex.tcl,
	tcl8.3.4/library/safe.tcl, tcl8.3.4/library/tclIndex,
	tcl8.3.4/library/tcltest1.0/pkgIndex.tcl,
	tcl8.3.4/library/tcltest1.0/tcltest.tcl, tcl8.3.4/library/word.tcl,
	tcl8.3.4/license.terms, tcl8.3.4/mac/AppleScript.html,
	tcl8.3.4/mac/Background.doc, tcl8.3.4/mac/MW_TclAppleScriptHeader.h,
	tcl8.3.4/mac/MW_TclAppleScriptHeader.pch,
	tcl8.3.4/mac/MW_TclBuildLibHeader.h,
	tcl8.3.4/mac/MW_TclBuildLibHeader.pch, tcl8.3.4/mac/MW_TclHeader.h,
	tcl8.3.4/mac/MW_TclHeader.pch, tcl8.3.4/mac/MW_TclHeaderCommon.h,
	tcl8.3.4/mac/MW_TclStaticHeader.h,
	tcl8.3.4/mac/MW_TclStaticHeader.pch,
	tcl8.3.4/mac/MW_TclTestHeader.h, tcl8.3.4/mac/MW_TclTestHeader.pch,
	tcl8.3.4/mac/README, tcl8.3.4/mac/bugs.doc,
	tcl8.3.4/mac/libmoto.doc, tcl8.3.4/mac/license.terms,
	tcl8.3.4/mac/morefiles.doc, tcl8.3.4/mac/porting.notes,
	tcl8.3.4/mac/tclMac.h, tcl8.3.4/mac/tclMacAETE.r,
	tcl8.3.4/mac/tclMacAlloc.c, tcl8.3.4/mac/tclMacAppInit.c,
	tcl8.3.4/mac/tclMacApplication.r, tcl8.3.4/mac/tclMacBOAAppInit.c,
	tcl8.3.4/mac/tclMacBOAMain.c, tcl8.3.4/mac/tclMacChan.c,
	tcl8.3.4/mac/tclMacCommonPch.h, tcl8.3.4/mac/tclMacDNR.c,
	tcl8.3.4/mac/tclMacEnv.c, tcl8.3.4/mac/tclMacExit.c,
	tcl8.3.4/mac/tclMacFCmd.c, tcl8.3.4/mac/tclMacFile.c,
	tcl8.3.4/mac/tclMacInit.c, tcl8.3.4/mac/tclMacInt.h,
	tcl8.3.4/mac/tclMacInterupt.c, tcl8.3.4/mac/tclMacLibrary.c,
	tcl8.3.4/mac/tclMacLibrary.r, tcl8.3.4/mac/tclMacLoad.c,
	tcl8.3.4/mac/tclMacMath.h, tcl8.3.4/mac/tclMacNotify.c,
	tcl8.3.4/mac/tclmacOSA.c, tcl8.3.4/mac/tclmacOSA.r,
	tcl8.3.4/mac/tclMacPanic.c, tcl8.3.4/mac/tclMacPort.h,
	tcl8.3.4/mac/tclMacProjects.sea.hqx, tcl8.3.4/mac/tclMacResource.c,
	tcl8.3.4/mac/tclMacResource.r, tcl8.3.4/mac/tclMacSock.c,
	tcl8.3.4/mac/tclMacTclCode.r, tcl8.3.4/mac/tclMacTest.c,
	tcl8.3.4/mac/tclMacThrd.c, tcl8.3.4/mac/tclMacThrd.h,
	tcl8.3.4/mac/tclMacTime.c, tcl8.3.4/mac/tclMacUnix.c,
	tcl8.3.4/mac/tclMacUtil.c, tcl8.3.4/tests/README,
	tcl8.3.4/tests/all.tcl, tcl8.3.4/tests/append.test,
	tcl8.3.4/tests/assocd.test, tcl8.3.4/tests/async.test,
	tcl8.3.4/tests/autoMkindex.tcl, tcl8.3.4/tests/autoMkindex.test,
	tcl8.3.4/tests/basic.test, tcl8.3.4/tests/binary.test,
	tcl8.3.4/tests/case.test, tcl8.3.4/tests/clock.test,
	tcl8.3.4/tests/cmdAH.test, tcl8.3.4/tests/cmdIL.test,
	tcl8.3.4/tests/cmdInfo.test, tcl8.3.4/tests/cmdMZ.test,
	tcl8.3.4/tests/compExpr-old.test, tcl8.3.4/tests/compExpr.test,
	tcl8.3.4/tests/compile.test, tcl8.3.4/tests/concat.test,
	tcl8.3.4/tests/dcall.test, tcl8.3.4/tests/dstring.test,
	tcl8.3.4/tests/encoding.test, tcl8.3.4/tests/env.test,
	tcl8.3.4/tests/error.test, tcl8.3.4/tests/eval.test,
	tcl8.3.4/tests/event.test, tcl8.3.4/tests/exec.test,
	tcl8.3.4/tests/execute.test, tcl8.3.4/tests/expr-old.test,
	tcl8.3.4/tests/expr.test, tcl8.3.4/tests/fCmd.test,
	tcl8.3.4/tests/fileName.test, tcl8.3.4/tests/for-old.test,
	tcl8.3.4/tests/for.test, tcl8.3.4/tests/foreach.test,
	tcl8.3.4/tests/format.test, tcl8.3.4/tests/get.test,
	tcl8.3.4/tests/history.test, tcl8.3.4/tests/http.test,
	tcl8.3.4/tests/httpd, tcl8.3.4/tests/httpold.test, tcl8.3.4/tests
	/if-old.test, tcl8.3.4/tests/if.test, tcl8.3.4/tests/incr-old.test,
	tcl8.3.4/tests/incr.test, tcl8.3.4/tests/indexObj.test,
	tcl8.3.4/tests/info.test, tcl8.3.4/tests/init.test,
	tcl8.3.4/tests/interp.test, tcl8.3.4/tests/io.test,
	tcl8.3.4/tests/ioCmd.test, tcl8.3.4/tests/ioUtil.test,
	tcl8.3.4/tests/iogt.test, tcl8.3.4/tests/join.test,
	tcl8.3.4/tests/license.terms, tcl8.3.4/tests/lindex.test,
	tcl8.3.4/tests/link.test, tcl8.3.4/tests/linsert.test,
	tcl8.3.4/tests/list.test, tcl8.3.4/tests/listObj.test,
	tcl8.3.4/tests/llength.test, tcl8.3.4/tests/load.test,
	tcl8.3.4/tests/lrange.test, tcl8.3.4/tests/lreplace.test,
	tcl8.3.4/tests/lsearch.test, tcl8.3.4/tests/macFCmd.test,
	tcl8.3.4/tests/misc.test, tcl8.3.4/tests/msgcat.test, tcl8.3.4/tests
	/namespace-old.test, tcl8.3.4/tests/namespace.test,
	tcl8.3.4/tests/obj.test, tcl8.3.4/tests/opt.test,
	tcl8.3.4/tests/osa.test, tcl8.3.4/tests/package.test,
	tcl8.3.4/tests/parse.test, tcl8.3.4/tests/parseExpr.test,
	tcl8.3.4/tests/parseOld.test, tcl8.3.4/tests/pid.test,
	tcl8.3.4/tests/pkg.test, tcl8.3.4/tests/pkg/circ1.tcl,
	tcl8.3.4/tests/pkg/circ2.tcl, tcl8.3.4/tests/pkg/circ3.tcl,
	tcl8.3.4/tests/pkg/global.tcl, tcl8.3.4/tests/pkg/import.tcl,
	tcl8.3.4/tests/pkg/license.terms, tcl8.3.4/tests/pkg/magicchar.tcl,
	tcl8.3.4/tests/pkg/magicchar2.tcl, tcl8.3.4/tests/pkg/pkg1.tcl,
	tcl8.3.4/tests/pkg/pkg2_a.tcl, tcl8.3.4/tests/pkg/pkg2_b.tcl,
	tcl8.3.4/tests/pkg/pkg3.tcl, tcl8.3.4/tests/pkg/pkg4.tcl,
	tcl8.3.4/tests/pkg/pkg5.tcl, tcl8.3.4/tests/pkg/pkga.tcl,
	tcl8.3.4/tests/pkg/samename.tcl, tcl8.3.4/tests/pkg/simple.tcl,
	tcl8.3.4/tests/pkg/spacename.tcl, tcl8.3.4/tests/pkg/std.tcl,
	tcl8.3.4/tests/pkgMkIndex.test, tcl8.3.4/tests/platform.test,
	tcl8.3.4/tests/proc-old.test, tcl8.3.4/tests/proc.test,
	tcl8.3.4/tests/pwd.test, tcl8.3.4/tests/reg.test,
	tcl8.3.4/tests/regexp.test, tcl8.3.4/tests/registry.test,
	tcl8.3.4/tests/remote.tcl, tcl8.3.4/tests/rename.test,
	tcl8.3.4/tests/resource.test, tcl8.3.4/tests/result.test,
	tcl8.3.4/tests/safe.test, tcl8.3.4/tests/scan.test,
	tcl8.3.4/tests/security.test, tcl8.3.4/tests/set-old.test,
	tcl8.3.4/tests/set.test, tcl8.3.4/tests/socket.test,
	tcl8.3.4/tests/source.test, tcl8.3.4/tests/split.test,
	tcl8.3.4/tests/stack.test, tcl8.3.4/tests/string.test,
	tcl8.3.4/tests/stringObj.test, tcl8.3.4/tests/subst.test,
	tcl8.3.4/tests/switch.test, tcl8.3.4/tests/tcltest.test,
	tcl8.3.4/tests/thread.test, tcl8.3.4/tests/timer.test,
	tcl8.3.4/tests/trace.test, tcl8.3.4/tests/unixFCmd.test,
	tcl8.3.4/tests/unixFile.test, tcl8.3.4/tests/unixInit.test,
	tcl8.3.4/tests/unixNotfy.test, tcl8.3.4/tests/unknown.test,
	tcl8.3.4/tests/uplevel.test, tcl8.3.4/tests/upvar.test,
	tcl8.3.4/tests/utf.test, tcl8.3.4/tests/util.test,
	tcl8.3.4/tests/var.test, tcl8.3.4/tests/while-old.test,
	tcl8.3.4/tests/while.test, tcl8.3.4/tests/winConsole.test,
	tcl8.3.4/tests/winDde.test, tcl8.3.4/tests/winFCmd.test,
	tcl8.3.4/tests/winFile.test, tcl8.3.4/tests/winNotify.test,
	tcl8.3.4/tests/winPipe.test, tcl8.3.4/tests/winTime.test,
	tcl8.3.4/tools/Makefile.in, tcl8.3.4/tools/README,
	tcl8.3.4/tools/checkLibraryDoc.tcl, tcl8.3.4/tools/configure,
	tcl8.3.4/tools/configure.in, tcl8.3.4/tools/cvtEOL.tcl,
	tcl8.3.4/tools/genStubs.tcl, tcl8.3.4/tools/genWinImage.tcl,
	tcl8.3.4/tools/index.tcl, tcl8.3.4/tools/man2help.tcl,
	tcl8.3.4/tools/man2help2.tcl, tcl8.3.4/tools/man2html.tcl,
	tcl8.3.4/tools/man2html1.tcl, tcl8.3.4/tools/man2html2.tcl,
	tcl8.3.4/tools/man2tcl.c, tcl8.3.4/tools/regexpTestLib.tcl,
	tcl8.3.4/tools/tcl.hpj.in, tcl8.3.4/tools/tcl.wse.in,
	tcl8.3.4/tools/tclSplash.bmp, tcl8.3.4/tools/tcltk-man2html.tcl,
	tcl8.3.4/tools/uniClass.tcl, tcl8.3.4/tools/uniParse.tcl,
	tcl8.3.4/tools/white.bmp, tcl8.3.4/unix/Makefile.in,
	tcl8.3.4/unix/README, tcl8.3.4/unix/aclocal.m4,
	tcl8.3.4/unix/configure, tcl8.3.4/unix/configure.in,
	tcl8.3.4/unix/dltest/Makefile.in, tcl8.3.4/unix/dltest/README,
	tcl8.3.4/unix/dltest/configure, tcl8.3.4/unix/dltest/configure.in,
	tcl8.3.4/unix/dltest/pkga.c, tcl8.3.4/unix/dltest/pkgb.c,
	tcl8.3.4/unix/dltest/pkgc.c, tcl8.3.4/unix/dltest/pkgd.c,
	tcl8.3.4/unix/dltest/pkge.c, tcl8.3.4/unix/dltest/pkgf.c,
	tcl8.3.4/unix/install-sh, tcl8.3.4/unix/ldAix,
	tcl8.3.4/unix/mkLinks, tcl8.3.4/unix/tcl.m4, tcl8.3.4/unix/tcl.spec,
	tcl8.3.4/unix/tclAppInit.c, tcl8.3.4/unix/tclConfig.sh.in,
	tcl8.3.4/unix/tclLoadAix.c, tcl8.3.4/unix/tclLoadAout.c,
	tcl8.3.4/unix/tclLoadDl.c, tcl8.3.4/unix/tclLoadDld.c,
	tcl8.3.4/unix/tclLoadDyld.c, tcl8.3.4/unix/tclLoadNext.c,
	tcl8.3.4/unix/tclLoadOSF.c, tcl8.3.4/unix/tclLoadShl.c,
	tcl8.3.4/unix/tclMtherr.c, tcl8.3.4/unix/tclUnixChan.c,
	tcl8.3.4/unix/tclUnixEvent.c, tcl8.3.4/unix/tclUnixFCmd.c,
	tcl8.3.4/unix/tclUnixFile.c, tcl8.3.4/unix/tclUnixInit.c,
	tcl8.3.4/unix/tclUnixNotfy.c, tcl8.3.4/unix/tclUnixPipe.c,
	tcl8.3.4/unix/tclUnixPort.h, tcl8.3.4/unix/tclUnixPort.h.orig,
	tcl8.3.4/unix/tclUnixSock.c, tcl8.3.4/unix/tclUnixTest.c,
	tcl8.3.4/unix/tclUnixThrd.c, tcl8.3.4/unix/tclUnixThrd.c.orig,
	tcl8.3.4/unix/tclUnixThrd.h, tcl8.3.4/unix/tclUnixTime.c,
	tcl8.3.4/unix/tclXtNotify.c, tcl8.3.4/unix/tclXtTest.c,
	tcl8.3.4/win/Makefile.in, tcl8.3.4/win/README,
	tcl8.3.4/win/aclocal.m4, tcl8.3.4/win/cat.c, tcl8.3.4/win/configure,
	tcl8.3.4/win/configure.in, tcl8.3.4/win/license.terms,
	tcl8.3.4/win/makefile.vc, tcl8.3.4/win/mkd.bat,
	tcl8.3.4/win/rmd.bat, tcl8.3.4/win/stub16.c,
	tcl8.3.4/win/tcl.hpj.in, tcl8.3.4/win/tcl.m4, tcl8.3.4/win/tcl.rc,
	tcl8.3.4/win/tclAppInit.c, tcl8.3.4/win/tclConfig.sh.in,
	tcl8.3.4/win/tclWin32Dll.c, tcl8.3.4/win/tclWinChan.c,
	tcl8.3.4/win/tclWinConsole.c, tcl8.3.4/win/tclWinDde.c,
	tcl8.3.4/win/tclWinError.c, tcl8.3.4/win/tclWinFCmd.c,
	tcl8.3.4/win/tclWinFile.c, tcl8.3.4/win/tclWinInit.c,
	tcl8.3.4/win/tclWinInt.h, tcl8.3.4/win/tclWinLoad.c,
	tcl8.3.4/win/tclWinMtherr.c, tcl8.3.4/win/tclWinNotify.c,
	tcl8.3.4/win/tclWinPipe.c, tcl8.3.4/win/tclWinPort.h,
	tcl8.3.4/win/tclWinReg.c, tcl8.3.4/win/tclWinSerial.c,
	tcl8.3.4/win/tclWinSock.c, tcl8.3.4/win/tclWinTest.c,
	tcl8.3.4/win/tclWinThrd.c, tcl8.3.4/win/tclWinThrd.h,
	tcl8.3.4/win/tclWinTime.c, tcl8.3.4/win/tclsh.ico,
	tcl8.3.4/win/tclsh.rc: new file.
	* tcl8.3.4/ChangeLog, tcl8.3.4/Makefile, tcl8.3.4/README,
	tcl8.3.4/changes, tcl8.3.4/compat/README, tcl8.3.4/compat/dirent.h,
	tcl8.3.4/compat/dirent2.h, tcl8.3.4/compat/dlfcn.h,
	tcl8.3.4/compat/fixstrtod.c, tcl8.3.4/compat/float.h,
	tcl8.3.4/compat/gettod.c, tcl8.3.4/compat/license.terms,
	tcl8.3.4/compat/limits.h, tcl8.3.4/compat/memcmp.c,
	tcl8.3.4/compat/opendir.c, tcl8.3.4/compat/stdlib.h,
	tcl8.3.4/compat/strftime.c, tcl8.3.4/compat/string.h,
	tcl8.3.4/compat/strncasecmp.c, tcl8.3.4/compat/strstr.c,
	tcl8.3.4/compat/strtod.c, tcl8.3.4/compat/strtol.c,
	tcl8.3.4/compat/strtoul.c, tcl8.3.4/compat/tclErrno.h,
	tcl8.3.4/compat/tmpnam.c, tcl8.3.4/compat/unistd.h,
	tcl8.3.4/compat/waitpid.c, tcl8.3.4/doc/Access.3,
	tcl8.3.4/doc/AddErrInfo.3, tcl8.3.4/doc/Alloc.3,
	tcl8.3.4/doc/AllowExc.3, tcl8.3.4/doc/AppInit.3,
	tcl8.3.4/doc/AssocData.3, tcl8.3.4/doc/Async.3,
	tcl8.3.4/doc/BackgdErr.3, tcl8.3.4/doc/Backslash.3,
	tcl8.3.4/doc/BoolObj.3, tcl8.3.4/doc/ByteArrObj.3,
	tcl8.3.4/doc/CallDel.3, tcl8.3.4/doc/ChnlStack.3,
	tcl8.3.4/doc/CmdCmplt.3, tcl8.3.4/doc/Concat.3,
	tcl8.3.4/doc/CrtChannel.3, tcl8.3.4/doc/CrtChnlHdlr.3,
	tcl8.3.4/doc/CrtCloseHdlr.3, tcl8.3.4/doc/CrtCommand.3,
	tcl8.3.4/doc/CrtFileHdlr.3, tcl8.3.4/doc/CrtInterp.3,
	tcl8.3.4/doc/CrtMathFnc.3, tcl8.3.4/doc/CrtObjCmd.3,
	tcl8.3.4/doc/CrtSlave.3, tcl8.3.4/doc/CrtTimerHdlr.3,
	tcl8.3.4/doc/CrtTrace.3, tcl8.3.4/doc/DString.3,
	tcl8.3.4/doc/DetachPids.3, tcl8.3.4/doc/DoOneEvent.3,
	tcl8.3.4/doc/DoWhenIdle.3, tcl8.3.4/doc/DoubleObj.3,
	tcl8.3.4/doc/DumpActiveMemory.3, tcl8.3.4/doc/Encoding.3,
	tcl8.3.4/doc/Eval.3, tcl8.3.4/doc/Exit.3, tcl8.3.4/doc/ExprLong.3,
	tcl8.3.4/doc/ExprLongObj.3, tcl8.3.4/doc/FindExec.3,
	tcl8.3.4/doc/GetCwd.3, tcl8.3.4/doc/GetHostName.3,
	tcl8.3.4/doc/GetIndex.3, tcl8.3.4/doc/GetInt.3,
	tcl8.3.4/doc/GetOpnFl.3, tcl8.3.4/doc/GetStdChan.3,
	tcl8.3.4/doc/GetVersion.3, tcl8.3.4/doc/Hash.3, tcl8.3.4/doc/Init.3,
	tcl8.3.4/doc/InitStubs.3, tcl8.3.4/doc/IntObj.3,
	tcl8.3.4/doc/Interp.3, tcl8.3.4/doc/LinkVar.3,
	tcl8.3.4/doc/ListObj.3, tcl8.3.4/doc/Notifier.3,
	tcl8.3.4/doc/Object.3, tcl8.3.4/doc/ObjectType.3,
	tcl8.3.4/doc/OpenFileChnl.3, tcl8.3.4/doc/OpenTcp.3,
	tcl8.3.4/doc/ParseCmd.3, tcl8.3.4/doc/PkgRequire.3,
	tcl8.3.4/doc/Preserve.3, tcl8.3.4/doc/PrintDbl.3,
	tcl8.3.4/doc/RecEvalObj.3, tcl8.3.4/doc/RecordEval.3,
	tcl8.3.4/doc/RegExp.3, tcl8.3.4/doc/SaveResult.3,
	tcl8.3.4/doc/SetErrno.3, tcl8.3.4/doc/SetRecLmt.3,
	tcl8.3.4/doc/SetResult.3, tcl8.3.4/doc/SetVar.3,
	tcl8.3.4/doc/Sleep.3, tcl8.3.4/doc/SourceRCFile.3,
	tcl8.3.4/doc/SplitList.3, tcl8.3.4/doc/SplitPath.3,
	tcl8.3.4/doc/StaticPkg.3, tcl8.3.4/doc/StrMatch.3,
	tcl8.3.4/doc/StringObj.3, tcl8.3.4/doc/TCL_MEM_DEBUG.3,
	tcl8.3.4/doc/Tcl.n, tcl8.3.4/doc/Tcl_Main.3, tcl8.3.4/doc/Thread.3,
	tcl8.3.4/doc/ToUpper.3, tcl8.3.4/doc/TraceVar.3,
	tcl8.3.4/doc/Translate.3, tcl8.3.4/doc/UpVar.3, tcl8.3.4/doc/Utf.3,
	tcl8.3.4/doc/WrongNumArgs.3, tcl8.3.4/doc/after.n,
	tcl8.3.4/doc/append.n, tcl8.3.4/doc/array.n, tcl8.3.4/doc/bgerror.n,
	tcl8.3.4/doc/binary.n, tcl8.3.4/doc/break.n, tcl8.3.4/doc/case.n,
	tcl8.3.4/doc/catch.n, tcl8.3.4/doc/cd.n, tcl8.3.4/doc/clock.n,
	tcl8.3.4/doc/close.n, tcl8.3.4/doc/concat.n,
	tcl8.3.4/doc/continue.n, tcl8.3.4/doc/dde.n,
	tcl8.3.4/doc/encoding.n, tcl8.3.4/doc/eof.n, tcl8.3.4/doc/error.n,
	tcl8.3.4/doc/eval.n, tcl8.3.4/doc/exec.n, tcl8.3.4/doc/exit.n,
	tcl8.3.4/doc/expr.n, tcl8.3.4/doc/fblocked.n,
	tcl8.3.4/doc/fconfigure.n, tcl8.3.4/doc/fcopy.n,
	tcl8.3.4/doc/file.n, tcl8.3.4/doc/fileevent.n,
	tcl8.3.4/doc/filename.n, tcl8.3.4/doc/flush.n, tcl8.3.4/doc/for.n,
	tcl8.3.4/doc/foreach.n, tcl8.3.4/doc/format.n, tcl8.3.4/doc/gets.n,
	tcl8.3.4/doc/glob.n, tcl8.3.4/doc/global.n, tcl8.3.4/doc/history.n,
	tcl8.3.4/doc/http.n, tcl8.3.4/doc/if.n, tcl8.3.4/doc/incr.n,
	tcl8.3.4/doc/info.n, tcl8.3.4/doc/interp.n, tcl8.3.4/doc/join.n,
	tcl8.3.4/doc/lappend.n, tcl8.3.4/doc/library.n,
	tcl8.3.4/doc/license.terms, tcl8.3.4/doc/lindex.n,
	tcl8.3.4/doc/linsert.n, tcl8.3.4/doc/list.n, tcl8.3.4/doc/llength.n,
	tcl8.3.4/doc/load.n, tcl8.3.4/doc/lrange.n, tcl8.3.4/doc/lreplace.n,
	tcl8.3.4/doc/lsearch.n, tcl8.3.4/doc/lsort.n,
	tcl8.3.4/doc/man.macros, tcl8.3.4/doc/memory.n,
	tcl8.3.4/doc/msgcat.n, tcl8.3.4/doc/namespace.n,
	tcl8.3.4/doc/open.n, tcl8.3.4/doc/package.n,
	tcl8.3.4/doc/packagens.n, tcl8.3.4/doc/pid.n,
	tcl8.3.4/doc/pkgMkIndex.n, tcl8.3.4/doc/proc.n, tcl8.3.4/doc/puts.n,
	tcl8.3.4/doc/pwd.n, tcl8.3.4/doc/re_syntax.n, tcl8.3.4/doc/read.n,
	tcl8.3.4/doc/regexp.n, tcl8.3.4/doc/registry.n,
	tcl8.3.4/doc/regsub.n, tcl8.3.4/doc/rename.n,
	tcl8.3.4/doc/resource.n, tcl8.3.4/doc/return.n, tcl8.3.4/doc/safe.n,
	tcl8.3.4/doc/scan.n, tcl8.3.4/doc/seek.n, tcl8.3.4/doc/set.n,
	tcl8.3.4/doc/socket.n, tcl8.3.4/doc/source.n, tcl8.3.4/doc/split.n,
	tcl8.3.4/doc/string.n, tcl8.3.4/doc/subst.n, tcl8.3.4/doc/switch.n,
	tcl8.3.4/doc/tclsh.1, tcl8.3.4/doc/tcltest.n,
	tcl8.3.4/doc/tclvars.n, tcl8.3.4/doc/tell.n, tcl8.3.4/doc/time.n,
	tcl8.3.4/doc/trace.n, tcl8.3.4/doc/unknown.n, tcl8.3.4/doc/unset.n,
	tcl8.3.4/doc/update.n, tcl8.3.4/doc/uplevel.n, tcl8.3.4/doc/upvar.n,
	tcl8.3.4/doc/variable.n, tcl8.3.4/doc/vwait.n, tcl8.3.4/doc/while.n,
	tcl8.3.4/generic/README, tcl8.3.4/generic/regc_color.c,
	tcl8.3.4/generic/regc_cvec.c, tcl8.3.4/generic/regc_lex.c,
	tcl8.3.4/generic/regc_locale.c, tcl8.3.4/generic/regc_nfa.c,
	tcl8.3.4/generic/regcomp.c, tcl8.3.4/generic/regcustom.h,
	tcl8.3.4/generic/rege_dfa.c, tcl8.3.4/generic/regerror.c,
	tcl8.3.4/generic/regerrs.h, tcl8.3.4/generic/regex.h,
	tcl8.3.4/generic/regexec.c, tcl8.3.4/generic/regfree.c,
	tcl8.3.4/generic/regfronts.c, tcl8.3.4/generic/regguts.h,
	tcl8.3.4/generic/tcl.decls, tcl8.3.4/generic/tcl.h,
	tcl8.3.4/generic/tclAlloc.c, tcl8.3.4/generic/tclAlloc.c.orig,
	tcl8.3.4/generic/tclAsync.c, tcl8.3.4/generic/tclBasic.c,
	tcl8.3.4/generic/tclBinary.c, tcl8.3.4/generic/tclCkalloc.c,
	tcl8.3.4/generic/tclClock.c, tcl8.3.4/generic/tclCmdAH.c,
	tcl8.3.4/generic/tclCmdIL.c, tcl8.3.4/generic/tclCmdMZ.c,
	tcl8.3.4/generic/tclCompCmds.c, tcl8.3.4/generic/tclCompExpr.c,
	tcl8.3.4/generic/tclCompile.c, tcl8.3.4/generic/tclCompile.h,
	tcl8.3.4/generic/tclDate.c, tcl8.3.4/generic/tclDecls.h,
	tcl8.3.4/generic/tclEncoding.c, tcl8.3.4/generic/tclEnv.c,
	tcl8.3.4/generic/tclEvent.c, tcl8.3.4/generic/tclExecute.c,
	tcl8.3.4/generic/tclFCmd.c, tcl8.3.4/generic/tclFileName.c,
	tcl8.3.4/generic/tclGet.c, tcl8.3.4/generic/tclGetDate.y,
	tcl8.3.4/generic/tclHash.c, tcl8.3.4/generic/tclHistory.c,
	tcl8.3.4/generic/tclIO.c, tcl8.3.4/generic/tclIO.h,
	tcl8.3.4/generic/tclIOCmd.c, tcl8.3.4/generic/tclIOGT.c,
	tcl8.3.4/generic/tclIOSock.c, tcl8.3.4/generic/tclIOUtil.c,
	tcl8.3.4/generic/tclIndexObj.c, tcl8.3.4/generic/tclInitScript.h,
	tcl8.3.4/generic/tclInt.decls, tcl8.3.4/generic/tclInt.h,
	tcl8.3.4/generic/tclInt.h.orig, tcl8.3.4/generic/tclIntDecls.h,
	tcl8.3.4/generic/tclIntPlatDecls.h, tcl8.3.4/generic/tclInterp.c,
	tcl8.3.4/generic/tclLink.c, tcl8.3.4/generic/tclListObj.c,
	tcl8.3.4/generic/tclLiteral.c, tcl8.3.4/generic/tclLoad.c,
	tcl8.3.4/generic/tclLoadNone.c, tcl8.3.4/generic/tclMain.c,
	tcl8.3.4/generic/tclMath.h, tcl8.3.4/generic/tclNamesp.c,
	tcl8.3.4/generic/tclNotify.c, tcl8.3.4/generic/tclObj.c,
	tcl8.3.4/generic/tclObj.c.orig, tcl8.3.4/generic/tclPanic.c,
	tcl8.3.4/generic/tclParse.c, tcl8.3.4/generic/tclParseExpr.c,
	tcl8.3.4/generic/tclPipe.c, tcl8.3.4/generic/tclPkg.c,
	tcl8.3.4/generic/tclPlatDecls.h, tcl8.3.4/generic/tclPort.h,
	tcl8.3.4/generic/tclPosixStr.c, tcl8.3.4/generic/tclPreserve.c,
	tcl8.3.4/generic/tclProc.c, tcl8.3.4/generic/tclRegexp.c,
	tcl8.3.4/generic/tclRegexp.h, tcl8.3.4/generic/tclResolve.c,
	tcl8.3.4/generic/tclResult.c, tcl8.3.4/generic/tclScan.c,
	tcl8.3.4/generic/tclStringObj.c, tcl8.3.4/generic/tclStubInit.c,
	tcl8.3.4/generic/tclStubInit.c.orig, tcl8.3.4/generic/tclStubLib.c,
	tcl8.3.4/generic/tclTest.c, tcl8.3.4/generic/tclTestObj.c,
	tcl8.3.4/generic/tclTestProcBodyObj.c, tcl8.3.4/generic/tclThread.c,
	tcl8.3.4/generic/tclThreadTest.c, tcl8.3.4/generic/tclTimer.c,
	tcl8.3.4/generic/tclUniData.c, tcl8.3.4/generic/tclUtf.c,
	tcl8.3.4/generic/tclUtil.c, tcl8.3.4/generic/tclVar.c,
	tcl8.3.4/library/auto.tcl, tcl8.3.4/library/dde1.1/pkgIndex.tcl,
	tcl8.3.4/library/encoding/ascii.enc,
	tcl8.3.4/library/encoding/big5.enc,
	tcl8.3.4/library/encoding/cp1250.enc,
	tcl8.3.4/library/encoding/cp1251.enc,
	tcl8.3.4/library/encoding/cp1252.enc,
	tcl8.3.4/library/encoding/cp1253.enc,
	tcl8.3.4/library/encoding/cp1254.enc,
	tcl8.3.4/library/encoding/cp1255.enc,
	tcl8.3.4/library/encoding/cp1256.enc,
	tcl8.3.4/library/encoding/cp1257.enc,
	tcl8.3.4/library/encoding/cp1258.enc,
	tcl8.3.4/library/encoding/cp437.enc,
	tcl8.3.4/library/encoding/cp737.enc,
	tcl8.3.4/library/encoding/cp775.enc,
	tcl8.3.4/library/encoding/cp850.enc,
	tcl8.3.4/library/encoding/cp852.enc,
	tcl8.3.4/library/encoding/cp855.enc,
	tcl8.3.4/library/encoding/cp857.enc,
	tcl8.3.4/library/encoding/cp860.enc,
	tcl8.3.4/library/encoding/cp861.enc,
	tcl8.3.4/library/encoding/cp862.enc,
	tcl8.3.4/library/encoding/cp863.enc,
	tcl8.3.4/library/encoding/cp864.enc,
	tcl8.3.4/library/encoding/cp865.enc,
	tcl8.3.4/library/encoding/cp866.enc,
	tcl8.3.4/library/encoding/cp869.enc,
	tcl8.3.4/library/encoding/cp874.enc,
	tcl8.3.4/library/encoding/cp932.enc,
	tcl8.3.4/library/encoding/cp936.enc,
	tcl8.3.4/library/encoding/cp949.enc,
	tcl8.3.4/library/encoding/cp950.enc,
	tcl8.3.4/library/encoding/dingbats.enc,
	tcl8.3.4/library/encoding/ebcdic.enc, tcl8.3.4/library/encoding/euc-
	cn.enc, tcl8.3.4/library/encoding/euc-jp.enc,
	tcl8.3.4/library/encoding/euc-kr.enc,
	tcl8.3.4/library/encoding/gb12345.enc,
	tcl8.3.4/library/encoding/gb1988.enc,
	tcl8.3.4/library/encoding/gb2312.enc,
	tcl8.3.4/library/encoding/iso2022-jp.enc,
	tcl8.3.4/library/encoding/iso2022-kr.enc,
	tcl8.3.4/library/encoding/iso2022.enc,
	tcl8.3.4/library/encoding/iso8859-1.enc,
	tcl8.3.4/library/encoding/iso8859-10.enc,
	tcl8.3.4/library/encoding/iso8859-13.enc,
	tcl8.3.4/library/encoding/iso8859-14.enc,
	tcl8.3.4/library/encoding/iso8859-15.enc,
	tcl8.3.4/library/encoding/iso8859-16.enc,
	tcl8.3.4/library/encoding/iso8859-2.enc,
	tcl8.3.4/library/encoding/iso8859-3.enc,
	tcl8.3.4/library/encoding/iso8859-4.enc,
	tcl8.3.4/library/encoding/iso8859-5.enc,
	tcl8.3.4/library/encoding/iso8859-6.enc,
	tcl8.3.4/library/encoding/iso8859-7.enc,
	tcl8.3.4/library/encoding/iso8859-8.enc,
	tcl8.3.4/library/encoding/iso8859-9.enc,
	tcl8.3.4/library/encoding/jis0201.enc,
	tcl8.3.4/library/encoding/jis0208.enc,
	tcl8.3.4/library/encoding/jis0212.enc,
	tcl8.3.4/library/encoding/koi8-r.enc,
	tcl8.3.4/library/encoding/koi8-u.enc,
	tcl8.3.4/library/encoding/ksc5601.enc,
	tcl8.3.4/library/encoding/macCentEuro.enc,
	tcl8.3.4/library/encoding/macCroatian.enc,
	tcl8.3.4/library/encoding/macCyrillic.enc,
	tcl8.3.4/library/encoding/macDingbats.enc,
	tcl8.3.4/library/encoding/macGreek.enc,
	tcl8.3.4/library/encoding/macIceland.enc,
	tcl8.3.4/library/encoding/macJapan.enc,
	tcl8.3.4/library/encoding/macRoman.enc,
	tcl8.3.4/library/encoding/macRomania.enc,
	tcl8.3.4/library/encoding/macThai.enc,
	tcl8.3.4/library/encoding/macTurkish.enc,
	tcl8.3.4/library/encoding/macUkraine.enc,
	tcl8.3.4/library/encoding/shiftjis.enc,
	tcl8.3.4/library/encoding/symbol.enc,
	tcl8.3.4/library/encoding/tis-620.enc, tcl8.3.4/library/history.tcl,
	tcl8.3.4/library/http/http.tcl, tcl8.3.4/library/http/pkgIndex.tcl,
	tcl8.3.4/library/http1.0/http.tcl,
	tcl8.3.4/library/http1.0/pkgIndex.tcl, tcl8.3.4/library/init.tcl,
	tcl8.3.4/library/ldAout.tcl, tcl8.3.4/library/license.terms,
	tcl8.3.4/library/msgcat/msgcat.tcl,
	tcl8.3.4/library/msgcat/pkgIndex.tcl,
	tcl8.3.4/library/opt/optparse.tcl,
	tcl8.3.4/library/opt/pkgIndex.tcl, tcl8.3.4/library/package.tcl,
	tcl8.3.4/library/parray.tcl, tcl8.3.4/library/reg1.0/pkgIndex.tcl,
	tcl8.3.4/library/safe.tcl, tcl8.3.4/library/tclIndex,
	tcl8.3.4/library/tcltest1.0/pkgIndex.tcl,
	tcl8.3.4/library/tcltest1.0/tcltest.tcl, tcl8.3.4/library/word.tcl,
	tcl8.3.4/license.terms, tcl8.3.4/mac/AppleScript.html,
	tcl8.3.4/mac/Background.doc, tcl8.3.4/mac/MW_TclAppleScriptHeader.h,
	tcl8.3.4/mac/MW_TclAppleScriptHeader.pch,
	tcl8.3.4/mac/MW_TclBuildLibHeader.h,
	tcl8.3.4/mac/MW_TclBuildLibHeader.pch, tcl8.3.4/mac/MW_TclHeader.h,
	tcl8.3.4/mac/MW_TclHeader.pch, tcl8.3.4/mac/MW_TclHeaderCommon.h,
	tcl8.3.4/mac/MW_TclStaticHeader.h,
	tcl8.3.4/mac/MW_TclStaticHeader.pch,
	tcl8.3.4/mac/MW_TclTestHeader.h, tcl8.3.4/mac/MW_TclTestHeader.pch,
	tcl8.3.4/mac/README, tcl8.3.4/mac/bugs.doc,
	tcl8.3.4/mac/libmoto.doc, tcl8.3.4/mac/license.terms,
	tcl8.3.4/mac/morefiles.doc, tcl8.3.4/mac/porting.notes,
	tcl8.3.4/mac/tclMac.h, tcl8.3.4/mac/tclMacAETE.r,
	tcl8.3.4/mac/tclMacAlloc.c, tcl8.3.4/mac/tclMacAppInit.c,
	tcl8.3.4/mac/tclMacApplication.r, tcl8.3.4/mac/tclMacBOAAppInit.c,
	tcl8.3.4/mac/tclMacBOAMain.c, tcl8.3.4/mac/tclMacChan.c,
	tcl8.3.4/mac/tclMacCommonPch.h, tcl8.3.4/mac/tclMacDNR.c,
	tcl8.3.4/mac/tclMacEnv.c, tcl8.3.4/mac/tclMacExit.c,
	tcl8.3.4/mac/tclMacFCmd.c, tcl8.3.4/mac/tclMacFile.c,
	tcl8.3.4/mac/tclMacInit.c, tcl8.3.4/mac/tclMacInt.h,
	tcl8.3.4/mac/tclMacInterupt.c, tcl8.3.4/mac/tclMacLibrary.c,
	tcl8.3.4/mac/tclMacLibrary.r, tcl8.3.4/mac/tclMacLoad.c,
	tcl8.3.4/mac/tclMacMath.h, tcl8.3.4/mac/tclMacNotify.c,
	tcl8.3.4/mac/tclmacOSA.c, tcl8.3.4/mac/tclmacOSA.r,
	tcl8.3.4/mac/tclMacPanic.c, tcl8.3.4/mac/tclMacPort.h,
	tcl8.3.4/mac/tclMacProjects.sea.hqx, tcl8.3.4/mac/tclMacResource.c,
	tcl8.3.4/mac/tclMacResource.r, tcl8.3.4/mac/tclMacSock.c,
	tcl8.3.4/mac/tclMacTclCode.r, tcl8.3.4/mac/tclMacTest.c,
	tcl8.3.4/mac/tclMacThrd.c, tcl8.3.4/mac/tclMacThrd.h,
	tcl8.3.4/mac/tclMacTime.c, tcl8.3.4/mac/tclMacUnix.c,
	tcl8.3.4/mac/tclMacUtil.c, tcl8.3.4/tests/README,
	tcl8.3.4/tests/all.tcl, tcl8.3.4/tests/append.test,
	tcl8.3.4/tests/assocd.test, tcl8.3.4/tests/async.test,
	tcl8.3.4/tests/autoMkindex.tcl, tcl8.3.4/tests/autoMkindex.test,
	tcl8.3.4/tests/basic.test, tcl8.3.4/tests/binary.test,
	tcl8.3.4/tests/case.test, tcl8.3.4/tests/clock.test,
	tcl8.3.4/tests/cmdAH.test, tcl8.3.4/tests/cmdIL.test,
	tcl8.3.4/tests/cmdInfo.test, tcl8.3.4/tests/cmdMZ.test,
	tcl8.3.4/tests/compExpr-old.test, tcl8.3.4/tests/compExpr.test,
	tcl8.3.4/tests/compile.test, tcl8.3.4/tests/concat.test,
	tcl8.3.4/tests/dcall.test, tcl8.3.4/tests/dstring.test,
	tcl8.3.4/tests/encoding.test, tcl8.3.4/tests/env.test,
	tcl8.3.4/tests/error.test, tcl8.3.4/tests/eval.test,
	tcl8.3.4/tests/event.test, tcl8.3.4/tests/exec.test,
	tcl8.3.4/tests/execute.test, tcl8.3.4/tests/expr-old.test,
	tcl8.3.4/tests/expr.test, tcl8.3.4/tests/fCmd.test,
	tcl8.3.4/tests/fileName.test, tcl8.3.4/tests/for-old.test,
	tcl8.3.4/tests/for.test, tcl8.3.4/tests/foreach.test,
	tcl8.3.4/tests/format.test, tcl8.3.4/tests/get.test,
	tcl8.3.4/tests/history.test, tcl8.3.4/tests/http.test,
	tcl8.3.4/tests/httpd, tcl8.3.4/tests/httpold.test, tcl8.3.4/tests
	/if-old.test, tcl8.3.4/tests/if.test, tcl8.3.4/tests/incr-old.test,
	tcl8.3.4/tests/incr.test, tcl8.3.4/tests/indexObj.test,
	tcl8.3.4/tests/info.test, tcl8.3.4/tests/init.test,
	tcl8.3.4/tests/interp.test, tcl8.3.4/tests/io.test,
	tcl8.3.4/tests/ioCmd.test, tcl8.3.4/tests/ioUtil.test,
	tcl8.3.4/tests/iogt.test, tcl8.3.4/tests/join.test,
	tcl8.3.4/tests/license.terms, tcl8.3.4/tests/lindex.test,
	tcl8.3.4/tests/link.test, tcl8.3.4/tests/linsert.test,
	tcl8.3.4/tests/list.test, tcl8.3.4/tests/listObj.test,
	tcl8.3.4/tests/llength.test, tcl8.3.4/tests/load.test,
	tcl8.3.4/tests/lrange.test, tcl8.3.4/tests/lreplace.test,
	tcl8.3.4/tests/lsearch.test, tcl8.3.4/tests/macFCmd.test,
	tcl8.3.4/tests/misc.test, tcl8.3.4/tests/msgcat.test, tcl8.3.4/tests
	/namespace-old.test, tcl8.3.4/tests/namespace.test,
	tcl8.3.4/tests/obj.test, tcl8.3.4/tests/opt.test,
	tcl8.3.4/tests/osa.test, tcl8.3.4/tests/package.test,
	tcl8.3.4/tests/parse.test, tcl8.3.4/tests/parseExpr.test,
	tcl8.3.4/tests/parseOld.test, tcl8.3.4/tests/pid.test,
	tcl8.3.4/tests/pkg.test, tcl8.3.4/tests/pkg/circ1.tcl,
	tcl8.3.4/tests/pkg/circ2.tcl, tcl8.3.4/tests/pkg/circ3.tcl,
	tcl8.3.4/tests/pkg/global.tcl, tcl8.3.4/tests/pkg/import.tcl,
	tcl8.3.4/tests/pkg/license.terms, tcl8.3.4/tests/pkg/magicchar.tcl,
	tcl8.3.4/tests/pkg/magicchar2.tcl, tcl8.3.4/tests/pkg/pkg1.tcl,
	tcl8.3.4/tests/pkg/pkg2_a.tcl, tcl8.3.4/tests/pkg/pkg2_b.tcl,
	tcl8.3.4/tests/pkg/pkg3.tcl, tcl8.3.4/tests/pkg/pkg4.tcl,
	tcl8.3.4/tests/pkg/pkg5.tcl, tcl8.3.4/tests/pkg/pkga.tcl,
	tcl8.3.4/tests/pkg/samename.tcl, tcl8.3.4/tests/pkg/simple.tcl,
	tcl8.3.4/tests/pkg/spacename.tcl, tcl8.3.4/tests/pkg/std.tcl,
	tcl8.3.4/tests/pkgMkIndex.test, tcl8.3.4/tests/platform.test,
	tcl8.3.4/tests/proc-old.test, tcl8.3.4/tests/proc.test,
	tcl8.3.4/tests/pwd.test, tcl8.3.4/tests/reg.test,
	tcl8.3.4/tests/regexp.test, tcl8.3.4/tests/registry.test,
	tcl8.3.4/tests/remote.tcl, tcl8.3.4/tests/rename.test,
	tcl8.3.4/tests/resource.test, tcl8.3.4/tests/result.test,
	tcl8.3.4/tests/safe.test, tcl8.3.4/tests/scan.test,
	tcl8.3.4/tests/security.test, tcl8.3.4/tests/set-old.test,
	tcl8.3.4/tests/set.test, tcl8.3.4/tests/socket.test,
	tcl8.3.4/tests/source.test, tcl8.3.4/tests/split.test,
	tcl8.3.4/tests/stack.test, tcl8.3.4/tests/string.test,
	tcl8.3.4/tests/stringObj.test, tcl8.3.4/tests/subst.test,
	tcl8.3.4/tests/switch.test, tcl8.3.4/tests/tcltest.test,
	tcl8.3.4/tests/thread.test, tcl8.3.4/tests/timer.test,
	tcl8.3.4/tests/trace.test, tcl8.3.4/tests/unixFCmd.test,
	tcl8.3.4/tests/unixFile.test, tcl8.3.4/tests/unixInit.test,
	tcl8.3.4/tests/unixNotfy.test, tcl8.3.4/tests/unknown.test,
	tcl8.3.4/tests/uplevel.test, tcl8.3.4/tests/upvar.test,
	tcl8.3.4/tests/utf.test, tcl8.3.4/tests/util.test,
	tcl8.3.4/tests/var.test, tcl8.3.4/tests/while-old.test,
	tcl8.3.4/tests/while.test, tcl8.3.4/tests/winConsole.test,
	tcl8.3.4/tests/winDde.test, tcl8.3.4/tests/winFCmd.test,
	tcl8.3.4/tests/winFile.test, tcl8.3.4/tests/winNotify.test,
	tcl8.3.4/tests/winPipe.test, tcl8.3.4/tests/winTime.test,
	tcl8.3.4/tools/Makefile.in, tcl8.3.4/tools/README,
	tcl8.3.4/tools/checkLibraryDoc.tcl, tcl8.3.4/tools/configure,
	tcl8.3.4/tools/configure.in, tcl8.3.4/tools/cvtEOL.tcl,
	tcl8.3.4/tools/genStubs.tcl, tcl8.3.4/tools/genWinImage.tcl,
	tcl8.3.4/tools/index.tcl, tcl8.3.4/tools/man2help.tcl,
	tcl8.3.4/tools/man2help2.tcl, tcl8.3.4/tools/man2html.tcl,
	tcl8.3.4/tools/man2html1.tcl, tcl8.3.4/tools/man2html2.tcl,
	tcl8.3.4/tools/man2tcl.c, tcl8.3.4/tools/regexpTestLib.tcl,
	tcl8.3.4/tools/tcl.hpj.in, tcl8.3.4/tools/tcl.wse.in,
	tcl8.3.4/tools/tclSplash.bmp, tcl8.3.4/tools/tcltk-man2html.tcl,
	tcl8.3.4/tools/uniClass.tcl, tcl8.3.4/tools/uniParse.tcl,
	tcl8.3.4/tools/white.bmp, tcl8.3.4/unix/Makefile.in,
	tcl8.3.4/unix/README, tcl8.3.4/unix/aclocal.m4,
	tcl8.3.4/unix/configure, tcl8.3.4/unix/configure.in,
	tcl8.3.4/unix/dltest/Makefile.in, tcl8.3.4/unix/dltest/README,
	tcl8.3.4/unix/dltest/configure, tcl8.3.4/unix/dltest/configure.in,
	tcl8.3.4/unix/dltest/pkga.c, tcl8.3.4/unix/dltest/pkgb.c,
	tcl8.3.4/unix/dltest/pkgc.c, tcl8.3.4/unix/dltest/pkgd.c,
	tcl8.3.4/unix/dltest/pkge.c, tcl8.3.4/unix/dltest/pkgf.c,
	tcl8.3.4/unix/install-sh, tcl8.3.4/unix/ldAix,
	tcl8.3.4/unix/mkLinks, tcl8.3.4/unix/tcl.m4, tcl8.3.4/unix/tcl.spec,
	tcl8.3.4/unix/tclAppInit.c, tcl8.3.4/unix/tclConfig.sh.in,
	tcl8.3.4/unix/tclLoadAix.c, tcl8.3.4/unix/tclLoadAout.c,
	tcl8.3.4/unix/tclLoadDl.c, tcl8.3.4/unix/tclLoadDld.c,
	tcl8.3.4/unix/tclLoadDyld.c, tcl8.3.4/unix/tclLoadNext.c,
	tcl8.3.4/unix/tclLoadOSF.c, tcl8.3.4/unix/tclLoadShl.c,
	tcl8.3.4/unix/tclMtherr.c, tcl8.3.4/unix/tclUnixChan.c,
	tcl8.3.4/unix/tclUnixEvent.c, tcl8.3.4/unix/tclUnixFCmd.c,
	tcl8.3.4/unix/tclUnixFile.c, tcl8.3.4/unix/tclUnixInit.c,
	tcl8.3.4/unix/tclUnixNotfy.c, tcl8.3.4/unix/tclUnixPipe.c,
	tcl8.3.4/unix/tclUnixPort.h, tcl8.3.4/unix/tclUnixPort.h.orig,
	tcl8.3.4/unix/tclUnixSock.c, tcl8.3.4/unix/tclUnixTest.c,
	tcl8.3.4/unix/tclUnixThrd.c, tcl8.3.4/unix/tclUnixThrd.c.orig,
	tcl8.3.4/unix/tclUnixThrd.h, tcl8.3.4/unix/tclUnixTime.c,
	tcl8.3.4/unix/tclXtNotify.c, tcl8.3.4/unix/tclXtTest.c,
	tcl8.3.4/win/Makefile.in, tcl8.3.4/win/README,
	tcl8.3.4/win/aclocal.m4, tcl8.3.4/win/cat.c, tcl8.3.4/win/configure,
	tcl8.3.4/win/configure.in, tcl8.3.4/win/license.terms,
	tcl8.3.4/win/makefile.vc, tcl8.3.4/win/mkd.bat,
	tcl8.3.4/win/rmd.bat, tcl8.3.4/win/stub16.c,
	tcl8.3.4/win/tcl.hpj.in, tcl8.3.4/win/tcl.m4, tcl8.3.4/win/tcl.rc,
	tcl8.3.4/win/tclAppInit.c, tcl8.3.4/win/tclConfig.sh.in,
	tcl8.3.4/win/tclWin32Dll.c, tcl8.3.4/win/tclWinChan.c,
	tcl8.3.4/win/tclWinConsole.c, tcl8.3.4/win/tclWinDde.c,
	tcl8.3.4/win/tclWinError.c, tcl8.3.4/win/tclWinFCmd.c,
	tcl8.3.4/win/tclWinFile.c, tcl8.3.4/win/tclWinInit.c,
	tcl8.3.4/win/tclWinInt.h, tcl8.3.4/win/tclWinLoad.c,
	tcl8.3.4/win/tclWinMtherr.c, tcl8.3.4/win/tclWinNotify.c,
	tcl8.3.4/win/tclWinPipe.c, tcl8.3.4/win/tclWinPort.h,
	tcl8.3.4/win/tclWinReg.c, tcl8.3.4/win/tclWinSerial.c,
	tcl8.3.4/win/tclWinSock.c, tcl8.3.4/win/tclWinTest.c,
	tcl8.3.4/win/tclWinThrd.c, tcl8.3.4/win/tclWinThrd.h,
	tcl8.3.4/win/tclWinTime.c, tcl8.3.4/win/tclsh.ico,
	tcl8.3.4/win/tclsh.rc:
	Initial import of Tcl 8.3.4

2001-08-30 02:52 +0100  Scott S. Goodwin  <scott@scottg.net>  (1ecfad0546ea)

	* ChangeLog, tcl/http.tcl:
	(ns_httppost) Accept content-type parameter

	Suggested by Rick Lansky.

2001-08-27 21:16 +0100  Scott S. Goodwin  <scott@scottg.net>  (0b5a2b02a174)

	* ChangeLog, tcl/http.tcl:
	Add ns_httppost, that is called with url, rqset, qsset and timeout

	The qsset is an ns_set with key/values that will be turned into
	user=scottg&pass=1234, for example, and passed as content in the
	POST.

2001-08-18 02:54 +0100  Scott S. Goodwin  <scott@scottg.net>  (7eece83d6199)

	* ChangeLog, tcl/http.tcl:
	Moved rqset to be the last arg passed to ns_httpget so it won't
	break existing code

	I should have done it that way in the first place.

2001-08-16 04:29 +0100  Scott S. Goodwin  <scott@scottg.net>  (04ee42b51a1f)

	* ChangeLog, tcl/http.tcl:
	Add the rqset param to ns_httpget so that cookies, for example, may
	be set

2001-07-17 04:40 +0100  Scott S. Goodwin  <scott@scottg.net>  (1128661277b6)

	* ChangeLog, tcl/http.tcl:
	You can now 'ns_httpopen GET /index.html', http://hostname:port/
	will be prepended

2001-07-01 03:31 +0100  Dossy Shiobara  <dossy@panoptic.com>  (0f382cb171a9)

	* tests/api/ns_conn.adp: new file.
	* ChangeLog, nsd/conn.c, tests/api/ns_conn.adp:
	Fixed ns_conn outputheaders as per bug #433676 submitted by Yon
	Derek (yond)

2001-06-26 23:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (6eacf5b68f9e)

	* nsd/cache.c:
	Remove 32 character cache name limit; update time-based caches to
	use microsecond resolution

2001-06-26 23:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (ce691a7502fe)

	* nsd/adpeval.c:
	Fixed Ns_Cache bug which could result in an invalid entry pointer if
	two threads attempt to update same entry at once

2001-06-26 23:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (ef7843d8f633)

	* nsd/nsconf.c:
	Renamed new logmaxbackup, logmaxbuffer, and logmaxlevel config
	options and fixed dns timeout setting bug

2001-05-31 21:27 +0100  Jim Davidson  <jgdavidson@aol.com>  (45a576fd388b)

	* thread/pthread.cpp:
	Silence compiler warning

2001-05-31 21:16 +0100  Jim Davidson  <jgdavidson@aol.com>  (44907db7c661)

	* include/Makefile.global:
	Further simplifications of build system

2001-05-31 21:15 +0100  Jim Davidson  <jgdavidson@aol.com>  (76fd083324e5)

	* thread/pthread.cpp, thread/test.c:
	Thread fixes for HP-UX

2001-05-30 03:26 +0100  Dossy Shiobara  <dossy@panoptic.com>  (0f635baf826f)

	* include/Makefile.library, include/Makefile.module:
	Corrected include directives to use the NSHOME variable

2001-05-30 03:24 +0100  Dossy Shiobara  <dossy@panoptic.com>  (60cc616b5a88)

	* tests/api/ns_localtime.adp:
	Small display change in output from HTML pre to xmp tags

2001-05-30 01:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (3f51f4b0da8e)

	* thread/Makefile:
	Updated RFLAG for test program

2001-05-30 00:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (ff17a088225b)

	* include/Makefile.global, nsmain/Makefile:
	Moved RPATH out of LIBS and into specific makefiles

2001-05-30 00:12 +0100  Jim Davidson  <jgdavidson@aol.com>  (76505c31a5d9)

	* Makefile, include/Makefile.global, thread/Makefile:
	Cleaned up make vars names, removed build directories from default
	RPATH

2001-05-28 23:34 +0100  Jim Davidson  <jgdavidson@aol.com>  (02b8280902c7)

	* include/Makefile.global, include/ns.h:
	Updated LDSO flags

2001-05-28 22:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (50203d85775c)

	* include/Makefile.global:
	Updated Irix build flags

2001-05-28 22:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (323115028a28)

	* Makefile, include/Makefile.global, nsd/Makefile:
	Updated libnsd.so install target

2001-05-28 22:32 +0100  Jim Davidson  <jgdavidson@aol.com>  (cc12d29dfc22)

	* include/Makefile.library: new file.
	* include/Makefile.library:
	Makefile for shared libraries, similar to modules

2001-05-28 22:30 +0100  Jim Davidson  <jgdavidson@aol.com>  (ff69dd18fb67)

	* nsmain/Makefile, nsmain/main.c: new file.
	* nsd/main.c: deleted file.
	* Makefile, include/Makefile.global, include/Makefile.module,
	nscgi/Makefile, nscp/Makefile, nsd/Makefile, nsd/main.c,
	nsext/Makefile, nslog/Makefile, nsmain/Makefile, nsmain/main.c,
	nspd/Makefile, nsperm/Makefile, nssock/Makefile, nsssl/Makefile,
	thread/Makefile:
	Updated build to use shared libraries

2001-05-22 15:19 +0100  Scott S. Goodwin  <scott@scottg.net>  (86d86007cc45)

	* ChangeLog, nsd/conn.c:
	Make Ns_ConnDriverContext return the actual conn-specific, module-
	specific context

	This is how it used to work in 3.x. For some reason this API call
	was changed to always return NULL, but nsopenssl and potentially
	other comm drivers need to get their conn-specific info back.

2001-05-20 21:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (9fd7a546fa7d)

	* include/Makefile.global:
	Aded -DNO_LONGDBL for Irix

2001-05-19 22:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (bf769f53277a)

	* nsd/tclobj.c: new file.
	* include/ns.h, nsd/Makefile, nsd/nsd.h, nsd/nsmain.c, nsd/tclmisc.c,
	nsd/tclobj.c, win32/nsd/nsd.dsp:
	Implement Ns_Time Tcl_Obj type used by ns_time command; seems faster

2001-05-19 22:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (d6bdb70f1194)

	* nsd/tclhttp.c:
	(ns_http) switch to simple 1-second timeout for now

2001-05-19 22:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (bcd0be668b03)

	* nsd/tclshare.c:
	Updated comment

2001-05-18 13:29 +0100  Jim Davidson  <jgdavidson@aol.com>  (45a3227faa9d)

	* nsd/tclcmds.c, nsd/tclmisc.c:
	Fixed broken ns_time command, making it Tcl_Obj based as well

2001-05-10 10:57 +0100  Jim Davidson  <jgdavidson@aol.com>  (25fc080681da)

	* nsd/return.c:
	Switched to new Ns_DStringVPrintf from vsnprintf for
	Ns_ConnPrintfHeader

2001-05-10 10:57 +0100  Jim Davidson  <jgdavidson@aol.com>  (d2f88f2d14ef)

	* nsd/connio.c:
	Fixed compile bug

2001-05-10 10:57 +0100  Jim Davidson  <jgdavidson@aol.com>  (2721adc7898e)

	* nsd/dsprintf.c:
	Made LONGDBL support optional, turned off by NO_LONGDBL define

2001-05-10 09:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (0c0e20da6ff7)

	* include/nsthread.h, nsd/exec.c, nsd/nsconf.c, nsd/nsconf.h,
	nsd/nsd.h, thread/fork.c:
	Added option for using the ill-advised vfork, disabled by default

2001-05-10 09:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (a6c45a238711)

	* nsd/form.c:
	Fix compile warning

2001-05-10 09:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (0e9f1ae40fe8)

	* include/ns.h, nsd/sock.c:
	Added Ns_SockConnect2() API's for local address/port binding

2001-05-10 09:52 +0100  Jim Davidson  <jgdavidson@aol.com>  (725de34f4c17)

	* nsd/nsmain.c:
	Removed undocumented -q (quieter) option

2001-05-07 22:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (aacc7dbf710f)

	* nsd/tclenv.c:
	Added check for NO__ENVIRON

2001-05-07 22:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (35ca8badcf57)

	* nsd/driver.c:
	Fixed crash bug with null input

2001-05-07 22:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (acf8b300fa46)

	* include/Makefile.global:
	Added -DNO__ENVIRON where needed and cleaned up handling of CC
	options

2001-05-02 16:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (15413a154918)

	* include/Makefile.global, include/ns.h:
	Fix compile bugs with Tcl library and 64 bit

2001-05-02 16:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (0e5efe5ca56e)

	* nsd/log.c, nsd/nsconf.c, nsd/nsconf.h, nsd/nsd.h, nsd/nsmain.c,
	nsd/tls.c:
	Added log buffering, Notice suppression, arbitrary severity levels,
	and per-thread Ns_LogTime buffer caches

2001-05-02 16:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (31d716391dcf)

	* nsd/dsprintf.c: new file.
	* nsd/Makefile, nsd/dsprintf.c, nsd/dstring.c, win32/nsd/nsd.dsp:
	Implemented Ns_DStringVPrintf directly instead of through cheap
	vsnprintf

2001-05-02 16:48 +0100  Jim Davidson  <jgdavidson@aol.com>  (d06fce46a7ff)

	* include/ns.h:
	Added Ns_DStringVPrintf, restored Dev log level, and cleaned up type
	defs for 64-bit ints

2001-04-28 21:48 +0100  Dossy Shiobara  <dossy@panoptic.com>  (b089f2982b5c)

	* nsd/tclmisc.c:
	Add mutex to (perhaps futilely) prevent env(TZ) from getting
	clobbered

2001-04-27 01:17 +0100  Jim Davidson  <jgdavidson@aol.com>  (5b5d09715be0)

	* nsd/connio.c:
	Added back Ns_ConnReadLine and Ns_ConnReadHeaders for backwards
	compatibility

2001-04-27 01:03 +0100  Jim Davidson  <jgdavidson@aol.com>  (8295b022354f)

	* include/Makefile.global:
	Switched to gcc -shared link on Solaris by default

2001-04-26 19:43 +0100  Jim Davidson  <jgdavidson@aol.com>  (1a2b2d1b7f0e)

	* nscgi/nscgi.c:
	Switched to new Ns_ConnQueueHeaders() from Ns_ConnFlushHeaders() API

2001-04-26 19:42 +0100  Jim Davidson  <jgdavidson@aol.com>  (62c7fc90cb68)

	* include/ns.h, include/nsthread.h, nsd/connio.c, nsssl/nsssl.c:
	Changed Ns_Buf definition to match Unix or NT directly

2001-04-26 19:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (12794ccaa071)

	* nsd/adprequest.c, nsd/connio.c, nsd/nsd.h, nsd/queue.c,
	nsd/return.c, nsd/tclresp.c:
	Added support for queueing content to be sent instead of sending
	immediately, used by Ns_ConnQueueContent().

2001-04-26 19:40 +0100  Jim Davidson  <jgdavidson@aol.com>  (7b623f9b84c1)

	* nsd/driver.c, nssock/nssock.c:
	Moved responsibility for waiting into driver

2001-04-26 01:11 +0100  Dossy Shiobara  <dossy@panoptic.com>  (c72f7db15221)

	* tests/api/ns_localtime.adp: new file.
	* ChangeLog, nsd/tclmisc.c, tests/api/ns_localtime.adp:
	Implemented bug #418890: ns_localtime should accept timezone

2001-04-25 23:31 +0100  Jim Davidson  <jgdavidson@aol.com>  (7c121e02a581)

	* nsd/nsd.h, nsd/tclhttp.c, nsd/tclmisc.c:
	Enhanced ns_time to support high resolution Ns_Time's and updated
	ns_http to use them

2001-04-25 22:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (3edbdf7dbbae)

	* nsd/server.c:
	Moved ns_http requests to per-interp from per-server

2001-04-25 22:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (e08d59034f2b)

	* nsd/dbtcl.c, nsd/nsd.h, nsd/tclinit.c, nsd/tclset.c:
	Made ns_db cleanup and ns_set cleanup consistant with ns_http
	cleanup

	i.e., no additional and unnecessary cleanup at thread exit.

2001-04-25 22:05 +0100  Jim Davidson  <jgdavidson@aol.com>  (ecd5ca0d218a)

	* nsd/init.tcl, nsd/tclhttp.c:
	Add "ns_http cleanup"

2001-04-25 20:56 +0100  Jim Davidson  <jgdavidson@aol.com>  (ddaa8600ae7f)

	* nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/server.c, nsd/tclhttp.c:
	Removed "ns_http get" option - only async mode

2001-04-25 01:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (1a8c0ca0e781)

	* nsd/tclvar.c, nsd/tclxkeylist.c:
	Fix incorrect RCSID usage in imported keyed-list code

2001-04-25 01:25 +0100  Jim Davidson  <jgdavidson@aol.com>  (36a06d97781c)

	* nsd/tclhttp.c: new file.
	* nsd/Makefile, nsd/tclcmds.c, nsd/tclhttp.c, win32/nsd/nsd.dsp:
	Add new ns_http command

2001-04-24 21:31 +0100  Jim Davidson  <jgdavidson@aol.com>  (536f2445ee52)

	* thread/pthread.cpp:
	Fixed stupid crash bug in pthread Ns_CondDestroy

2001-04-24 21:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (2c8d1075735f)

	* include/Makefile.global, nsd/tclenv.c, thread/pthread.cpp:
	Minor edits to fix compile bugs on DEC Unix

2001-04-24 21:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (954dccd8e7f6)

	* Makefile:
	Build fix: Tcl library copy bug

2001-04-24 20:43 +0100  Jim Davidson  <jgdavidson@aol.com>  (a378964ed30f)

	* nsssl/x509.c:
	Updated to use Ns_Cs instead of Ns_CriticalSection stuff

2001-04-24 20:42 +0100  Jim Davidson  <jgdavidson@aol.com>  (79ac5f6a2435)

	* nsd/fastpath.c:
	Undef'ed Tcl's panic() on OS/X to avoid compile bug

2001-04-24 20:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (0a5d61013df6)

	* thread/Makefile:
	Added RANLIB

2001-04-24 19:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (1dcf478111aa)

	* win32/cgitest/cgitest.dsp, win32/main/main.dsp,
	win32/nscgi/nscgi.dsp, win32/nscp/nscp.dsp, win32/nsd/nsd.dsp,
	win32/nslog/nslog.dsp, win32/nsodbc/nsodbc.dsp,
	win32/nsperm/nsperm.dsp, win32/nssock/nssock.dsp,
	win32/nsssl/nsssl.dsp, win32/nstcl/nstcl.dsp,
	win32/nsthread/nsthread.dsp, win32/threadtest/threadtest.dsp:
	Updated link library settings for winsock2

2001-04-24 19:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (57c70fb8c28f)

	* nsd/nsmain.c:
	Removed unused variables

2001-04-24 18:13 +0100  Jim Davidson  <jgdavidson@aol.com>  (09c21906f4fe)

	* tcl7.6/Makefile, tcl7.6/README-aolserver.txt, tcl7.6/compat/README,
	tcl7.6/compat/dirent.h, tcl7.6/compat/dirent2.h,
	tcl7.6/compat/dlfcn.h, tcl7.6/compat/fixstrtod.c,
	tcl7.6/compat/float.h, tcl7.6/compat/getcwd.c,
	tcl7.6/compat/gettod.c, tcl7.6/compat/license.terms,
	tcl7.6/compat/limits.h, tcl7.6/compat/opendir.c,
	tcl7.6/compat/stdlib.h, tcl7.6/compat/strftime.c,
	tcl7.6/compat/string.h, tcl7.6/compat/strncasecmp.c,
	tcl7.6/compat/strstr.c, tcl7.6/compat/strtod.c,
	tcl7.6/compat/strtol.c, tcl7.6/compat/strtoul.c,
	tcl7.6/compat/tclErrno.h, tcl7.6/compat/tmpnam.c,
	tcl7.6/compat/unistd.h, tcl7.6/compat/waitpid.c,
	tcl7.6/generic/README, tcl7.6/generic/panic.c,
	tcl7.6/generic/regexp.c, tcl7.6/generic/tcl.h,
	tcl7.6/generic/tclAsync.c, tcl7.6/generic/tclBasic.c,
	tcl7.6/generic/tclCkalloc.c, tcl7.6/generic/tclClock.c,
	tcl7.6/generic/tclCmdAH.c, tcl7.6/generic/tclCmdIL.c,
	tcl7.6/generic/tclCmdMZ.c, tcl7.6/generic/tclDate.c,
	tcl7.6/generic/tclEnv.c, tcl7.6/generic/tclEvent.c,
	tcl7.6/generic/tclExpr.c, tcl7.6/generic/tclFCmd.c,
	tcl7.6/generic/tclFHandle.c, tcl7.6/generic/tclFileName.c,
	tcl7.6/generic/tclGet.c, tcl7.6/generic/tclGetDate.y,
	tcl7.6/generic/tclHash.c, tcl7.6/generic/tclHistory.c,
	tcl7.6/generic/tclIO.c, tcl7.6/generic/tclIOCmd.c,
	tcl7.6/generic/tclIOSock.c, tcl7.6/generic/tclIOUtil.c,
	tcl7.6/generic/tclInt.h, tcl7.6/generic/tclInterp.c,
	tcl7.6/generic/tclLink.c, tcl7.6/generic/tclLoad.c,
	tcl7.6/generic/tclLoadNone.c, tcl7.6/generic/tclMain.c,
	tcl7.6/generic/tclNotify.c, tcl7.6/generic/tclParse.c,
	tcl7.6/generic/tclPatch.h, tcl7.6/generic/tclPkg.c,
	tcl7.6/generic/tclPort.h, tcl7.6/generic/tclPosixStr.c,
	tcl7.6/generic/tclPreserve.c, tcl7.6/generic/tclProc.c,
	tcl7.6/generic/tclRegexp.h, tcl7.6/generic/tclTest.c,
	tcl7.6/generic/tclUtil.c, tcl7.6/generic/tclVar.c,
	tcl7.6/generic/tclVar.c-, tcl7.6/unix/Makefile.in,
	tcl7.6/unix/README, tcl7.6/unix/configure, tcl7.6/unix/configure.in,
	tcl7.6/unix/install-sh, tcl7.6/unix/ldAix, tcl7.6/unix/mkLinks,
	tcl7.6/unix/porting.notes, tcl7.6/unix/tclAppInit.c,
	tcl7.6/unix/tclConfig.sh.in, tcl7.6/unix/tclLoadAix.c,
	tcl7.6/unix/tclLoadAout.c, tcl7.6/unix/tclLoadDl.c,
	tcl7.6/unix/tclLoadDl2.c, tcl7.6/unix/tclLoadDld.c,
	tcl7.6/unix/tclLoadNext.c, tcl7.6/unix/tclLoadOSF.c,
	tcl7.6/unix/tclLoadShl.c, tcl7.6/unix/tclMtherr.c,
	tcl7.6/unix/tclUnixChan.c, tcl7.6/unix/tclUnixFCmd.c,
	tcl7.6/unix/tclUnixFile.c, tcl7.6/unix/tclUnixInit.c,
	tcl7.6/unix/tclUnixNotfy.c, tcl7.6/unix/tclUnixPipe.c,
	tcl7.6/unix/tclUnixPort.h, tcl7.6/unix/tclUnixSock.c,
	tcl7.6/unix/tclUnixTest.c, tcl7.6/unix/tclUnixTime.c: deleted file.
	* tcl7.6/Makefile, tcl7.6/README-aolserver.txt, tcl7.6/compat/README,
	tcl7.6/compat/dirent.h, tcl7.6/compat/dirent2.h,
	tcl7.6/compat/dlfcn.h, tcl7.6/compat/fixstrtod.c,
	tcl7.6/compat/float.h, tcl7.6/compat/getcwd.c,
	tcl7.6/compat/gettod.c, tcl7.6/compat/license.terms,
	tcl7.6/compat/limits.h, tcl7.6/compat/opendir.c,
	tcl7.6/compat/stdlib.h, tcl7.6/compat/strftime.c,
	tcl7.6/compat/string.h, tcl7.6/compat/strncasecmp.c,
	tcl7.6/compat/strstr.c, tcl7.6/compat/strtod.c,
	tcl7.6/compat/strtol.c, tcl7.6/compat/strtoul.c,
	tcl7.6/compat/tclErrno.h, tcl7.6/compat/tmpnam.c,
	tcl7.6/compat/unistd.h, tcl7.6/compat/waitpid.c,
	tcl7.6/generic/README, tcl7.6/generic/panic.c,
	tcl7.6/generic/regexp.c, tcl7.6/generic/tcl.h,
	tcl7.6/generic/tclAsync.c, tcl7.6/generic/tclBasic.c,
	tcl7.6/generic/tclCkalloc.c, tcl7.6/generic/tclClock.c,
	tcl7.6/generic/tclCmdAH.c, tcl7.6/generic/tclCmdIL.c,
	tcl7.6/generic/tclCmdMZ.c, tcl7.6/generic/tclDate.c,
	tcl7.6/generic/tclEnv.c, tcl7.6/generic/tclEvent.c,
	tcl7.6/generic/tclExpr.c, tcl7.6/generic/tclFCmd.c,
	tcl7.6/generic/tclFHandle.c, tcl7.6/generic/tclFileName.c,
	tcl7.6/generic/tclGet.c, tcl7.6/generic/tclGetDate.y,
	tcl7.6/generic/tclHash.c, tcl7.6/generic/tclHistory.c,
	tcl7.6/generic/tclIO.c, tcl7.6/generic/tclIOCmd.c,
	tcl7.6/generic/tclIOSock.c, tcl7.6/generic/tclIOUtil.c,
	tcl7.6/generic/tclInt.h, tcl7.6/generic/tclInterp.c,
	tcl7.6/generic/tclLink.c, tcl7.6/generic/tclLoad.c,
	tcl7.6/generic/tclLoadNone.c, tcl7.6/generic/tclMain.c,
	tcl7.6/generic/tclNotify.c, tcl7.6/generic/tclParse.c,
	tcl7.6/generic/tclPatch.h, tcl7.6/generic/tclPkg.c,
	tcl7.6/generic/tclPort.h, tcl7.6/generic/tclPosixStr.c,
	tcl7.6/generic/tclPreserve.c, tcl7.6/generic/tclProc.c,
	tcl7.6/generic/tclRegexp.h, tcl7.6/generic/tclTest.c,
	tcl7.6/generic/tclUtil.c, tcl7.6/generic/tclVar.c,
	tcl7.6/generic/tclVar.c-, tcl7.6/unix/Makefile.in,
	tcl7.6/unix/README, tcl7.6/unix/configure, tcl7.6/unix/configure.in,
	tcl7.6/unix/install-sh, tcl7.6/unix/ldAix, tcl7.6/unix/mkLinks,
	tcl7.6/unix/porting.notes, tcl7.6/unix/tclAppInit.c,
	tcl7.6/unix/tclConfig.sh.in, tcl7.6/unix/tclLoadAix.c,
	tcl7.6/unix/tclLoadAout.c, tcl7.6/unix/tclLoadDl.c,
	tcl7.6/unix/tclLoadDl2.c, tcl7.6/unix/tclLoadDld.c,
	tcl7.6/unix/tclLoadNext.c, tcl7.6/unix/tclLoadOSF.c,
	tcl7.6/unix/tclLoadShl.c, tcl7.6/unix/tclMtherr.c,
	tcl7.6/unix/tclUnixChan.c, tcl7.6/unix/tclUnixFCmd.c,
	tcl7.6/unix/tclUnixFile.c, tcl7.6/unix/tclUnixInit.c,
	tcl7.6/unix/tclUnixNotfy.c, tcl7.6/unix/tclUnixPipe.c,
	tcl7.6/unix/tclUnixPort.h, tcl7.6/unix/tclUnixSock.c,
	tcl7.6/unix/tclUnixTest.c, tcl7.6/unix/tclUnixTime.c:
	Remove old versions of Tcl

2001-04-24 18:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (05575dfaf653)

	* win32/nsssl/nsssl.dsp:
	Win32 build fix: update nsssl dependecies

2001-04-24 18:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (4245f11847fb)

	* nsssl/ssl.c, nsssl/ssl.h:
	Added buffered raw socket read code

2001-04-23 22:30 +0100  Jim Davidson  <jgdavidson@aol.com>  (671160b254d9)

	* nssock/nssock.c:
	Fixed compile bugs in new integrated socket driver

2001-04-23 22:27 +0100  Jim Davidson  <jgdavidson@aol.com>  (6771c68023e1)

	* nsd/fd.c:
	Fixed compile bug: missing brace

2001-04-23 22:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (8bf77530daa5)

	* Makefile:
	Build fix: add nsssl as separate module

2001-04-23 22:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (5bbc73fa0566)

	* nsd/Makefile:
	Build fix: add connio.c, remove keepalive.c

2001-04-23 22:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (b7d9d307ad9d)

	* nscgi/nscgi.c:
	Use new Ns_Get/ReleaseTemp() API for temp fd management

2001-04-23 22:18 +0100  Jim Davidson  <jgdavidson@aol.com>  (1d8f68d0afe6)

	* win32/aolserver.dsw:
	Win32 build fix: add nsssl as a dependency

2001-04-23 22:18 +0100  Jim Davidson  <jgdavidson@aol.com>  (f4d327e0abb9)

	* win32/main/main.dsp:
	Win32 build fix: add file copy post-builds for ssl

2001-04-23 22:17 +0100  Jim Davidson  <jgdavidson@aol.com>  (c594f86dbbc7)

	* win32/nsd/nsd.dsp:
	Win32 build fix: update to winsock2, add connio.c, remove
	keepalive.c

2001-04-23 22:17 +0100  Jim Davidson  <jgdavidson@aol.com>  (33aa6e599511)

	* win32/nssock/nssock.dsp, win32/nsssl/nsssl.dsp:
	Win32 build fix: separate out source for sock and ssl

2001-04-23 22:16 +0100  Jim Davidson  <jgdavidson@aol.com>  (98b949c2513c)

	* tcl/form.tcl:
	Updated to use new "ns_conn files" and "ns_conn copy" API's

2001-04-23 22:16 +0100  Jim Davidson  <jgdavidson@aol.com>  (a4e71238a89f)

	* nsd/connio.c: new file.
	* include/ns.h, nsd/connio.c, nsd/driver.c, nsd/nsd.h, nsd/queue.c,
	nsd/request.c, nsd/server.c:
	New integrated socket driver implementation

2001-04-23 22:15 +0100  Jim Davidson  <jgdavidson@aol.com>  (0e7b724af850)

	* nsd/nsmain.c:
	Removed KeepAlive init/stop

2001-04-23 22:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (504a1344ff0e)

	* nsd/return.c:
	Eliminated connPtr->keepAlive in favor of NS_CONN_KEEPALIVE flag bit

2001-04-23 22:13 +0100  Jim Davidson  <jgdavidson@aol.com>  (9bc42a3bcb22)

	* nsd/form.c:
	Added code to save file name, offset, and length for multipart forms
	in connPtr->files dstring list

2001-04-23 22:13 +0100  Jim Davidson  <jgdavidson@aol.com>  (e1112acbb66f)

	* nsd/conn.c:
	Moved I/O related API's to connio.c and added "ns_conn files" and
	"ns_conn copy" commands

2001-04-23 22:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (96f3a5246ce7)

	* nsd/op.c:
	Eliminated needless flush content calls

2001-04-23 22:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (94709d98f103)

	* nsd/keepalive.c: deleted file.
	* nsd/keepalive.c:
	Keepalive integrated into driver.c

2001-04-23 22:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (95fbfab7800a)

	* nsd/keepalive.c:
	Fixed bug in unsigned compare of fd/sock on NT

2001-04-23 22:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (817c41cd1e74)

	* nsd/fd.c:
	Added Ns_GetTemp/Ns_ReleaseTemp API

2001-04-23 22:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (46f302f4072e)

	* nssock/Makefile.sock, nssock/Makefile.ssl, nssock/certfile-
	sample.pem, nssock/keyfile-sample.pem, nssock/keygen.tcl,
	nssock/nsssl.c, nssock/nsssl.html, nssock/sock.cpp, nssock/ssl.c,
	nssock/ssl.h, nssock/ssltcl.c, nssock/ssltcl.h, nssock/t_stdlib.c,
	nssock/x509.c, nssock/x509.h: deleted file.
	* nssock/Makefile, nssock/Makefile.sock, nssock/Makefile.ssl, nssock
	/certfile-sample.pem, nssock/keyfile-sample.pem, nssock/keygen.tcl,
	nssock/nssock.c, nssock/nsssl.c, nssock/nsssl.html, nssock/sock.cpp,
	nssock/ssl.c, nssock/ssl.h, nssock/ssltcl.c, nssock/ssltcl.h,
	nssock/t_stdlib.c, nssock/x509.c, nssock/x509.h:
	New simple socket driver

2001-04-23 22:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (8e65d92ba1c8)

	* nsssl/Makefile, nsssl/certfile-sample.pem, nsssl/keyfile-sample.pem,
	nsssl/keygen.tcl, nsssl/nsssl.c, nsssl/nsssl.html, nsssl/ssl.c,
	nsssl/ssl.h, nsssl/ssltcl.c, nsssl/ssltcl.h, nsssl/t_stdlib.c,
	nsssl/x509.c, nsssl/x509.h: new file.
	* nsssl/Makefile, nsssl/certfile-sample.pem, nsssl/keyfile-sample.pem,
	nsssl/keygen.tcl, nsssl/nsssl.c, nsssl/nsssl.html, nsssl/ssl.c,
	nsssl/ssl.h, nsssl/ssltcl.c, nsssl/ssltcl.h, nsssl/t_stdlib.c,
	nsssl/x509.c, nsssl/x509.h:
	New SSL socket driver

2001-04-23 22:02 +0100  Jim Davidson  <jgdavidson@aol.com>  (50626f80c8fa)

	* include/nsthread.h, win32/nstcl/nstcl.dsp:
	Switched to Winsock2

2001-04-13 23:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (e43381aadd3b)

	* nsd/form.c, nsd/tclcmds.c:
	Removed the odd ns_get_mulitpart_formdata command

	C code now handles small urlencoded or multipart form. TODO: Handle
	actual file widget data.

2001-04-13 20:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (cac5876e3dc1)

	* include/Makefile.global, win32/nstcl/Makefile,
	win32/nstcl/nstcl.dsp:
	Updated to Tcl8.3.3

2001-04-13 20:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (a4d1df6b5c7c)

	* include/ns.h, nsd/filter.c:
	Renamed undocumented Ns_RegisterCleanup to Ns_RegisterConnCleanup
	for compatibility with 3.x

2001-04-12 18:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (169da73cc2f0)

	* win32/nsd/Makefile, win32/nsd/nsd.dsp:
	Added tclrequest.obj, tclatclose.obj, removed tclop.obj

2001-04-12 18:53 +0100  Jim Davidson  <jgdavidson@aol.com>  (8fdb42572467)

	* nsd/tclatclose.c, nsd/tclrequest.c: new file.
	* nsd/tclop.c: deleted file.
	* nsd/Makefile, nsd/adpparse.c, nsd/adprequest.c, nsd/tclatclose.c,
	nsd/tclcmds.c, nsd/tclinit.c, nsd/tclop.c, nsd/tclrequest.c:
	Added support for ns_register_adp command to register ADP pages much
	like procs

2001-04-12 18:50 +0100  Jim Davidson  <jgdavidson@aol.com>  (d8621cc5183f)

	* nsd/encoding.c:
	Removed unused LoadEncoding() function

2001-04-11 00:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (578b895b16a5)

	* nsd/filter.c:
	Modified to strdup method and url args

2001-04-11 00:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (d466d7d60db6)

	* nsd/conn.c:
	Modified Ns_ConnCopyToDString to read directly into dstring,
	avoiding data copy and possible dstring resize

2001-04-07 00:52 +0100  Jim Davidson  <jgdavidson@aol.com>  (5fbb5e0eb90c)

	* nsd/encoding.c:
	Ns_GetFileEncoding() now uses the [ns/encoding] config section only

	Ns_GetCharsetEncoding() only needs to know about charset names which
	differ from Tcl encoding names (e.g., iso-8859-1).

2001-04-07 00:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (9d302fbbf88c)

	* nsd/dstring.c, nsd/return.c:
	Fix for bug #411805: add missing null terminator to buffer

2001-04-02 23:52 +0100  Jim Davidson  <jgdavidson@aol.com>  (e093a622f2e4)

	* thread/time.c:
	Increased resolution of Ns_GetTime on Win32 and optimized diff and
	adj routines a bit

2001-04-02 21:33 +0100  Jim Davidson  <jgdavidson@aol.com>  (66ab0beb285a)

	* thread/tcl8x.c: deleted file.
	* thread/tcl8x.c:
	Fixed Unix compile bugs for nsthreads.c

2001-04-02 21:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (29539ac907c7)

	* thread/Makefile, win32/nstcl/nstcl.dsp, win32/nsthread/nsthread.dsp:
	Moved Tcl nsthreads support to Tcl generic source from nsthread
	library to resolve incorrect cleanup order of Tcl thread data blocks

2001-04-02 21:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (7b7a30361154)

	* nsd/encoding.c:
	Fixed crash bug with GetCharsetEncoding

2001-04-02 20:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (ff8281ce9a22)

	* nsd/adprequest.c:
	Removed NsAdpSetCharset and now use Ns_ConnSet/GetEncoding API's for
	form input and output

2001-04-02 20:39 +0100  Jim Davidson  <jgdavidson@aol.com>  (aa4a2c9f317d)

	* nsd/adpeval.c:
	Changed file reader to use encoding's as defined by
	Ns_GetFileEncoding

	i.e., based on the charset= parameter for the corresponding
	mimetype.

2001-04-02 20:39 +0100  Jim Davidson  <jgdavidson@aol.com>  (c263efb04d9d)

	* nsd/queue.c:
	Added cleanup of new input content buffer

2001-04-02 20:38 +0100  Jim Davidson  <jgdavidson@aol.com>  (de7d342a74ad)

	* nsd/nsconf.c:
	Added some comments

2001-04-02 20:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (2a42ae6773e2)

	* nsd/mimetypes.c:
	Added charset=iso-8859-1 for text/html types

2001-04-02 20:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (df6a213136c9)

	* nsd/adpcmds.c, nsd/tclcmds.c:
	Removed ns_adp_charset command

2001-04-02 20:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (b8b933d6c884)

	* nsd/conn.c, nsd/form.c:
	Added code to maintain input content buffer instead of dumping after
	parse into a form

2001-04-02 20:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (eebbd9dfd242)

	* include/ns.h, nsd/encoding.c:
	Added Ns_GetFile/Type/CharsetEncoding()

2001-04-02 20:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (d7340286440e)

	* nsd/nsd.h, nsd/nsmain.c, nsd/server.c:
	Moved init proc definitions back to nsd.h

2001-04-02 20:34 +0100  Jim Davidson  <jgdavidson@aol.com>  (a32f5f8a4ffd)

	* nsd/tclset.c:
	Minor formatting edits

2001-04-02 20:33 +0100  Jim Davidson  <jgdavidson@aol.com>  (f4da9fc88117)

	* nsd/tcljob.c:
	Added missing comment to job subsystem

2001-03-28 02:15 +0100  Jim Davidson  <jgdavidson@aol.com>  (109bebd7c8f0)

	* nscgi/nscgi.c:
	Updated to new result of Ns_GetEnvironment()

2001-03-28 02:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (9b4824a07da8)

	* include/ns.h, nsd/dstring.c, nsd/exec.c, nsd/tclenv.c:
	Added Ns_DStringAppendArgv(), used for Ns_GetEnvironment() and the
	process create code

2001-03-28 01:32 +0100  Jim Davidson  <jgdavidson@aol.com>  (bc9c1b92ac6e)

	* nsd/exec.c, nsd/tclenv.c:
	Minor compile bugs

2001-03-28 01:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (266289f445ea)

	* nsd/log.c, nsd/nsconf.c, nsd/nsd.h:
	Removed unused "Dev" Ns_Log level

2001-03-28 01:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (f1fc293d40f5)

	* nsd/server.c:
	Moved some external definitions of init functions out of nsd.h

2001-03-28 01:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (0ca4d410302d)

	* nsd/config.c, nsd/nsmain.c:
	Made argc, argv, and optind variables available in config script

2001-03-28 01:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (fb3bcbeaa068)

	* include/ns.h, nsd/conn.c:
	Made the Ns_LocationProc virtual server specific

2001-03-27 22:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (3da3008e2605)

	* include/ns.h, nscgi/nscgi.c, nsd/exec.c, nsd/tclenv.c:
	Added Ns_GetEnvironment used by CGI and nsd exec code to more safely
	copy the environ strings

2001-03-27 22:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (d9a6d13756ee)

	* include/Makefile.global:
	Added USE_SPROC check to optionally compile with pthreads on SGI

2001-03-27 18:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (be2d12bf6f54)

	* nsd/exec.c:
	Temp fix for execve(..., envp) - need to fix in coordinated way with
	tclenv.c

2001-03-27 17:45 +0100  Jim Davidson  <jgdavidson@aol.com>  (6f81666144fa)

	* thread/sproc.cpp:
	Minor comment corrections

2001-03-27 17:45 +0100  Jim Davidson  <jgdavidson@aol.com>  (b84190bbedb2)

	* nsd/adpeval.c, nsd/adprequest.c, nsd/nsd.h:
	Move response buffer from per-interp adp context to stack of
	Ns_AdpRequest

2001-03-27 17:44 +0100  Jim Davidson  <jgdavidson@aol.com>  (03217d247ea7)

	* nsd/adpcmds.c:
	Removed ADP_OVERFLOW exception (handled in Tcl now)

2001-03-27 17:44 +0100  Jim Davidson  <jgdavidson@aol.com>  (2bbcd558a5f6)

	* nsd/exec.c:
	Use execve() all the time to avoid Solaris deadlock bug

2001-03-27 17:42 +0100  Jim Davidson  <jgdavidson@aol.com>  (b4a48a61daa1)

	* include/ns.h, nsd/config.c:
	Implemented Ns_ConfigGetInt64() for Win32

2001-03-27 02:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (410cf4945cd9)

	* nsd/nsmain.c, nsd/win32.c:
	Fixed startup bugs when running in service mode

2001-03-27 01:59 +0100  Jim Davidson  <jgdavidson@aol.com>  (69b5e1110149)

	* nsd/config.c, nsd/nsd.h, nsd/nsmain.c, nsd/win32.c:
	Removed old .ini format config file support

2001-03-27 01:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (0ea10cc21d4a)

	* nsd/crypt.c:
	Made crypt code reentrant, eliminating the lock

2001-03-26 23:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (5361c6590238)

	* thread/tcl8x.c, thread/thread.c, thread/thread.h:
	Increased the Ns_CheckStack() min to 2k and added
	NsTclCheckStackSpace() for benefit of TclpCheckStackSpace() on Unix

2001-03-26 16:40 +0100  Jim Davidson  <jgdavidson@aol.com>  (3e2c192ed05d)

	* nsd/nsd.h:
	Updated NsInterp structure

2001-03-26 16:39 +0100  Jim Davidson  <jgdavidson@aol.com>  (ea52f8d8f9ef)

	* nsd/adpeval.c:
	Re-structed AdpFlush to ensure output encoding occurs in streaming
	or non-streaming mode

	Also, isolated and cleaned up the TclPro debugger eval code.

2001-03-26 16:34 +0100  Jim Davidson  <jgdavidson@aol.com>  (d3a9a0cdce90)

	* nsd/adprequest.c, nsd/queue.c, nsd/return.c, nsd/server.c:
	Removed the response and content dstrings from the conn, not ready
	for such use yet

2001-03-26 16:32 +0100  Jim Davidson  <jgdavidson@aol.com>  (3928f3864489)

	* nsd/dstring.c, nsd/nsconf.c, nsd/tls.c:
	Removed the weird Ns_DStringPop/Push interface

2001-03-24 18:21 +0000  Jim Davidson  <jgdavidson@aol.com>  (77e5856b47a8)

	* nscgi/nscgi.c:
	Manage dstrings directly instead of relying on Pop/Push API

2001-03-23 23:33 +0000  Jim Davidson  <jgdavidson@aol.com>  (f61ffd147748)

	* nscgi/nscgi.c:
	Fixed dstring buffer code to use Tcl_DStrings instead of hidden addr
	element of Ns_DStrings

2001-03-23 23:17 +0000  Jim Davidson  <jgdavidson@aol.com>  (c297aab540f1)

	* include/ns.h, nsd/dstring.c:
	Made Ns_DStrings macros for Tcl_DStrings

2001-03-23 19:12 +0000  Jim Davidson  <jgdavidson@aol.com>  (a583628f3101)

	* nsd/adprequest.c, nsd/return.c:
	Fixed bug with ADP streaming mode

2001-03-23 18:54 +0000  Jim Davidson  <jgdavidson@aol.com>  (f4355db05a8d)

	* nsd/adpeval.c, nsd/nsd.h:
	Removed adp.evalLevel no longer needed

2001-03-23 18:36 +0000  Jim Davidson  <jgdavidson@aol.com>  (dd70bf082eee)

	* nsd/adprequest.c:
	Ensured Expires header, if configured on, is set even in ADP stream
	mode

2001-03-23 18:33 +0000  Jim Davidson  <jgdavidson@aol.com>  (4581f0e5938b)

	* nsd/return.c:
	Added check to avoid sending headers twice

2001-03-23 18:32 +0000  Jim Davidson  <jgdavidson@aol.com>  (204e3c195724)

	* nsd/encoding.c, nsd/tclimg.c:
	Minor formatting change

2001-03-23 18:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (7878120ce7d2)

	* nsd/adpcmds.c, nsd/tclcmds.c:
	Removed PutsCmd, replaced by PutsObjCmd (ns_adp_puts/ns_adp_append)

2001-03-23 17:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (fbe17f8bfa07)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/adprequest.c, nsd/conn.c,
	nsd/nsd.h, nsd/queue.c, nsd/return.c, nsd/server.c:
	Moved ADP output to per-Conn content dstring instead of per-interp
	adp structures

2001-03-23 17:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (877994f06a74)

	* include/ns.h:
	Added NS_CONN_READHDRS and NS_CONN_SENTHDRS flags

2001-03-23 00:05 +0000  Jim Davidson  <jgdavidson@aol.com>  (92225ccb7bad)

	* nsd/tcljob.c:
	Fixed bug with "unknown command" error msg

2001-03-22 21:39 +0000  Jim Davidson  <jgdavidson@aol.com>  (486d9c039da8)

	* nsd/Makefile:
	Build fix: added uuencode.o, tclimg.o, form.o; removed httu.o

2001-03-22 21:39 +0000  Jim Davidson  <jgdavidson@aol.com>  (1cdf268a7a77)

	* nsd/uuencode.c:
	Silenced compiler warning

2001-03-22 21:32 +0000  Jim Davidson  <jgdavidson@aol.com>  (4685a9bd6c95)

	* nsd/queue.c:
	Updated code comment

2001-03-22 21:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (e1e022ced9b6)

	* win32/nsd/nsd.dsp:
	Win32 build fix: added form.c, tclimg.c, uuencode.c; removed htuu.c

2001-03-22 21:30 +0000  Jim Davidson  <jgdavidson@aol.com>  (97dbee3741d1)

	* nsd/form.c: new file.
	* nsd/conn.c, nsd/form.c, nsd/tclresp.c:
	Moved HTML form handling code to single file and cleaned up some
	functions

2001-03-22 21:29 +0000  Jim Davidson  <jgdavidson@aol.com>  (eda9c43f1a05)

	* nsd/tclimg.c: new file.
	* nsd/tclimg.c, nsd/tclmisc.c:
	Moved image commands to separate file

2001-03-22 21:28 +0000  Jim Davidson  <jgdavidson@aol.com>  (2d553ca0712a)

	* nsd/uuencode.c: new file.
	* nsd/htuu.c: deleted file.
	* nsd/htuu.c, nsd/uuencode.c:
	Rewrote the parser to avoid overrunning the input strings and first
	time initialization

2001-03-20 23:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (d94c3c99f503)

	* nsd/encoding.c:
	Added code for case-insensitive charset names

2001-03-20 21:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (6e74ec92a0ca)

	* nsd/encoding.c:
	Switched to loading Tcl_Encoding's on the fly

2001-03-19 15:48 +0000  Jim Davidson  <jgdavidson@aol.com>  (1c9ab40a167f)

	* win32/nsd/nsd.dsp, win32/nstcl/nstcl.dsp:
	Win32 build fix: add browse info support and encoding.c

2001-03-19 15:46 +0000  Jim Davidson  <jgdavidson@aol.com>  (37d312ca9cca)

	* nsd/encoding.c: new file.
	* include/ns.h, nsd/Makefile, nsd/adprequest.c, nsd/encoding.c,
	nsd/nsd.h:
	Added support for ADP output encoding based on content-type charset

2001-03-19 15:45 +0000  Jim Davidson  <jgdavidson@aol.com>  (b05038e6ad08)

	* nsd/urlencode.c:
	Switched to table drive algorithm for url-en/decoding

2001-03-19 15:45 +0000  Jim Davidson  <jgdavidson@aol.com>  (a13d8bd818f8)

	* nsd/nsmain.c:
	Added -l flag to set TCL_LIBRARY and call to NsInitEncodings

2001-03-19 15:44 +0000  Jim Davidson  <jgdavidson@aol.com>  (44c20b32e5a9)

	* nsd/adpparse.c:
	Added encoding to UTF based on file extension

2001-03-19 15:44 +0000  Jim Davidson  <jgdavidson@aol.com>  (4b6a45440334)

	* nsd/adpcmds.c:
	Added NsTclAdpPutsObjCmd, NsTclAdpAppendObjCmd, and
	NsTclAdpCharSetCmd

2001-03-19 15:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (947d2f6a1912)

	* nsd/tclcmds.c:
	Added support for Tcl_Obj based commands

2001-03-16 22:57 +0000  Jim Davidson  <jgdavidson@aol.com>  (964213aab4a4)

	* nsd/adpeval.c, nsd/nsd.h, nsd/server.c:
	Added support for reading files in alternate encodings, configured
	via file extension mappings in the ns/server/<server>/adp/encodings
	config section

2001-03-16 22:55 +0000  Jim Davidson  <jgdavidson@aol.com>  (da9e622ffd49)

	* nsd/tclinit.c:
	Added check for null itPtr before deferred cleanup procs

2001-03-16 22:22 +0000  Jim Davidson  <jgdavidson@aol.com>  (73f438c8231e)

	* nscp/nscp.c:
	Fixed no-login crash bug and switched to Tcl_RecordAndEval() for
	benefit of history mechanism (if enabled)

2001-03-16 20:48 +0000  Jim Davidson  <jgdavidson@aol.com>  (9ee4c3123975)

	* nsd/adpparse.c, nsd/tclset.c:
	New ADP parser with registered tag support

2001-03-16 20:47 +0000  Jim Davidson  <jgdavidson@aol.com>  (2832980aa747)

	* nsd/adp.c: deleted file.
	* nsd/adp.c:
	ADP functions moved to separate, more managable files

2001-03-15 15:52 +0000  Dossy Shiobara  <dossy@panoptic.com>  (f848e12a777a)

	* win32/main/Makefile: new file.
	* win32/main/Makefile:
	This makefile builds nsd8x.exe

2001-03-15 15:00 +0000  Dossy Shiobara  <dossy@panoptic.com>  (2caa860535fc)

	* ChangeLog, include/ns.h:
	typedef __int64 INT64 for Win32

2001-03-15 08:28 +0000  Dossy Shiobara  <dossy@panoptic.com>  (8ab7ad4bb8e3)

	* include/Makefile.win32, win32/nscgi/Makefile, win32/nscp/Makefile,
	win32/nsd/Makefile, win32/nslog/Makefile, win32/nsperm/Makefile,
	win32/nssock/Makefile, win32/nstcl/Makefile,
	win32/nsthread/Makefile: new file.
	* ChangeLog, include/Makefile.win32, win32/nscgi/Makefile,
	win32/nscp/Makefile, win32/nsd/Makefile, win32/nslog/Makefile,
	win32/nsperm/Makefile, win32/nssock/Makefile, win32/nstcl/Makefile,
	win32/nsthread/Makefile:
	Initial attempts at Makefiles suitable for NMAKE for building on
	Win32

2001-03-14 15:21 +0000  Jim Davidson  <jgdavidson@aol.com>  (454a166875ec)

	* thread/tcl8x.c:
	Fixed master lock typos

2001-03-14 15:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (f427f1687ab5)

	* nsd/dbinit.c, nsd/nsd.h, nsd/proc.c:
	Fixed bug with DB pool stale handle checking scheduled procs

2001-03-14 15:02 +0000  Jim Davidson  <jgdavidson@aol.com>  (8088c6e95ebb)

	* nsd/dns.c, nsd/nsconf.c:
	Switched DNS to # of entries based cache purging instead of time
	based

2001-03-14 15:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (29d411f8b790)

	* thread/tcl8x.c:
	Updated comments to reflect better handing of Tcl thread data blocks

2001-03-14 02:35 +0000  Jim Davidson  <jgdavidson@aol.com>  (8ce642b5e4ec)

	* thread/tcl8x.c:
	NT compile bug fixed

2001-03-14 02:30 +0000  Jim Davidson  <jgdavidson@aol.com>  (f8dbbf56fb12)

	* nsd/tclsock.c:
	Remove unref'ed variable

2001-03-14 02:29 +0000  Jim Davidson  <jgdavidson@aol.com>  (ef6e8f496035)

	* thread/tcl8x.c:
	Memory leak fix for TLS bug #406708

2001-03-14 02:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (f2ebd53e121d)

	* nsd/queue.c:
	Fixed potential memory overwrite with long auth headers

2001-03-14 01:40 +0000  Jim Davidson  <jgdavidson@aol.com>  (3fcefec6b28c)

	* nsd/dbtcl.c:
	Fixed memory leak with ns_db sp_getparams

2001-03-14 01:11 +0000  Jim Davidson  <jgdavidson@aol.com>  (e8a91c524e15)

	* nsd/dbtcl.c, nsd/nsd.h, nsd/server.c, nsd/tclinit.c, nsd/tclset.c:
	Cleaned up some elements of the NsInterp struct

2001-03-14 01:11 +0000  Jim Davidson  <jgdavidson@aol.com>  (bc9733be97ee)

	* nsd/init.tcl:
	Added ns_chan cleanup call in ns_cleanup

2001-03-14 01:10 +0000  Jim Davidson  <jgdavidson@aol.com>  (99aa5aaa716d)

	* nsd/tclcmds.c, nsd/tclfile.c:
	Remove ns_attach/ns_detach commands in favor of single ns_chan

2001-03-14 01:09 +0000  Jim Davidson  <jgdavidson@aol.com>  (1a1a5ad465f8)

	* nsd/tclsock.c:
	Attempt to use Tcl_Register/UnregisterChannel's instead of brute
	force ns_sockdup's

2001-03-13 23:04 +0000  Jim Davidson  <jgdavidson@aol.com>  (8c993e7210d5)

	* thread/reentrant.c:
	Fixed stupid bug of not set initialized to 1

2001-03-13 22:45 +0000  Jim Davidson  <jgdavidson@aol.com>  (cbbe7b98ffa2)

	* nsd/tclset.c:
	Fixed silly bug in new "ns_set array" command

2001-03-13 22:41 +0000  Jim Davidson  <jgdavidson@aol.com>  (30741a5a8954)

	* nsd/conn.c:
	Fixed silly ns_conn headers and ns_conn outputheaders bug

2001-03-13 22:28 +0000  Jim Davidson  <jgdavidson@aol.com>  (f58f11cda4b9)

	* nsd/tcljob.c: new file.
	* nsd/Makefile, nsd/nsd.h, nsd/server.c, nsd/tclcmds.c, nsd/tcljob.c,
	win32/nsd/nsd.dsp:
	Added the ns_job background script system

2001-03-13 22:28 +0000  Jim Davidson  <jgdavidson@aol.com>  (016daad2e3b7)

	* nsd/tclfile.c:
	Added the ns_detach and ns_attach commands

2001-03-13 16:48 +0000  Jim Davidson  <jgdavidson@aol.com>  (f5e246ca1601)

	* ChangeLog, README:
	Updated missing ChangeLog entry for 4.0

2001-03-13 16:46 +0000  Jim Davidson  <jgdavidson@aol.com>  (0fade9942a47)

	* nsd/dbutil.c, nsd/lisp.c, nsd/mimetypes.c, nsd/url.c,
	nsd/urlspace.c:
	Removed various assert()'s because, better or worse, we're not
	asserting things elsewhere

2001-03-13 16:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (507ad390da63)

	* nsd/cls.c: new file.
	* include/ns.h, nsd/Makefile, nsd/cls.c, nsd/nsd.h, nsd/queue.c:
	Added connection local storage (Ns_Cls) API much like thread local
	storage

2001-03-13 02:06 +0000  Scott S. Goodwin  <scott@scottg.net>  (a2bee9ae5fd4)

	* ChangeLog, nsd/nsmain.c:
	Fix segfault when using -g <group> flag

2001-03-12 22:23 +0000  Jim Davidson  <jgdavidson@aol.com>  (b4a383af2374)

	* nsd/Makefile, nsperm/nsperm.c:
	Minor edits to fix compile probs

2001-03-12 22:10 +0000  Jim Davidson  <jgdavidson@aol.com>  (74209d4d7494)

	* Makefile:
	Removed Tcl 7.6

2001-03-12 22:07 +0000  Jim Davidson  <jgdavidson@aol.com>  (1ff902577ccf)

	* tcl/namespace.tcl: deleted file.
	* tcl/namespace.tcl:
	Functionality moved to nsd/init.tcl

2001-03-12 22:06 +0000  Jim Davidson  <jgdavidson@aol.com>  (bb74c58d9a8f)

	* tcl/adp.tcl, tcl/compat.tcl: new file.
	* tcl/adp.tcl, tcl/compat.tcl:
	More new code for 4.0

2001-03-12 22:06 +0000  Jim Davidson  <jgdavidson@aol.com>  (386748e21d96)

	* nsd/adpcmds.c, nsd/adpeval.c, nsd/adpparse.c, nsd/adprequest.c,
	nsd/driver.c, nsd/info.c, nsd/init.tcl, nsd/queue.c, nsd/server.c,
	nsd/tclshare.c, nsd/tls.c, nsd/win32.c: new file.
	* nsd/adpfancy.c, nsd/drv.c, nsd/id.c, nsd/nswin32.c, nsd/serv.c,
	nsd/tclinvoke.cpp, nsd/tclnsshare.cpp, nsd/tclstats.c,
	nsd/tclstub76.c, nsd/tclstub8x.c, nsd/tclstubs.cpp: deleted file.
	* nsd/Makefile, nsd/adpcmds.c, nsd/adpeval.c, nsd/adpfancy.c,
	nsd/adpparse.c, nsd/adprequest.c, nsd/auth.c, nsd/config.c,
	nsd/conn.c, nsd/dbdrv.c, nsd/dbinit.c, nsd/dbtcl.c, nsd/driver.c,
	nsd/drv.c, nsd/dstring.c, nsd/fastpath.c, nsd/filter.c, nsd/id.c,
	nsd/info.c, nsd/init.tcl, nsd/keepalive.c, nsd/modload.c,
	nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c, nsd/nswin32.c, nsd/op.c,
	nsd/pidfile.c, nsd/proc.c, nsd/queue.c, nsd/random.c, nsd/return.c,
	nsd/serv.c, nsd/server.c, nsd/str.c, nsd/tclcmds.c, nsd/tclconf.c,
	nsd/tclfile.c, nsd/tclinit.c, nsd/tclinvoke.cpp, nsd/tclmisc.c,
	nsd/tclnsshare.cpp, nsd/tclop.c, nsd/tclresp.c, nsd/tclsched.c,
	nsd/tclset.c, nsd/tclshare.c, nsd/tclsock.c, nsd/tclstats.c,
	nsd/tclstub76.c, nsd/tclstub8x.c, nsd/tclstubs.cpp, nsd/tclthread.c,
	nsd/tclvar.c, nsd/tls.c, nsd/unix.c, nsd/urlopen.c, nsd/urlspace.c,
	nsd/win32.c:
	Updated to first 4.0 release

2001-03-12 22:05 +0000  Jim Davidson  <jgdavidson@aol.com>  (1464dba62acc)

	* include/tcl76.h, include/tcl83.h: deleted file.
	* include/Makefile.global, include/ns.h, include/tcl.h,
	include/tcl76.h, include/tcl83.h:
	Import Tcl 8.3 source code

2001-03-12 22:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (3c2ae6e738a6)

	* win32/cgitest/cgitest.dsp, win32/main/main.dsp,
	win32/nscgi/nscgi.dsp, win32/nscp/nscp.dsp, win32/nsd/nsd.dsp,
	win32/nslog/nslog.dsp, win32/nsodbc/nsodbc.dsp,
	win32/nsperm/nsperm.dsp, win32/nssock/nssock.dsp,
	win32/nsssl/nsssl.dsp, win32/nstcl/nstcl.dsp,
	win32/nsthread/nsthread.dsp, win32/threadtest/threadtest.dsp:
	Win32 build: updated CFLAGS to include TCL_THREADS=1 everywhere

2001-03-12 22:01 +0000  Jim Davidson  <jgdavidson@aol.com>  (c059c6baa11e)

	* nsperm/nsperm.c:
	Made nsperm virtual server safe and generally simplified the code

	Use a reader/writer lock to avoid the skiplocks stuff and better
	reusing code. However, the logic is likely broken now - needs to be
	checked.

2001-03-12 22:00 +0000  Jim Davidson  <jgdavidson@aol.com>  (fc595ae72dd7)

	* nscp/nscp.c:
	Made nscp virtual-server safe and no option for Ns_AuthorizeUser API
	which was removed in 4.0

2001-03-12 21:59 +0000  Jim Davidson  <jgdavidson@aol.com>  (5c6044edf985)

	* nscgi/nscgi.c:
	Made nscgi virtual-server safe

2001-03-12 21:57 +0000  Jim Davidson  <jgdavidson@aol.com>  (50bd1b8f9b0c)

	* thread/Makefile:
	Added rule (commented out) to build nsthread as shared library

2001-03-12 21:56 +0000  Jim Davidson  <jgdavidson@aol.com>  (7830d7568c6e)

	* thread/tcl8x.c:
	Minor updates, assumes no more Tcl 7.6

2001-03-12 21:55 +0000  Jim Davidson  <jgdavidson@aol.com>  (95903e03b8e1)

	* thread/tls.c:
	Minor comment update

2001-03-12 21:54 +0000  Jim Davidson  <jgdavidson@aol.com>  (c4c5dec5c8b1)

	* thread/pool.c:
	Added more detail on fatal aborts

2001-03-12 21:53 +0000  Jim Davidson  <jgdavidson@aol.com>  (2057e5ad1eac)

	* thread/pthread.cpp, thread/reentrant.c:
	Added "volatile" to one-time inits

2001-03-08 22:36 +0000  Kriston Rehberg  <kriston@aol.com>  (511c97f9df41)

	* doc/default-home.html:
	Mention OpenNSD.org in docs

2001-03-08 22:33 +0000  Kriston Rehberg  <kriston@aol.com>  (a51271d80fcb)

	* .hgtags, ChangeLog:
	Add missing ChangeLog entries

2001-03-08 18:49 +0000  Jim Davidson  <jgdavidson@aol.com>  (ec0660fcf777 [aolserver-3.3.0])

	* nsd/tclinit.c, nsd/tclstubs.cpp:
	Added NsTclFinalizeThread() at end of Tcl TLS cleanup to finalize
	Tcl 8.x thread data

2001-01-31 21:37 +0000  Kriston Rehberg  <kriston@aol.com>  (5f8e11b25b41)

	* ChangeLog, Makefile:
	nsunix, nsvhr, and nsodbc moved to the Module Collection

2001-01-31 21:07 +0000  Kriston Rehberg  <kriston@aol.com>  (fda965d8e495)

	* ChangeLog:
	Add missing ChangeLog entry

2001-01-30 21:47 +0000  Kriston Rehberg  <kriston@aol.com>  (25b7acf5f0e5)

	* include/Makefile.global:
	Don't build with optimization for default install

2001-01-18 01:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (ca88eca0cae8)

	* win32/main/main.dsp:
	Win32: updated post-build copies to use .dll instead of .so

2001-01-16 23:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (75de70666618)

	* nsd/tclmisc.c, nsd/urlopen.c:
	Got rid of two more needless accesses of the nsServer global

2001-01-16 22:58 +0000  Jim Davidson  <jgdavidson@aol.com>  (8588f9fddb9f)

	* nsd/unix.c:
	Simplified signal trigger read by skipping the select

2001-01-16 22:57 +0000  Jim Davidson  <jgdavidson@aol.com>  (630d1c280e02)

	* nsd/tclcmds.c:
	Moved more commands to generic list

2001-01-16 22:57 +0000  Jim Davidson  <jgdavidson@aol.com>  (91b36b768b7b)

	* nsd/nsconf.c, nsd/nsd.h, nsd/tclinit.c:
	Removed nsconf.nseval flag, ns_eval now always enabled

2001-01-16 21:47 +0000  Kriston Rehberg  <kriston@aol.com>  (fac63bc45d63)

	* Makefile:
	Build nsunix and nsvhr again

2001-01-16 21:34 +0000  Kriston Rehberg  <kriston@aol.com>  (4d045eebd62e)

	* ChangeLog:
	Add missing ChangeLog entry for nsServer cleanup

2001-01-16 18:16 +0000  Jim Davidson  <jgdavidson@aol.com>  (45e255b31f24)

	* nsd/fastpath.c:
	Removed some unused #define's

2001-01-16 18:14 +0000  Jim Davidson  <jgdavidson@aol.com>  (218598fd434d)

	* nsd/adp.c, nsd/adpfancy.c, nsd/conn.c, nsd/dbdrv.c, nsd/dbinit.c,
	nsd/drv.c, nsd/fastpath.c, nsd/filter.c, nsd/modload.c,
	nsd/nsconf.c, nsd/nsmain.c, nsd/nswin32.c, nsd/op.c, nsd/pathname.c,
	nsd/pidfile.c, nsd/return.c, nsd/serv.c, nsd/urlspace.c:
	Cleaned up sloppy use of the nsServer global

2001-01-16 18:13 +0000  Jim Davidson  <jgdavidson@aol.com>  (321ddda5b67f)

	* nsd/unix.c:
	Switched to trigger-pipe based wakeup for signals

2001-01-16 18:13 +0000  Jim Davidson  <jgdavidson@aol.com>  (fce9c928bb83)

	* nsd/dbtcl.c, nsd/nsd.h, nsd/tclinit.c, nsd/tclop.c, nsd/tclset.c:
	Better isolated weird internal Tcl per-thread structures

2001-01-15 18:53 +0000  Jim Davidson  <jgdavidson@aol.com>  (bc07a8da048f)

	* nsd/auth.c, nsd/conn.c, nsd/fastpath.c, nsd/op.c, nsd/pathname.c,
	nsd/request.c, nsd/return.c, nsd/serv.c, nsd/tclmisc.c, nsd/tclop.c,
	nsd/tclresp.c, nsd/urlencode.c, nsd/urlopen.c:
	Cleaned up most of the remaining old function names

	(e.g., Ns_HeadersRequired -> Ns_ConnSetRequiredHeaders).

2001-01-12 22:53 +0000  Jim Davidson  <jgdavidson@aol.com>  (b361237d62af)

	* nsd/nsd.h:
	Added NsTclCreateGenericCmds, NsEnableDNSCache, and NsCacheKeysCmd

	Removed some simple init procs no longer required.

2001-01-12 22:52 +0000  Jim Davidson  <jgdavidson@aol.com>  (747d51c07f4a)

	* nsd/nsconf.c:
	Modified to call NsEnabledDNSCache if necessary

2001-01-12 22:51 +0000  Jim Davidson  <jgdavidson@aol.com>  (842942476ac3)

	* nsd/nsmain.c, nsd/proc.c, nsd/tclvar.c, nsd/urlopen.c:
	Made the callback info and nsv interfaces more self initializing and
	removed needless init in urlopen.c

2001-01-12 22:49 +0000  Jim Davidson  <jgdavidson@aol.com>  (2523ff53fe0e)

	* nsd/fastpath.c, nsd/return.c:
	Move Ns_ConnReturnFile to fastpath.c so it can use same file cache
	as the FastGet request procedure

	This should provide benefits to users of the ns_returnfile Tcl
	command.

2001-01-12 22:48 +0000  Jim Davidson  <jgdavidson@aol.com>  (3adb4044cf73)

	* nsd/dns.c:
	Modified so DNS works fine before caching is configured and enabled

	This should be useful to the config interp.

2001-01-12 22:46 +0000  Jim Davidson  <jgdavidson@aol.com>  (20927244a4c3)

	* nsd/config.c:
	Now creates the "generic" commands in tclcmds.c in the config interp

2001-01-12 22:46 +0000  Jim Davidson  <jgdavidson@aol.com>  (8fbf0eb527bc)

	* nsd/tclcmds.c:
	Split commands into "generic" and "server" lists.

	Added ns_cache_keys command and separated commands between "generic"
	and "server" lists. Commands which require the context of a web
	server (e.g., ns_returnfile) are server, all others (e.g., ns_mkdir)
	are generic and now available to the config interp.

2001-01-12 22:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (d8c4148fc28f)

	* nsd/cache.c:
	Fix cache locking; extend ns_cache_flush; add new ns_cache_keys

	Ns_CreateCache: bug fix Added lock protection around cachesTable.

	Ns_CacheMalloc/Ns_CacheFree: modified Although of dubious value,
	uses (once again) the Ns_Pool API.

	ns_cache_flush: modified command
	  - no args means flush full cache
	  - with arg, cache must use string keys, returns 1/0 if flushed.

	ns_cache_keys: new command Returns keys in cache, perhaps matching
	pattern. Non-string keys are converted to nn.nn.nn unsigned int
	format for output.

2001-01-10 18:35 +0000  Jim Davidson  <jgdavidson@aol.com>  (744d30681ba4)

	* include/Makefile.global, nsd/dstring.c:
	Added NO_VSNPRINTF for Ns_DStringPrintf, set on SGI for now

2001-01-10 18:26 +0000  Jim Davidson  <jgdavidson@aol.com>  (813ce6a79580)

	* thread/pool.c:
	Added Ns_PoolBlockSize to return requested and used block size of a
	zippy allocated block

	Useful to sum up real memory usage.

2001-01-10 18:25 +0000  Jim Davidson  <jgdavidson@aol.com>  (e16ea284a2bc)

	* thread/tcl8x.c:
	Added new, custom per-thread Tcl_Obj allocator

2001-01-04 21:13 +0000  Kriston Rehberg  <kriston@aol.com>  (f5bbbdd7c772)

	* ChangeLog, nsd/tclmisc.c:
	ns_striphtml crashing-bug in nsd8x fixed

2000-12-19 00:47 +0000  Jim Davidson  <jgdavidson@aol.com>  (28400dff8256)

	* nscgi/nscgi.c, nsd/log.c, nsd/nswin32.c:
	Updated mutex names

2000-12-18 01:43 +0000  Jim Davidson  <jgdavidson@aol.com>  (44a6a1a65fe6)

	* include/ns.h, nsd/dstring.c, nsd/nsd.h:
	For Ns_DStringPrintf, added _vsnprintf macro for Win32 and made the
	buffer size 2048, defined by NS_DSTRING_PRINTF_MAX

2000-12-17 21:28 +0000  Jim Davidson  <jgdavidson@aol.com>  (6e78274a6bf1)

	* nssock/sock.cpp:
	Silenced a few compile warnings

2000-12-17 21:25 +0000  Jim Davidson  <jgdavidson@aol.com>  (87fe5ecf9814)

	* thread/win32.cpp:
	Fixed some win32 code comment errors

2000-12-14 21:57 +0000  Kriston Rehberg  <kriston@aol.com>  (b4cc5db1835a)

	* ChangeLog, nsd/dstring.c, nsd/nsd.h, nsd/return.c, tcl/http.tcl:
	Fix bugs #12765 (vsnprintf in Ns_DStringPrintf), #12764 (If-
	Modified-Since works w/keep-alive)

	Corrected typo _ns_ns_http_readable.

2000-12-13 23:52 +0000  Kriston Rehberg  <kriston@aol.com>  (c061d850d764)

	* ChangeLog, Makefile, include/Makefile.global:
	Build with architecture-specific optimizations; auto-detect arch for
	most platforms; auto-select compiler and Purify usage from command

2000-12-13 21:50 +0000  Kriston Rehberg  <kriston@aol.com>  (1b69d41a5ba8)

	* ChangeLog, nsd/Makefile, nsd/sample-config.tcl, nssock/Makefile.ssl:
	Makefile now installs correctly; tuning parameters added to sample
	config

2000-12-12 23:13 +0000  Kriston Rehberg  <kriston@aol.com>  (06c033d2ee6e)

	* include/Makefile.global:
	Twiddled irix build rule

2000-12-12 22:54 +0000  Kriston Rehberg  <kriston@aol.com>  (ee5ca046d269)

	* ChangeLog, nscp/nscp.c, nslog/nslog.c:
	Quieten some compiler warnings

2000-12-12 22:53 +0000  Kriston Rehberg  <kriston@aol.com>  (a751df194b81)

	* nssock/ssl.c, nssock/ssltcl.c:
	Fix some compile warning in SSL code and add missing return
	statements

2000-12-12 22:19 +0000  Kriston Rehberg  <kriston@aol.com>  (9e668a315674)

	* include/Makefile.global:
	Solaris build fix

2000-12-12 22:15 +0000  Kriston Rehberg  <kriston@aol.com>  (65f6471db373)

	* ChangeLog:
	Add latest missing ChangeLog entries

2000-12-12 21:16 +0000  Kriston Rehberg  <kriston@aol.com>  (772be7f0872e)

	* ChangeLog, include/Makefile.global, nsd/nsconf.h, nsd/nsmain.c:
	Config options cleaned up; usage message less glib

	SUNWspro dumped core on usage message due to nsconf.argv0
	quigglyness.

2000-12-12 18:48 +0000  Kriston Rehberg  <kriston@aol.com>  (3f4f80fcd165)

	* nssock/Makefile.ssl, nssock/sock.cpp, nssock/ssl.c, nssock/ssl.h:
	Added Rainbow CryptoSwift support

2000-12-12 16:57 +0000  Kriston Rehberg  <kriston@aol.com>  (76efb06e24e9)

	* include/Makefile.global, nsd/nsd.h:
	Add support for leak checking with purify

2000-11-17 16:52 +0000  Jim Davidson  <jgdavidson@aol.com>  (81ba77651ec2)

	* include/nsthread.h, nsd/tclmisc.c, thread/pool.c, thread/test.c:
	Added Ns_PoolEnum to get at pool stats as with mutexes and threads,
	removing the old Ns_PoolStats API's and updating the "ns_info pools"
	command

2000-11-17 16:51 +0000  Jim Davidson  <jgdavidson@aol.com>  (61f92eed49af)

	* nsd/serv.c:
	Ensured the conn thread name was set first

2000-11-17 13:45 +0000  Jim Davidson  <jgdavidson@aol.com>  (224914c23959)

	* nssock/sock.cpp:
	Fixed multiple-load problems; added sndbuf, rcvbuf, sendwait, and
	recvwait options

2000-11-16 02:47 +0000  Jim Davidson  <jgdavidson@aol.com>  (71d2f6e8456b)

	* thread/test.c:
	Cleaned up code a bit to quiet compiler

2000-11-15 02:11 +0000  Jim Davidson  <jgdavidson@aol.com>  (9654b90dee74)

	* thread/win32.cpp:
	Disable win32 final thread cleanup to prevent invoking code in
	unloaded libs

	Moved WinThread allocation to DllMain, eliminating GetWinThread
	function. Also, disabled thread cleanup for final thread to avoid
	any TLS cleanup callbacks attempting to invoke code in unloaded
	libraries like Tcl.

2000-11-15 02:05 +0000  Jim Davidson  <jgdavidson@aol.com>  (2d9ff12ea4cf)

	* thread/tcl8x.c:
	Added Tcl_JoinThread for benefit of Tcl8.4

2000-11-14 23:39 +0000  Jim Davidson  <jgdavidson@aol.com>  (43b5d3a6bb5c)

	* include/nsthread.h, nsd/tclmisc.c, thread/test.c, thread/thread.c:
	Changed thread enum to return Ns_Thread, not Ns_Thread pointer which
	didn't make much sense

	Updated "ns_info pools" command to reflect change.

2000-11-13 21:09 +0000  Jim Davidson  <jgdavidson@aol.com>  (ecefa2273914)

	* nsd/dstring.c:
	Remove unused vars

2000-11-13 21:09 +0000  Jim Davidson  <jgdavidson@aol.com>  (2daa01475511)

	* nsd/tclmisc.c:
	Added more info for "ns_info pools"

2000-11-10 12:40 +0000  Jim Davidson  <jgdavidson@aol.com>  (23981d6d686a)

	* include/nsthread.h:
	Fixed pool counters (must be signed, pools can consume memory) and
	added the nsMemNumBuckets exported variable to config pools

2000-11-10 12:37 +0000  Jim Davidson  <jgdavidson@aol.com>  (3795419389b1)

	* thread/pool.c, thread/thread.c:
	Fixed bugs with Ns_ThreadEnum and pool counters

2000-11-09 01:53 +0000  Jim Davidson  <jgdavidson@aol.com>  (e3eb0e7011e1)

	* nsd/Makefile:
	Added nsd.h and nsconf.h dependencies

2000-11-09 01:53 +0000  Jim Davidson  <jgdavidson@aol.com>  (88156b1f134d)

	* nsd/tclthread.c:
	Changed SETOBJ macro to SetObj function which no longer sprintf's
	directly into interp->result

2000-11-09 01:52 +0000  Jim Davidson  <jgdavidson@aol.com>  (60bb20682fae)

	* nsd/tclmisc.c:
	Added "ns_info pools" command to dump memory pool stats

2000-11-09 01:51 +0000  Jim Davidson  <jgdavidson@aol.com>  (0ed86b82b02e)

	* nsd/nsconf.c, nsd/nsconf.h, nsd/nsd.h, nsd/tclinit.c:
	Added nsconf.quiet and nsconf.startuptimeout

2000-11-09 01:50 +0000  Jim Davidson  <jgdavidson@aol.com>  (2c5f0e157d29)

	* nsd/nsmain.c, nsd/sched.c, nsd/serv.c, nsd/sockcallback.c:
	Added code to wait for conn thread, sock callback, and sched idle at
	startup to help alleviate code start problems

2000-11-09 01:49 +0000  Jim Davidson  <jgdavidson@aol.com>  (7482a51c3671)

	* nsd/dstring.c:
	Uses ns_realloc to grow strings and maintains dstring stack in the
	staticSpace instead of the *addr pointer for compatibility with Tcl
	dstrings

2000-11-09 00:49 +0000  Jim Davidson  <jgdavidson@aol.com>  (7156cf7cfadf)

	* include/nsthread.h:
	Added Ns_PoolInfo struct

2000-11-09 00:48 +0000  Jim Davidson  <jgdavidson@aol.com>  (3b59f4d8348d)

	* thread/pool.c, thread/test.c, thread/thread.c:
	Update of the Ns_Pool API to support more stats gathering available
	via new Ns_PoolStats API

2000-11-09 00:33 +0000  Jim Davidson  <jgdavidson@aol.com>  (fd6f010ec812)

	* thread/mutex.c, thread/pthread.cpp, thread/sproc.cpp, thread/tls.c,
	thread/win32.cpp:
	Changed NsLock API's to return 1/0 instead of NS_OK/NS_TIMEOUT and
	more use of Ns_MasterLock to keep things simple

2000-11-06 19:31 +0000  Jim Davidson  <jgdavidson@aol.com>  (cfe069970765)

	* include/nsthread.h:
	Added Ns_PoolStats, nsMemPools

2000-11-06 19:28 +0000  Jim Davidson  <jgdavidson@aol.com>  (fb3c69be5bb1)

	* include/Makefile.global:
	Fixed flags for SGI pthread build

2000-11-06 18:08 +0000  Jim Davidson  <jgdavidson@aol.com>  (4fe5a4200533)

	* include/ns.h, nsd/binder.c, nsd/nswin32.c, nsd/sock.c,
	nssock/sock.cpp:
	Added configurable backlog via Ns_SockListenEx

2000-11-06 18:05 +0000  Jim Davidson  <jgdavidson@aol.com>  (423567b41ea5)

	* win32/nsthread/nsthread.dsp:
	Removed master.c and oldpools.c

2000-11-06 18:03 +0000  Jim Davidson  <jgdavidson@aol.com>  (a0149eb58a8e)

	* thread/win32.cpp:
	Removed call to NsInitThread no longer needed

2000-11-06 17:59 +0000  Jim Davidson  <jgdavidson@aol.com>  (b834f6df45a2)

	* thread/thread.c, thread/thread.h:
	Remove Thread->etime and NsPool API's

2000-11-06 17:53 +0000  Jim Davidson  <jgdavidson@aol.com>  (0a208d133e6f)

	* thread/master.c, thread/oldpools.c: deleted file.
	* include/nsthread.h, thread/Makefile, thread/cs.c, thread/master.c,
	thread/memory.c, thread/mutex.c, thread/oldpools.c, thread/pool.c,
	thread/pthread.cpp, thread/reentrant.c, thread/rwlock.c,
	thread/sema.c, thread/sproc.cpp, thread/tcl8x.c, thread/thread.c,
	thread/thread.h, thread/win32.cpp:
	Restructured the thread interfaces, moving the master lock to the
	platform interface code, integrating the zippy allocator with
	Ns_Pool/Ns_ThreadAlloc and use of a new simple direct allocator for
	all thread objects

2000-11-03 00:36 +0000  Jim Davidson  <jgdavidson@aol.com>  (6e2e5a96e1c0)

	* nssock/sock.cpp:
	Fixed compile bugs for ssl

2000-11-03 00:19 +0000  Jim Davidson  <jgdavidson@aol.com>  (d95c191a4254)

	* nssock/sock.cpp:
	Restructured socket module to wait in server busy situations instead
	of sending server busy message

	Also, moved the graceful close burden to the SockThread from the
	connection thread.

2000-11-03 00:18 +0000  Jim Davidson  <jgdavidson@aol.com>  (f8043defaf84)

	* include/ns.h, nsd/callbacks.c, nsd/nsd.h, nsd/serv.c:
	Added Ns_RegisterAtReady callbacks for indicating server no longer
	busy

2000-10-23 16:38 +0100  Jim Davidson  <jgdavidson@aol.com>  (e142d52b0179)

	* thread/pool.c:
	Removed <mutex.h> for sgi which shouldn't have been there

2000-10-23 16:04 +0100  Kriston Rehberg  <kriston@aol.com>  (a1a5c0a77811)

	* nsd/nsd.h:
	Upped version to 3.3pre

2000-10-23 15:43 +0100  Jim Davidson  <jgdavidson@aol.com>  (57edd25c9e8d)

	* thread/pool.c:
	Removed the sbrk() code for now, was crashing SGI (probably not
	thread safe)

2000-10-23 15:33 +0100  Jim Davidson  <jgdavidson@aol.com>  (02005ef51936)

	* thread/pool.c:
	Use sbrk() on Unix instead of malloc to avoid any malloc overhead or
	contention

2000-10-23 15:32 +0100  Jim Davidson  <jgdavidson@aol.com>  (c997cc64ee68)

	* thread/win32.cpp:
	Switched to rolling condition broadcast wakeup as in the sproc code

2000-10-23 02:28 +0100  Jim Davidson  <jgdavidson@aol.com>  (bf3aa01424c8)

	* thread/sproc.cpp:
	Fixed some comment bugs, update thrPtr->tid after fork

2000-10-22 22:18 +0100  Jim Davidson  <jgdavidson@aol.com>  (196a8eaa6bf2)

	* thread/thread.c:
	Moved sprintf of default thread name from NsThreadMain to
	NsInitThread under protection of threads lock

2000-10-22 22:01 +0100  Jim Davidson  <jgdavidson@aol.com>  (21b1b54c2a2d)

	* thread/Makefile:
	Switched order for LIBS and LIBNSTHREADS for test program

2000-10-22 21:47 +0100  Jim Davidson  <jgdavidson@aol.com>  (4886edc33452)

	* nsd/nsmain.c:
	Shuffled initialization to ensure command line args are read before
	calling any Ns API's, ensuring zippy malloc can be set if needed

2000-10-22 21:44 +0100  Jim Davidson  <jgdavidson@aol.com>  (e1ad6f7b0d42)

	* thread/test.c:
	Better test for PTHREAD_TEST

2000-10-22 21:39 +0100  Jim Davidson  <jgdavidson@aol.com>  (237d1593e778)

	* thread/test.c:
	Fixed undefined var bug for sproc

2000-10-22 21:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (207f12b57a00)

	* thread/test.c:
	Added some comments, a native pthread test, and a recursive stack
	checker

2000-10-22 21:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (2a75e927dd99)

	* thread/thread.c:
	Added code comment for NsInitThread

2000-10-22 21:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (3eb4f2352658)

	* thread/pool.c, thread/thread.h:
	Reduced the zippy allocator page size to 16k from 64k

2000-10-22 21:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (1b99d68292e2)

	* thread/pthread.cpp:
	Fixed bug of not setting the tid correctly

2000-10-20 23:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (d70ef1e6983f)

	* thread/pthread.cpp, thread/sproc.cpp:
	Added call the NsInitThread

2000-10-20 23:45 +0100  Jim Davidson  <jgdavidson@aol.com>  (e19b4cfe11ec)

	* thread/thread.c, thread/thread.h, thread/win32.cpp:
	More fixes for new Thread context model

2000-10-20 23:00 +0100  Jim Davidson  <jgdavidson@aol.com>  (7282eb2c5d0e)

	* thread/sproc.cpp, thread/thread.c:
	Updated sproc.cpp code for new Thread management and removed the
	wait for thread startup which shouldn't be needed

2000-10-20 22:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (293967e44b40)

	* include/nsthread.h:
	Added Ns_ThreadMemStats() to dump zippy malloc stats to open file

2000-10-20 22:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (8c06f79f9eda)

	* include/Makefile.global:
	Switched to -lthread from -lpthread on Solaris for benefit of in-
	process JVM's

2000-10-20 22:54 +0100  Jim Davidson  <jgdavidson@aol.com>  (e6aaa921ef97)

	* thread/Makefile, thread/pool.c, thread/pthread.cpp,
	thread/reentrant.c, thread/sproc.cpp, thread/test.c,
	thread/thread.c, thread/thread.h:
	Re-structured management of the Thread context to better support
	threads created without Ns_ThreadCreate (e.g., Java VM threads)

2000-10-20 22:53 +0100  Jim Davidson  <jgdavidson@aol.com>  (17ea63f5f514)

	* nsd/nsconf.c, nsd/nsd.h, nsd/tclinit.c, nsd/unix.c:
	Made ns_eval command disabled by default to avoid using SIGUSR2

2000-10-20 16:41 +0100  Kriston Rehberg  <kriston@aol.com>  (0f2e92800598)

	* .hgtags, ChangeLog:
	AOLserver 3.2 Released

2000-10-19 23:04 +0100  Jim Davidson  <jgdavidson@aol.com>  (7cc081493f82 [aolserver-3.2.0])

	* nsd/nswin32.c:
	Fixed service install code to allow long pathnames with spaces

2000-10-18 16:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (7eba4456a1ce)

	* include/nsthread.h:
	Fixed win32 sleep() macro to multiply by 1000 instead of 100 (oops!)

2000-10-18 16:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (1d7c44f82f3a)

	* thread/win32.cpp:
	Overhauled the mutex and condition wakeup code to use the single
	event in the WinThread structure and switched to spinlocks for the
	Cond structure

2000-10-18 16:35 +0100  Jim Davidson  <jgdavidson@aol.com>  (feca341898df)

	* thread/time.c:
	Fixed bug in not converting from milliseconds to microseconds on
	Win32

2000-10-18 00:29 +0100  Kriston Rehberg  <kriston@aol.com>  (51d2d7b803cf)

	* ChangeLog, nssock/sock.cpp:
	Add extra padding to hard-coded Server Busy message to defeat MSIE
	friendly error messages

2000-10-17 20:41 +0100  Kriston Rehberg  <kriston@aol.com>  (e89fc39a62dc)

	* include/ns.h, index.html, nscp/nscp.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/tclmisc.c:
	Ns_InfoTag and ns_info tag added (uses CVS Name); reported in help
	message

2000-10-17 20:09 +0100  Kriston Rehberg  <kriston@aol.com>  (954a9b65da83)

	* nsd/nsconf.h: new file.
	* ChangeLog, nsd/nsconf.c, nsd/nsconf.h, nsd/nsd.h, nsd/nsmain.c:
	All configuration option defaults have been moved to nsconf.h as
	#defines

	also fixed a typo in nsmain.c's help message

2000-10-17 19:13 +0100  Kriston Rehberg  <kriston@aol.com>  (fe55698580d1)

	* ChangeLog, Makefile:
	Tcl library for nsd8x is now installed into $(PREFIX)/lib/tcl8.3

2000-10-17 18:44 +0100  Kriston Rehberg  <kriston@aol.com>  (c5dc403dfabd)

	* ChangeLog, nsd/nsd.h, tcl/http.tcl:
	(ns_httpopen): Host:port is now sent to remote host if != 80

	Suggested by Jerry Asher.

2000-10-17 18:33 +0100  Kriston Rehberg  <kriston@aol.com>  (5c1ea1d34881)

	* tcl/fastpath.tcl:
	(_ns_dirlist): Qute links to handle Win32 pathnames with spaces

	Thanks to Eric Klein.

2000-10-17 18:27 +0100  Kriston Rehberg  <kriston@aol.com>  (64dfab610dcb)

	* nsd/nsconf.c, nsd/return.c:
	(Ns_ConnReturnNotice): New options "errorminsize" to pad error
	messages to defeat MSIE friendly errors and "noticedetail" to return
	more detailed information on notice pages

	Fix suggested by ArsDigita.

2000-10-17 16:26 +0100  Kriston Rehberg  <kriston@aol.com>  (14b980e9db7c)

	* ChangeLog, nsd/tclfile.c:
	Input string to mktemp is copied, because mktemp edits the string
	in-place and that's generally a bad thing to do with argv's

	Contributed by ArsDigita.

2000-10-17 16:24 +0100  Kriston Rehberg  <kriston@aol.com>  (665189ebec49)

	* nslog/nslog.c:
	New SuppressQuery and LogExtendedHeaders logging options

	LogExtendedHEaders option contributed by ArsDigita.

2000-10-17 16:24 +0100  Kriston Rehberg  <kriston@aol.com>  (605d169910ad)

	* nsd/tclnsshare.cpp:
	(ShareTraceProc): Fix race conditions if the shared value is a list

	Contributed by ArsDigita.

2000-10-17 15:33 +0100  Kriston Rehberg  <kriston@aol.com>  (f971946841f3)

	* ChangeLog, tcl/http.tcl:
	CRLF now returned in ns_httpopen

	Contributed by ArsDigita.

2000-10-17 15:30 +0100  Kriston Rehberg  <kriston@aol.com>  (952e140e787d)

	* ChangeLog:
	Nonsense case of lsorting a list with length <= 0 caused a memory
	leak

2000-10-17 15:26 +0100  Kriston Rehberg  <kriston@aol.com>  (ac3a18e22d10)

	* ChangeLog, nsd/adp.c, nsd/adpfancy.c:
	We now use the Arsdigita version of adpfancy

2000-10-17 00:27 +0100  Kriston Rehberg  <kriston@aol.com>  (4f2460fa1083)

	* ChangeLog, tcl/init.tcl:
	Initialize errorCode and errorInfo like tclsh does

	Patch from ArsDigita.

2000-10-16 23:49 +0100  Kriston Rehberg  <kriston@aol.com>  (fc4136af04f0)

	* nsd/nsd.h, nsd/tclcmds.c, nsd/tclvar.c:
	New nsv_names Tcl command lists names of nsv's in memory

2000-10-16 23:48 +0100  Kriston Rehberg  <kriston@aol.com>  (6f4806e07348)

	* nsd/Makefile:
	Fix build rules for libtcl76, libtcl8x, and libnsthread

2000-10-16 16:09 +0100  Kriston Rehberg  <kriston@aol.com>  (7f5655e91801)

	* ChangeLog, nsd/nsmain.c:
	(Ns_Main): Took out little note about -k|-K being deprecated

2000-10-16 16:06 +0100  Kriston Rehberg  <kriston@aol.com>  (7014c15a1ee8)

	* ChangeLog, nsd/nsmain.c:
	(Ns_Main): Had to move Ns_ThreadSetName below the
	stdin/stdout/stderr reassignment

	Fixes a fd problem with running nsd on Irix in "installed" or
	"daemon" mode that would prevent the server from starting up.

	Sigh.

2000-10-16 16:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (808c7761fb6e)

	* nsd/serv.c:
	Added a yield at end of Ns_QueueConn

2000-10-14 01:21 +0100  Kriston Rehberg  <kriston@aol.com>  (c7c34dcaf588)

	* ChangeLog, nsd/binder.c, nsd/nsmain.c:
	(Ns_Main): gid of the specified user is set even if it's not
	specified

	(UsageError): -K and -k give a "deprecated" warning. (Ns_Main): -f
	gives a "deprecated" warning.

	(PreBind): Didn't really tell us if it was successful at pre-
	binding. Helpful to know if you're wondering what happened to that
	port you wanted to pre-bind.

	(Binder): backlog variables (2) initialized to nsconf.backlog.

2000-10-13 23:51 +0100  Kriston Rehberg  <kriston@aol.com>  (cd8d9517c9af)

	* ChangeLog, nsd/return.c, nssock/sock.cpp:
	Made an attempt at standardizing the error codes and error page
	content

2000-10-13 23:01 +0100  Kriston Rehberg  <kriston@aol.com>  (6abf5f6d05b7)

	* ChangeLog:
	Add latest missing ChangeLog entries

2000-10-13 19:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (e8c5beebea92)

	* include/ns.h, nscgi/nscgi.c, nsd/exec.c, nsd/nswin32.c, nsd/unix.c:
	Added/use ns_pipe which set's close-on-exec like ns_sockpair

2000-10-13 03:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (f8c10054fbb8)

	* nsd/tclstats.c:
	Added lock for ns_stats command

2000-10-13 02:16 +0100  Jim Davidson  <jgdavidson@aol.com>  (542a2130d96c)

	* nsd/nsconf.c, nsd/tclstats.c:
	Fixed memory overwrite bug in stats and increased the default buffer
	value

2000-10-13 01:48 +0100  Jim Davidson  <jgdavidson@aol.com>  (402302237102)

	* nscp/nscp.c:
	Changed types to unsigned char for no-echo stuff

2000-10-13 01:48 +0100  Jim Davidson  <jgdavidson@aol.com>  (e01bf0b5a7c5)

	* win32/aolserver.dsw:
	Removed nsssl dependency from win32 build

2000-10-13 01:46 +0100  Jim Davidson  <jgdavidson@aol.com>  (0cf5c1178092)

	* win32/nssock/nssock.dsp, win32/nsssl/nsssl.dsp:
	Win32 build updated to use new nssock.c and nsssl.c stubs

2000-10-13 01:45 +0100  Jim Davidson  <jgdavidson@aol.com>  (6b47a38dd8eb)

	* win32/nsd/nsd.dsp:
	Added tclxkeylist.c and stamp.c for win32 build

2000-10-13 01:28 +0100  Jim Davidson  <jgdavidson@aol.com>  (6ba651c9fa40)

	* nsd/nsd.h:
	Remove TclUnsupported0Cmd define

2000-10-13 01:27 +0100  Jim Davidson  <jgdavidson@aol.com>  (6e25afb62aed)

	* nssock/Makefile, nssock/Makefile.ssl:
	Fixed install and clean directives

2000-10-13 01:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (b1f785986b52)

	* thread/sproc.cpp:
	Fixed Wakeup() error message and update child's sproc pid after fork

2000-10-13 01:23 +0100  Jim Davidson  <jgdavidson@aol.com>  (630d8534ae6d)

	* nsd/exec.c, tcl7.6/unix/tclUnixPipe.c:
	Switched to ns_fork

2000-10-13 01:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (54a21147d12f)

	* nsd/nsmain.c:
	Use of ns_fork and Ns_GetAddrByHost instead of inlined duplicate
	code

2000-10-13 01:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (49d275c8a913)

	* nsd/binder.c:
	Use of ns_fork and added messages for prebind

2000-10-13 01:11 +0100  Jim Davidson  <jgdavidson@aol.com>  (6b2331882420)

	* nsd/random.c:
	Added back log message when generating seeds

2000-10-13 01:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (57eb5a98a0b9)

	* thread/fork.c: new file.
	* include/ns.h, include/nsthread.h, nsd/unix.c, thread/Makefile,
	thread/fork.c:
	Moved ns_fork to the thread library

2000-10-12 22:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (cec99653d5e9)

	* Makefile, nssock/Makefile:
	Further simplified the SSL build weirdness

2000-10-12 22:01 +0100  Jim Davidson  <jgdavidson@aol.com>  (55bd79473963)

	* nssock/Makefile.sock, nssock/Makefile.ssl, nssock/nssock.c,
	nssock/nsssl.c, nssock/sock.cpp: new file.
	* nssock/sock.c: deleted file.
	* nssock/Makefile, nssock/Makefile.sock, nssock/Makefile.ssl,
	nssock/nssock.c, nssock/nsssl.c, nssock/sock.c, nssock/sock.cpp:
	Updated makefiles and added nsssl.c/nssock.c stubs to simplify build

2000-10-12 18:25 +0100  Jim Davidson  <jgdavidson@aol.com>  (fe8edf34db44)

	* include/ns.h, nsd/tclxkeylist.c:
	Added keyed list C API's and used DCI inlined code to avoid changes
	from 7.6 to 8.x

2000-10-12 18:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (c146f358af71)

	* nsd/keepalive.c:
	Fixed array overwrite with maxkeep=0 bug

2000-10-10 19:03 +0100  Kriston Rehberg  <kriston@aol.com>  (f1d21d63c4ea)

	* doc/faq.html, doc/install.html, doc/tcl-changes.txt,
	doc/tuning.html, nscp/nscp.html, nsd/nsd.html, nsext/nsext.html,
	nslog/nslog.html, nspd/nspd.html, nsperm/nsperm.html,
	nssock/nssock.html, nssock/nsssl.html, tcl/tcl.html,
	tests/tests.html, thread/thread.html, win32/win32.html: new file.
	* doc/install.txt, doc/internals.txt, doc/nsv.txt, doc/threads.txt,
	nssock/nsssl.txt: deleted file.
	* doc/faq.html, doc/install.html, doc/install.txt, doc/internals.txt,
	doc/nsv.txt, doc/tcl-changes.txt, doc/threads.txt, doc/tuning.html,
	index.html, nscp/nscp.html, nsd/nsd.html, nsext/nsext.html,
	nslog/nslog.html, nspd/nspd.html, nsperm/nsperm.html,
	nssock/nssock.html, nssock/nsssl.html, nssock/nsssl.txt,
	tcl/tcl.html, tests/tests.html, thread/thread.html,
	win32/win32.html:
	Latest documentation; move to module directories; Tcl changes moved
	from tcl8.3.2 to doc/tcl-changes.txt

2000-10-10 00:22 +0100  Kriston Rehberg  <kriston@aol.com>  (57111b1c0e7e)

	* nsd/nsd.h:
	Update version to 3.2

2000-10-10 00:21 +0100  Kriston Rehberg  <kriston@aol.com>  (486f4933b491)

	* ChangeLog, include/ns.h, nscp/nscp.c, nsd/nsmain.c:
	Module nscp log machine information upon login

	(Ns_InfoNameOfExecutable): new function just returns nsconf.nsd
	which is determined elsewhere.

	(Login): Tells you lots of harmless info about the machine once you
	log in. Also, nscp does not run unless configuration is explicitly
	set

2000-10-09 23:02 +0100  Kriston Rehberg  <kriston@aol.com>  (0228e366b89f)

	* ChangeLog:
	Add latest missing ChangeLog entries

2000-10-09 22:59 +0100  Kriston Rehberg  <kriston@aol.com>  (7d98e5abedf5)

	* nsd/sample-config.tcl, nssock/certfile-sample.pem, nssock/keyfile-
	sample.pem: new file.
	* nsd/nsd.tcl, nssock/certfile.pem, nssock/keyfile.pem: deleted file.
	* Makefile, nsd/nsd.tcl, nsd/sample-config.tcl, nsd/translate-ini,
	nssock/Makefile, nssock/certfile-sample.pem, nssock/certfile.pem,
	nssock/keyfile-sample.pem, nssock/keyfile.pem:
	nsd.tcl is now sample-config.tcl; nsssl no longer installs sample
	key/cert files with dopey names

2000-10-09 21:35 +0100  Kriston Rehberg  <kriston@aol.com>  (26e8e755aaad)

	* doc/default-home.html: new file.
	* doc/default-home.html:
	Add default home page for new installations

2000-10-09 21:32 +0100  Kriston Rehberg  <kriston@aol.com>  (45446bc37ffd)

	* nsd/translate-ini: new file.
	* nsd/translate-ini:
	Add translate-ini script to translate from old-style ini files to
	new-style tcl script

2000-10-09 21:29 +0100  Kriston Rehberg  <kriston@aol.com>  (51ecde9831aa)

	* README, doc/license.txt, nsd/nsd.tcl, tests/README-tests.txt,
	tests/adp/test1.adp, tests/adp/test2.adp, tests/adp/test3.adp,
	tests/adp/test4.adp, tests/adp/test4.inc, tests/adp/test5.adp,
	tests/adp/test5a.adp, tests/adp/test6.adp, tests/adp/test7.adp,
	tests/adp/test7b.adp, tests/adp/test7c.adp, tests/adp/test8.adp,
	tests/adp/test8a.adp, tests/adp/test8b.adp, tests/adp/test9.adp,
	tests/adp/test9.inc, tests/cdev/test1.adp, tests/dbase/test1.adp,
	tests/index.adp, tests/nstelemetry.adp, tests/sec/test1.adp,
	tests/tcl/test1.tcl, tests/tcl/test1a.tcl, tests/tcl/test1b.tcl: new
	file.
	* LICENSE.txt, README.txt: deleted file.
	* ChangeLog, LICENSE.txt, README, README.txt, doc/license.txt,
	nsd/nsd.tcl, tests/README-tests.txt, tests/adp/test1.adp,
	tests/adp/test2.adp, tests/adp/test3.adp, tests/adp/test4.adp,
	tests/adp/test4.inc, tests/adp/test5.adp, tests/adp/test5a.adp,
	tests/adp/test6.adp, tests/adp/test7.adp, tests/adp/test7b.adp,
	tests/adp/test7c.adp, tests/adp/test8.adp, tests/adp/test8a.adp,
	tests/adp/test8b.adp, tests/adp/test9.adp, tests/adp/test9.inc,
	tests/cdev/test1.adp, tests/dbase/test1.adp, tests/index.adp,
	tests/nstelemetry.adp, tests/sec/test1.adp, tests/tcl/test1.tcl,
	tests/tcl/test1a.tcl, tests/tcl/test1b.tcl:
	Moved tests out of their hiding place... too many folks thought they
	didn't exist

	Moved nsd.tcl to nsd/ Moved license and all docs to doc/ index.html
	in this directory is starting point for developer docs index.html in
	doc directory is AOLserver pageroot (not sure where it really
	*should* go)

	scripts directory is to be removed

2000-10-09 21:08 +0100  Kriston Rehberg  <kriston@aol.com>  (3514e50a42c4)

	* nsd/tclxkeylist.c: new file.
	* ChangeLog, nsd/Makefile, nsd/tclcmds.c, nsd/tclxkeylist.c:
	Re-added TclX keyl* commands that were in AOLserver 2.x

2000-10-07 21:26 +0100  Jim Davidson  <jgdavidson@aol.com>  (0124954b4b5d)

	* thread/pthread.cpp:
	Switched to pthread_once to initialize the key initialization lock
	for benefit of HP10

	(This is probably overkill at this stage).

2000-10-07 21:24 +0100  Jim Davidson  <jgdavidson@aol.com>  (50d6a79123bc)

	* nsd/binder.c, nsd/nsmain.c:
	Set thread name as first task in Ns_Main() for benefit of pre-bind
	Ns_Log and other early messages

	This generally initializes the thread interface which should be safe
	even if done as root (as opposed to creating threads as root which
	have confused Linux and SGI process-based threads).

2000-10-07 21:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (459363077ec2)

	* include/Makefile.global:
	Remove HAVE_BSDSETPGRP flag as we no longer call setpgrp anywhere

2000-10-07 21:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (454a25e4182e)

	* nspd/main.c:
	Removed setpgrp(), the setsid() should suffice

2000-10-07 21:01 +0100  Jim Davidson  <jgdavidson@aol.com>  (f1f831beaac4)

	* nsd/binder.c, nsd/nsd.h, nsd/nsmain.c:
	Added NsInitBinder and -b and -B flags to allow pre-binding to ports
	as an alternative to the binder process method

	This is presently required for macOS as the binder process method
	won't work and looks like a smarter technique overall.

2000-10-07 21:00 +0100  Jim Davidson  <jgdavidson@aol.com>  (8bc73a6801ec)

	* nsd/nsconf.c, nsd/tclinit.c:
	Added nsConfQuiet flag to quiet down the startup messages with the
	-q flag

2000-10-07 20:59 +0100  Jim Davidson  <jgdavidson@aol.com>  (49ca5af90ded)

	* nsd/stamp.c: new file.
	* nsd/stamp.c:
	New timestamp stub for link time builddate

2000-10-07 20:59 +0100  Jim Davidson  <jgdavidson@aol.com>  (c08d3bf86f53)

	* nsd/Makefile:
	Added link-time builddate timestamp and fixed dependencies for nsd76
	and nsd8x to avoid recompile each time

2000-10-07 01:39 +0100  Jim Davidson  <jgdavidson@aol.com>  (81423d12faef)

	* nspd/main.c:
	Fixed compile bug for platforms with BSD setpgrp

2000-10-04 23:27 +0100  Kriston Rehberg  <kriston@aol.com>  (a54369a657c2)

	* index.html, nscgi/nscgi.html: new file.
	* index.html, nscgi/nscgi.html:
	Add developer documentation

2000-10-04 22:32 +0100  Kriston Rehberg  <kriston@aol.com>  (94660aee77c6)

	* ChangeLog:
	Add latest missing entries to ChangeLog

2000-10-03 19:16 +0100  Jim Davidson  <jgdavidson@aol.com>  (72405197843b)

	* thread/pthread.cpp:
	Stopped using pthread_once as it appears to require a lock

2000-10-03 19:07 +0100  Jim Davidson  <jgdavidson@aol.com>  (f4f752ab2c53)

	* thread/Makefile:
	Remove cthread.cpp depend

2000-10-03 19:01 +0100  Jim Davidson  <jgdavidson@aol.com>  (af6878b28e09)

	* nsd/sock.c:
	Removed cthread errno API's, macOS now has thread-safe errno

2000-10-03 18:58 +0100  Jim Davidson  <jgdavidson@aol.com>  (8ee7c8fa8925)

	* nspd/main.c:
	Updated to use HAVE_CMMSG and HAVE_BSDSETPGRP

2000-10-03 18:57 +0100  Jim Davidson  <jgdavidson@aol.com>  (b535af187353)

	* nsd/nsmain.c:
	Check for MACOSX instead of __APPLE__ in preprocessor test

2000-10-03 18:56 +0100  Jim Davidson  <jgdavidson@aol.com>  (1e5bf4877339)

	* nsd/nsd.h:
	Update to version 3.11

2000-10-03 18:56 +0100  Jim Davidson  <jgdavidson@aol.com>  (928225918f7b)

	* include/Makefile.global, include/nsthread.h:
	Updates for macOS and use of HAVE_BSDSETPGRP

2000-10-03 18:55 +0100  Jim Davidson  <jgdavidson@aol.com>  (026e309ab8e4)

	* thread/cthread.cpp: deleted file.
	* thread/cthread.cpp, thread/osthread.c, thread/pthread.cpp,
	thread/reentrant.c, thread/signal.c:
	Updates for macOS, now using pthreads

2000-10-03 17:15 +0100  Jim Davidson  <jgdavidson@aol.com>  (b36547cb5883)

	* nsd/binder.c:
	Set close-on-exec on received fd from binder

2000-09-29 14:42 +0100  Jim Davidson  <jgdavidson@aol.com>  (3b2cccad35fa)

	* nssock/sock.c:
	Removed setting bufsize to uninitialized value on ssl

2000-09-29 02:04 +0100  Kriston Rehberg  <kriston@aol.com>  (42742bf74687)

	* ChangeLog:
	Add "Expires: now" header to nstelemetry.adp to ensure it gets run
	each time it's visitted

2000-09-29 01:46 +0100  Kriston Rehberg  <kriston@aol.com>  (7956268cca02)

	* ChangeLog, nsd/serv.c:
	(AppendConn): Fix race condition with connPtr

	This may be a losing battle. It appears to work on a busy Irix
	server, so I'm declaring victory for now.

2000-09-29 01:00 +0100  Kriston Rehberg  <kriston@aol.com>  (e83e00c9e9c8)

	* ChangeLog:
	Add missing ChangeLog entry about sock.c SockRead fix

2000-09-29 00:57 +0100  Kriston Rehberg  <kriston@aol.com>  (3a41f4b9207a)

	* ChangeLog, nsd/serv.c:
	(NsConnArgProc): Fix race condition when threads exit while [ns_info
	threads] is run; arg can be NULL

	Seen mostly by nstelemetry.adp.

2000-09-25 23:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (ebaca8dc7726)

	* nssock/sock.c:
	Fixed bufferred read code in SockRead

2000-09-07 20:20 +0100  Kriston Rehberg  <kriston@aol.com>  (d1a03f8c4033)

	* include/Makefile.global:
	Build fixes for HP/UX 10.20 and 11

2000-09-07 01:58 +0100  Kriston Rehberg  <kriston@aol.com>  (337b8341e3b2)

	* win32/aolserver.dsw, win32/main/main.dsp:
	Win32 installation keeps DLL's as DLL's now

2000-09-06 23:41 +0100  Kriston Rehberg  <kriston@aol.com>  (a1f62b364311)

	* nssock/ssltcl.c:
	Renamed ReadFile and WriteFile to avoid Win32 naming conflicts

2000-09-06 23:41 +0100  Kriston Rehberg  <kriston@aol.com>  (b8172f32e352)

	* win32/nsssl/nsssl.dsp: new file.
	* win32/nsssl/nsssl.dsp:
	Build nsssl for win32

2000-09-06 05:19 +0100  Kriston Rehberg  <kriston@aol.com>  (f5ba4f8606b0)

	* nssock/Makefile:
	Fix module installation using INSTSRVMOD variable

2000-09-06 04:49 +0100  Kriston Rehberg  <kriston@aol.com>  (9ee7f0e83755)

	* doc/release.html: deleted file.
	* doc/release.html:
	Remove duplicate ChangeLog notes from documentation pages

2000-09-06 04:48 +0100  Kriston Rehberg  <kriston@aol.com>  (3ae56e41a3ac)

	* doc/index.html: deleted file.
	* doc/index.html:
	The doc directory is not a web site anymore

2000-09-06 04:47 +0100  Kriston Rehberg  <kriston@aol.com>  (ded1cc7e7bc5)

	* nssock/nsssl.txt: new file.
	* doc/nsftp.txt, doc/nspostgres.txt, doc/nsssl2.txt: deleted file.
	* doc/index.html, doc/nsftp.txt, doc/nspostgres.txt, doc/nsssl2.txt,
	nssock/nsssl.txt:
	Move module docs into module directories

2000-09-06 04:34 +0100  Kriston Rehberg  <kriston@aol.com>  (9d6c656e441b)

	* ChangeLog:
	Add missing 3.1 changes to ChangeLog

2000-09-06 03:44 +0100  Kriston Rehberg  <kriston@aol.com>  (58b822e61301)

	* doc/index.html:
	Make doumentation look like website http://aolserver.com/docs

2000-09-06 03:25 +0100  Kriston Rehberg  <kriston@aol.com>  (fcd6ae26e23e)

	* nssock/certfile.pem, nssock/keyfile.pem: new file.
	* nssock/Makefile, nssock/certfile.pem, nssock/keyfile.pem:
	Sample, fake keyfile and certfile are installed on new installations
	only

2000-09-05 21:02 +0100  Jim Davidson  <jgdavidson@aol.com>  (4f82037afda6)

	* nsd/serv.c:
	Added missing break for unauthorized case in ConnRun

2000-08-28 23:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (9c9a21ed1ebe)

	* thread/test.c, thread/thread.h:
	Removed rcsid from header

2000-08-28 15:22 +0100  Jim Davidson  <jgdavidson@aol.com>  (1a6bdaf6a2cc)

	* nscp/nscp.c:
	Enabled password echo by default on all platforms - doesn't appear
	to be working yet

2000-08-28 15:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (339d1a26119e)

	* nscp/nscp.c:
	Made password echo option configurable, on by default on WIN32 and
	Linux, off otherwise

2000-08-28 14:13 +0100  Jim Davidson  <jgdavidson@aol.com>  (9c30eb76912c)

	* nsd/tclinit.c:
	Made TCL data TLS slot self initializing

2000-08-28 14:12 +0100  Jim Davidson  <jgdavidson@aol.com>  (07ff1aa139bc)

	* nsd/adp.c:
	Made ADP data TLS slot self-initializing

2000-08-28 14:11 +0100  Jim Davidson  <jgdavidson@aol.com>  (90d0f0002155)

	* nsd/dbinit.c:
	Modified current per-thread handle count to use a single TLS slot
	instead of a slot per pool

2000-08-28 14:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (bdd892a1d7f1)

	* nsd/conn.c, nsd/serv.c:
	Made current conn TLS self initializing, fixing ns_conn isconnected

2000-08-26 00:43 +0100  Jim Davidson  <jgdavidson@aol.com>  (8fc794bc4ec3)

	* nsd/adp.c:
	Fixed bug with ns_adp_parse ignoring given parser

2000-08-25 22:54 +0100  Jim Davidson  <jgdavidson@aol.com>  (806124ce2945)

	* nsd/adp.c:
	Fixed bug of not restoring the given string to original state during
	chunky compile

2000-08-25 22:46 +0100  Jim Davidson  <jgdavidson@aol.com>  (16c5a46378f3)

	* nsd/tclcmds.c:
	Added ns_adp_registertag command as documented

2000-08-25 22:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (6c0d562f18b7)

	* nsd/nsmain.c:
	Fixed some startup message formatting problems

2000-08-25 19:44 +0100  Jim Davidson  <jgdavidson@aol.com>  (9796fccadd84)

	* nsd/mimetypes.c:
	Added .png mime-type

2000-08-25 15:16 +0100  Jim Davidson  <jgdavidson@aol.com>  (da9290d7cb87)

	* nsd/adp.c:
	Removed unreferenced variable in ns_adp_parse

2000-08-25 14:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (1b260b5feed2)

	* nsd/adpfancy.c, nsd/auth.c, nsd/cache.c, nsd/dbutil.c,
	nsd/dstring.c, nsd/filter.c, nsd/index.c, nsd/lisp.c,
	nsd/mimetypes.c, nsd/nsthread.c, nsd/set.c, nsd/str.c,
	nsd/tclconf.c, nsd/tclfile.c, nsd/tclresp.c, nsd/url.c,
	nsd/urlencode.c, nsd/urlspace.c, thread/oldpools.c:
	Removed some less useful comments

2000-08-25 14:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (f89060f6f9b3)

	* nsd/tclsock.c:
	Fixed crash bug in error message in ns_socknread

2000-08-25 14:47 +0100  Jim Davidson  <jgdavidson@aol.com>  (21527a1bc66b)

	* nsd/random.c:
	Fixed deadlock between Ns_DRand/Ns_GenSeeds

2000-08-25 00:04 +0100  Jim Davidson  <jgdavidson@aol.com>  (9f1d53a286b6)

	* nsd/adp.c:
	Fixed crash bug with ns_adp_parse -parser

2000-09-06 03:34 +0000  Kriston Rehberg  <kriston@aol.com>  (d7b272767273)

	* .hgtags:
	Tag aolserver-3.1.0

2000-08-21 18:58 +0100  Kriston Rehberg  <kriston@aol.com>  (354b759d626b [aolserver-3.1.0])

	* ChangeLog, nscp/nscp.c:
	IAC handling disabled on Win32 because windows telnet is a joke

2000-08-21 18:53 +0100  Kriston Rehberg  <kriston@aol.com>  (0a3b6b7c17a6)

	* ChangeLog, nscp/nscp.c:
	Module nscp makes some attempt to recognize and handle telnet IAC
	codes

	This allows CTRL-C and CTRL-D to work from the client for people who
	get stuck and don't want to use CTRL-]. It's a very dirt-simple
	implementation of the telnet protocol so only standard Unix telnet
	is supported. The win32 telnet client sends too many IAC's that I do
	not care to handle at this time, so they are just dropped with a
	warning sent to the server.log.

	(GetLine): password is no longer echoed back to the client.

2000-08-21 15:52 +0100  Kriston Rehberg  <kriston@aol.com>  (b231d7226a28)

	* ChangeLog:
	Corrected range-checker ChangeLog entry

2000-08-20 20:12 +0100  Kriston Rehberg  <kriston@aol.com>  (a158325ff0d8)

	* nsexample/Makefile, nsexample/nsexample.c: deleted file.
	* nsexample/Makefile, nsexample/nsexample.c:
	Remove nsexample module from aolserver distribution

2000-08-20 15:08 +0100  Kriston Rehberg  <kriston@aol.com>  (98a422a5da4a)

	* ChangeLog, Makefile:
	Optional modules nsftp, nspostgres, nssolid, nssybpd moved to top-
	level

2000-08-18 22:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (933f4edcdc98)

	* tcl/namespace.tcl:
	Added namespace export to init script

2000-08-18 20:10 +0100  Jim Davidson  <jgdavidson@aol.com>  (9187671e01fb)

	* thread/pthread.cpp:
	ETIME bug work around: don't cause wakeup in Ns_CondWait and
	Ns_CondTimedWait instead of waiting again

	This is more conservative and should avoid problems some have had
	with threads missing wakeup.

2000-08-18 20:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (3be2d64f04b7)

	* thread/Makefile:
	Added dependency for osthread.o

2000-08-18 15:33 +0100  Kriston Rehberg  <kriston@aol.com>  (d50fdbb369c4)

	* ChangeLog:
	Jim's 8/17 changes

2000-08-18 01:12 +0100  Jim Davidson  <jgdavidson@aol.com>  (45c8af17722b)

	* nsd/dbtcl.c:
	Removed unused variables in GetCsvCmd

2000-08-18 01:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (6a6ac0407f2c)

	* nsd/adp.c:
	Fixed bug of not truncating output buffer when an error was thrown
	during an ns_adp_parse

	Fix suggested by Rob Mayoff.

2000-08-18 00:08 +0100  Jim Davidson  <jgdavidson@aol.com>  (3245f4584a1d)

	* nsd/dbtcl.c:
	Use a dstring to create the column list instead of incrementally
	setting the output variable with Tcl_SetVar

	This was necessary to avoid conflicting definitions of the needed
	TCL_ flags between 7.6 and 8.x.

2000-08-17 23:46 +0100  Jim Davidson  <jgdavidson@aol.com>  (9b1e44d04984)

	* ChangeLog, tcl7.6/unix/tclUnixPipe.c:
	Switched to blocking Tcl_WaitPid to avoid zombies as suggested by
	Rob Mayoff

2000-08-17 19:59 +0100  Kriston Rehberg  <kriston@aol.com>  (e20548f667a9)

	* ChangeLog:
	Jim's change to thread

2000-08-17 19:56 +0100  Kriston Rehberg  <kriston@aol.com>  (ba0265c666eb)

	* nssock/sock.c:
	Clarify server-busy log message

2000-08-17 19:48 +0100  Kriston Rehberg  <kriston@aol.com>  (11f0dc745366)

	* ChangeLog, nssock/sock.c:
	(SockThread): Warning sent to log when Server Busy is returned

2000-08-17 17:43 +0100  Jim Davidson  <jgdavidson@aol.com>  (98926f1b03c0)

	* thread/win32.cpp:
	Sets thread stack size as on other platforms

2000-08-17 17:43 +0100  Jim Davidson  <jgdavidson@aol.com>  (da4c212803cc)

	* thread/thread.c:
	NULL out thread arg at exit to avoid Ns_ThreadEnum checking arg info
	for possibly deallocated context as seen in ns_info threads

	Also, moved read of firstPtr in Ns_ThreadEnum inside lock.

2000-08-17 17:33 +0100  Kriston Rehberg  <kriston@aol.com>  (c3f00cfcb08c)

	* nssock/Makefile:
	Modules that don't have required libraries are still cleaned

	These are nspostgres, nssock, nssolid, nsssl, and the nssybpd
	application.

2000-08-17 17:23 +0100  Kriston Rehberg  <kriston@aol.com>  (cb87638dc40e)

	* Makefile, include/Makefile.global:
	Fix install location of headers and libnsthread.a

2000-08-17 07:09 +0100  Kriston Rehberg  <kriston@aol.com>  (c928ddf6bd52)

	* ChangeLog, nsd/Makefile, nsd/adp.c, nsd/adpfancy.c, nsd/binder.c,
	nsd/callbacks.c, nsd/config.c, nsd/conn.c, nsd/dbdrv.c,
	nsd/dbinit.c, nsd/dbtcl.c, nsd/drv.c, nsd/exec.c, nsd/fastpath.c,
	nsd/fd.c, nsd/keepalive.c, nsd/log.c, nsd/modload.c, nsd/nsconf.c,
	nsd/nsmain.c, nsd/nswin32.c, nsd/op.c, nsd/pidfile.c, nsd/random.c,
	nsd/return.c, nsd/rollfile.c, nsd/sched.c, nsd/serv.c,
	nsd/sockcallback.c, nsd/tclinit.c, nsd/tclop.c, nsd/tclstats.c,
	nsd/unix.c, nsd/urlopen.c:
	Ns_Log and Ns_Fatal standardized and hopefully more helpful to both
	admins and developers

2000-08-17 00:06 +0100  Jim Davidson  <jgdavidson@aol.com>  (7720b3dd9fcc)

	* win32/nstcl/nstcl.dsp:
	Added tclIOGT.c as required by tcl8.3.2

2000-08-16 20:06 +0100  Kriston Rehberg  <kriston@aol.com>  (cc190f577190)

	* nsd/nsd.h:
	Update version from 3.0.1 to 3.1

2000-08-16 01:09 +0100  Jim Davidson  <jgdavidson@aol.com>  (5bb48093b9aa)

	* include/ns.h, nsd/cache.c:
	Remove Ns_CacheTimedGetValue which was an odd interface not used
	anywhere

2000-08-15 23:45 +0100  Kriston Rehberg  <kriston@aol.com>  (26a9c8838582)

	* nspd/Makefile, thread/Makefile:
	gmake install works darn near everywhere

2000-08-15 23:43 +0100  Kriston Rehberg  <kriston@aol.com>  (9978fc431e89)

	* ChangeLog, include/Makefile.global, nspd/Makefile, nssock/Makefile,
	tcl7.6/Makefile, thread/Makefile:
	Fixed the lib install dir; gmake clean works for optional modules;
	libnspd.a now installs correctly

	include/Makefile.global (INSTLOG): should have pointed to
	$(INST)/lib, not $(INST)/modules/lib.

	Makefile: nsunix resurrected. All modules are built. If a module is
	missing a library, it is not built, but it won't stop the AOLserver
	build process (no error is thrown). The build will continue with the
	next module.

	nsftp: guesses if you have TCP_WRAPPERS available.

2000-08-15 22:08 +0100  Kriston Rehberg  <kriston@aol.com>  (46b8e3a66b4e)

	* include/Makefile.global:
	Build path fix for nspd

2000-08-15 21:24 +0100  Kriston Rehberg  <kriston@aol.com>  (101fb1b8ba79)

	* nsext/nsextmsg.h: deleted file.
	* ChangeLog, Makefile, include/Makefile.global, nscgi/Makefile,
	nscgi/nscgi.c, nscp/Makefile, nscp/nscp.c, nsext/Makefile,
	nsext/nsext.c, nsext/nsextmsg.h, nslog/Makefile, nslog/nslog.c,
	nspd/Makefile, nspd/log.c, nspd/main.c, nsperm/Makefile,
	nsperm/nsperm.c, nssock/Makefile, nssock/sock.c, nssock/ssl.c,
	nssock/ssltcl.c, nssock/x509.c:
	Build system cleanups; Log notices should be standardized throughout
	the system

	nsext: Ten guesses why $(NSHOME)/include/nsextmsg.h was duplicated
	here.

	nssybpd: Hopefully, the log statements will be easier to understand
	by both admins and developers. It's still messy since it uses
	syslog. Makefile redone to use standard AOLserver rules. RPATH is
	used a little more intelligently. Removed files that had no business
	living there.

	include/Makefile.global: Took stab at RPATH support on Solaris to
	perhaps remove the need for LD_LIBRARY_PATH on an intelligently-
	administered system. New rule for libnspd.a.

2000-08-15 00:57 +0100  Kriston Rehberg  <kriston@aol.com>  (f85e8a1edce0)

	* include/Makefile.global:
	Irix o32 is now the default

2000-08-15 00:18 +0100  Kriston Rehberg  <kriston@aol.com>  (8d4ba80fde70)

	* ChangeLog, Makefile, README.txt:
	Add missing ChangeLog entries

2000-08-15 00:11 +0100  Kriston Rehberg  <kriston@aol.com>  (748e3395ca0d)

	* nsexample/Makefile:
	A little tweak to the include statement at the bottom

2000-08-14 20:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (b9159a15c0f0)

	* tcl7.6/unix/dltest/Makefile.in, tcl7.6/unix/dltest/README,
	tcl7.6/unix/dltest/configure, tcl7.6/unix/dltest/configure.in,
	tcl7.6/unix/dltest/pkga.c, tcl7.6/unix/dltest/pkgb.c,
	tcl7.6/unix/dltest/pkgc.c, tcl7.6/unix/dltest/pkgd.c,
	tcl7.6/unix/dltest/pkge.c, tcl7.6/unix/dltest/pkgf.c: deleted file.
	* tcl7.6/unix/dltest/Makefile.in, tcl7.6/unix/dltest/README,
	tcl7.6/unix/dltest/configure, tcl7.6/unix/dltest/configure.in,
	tcl7.6/unix/dltest/pkga.c, tcl7.6/unix/dltest/pkgb.c,
	tcl7.6/unix/dltest/pkgc.c, tcl7.6/unix/dltest/pkgd.c,
	tcl7.6/unix/dltest/pkge.c, tcl7.6/unix/dltest/pkgf.c:
	Never used - removed as with tcl8.x

2000-08-14 20:45 +0100  Jim Davidson  <jgdavidson@aol.com>  (3e3d316a680a)

	* include/Makefile.global, include/tcl83.h, include/tclDecls.h,
	win32/nstcl/nstcl.dsp:
	Updated for tcl8.3.2

2000-08-14 20:34 +0100  Jim Davidson  <jgdavidson@aol.com>  (413400fc47ab)

	* thread/pool.c:
	Added a simple 1-byte range check to -z allocator

2000-08-11 20:52 +0100  Kriston Rehberg  <kriston@aol.com>  (5b35a1c51432)

	* ChangeLog:
	Fix Connection: close and end-of-line handling

	Always add "Connection: close" to the request line to satisfy HTTP
	1.1 RFC -- this would break MSIE in HTTP 1.1 mode.

	HTTP_EOL of "\r\n" used on all request lines for stupid web servers
	on the other end.

	Protocol "tcp" added as synonym of "http" for old-time Unix heads.

	Lots of folks lended a hand on this one -- Satyam Priyadarshy, Jerry
	Asher, Kriston Rehberg, and special thanks to Wanda G. at AOL for
	adding a CNAME in DNS so quickly.

2000-08-10 01:08 +0100  Kriston Rehberg  <kriston@aol.com>  (bc27a98a9150)

	* ChangeLog, doc/index.html, doc/nsssl2.txt, doc/nsv.txt,
	doc/release.html, doc/threads.txt:
	First crack at 3.1 docs

	Title page extremely simplified. SSL docs updated. Release notes
	updated. NSV docs corrected (thanks to Todd Levy <dcitodd@aol.com>).

2000-08-09 23:17 +0100  Kriston Rehberg  <kriston@aol.com>  (84337a9f6b83)

	* ChangeLog:
	Jim's changes collected into ChangeLog

2000-08-09 22:45 +0100  Kriston Rehberg  <kriston@aol.com>  (3d930ddeca0c)

	* doc/config.txt:
	keepalivetimeout 0 means keepalive is disabled

2000-08-08 23:21 +0100  Jim Davidson  <jgdavidson@aol.com>  (6cd95aef9eaf)

	* win32/nssock/nssock.dsp:
	Changed build file from nssock.c to sock.c

2000-08-08 23:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (bbe18e329b90)

	* thread/tcl8x.c:
	Added a wrapper startup for Tcl_CreateThread for the benefit of
	Win32

2000-08-08 23:19 +0100  Jim Davidson  <jgdavidson@aol.com>  (b09f8e7315dc)

	* nsd/tclmisc.c:
	Fixed bug with ns_info pid

2000-08-08 22:14 +0100  Jim Davidson  <jgdavidson@aol.com>  (9b5ca62f112e)

	* thread/thread.c:
	Fix compile bug

2000-08-08 21:51 +0100  Jim Davidson  <jgdavidson@aol.com>  (dbbfab92371b)

	* tcl7.6/generic/tclFHandle.c:
	Removed unneeded fileTable which could result in crashes when fd's
	where reused quickly

2000-08-08 21:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (df21773d81d6)

	* thread/tcl8x.c, thread/thread.c:
	Added Ns_ThreadCreate2 in thread.c needed for upgrade to Tcl 8.3.1
	in tcl8x.c

2000-08-08 21:49 +0100  Jim Davidson  <jgdavidson@aol.com>  (36117309d435)

	* include/tcl.h, include/tcl83.h, include/tclDecls.h,
	win32/nstcl/nstcl.dsp:
	Upgrade to Tcl 8.3.1

2000-08-08 21:48 +0100  Jim Davidson  <jgdavidson@aol.com>  (0234766a55c3)

	* include/nsthread.h:
	Added Ns_ThreadCreate2 with extra flags argument used by
	Tcl_CreateThread to create a detached thread

2000-08-08 21:41 +0100  Jim Davidson  <jgdavidson@aol.com>  (d44574962797)

	* include/Makefile.global:
	Make gcc -shared -nostartfiles the default LDSO; upgrade to Tcl
	8.3.1

2000-08-08 21:37 +0100  Jim Davidson  <jgdavidson@aol.com>  (830a84be327c)

	* nsd/keepalive.c, nsd/nsd.h, nsd/nsmain.c, nsd/sched.c, nsd/serv.c:
	Re-ordered shutdowns to ensure connection threads are stopped before
	other shutdowns begin (e.g., sched, sockcallback)

2000-08-08 21:36 +0100  Jim Davidson  <jgdavidson@aol.com>  (6369ab18e5e4)

	* nsd/log.c:
	Removed severityRank array.

2000-08-06 22:22 +0100  Scott S. Goodwin  <scott@scottg.net>  (c5df4f0b9230)

	* ChangeLog, nsd/log.c:
	Fixed line 443 - assignment was reversed, causing segmentation fault
	at run time

2000-08-06 22:20 +0100  Scott S. Goodwin  <scott@scottg.net>  (7d1c800258fb)

	* ChangeLog, nssock/Makefile, nssock/t_stdlib.c:
	Updated to work with BSAFE v4 and 5

	You'll need to specify the path to your BSAFE libraries and the BSAFE
	version in the nssock/Makefile before compiling. If you don't have
	BSAFE and want to compile without SSL at all, edit the toplevel
	Makefile and take out all the "SSL=1" text.

2000-08-03 00:38 +0100  Kriston Rehberg  <kriston@aol.com>  (c50ddfbdfb3a)

	* ChangeLog, Makefile, doc/config.txt, doc/install.txt,
	include/Makefile.global, include/ns.h, include/nsextmsg.h,
	include/nspd.h, include/nsthread.h, include/tcl.h, nscgi/nscgi.c,
	nscp/nscp.c, nsd/Makefile, nsd/adp.c, nsd/adpfancy.c, nsd/auth.c,
	nsd/binder.c, nsd/cache.c, nsd/callbacks.c, nsd/config.c,
	nsd/conn.c, nsd/crypt.c, nsd/dbdrv.c, nsd/dbinit.c, nsd/dbtcl.c,
	nsd/dbutil.c, nsd/dns.c, nsd/drv.c, nsd/dstring.c, nsd/exec.c,
	nsd/fastpath.c, nsd/fd.c, nsd/filter.c, nsd/getopt.c,
	nsd/httptime.c, nsd/id.c, nsd/index.c, nsd/keepalive.c, nsd/lisp.c,
	nsd/listen.c, nsd/log.c, nsd/main.c, nsd/mimetypes.c, nsd/modload.c,
	nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c, nsd/nsthread.c,
	nsd/nswin32.c, nsd/op.c, nsd/pathname.c, nsd/pidfile.c, nsd/proc.c,
	nsd/quotehtml.c, nsd/random.c, nsd/request.c, nsd/return.c,
	nsd/rollfile.c, nsd/sched.c, nsd/serv.c, nsd/set.c, nsd/sock.c,
	nsd/sockcallback.c, nsd/str.c, nsd/tclcmds.c, nsd/tclconf.c,
	nsd/tclenv.c, nsd/tclfile.c, nsd/tclinit.c, nsd/tclinvoke.cpp,
	nsd/tclmisc.c, nsd/tclnsshare.cpp, nsd/tclop.c, nsd/tclresp.c,
	nsd/tclsched.c, nsd/tclset.c, nsd/tclstats.c, nsd/tclstub76.c,
	nsd/tclstub8x.c, nsd/tclthread.c, nsd/tclvar.c, nsd/unix.c,
	nsd/url.c, nsd/urlopen.c, nsd/urlspace.c, nsext/nsext.c,
	nsext/nsextmsg.c, nsext/nsextmsg.h, nslog/nslog.c, nspd/listen.c,
	nspd/log.c, nspd/main.c, nspd/pd.h, nsperm/compat.tcl,
	nsperm/init.tcl, nsperm/nsperm.c, nssock/Makefile, nssock/x509.c,
	tcl/debug.tcl, tcl/init.tcl, tcl/modlog.tcl, tcl/namespace.tcl,
	tcl/nsdb.tcl, tcl/sendmail.tcl, tcl/util.tcl, tcl7.6/Makefile,
	tcl7.6/generic/tclPosixStr.c, thread/Makefile, thread/compat.c,
	thread/cond.c, thread/cs.c, thread/cthread.cpp, thread/debug.c,
	thread/error.c, thread/master.c, thread/memory.c, thread/mutex.c,
	thread/oldpools.c, thread/osthread.c, thread/pool.c,
	thread/pthread.cpp, thread/reentrant.c, thread/rwlock.c,
	thread/sema.c, thread/signal.c, thread/sproc.cpp, thread/tcl8x.c,
	thread/test.c, thread/thread.c, thread/thread.h, thread/time.c,
	thread/tls.c, thread/win32.cpp, thread/windir.cpp:
	Build process now more rule-oriented; Ns_ModLog removed; [ns_info
	pid] added

	The cleaning rules "distclean" and "clobber" were removed.

	The Tcl libraries are always distcleaned when "gmake clean" is
	invoked.

	Rules that can be used as dependencies were made for libnsthread and
	the Tcl libraries -- their names are "libnsthread," "libtcl76," and
	"libtcl8x," respectively.

	PREFIX is now used as the installation directory (along with INST),
	so the more familiar "gmake install PREFIX=/usr/local/aolserver"
	will work.

	Additionally, gmaking in a subdirectory with dependencies now works.

	 The sourge of modlog has been removed. All code included with
	AOLserver that used Ns_ModLog now doesn't. Many log statements are
	now hopefully more standardized. This will be a continuing
	improvement over the next several updates. I would like to use gcc's
	__FUNCTION__ macro but it doesn't work on native compilers, but we
	may start using __LINE__ and __FILE__ instead or replace Ns_Log with
	a smart macro that takes care of all this stuff for us.

	 (NsTclInfoCmd): ns_info pid added to return the process id.

2000-08-01 21:46 +0100  Kriston Rehberg  <kriston@aol.com>  (a5fc79eb24fe)

	* nsd/adp.c:
	(Ns_AdpRequest): The enableexpire option was putting an Expires
	header even if it already existed.

2000-08-01 21:36 +0100  Kriston Rehberg  <kriston@aol.com>  (fd657722e434)

	* tcl/form.tcl:
	(ns_getform): MSIE presents the wrong stuff to the server when a
	multipart/formdata POST is redirected

	Workaround contributed by Joseph Bank.

2000-08-01 21:35 +0100  Kriston Rehberg  <kriston@aol.com>  (526f4ac56b1b)

	* nsd/tclsock.c:
	(NsTclSockOpenCmd): Removed spurious Ns_Log Notice from ns_sockopen

2000-08-01 21:12 +0100  Kriston Rehberg  <kriston@aol.com>  (887631f6bb75)

	* tcl/fastpath.tcl:
	(_ns_dirlist): base href removed -- links are now fully-qualified

2000-08-01 20:20 +0100  Kriston Rehberg  <kriston@aol.com>  (db5b6c164866)

	* tcl/http.tcl:
	(_ns_http_gets): \n replaced by \r in all but _ns_http_gets so that
	arbitrary headers get set correctly

	Contributed by Jin Choi <jsc@arsdigita.com>.

2000-08-01 20:16 +0100  Kriston Rehberg  <kriston@aol.com>  (1abc5c180110)

	* tcl7.6/generic/tclPosixStr.c:
	(Tcl_SignalMsg): Patch to Tcl 7.6 for Red Hat on SPARC architectures

	Contributed by Mike Chan <snotty@linux.com>.

2000-07-13 21:08 +0100  Kriston Rehberg  <kriston@aol.com>  (d5629cc14549)

	* include/tcl82.h: deleted file.
	* include/tcl82.h:
	Obsolete file removed

2000-07-13 20:47 +0100  Kriston Rehberg  <kriston@aol.com>  (d77ed0c89756)

	* include/Makefile.global:
	The fabulous echo command is now a macro

2000-07-13 19:43 +0100  Kriston Rehberg  <kriston@aol.com>  (dd5c282f5457)

	* nssock/keygen.tcl, nssock/sock.c, nssock/ssl.c, nssock/ssl.h,
	nssock/ssltcl.c, nssock/ssltcl.h, nssock/t_stdlib.c, nssock/x509.c,
	nssock/x509.h: new file.
	* nssock/nssock.c: deleted file.
	* ChangeLog, Makefile, nssock/Makefile, nssock/keygen.tcl,
	nssock/nssock.c, nssock/sock.c, nssock/ssl.c, nssock/ssl.h,
	nssock/ssltcl.c, nssock/ssltcl.h, nssock/t_stdlib.c, nssock/x509.c,
	nssock/x509.h:
	SSL support merged back with nssock

	Both nsssl and nssock use identical socket code. Rename nssock.c
	sock.c

2000-06-20 00:46 +0100  Scott S. Goodwin  <scott@scottg.net>  (3d9afbfda733)

	* doc/nsssl2.txt:
	Add a 'how to compile' section

	Updated with info on compiling the domestic module and using RSA
	BSAFE Crypto-C library versions 4.x and 5.x.

2000-05-09 22:42 +0100  Kriston Rehberg  <kriston@aol.com>  (8c8e876acf7a)

	* doc/config.txt, doc/index.html, doc/install.txt, doc/internals.txt,
	doc/nsftp.txt, doc/nspostgres.txt, doc/nsssl2.txt, doc/nsv.txt,
	doc/release.html, doc/threads.txt: new file.
	* ChangeLog, doc/config.txt, doc/index.html, doc/install.txt,
	doc/internals.txt, doc/nsftp.txt, doc/nspostgres.txt,
	doc/nsssl2.txt, doc/nsv.txt, doc/release.html, doc/threads.txt:
	Re-added doc directory which has had the online docs removed

2000-05-02 23:35 +0100  Kriston Rehberg  <kriston@aol.com>  (b09373d20078)

	* nsexample/Makefile:
	Tiny doc note

2000-05-02 23:21 +0100  Kriston Rehberg  <kriston@aol.com>  (f845d2755e53)

	* ChangeLog, Makefile, include/Makefile.global,
	include/Makefile.module, nsexample/Makefile:
	Use NSHOME variable to locate AOLserver

	NSHOME is automatically figured out in the top-level Makefile and
	all the lower Makefiles still use relative directory paths. The
	intention of NSHOME is for modules that do NOT live in the AOLserver
	source directory tree. The nsexample/Makefile explains how this
	works.

2000-05-02 15:09 +0100  Kriston Rehberg  <kriston@aol.com>  (b93c8c9721d2)

	* ChangeLog, Makefile, include/Makefile.global, nsd/Makefile:
	Add nsftp module, by Eric O'Laughlen

2000-05-02 14:39 +0000  Kriston Rehberg  <kriston@aol.com>  (425b1f6055c7)

	* .hgtags: new file.
	* .hgtags:
	Tag aolserver-3.0.0

2000-05-02 14:48 +0100  Kriston Rehberg  <kriston@aol.com>  (bc6d76890ed1 [aolserver-3.0.0])

	* ChangeLog, LICENSE.txt, Makefile, README.txt,
	include/Makefile.global, include/Makefile.module, include/ns.h,
	include/nsextmsg.h, include/nspd.h, include/nsthread.h,
	include/tcl.h, include/tcl76.h, include/tcl82.h, include/tcl83.h,
	include/tclDecls.h, nscgi/Makefile, nscgi/nscgi.c, nscp/Makefile,
	nscp/nscp.c, nsd/Makefile, nsd/adp.c, nsd/adpfancy.c, nsd/auth.c,
	nsd/binder.c, nsd/cache.c, nsd/callbacks.c, nsd/config.c,
	nsd/conn.c, nsd/crypt.c, nsd/dbdrv.c, nsd/dbinit.c, nsd/dbtcl.c,
	nsd/dbutil.c, nsd/dns.c, nsd/drv.c, nsd/dstring.c, nsd/exec.c,
	nsd/fastpath.c, nsd/fd.c, nsd/filter.c, nsd/getopt.c, nsd/getopt.h,
	nsd/httptime.c, nsd/htuu.c, nsd/id.c, nsd/index.c, nsd/keepalive.c,
	nsd/lisp.c, nsd/listen.c, nsd/log.c, nsd/main.c, nsd/mimetypes.c,
	nsd/modload.c, nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/nsthread.c, nsd/nswin32.c, nsd/op.c, nsd/pathname.c,
	nsd/pidfile.c, nsd/proc.c, nsd/quotehtml.c, nsd/random.c,
	nsd/request.c, nsd/return.c, nsd/rollfile.c, nsd/sched.c,
	nsd/serv.c, nsd/set.c, nsd/sock.c, nsd/sockcallback.c, nsd/str.c,
	nsd/tclcmds.c, nsd/tclconf.c, nsd/tclenv.c, nsd/tclfile.c,
	nsd/tclinit.c, nsd/tclinvoke.cpp, nsd/tclmisc.c, nsd/tclnsshare.cpp,
	nsd/tclop.c, nsd/tclresp.c, nsd/tclsched.c, nsd/tclset.c,
	nsd/tclsock.c, nsd/tclstats.c, nsd/tclstub76.c, nsd/tclstub8x.c,
	nsd/tclstubs.cpp, nsd/tclthread.c, nsd/tclvar.c, nsd/unix.c,
	nsd/url.c, nsd/urlencode.c, nsd/urlopen.c, nsd/urlspace.c,
	nsexample/Makefile, nsexample/nsexample.c, nsext/Makefile,
	nsext/nsext.c, nsext/nsextmsg.c, nsext/nsextmsg.h, nslog/Makefile,
	nslog/nslog.c, nspd/Makefile, nspd/listen.c, nspd/log.c,
	nspd/main.c, nspd/pd.h, nsperm/Makefile, nsperm/compat.tcl,
	nsperm/group, nsperm/hosts.allow, nsperm/hosts.deny,
	nsperm/init.tcl, nsperm/nsperm.c, nsperm/passwd, nsperm/perms,
	nssock/Makefile, nssock/nssock.c, tcl/debug.tcl, tcl/fastpath.tcl,
	tcl/file.tcl, tcl/form.tcl, tcl/http.tcl, tcl/init.tcl,
	tcl/modlog.tcl, tcl/namespace.tcl, tcl/nsdb.tcl, tcl/prodebug.tcl,
	tcl/sendmail.tcl, tcl/util.tcl, tcl7.6/Makefile, tcl7.6/README-
	aolserver.txt, tcl7.6/compat/README, tcl7.6/compat/dirent.h,
	tcl7.6/compat/dirent2.h, tcl7.6/compat/dlfcn.h,
	tcl7.6/compat/fixstrtod.c, tcl7.6/compat/float.h,
	tcl7.6/compat/getcwd.c, tcl7.6/compat/gettod.c,
	tcl7.6/compat/license.terms, tcl7.6/compat/limits.h,
	tcl7.6/compat/opendir.c, tcl7.6/compat/stdlib.h,
	tcl7.6/compat/strftime.c, tcl7.6/compat/string.h,
	tcl7.6/compat/strncasecmp.c, tcl7.6/compat/strstr.c,
	tcl7.6/compat/strtod.c, tcl7.6/compat/strtol.c,
	tcl7.6/compat/strtoul.c, tcl7.6/compat/tclErrno.h,
	tcl7.6/compat/tmpnam.c, tcl7.6/compat/unistd.h,
	tcl7.6/compat/waitpid.c, tcl7.6/generic/README,
	tcl7.6/generic/panic.c, tcl7.6/generic/regexp.c,
	tcl7.6/generic/tcl.h, tcl7.6/generic/tclAsync.c,
	tcl7.6/generic/tclBasic.c, tcl7.6/generic/tclCkalloc.c,
	tcl7.6/generic/tclClock.c, tcl7.6/generic/tclCmdAH.c,
	tcl7.6/generic/tclCmdIL.c, tcl7.6/generic/tclCmdMZ.c,
	tcl7.6/generic/tclDate.c, tcl7.6/generic/tclEnv.c,
	tcl7.6/generic/tclEvent.c, tcl7.6/generic/tclExpr.c,
	tcl7.6/generic/tclFCmd.c, tcl7.6/generic/tclFHandle.c,
	tcl7.6/generic/tclFileName.c, tcl7.6/generic/tclGet.c,
	tcl7.6/generic/tclGetDate.y, tcl7.6/generic/tclHash.c,
	tcl7.6/generic/tclHistory.c, tcl7.6/generic/tclIO.c,
	tcl7.6/generic/tclIOCmd.c, tcl7.6/generic/tclIOSock.c,
	tcl7.6/generic/tclIOUtil.c, tcl7.6/generic/tclInt.h,
	tcl7.6/generic/tclInterp.c, tcl7.6/generic/tclLink.c,
	tcl7.6/generic/tclLoad.c, tcl7.6/generic/tclLoadNone.c,
	tcl7.6/generic/tclMain.c, tcl7.6/generic/tclNotify.c,
	tcl7.6/generic/tclParse.c, tcl7.6/generic/tclPatch.h,
	tcl7.6/generic/tclPkg.c, tcl7.6/generic/tclPort.h,
	tcl7.6/generic/tclPosixStr.c, tcl7.6/generic/tclPreserve.c,
	tcl7.6/generic/tclProc.c, tcl7.6/generic/tclRegexp.h,
	tcl7.6/generic/tclTest.c, tcl7.6/generic/tclUtil.c,
	tcl7.6/generic/tclVar.c, tcl7.6/generic/tclVar.c-,
	tcl7.6/unix/Makefile.in, tcl7.6/unix/README, tcl7.6/unix/configure,
	tcl7.6/unix/configure.in, tcl7.6/unix/dltest/Makefile.in,
	tcl7.6/unix/dltest/README, tcl7.6/unix/dltest/configure,
	tcl7.6/unix/dltest/configure.in, tcl7.6/unix/dltest/pkga.c,
	tcl7.6/unix/dltest/pkgb.c, tcl7.6/unix/dltest/pkgc.c,
	tcl7.6/unix/dltest/pkgd.c, tcl7.6/unix/dltest/pkge.c,
	tcl7.6/unix/dltest/pkgf.c, tcl7.6/unix/install-sh,
	tcl7.6/unix/ldAix, tcl7.6/unix/mkLinks, tcl7.6/unix/porting.notes,
	tcl7.6/unix/tclAppInit.c, tcl7.6/unix/tclConfig.sh.in,
	tcl7.6/unix/tclLoadAix.c, tcl7.6/unix/tclLoadAout.c,
	tcl7.6/unix/tclLoadDl.c, tcl7.6/unix/tclLoadDl2.c,
	tcl7.6/unix/tclLoadDld.c, tcl7.6/unix/tclLoadNext.c,
	tcl7.6/unix/tclLoadOSF.c, tcl7.6/unix/tclLoadShl.c,
	tcl7.6/unix/tclMtherr.c, tcl7.6/unix/tclUnixChan.c,
	tcl7.6/unix/tclUnixFCmd.c, tcl7.6/unix/tclUnixFile.c,
	tcl7.6/unix/tclUnixInit.c, tcl7.6/unix/tclUnixNotfy.c,
	tcl7.6/unix/tclUnixPipe.c, tcl7.6/unix/tclUnixPort.h,
	tcl7.6/unix/tclUnixSock.c, tcl7.6/unix/tclUnixTest.c,
	tcl7.6/unix/tclUnixTime.c, thread/Makefile, thread/compat.c,
	thread/cond.c, thread/cs.c, thread/cthread.cpp, thread/debug.c,
	thread/error.c, thread/master.c, thread/memory.c, thread/mutex.c,
	thread/oldpools.c, thread/osthread.c, thread/pool.c,
	thread/pthread.cpp, thread/reentrant.c, thread/rwlock.c,
	thread/sema.c, thread/signal.c, thread/sproc.cpp, thread/tcl8x.c,
	thread/test.c, thread/thread.c, thread/thread.h, thread/time.c,
	thread/tls.c, thread/win32.cpp, thread/windir.cpp, win32/README,
	win32/aolserver.dsw, win32/cgitest/cgitest.dsp,
	win32/cgitest/main.c, win32/main/main.dsp, win32/nscgi/nscgi.dsp,
	win32/nscp/nscp.dsp, win32/nsd/nsd.dsp, win32/nslog/nslog.dsp,
	win32/nsodbc/nsodbc.dsp, win32/nsperm/nsperm.dsp,
	win32/nssock/nssock.dsp, win32/nstcl/nstcl.dsp,
	win32/nsthread/nsthread.dsp, win32/test/nsd.tcl,
	win32/test/servers/test/pages/cgitest.bat,
	win32/test/servers/test/pages/index.adp,
	win32/threadtest/threadtest.dsp: new file.
	* ChangeLog, LICENSE.txt, Makefile, README.txt,
	include/Makefile.global, include/Makefile.module, include/ns.h,
	include/nsextmsg.h, include/nspd.h, include/nsthread.h,
	include/tcl.h, include/tcl76.h, include/tcl82.h, include/tcl83.h,
	include/tclDecls.h, nscgi/Makefile, nscgi/nscgi.c, nscp/Makefile,
	nscp/nscp.c, nsd/Makefile, nsd/adp.c, nsd/adpfancy.c, nsd/auth.c,
	nsd/binder.c, nsd/cache.c, nsd/callbacks.c, nsd/config.c,
	nsd/conn.c, nsd/crypt.c, nsd/dbdrv.c, nsd/dbinit.c, nsd/dbtcl.c,
	nsd/dbutil.c, nsd/dns.c, nsd/drv.c, nsd/dstring.c, nsd/exec.c,
	nsd/fastpath.c, nsd/fd.c, nsd/filter.c, nsd/getopt.c, nsd/getopt.h,
	nsd/httptime.c, nsd/htuu.c, nsd/id.c, nsd/index.c, nsd/keepalive.c,
	nsd/lisp.c, nsd/listen.c, nsd/log.c, nsd/main.c, nsd/mimetypes.c,
	nsd/modload.c, nsd/nsconf.c, nsd/nsd.h, nsd/nsmain.c,
	nsd/nsthread.c, nsd/nswin32.c, nsd/op.c, nsd/pathname.c,
	nsd/pidfile.c, nsd/proc.c, nsd/quotehtml.c, nsd/random.c,
	nsd/request.c, nsd/return.c, nsd/rollfile.c, nsd/sched.c,
	nsd/serv.c, nsd/set.c, nsd/sock.c, nsd/sockcallback.c, nsd/str.c,
	nsd/tclcmds.c, nsd/tclconf.c, nsd/tclenv.c, nsd/tclfile.c,
	nsd/tclinit.c, nsd/tclinvoke.cpp, nsd/tclmisc.c, nsd/tclnsshare.cpp,
	nsd/tclop.c, nsd/tclresp.c, nsd/tclsched.c, nsd/tclset.c,
	nsd/tclsock.c, nsd/tclstats.c, nsd/tclstub76.c, nsd/tclstub8x.c,
	nsd/tclstubs.cpp, nsd/tclthread.c, nsd/tclvar.c, nsd/unix.c,
	nsd/url.c, nsd/urlencode.c, nsd/urlopen.c, nsd/urlspace.c,
	nsexample/Makefile, nsexample/nsexample.c, nsext/Makefile,
	nsext/nsext.c, nsext/nsextmsg.c, nsext/nsextmsg.h, nslog/Makefile,
	nslog/nslog.c, nspd/Makefile, nspd/listen.c, nspd/log.c,
	nspd/main.c, nspd/pd.h, nsperm/Makefile, nsperm/compat.tcl,
	nsperm/group, nsperm/hosts.allow, nsperm/hosts.deny,
	nsperm/init.tcl, nsperm/nsperm.c, nsperm/passwd, nsperm/perms,
	nssock/Makefile, nssock/nssock.c, tcl/debug.tcl, tcl/fastpath.tcl,
	tcl/file.tcl, tcl/form.tcl, tcl/http.tcl, tcl/init.tcl,
	tcl/modlog.tcl, tcl/namespace.tcl, tcl/nsdb.tcl, tcl/prodebug.tcl,
	tcl/sendmail.tcl, tcl/util.tcl, tcl7.6/Makefile, tcl7.6/README-
	aolserver.txt, tcl7.6/compat/README, tcl7.6/compat/dirent.h,
	tcl7.6/compat/dirent2.h, tcl7.6/compat/dlfcn.h,
	tcl7.6/compat/fixstrtod.c, tcl7.6/compat/float.h,
	tcl7.6/compat/getcwd.c, tcl7.6/compat/gettod.c,
	tcl7.6/compat/license.terms, tcl7.6/compat/limits.h,
	tcl7.6/compat/opendir.c, tcl7.6/compat/stdlib.h,
	tcl7.6/compat/strftime.c, tcl7.6/compat/string.h,
	tcl7.6/compat/strncasecmp.c, tcl7.6/compat/strstr.c,
	tcl7.6/compat/strtod.c, tcl7.6/compat/strtol.c,
	tcl7.6/compat/strtoul.c, tcl7.6/compat/tclErrno.h,
	tcl7.6/compat/tmpnam.c, tcl7.6/compat/unistd.h,
	tcl7.6/compat/waitpid.c, tcl7.6/generic/README,
	tcl7.6/generic/panic.c, tcl7.6/generic/regexp.c,
	tcl7.6/generic/tcl.h, tcl7.6/generic/tclAsync.c,
	tcl7.6/generic/tclBasic.c, tcl7.6/generic/tclCkalloc.c,
	tcl7.6/generic/tclClock.c, tcl7.6/generic/tclCmdAH.c,
	tcl7.6/generic/tclCmdIL.c, tcl7.6/generic/tclCmdMZ.c,
	tcl7.6/generic/tclDate.c, tcl7.6/generic/tclEnv.c,
	tcl7.6/generic/tclEvent.c, tcl7.6/generic/tclExpr.c,
	tcl7.6/generic/tclFCmd.c, tcl7.6/generic/tclFHandle.c,
	tcl7.6/generic/tclFileName.c, tcl7.6/generic/tclGet.c,
	tcl7.6/generic/tclGetDate.y, tcl7.6/generic/tclHash.c,
	tcl7.6/generic/tclHistory.c, tcl7.6/generic/tclIO.c,
	tcl7.6/generic/tclIOCmd.c, tcl7.6/generic/tclIOSock.c,
	tcl7.6/generic/tclIOUtil.c, tcl7.6/generic/tclInt.h,
	tcl7.6/generic/tclInterp.c, tcl7.6/generic/tclLink.c,
	tcl7.6/generic/tclLoad.c, tcl7.6/generic/tclLoadNone.c,
	tcl7.6/generic/tclMain.c, tcl7.6/generic/tclNotify.c,
	tcl7.6/generic/tclParse.c, tcl7.6/generic/tclPatch.h,
	tcl7.6/generic/tclPkg.c, tcl7.6/generic/tclPort.h,
	tcl7.6/generic/tclPosixStr.c, tcl7.6/generic/tclPreserve.c,
	tcl7.6/generic/tclProc.c, tcl7.6/generic/tclRegexp.h,
	tcl7.6/generic/tclTest.c, tcl7.6/generic/tclUtil.c,
	tcl7.6/generic/tclVar.c, tcl7.6/generic/tclVar.c-,
	tcl7.6/unix/Makefile.in, tcl7.6/unix/README, tcl7.6/unix/configure,
	tcl7.6/unix/configure.in, tcl7.6/unix/dltest/Makefile.in,
	tcl7.6/unix/dltest/README, tcl7.6/unix/dltest/configure,
	tcl7.6/unix/dltest/configure.in, tcl7.6/unix/dltest/pkga.c,
	tcl7.6/unix/dltest/pkgb.c, tcl7.6/unix/dltest/pkgc.c,
	tcl7.6/unix/dltest/pkgd.c, tcl7.6/unix/dltest/pkge.c,
	tcl7.6/unix/dltest/pkgf.c, tcl7.6/unix/install-sh,
	tcl7.6/unix/ldAix, tcl7.6/unix/mkLinks, tcl7.6/unix/porting.notes,
	tcl7.6/unix/tclAppInit.c, tcl7.6/unix/tclConfig.sh.in,
	tcl7.6/unix/tclLoadAix.c, tcl7.6/unix/tclLoadAout.c,
	tcl7.6/unix/tclLoadDl.c, tcl7.6/unix/tclLoadDl2.c,
	tcl7.6/unix/tclLoadDld.c, tcl7.6/unix/tclLoadNext.c,
	tcl7.6/unix/tclLoadOSF.c, tcl7.6/unix/tclLoadShl.c,
	tcl7.6/unix/tclMtherr.c, tcl7.6/unix/tclUnixChan.c,
	tcl7.6/unix/tclUnixFCmd.c, tcl7.6/unix/tclUnixFile.c,
	tcl7.6/unix/tclUnixInit.c, tcl7.6/unix/tclUnixNotfy.c,
	tcl7.6/unix/tclUnixPipe.c, tcl7.6/unix/tclUnixPort.h,
	tcl7.6/unix/tclUnixSock.c, tcl7.6/unix/tclUnixTest.c,
	tcl7.6/unix/tclUnixTime.c, thread/Makefile, thread/compat.c,
	thread/cond.c, thread/cs.c, thread/cthread.cpp, thread/debug.c,
	thread/error.c, thread/master.c, thread/memory.c, thread/mutex.c,
	thread/oldpools.c, thread/osthread.c, thread/pool.c,
	thread/pthread.cpp, thread/reentrant.c, thread/rwlock.c,
	thread/sema.c, thread/signal.c, thread/sproc.cpp, thread/tcl8x.c,
	thread/test.c, thread/thread.c, thread/thread.h, thread/time.c,
	thread/tls.c, thread/win32.cpp, thread/windir.cpp, win32/README,
	win32/aolserver.dsw, win32/cgitest/cgitest.dsp,
	win32/cgitest/main.c, win32/main/main.dsp, win32/nscgi/nscgi.dsp,
	win32/nscp/nscp.dsp, win32/nsd/nsd.dsp, win32/nslog/nslog.dsp,
	win32/nsodbc/nsodbc.dsp, win32/nsperm/nsperm.dsp,
	win32/nssock/nssock.dsp, win32/nstcl/nstcl.dsp,
	win32/nsthread/nsthread.dsp, win32/test/nsd.tcl,
	win32/test/servers/test/pages/cgitest.bat,
	win32/test/servers/test/pages/index.adp,
	win32/threadtest/threadtest.dsp:
	Initial revision

